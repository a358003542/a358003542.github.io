<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="baidu-site-verification" content="D4VqC4HppC"/>
    <meta name="msvalidate.01" content="55CB117A61A6F8286173763FB18D9625"/>

        <meta name="author" content="cdwanze"/>
        <meta name="copyright" content="cdwanze"/>

            <meta property="og:type" content="article"/>
        <meta name="twitter:card" content="summary">

        <meta property="og:title" content="cdwanze的博文"/>
        <meta name="twitter:title" content="cdwanze的博文">
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content="cdwanze的博文"/>
    <meta property="og:article:author" content="cdwanze"/>
    <title>
    cdwanze的博文
</title>


        <link href="/theme/css/font-awesome.css" rel="stylesheet"
              media="screen">
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet"
              media="screen">

            <link rel="stylesheet" type="text/css"
                  href="/theme/css/pygments.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/elegant.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/custom.css" media="screen">






</head>
<body>

<nav class="navbar">
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".navbar-collapse"
                    aria-expanded="false">
                <span class="sr-only">Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="https://www.cdwanze.work"><span
                    class=site-name>网站首页</span></a>
        </div>


        <div class="navbar-collapse collapse">
            <form action="/search.html"
                  onsubmit="return validateForm(this.elements['q'].value);"
                  class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" name="q" id="tipue_search_input"
                           class="form-control" placeholder="Search..."
                           style="width:430px;">
                </div>
                <button class="btn btn-default" type="submit">搜索</button>
            </form>


            <ul class="nav navbar-nav nav-pills navbar-right">
                <li  class="active">
                    <a href="">博文首页</a></li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle"
                           data-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">查找文章<span
                                class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a class="slowscroll" href="/categories.html">按分类</a>
                            </li>
                            <li><a class="slowscroll" href="/tags.html">按标签</a>
                            </li>
                        </ul>
                    </li>


                        <li >
                            <a href="/guan-yu-ben-wang-zhan.html">关于本网站</a>
                        </li>
                        <li >
                            <a href="/gong-gao.html">公告</a>
                        </li>
            </ul>


        </div>
    </div>
</nav>


<div class="container-fluid">
    <div class="col-md-1 col-md-1-left"></div>
    <div class="col-md-10">


    <style>
        article {
            border: 1px solid #aaa;
        }

        section {
            padding: 1em;
        }

        article > p {
            padding-left: 0.5em;
            padding-right: 0.5em;
        }

        #gotop {
            position: fixed;
            right: 12%;
            float: right;
            top: 50%;
        }

        @media screen and (max-width: 600px) {
            #gotop {
                display: none;
            }
        }
    </style>

    <button id="gotop" type="button" class="btn btn-default">
        <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
    </button>



    <div class="row">

        <div class="row">
         </div>

             <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <header>
                        <h1 id="recent-posts">最近博文
                            <a id="allposts" href="/archives.html">所有博文</a>
                        </h1>
                    </header>


                    <div class="recent-posts">
<nav aria-label="Page Navigation">
    <ul class="pager">
        <li class="previous">
            <a href="/index3.html" aria-label="Previous" >
                <span aria-hidden="true">&larr;<span>Previous</span></span>
            </a>
        </li>


        <li class="next">
            <a href="/index5.html" aria-label="Next" >
                <span aria-hidden="true">&rarr;<span>Next</span></span>
            </a>
        </li>

    </ul>
</nav>
 
                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonyu-yan-xue-xi-zhi-xue-xi-zi-liao-zheng-li.html">python语言学习之-学习资料整理
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-17T00:00:00+08:00">2018年 6月 17日
                                        </time>
                                    </div>
                                </section>
                                
<ul>
<li>
<p>python入门教程，python官网上的tutorial。原作者：Guido van Rossum  Fred L. Drake ；中文翻译：刘鑫等；版本：2013-10-28；pdf下载链接：<a href="https://drive.google.com/open?id=0ByWxOeitx54PSW40bU5zNVhuMlU&amp;authuser=0">python入门教程</a>  。</p>
</li>
<li>
<p>learning python，主要python语言参考，我主要参看了python学习手册（第四版）。原作者：Mark Lutz，中文翻译：李军，刘红伟等。</p>
</li>
<li>
<p>programming python，作者Mark Lutz对python编程的进阶讨论；版本：第四版。</p>
</li>
<li>
<p>python <a href="https://docs.python.org/3/">官网上的资料</a> 。</p>
</li>
<li>
<p>第三方模块参考手册，如numpy, scipy, matplotlib等等第三方模块官网上发布的官方参考手册。</p>
</li>
<li>
<p>dive into python3 <a href="http://www.diveintopython3.net/index.html">english version</a> , 这是<a href="http://sebug.net/paper/books/dive-into-python3/index.html">中文版</a> 。</p>
</li>
<li>
<p>A Guide to Python's Magic …</p></li></ul>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/docker.html">docker
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#tools-ref">tools
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>关于docker是什么请参看 <a href="https://docker_practice.gitee.io/introduction/what.html">这个网页</a> ，说docker将改变软件生态确实是不为过的。老实说在接触docker之后感觉之前学到的很多东西，比如linux系统相关的一些，ansible等等部署工具相关的一些，virtualbox和 vagrant相关的一些，都在慢慢过时和淘汰了。当然那些工具还是很有用的，说他们被淘汰了是有点过了，更确切来说，对于一般玩家来说，可以节省更多的精力和时间，而不需要折腾那些工具那些配置学习折腾个老半天了。</p>
<blockquote>
<p>That‘s why we love docker.</p>
</blockquote>
<p>但实际上docker带来的变化远远不止于只是一个可以节省开发者做某些事情的时间的一个不错的工具那么简单，其伴随着SPPS，软件即服务，更确切来说整个互联网的大背景下，应运而生的。与之相应的，开发者们顺应这个时代，在编码，软件应用的很多方面，都需要做出改变。请读者进一步阅读 https://12factor.net/zh_cn/ 里面的讨论。</p>
<p>实际上之前我折腾vagrant的时候，就很是认同这个理念： 那就是开发，测试，生产一致的环境，彻底解决，在这里可以运行，在这里就不行了的问题。而vagrant的控制virtualbox创建虚拟机的方式，在我看来显得略微笨拙了点，配置的繁琐，似乎并没有很好地解决这个问题 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/python-dateutilmo-kuai.html">python-dateutil模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                <p>一般能够使用python的内置模块datetime解决的问题或者简单写几个辅助函数就能解决的问题是没必要上 python-dateutil 模块的，但有的时候某些问题，上python-dateutil模块会非常的方便，然后我发现好多有名的模块都默认安装这个模块了。</p>
<h2 id="relativedelta">relativedelta</h2>
<p>某些问题，用datetime的replace将某个值设为0或者什么值，或者用timedelta来减去什么值，大部分都能解决，但有的时候，比如跨月份涉及到要考虑天数不等或者其他等等问题，用relativedelta还是很方便的。</p>
<p>总的说来涉及到datetime的某个跨度的计算问题，还是推荐使用 relativedelta函数。</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil.relativedelta</span> <span class="kn">import</span> <span class="n">relativedelta</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="n">sdt</span> <span class="o">=</span> <span class="n">now</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="n">months</span><span class="p">)</span>
</pre></div>


<h2 id="rrule">rrule</h2>
<p>虽然没有lrule，但根据上面的relativedelta配置的起始时间，然后指定结束时间，通过rrule函数来生成一个时间区间，有时是很方便的。</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil.rrule</span> <span class="kn">import</span> <span class="n">rrule</span><span class="p">,</span> <span class="n">MONTHLY</span>
<span class="nb">list</span><span class="p">(</span><span class="n">rrule</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="n">MONTHLY</span><span class="p">,</span> <span class="n">dtstart</span><span class="o">=</span><span class="n">sdt</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="n">now …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonpa-chong-zhi-biao-dan-he-deng-lu-deng-xiang-guan.html">python爬虫之-表单和登陆等相关
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonpa-chong-ref">python爬虫
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<p>表单简单来说就是一个前端友好的界面，其实质就是发送了 一个 POST 请求。</p>
<p>关键是要理解前端的表单界面，具体POST了哪些参量。</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">action=</span><span class="s">"???"</span>
    <span class="err">&lt;input</span> <span class="na">type=</span><span class="s">...</span> <span class="na">name=</span><span class="s">"firstname"</span> <span class="err">...</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="err">type</span> <span class="err">...</span>
    <span class="err">submit</span>
<span class="err">&lt;/form</span><span class="nt">&gt;</span>
</pre></div>
<p>input 的  <strong>name</strong> 就是具体 POST 的参量，然后就是action那边就是你要 POST 的目的地。</p>
<p>类似的表单还有很多其他元素，比如checkbox之类的，其都不过是为了让用户快速地设置某个参量罢了。</p>
<h2 id="cookies">登录的cookies问题</h2>
<p>因为http无状态，所以有cookies 和 session ，服务端数据库记录session，cookies就是客户端。爬虫要正常登录，记得保留好登录成功之后的cookies。</p>
<p>多次请求的时候，用requests的cookies保存和设置就不好用了。记得使用requests的session机制。</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'username' …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonpa-chong-zhi-fang-zhi-bei-feng-de-ce-lue.html">python爬虫之-防止被封的策略
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonpa-chong-ref">python爬虫
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<p>防止被封的首要策略就是尽量的为别人的服务器多考虑下，让自己写的爬虫少请求，每次请求都是有效的核心请求获取最核心的数据，不管是刷页面还是刷ajax，多次请求之间应该设置一个停顿时间。</p>
<div class="highlight"><pre><span></span><span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
<p>在上面的首要原则的基础上，下面介绍的很多实战技巧，其实都符合一个大的原则：尽可能地让你的爬虫和人浏览网页没有区别。</p>
<h2 id="http">http请求头调整</h2>
<p>user-agent 设置，而且时不时的切换下。</p>
<p>虽然目前还没有遇到，不过我推测可能 Referrer 这个header在某些场景下是有些文章的。</p>
<p>还有 Accept-Language 也可能有用。</p>
<h2 id="cookies">Cookies</h2>
<p>有些情况下cookies的正常获取需要javascript的支持。cookies总的原则是第一次请求获取到cookies，然后后面的很多次请求都使用这个cookies即可。</p>
<p>不过反爬虫cookies一般都会有个时间限制，一个简单的做法就是这边也设置个时间，定时获取最新的cookies或者，一定请求量之后再获取一个新的cookies。</p>
<p>具体使用 scrapy-splash 了解下。</p>
<h2 id="_1">表单陷阱</h2>
<p>有的表单里面有：</p>
<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="k">input</span> <span class="k">type</span><span class="o">=</span><span class="ss">"hidden"</span> <span class="p">...</span>
</pre></div>
<p>我们要记住人如果在页面上点击，这个没有显示的字段的值也会一并送过去，而他们服务器那边会根据这个值可能是个加密的某个值来判断这个请求是人点的还是爬虫行为。</p>
<p>最好的策略是先把整个表单内容爬过来，收集好之后再发送表单请求。</p>
<p>和上面的情况相反，还有一种情况，页面表单发送可能有特别的处理，某些表单字段，不管用户看得见看不见，你都不能发送过去 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonpa-chong-zhi-zi-ran-yu-yan-chu-li-xiang-guan.html">python爬虫之-自然语言处理相关
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonpa-chong-ref">python爬虫
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                <p>网页里面的内容大部分是文本，所以爬虫继续深入不可避免要研究自然语言处理的。</p>
<p>爬虫越学到后面就会明白，漫无目的的爬虫真的只是入门阶段，而爬虫进阶很多时候就要在这个爬虫定向上下功夫。</p>
<p>本文不是介绍自然语言处理相关知识的，只是就和爬虫相关做一些讨论和思考。</p>
<p>比如分析文章得到热门词，然后根据热门词进一步定向搜索定向爬取。</p>
<p>但在这里我们说得更加抽象一点，而这就是爬虫进阶和自然语言处理结合的理想状态，简言之就是：</p>
<p>好像一个人在阅读一篇文章，然后真的理解了里面的文章和里面的词语，然后他自己去决定哪个url该点，哪个关键词该收集，那篇文章有价值，那篇文章该分到哪一类等等。</p>
<p>下面列出一些自然语言处理的基本功，想要爬虫进阶深造的可能就要开始把这些基本功打扎实了：</p>
<ul>
<li>分词</li>
<li>词频统计</li>
<li>ngram模型等分析词语之间的关系</li>
<li></li>
</ul>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonpa-chong-zhi-zi-ti-fan-pa-chong.html">python爬虫之-字体反爬虫
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonpa-chong-ref">python爬虫
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<p>在爬虫的时候，你分析网页会看到，某些东西看上去是乱码，其css设置了一种额外的字体。怎么破解里面的内容呢？</p>
<p>首先你需要把目标字体下载下来，通常这种字体有各种各样的名字，里面的具体字体codepoint也是随机的...</p>
<p>如果你下载一个fontcreator会看到具体哪个字对应哪个codepoint，而爬虫这边编码，我们需要使用python的 fonttools库来加载字体。</p>
<p>首先你需要下载好字体，保存好字体做好缓存工作。</p>
<p>见本文的参考资料2，然后就是利用 fonttools 模块加载目标字体。</p>
<div class="highlight"><pre><span></span><span class="n">font</span> <span class="o">=</span> <span class="n">TTFont</span><span class="p">(</span><span class="n">font_filename</span><span class="p">)</span>
</pre></div>
<p>然后就是分析这个字体的cmap tables的cmap数据，不同的字体似乎情况不同，这个要实际分析，由于fonttools这个模块文档较少，加上我对字体知识不太多，所以只能简单摸索下了。</p>
<div class="highlight"><pre><span></span><span class="n">font_mapping</span> <span class="o">=</span> <span class="n">font</span><span class="p">[</span><span class="s1">'cmap'</span><span class="p">].</span><span class="n">tables</span><span class="p">[</span><span class="o">?</span><span class="p">].</span><span class="n">cmap</span>
</pre></div>
<p>如果你找到 font_mapping 了，字符 用python的 ord 函数处理下，就能得到目标字符的 unicode code point，也就是我们上面说的字体的code point，在这个 font_mapping 里面你会看到的，然后具体什么内容就出来了 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonzhong-de-wei-cao-zuo.html">python中的位操作
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<p>位操作似乎用c语言会更方便，不过我们可以先把这块概念弄清楚，然后迁移到c代码是很方便的。</p>
<h2 id="1">问题1，如何表示任意长度的基于字节的 位向量</h2>
<p>比如说我想表达 01010101010101 
答： </p>
<div class="highlight"><pre><span></span><span class="mi">0</span><span class="n">b01010101010101</span>
</pre></div>
<h2 id="2">问题2 上面任意长度的位向量，我如何实现遍历逻辑</h2>
<p>是的，我是看编程珠玑确定这些问题的，然后发现python，当然，已经有类似的实现库了： <a href="https://github.com/ilanschnell/bitarray">https://github.com/ilanschnell/bitarray</a></p>
<p>下面好好研究下这个项目的源码。</p>
<h3 id="4">问题4 如何建立位图映射</h3>
<p>比如 0b1010101010 -&gt; 对应的是 数字集合 {1,3,5,7,9}</p>
<h3 id="5">问题5 有没有可能建立其他位图映射</h3>
<h2 id="3">问题3 常规的位操作运算符，你帮我说说吧</h2>
<h3 id="_1">按位与</h3>
<div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="n">b111101010</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="n">b101010101</span>
<span class="n">print</span><span class="p">(</span><span class="n">bin …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/shi-yong-cythonlai-jia-su-python.html">使用cython来加速python
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">找到性能瓶颈所在</h2>
<p>首先需要确认脚本或者某个函数具体到底是哪里出现了性能瓶颈：</p>
<div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">cProfile</span> <span class="n">test</span><span class="p">.</span><span class="n">py</span>
</pre></div>
<p>或者使用jupyter notebook 的timeit 功能，或者自己写 time计时。</p>
<p>目前我知道的循环结构提速很明显，然后指定静态类型会提速。</p>
<p>一般的python代码cython都是支持的，但一般我们是重点去开发那个限速的目标函数，而不会到处优化的。</p>
<p>参考资料1的例子，没有加速，N设置为3000，用时 53.301s，加速之后，用时4.186s。然后没有加速的那个exp运算了很多很多次，大概花了一两秒的样子，所以我们看到原始python代码在循环操作上开销很大。某些关键计算如果循环次数太多，那么就要考虑上c扩展优化了。</p>
<p>在做性能测试的时候有一类耗时较多的操作是不用考虑c代码优化的，这类耗时多的操作就是IO等待型操作，有的是等待数据库IO操作，有的是等待文件读写IO操作，有的是等待网络IO请求等等。这些请求很多都和socket套接字请求相关。</p>
<h2 id="pyx">pyx文件</h2>
<p>关于pyx文件的更多请查看cython的官方手册。</p>
<p>下面重点讲一下 python模块包的管理方案，推荐是利用 setuptools 来，</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/12factor-app-talk.html">软件即服务的12因素方法论
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#si-xiang-ref">思想
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-13T00:00:00+08:00">2018年 6月 13日
                                        </time>
                                    </div>
                                </section>
                                
<p>本文主要学习 <a href="https://12factor.net/zh_cn/">这个网站</a> ，这个网站提出了软件即服务架构的12因素方法论。在目前软件开发，部署docker化，微服务，云服务，分布式架构等大趋势下，软件即对外提供一种http api服务的定位是很具有普遍性的。本文的一些讨论是很值得我们细细去思考的。</p>
<h2 id="_1">前言</h2>
<p>Adam Wiggins 研究了数以百计的应用程序的开发和部署，并在Heroku平台上数十万应用程序的开发运作和扩展过程，写作了这个博客： <a href="https://12factor.net/zh_cn/">https://12factor.net/zh_cn/</a> 。</p>
<p>在互联网Internet的大背景下，软件作为一种服务，更确切来说作为一种api服务而存在是一种具有普适性的架构模式，不管软件自身功能如何，但软件本身只是一个提供了一些对外api接口的工具的定位，无疑是面向整个互联网和面向未来的。</p>
<p>同时这里的讨论不光涉及到部署和运维，实际上，在软件开始编写时的架构设计和具体编码部分内部细节，编码者的思路也需要作出相应的调整。</p>
<h2 id="_2">总的原则</h2>
<ul>
<li>使用<strong>标准化</strong>流程自动配置，从而使新的开发者花费最少的学习成本加入这个项目。</li>
<li>和操作系统之间尽可能的<strong>划清界限</strong>，在各个系统中提供<strong>最大的可移植性</strong>。</li>
<li>适合<strong>部署</strong>在现代的<strong>云计算平台</strong>，从而在服务器和系统管理方面节省资源。</li>
<li>将开发环境和生产环境的<strong>差异降至最低</strong>，并使用<strong>持续交付</strong>实施敏捷开发 …</li></ul>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonyu-yan-zhi-dan-li-mo-shi.html">python语言之-单例模式
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-13T00:00:00+08:00">2018年 6月 13日
                                        </time>
                                    </div>
                                </section>
                                
<p>某些情况下你需要确保某个类只有一个实例，这叫做单例模式。</p>
<p>python中的对象有 <code>__new__</code> 方法 和 <code>__init__</code> 方法，其中 <code>__new__</code> 方法会返回你的类具体创建的实例，而 <code>__init__</code> 方法仅仅和你的实例化初始化之后的一些额外动作相关。</p>
<p>于是我们有：</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SingleInstance</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s1">'_instance'</span><span class="p">):</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">SingleInstance</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>
</pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonyu-yan-zhi-formathan-shu.html">python语言之-format函数
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-13T00:00:00+08:00">2018年 6月 13日
                                        </time>
                                    </div>
                                </section>
                                <p>format函数或者说字符串的format方法，一般的使用还是很简单的，但是有的时候有些特殊的高级需求，下面渐渐收集之。</p>
<p>更多关于python中format函数使用的信息请参考 <a href="https://pyformat.info/">pyformat.info</a> 。</p>
<h2 id="_1">等宽数字</h2>
<div class="highlight"><pre><span></span> <span class="err">{</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span><span class="mi">2</span><span class="n">d</span><span class="err">}</span> 
</pre></div>


<p>目标数字宽度为两位，左边填充0 ， <code>&gt;</code> 表示左边填充， <code>0&gt;</code> 表示左边填充0，此外还有 <code>&gt;</code> 表示右边填充。</p>
<h2 id="_2">关于花括号的问题</h2>
<p>花括号因为是特殊字符，要显示花括号，需要如下输入两次：</p>
<div class="highlight"><pre><span></span><span class="x">&gt;&gt;&gt; print(f&#39;</span><span class="cp">{{</span><span class="o">---</span>-<span class="cp">}}</span><span class="x">&#39;)</span>
<span class="x">{----}</span>
</pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonyu-yan-zhi-inthan-shu.html">python语言之-int函数
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-13T00:00:00+08:00">2018年 6月 13日
                                        </time>
                                    </div>
                                </section>
                                <p>我没想到学python这么久了，竟然还要再来介绍int函数。</p>
<p>int函数用于强制类型转换的时候，可以将一个类数值字符串变成integer，但这个函数还隐藏了一个强大的功能，那就是其还有第二个可选参数，进位制。</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="mi">10</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;0xa&#39;</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="mi">10</span>
</pre></div>


<p>上面的效果就是将一个十六进制的字符按照十六进制输出一个十进制的数值。有相同需求的地方别用eval了。</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/500lines-a-simple-web-server.html">500lines-一个简单的web服务器
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#ji-chu-ref">基础
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-05-28T00:00:00+08:00">2018年 5月 28日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>本文主要是对 <a href="http://aosabook.org/en/500L/a-simple-web-server.html">500lines</a> 项目的这篇文章的学习和讨论，这篇文章写得是极好的，除了对如何编码有一些很好的借鉴参考价值，还主要能让读者对http web server 做的事情有了一个清楚的认识。这篇文章弄清楚了，对django或者flask在做一些什么事，就很胸有成竹了，甚至包括nginx等服务器在做一些什么事也有一个大致的了解了。</p>
<p>因为作者后端出身，所以对这篇文章的质量和价值是清楚的，以至于作者在强烈呼唤出现这样一篇类似的描述前端框架的文章，目前我对前端框架整个过程还没有一个很好的认识。</p>
<p>关于计算机网络和HTTP相关不在本文讨论了，笔者也自觉这一块有时间还需要再深入补一补。</p>
<p>我们的web服务器要做的工作如下：</p>
<ul>
<li>占着个端口等着某个HTTP 请求包发过来</li>
<li>你知道的HTTP请求包有一定的格式，具体哪些信息进行parse操作</li>
<li>确定该请求要做点什么（分发GET POST）</li>
<li>程序做点什么</li>
<li>形成返回的数据格式，比如html等。</li>
<li>将返回的数据传回去</li>
</ul>
<p>上面步骤的前两步和最后一步python的 <code>HTTPServer</code> 已经帮我们自动做了，更不用说django和flask这些框架，也早就帮我们做好了。我们只需要关注的是，请求过来的是GET还是POST等，然后当然是程序总要干点什么事，最后就是把要送回去的数据整理好，再一并发过去即可。</p>
<p>更高级的web server 如flask之类的，会提供很多额外的支持，比如请求参数，请求头等信息的整理，然后如果你希望实现restful风格api，只返回一个字典值 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/httpzhi-shi.html">http知识
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#html5-ref">html5
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-05-28T00:00:00+08:00">2018年 5月 28日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="http">HTTP知识</h2>
<h2 id="url">URL结构</h2>
<p>URL结构如下:</p>
<div class="highlight"><pre><span></span><span class="n">scheme</span><span class="p">:[</span><span class="o">//</span><span class="p">[</span><span class="k">user</span><span class="p">:</span><span class="n">password</span><span class="o">@</span><span class="p">]</span><span class="k">host</span><span class="p">[:</span><span class="n">port</span><span class="p">]][</span><span class="o">/</span><span class="p">]</span><span class="n">path</span><span class="p">[</span><span class="o">?</span><span class="n">query</span><span class="p">][</span><span class="o">#</span><span class="n">fragment</span><span class="p">]</span>
</pre></div>
<p>其中:</p>
<ul>
<li><strong>scheme:</strong> 描述访问服务器的协议，也就是如何获取该资源，最常见的是http，此外还有ftp等。</li>
<li><strong>user:password:</strong> 这里用于http认证</li>
<li><strong>host:</strong> 那里获取资源</li>
<li><strong>port:</strong> 连接端口号是多少</li>
<li><strong>path:</strong> 具体访问该资源的path</li>
<li><strong>query:</strong> 其他额外参数</li>
<li><strong>fragment:</strong> 片段，为client使用。还有一个params不太常用。</li>
</ul>
<p>URL是只支持ascii字符表示的，其他的字符要经过utf-8编码操作。具体转义字符是 <code>%</code> ，比如空格SPACE，具体在URL中的表示就是 <code>%20</code> 。即使是ascii里面，也有一些字符需要转义，然后比如中文字符等，也需要如此utf-8编码和转义。比如 "书"</p>
<div class="highlight"><pre><span></span>    <span class="o">&gt;&gt;&gt;</span> <span class="s1">'书'</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">)</span>
    <span class="n">b</span><span class="s1">'\xe4\xb9 …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/cssbu-ju.html">css布局
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#html5-ref">html5
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-05-27T00:00:00+08:00">2018年 5月 27日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="css">css布局</h2>
<p>这个网站专门介绍 <a href="http://zh.learnlayout.com/">css布局</a> ，深入浅出讲的还是很好的，css布局是css里面很重要的课题，建立认真学习一下。</p>
<h3 id="display">display属性</h3>
<h4 id="block">block</h4>
<p>块级元素，占满自身右边所有行的行空间。 div元素和p默认就是所谓的block元素，display属性为 <strong>block</strong> 。</p>
<div class="highlight"><pre><span></span><span class="nt">display</span><span class="p">:</span><span class="nd">block</span><span class="o">;</span>
</pre></div>
<h4 id="inline">inline</h4>
<p>span元素默认是 <strong>inline</strong> 。</p>
<div class="highlight"><pre><span></span><span class="nt">display</span><span class="p">:</span><span class="nd">inline</span><span class="o">;</span>
</pre></div>
<p>就占据我需要的宽度，其他盒子元素可以继续填满这一行。</p>
<p>比如:</p>
<div class="highlight"><pre><span></span><span class="nt">li</span><span class="p">{</span>
    <span class="k">display</span><span class="p">:</span><span class="kc">inline</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>这样你的无序列表和有序列表的各个item不会另起一行了。其默认的是 <code>display:list-item;</code> 。</p>
<h4 id="inline-block">inline-block</h4>
<p>inline-block的意思是块级元素还是块级元素，只是几个块级元素对外排布是 inline 模式排布的，这是css较新的一个特性。如果对块状元素设置display属性为 <strong>inline</strong> ，则这些块状元素都会失去自己内部的尺寸布局，这可能不是你想要的。</p>
<h4 id="none">none</h4>
<div class="highlight"><pre><span></span><span class="nt">display</span><span class="p">:</span><span class="nd">none</span>
</pre></div>
<p>该元素不会显示。和 <code>visibility:hidden</code> 的区别是其本该显示的空间不会保留了。</p>
<h3 id="float">float属性</h3>
<p>元素居右放置 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/csshe-zi-mo-xing.html">css盒子模型
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#html5-ref">html5
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-05-27T00:00:00+08:00">2018年 5月 27日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="css">css的盒子模型</h2>
<p>html的显示布局和 (TeX) 的显示布局一样也是采用的浮动盒子模型，从上到下，从左到右，一个个盒子排下来，只是 (TeX) 更复杂，还有一个分页算法。简言之就是每一个标签元素都是一个盒子(我还不太确定一个个字是不是一个盒子，在 (TeX) 里面一个个字都是一个盒子。) 。</p>
<p>下面这个图片来自 <a href="http://www.hicksdesign.co.uk/boxmodel/">这个网页</a> 。</p>
<p><img alt="img" src="/images/前端开发/html_box_model.png" title="html_box_model"/></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Box_Model/Introduction_to_the_CSS_box_model">这篇文章</a> 讲解得很好，下面简要介绍之，下面放在短代码环境的都是可以用作css属性的。盒子最中心的是content区域，如果该盒子的 <code>box-sizing</code> 是默认值的话，那么 <code>width</code> 控制的就是content区域的宽度。如果将 <code>box-sizing</code> 设置为 <code>border-box</code> ，那么 <code>width</code> 对应的就是整个盒子的宽度。这个只是一点简单的数学加减法把戏罢了，没什么大不了的。</p>
<p>然后类似的 <code>height</code> 默认是控制content区域的高度，然后有 <code>min-width</code> , <code>min-height</code> 来控制盒子content区域的最小宽度和最小高度，然后有 <code>max-width</code> , <code>max-height</code> 来控制盒子content区域的最大宽度和最大高度，类似的这几个属性如果 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/cssji-chu.html">css基础
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#html5-ref">html5
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-05-27T00:00:00+08:00">2018年 5月 27日
                                        </time>
                                    </div>
                                </section>
                                
<h1 id="css">css基础</h1>
<p>前面谈到的inline css因为肯定是作用于本标签，所以写法就简化了，style引入之后后面加入一些属性即可。然后前面谈到的外部css，其写法都是如下所示:</p>
<div class="highlight"><pre><span></span><span class="nt">p</span><span class="p">{</span>
<span class="k">text-indent</span><span class="p">:</span><span class="mi">2</span><span class="kt">em</span><span class="p">;</span><span class="c">/*段落缩进*/</span>
<span class="k">line-height</span><span class="p">:</span><span class="mi">180</span><span class="kt">%</span><span class="p">;</span><span class="c">/*行间距*/</span>
<span class="p">}</span>
</pre></div>
<p>第一个元素我们可以简单称之为css选择器，在网络抓取中也有类似的概念。然后花括号里面就是类似 inline css 一样的格式了，用分号隔开，换行不换行都是无所谓的，具体为了美观一般都一个属性占一行吧。</p>
<h2 id="css_1">css选择器</h2>
<p>这里以html5为例，html5内置的标签都是可以直接引用的，比如body，article，video，table，figure等等。如果你在css中引用section，那么意思就是整个文档的section标签那些元素被选中了。</p>
<p>我们知道html5中可以通过 <strong>class</strong> 属性来将某个元素归于某一类，现在假设有:</p>
<div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">"emph"</span><span class="p">&gt;</span>hello<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
<p>那么我们使用 <code>p.emph</code> 其意思就是将选中p标签然后class属性为emph的那些标签。</p>
<p>我们在css中经常看到这样的形式：</p>
<div class="highlight"><pre><span></span>.hightlight
</pre></div>
<p>其完整形式为 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/javascript-tutorial-one.html">前端开发之-javascript基础
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#html5-ref">html5
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-05-27T00:00:00+08:00">2018年 5月 27日
                                        </time>
                                    </div>
                                </section>
                                
<h1 id="javascript">javascript基础</h1>
<p>本文主要面向那些已经熟悉一门编程语言的读者，并不十分适合编程初学者来阅读。</p>
<p>第二次修订版：本小节参考aribnb的javascript规范修订重写了。</p>
<h2 id="_1">注释</h2>
<p>多行注释推荐如下写法：</p>
<div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * make() returns a new element</span>
<span class="cm"> * based on the passed-in tag name</span>
<span class="cm"> */</span>
</pre></div>
<p>单行注释用 <code>//</code> ，然后注释都新起一行写，如果是代码块内的注释，则前面空一行：</p>
<div class="highlight"><pre><span></span><span class="c1">// This is a comment that the computer will ignore. </span>

<span class="kd">function</span> <span class="nx">getType</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'fetching type...'</span><span class="p">);</span>

  <span class="c1">// set the default type to 'no type'</span>
  <span class="kr">const</span> <span class="nx">type</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="s1">'no type' …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/jquery.html">前端开发之-jquery
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#html5-ref">html5
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-05-27T00:00:00+08:00">2018年 5月 27日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="jquery">jquery基本语法</h2>
<p>jquery的基本语法就是:</p>
<div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="nx">selector</span><span class="p">).</span><span class="nx">action</span><span class="p">()</span>
</pre></div>
<p>如果单 <code>$(selector)</code> 将返回找到的对象的数组，而进行某个action的时候是对所有找到的对象都进行如此动作。</p>
<h2 id="_1">文档初始化之后执行的动作</h2>
<div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
   <span class="c1">// jQuery methods go here...</span>
<span class="p">});</span>
</pre></div>
<p>此外我们还常见一种简化的写法：</p>
<div class="highlight"><pre><span></span><span class="err">$</span><span class="p">(</span><span class="k">function</span><span class="p">()</span><span class="err">{}</span><span class="p">);</span>
</pre></div>
<p>然后有时你会看到这种写法：</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="err">$</span><span class="p">)</span><span class="err">{…}</span><span class="p">)(</span><span class="n">jQuery</span><span class="p">)</span>
</pre></div>
<p>这是运行了一个匿名函数，其参数为(JQuery)，前面用 <code>$</code> 符号，是为了不与其他库冲突。（<a href="https://blog.csdn.net/javazw123/article/details/6217988">参考这篇文章</a>）</p>
<h2 id="_2">获取屏幕的宽度和高度</h2>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">width</span><span class="p">()</span>
<span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">height</span><span class="p">()</span>
</pre></div>
<p>这两个方法更确切的描述是返回所选元素的宽度或高度。此外还有 <code>innerWidth</code> 和 <code>innerHeight</code> 方法（包含内边距）， <code>outerWidth</code> 和 <code>outerHeight</code> 包含内边距和边框。</p>
<h2 id="hide">hide方法</h2>
<p>实际上就是css设置 …</p>
                            </article>

 <nav aria-label="Page Navigation">
    <ul class="pager">
        <li class="previous">
            <a href="/index3.html" aria-label="Previous" >
                <span aria-hidden="true">&larr;<span>Previous</span></span>
            </a>
        </li>


        <li class="next">
            <a href="/index5.html" aria-label="Next" >
                <span aria-hidden="true">&rarr;<span>Next</span></span>
            </a>
        </li>

    </ul>
</nav>
                     </div>
                </div>
            </div>
    </div>

    </div>
    <div class="col-md-1"></div>

</div>


<div id="push"></div>


<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a> and updated by <a href="http://www.cdwanze.work" title="cdwanze Home Page">cdwanze</a></li>
    </ul>
</div>
</footer>

        <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
    <script>
        function validateForm(query) {
            return (query.length > 0);
        }
    </script>

    <script>
        function adjust_search_width() {
            var w = document.documentElement.clientWidth;
            if ((w > 755) && (w < 975)) {
                plus_width = w - 755;
                $('.navbar-form .form-control').outerWidth(210 + plus_width);
            } else if (w >= 975) {
                $('.navbar-form .form-control').outerWidth(210 + 220);
            } else if (w <= 755) {
                $('.navbar-form .form-control').css('width', '100%')
            }
        }

        $(document).ready(function () {
            adjust_search_width();
        });

        window.onresize = function () {
            adjust_search_width();
        }

    </script>


    <script>
        (function ($) {
            // custom css expression for a case-insensitive contains()
            jQuery.expr[':'].Contains = function (a, i, m) {
                return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
            };

            function listFilter() {

                $('#findtag')
                    .change(function () {
                        var filter = $(this).val();
                        if (filter) {
                            // this finds all links in a list that contain the input,
                            // and hide the ones not containing the input while showing the ones that do
                            $('.list-of-tags').find("a:not(:Contains(" + filter + "))").parent().hide();
                            $('.list-of-tags').find("a:Contains(" + filter + ")").parent().show();
                        } else {
                            $('.list-of-tags').find("li").show();
                        }
                        return false;
                    })
                    .keyup(function () {
                        // fire the above change event after every letter
                        $(this).change();
                    });
            }

            //ondomready
            $(function () {
                listFilter($());
            });
        }(jQuery));

    </script>

    <script>
        $(function () {
            //点击回到顶部的元素
            $("#gotop").click(function (e) {
                //以1秒的间隔返回顶部
                $('body,html').animate({scrollTop: 0}, 1000);
            });
        });
    </script>

    <script>
        $('.page-header').hover(function () {
            $(this).css("color", '#3875d7')
        }, function () {
            $(this).css('color', '#8B0000')
        })
    </script>


    <script>
        $(document).ready(function () {
            $('a.slowscroll').click(function (event) {
                var $anchor = $(this);
                $('html, body').animate({scrollTop: $($anchor.attr('href')).offset().top}, 1500);
                event.preventDefault();
                // $('a.slowscroll').parent().removeClass('active');
                // $('.navbar-header').hide();
                // $anchor.parent().addClass('active');
            })
        })
        console.log('document init...')
    </script>




</body>
</html>