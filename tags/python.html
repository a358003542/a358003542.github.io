<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="baidu-site-verification" content="D4VqC4HppC"/>
    <meta name="msvalidate.01" content="55CB117A61A6F8286173763FB18D9625"/>

        <meta name="author" content="cdwanze"/>
        <meta name="copyright" content="cdwanze"/>

            <meta property="og:type" content="article"/>
        <meta name="twitter:card" content="summary">

        <meta property="og:title" content="cdwanze的博文"/>
        <meta name="twitter:title" content="cdwanze的博文">
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content="cdwanze的博文"/>
    <meta property="og:article:author" content="cdwanze"/>
    <title>
cdwanze的博文 - python tag</title>


        <link href="/theme/css/font-awesome.css" rel="stylesheet"
              media="screen">
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet"
              media="screen">

            <link rel="stylesheet" type="text/css"
                  href="/theme/css/pygments.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/elegant.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/custom.css" media="screen">






</head>
<body>

<nav class="navbar">
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".navbar-collapse"
                    aria-expanded="false">
                <span class="sr-only">Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="https://www.cdwanze.work"><span
                    class=site-name>网站首页</span></a>
        </div>


        <div class="navbar-collapse collapse">
            <form action="/search.html"
                  onsubmit="return validateForm(this.elements['q'].value);"
                  class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" name="q" id="tipue_search_input"
                           class="form-control" placeholder="Search..."
                           style="width:430px;">
                </div>
                <button class="btn btn-default" type="submit">搜索</button>
            </form>


            <ul class="nav navbar-nav nav-pills navbar-right">
                <li >
                    <a href="">博文首页</a></li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle"
                           data-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">查找文章<span
                                class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a class="slowscroll" href="/categories.html">按分类</a>
                            </li>
                            <li><a class="slowscroll" href="/tags.html">按标签</a>
                            </li>
                        </ul>
                    </li>


                        <li >
                            <a href="/guan-yu-ben-wang-zhan.html">关于本网站</a>
                        </li>
                        <li >
                            <a href="/gong-gao.html">公告</a>
                        </li>
            </ul>


        </div>
    </div>
</nav>


<div class="container-fluid">
    <div class="col-md-1 col-md-1-left"></div>
    <div class="col-md-10">


    <style>
        article {
            border: 1px solid #aaa;
        }

        section {
            padding: 1em;
        }

        article > p {
            padding-left: 0.5em;
            padding-right: 0.5em;
        }

        #gotop {
            position: fixed;
            right: 12%;
            float: right;
            top: 50%;
        }

        @media screen and (max-width: 600px) {
            #gotop {
                display: none;
            }
        }
    </style>

    <button id="gotop" type="button" class="btn btn-default">
        <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
    </button>



    <div class="row">

        <div class="row">
         </div>

             <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <header>
                        <h1 id="recent-posts">最近博文
                            <a id="allposts" href="/archives.html">所有博文</a>
                        </h1>
                    </header>


                    <div class="recent-posts">

                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/websockets-module.html">websockets模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-11-22T00:00:00+08:00">2018年 11月 22日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">简介</h2>
<p>python和websokets相关的模块在github得星差不多的大概有三个，一个autobahn在使用上更偏向twisted，而且个人使用的时候在连接上会报websocket upgrade error这样的错误，可能是我的问题，而另外一个更偏向javascript那边websocket的使用风格，因为个人没有使用过，不做点评，本文重点关注的是这个模块：</p>
<p><a href="https://github.com/aaugustin/websockets">https://github.com/aaugustin/websockets</a></p>
<p>这个模块使用还是很简单的，不过需要读者对asyncio那块异步编程要有所熟悉。</p>
<h2 id="websocket">全局websocket</h2>
<p>首先你的应用启动的时候和服务器建立websocket连接，最好让这个websocket成为一个全局变量，后续的发送和监听消息需求都根据这个websocket来。</p>
<h2 id="gui">和其他GUI框架的继承问题</h2>
<p>这个websockets模块和GUI框架的继承问题更多的是在于该GUI框架如何和asyncio的事件循环集成起来。这个在目标GUI框架的时候会有所讨论，就不在这里讨论了。</p>
<p>简单来说就是asyncio的事件循环里面你将添加一个或者多个任务，在目标任务中，完成websoket的相关工作。</p>
<h2 id="_2">常驻监听模式</h2>
<p>请读者看下面代码，下面建立了一种常驻监听模式，由于可能存在各种原因websocket服务器那边可能会强制把websocket连接关闭，所以你需要捕捉这个异常，然后试着重新建立一个全局websocket连接。</p>
<div class="highlight"><pre><span></span>    <span class="n">async</span> <span class="k">def</span> <span class="nf">create_websocket</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        主面板初始化新建一个全局的websocket</span>
<span class="sd">        然后开始websocket监听</span>
<span class="sd">        :return:</span>
<span class="sd">        """</span>
        <span class="n">ws_url</span> <span class="o">=</span> <span class="n">create_ws_url</span><span class="p">()</span>

        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">async</span> <span class="k">with</span> <span class="n">websockets …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/python-the-new-f-string.html">python新的f-string
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-08-31T00:00:00+08:00">2018年 8月 31日
                                        </time>
                                    </div>
                                </section>
                                <p>现在python3版本迭代很快的，除了python3.4新加入的asyncio让我很是关心，最近还是接触一个新的f-string，是python3.6加入进来了。一开始对字符串前面加个f很是困惑，python2的时候字符串前面有u什么的，python3之后基本上字符串前面没什么东西了。但这次新加入的f-string，在初步使用之后就停不下来了，真的太好用了。</p>
<p>基本情况如下：</p>
<p>python新的format字符串</p>
<div class="highlight"><pre><span></span><span class="n">f</span><span class="ss">&quot;hello. {name}&quot;</span>
</pre></div>


<p>等价于</p>
<div class="highlight"><pre><span></span><span class="ss">&quot;hello. {name}&quot;</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</pre></div>


<p>一个变量还好，多个变量的时候这种f-string的写法的好处就很明显了，当时环境下你前面已经定义好的变量名是可以直接使用的，我只能用一句话来形容，太好用了，用上了你就会停不下来。</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/python-cookbook.html">python语言学习之-技巧大杂烩
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-08-02T00:00:00+08:00">2018年 8月 2日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="loggingpprint">在logging中使用pprint</h2>
<p>参考了 <a href="https://stackoverflow.com/questions/11093236/use-logging-print-the-output-of-pprint">这个网页</a> 。</p>
<p>有的时候logging的输出我们希望调用pprint从而输出打印更加美观些，可以调用pformat函数来达到这个效果：</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span><span class="p">,</span> <span class="n">pformat</span>
<span class="n">ds</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">'hello'</span><span class="p">:</span> <span class="s1">'there'</span><span class="p">}]</span>
<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">pformat</span><span class="p">(</span><span class="n">ds</span><span class="p">))</span>
</pre></div>
<h2 id="and-or-not">and or not的运算优先级</h2>
<p>一般是推荐用括号清晰表达，然后not我们知道优先级是最高的。我们再看下面这个例子:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="k">True</span> <span class="k">or</span> <span class="k">True</span> <span class="k">and</span> <span class="k">False</span>
<span class="k">True</span>
</pre></div>
<p>这个例子很好地说明了and和or的优先级顺序，具体就是 and的优先级比or的要高 。</p>
<h2 id="allany">all和any关键词</h2>
<p>这是python语言里面的关键词函数，源码很简单，下面列出来，看一下就清楚了:</p>
<div class="highlight"><pre><span></span><span class="nv">def</span> <span class="nv">all</span><span class="ss">(</span><span class="nv">iterable</span><span class="ss">)</span>:
    <span class="k">for</span> <span class="nv">element</span> <span class="nv">in</span> <span class="nv">iterable</span>:
        <span class="k">if</span> <span class="nv">not</span> <span class="nv">element</span>:
            <span class="k">return</span> <span class="nv">False</span>
    <span class="k">return …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/python2he-python3de-jian-rong-xing.html">python2和python3的兼容性
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-18T00:00:00+08:00">2018年 6月 18日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="2to3">2to3内置模块</h2>
<p>python有个 <strong>2to3</strong> 内置模块可以自动进行python2脚本到python3脚本的移植工作，不过我感觉最好是不要过分依赖这个工具，这只是适合初学者的。因为python2和python3很多地方不一样了。如果你对这个模块有很深的了解，可能自己手工进行修改会更合适一些（其中可能会涉及到新的编写思路）。具体模块的使用请参看官方文档。</p>
<h2 id="_1"><code>//</code> 和 <code>/</code></h2>
<p>在python2中，两个整数相除会返回一个整数，也就是python3的 <code>//</code>。</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="mi">5</span><span class="o">/</span><span class="mi">2</span>
<span class="mi">2</span>
</pre></div>
<h3 id="_2">兼容方案</h3>
<p>在文件头上加上一行：</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
</pre></div>
<p>这样就都是使用python3的语法规则，即:  <code>/</code> 表示常规除法， <code>//</code> 表示整除——返回商。</p>
<h2 id="print">print函数</h2>
<p>这是最常见的错误了，推荐第一步就在文档里面进行find print这个字符串操作，然后将所有：</p>
<div class="highlight"><pre><span></span>    <span class="n">print</span> <span class="p">...</span>
</pre></div>
<p>这样的形式都换成：</p>
<div class="highlight"><pre><span></span>    <span class="n">print</span><span class="p">(...)</span>
</pre></div>
<p>这是目前python2和python3都兼容的形式了，所以没有什么好犹豫的，大胆的修改就是了。</p>
<p>其中python2 </p>
<div class="highlight"><pre><span></span>    <span class="n">print</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>
</pre></div>
<p>似乎还有点小复杂，简单的理解就是对应到python3的</p>
<div class="highlight"><pre><span></span>    <span class="nv">print</span><span class="ss">(</span><span class="mi">1</span>, <span class="mi">2</span>, <span class="k">end …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonzhong-de-wei-cao-zuo.html">python中的位操作
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<p>位操作似乎用c语言会更方便，不过我们可以先把这块概念弄清楚，然后迁移到c代码是很方便的。</p>
<h2 id="1">问题1，如何表示任意长度的基于字节的 位向量</h2>
<p>比如说我想表达 01010101010101 
答： </p>
<div class="highlight"><pre><span></span><span class="mi">0</span><span class="n">b01010101010101</span>
</pre></div>
<h2 id="2">问题2 上面任意长度的位向量，我如何实现遍历逻辑</h2>
<p>是的，我是看编程珠玑确定这些问题的，然后发现python，当然，已经有类似的实现库了： <a href="https://github.com/ilanschnell/bitarray">https://github.com/ilanschnell/bitarray</a></p>
<p>下面好好研究下这个项目的源码。</p>
<h3 id="4">问题4 如何建立位图映射</h3>
<p>比如 0b1010101010 -&gt; 对应的是 数字集合 {1,3,5,7,9}</p>
<h3 id="5">问题5 有没有可能建立其他位图映射</h3>
<h2 id="3">问题3 常规的位操作运算符，你帮我说说吧</h2>
<h3 id="_1">按位与</h3>
<div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="n">b111101010</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="n">b101010101</span>
<span class="n">print</span><span class="p">(</span><span class="n">bin …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/jinja2-template.html">jinja2模板
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2017-10-12T00:00:00+08:00">2017年 10月 12日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>jinja2模板在flask和pelican中都有使用，而且就是在django框架中，模版语法也大体类似，所以jinja2模板还是很值得一学的。</p>
<h2 id="_2">注释</h2>
<p>这里面的内容是模板文件的注释内容。</p>
<div class="highlight"><pre><span></span><span class="err">{</span><span class="o">#</span> <span class="p">...</span> <span class="o">#</span><span class="err">}</span>
</pre></div>
<h2 id="_3">变量</h2>
<p>如下所示，里面包含某个变量，jinja2渲染模板的时候会解析这些变量。</p>
<div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="err">...</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
<p>然后 <code>object.a</code> 这样的dot法引用，或者 <code>object['a']</code> 这样的写法，甚至是调用实例的某个方法 <code>object.func()</code> 都是支持的。</p>
<h2 id="filters">过滤器filters</h2>
<p>变量可以进一步加上某个过滤器来进行进一步的处理。过滤器是有点类似于linux系统的管道作业风格，多个过滤器可以叠加，如： <code>{{ var | striptags | title }}</code> 。</p>
<p>jinja2中内置的过滤器有：</p>
<ul>
<li><code>safe</code> 渲染值不转义</li>
<li><code>capitalize</code> 值首字母大写 其他字母小写</li>
<li><code>lower</code> 字母都小写</li>
<li><code>upper</code> 字母都大写</li>
<li><code>title</code> 值每个单词首字母大写</li>
<li><code>trim</code>值首尾空格去除</li>
<li><code>striptags</code> 渲染之前把所有HTML标签去掉</li>
</ul>
<p>关于safe过滤器请参看下面讨论的特殊符号的问题。</p>
<h2 id="html">html特殊符号问题</h2>
<p>如果你的变量有这些html的特殊符号 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/beautifulsoup-module.html">beautifulsoup模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonpa-chong-ref">python爬虫
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2017-10-11T07:04:00+08:00">2017年 10月 11日
                                        </time>
                                    </div>
                                </section>
                                
<h1 id="_1">简介</h1>
<p>BeautifulSoup模块在python网页分析这一块是很有名的一个模块，其确实让网页分析任务变得轻松而easy了。本文将对bs4模块进行简单的介绍，更多细节请参看 <a href="http://www.crummy.com/software/BeautifulSoup/bs4/doc/">官方文档</a> 。</p>
<h2 id="_2">安装</h2>
<p>安装就简单用pip命令安装之:</p>
<div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">beautifulsoup</span>
</pre></div>
<h2 id="_3">第一个例子</h2>
<p>然后在使用上因为python2和python3的urllib相关改动很大，加上urllib在使用上不是很友好，强烈推荐大家直接用requests模块来进行相关操作。然后beautifulsoup的引入语句一般如下所示:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</pre></div>
<p>最简单的和requests的组合使用如下所示:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"http://www.pythonscraping.com/exercises/exercise1.html"</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</pre></div>
<p>在上面soup.title返回的是一个标签对象。然后标签对象里面如果有标签的话又可以继续点号索引标签:</p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; soup.body …</pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/scrapy-module.html">scrapy模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonpa-chong-ref">python爬虫
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2017-10-11T07:04:00+08:00">2017年 10月 11日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">简介</h2>
<p>老实说Scrapy模块和Django模块在实用上包括在内容目录结构上都很相似，当然这两个项目干的完全是两个不同的事情，我想这种相似性更多的可以描述为类似于大多数GUI界面的那种类似。</p>
<p>我之前尝试过写过一个小的Spider网络爬虫程序，其实网络爬取大体过程都是类似的，因此我学习Scrapy项目大体只是一些基本配置的了解，对于其内部原理已经很熟悉了，所以本文不会在这些地方赘述了。</p>
<p>scrapy就是一个python模块，可以通过 <code>pip</code> 安装之，所以安装这块也不多说了。</p>
<h3 id="_2">新建一个项目</h3>
<div class="highlight"><pre><span></span><span class="n">scrapy</span><span class="w"> </span><span class="n">startproject</span><span class="w"> </span><span class="n">project_name</span><span class="w">  </span><span class="o">[</span><span class="n">path</span><span class="o">]</span><span class="w"> </span>
</pre></div>
<p>因为我喜欢创建python的venv虚拟环境，所以上面最后path设置为 <code>.</code> 当前目录下的意思。</p>
<p>然后接下来就是编写爬虫Spider脚本还有等等其他一些配置了。</p>
<h2 id="_3">第一个例子</h2>
<p>下面是一个简单的例子：</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MySpider</span><span class="p">(</span><span class="n">scrapy</span><span class="o">.</span><span class="n">Spider</span><span class="p">):</span>
    <span class="n">user_agent</span> <span class="o">=</span> <span class="n">get_random_user_agent</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">"7yrt"</span>
    <span class="n">start_urls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'http://7yrt.com/html/rhrt/'</span><span class="p">]</span>
    <span class="n">allowed_domains</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'http://7yrt.com/'</span><span class="p">]</span>


    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">url …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/faker-module.html">faker模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2017-04-13T06:13:00+08:00">2017年 4月 13日
                                        </time>
                                    </div>
                                </section>
                                
<h1 id="_1">简介</h1>
<p>faker模块是一个很有特色的模块，所以其在github上得到的star也较多。其可以用来生成一些伪数据，比如用来做测试用途等等。其github项目地址在 <a href="https://github.com/joke2k/faker">这里</a> 。</p>
<p>该项目支持pip安装:</p>
<div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">fake</span><span class="o">-</span><span class="n">factory</span>
</pre></div>
<p>其使用还是很简单的，大概如下所示:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Factory</span>

<span class="n">faker</span> <span class="o">=</span> <span class="n">Factory</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">faker</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>
</pre></div>
<p>然后中文名字例子如下，就是在Factory的create方法那里指定语言locale（默认是"en_EN"）:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">faker</span> <span class="kn">import</span> <span class="n">Factory</span>

<span class="n">faker</span> <span class="o">=</span> <span class="n">Factory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s1">'zh_CN'</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">faker</span><span class="o">.</span><span class="n">name …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/requests-module.html">requests模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonpa-chong-ref">python爬虫
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2016-10-16T10:42:00+08:00">2016年 10月 16日
                                        </time>
                                    </div>
                                </section>
                                
<h1 id="urllibrequest">urllib.request内置模块</h1>
<p>urllib.request模块我们可以在这里稍微了解一下，但一般实际使用主要是用后面要介绍的 <strong>requests</strong> 模块。</p>
<h2 id="urlopen">urlopen函数</h2>
<p>urlopen函数在urllib模块的request子模块，其提供了简单的获取目标url网页内容的接口。一个简单的例子如下所示：</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="n">socket</span><span class="o">.</span><span class="n">setdefaulttimeout</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'https://www.google.com.cn'</span><span class="p">,</span><span class="s1">'https://www.google.com'</span><span class="p">,</span>
    <span class="s1">'http://www.google.com.cn'</span><span class="p">]</span>

<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">)</span>
        <span class="k">print …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pelican-module.html">pelican模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2016-09-25T00:00:00+08:00">2016年 9月 25日
                                        </time>
                                    </div>
                                </section>
                                
<h1 id="_1">简介</h1>
<p>pelican是一个静态网站生成工具，其是用python编写实现的，所以对于pythoner来说显得格外的亲切。</p>
<p>首先按照官方的quickstart简单的刷一遍吧，下面就一些问题作出一些讨论。</p>
<h2 id="_2">项目基本说明</h2>
<p>python的虚拟环境控制这里就不多说了，下面主要讨论 <code>pelicanconf.py</code> 和 <code>publishconf.py</code> 和 <code>Makefile</code> 这个文件作出一些说明，然后项目文档的基本结构相关作出一些说明。</p>
<p>首先说明下 <code>publishconf.py</code> 和 <code>pelicanconf.py</code> 的区别， <code>publishconf.py</code> 文件里面有这样一句话：</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">curdir</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pelicanconf</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
<p>也就是其将继承所有来自 <code>pelicanconf.py</code> 里面的配置参量，不同的是 <code>publishconf.py</code> 是对阵发布到那边服务器上的，而 <code>pelicanconf …</code></p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/python-talk-one.html">python语言学习之-第一谈
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2016-01-01T00:00:00+08:00">2016年 1月 1日
                                        </time>
                                    </div>
                                </section>
                                
<p>Python是个成功的脚本语言。它最初由Guido van Rossum开发，在1991年第一次发布。Python由ABC和Haskell语言所启发。Python是一个高级的、通用的、跨平台、解释型的语言。一些人更倾向于称之为动态语言。它很易学，Python是一种简约的语言。它的最明显的一个特征是，不使用分号或括号，Python使用缩进。现在，Python由来自世界各地的庞大的志愿者维护。</p>
<p>python现在主要有两个版本区别，python2和python3。作为新学者推荐完全使用python3编程，本文档完全基于python3。</p>
<h2 id="_1">安装和配置</h2>
<p>python的安装和配置在linux没什么好说了，windows下的安装主要是编辑好系统环境变量 <code>PATH</code> 值，好让读者可以在cmd或者powershell下调用python命令。</p>
<p><img alt="img" src="/images/python/python-env-windows.png" title="python在windows下PATH环境变量的配置"/></p>
<p>这个初次安装的时候程序有这个选项的。</p>
<h2 id="pythonrepl">进入python的REPL环境</h2>
<p>在终端中输入python即进入python语言的REPL环境，很多linux系统目前默认的是python2。你可以运行：</p>
<div class="highlight"><pre><span></span><span class="n">python</span>  <span class="c1">--version</span>
</pre></div>
<p>来查看默认的python版本号。</p>
<p>要进入python3在终端中输入python3即可。</p>
<h2 id="python">python命令行用法</h2>
<p>命令行的一般格式就是：</p>
<div class="highlight"><pre><span></span><span class="n">python3</span>  <span class="p">[</span><span class="err">可选项</span><span class="p">]</span>  <span class="n">test</span><span class="p">.</span><span class="n">py</span>  <span class="p">[</span><span class="err">可选参数</span><span class="mi">1</span> <span class="err">可选参数</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
<p>同样类似的运行 <code>python3  --help …</code></p>
                            </article>

                     </div>
                </div>
            </div>
    </div>

    </div>
    <div class="col-md-1"></div>

</div>


<div id="push"></div>


<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a> and updated by <a href="http://www.cdwanze.work" title="cdwanze Home Page">cdwanze</a></li>
    </ul>
</div>
</footer>

        <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
    <script>
        function validateForm(query) {
            return (query.length > 0);
        }
    </script>

    <script>
        function adjust_search_width() {
            var w = document.documentElement.clientWidth;
            if ((w > 755) && (w < 975)) {
                plus_width = w - 755;
                $('.navbar-form .form-control').outerWidth(210 + plus_width);
            } else if (w >= 975) {
                $('.navbar-form .form-control').outerWidth(210 + 220);
            } else if (w <= 755) {
                $('.navbar-form .form-control').css('width', '100%')
            }
        }

        $(document).ready(function () {
            adjust_search_width();
        });

        window.onresize = function () {
            adjust_search_width();
        }

    </script>


    <script>
        (function ($) {
            // custom css expression for a case-insensitive contains()
            jQuery.expr[':'].Contains = function (a, i, m) {
                return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
            };

            function listFilter() {

                $('#findtag')
                    .change(function () {
                        var filter = $(this).val();
                        if (filter) {
                            // this finds all links in a list that contain the input,
                            // and hide the ones not containing the input while showing the ones that do
                            $('.list-of-tags').find("a:not(:Contains(" + filter + "))").parent().hide();
                            $('.list-of-tags').find("a:Contains(" + filter + ")").parent().show();
                        } else {
                            $('.list-of-tags').find("li").show();
                        }
                        return false;
                    })
                    .keyup(function () {
                        // fire the above change event after every letter
                        $(this).change();
                    });
            }

            //ondomready
            $(function () {
                listFilter($());
            });
        }(jQuery));

    </script>

    <script>
        $(function () {
            //点击回到顶部的元素
            $("#gotop").click(function (e) {
                //以1秒的间隔返回顶部
                $('body,html').animate({scrollTop: 0}, 1000);
            });
        });
    </script>

    <script>
        $('.page-header').hover(function () {
            $(this).css("color", '#3875d7')
        }, function () {
            $(this).css('color', '#8B0000')
        })
    </script>


    <script>
        $(document).ready(function () {
            $('a.slowscroll').click(function (event) {
                var $anchor = $(this);
                $('html, body').animate({scrollTop: $($anchor.attr('href')).offset().top}, 1500);
                event.preventDefault();
                // $('a.slowscroll').parent().removeClass('active');
                // $('.navbar-header').hide();
                // $anchor.parent().addClass('active');
            })
        })
        console.log('document init...')
    </script>




</body>
</html>