<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="msvalidate.01" content="55CB117A61A6F8286173763FB18D9625" />

    <meta name="author" content="wander" />
    <meta name="copyright" content="wander" />

    <meta name="description"
        content="简介
npm提供了第三方的JavaScript模块服务，一般安装好nodejs之后除了node命令之外就有npm命令了。
项目通过运行 npm init ，向导式风格辅助生成本项目的包管理信息配置文件 package.json 。
npm install

如上npm install 会试着安..." />


<meta name="keywords" content=", posts, " />

<title>javascript和npm  -
    wander的博客</title>

    <link href="https://a358003542.github.io/theme/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://a358003542.github.io/theme/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <link href="https://a358003542.github.io/theme/css/base.css" rel="stylesheet">

<link rel="stylesheet" href="https://a358003542.github.io/theme/css/pygments.css">
<link rel="stylesheet" href="https://a358003542.github.io/theme/css/article.css">
</head>

<body>
    <div class="flex-wrapper">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="https://a358003542.github.io/">网站首页</a>

                <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse"
                    data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>


                <div class="navbar-collapse collapse" id="navbarContent">
                    <form action="https://a358003542.github.io/search.html" onsubmit="return validateForm(this.elements['q'].value);"
                        class="d-flex me-auto">

                        <input type="search" name="q" id="tipue_search_input" class="form-control me-2"
                            placeholder="Search..." aria-label="Search">

                        <button class="btn btn-outline-primary text-nowrap" type="submit">搜索</button>
                        
                    </form>


                    <ul class="navbar-nav mb-lg-0">

                        <li class="nav-item ">
                            <a class="nav-link "
                                href="/archives.html">所有博文</a>
                        </li>

                        <li class="nav-item ">
                            <a class="nav-link "
                                href="/categories.html">博文分类</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link  " href="https://a358003542.github.io/about.html">关于本网站</a>
                        </li>
                    </ul>


                </div>
            </div>
        </nav>

        
        <main>

        <div class="container mt-3">
            <div class="row">
                <div class="col">

                    <div class="card">
                        <div class="card-body">
                          <h3 class="card-title">翻墙软件推荐：</h3>
                          <p class="card-text">V2net翻墙软件是我一直在用的，价格很实惠，有各个档次可以选择，翻墙效果还是很好的。</p>
                          <a button role="button" class="btn btn-outline-success" href="http://xc.v2ray.cx/aff.php?aff=3078">点击查看</a>
                        </div>
                      </div>
                </div>
            </div>

        </div>

<div class="container-xxl mt-3">
    <div class="row">
        <div class="col-md-4 col-lg-3"></div>
        <header class="col-sm-12 col-md-8 col-lg-8 page-header">
            <h1><a href="https://a358003542.github.io/articles/javascript-npm.html"> javascript和npm  </a></h1>
        </header>
    </div>

    <div class="row">
        <div class="col-sm-12 col-md-4 col-lg-3">
            <div class="p-3 bg-white small">
                <div style="font-size:1.2rem;">目录</div>
                <div class="toc">
<ul>
<li><a href="#简介">简介</a><ul>
<li><a href="#npm-install">npm install</a></li>
<li><a href="#npm-run">npm run</a></li>
<li><a href="#npm-uninstall">npm uninstall</a></li>
<li><a href="#npm-list">npm list</a></li>
<li><a href="#npm-update">npm update</a></li>
</ul>
</li>
<li><a href="#packagejson文件详解">package.json文件详解</a><ul>
<li><a href="#name">name</a></li>
<li><a href="#version">version</a></li>
<li><a href="#description">description</a></li>
<li><a href="#main">main</a></li>
<li><a href="#private">private</a></li>
<li><a href="#scripts">scripts</a></li>
<li><a href="#dependencies">dependencies</a></li>
<li><a href="#devdependencies">devDependencies</a></li>
<li><a href="#homepage">homepage</a></li>
<li><a href="#license">license</a></li>
<li><a href="#keywords">keywords</a></li>
<li><a href="#author">author</a></li>
<li><a href="#repository">repository</a></li>
<li><a href="#engine">engine</a></li>
</ul>
</li>
<li><a href="#利用mocha进行单元测试">利用mocha进行单元测试</a></li>
<li><a href="#发行你自己的npm包">发行你自己的npm包</a></li>
</ul>
</div>

                <div class="p-1">首发于：<time pubdate="pubdate" datetime="2023-10-23T00:00:00+08:00">2023年 10月 23日 </time>
                </div>

                <div class="p-1">最近更新于：<time datetime="2023-10-26T13:15:08.387602+08:00">2023年 10月 26日 </time>
                </div>


                <div class="p-1">分类：
                <a class="category-link" href="https://a358003542.github.io/categories.html#posts-ref">posts</a>
                </div>
            </div>
        </div>

        <div class="col-sm-12 col-md-8 col-lg-8">
            <div class="article-content">
                
<h2 id="简介">简介</h2>
<p>npm提供了第三方的JavaScript模块服务，一般安装好nodejs之后除了node命令之外就有npm命令了。</p>
<p>项目通过运行 <code>npm init</code> ，向导式风格辅助生成本项目的包管理信息配置文件 <code>package.json</code> 。</p>
<h3 id="npm-install">npm install</h3>
<div class="highlight"><pre><span></span><code>npm install module_name 
</code></pre></div>
<p>如上npm install 会试着安装某个模块，如果没有指定module_name，那么会根据当前文件夹的 <code>package.json</code> 文件里面的配置来执行项目初始化安装动作。</p>
<p>你可以通过 <code>-g</code> 选项来指明本次操作是针对全局的npm库，但除非有必要，现在是不推荐这样做了。 </p>
<p><code>npm install</code> 还有一些额外的安装选项：</p>
<ul>
<li>
<p><strong>默认</strong>是 <code>--save-prod</code> 或者 <code>-P</code> ，常规依赖包信息会放在 <code>dependencies</code> 字段下。一般和项目直接相关的包放在这里。【因为是默认值所以一般很少会打出这个 <code>--save-prod</code> ，在npm version 5之前需要额外加个 <code>--save</code>大概也是类似的功能。】</p>
</li>
<li>
<p><code>--save-dev</code> 或者 <code>-D</code> ，开发包信息会放在 <code>devDependencies</code> 。和开发调试封装打包等相关的包信息推荐放在这里，比如electron官方会提示我应该放在 <strong>devDependencies</strong> 那里。</p>
</li>
<li>
<p><code>--save-optional</code> 或者 <code>-O</code> ，可选的包信息：<code>optionalDependencies</code> 。</p>
</li>
<li>
<p><code>--no-save</code> 含义很明显，就是不写入包依赖信息了。</p>
</li>
</ul>
<p>包信息后面的版本有一些特殊符号，其含义是：</p>
<ul>
<li>符号 <code>^</code> 表示之后的版本都可以</li>
<li>符号 <code>~</code> 表示是允许小版本内的升级</li>
</ul>
<p>更多关于npm版本号细节请参看官方文档的 <a href="https://nodejs.dev/learn/semantic-versioning-using-npm">这里</a> 。</p>
<h3 id="npm-run">npm run</h3>
<p>前面提到过 <code>npm start</code> 启动某个命令，其只是 <code>npm run start</code> 的别名。你定义的 <code>scripts</code> 字段里面的命令行列表都可以通过 <code>npm run what</code> 来调用：</p>
<div class="highlight"><pre><span></span><code>{
  "scripts":{
    "what": "command line"
  }
}
</code></pre></div>
<h3 id="npm-uninstall">npm uninstall</h3>
<p>npm uninstall module_name 移除某个模块 </p>
<h3 id="npm-list">npm list</h3>
<p>npm list  列出已经安装的模块</p>
<h3 id="npm-update">npm update</h3>
<p>npm update module_name 更新某个模块 【如果不写上模块名则会自动根据当前的package.json文件来进行模块升级动作】</p>
<h2 id="packagejson文件详解">package.json文件详解</h2>
<h3 id="name">name</h3>
<p>本模块名字</p>
<h3 id="version">version</h3>
<p>版本号</p>
<h3 id="description">description</h3>
<p>简短描述</p>
<h3 id="main">main</h3>
<p>模块入口</p>
<h3 id="private">private</h3>
<p>设置为true将禁止本模块上传到npm公共库里面去</p>
<h3 id="scripts">scripts</h3>
<p>一系列的命令行入口定义</p>
<h3 id="dependencies">dependencies</h3>
<p>包依赖</p>
<h3 id="devdependencies">devDependencies</h3>
<p>开发包依赖</p>
<h3 id="homepage">homepage</h3>
<p>模块主页</p>
<h3 id="license">license</h3>
<p>版权协议</p>
<h3 id="keywords">keywords</h3>
<p>描述关键字，示例：</p>
<div class="highlight"><pre><span></span><code>"keywords": [
    "latex",
    "math"
  ],
</code></pre></div>
<h3 id="author">author</h3>
<p>作者信息，示例： </p>
<div class="highlight"><pre><span></span><code> "author": {
   "name": "Joe",
   "email": "joe@whatever.com",
   "url": "https://whatever.com"
 }
</code></pre></div>
<h3 id="repository">repository</h3>
<p>模块仓库，示例：</p>
<div class="highlight"><pre><span></span><code>  "repository": {
  "type": "git",
  "url": "https://github.com/whatever/testing.git"
  }
</code></pre></div>
<h3 id="engine">engine</h3>
<p>nodejs等版本依赖，示例：</p>
<div class="highlight"><pre><span></span><code>  "engines": {
  "node": "&gt;= 6.0.0",
  "npm": "&gt;= 3.0.0",
  "yarn": "^0.13.0"
  }
</code></pre></div>
<h2 id="利用mocha进行单元测试">利用mocha进行单元测试</h2>
<p>首先是安装mocha</p>
<div class="highlight"><pre><span></span><code>npm install --save-dev mocha
</code></pre></div>
<p>然后新建一个test文件夹，里面是你的用于测试的js文件。</p>
<p>然后package.json配置：</p>
<div class="highlight"><pre><span></span><code>  "scripts": {
    "test": "mocha",
  },
</code></pre></div>
<p>然后运行 <code>npm test</code> 即用mocha执行了单元测试。</p>
<p>具体单元测试的js代码简要介绍如下：</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nx">assert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">'assert'</span><span class="p">);</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">describe</span><span class="p">(</span><span class="s1">'#indexOf()'</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">it</span><span class="p">(</span><span class="s1">'should return -1 when the value is not present'</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="mf">4</span><span class="p">),</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">);</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>
</code></pre></div>
<p>这上面的：</p>
<div class="highlight"><pre><span></span><code><span class="nx">describe</span><span class="p">(</span><span class="s1">'Array'</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="p">...</span>
<span class="w">  </span><span class="p">});</span>
</code></pre></div>
<p>和 </p>
<div class="highlight"><pre><span></span><code>      it('should return -1 when the value is not present', function() {
        ...
      });
</code></pre></div>
<p>就是mocha的一些输出信息调配，比如上面的输出信息为：</p>
<div class="highlight"><pre><span></span><code>  Array
    #indexOf()
      ✔ should return -1 when the value is not present
</code></pre></div>
<p>熟悉单元测试的知道最核心的就是那个 <code>assert.equal()</code> ，至于那个describe和it，跟着那么用就是了。</p>
<h2 id="发行你自己的npm包">发行你自己的npm包</h2>
<p>首先你需要在 <code>npmjs.com</code> 上申请个用户名：</p>
<div class="highlight"><pre><span></span><code>npm adduser
</code></pre></div>
<p>或者以前adduser过了那么运行：</p>
<div class="highlight"><pre><span></span><code>npm login
</code></pre></div>
<p>然后：</p>
<div class="highlight"><pre><span></span><code>npm publish
</code></pre></div>
<p>默认发送公开的模块，npm付费用户可以发布私有模块。</p>
            </div>
        </div>

    </div>
</div>
        </main>
        
        <footer class="footer">
            <ul class="nav justify-content-center">
                <li class="nav-item">
                    <span class="nav-link text-muted px-2">Created by Wanze & Companion with</span></li>
                <li class="nav-item">
                    <a class="nav-link text-muted px-2" href="https://python.org/">Python</a></li>
                <li class="nav-item">
                    <a class="nav-link text-muted px-2" href="http://getpelican.com/">Pelican</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-muted px-2" href="https://github.com/Python-Markdown/markdown">Markdown</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-muted px-2" href="http://oncrashreboot.com/pelican-elegant">Elegant</a></li>
                <li class="nav-item">
                    <a class="nav-link text-muted px-2" href="https://www.javascript.com/">Javascript</a></li>
                <li class="nav-item">
                    <a class="nav-link text-muted px-2" href="https://www.mathjax.org/">Mathjax</a>
                </li>
                <li class="nav-item">
                    <span class="nav-link text-muted px-2">etc...</span></li>
            </ul>
        </footer>
    </div>

    <script src="https://a358003542.github.io/theme/lodash/js/lodash.min.js"></script>
    <script src="https://a358003542.github.io/theme/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="https://a358003542.github.io/theme/js/base.js"></script>

<script src="https://a358003542.github.io/theme/js/article.js"></script>


</body>

</html>