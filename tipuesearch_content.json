{
    "pages":[
        {
            "title":"关于本网站",
            "text":"  网站 搜索 功能 ， 几次 不太想 玩 pelican 东西 ， 发现 本地 markdown 写作 体验 ， 搜索 功能 支持 ， 都 某书要 好 ， 不用 提了 。   网站 挂 外面 查阅 信息 很 便捷 。   网站 定位 IT 相关 技术 知识 ， 相关 放在 ， 只会 污染 搜索 池 。   网站 文章 很赞 ， 请 码 赞赏 ， 谢谢 。   LISENSE   网站 文章 版权 作者 ， 读者 阅读 学习 研究 ， 极小 复制粘贴 ， 请勿 抄袭 。 【 读者 私底下 一个 人 自我 学习 保存 ， 。 】   请 爬虫 爬本 网站 。",
            "tags":"pages",
            "url":"guan-yu-ben-wang-zhan.html"
        },
        {
            "title":"公告",
            "text":"色即是空 ， 空即是色",
            "tags":"pages",
            "url":"gong-gao.html"
        },
        {
            "title":"flask上下文释疑",
            "text":"  gunicorn 进程 模式 flask 作用   参考     解答 ：   import   socket   import   os   def   main   ( ) :   serversocket   =   socket   .   socket   (   socket   .   AF _ INET   ,   socket   .   SOCK _ STREAM   )   serversocket   .   bind   ( (   \" 127.0 . 0.1 \"   ,   8888   ) )   serversocket   .   listen   (   0   )   #   Child   Process     os   .   fork   ( )   = =   0   :   accept _ conn   (   \" child \"   ,   serversocket   )   accept _ conn   (   \" parent \"   ,   serversocket   )   def   accept _ conn   (   message   ,   s   ) :     True   :   c   ,   addr   =   s   .   accept   ( )   print   ' Got   connection       % s   '   %   message   c   .   send   (   ' Thank         connecting     % s   \\ n   '   %   message   )   c   .   close   ( )     __ __   = =   \" __ main __ \"   :   main   ( )   gunicorn   采用   pre - fork   work   模式 ， 大概 作业 模式 上 代码 所示 ， 不同点   gunicorn   主 进程 不 负责 消息 ， 只 负责 端口 监听 消息 分 发给 子 进程 。   进程 情况 大体 熟悉 ， 基本上 都 独立 运行 内部 变量 类 之间 不 程序 。 flask   wsgi 源码 中有 代码 ：   def   wsgi _ app   (     ,   environ   ,   start _ response   ) :   ctx   =     .   request _ context   (   environ   )   error   =   None     :     :   ctx   .   push   ( )   response   =     .   full _ dispatch _ request   ( )     Exception     e   :   error   =   e   response   =     .   handle _ exception   (   e   )     :   #   noqa :   B001   error   =   sys   .   exc _ info   ( ) [   1   ]   raise   return   response   (   environ   ,   start _ response   )   finally   :       .   _ ignore _ error   (   error   ) :   error   =   None   ctx   .   auto _ pop   (   error   )   environ 环境 中 大概 有本 进程   app 类 ， ctx 请求 环境 ， 简单 下 讨论 。   二   flask 应对 多线程   就要   flask   源码   globals   两行 代码 说起 ：   _ request _ ctx _ stack   =   LocalStack   ( )   _ app _ ctx _ stack   =   LocalStack   ( )   代码   请求 环境 栈 应用环境 栈 都 定义 ， LocalStack   参考   这片 文章   讨论 ， 借鉴 python   threading   模块   local ， 其是 一个 线程 本地 变量 ， 简单 来说 其是 一个 字典 线程 id 索引 ， id 取 值 ， 互不 干扰 。   flask 多线程 下 ， 请求 环境 栈 应用环境 栈 看做 堆栈 ， 互补 干扰 。   三   flask 应对 多协程   原则上 flask python threading local ， 协程 很 好 应对 ， python3.7 新增 一个   contextvars   模块 解决 。 ， gunicorn   多个 进程 worker ， 多个 进程 worker 之下 还 开启 多个 线程 ， 默认 线程 之外 ， gunicorn 还 开启 gevent 异步 线程 。 gevent 开启 多协程 ， flask 应对 情况 ？   flask   werkzeug 定义 Local 类 ， 源码 中 ：     :     greenlet   import   getcurrent     _ ident     ImportError   :     :     thread   import   _ ident     ImportError   :     _ thread   import   _ ident   werkzeug 会试 先 加载 greenlet _ ident   函数 ， 想 函数 支持 greenlet 协程 ， gevent 底层 开启 greenlet 协程 。   ， 也就是说 flask 请求 环境 栈 应用环境 栈 线程 独立 ， 额外 greenlet 支持 。   提出 一个 ， 估计 flask python 内部 asyncio 协程 模式 支持 。   四   请求 环境 栈 到底 做 工作   请求 到来 ， 请求 环境 栈 应用环境 栈 都 空 。 app 类 代码 引用 办法 。   一个 请求 ， 请求 环境 栈会 执行 push 动作 ， 收集 好 环境 很多 变量 ，   request   session   ， 变量 ， 请求 环境 上下文 压入 堆栈 ， 检查 应用环境 堆栈 ， 为空 ， 会 自动 创建 ； 默认 top ， 会 自动 创建 压入 。   讨论 flask 应对 多线程 多协程 默认 下 ， 【 讨论 ， 只 说 线程 】 ， 最小 线程 单元 中 ， 请求 环境 栈 应用环境 栈 都 ， 都 会 默默 记录 下 请求 环境 应用环境 ， 都 一个 请求 一个 请求 顺序 。 一个 请求 ， push ， 完 ， pop 。 很 简单 模式 。   应用环境 存储 做 优化 ， top 存储 None ， 到时候 需要的话 ， 调用   current _ app   来取 。   取 采用 代码 一种 惰性 动态 代理 机制 ：   def   _ lookup _ req _ object   (     ) :   top   =   _ request _ ctx _ stack   .   top     top     None   :   raise   RuntimeError   (   _ request _ ctx _ err _ msg   )   return   getattr   (   top   ,     )   request   =   LocalProxy   (   partial   (   _ lookup _ req _ object   ,   \" request \"   ) )   session   =   LocalProxy   (   partial   (   _ lookup _ req _ object   ,   \" session \"   ) )   g   =   LocalProxy   (   partial   (   _ lookup _ app _ object   ,   \" g \"   ) )   request   session 生存期 请求 期 ， 这是 。 g 变量 还 讨论 下 。 第一个 g 最小 粒度 在线 程 ， 线程 之间 g 不相干 。 在线 程 内部 接受 请求 ， 都 引用 默认 上下文 环境 ， g 多个 请求 公用 。 讨论 ， 线程 之间 g 不 通用 ， 就算 线程 内部 ， 应付 多个 请求 ， 多个 情况 来说 g 上下文 绑定 ， 请求 不 公用 g 。   flask 推荐 请求 之间 记住 值 ， 推荐 数据库 session 变量 ， session 挂 请求 上下文 中 ， 请求 上下文 创建 其是 接受 session 参数 ：   def   __ init __ ( ,   app ,   environ ,   request = None ,   session = None ) :   session 传递 还 ， werkzeug 。   flask 推荐 g 一种 方式 ， 管理 数据库 连接 ， g 会为 空 ， ， 确保 引用 ， 检查一下 即可 ：     flask   import   g   def   _ db   ( ) :     ' db '       g   :   g   .   db   =   connect _ _ database   ( )   return   g   .   db   @ app . teardown _ appcontext   def   teardown _ db   ( ) :   db   =   g   .   pop   (   ' db '   ,   None   )     db       None   :   db   .   close   ( )   五   情况 怎么回事   参考   篇文章   讨论   ， flask 支持 编码 风格 ：     werkzeug . wsgi   import   DispatcherMiddleware     frontend _ app   import   application     frontend     backend _ app   import   application     backend   application   =   DispatcherMiddleware   (   frontend   ,   {   ' / backend '   :   backend   } )   单一 线程 接受 请求 ， 请求 app 负责 ， 请求 app 负责 ， 上下文 环境 栈是 支持 情况 。   教程 都 会 提到 上下文 环境 用于 单元测试 ：     app . app _ context ( ) :   pass       import   app     flask   import   current _ app   app _ ctx   =   app   .   app _ context   ( )   app _ ctx   .   push   ( )   print   (   current _ app   .     )   六   session 到底 东西   提到 flask 创建 请求 上下文 session 参数 不 传 进来 ， flask session 到底 东西 ？   说 下 背景 知识 ： 服务器 响应 内容 设置 响应 头 ：   Set - Cookie   ， flask ：   r   =   Response ( ' test ' )   r . set _ cookie ( ' a ' , ' 1 ' )   客服 端 client 或者说 浏览器 接收 响应 ， 下次 目标 服务器 请求 会 请求 头上 加上 Cookie 。   图 所示 ：   ：   第二次 刷新 ， 浏览器 无痕 模式 测试 ， 第一次 request 请求 头 Cookie 。   上 图 Cookie 中   session   字 段 ， 内容 含义 不明 。 flask session ：     flask   import   session   flask 加密 。",
            "tags":"python好伙伴",
            "url":"articles/flask-context-faq.html"
        },
        {
            "title":"python语言学习进阶",
            "text":"前言   淘得 好书   《 理解 python 特性   《 流畅 python ， python 语言 知识 进阶 查漏 补缺 。   最 疯狂 字典 表达式   t   =   {   True   :   ' '   ,   1   :   ' '   ,   1.0   :   ' '   }   t   Out   [   3   ] :   {   True   :   ' '   }   python 字典 key 判断 机制 ，   值     hash   值   才   key 。   key key 不 做 改变 ， 而值 取 最新 。 正是 ， 字典 更新 语句 写法 可行 ：   x   =   { ' a ' : 1 ,   ' b ' : 2 }   y   =   { ' b ' : 3 }   z   =   { * * x ,   * * y }   z   Out [ 8 ] :   { ' a ' :   1 ,   ' b ' :   3 }   最快 字典 更新 方式 。   ChainMap   多个 字典 组合 一个 map 字典 ， 想到 一个 配置 字典 流 ， 利用 ChainMap 定义 搜索 路 径流 ， 先 搜索 配置 优先 取用 。     collections   import   ChainMap   d1   =   {   ' a '   :   1   ,   ' b '   :   2   }   d2   =   {   ' a '   :   2   ,   ' d '   :   3   }   d3   =   ChainMap   (   d1   ,   d2   )   typing . NamedTuple   类 添加 python3.6 ，   collections . namedtuple   类似 。     typing   import   NamedTuple   class   Car   (   NamedTuple   ) :   color   :   str   mileage   :   float   automatic   :   bool   car1   =   Car   (   color   =   ' red '   ,   mileage   =   3512.5   ,   automatic   =   True   )   car1   .   color   不 赞同 达恩 · 巴德尔 观点 — — 推荐 typing . NamedTuple   ， namedtuple 优势 区分 字典 ， 其有 两个 ： ， key 变 ； 二 ， 轻量级 。 情况 下 namedtuple 优于 字典 。 采用 类 写法 ， 换 一个 情景 ， 情境 下 ， NamedTuple dict 都 不 太 合适 ， 而类 第一 公民 。   queue . PriorityQueue   queue . PriorityQueue   内部 基于 heapq 堆排序 ， 额外 做 ， 保证 操作 线程 。 一般来说 一个 优先级 队列 ， 推荐   PriorityQueue ：     queue   import   PriorityQueue   q   =   PriorityQueue   ( )   q   .   put   ( (   2   ,   ' code '   ) )   q   .   put   ( (   1   ,   ' eat '   ) )   q   .   put   ( (   3   ,   ' sleep '   ) )       q   .   empty   ( ) :   print   (   q   .     ( ) )   ( 1 ,   ' eat ' )   ( 2 ,   ' code ' )   ( 3 ,   ' sleep ' )   queue . Queue   线程 先进先出 【 队列 操作 】 数据结构 。     queue   import   Queue   q   =   Queue   ( )   q   .   put   (   ' a '   )   q   .   put   (   ' c '   )   print   (   q   .     ( ) )   print   (   q   .     ( ) )   a   c   queue . LifoQueue   线程 后进先出 【 栈 操作 】 数据结构 。     queue   import   LifoQueue   q   =   LifoQueue   ( )   q   .   put   (   ' a '   )   q   .   put   (   ' c '   )   print   (   q   .     ( ) )   print   (   q   .     ( ) )   c   a   multiprocessing . Queue   跨 进程 先进先出 队列 数据结构 ：     multiprocessing   import   Queue   q   =   Queue   ( )   q   .   put   (   ' a '   )   q   .   put   (   ' c '   )   print   (   q   .     ( ) )   print   (   q   .     ( ) )   a   c   参考资料   理解 python 特性   达恩 · 巴德尔   【 德 】   流畅 python",
            "tags":"python语言",
            "url":"articles/python-advanced.html"
        },
        {
            "title":"高效numpy和pandas",
            "text":"高效 numpy   numpy pandas 快   一个 计算 ， 发现 dataframe values 值 ， numpy 运算 ， 类似 语句 报错 ：   np . dot ( df [ ' a ' ] , x )   写 上   df [ ' a ' ] . values   会 程序 速度 快 上 一点点 。   numpy concatate stack 快   程序 ：   import   numpy     np   x   =   np   .   random   .   rand   (   1   ,   1000   )   %% timeit   res   =   np   .   vstack   ( [   x     i     range   (   10000   ) ] )   50.7   ms   ±   1.5   ms     loop   (   ±   std .   dev .     7   runs ,   10   loops   )   %% timeit   res   =   np   .   concatenate   ( [   x     i     range   (   10000   ) ] ,   axis   =   0   )   41.1   ms   ±   697   µ s     loop   (   ±   std .   dev .     7   runs ,   10   loops   )   numpy copy 操作 多用 view   https : / / ipython - books . github . io / 45 - understanding - - internals - - numpy - - avoid - unnecessary - array - copying /   高效 Pandas   参考   篇文章   ， 一系列 更好 pandas 文章 ， 价值 很大 。 关注 上 speed   。   多个 结构 df 合并 推荐 concat append   pandas dataframe 长度 改变 操作 都 会 引发 copy 操作 ， 先 数据 合并 成 一个 多个 dataframe 再 concat 【 不 推荐 append ， 一行行 append 不 推荐 】 。   很多 类似 数据源 ， 多个 csv 文件 ， 结构 df 合并 操作 。 推荐 concat 做 ， append ：   topk _   =   pd   .   concat   ( [   topk _ df   ,   local _ topk   ] ,   ignore _ index   =   True   )   pandas nlargest 排序 取前 几个   找 几个 值 ， 推荐 Dataframe nlargest 方法 ， 方法 优化 ， 简单 来说 快速 排序 前半部 分 ， 会 更 高效 。   逐个 索引 操作 风格   尽量 apply   向量 操作 风格 最 高效   优化 建议 参看   篇文章   ， 学习 下 篇文章 分析 测速 思路 。   pandas 列 值 操作 ， 逐个 索引 风格 ：     i     range ( 0 ,   len ( df ) ) :   d   =   haversine ( 40.671 ,   - 73.985 ,   df . iloc [ i ] [ ' latitude ' ] ,   df . iloc [ i ] [ ' longitude ' ] )   distance _ list . append ( d )   很慢 ， 代码 不 。   iterrows   写法 ：   haversine _ series   =   [ ]     index   ,   row     df   .   iterrows   ( ) :   haversine _ series   .   append   (   haversine   (   40.671   ,   -   73.985   ,   row   [   ' latitude '   ] ,   row   [   ' longitude '   ] ) )   逐个 索引 稍微 好点 ， 不 。 apply 写法 稍微 好点 ， 尽量 不 ：   df [ ' distance ' ]   =   df . apply ( lambda   row :   haversine ( 40.671 ,   - 73.985 ,   row [ ' latitude ' ] ,   row [ ' longitude ' ] ) ,   axis = 1 )   pandas   最 高效 操作 风格 向量 式 操作 ， 定义 函数 习惯 numpy 那种 ndarray 向量 操作 风格 ， 函数 支持 ：   import   numpy     np   #   Define   a   basic   Haversine   distance   formula   def   haversine   (   lat1   ,   lon1   ,   lat2   ,   lon2   ) :   MILES   =   3959   lat1   ,   lon1   ,   lat2   ,   lon2   =   map   (   np   .   deg2rad   ,   [   lat1   ,   lon1   ,   lat2   ,   lon2   ] )   dlat   =   lat2   -   lat1   dlon   =   lon2   -   lon1   a   =   np   .   sin   (   dlat   /   2   )   * *   2   +   np   .   cos   (   lat1   )   *   np   .   cos   (   lat2   )   *   np   .   sin   (   dlon   /   2   )   * *   2   c   =   2   *   np   .   arcsin   (   np   .   sqrt   (   a   ) )   total _ miles   =   MILES   *   c   return   total _ miles   写法 numpy 东西 ， 向量 操作 很 熟悉 ， pandas Series 对象 传递 即可 。   向量 式 写法 优化 apply 写法 ， 快 56 倍 。   df [ ' distance ' ]   =   haversine ( 40.671 ,   - 73.985 ,   df [ ' latitude ' ] ,   df [ ' longitude ' ] )   numpy ndarray 对象 ， 速度 还 提升 4 倍 ：   df [ ' distance ' ]   =   haversine ( 40.671 ,   - 73.985 ,   df [ ' latitude ' ] . values ,   df [ ' longitude ' ] . values )",
            "tags":"机器学习",
            "url":"articles/gao-xiao-numpyhe-pandas.html"
        },
        {
            "title":"bash脚本进阶",
            "text":"xargs 多行 转 一行   sudo   rmdir   - - ignore - fail - - - empty   $ ( ls   - U   |   head   - n   10000   |   xargs )   这是 一个 批量 删除 空 文件夹 命令 ， 假设 空 文件夹 数目 很多 。   ls   - U   单纯 列出来 ， 管道 导向   head   只 打印 最 几行 ， 管道 导向   xargs   命令 ， 多行 转 成 一行 ，   rmdir   参数 。",
            "tags":"linux",
            "url":"articles/bash-advanced.html"
        },
        {
            "title":"loguru模块",
            "text":"前言       simple   ,       stupid   .   loguru 模块 大概 符合 这一 精神 ， 精力 日志 调配 琐碎 事情 上 抽离 ， 好 更 精力 去 解决 核心 。 基本上 ， 好像 python 新 特性   f - string   ，         stop       .   会 忍不住 想要 。   最 简单 ：     loguru   import   logger   接触 logging 马上 logger 东西 ， 想   logger . info ( ' ' )   去 日志 即可 。 默认 logger 日志 格式 好 。   够用 ， 实际上 容器 化 场景 ， 日志 都 打印 默认 终端 上 ， 管理 日志 工具 ， 打印 默认 终端 。   情况 下 日志 打印 文件 中 ：   logger . add ( ' < filename > . log ' )   还 支持 带 时间 戳 文件名 ：   logger . add ( ' file _ { time } . log ' )   文件 控制 更 高级 用法 ：   logger . add ( \" file _ 1 . log \" ,   rotation = \" 500   MB \" )   #   文件 过大 自动 开启 新 日志 文件   logger . add ( \" file _ 2 . log \" ,   rotation = \" 12 : 00 \" )   #   12 : 00   开启 新 文件   logger . add ( \" file _ 3 . log \" ,   rotation = \" 1   week \" )   #   一周 时间 开启 新 文件   logger . add ( \" file _ X . log \" ,   retention = \" 10   days \" )   #   10 天 清除 旧 日志   logger . add ( \" file _ Y . log \" ,   compression = \" zip \" )   #   压缩 日志   loguru 很多 高级 用法 ， 再 看 ， 最 关键 一个 兼容 logger ， 比如说 tornado django 默认 logger 。   研究 ， 解决方案 参考 官方 文档 ， 整合 logging 工作 方式 。 logging 都 loguru logger 再 发送 一遍 消息 。   class   InterceptHandler   (   logging   .   Handler   ) :   def   emit   (     ,   record   ) :   #   Retrieve   context       logging   call   occurred ,               6th   frame   upward   logger _ opt   =   logger   .   opt   (   depth   =   6   ,   exception   =   record   .   exc _ info   )   logger _ opt   .   log   (   record   .   levelno   ,   record   .   getMessage   ( ) )   logging   .   basicConfig   (   handlers   =   [   InterceptHandler   ( ) ] ,   level   =   0   )     depth = 6   大有 讲究 ， 设置 6 才能 正确 追踪 原 日志 代码 所在地 ， 日志 信号 再 发送 。     record . levelno   发现 换成   record . levelname   不错 。   原 logging 日志 流 loguru 整合 。",
            "tags":"python好伙伴",
            "url":"articles/loguru-module.html"
        },
        {
            "title":"提取图片的特征",
            "text":"提取 图片 特征   请参阅   篇文章   ， 老实 说 算法 细节 看不大 懂 ， 短时间 内 没 希望 看 懂 .. 有太深 相关 领域 专业知识 。 python 代码 很 简单 ：   import   numpy     np   import   cv2   img   =   cv2   .   imread   (   ' test _ 1 . jpg '   ,   0   )   #   第二个 参数设置 0 自动 灰度 化   sift   =   cv2   .   xfeatures2d   .   SIFT _ create   ( )   #   找出 关键点   kp   =   sift   .   detectAndCompute   (   gray   ,   None   )   #   关键点 绘图   ret   =   cv2   .   drawKeypoints   (   gray   ,   kp   ,   img   )   cv2   .   imshow   (   ' ret '   ,   ret   )   cv2   .   waitKey   (   0   )   cv2   .   destroyAllWindows   ( )   #   关键点 找出 sift 特征向量   kp   ,   des   =   sift   .   compute   (   gray   ,   kp   )",
            "tags":"机器学习",
            "url":"articles/extract_pic_feature.html"
        },
        {
            "title":"impala",
            "text":"impala   impala 用于 Hadoop 集群 上 数据 SQL 引擎 。   impala 传统 SQL 知识 极快 速度 存储 HDFS 上 数据 。   impala 传统 SQL 关系数据库 区别 ：   impala 更新 删除 单个 记录   impala 不 支持 事务   impala 不 支持 索引   python 连接 impala   impyla   模块 python 连接 impala ， 简单 连接 README 简单 说 。   语法 符合 python 通用 db   api   2 ， 读者 sqlite3 ， python 官方 模块 ， 大概 个数 。   不 熟悉 没关系 ， 简单 连接 下 输出 ， 大概 情况 。 一块 SQL 语法 。   导出 DataFrame 对象   说 ， cursor 对象 executor 语句 ， 转成 pandas DataFrame 对象 ， 转 ， 很多 数据处理 工作 会 很 。     impala . util   import   _ pandas   df   =   _ pandas   (   cur   )   参考资料   w3cschool   impala 教程",
            "tags":"大数据",
            "url":"articles/impala.html"
        },
        {
            "title":"hadoop文件系统",
            "text":"前言   hdfs 全称 hadoop 分布式文件系统 。   HDFS 采用 master / slave 架构 。 一个 HDFS 集群 一个 Namenode 数目 Datanode 。   hdfs 设计 针对 只 写入 ， 读取 数据 。   pyarrow 连接 hdfs   import   pyarrow     pa   fs   =   pa   .   hdfs   .   connect   (   host   ,   port   ,   user   =   user   )   连接 返回 HDFS 文件 对象 ， 文件 对象 调用 命令 ：   cat   chmod   chown   delete   df   exists   _ capacity   _ space _   info   ls   rm   rename   upload",
            "tags":"大数据",
            "url":"articles/hadoop-file-system.html"
        },
        {
            "title":"科学计算技巧杂项",
            "text":"计算 余弦     $ $   \\ cos ( \\ theta )   =   \\ frac { \\ vec { a }   \\ cdot   \\ vec { b } } { \\ left   |   \\ vec { a }   \\   |   \\ left   |   \\ vec { b }   \\   |   }   $ $   向量 绝对值 ， 高中 写法 ， 更 确切 写作 形式 ：   $ $   \\ cos ( \\ theta )   =   \\ frac { \\ vec { a }   \\ cdot   \\ vec { b } } { \\ left   \\ |   \\ vec { a }   \\   \\ | _ 2   \\ left   \\ |   \\ vec { b }   \\   \\ | _ 2   }   $ $   向量 l2 范数 ， 向量 欧几里得 距离 。   向量 sklearn   normalize   归一化 操作 ， 向量 l2 范数 = 1 ， 默认 l2 范数 ， 设置 范数 。 l1 范数 值 绝对值 相加 等于 1 （ 数据 预处理 中 ， 概率 合计 等于 1 有用 ） 。   余弦 简化 形式 ：   $ $   \\ cos ( \\ theta )   =   \\ vec { a }   \\ cdot   \\ vec { b }   $ $   求 两个 向量 点积 ， 调用   numpy dot 方法 。   验证 normlize 确实 目标 数据 归一化 ：   np . linalg . norm ( x ,   ord = 2 )   ord   =   2   求 l2 范数 ， ord = 1 求 l1 范数 。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"机器学习",
            "url":"articles/ke-xue-ji-suan-ji-qiao-za-xiang.html"
        },
        {
            "title":"dask模块",
            "text":"前言   python 生态圈 来说 ， 大 数据 解决方案 推荐 dask 多于 pyspark 。 接触 pyspark 痛苦 ， 学习 机器学习 积累 numpy ， pandas ， sklearn 知识 ， 。 dask python 大 数据 解决方案 ， 不说 无缝 对接 ， 不 现实 ， 毕竟 大 数据 块 ， 不说 东西 ， 应对 变量 ， 惰性 加载 惰性 求值 ， 一个 区别 点 。 总 感觉 ， python 爱好者 ， 之于 大 数据 解决方案 ， dask 真的 很爽 。   dask 官方 文档 写 很 厚实 ， 这块 东西 。 本文 作者 所知 简要地 说 下 经验 。 深入研究 读者 去 研究   官方 文档   。   大 数据 hadoop 简介   hadoop2 架构 大概 所示 ：   底层 hadoop 分布式文件系统 大 数据 文件 存储 支持 。 HDFS 架构 图 所示 ：   中层 YARN 计算资源 调度 分配 。 YARN 架构 图 所示 ：   如上图 所示 ， Yarn 一个 Scheduler ， Resource   Manager   资源 调度 ， 很多   worker ， Node   Manager 计算 。   最高层 MapReduce 框架 分布式应用 程序 一个 支持性 框架 ， Hadoop2 可扩展性 很 好 ， dask ， spark 框架 都 运行 Yarn 之上 。   dask 简介   dask 两 ：   基于 计算 优化 动态 调度   大 数据 级别 集合   简单 来说 dask 基于 python 常见 数据类型 概念 ， array ， dataframe ， 大 数据 级别 集合 扩展 ， 其有 很多 worker 一个 scheduler ， 调度 器 负责 计算 调度 ， 调度 器 面临 最小 计算 单位 partition ， partition 会 分散 worker 中 ， worker 会 利用 python 环境 ， 计算 。   dask 安装 python 模块 来说 难点 所在 ， 一块 难点 大 数据 环境 搭建 上 。 大 数据 工作组 环境 搭建 好 ， 利用 dask - yarn 很 dask 分布式 分发 工作 。   dask - yarn   dask 连接 yarn 集群     dask _ yarn   import   YarnCluster     dask . distributed   import   Client   #   Create   a   cluster       worker       cores       GiB     memory   cluster   =   YarnCluster   (   environment   =   ' environment . tar . gz '   ,   worker _ vcores   =   w _ cores   ,   worker _ memory   =   w _ mem   ,   scheduler _ vcores   =   s _ cores   ,   scheduler _ memory   =   s _ mem   ,     =   app _   ,   worker _ env   =   {   ' ARROW _ LIBHDFS _ DIR '   :   libhdfs _ env   } )   #   Scale       ten     workers   cluster   .   scale   (   10   )   #   Connect       cluster   client   =   Client   (   cluster   )   连接 过程 上 所示 ， 安装   dask - yarn   模块 ， 连接 参数   environment   分布式应用 程序 python 环境 包 ， 激活 虚拟环境 下 运行   venv - pack   命令 打包 。   worker _ vcores   申请 分配 资源 worker   cpu   核数   worker _ memory   申请 分配 资源 worker   内存 数   scheduler _ vcores   申请 分配 资源 scheduler   cpu   核数   scheduler _ memory   申请 分配 资源 scheduler   内存 数     申请 分配资源 名字   work _ env   大 数据 组 配置 好 hadoop 环境变量   调整 worker 资源   最 开启 worker 资源 。   cluster . scale ( )   跟个 数字 ， 其会 自动   scale _     scale _   。   关闭 释放 资源   cluster 关闭 动作 会 申请 自动 释放 hadoop 集群 上 申请 资源 ， 非正常 推荐 都 导致 申请 资源 仍 占 。 更 保险 确保 异常 总 执行 :   cluster . shutdown ( )   强制 关闭   dask - yarn   kill   application _ 1538148161343 _ 0051   dataframe 最佳 实践   机器 内存 够用 ， pandas 。   代码 运算 过程 中 ， 转到 pandas ， 尽早 转到 pandas 。   pandas 优化 ： apply ， 量化 操作 ， 分类 。 dask dataframe 都 。 量化 操作 风格 ， 初学 pandas 人 很 忽视 。   一列 设置 索引 index ， 列 操作 将会 加速 ， 比如说 列 loc ， groupby ， join     merge 。   提到   set _ index   很 昂贵 操作 ， 确认 这有 ， 频繁 设置 索引 操作 ， 再 persist   。   聪明 persist   推荐 采用 写法 节省 占用 内存 ：   df   =   client . persist ( df )   #   replace       lazy   DataFrame   设置 分区 数   分区 数太大 太小 都 不好   数据 存为 apache   parquet 文件格式   dataframe map _ partitions   返回值   参考   网页   。   函数 返回 标量 ， map _ partitions   返回   dask   Series   object   函数 返回 pd . Series   object ，     map _ partitions   会   Series   对象连接 ， 返回   dask   Series   object 。   函数 返回 pd . DataFrame   object   ， map _ partitions   会 Dataframe 连接起来 ， axis = 0 ， 纵向 ， 返回 dask   DataFrame 对象 。   dask 单机版   dask 单机版 熟悉 dask 命令 调试 代码 上 很 有用 ， 不 做 配置 dask 单机版 。   官方 文档 ， 单机版 分为 单机 调度 分布 式调度 两种 ， 官方 文档 推荐 采用 分布 式调度 ， 说 更好 诊断 功能 。     dask . distributed   import   Client   ,   LocalCluster   cluster   =   LocalCluster   ( )   client   =   Client   (   cluster   )   只能 linux 上 运行 。   单机版 线程 调度 中 有所区别 ：   进程 中 多个 线程   【 】   默认 dask . array   dask . dataframe   dask . delayed   scheduler = \" threads \"   分开 进程   默认 dask . bag   scheduler = \" processes \"   单线程 式   scheduler = \" single - threaded \"   参考资料   dask 官方 文档",
            "tags":"大数据",
            "url":"articles/dask-module.html"
        },
        {
            "title":"supervisor",
            "text":"简介   supervisor 会 开启 一个 后台 服务   supervisord   ：   systemctl   status   supervisord   查看 。 类似 nginx 做法 ， 配置文件 管理 ， 配置文件   / / supervisord . conf   文件 。   会 所示 配置文件 放在 地方 。   [ include ]   files   =   / / supervisord . d / * . conf   配置 都 下 supervisord 加载 。   还 下   supervisor 提供   supervisorctl   命令 。   提供 子 命令 ：   reread   重载 配置   restart   < >   重启 进程   restart     重启 进程   stop   < >   停止 进程   stop     停止 进程   start   < >   启用 进程   start     启用 进程   status   < >   查看 进程   status     查看 进程   clear   < >   清除 进程 日志   supervisor 进程 stdout 日志 输出 源 ， 日志 文件 将会 清除 ， 进程 还 ， 马上 新 日志 文件 。   clear     清除 进程 日志   update   < gname >   更新   进程 组   配置 ， 配置 发生 更改 ， 进程 将会 重启 。 reread 重载 配置 重启 过程 ， update 更新 配置 ， 重启 进程 ， update 更 实用 些 。   update     更新 进程 配置",
            "tags":"linux",
            "url":"articles/supervisor.html"
        },
        {
            "title":"蒙特卡罗模拟",
            "text":"前言   蒙特卡罗 模拟 蒙特卡罗 一个 赌 运气 游戏 名字 ， 蒙特卡罗 模拟 计算机 发展 背景 下 ， 思想 越来越 。 简单 来说 试图 一个 转 成 某种 随机 过程 ， 计算机 模拟 随机 过程 解答 。 自然界 ， 本身 暗含 随机性 ， 过程 建立 基于 随机性 模型 很 直观 ， 还 ， 计算   \\ ( \\ pi \\ )   值 ， 随机性 很 相关 ， 随机 过程 ， 计算 出   \\ ( \\ pi \\ )   值 ， 典型 蒙特卡罗 模拟 ， 蒙特卡罗 方法 。   常见 随机 游走 ， 建模 一个 蒙特卡罗 模拟 过程 。   本文 讨论 随机 游走 随机 过程 ， 还会 涉及 线性 拟合 ， 最小 二 乘法 ， 线性回归 相关 绘图 内容 。   建模 代码 所示 ， 参考 MIT python 编程 导论 一书 ：   import   random     math   import   sqrt   class   Location   (   object   ) :   def   __ init __   (     ,   x   ,   y   ) :     .   x   =   x     .   y   =   y   def   move   (     ,   dx   ,   dy   ) :   return   Location   (     .   x   +   dx   ,     .   y   +   dy   )   def   _ x   (     ) :   return     .   x   def   _ y   (     ) :   return     .   y   def   distance   (     ,     ) :   ox   ,   oy   =     .   x   ,     .   y   distance   =   sqrt   ( (     .   x   -   ox   )   * *   2   +   (     .   y   -   oy   )   * *   2   )   return   distance   def   __ str __   (     ) :   return   f   ' < Location   ( { . x } ,   { . y } ) > '   class   Drunk   (   object   ) :   def   __ init __   (     ,     =   None   ) :     .     =     def   __ str __   (     ) :       .         None   :   return     .       :   return   ' Anonymous '   class   UsualDrunk   (   Drunk   ) :   def   _ step   (     ) :   step _ choices   =   [ (   0   ,   1   ) ,   (   0   ,   -   1   ) ,   (   1   ,   0   ) ,   (   -   1   ,   0   ) ]   return   random   .   choice   (   step _ choices   )   class   Field   (   object   ) :   def   __ init __   (     ) :     .   drunks   =   { }   def   add _ drunk   (     ,   drunk   ,   loc   ) :     isinstance   (   loc   ,   (   tuple   ,   list   ) ) :   assert   len   (   loc   )   = =   2   loc   =   Location   (   loc   [   0   ] ,   loc   [   1   ] )     drunk       .   drunks   :   raise   ValueError   (   ' Duplicate   drunk '   )     :     .   drunks   [   drunk   ]   =   loc   def   move _ drunk   (     ,   drunk   ) :     drunk         .   drunks   :   raise   ValueError   (   ' Drunk       field '   )   dx   ,   dy   =   drunk   .   _ step   ( )   current _ loc   =     .   drunks   [   drunk   ]     .   drunks   [   drunk   ]   =   current _ loc   .   move   (   dx   ,   dy   )   def   _ loc   (     ,   drunk   ) :     drunk         .   drunks   :   raise   ValueError   (   ' Drunk       field '   )   return     .   drunks   [   drunk   ]   def   walk   (   f   ,   d   ,   num _ steps   ) :   start   =   f   .   _ loc   (   d   )     s     range   (   num _ steps   ) :   f   .   move _ drunk   (   d   )   return   start   .   distance   (   f   .   _ loc   (   d   ) )   def   bulk _ walk   (   num _ steps   ,   num _ bulk   ,   dClass   ) :   \" \" \"   : param   num _ steps :   随机 行走 步   : param   num _ bulk :   批次 次 实验   : param   dClass :   醉汉 类型   : return :   distances   批次 每次 开图 总共 行走 距离 列表   \" \" \"   drunk   =   dClass   ( )   origin   =   Location   (   0   ,   0   )   distances   =   [ ]     i     range   (   num _ bulk   ) :   f   =   Field   ( )   f   .   add _ drunk   (   drunk   ,   origin   )   distances   .   append   (   round   (   walk   (   f   ,   drunk   ,   num _ steps   ) ,   1   ) )   return   distances   def   drunk _ test   (   num _ steps _ batch   ,   num _ bulk   ,   dClass   ) :   \" \" \"   : param   num _ steps _ batch :   随机 行走 步 填入 批次   : param   num _ bulk :   批次 次 实验   : param   dClass :   醉汉 类型   : return :   \" \" \"   _ distance _ list   =   [ ]     num _ steps     num _ steps _ batch   :   distances   =   bulk _ walk   (   num _ steps   ,   num _ bulk   ,   dClass   )   print   (   f   ' { dClass .__ __ }   random   walk     { num _ steps }   steps '   )   _ distance   =   round   (   sum   (   distances   )   /   len   (   distances   ) ,   4   )   _ distance _ list   .   append   (   _ distance   )   print   (   f   ' Mean   =   { _ distance } '   )   print   (   f   ' Max   =   { max ( distances ) }   Min   =   { min ( distances ) } '   )   return   _ distance _ list     __ __   = =   ' __ main __ '   :   num _ steps _ batch   =   list   (   range   (   100   ,   3000   ,   100   ) )   data   =   drunk _ test   (   num _ steps _ batch   ,   100   ,   UsualDrunk   )   代码 都 很 简单 直观 代码 。 定义   绘图 函数 ：   def   polyfit _ plot   (   ax   ,   x   ,   y   ,   deg   =   1   ,   xlabel   =   ' '   ,   ylabel   =   ' '   ,   title   =   ' '   ,   * *   kwargs   ) :   \" \" \"   多项式 拟合 绘图   : return :   \" \" \"     xlabel   :   ax   .   set _ xlabel   (   xlabel   )     ylabel   :   ax   .   set _ ylabel   (   ylabel   )     title   :   ax   .   set _ title   (   title   )   predict _ func   =   np   .   poly1d   (   np   .   polyfit   (   x   ,   y   ,   deg   ) )     =   ax   .   plot   (   x   ,   y   ,   ' . '   ,   x   ,   predict _ func   (   x   ) ,   ' - '   ,   * *   kwargs   )   return     绘制 简单 线性 拟合 线 ， 想到 很多 东西 ， 热门 机器学习 ， 随机 过程 模拟 ， 统计 过程 分析 ， 作图 演示 概念 都 密不可分 。   比如说 简单 一元函数 拟合 ， numpy 提供 polyfit 函数 ， 本身 支持 ， 做 多项式 曲线拟合 。 拟合 过程 方法   最小 二 乘法   ， 其内 构建 一个   函数 ： 函数 值 最小 ：   $ $   \\ sum   ( y   -   y _ { predict } ) &# 94 ; 2   $ $   函数 还 误差 函数 。 机器学习 平方 损失 函数 ， 机器学习 会 接触 更 损失 函数 ， 梯度 下降 算法 扮演 角色 等同于 最小 二 乘法 ， 目标 损失 函数 值 最小 ， 参数 。 参数 扔进 多项式 ， 成 模型 。   实际上 线性回归   多项式 回归 过程 差不多 ， 还 提供 predict 操作 ， 思路 换成 机器学习 那种 建模 说法 。   机器学习 中 线性回归 会 引入 更 数据 更 特征 变量 ， 建模 会 ， 大体 过程 类似 谈及 。   说 一句 题外话 ， 很多 人 深度学习 都 抱 一种 统计学 轻蔑 态度 ， ， 正 量变 质变 ， 东西 做 原本 简单 回归 大相径庭 ， 不 单单 指 厉害 任意 曲线 拟合 能力 ， 更 质变 ， 学习 角度 慢慢 去 理解 没 。   随机 游走 深究 ， 解决 计算   \\ ( \\ pi \\ )   之外 ， 再 更 概率 统计 知识 理解 之外 ， 再 介绍 更 函数 拟合 绘图 ， 差不多 顺理成章 转 机器学习 那块 去 ， 去 建立 更 机器学习 模型 ， 解决 更 。 或者说 更 牛 掰 ， 模拟 计算 世界 。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"算法",
            "url":"articles/monte-carlo-simulation.html"
        },
        {
            "title":"动态规划",
            "text":"动态规划 算法 感觉 名字 取 很 唬人 ， 类似 贪婪 算法 ， 采用 分治 思想 ， 大 分解 小 。 贪婪 算法 小 求解 局部 最优 即可 ， 动态规划 朴素 解法 ， 试着 尝试 组合 情况 ， 采用 记忆 策略 ， 类似 子 一并 解决 。 动态规划 算法 名字 感人 ， 第一 ， 子 某种 类似性 ； 第二 ， 一种 记忆 策略 。   算法 图解 动态规划 算法 采用 一种 网格 思路 ， 最长 公共 子 序列 很 适合 ， MIT python 编程 导论 解决 背包 提出 一种 决策树 思路 。 思考 很 空间 排列组合 特性 ， 采用 类似 解决 最长 公共 子 序列 网格 思路 ； 很 时间 决策 展开 性 ， 选用 决策树 。   背包   构建 决策树 ：   class   BinaryDecisionTree   (   object   ) :   \" \" \"   二叉 决策树   决策函数   data   decisions   =   [ ( ' a ' , True ) ,   ( ' b ' , False ) ]   决策树 中 节点 决策树 中 位置   \" \" \"   def   __ init __   (     ,   data   =   None   ,   decisions   =   None   ,   parent   =   None   ) :     .   left   =   None     .     =   None     .   data   =   data     decisions     None   :   decisions   =   [ ]     .   decisions   =   decisions     .   parent   =   parent   def   __ repr __   (     ) :   return   ' < BinaryDecisionTree   { 0 }   { 1 } > '   .   format   (     .   decisions   ,     .   data   )   def   append   (     ,   child _ data   ,   _ decision   ) :   \" \" \"   节点 附加   : param   child _ data :   : param   _ decision :   : return :   \" \" \"   bool _ key   ,   bool _   =   _ decision     bool _   :   decisions   =     .   decisions   +   [   _ decision   ]     .   left   =   BinaryDecisionTree   (   child _ data   ,   decisions   =   decisions   ,   parent   =     )   return     .   left     :   decisions   =     .   decisions   +   [   _ decision   ]     .     =   BinaryDecisionTree   (   child _ data   ,   decisions   =   decisions   ,   parent   =     )   return     .     def   insert   (     ,   child _ data   ,   decisions   ,   auto _ create   =   False   ) :   \" \" \"   插 节点 上   : param   bool _ key :   : param   child _ data :   : return :   \" \" \"     len   (   decisions   )   = =   1   :   target   =     .   find   ( )   _ decision   =   decisions     :   target   =     .   find   (   decisions   [ :   -   1   ] ,   auto _ create   =   auto _ create   )   _ decision   =   decisions   [   -   1   ]   _ node   =   target   .   append   (   child _ data   ,   _ decision   =   _ decision   )   return   _ node   def   find   (     ,   decisions   =   None   ,   auto _ create   =   False   ) :     decisions     None   :   assert     .   parent     None   return     res   =   None     target       .   introspection   ( ) :     target   .   decisions   = =   decisions   :   res   =   target   return   res     res     None   :     auto _ create   :     i     range   (   1   ,   len   (   decisions   )   +   1   ) :   decisions _ small   =   decisions   [ :   i   ]         .   find   (   decisions _ small   ) :     .   insert   (   child _ data   =   None   ,   decisions   =   decisions _ small   )     :   return   None   def   set _ data   (     ,   data   ) :     .   data   =   data   def   introspection   (     ) :   stack   =   [ ]   node   =       stack     node   :     node   :   stack   .   append   (   node   )   node   =   node   .   left     :   node   =   stack   .   pop   ( )   yield   node   node   =   node   .     return   stack   def   children _ count   (     ) :   \" \" \" Return     number     children   @ returns   number     children :   0 ,   1 ,   2   \" \" \"   cnt   =   0       .   left   :   cnt   + =   1       .     :   cnt   + =   1   return   cnt   发现 很 好 动态规划 ， 开销 节省 构建 决策树 ， 只好 一种 类似 贪婪 算法 东西 ， 尽量 节省 node 生成 。   动态规划 算法 算不上 很 神奇 东西 ， 到此为止 。   item _ a   =   Item   (   ' a '   ,   6   ,   3   )   item _ b   =   Item   (   ' b '   ,   7   ,   3   )   item _ c   =   Item   (   ' c '   ,   8   ,   2   )   item _ d   =   Item   (   ' d '   ,   9   ,   5   )   items   =   [   item _ a   ,   item _ b   ,   item _ c   ,   item _ d   ]   import   heapq   class   PriorityQueue   :   def   __ init __   (     ) :     .   _ queue   =   [ ]     .   _ index   =   0   def   push   (     ,   item   ,   priority   ) :   heapq   .   heappush   (     .   _ queue   ,   (   -   priority   ,     .   _ index   ,   item   ) )     .   _ index   + =   1   def   pop   (     ) :   return   heapq   .   heappop   (     .   _ queue   ) [   -   1   ]   def   dynamic _ programming2   (   items   ,   max _ node   =   None   ) :   \" \" \"   利用 决策树 动态规划   引入 优先级 队列 减少 决策树 构建 成本   : param   knapsack :   : param   items :   : return :   \" \" \"   tree   =   BinaryDecisionTree   (   data   =   {   ' pre '   :   [ ] ,   ' post '   :   items   ,   ' '   :   0   ,   ' freespace '   :   5   } )   q   =   PriorityQueue   ( )   q   .   push   (   tree   ,   0   )   node _ num   =   1     q   .   _ queue   :     max _ node     node _ num   >   max _ node   :   break   target   =   q   .   pop   ( )   import   copy   data   =   copy   .   deepcopy   (   target   .   data   )   data _ pre   =   data   [   ' pre '   ]   data _ post   =   data   [   ' post '   ]   data _   =   data   [   ' '   ]   data _ freespace   =   data   [   ' freespace '   ]     :   item   =   data _ post   .   pop   (   0   )   data   =   {   ' pre '   :   data _ pre   ,   ' post '   :   data _ post   ,   ' '   :   data _   ,   ' freespace '   :   data _ freespace   }   node   =   target   .   append   (   data   ,   _ decision   =   (   item   .     ,   False   ) )   node _ num   + =   1   q   .   push   (   node   ,   data _   )   data _ pre   =   data _ pre   +   [   item   ]   data _   + =   item   .     data _ freespace   - =   item   .   weight   data   =   {   ' pre '   :   data _ pre   ,   ' post '   :   data _ post   ,   ' '   :   data _   ,   ' freespace '   :   data _ freespace   }     data _ freespace   <   0   :   pass     :   node   =   target   .   append   (   data   ,   _ decision   =   (   item   .     ,   True   ) )   node _ num   + =   1   q   .   push   (   node   ,   data _   )     IndexError   :   pass   max _   =   0   target _ node   =   None     node     tree   .   introspection   ( ) :     =   node   .   data   [   ' '   ]       >   max _   :   target _ node   =   node   max _   =     return   target _ node   ​   最长 公共 子 序列   \" \" \"   最长 公共 子 序列 区别 递增 。   \" \" \"   import   pandas     pd   def   longest _ increasing _ subsequence   (   seq _   ,   seq _   ) :   df   =   pd   .   DataFrame   (   index   =   [   item     item     seq _   ] ,   columns   =   [   item     item     seq _   ] )     i   ,   c1     enumerate   (   seq _   ) :     j   ,   c2     enumerate   (   seq _   ) :     c1   = =   c2   :     (   i   -   1   <   0   )     (   j   -   1   <   0   ) :   df   .   iloc   [   i   ] [   j   ]   =   1     :   df   .   iloc   [   i   ] [   j   ]   =   df   .   iloc   [   i   -   1   ] [   j   -   1   ]   +   1     :   df   .   iloc   [   i   ] [   j   ]   =   0   print   (   df   )   longest _ increasing _ subsequence   (   ' fish '   ,   ' hish '   )   longest _ increasing _ subsequence   (   ' hish '   ,   ' vista '   )   \" \" \"   动态规划 法解 最长 公共 子 序列 ， 经典 案例 ， 很 实用 。   子 序列 不 递增 ， 更 度   \" \" \"   import   pandas     pd   def   longest _ common _ subsequence   (   seq _   ,   seq _   ) :   df   =   pd   .   DataFrame   (   index   =   [   item     item     seq _   ] ,   columns   =   [   item     item     seq _   ] )   df   =   df   .   fillna   (   0   )     i   ,   c1     enumerate   (   seq _   ) :     j   ,   c2     enumerate   (   seq _   ) :     c1   = =   c2   :     (   i   -   1   <   0   )     (   j   -   1   <   0   ) :   df   .   iloc   [   i   ] [   j   ]   =   1     :   df   .   iloc   [   i   ] [   j   ]   =   df   .   iloc   [   i   -   1   ] [   j   -   1   ]   +   1     :     i   <   1     j   <   1   :   df   .   iloc   [   i   ] [   j   ]   =   0   elif   i   <   1   :   df   .   iloc   [   i   ] [   j   ]   =   max   (   0   ,   df   .   iloc   [   i   ] [   j   -   1   ] )   elif   j   <   1   :   df   .   iloc   [   i   ] [   j   ]   =   max   (   df   .   iloc   [   i   -   1   ] [   j   ] ,   0   )     :   df   .   iloc   [   i   ] [   j   ]   =   max   (   df   .   iloc   [   i   -   1   ] [   j   ] ,   df   .   iloc   [   i   ] [   j   -   1   ] )   print   (   df   )   longest _ common _ subsequence   (   ' fort '   ,   ' fosh '   )   longest _ common _ subsequence   (   ' fish '   ,   ' fosh '   )",
            "tags":"算法",
            "url":"articles/dynamic-programming.html"
        },
        {
            "title":"matplotlib模块",
            "text":"前言   数据 绘图 一文 简单 介绍 下 jupyter   notebook   下 绘制 简单 直线 图 、 饼 图 ， 本文 matplotlib 模块 绘图 综合性 简要 介绍 。   简单 例子 ， 画出 散点图 ， 简单 直白 一大堆 参数 调配 都 ， 人 迷惑 。 matplotlib 模块 还 PyQt wxpython 后 端 高级 功能 ， 最 急切 想要 理解 matplotlib 模块 到底 做 事情 ， 常规 操作 ， 对外 数据 接口 。   调配 中文字体 支持 ， matplotlib 模块 外围 操作 ， 绘图 前 就要 调配 好 ：   def   set _ matplotlib _ support _ chinese   (   font   =   ' SimHei '   ) :   \" \" \"   设置 matplotlib 支持 中文   : param   font :   : return :   \" \" \"     matplotlib   import   rcParams   rcParams   [   ' font . family '   ]   =   ' sans - serif '   rcParams   [   ' font . sans - serif '   ]   .   insert   (   0   ,   font   )   #   插入 中文字体   rcParams   [   ' axes . unicode _ minus '   ]   =   False   #   用来 显示 负号   pandas 绘图 接口 操作 发现 ， 传递 x ， y 数值 进去 外 ， 还 传 一个   ax   变量 ， ax 变量 matplotlib 绘图 中   axes   概念 。 matplotlib 绘图 先 一个 figure   图表 对象 ， 一个 figure 一个 多个 axes   坐标系 。 一个 axes x   y   多个 axis   坐标轴 。   官方 教程 给出 ， 说 需求 ， 数据 绘制 大致 图形 ， 推荐 函数 编写 风格 ：   def   myplotter   (   ax   ,   x   ,   y   ,   param _ dict   ) :   \" \" \"   ax   matplotlib   ax   object   x   data   plot     x   axis   y   data   plot     y   axis   param _ dict     kwargs   \" \" \"     =   ax   .   plot   (   x   ,   y   ,   * *   param _ dict   )   return     外围 ax 输出 采用 语法 ：   fig ,   ax   =   plt . subplots ( )   这是 一幅 图含 一个 坐标系 ， ：   fig ,   ( ax1 ,   ax2 )   =   plt . subplots ( 1 , 2 )   这是 一幅 图含 两个 坐标系 ， 坐标系 布局 1row ， 2   col   。   fig ,   ( ax1 ,   ax2 )   =   plt . subplots ( 2 , 1 )   这是 一幅 图含 两个 坐标系 ， 坐标系 布局 2row ， 1col   。   常看到   plt . show ( )   外围 语句 ， 图形 屏幕 上 显示 ， 设置 好 backend ， 比如说 jupyter   notebook   上 设置 好 ：   % matplotlib   notebook   不用 一句 图形 会 显示 。   建议 查看   Axes   源码 参考 定制 ：     matplotlib . axes ._ axes   import   Axes   写 如同 内置 方法 ， 更 情况 简化 定制 ， 会 更 实用 。   一个 简单 折线图 函数   def   line _ plot1   (   ax   ,   y _ values   ,   x _ ticks   ,   xlabel   =   ' '   ,   ylabel   =   ' '   ,   ylim   =   None   ,   * *   kwargs   ) :   \" \" \"   绘制 直线 图   : param   ax :   : param   x :   : param   y :   : param   param _ dict :   : return :   \" \" \"     ylabel   :   ax   .   set _ ylabel   (   ylabel   )   #   设置 y 标签     xlabel   :   ax   .   set _ xlabel   (   xlabel   )   #   设置 x 标签   x _ values   =   np   .   arange   (   len   (   x _ ticks   ) )   ax   .   set _ xticks   (   x _ values   )   #   设置 x 标记   ax   .   set _ xticklabels   (   x _ ticks   )     ylim       None   :   ax   .   set _ ylim   (   ylim   )   #   设置 y 轴     =   ax   .   plot   (   y _ values   ,   * *   kwargs   )   return     ：   y _ values   =   [   2   ,   2.1   ,   2.2   ,   2.1   ,   2.3   ,   2.4   ]   x _ ticks   =   [   ' 七月 '   ,   ' 八月 '   ,   ' 九月 '   ,   ' 十月 '   ,   ' 十一月 '   ,   ' 十二月 '   ]   fig   ,   ax   =   plt   .   subplots   ( )   line _ plot1   (   ax   ,   y _ values   ,   x _ ticks   ,   xlabel   =   ' 月份 '   ,   ylabel   =   ' 利润 '   ,   ylim   =   (   0   ,   2.8   ) )   数据 绘图 基本上 分离 。   看 下 两个 坐标系 情况 ：   y _ values   =   [   2   ,   2.1   ,   2.2   ,   2.1   ,   2.3   ,   2.4   ]   x _ ticks   =   [   ' 七月 '   ,   ' 八月 '   ,   ' 九月 '   ,   ' 十月 '   ,   ' 十一月 '   ,   ' 十二月 '   ]   fig   , (   ax1   ,   ax2   )   =   plt   .   subplots   (   1   ,   2   )   line _ plot1   (   ax1   ,   y _ values   ,   x _ ticks   ,   xlabel   =   ' 月份 '   ,   ylabel   =   ' 利润 '   ,   ylim   =   (   0   ,   2.8   ) )   line _ plot1   (   ax2   ,   y _ values   ,   x _ ticks   ,   xlabel   =   ' 月份 '   ,   ylim   =   (   0   ,   2.8   ) )   所示 ， matplotlib 越玩越 熟悉 ， 不再 推荐 pandas 绘图 接口 ， 统一 定制 接口 中 去 ， 慢慢 绘图 函数 ， 参数 调配 风格 ， 会 越来越 喜欢 那种 样子 。   接触 几个 绘图 都 转成 通用 函数 风格 学习 matplotlib 绘图 入门 。   饼 图   def   pie _ plot   (   ax   ,   labels   ,   sizes   ) :   \" \" \"   绘制 饼 状图   : return :   \" \" \"   ax   .   pie   (   sizes   ,   labels   =   labels   ,   autopct   =   '   % 2.0 f% %   '   ,   startangle   =   90   )     =   ax   .   axis   (   ' equal '   )   #   确保 画成 一个 圆   return     labels   =   [   ' '   ,   ' 射击 '   ,   ' 动作 '   ,   ' 策略 '   ,   ' 体育 '   ]   sizes   =   [   1500   ,   3500   ,   6000   ,   11500   ,   27500   ]   fig   ,   ax   =   plt   .   subplots   ( )   pie _ plot   (   ax   ,   labels   ,   sizes   )   水平 条形图   def   barh _ plot   (   ax   ,   y _ values   ,   x _ labels   ,   xlabel   =   ' '   ,   ylabel   =   ' '   ,   * *   kwargs   ) :   \" \" \"   水平 条形图   : param   ax :   : return :   \" \" \"   y   =   np   .   arange   (   len   (   x _ labels   ) )   ax   .   set _ yticks   (   y   )   ax   .   set _ yticklabels   (   x _ labels   )     xlabel   :   ax   .   set _ ylabel   (   xlabel   )     ylabel   :   ax   .   set _ xlabel   (   ylabel   )     =   ax   .   barh   (   y   ,   y _ values   ,   align   =   ' center '   ,   * *   kwargs   )   return     fig   ,   ax   =   plt   .   subplots   ( )   x _ labels   =   [   ' 北美洲 '   ,   ' 南美洲 '   ,   ' 欧洲 '   ,   ' 亚洲 '   ,   ' 大洋洲 '   ,   ' 非洲 '   ,   ' 南极洲 '   ]   y _ values   =   [   1500   ,   500   ,   1500   ,   2000   ,   1000   ,   500   ,   1   ]   barh _ plot   (   ax   ,   y _ values   ,   x _ labels   ,   ylabel   =   ' 销量 '   )   直方图   def   hist _ plot   (   ax   ,   y _ values   ,   x _ bins   ,   xlabel   =   ' '   ,   ylabel   =   ' '   ,   title   =   ' '   ,   * *   kwargs   ) :   \" \" \"   : param   ax :   : return :   \" \" \"     title   :   ax   .   set _ title   (   title   )     xlabel   :   ax   .   set _ xlabel   (   xlabel   )     ylabel   :   ax   .   set _ ylabel   (   ylabel   )     =   ax   .   hist   (   x _ bins   [ :   -   1   ] ,   bins   =   x _ bins   ,   weights   =   y _ values   ,   * *   kwargs   )   return     散点图   def   scatter _ plot1   (   ax   ,   X   ,   xlabel   =   ' '   ,   ylabel   =   ' '   ,   title   =   ' '   ,   * *   kwargs   ) :   \" \" \"   散点图   输入 X   第一列 x   第二列   y   : param   ax :   : param   X :   : return :   \" \" \"   x _ group   =   [ ]   y _ group   =   [ ]     x   ,   y     X   :   x _ group   .   append   (   x   )   y _ group   .   append   (   y   )     xlabel   :   ax   .   set _ xlabel   (   xlabel   )     ylabel   :   ax   .   set _ ylabel   (   ylabel   )     title   :   ax   .   set _ title   (   title   )     =   ax   .   scatter   (   x _ group   ,   y _ group   ,   * *   kwargs   )   return     X   =   np   .   array   ( [ [   1.0   ,   1.1   ] ,   [   1.0   ,   1.0   ] ,   [   0   ,   0   ] ,   [   0   ,   0.1   ] ] )   fig   ,   ax   =   plt   .   subplots   ( )   scatter _ plot1   (   ax   ,   X   )",
            "tags":"机器学习",
            "url":"articles/matplotlib-module.html"
        },
        {
            "title":"sklearn模块",
            "text":"前言   sklearn 很多 内容 机器学习 相关 文章 中 都 提及 ， 拾遗 性质 。   sklearn pipeline     sklearn . pipeline   import   Pipeline     sklearn . pipeline   import   FeatureUnion     sklearn . model _ selection   import   GridSearchCV   Pipeline   用来 创建 sklearn 数据处理 流 模型 ， FeatureUnion 整合 多个 特征 。   sklearn pipeline 数据处理 管道 流 万能 灵药 ， 说 数据处理 流都 写成 pipeline 模式 。 实际上 pipeline transformer estimator 都 限定 ， 贯穿 数据处理 始终 ， 很 不 。   pipeline 组件 接受 X ， 机器学习 中 数据处理 核心 数据 矩阵   调用 pipeline   fit     predict 方法 一套 固定 作业 模式 ， 简单 来说 机器学习 中 常见 训练 测试 数据格式 模式 。 fit ,   transformer     fit     transform 方法 都 执行 ， 两个 方法 接受 X   ， transformer transform 方法 返回 X 下 一个 transformer fit 接受 X 。 pipeline predict 方法 ， transformer transform 方法 都 会 执行 ， 再 执行 estimator predict 方法 。   这套 固定 作业 模式 ， 机器学习 监督 学习 ， 普适性 ， 利用 pipeline ， 数据 预处理 缩放 整合 进来 ， 调用 pipeline 大 模型 predict 方法 ， 输入 原始 test 数据 即可 ， 很 便捷 。 脱离 领域 ， 数据处理 需求 ， 再来 死套 作业 模式 ， 不合时宜 。   上 sklearn pipeline 建模 核心 算法 ， 不得不 提   GridSearchCV   参数 优化 选模 。   train _ test _ split     sklearn . model _ selection   import   train _ test _ split   跟着 老旧 教材 学习 ， 会 发现 sklearn   train _ test _ split   函数 真的 。 函数 很 实用 ， 后期 引入 pipeline 概念 ， 都 先 训练集 测试集 分开 ， 才 机器学习 核心 算法 。   值得一提的是 ：   train _ test _ split   输入 dataset pandas DataFrame ， 返回 train _ data   pandas DataFrame 数据类型 。   K 折 验证     sklearn . model _ selection   import   KFold   sklearn 提供 K 折 验证 很 实用 。   K 折 验证集   K 数据 输入 组合 ， 组合 一部分 验证集 ， 其余部分 训练集 ， 验证 训练 比例 1 :   k - 1   组合 间 验证集 选择   选定 好 K 折 系数 K ,   输入 数据 集 。   kf   =   KFold ( n _ splits = 2 )     train _ index ,   test _ index     kf . split ( X ) :   X _ train ,   X _ test   =   X [ train _ index ] ,   X [ test _ index ]   y _ train ,   y _ test   =   y [ train _ index ] ,   y [ test _ index ]   交叉 验证     sklearn . model _ selection   import   cross _ val _ score   \" \" \"   实行 交叉 验证 计算 验证 得分 最 简单 方法   cross _ val _ score   scores   =   cross _ val _ score ( model ,   train _ data ,   train _ labels ,   cv = 4 )   \" \" \"",
            "tags":"机器学习",
            "url":"articles/sklearnmo-kuai.html"
        },
        {
            "title":"spark学习笔记",
            "text":"前言   数据挖掘 ， 数据处理 ， 机器学习 深度学习 ， 实际上 骨子里 面 很多 东西 都 相通 。 实践 角度 出发 ， 领域 看做 更 矩阵 张量 运算 领域 ， 大 数据 词概念 很 清晰 ， 到底 何种 程度 上 才 算 上 大 数据 ， 一个 总 看法 ， 面对 计算 ， 矩阵 维度 数是 大 ， 至少 上万 级别 ， 项目 程序运行 ， 矩阵 大小 还会 进一步 膨胀 ， 就算 上 大 数据 。   单机 运算 能力 提升 不少 ， 假设 面临 一个 算法 ， 暂时 单机 上 运算 ， 面临 一个 很 时间 内 矩阵 大小 还会 膨胀 ， 超过 单机 承受能力 ， 算法 代码 ， 都 建立 矩阵 思维 之上 ， 面对 一个 大 数据 。   大 数据 一个 ， 说 不 太 确切 ， 大体 说 ， 大 数据 矩阵 过大 。   前沿 人工智能 芯片 实际上 更好 设计 芯片 加速 矩阵 运算 。   大 数据 不 讨论 算法 细节 ， 机器学习 细节 。 原则上 写 一套 非大 数据 工具 下 测试代码 小规模 测试 下 算法 代码 ， 再 移植 大 数据 工具 上 ， 一个 设计 很 好 大 数据 工具 ， 部署 ， 维护 移植 都 感觉 舒适 。   基于 讨论 ， 引来 第一个 ， spark 自带 机器学习 包 很 推荐 ， 不得不 承认 spark 精力有限 ， 自带 机器学习 包 功能 很 有限 ， 更 不用说 新 神经网络 技术 层出不穷 ， spark 不 照顾 。 keras 领域 越做越 好 ， 算法 开发人员 放弃 模块 ， 不 。 学习 spark 底线 ， 底线 简单 spark 做些 简单 运算 这是 接受 ， 算法 不 spark 提供 语言 写 。 不行 ， 更 spark 大 数据 工具 还 很 好 。   Apache   arrow 项目 ， 试图 对接 好 spark RDD pandas DataFrame 。 。 笔者 大 数据 领域 研究 摸索 性质 ， 看吧 。   安装   spark 安装 很 简单 ， windows 下 配置 好 JAVA 环境 ， 设置 好   JAVA _ HOME   环境变量 ， 下载 安装包 解压 即可 。   python 来说 ， 假设 安装   pip   install   pyspark   启用 pyspark shell 环境 。 挺 困惑 ， pyspark 还 不 spark 解压 ， pyspark 安装 自带 ？   想 顺滑 jupyter   notebook 下 pyspark 语句 ，   SPARK _ HOME   环境变量 安装 好 ， 安装 :   pip   install   findspark   再 jupyter   notebook   下 运行 ：   import   findspark   findspark   .   init   ( )   import   pyspark     pyspark   import   SparkConf   ,   SparkContext   conf   =   (   SparkConf   ( )   .   setMaster   (   \" local \"   )   .   setAppName   (   \" My   spark   app \"   )   .   set   (   \" spark . executor . memory \"   ,   \" 1g \"   ) )   sc   =   SparkContext   (   conf   =   conf   )   不 设置   SPARK _ HOME   环境变量 ， 代码   init   方法 指定   spark _ home   参数 。     SparkConf   spark 配置 ， 时间 再 ， spark 最 简单 教程 ， 调出 sc 变量 就算 jupyter   notebook 环境 下 ， ， 运行 python 脚本 ， python 脚本 下 ， 成功 对接 好 spark 环境 。   细节 时间 翻 文档 ， 查资料 ， 讨论 ， 要用 spark 核心 原因 ， spark 很 好 应对 矩阵 过大 ， spark 矩阵 并行 运算 速度 提升 ， 发挥 多台 机器 潜力 很 。   SparkContext   接受   SparkConf   指定 配置 信息 ， Spark 集群 连接 ，   SparkContext   创建 RDD   ， 集群 中 广播 变量 工作 。   centos7 上 安装 spark   参考 参考资料 3 ， 感觉 类似 windows 下 绿色 安装 方式 ， 关键 findspark 指向 正确 位置 ， 设置 好   SPARK _ HOME   环境变量 。 唯一 值得一提 安装 好 java   sudo   yum   install   java   pyspark 东西   初步 接触 讨论 ， pyspark 情况 相关 运算 python 支持 模块 少 ， 动不动 数据处理 转成 pyspark 东西 再 从头开始 写 代码 ， 浪费 精力 。   这块 摸索 讨论 阶段 ， ， 【 说 代码 中 】 ， 纯 python 单机版 应付 ， 做 又快又好 ， 马上 pyspark 比如说 DataFrame 对象 转成 pandas DataFrame 对象 ， 调用 写 好 python 代码 工作 即可 。   不可避免 用到 pyspark 东西 ， pyspark 东西 更好 工作 时 ， 才 pyspark 东西 。   这块 还 进一步 学习 研究 ， 简单 提 下 ， 比如说 一个 ， pyspark 读取 日志 流 ， 环节 ， 数据 精简 整合 一个 数据 矩阵 ， 数据 矩阵 相 很 庞大 日志 流 数据 来说 ， 很 精简 版本 ， 单机 上 很 好 应付 ， 数据 矩阵 转成 pandas Dataframe 对象 ， 即可 。   RDD   Spark 主 打牌 RDD ， 弹性 分布式 数据 集 （ Resilient   Distributed   Dataset ） 。 Spark 关注 工作 创建 RDD ， 转化 RDD ， 计算 RDD 。   一个 简单 说法 spark RDD 分成 区 ， 区 RDD 交给 机器 （ 或者说 执行器 ） 运算 。 分区 动作 解决 矩阵 维度 过大 ， 设计 计算 ， 实际上 不 简单 。 简单 矩阵 加减法 不 大 ， 矩阵 乘法 spark 做 ？ 不管怎么 说 spark 功能 引入 RDD 概念 ， 或者说 矩阵 分区 动作 ， 扩充 机器 应对 矩阵 过大 。   spark 工具 还 额外 提供 大 数据 节点 丢失 数据备份 ， 算是 大 数据 工具 都 做 基本功 。   新建 一个 RDD :   x   =   sc . parallelize ( [ 1 , 2 , 3 , 4 , 5 ] )   y   =   sc . parallelize ( [ [ 1 , 2 , 3 ] , [ 4 , 5 , 6 ] ] )   运行 ：   x2   =   x . map ( lambda   x :   x + 1 )   试着 打印 RDD ：   x . collect ( )   x2 . collect ( )   没什么 ， map 元素 执行 lambda 算式 ， 还好 。   ：   y2   =   y . map ( lambda   y :   y + 1 )   y2 . collect ( )   程序 会 抛出 异常 。   两点 ， map 还 计算 ， spark 惰性 求值 机制 ， 第二点 RDD 计算 面对 原 数据 一个 一个 — — 第一 层级 ， 原始 状态 不 矩阵 数据结构 ， 更 接近 列表 数据结构 。   试着 写 ：   y2   =   y   .   map   (   lambda   y   :   list   (   map   (   lambda   x   :   x   +   1   ,   y   ) ) )   y2   .   collect   ( )   矩阵 元素 都 加一 ， spark 不 应付 矩阵 数据结构 ， 额外 工作 。   spark RDD 接口 开放 ， spark 会 难用 ， 类似 LISP 语言 那种 。 才刚 学习 spark ， 太 着急 ， spark 会 提供 结构 形式 支持 。   RDD cache 方法   目标 RDD 对象 缓存 内存 ，   广播 变量   x   =   sc . broadcase ( [ 1 , 2 , 3 ] )   广播 变量 工作 节点 访问 ， 访问 调用 目标 变量     方法 。 暂时 广播 变量 还 很 懂 ， TODO   自定义 UDF 函数 对象   DataFrame 对象   pyspark DataFrame 对象   参考资料     pyspark     pyspark   dataframe   operations   install   spark   centos7",
            "tags":"大数据",
            "url":"articles/spark-learning-note.html"
        },
        {
            "title":"mymodule for python",
            "text":"简介   一个 通用 目的 python 模块   项目 源码   https : / / github . / a358003542 / mymodule   mymodule   学习 研究 python 结晶 ,   一个 大杂烩 性质 通用 模块 【 都 往里面 扔 ， 作者 确实 感觉 实用价值 】   LICENSE   MIT   LICENSE   安装   移 pip 安装 过程 ， 项目 。 想要 代码 复制粘贴 想要 开发 python 项目 目录 下 即可 ， 称之为 绿色 安装版 。   推荐 方式 ：   git   clone   项目 开发 python 项目 根目录 下     mymodule . utils . path _ utils   import   _ project _ path   _ project _ path   ( )   #   返回 开发 项目 根目录   依赖   依赖 基本上 调用 ， 功能 就要 安装 python 模块 ， database ， 依赖 sqlalchemy 。 列出 依赖 依赖 ：   loguru   便捷 日志 输出   很 ， 写 logger 都 是从 loguru 生成 。   模块 无关   tests 放着 开发 编写 单元测试 ， 仅此而已 。   examples   放着 样例 ， 仅此而已 。   notebooks   jupyter   notebook   API   API 简要 模块 包含 内容 情况 ， 更 详细 接口 请 查阅 源码 。   顶层   gfun   早期 学习 python 东西   会 慢慢 整理   exceptions   异常   consts   常数   algorithms 算法   学习 算法 积累   太 大 实用价值   做 学习 时 参考   compat   python2 python3 兼容性 模块   历史 原因 保留   没   database   database   放着 很多 便捷 对接 数据库 通用 操作 模式 。   mongodb   mongodb 连接 操作   _ mongodb _ client   mongodb 插入 操作   去 重 逻辑   insert _ item   mongodb   upsert   操作   upsert _ item   sqldb   sqldb 利用 sqlalchemy 连接 操作   create _ sqlalchemy _ url   创建 sqlalchemy 支持 url   SQLDataBase 类   输入 sqlalchemy 支持 url 格式 ， 连接 数据库 后 操作 ， 类 用于 sqlalchemy 非 原生 ORM 操作 。   ._ engine   ._ conn   ._ meta   ._ session   . execute   执行   . _ tables   table     . _ table ( table _ )   返回 sqlalchemy Table 对象 ， 内省 ， 会 健壮 ， 底层   sqldb 插入 忽略 操作   insert _ _ ignore   sqldb   插入 更新 操作   insert _ _ update   sqldb 更新 一个 记录 操作   update _   ml 机器学习   学习 机器学习 积累 ，   preprocessing   数据 预处理 支持   新增   ZeroMinMaxScaler2   同原 0 - 1 缩放   取值 1 , 取值   [ 0 , 1 )   reader   对接 pandas   io   读取数据 操作   knn   很 粗糙 对接 下 knn 算法   TODO   stream _ processing   流 操作 模式   ：   filter _   =   build _ stream _ function ( filter _ zh _ ratio ,   filter _ zhtext _ length ,   filter _ text _ length )   多个 过滤 函数 连接 一个 流 处理函数 。   utils   utils 很多 便捷 函数 支持 。   admin _ utils   提升 管理员 权限 工具   admin _ utils   用于 windows 下 提升 脚本 运行 权限   _ admin   判断 是否是 管理员 权限   run _ _ admin   已 管理员 方式 运行 脚本     __ __   = =   ' __ main __ '   :       _ admin   ( ) :   run _ _ admin   ( )     :   main   ( )   airflow _ utils   最小 时间 片 单个 提供 额外 运行 状态 记录 支持   date _ utils   _ _ year   输入 两个 datetime   对象 ， 判断 是否是 年   _ _ month   判断 两个 datetime 对象 是否是 月   _ _ day   判断 两个 datetime 对象 是否是 同一天   _ _ hour   判断 两个 datetime 对象 是否是 同一时   round _ _ day   datetime 对象 round 天 ， 归零   round _ _ hour   datetime 对象 round 小时 ， 更 小 刻度 归零   round _ _ minute   datetime 对象 round 分钟   round _ _   datetime 对象 round 秒   _ date _ range   参数 往前 数 月份 ， TODO   参数 补 上     utils . date _ utils   import   _ date _ range   _ date _ range   (   5   )   Out   [   3   ] :   [   datetime   .   datetime   (   2018   ,   10   ,   7   ,   2   ,   7   ,   1   ) ,   datetime   .   datetime   (   2018   ,   11   ,   7   ,   2   ,   7   ,   1   ) ,   datetime   .   datetime   (   2018   ,   12   ,   7   ,   2   ,   7   ,   1   ) ,   datetime   .   datetime   (   2019   ,   1   ,   7   ,   2   ,   7   ,   1   ) ,   datetime   .   datetime   (   2019   ,   2   ,   7   ,   2   ,   7   ,   1   ) ,   datetime   .   datetime   (   2019   ,   3   ,   7   ,   2   ,   7   ,   1   ) ]   normal _ format _   标准 格式     ' 2018 - 12 - 21   15 : 39 : 20 '   normal _ format _ utcnow   _ timestamp   timestamp   _ dt _ fromtimestamp   timestamp datetime 对象   df _ utils   pandas DataFrame 对象 便捷 操作 函数   change _ df _ type   输入   df   column _   type   df 列 类型 更 改为 type   float   rename _ df _ columns   设置 列名   rename _ df _ column _ _ index   index   column   名字 修改     rename _ df _ column _ _   column   名字 修改     _ _ column   获取 一列 值   默认 去 重   dll _ utils   介绍 利用 python 对接 dll 文件   encrypt _ utils   加密 解密   pbkdf2 _ sha256   加密   encrypt _ message   加密 信息   decrypt _ message   解密 信息   file _ utils   bigfile _ read   大 文件 读写 模式   id _ utils   build _ query _ id   唯一 id 生成   关键 字典 参数   生成   唯一 文件名 唯一 id   path _ utils   路径 工具   _ project _ path   返回 mymodule 存放 根目录   normalized _ path   输入 路径 规范化   支持   ' . '   ' ~ '   表达   ...   绘图 支持 工具   plot _ utils   基于 matplotlib 绘图 便捷 支持   winreg _ utils   windows 注册表 读写 工具   1 .   默认 Key   > > >   HKEY _ CURRENT _ USER   < regobj   Key   ' HKEY _ CURRENT _ USER ' >   > > >   HKLM   < regobj   Key   ' HKEY _ LOCAL _ MACHINE ' >   组建 Key   写 上 一连串 path 名字   Key ( parent ,   * )   . subkeys ( )   列出 Key 子 Key   TODO   数据结构 字典 化 支持 名字 索引   .   Key 名字   . names   Key 完整 路径 名字   . _ subkey ( )   名字 向下 获取 子 Key   . del _ subkey ( )   删除 子 Key   . values ( )   列出 Key 包含 子值   . items ( )   列出 Key 包含 子值 ， 返回 字典 格式   Key [ ' ' ]   获取 Key 子值   没 找到 抛 异常   Key [ ' ' ]   =     修改 Key 子值   ( )   试着 获取 Key 子值 ， 没 找到 返回 None   . delete ( )   删除 Key   . _ data ( )   试着 获取 Key 子值 ， 返回值 Value 对象   web   web 研究 爬虫 结晶 ， 实用 ：   一个 随机 User - Agent   _ random _ user _ agent   一个 url ， ， 转 成 url   _ absolute _ url   下载 操作   download",
            "tags":"项目",
            "url":"articles/mymodule.html"
        },
        {
            "title":"贝叶斯理论",
            "text":"前言   贝叶斯 理论 ， 本文 重点 描述 贝叶斯 统计 相关 理论知识 ， 介绍 朴素 贝叶斯 分类器 搭建 。   假定   x1   x2   x3   观察 事物 特征   y1   y2   y3   观察 事物 标签 值   贝叶斯 定理   观察 事物 具有特征   x1   判断 事物 标签 y1 概率 计算   $ $   P ( y1 | x1 )   =   \\ frac { P ( x1 | y1 ) * P ( y1 ) } { P ( x1 ) }   $ $   P ( x1 | y1 ) 观察 事物 y1 特征 ， x1 特征 概率 ； P ( y1 ) 观察 事物 y1 特征 概率 ； P ( x1 ) 观察 事物 x1 特征 概率 。   朴素 贝叶斯   再 多个 特征 情况 下 贝叶斯 定理 ， 比如说 ：   $ $   P ( y1 | x1 , x2 )   =   \\ frac { P ( x1 , x2 | y1 ) * P ( y1 ) } { P ( x1 , x2 ) }   $ $   朴素 贝叶斯 假设 事物 特征 不 相关 ， ：   $ $   P ( y1 | x1 , x2 )   =   \\ frac { P ( x1 | y1 ) * P ( x2 | y1 ) * P ( y1 ) } { P ( x1 ) * P ( x2 ) }   $ $     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"机器学习",
            "url":"articles/bayes-theory.html"
        },
        {
            "title":"条件随机场模型",
            "text":"简介",
            "tags":"自然语言处理",
            "url":"articles/crf-model.html"
        },
        {
            "title":"机器学习第七谈",
            "text":"模型 评估   模型 评估 后期 编写 机器学习 算法 模型 变 很 ， 实际上 机器学习 这块 概念 很大 通用性 ， 推荐 系统 机器学习 范畴 ， 深度学习 机器学习 范畴 ， 会 机器学习 模型 评估 这块 知识 ， 很多 地方 都 涉及 。   模型 预测   正类 成 正类   计数 TP   模型 预测   正类 成 负类   计数 FN   模型 预测   负类 成 正类   计数   FP   模型 预测   负类 成 负类   计数   TN   模型 总 预测 数   ALL   准确率   $ $   accuracy   =   \\ frac { TP + TN } { ALL }   $ $   精确率   $ $   precision   =   \\ frac { TP } { TP + FP }   $ $   召回率   $ $   recall   =   \\ frac { TP } { TP + FN }   $ $   准确率 简单 理解 模型 正确率 ， 正 都 预测 正 ， 负 都 预测 负 ， 准确率 1 ， 模型 真准 。   召回率 针对 正类 样本 池 ， 模型 预测 正类 比率 。   推荐 系统 ， 精确率 查准率 ， 召回率 查全率 。 概念 上 感觉 区别 。   查准率   提取 正确 信息 条数   /   提取 信息 条数   查全率   提取 正确 信息 条数   /   样本 中 正确 信息 数   F1 得分   F1 得分     精确率 召回率 调和 均值   ， 精确率 越高 ， F1 得分 越高 ， 召回率 越高 ， F1 得分 越高 。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"机器学习",
            "url":"articles/machine-learning-talk-seven.html"
        },
        {
            "title":"flask模块",
            "text":"前言   django 一种 构建 大型 商务 网站 解决方案 ， 贵 公司 技术 栈是 架构 django 之上 ， 性质 小 项目 ， 刚刚开始 新 项目 ， 推荐 flask 多于 django 。 flask tornado 之间 选择 上 ， 更 python 异步 一块 理解 上 ， 懂 python 异步 ， 做 api 并发 速度 都 很 高 ， 选择 tornado ， 选择 flask 。   个人爱好 去 搭建 小 网站 api 服务 ， 选择 flask 很 适合 。 本文 作者 鼓捣 小 网站 慢慢 积累 东西 。   推荐 启动 方式   flask 推荐 启动 方式 ：   flask   run     python   - m   flask   run   启动 flask 。 【 方式 很 适合 开发 测试 ， 部署 WSGI   server 】   执行 命令 ， 设置 好 环境变量 ， 最   FLASK _ APP   变量 ：   windows   set   FLASK _ APP = . py   flask   run   linux   export   FLASK _ APP = . py   flask   run   推荐 当前工作 目录 下 加上   . env   文件 ， 定义 ：   FLASK _ APP = myapp . py   FLASK _ ENV = development   FLASK _ DEBUG = 1   环境变量 ， 运行   flask   命令 会 自动 加载 环境变量 。 【 加载 针对 flask 命令 ， load _ dotenv   模块 做 做 ， 不 受 影响 。 】   FLASK _ DEBUG   设置 1 开启 flask 调试模式 ：   重载 器   源码 文件 变动 自动 重启 服务器   调试器   出现异常 浏览器 中 显示 异常 信息   生产 环境 调试模式 关闭 ！   pycharm 启动   pycharm flask 启动 支持 ， 采用 上 描述 启动 方式 ， 会 接近 服务器 部署 环境 。   选择 启动 python 脚本 ， 选择   Module     ，   python   - m   flask   命令 效果 ， 加上 参数   run   ， 环境变量 上 所示 ， 不用 再 特别 调配 ， 工作 目录 设置 下 即可 。   类似 还 再 加上 一个   python   - m   flask   shell   命令 。   flask 请求 分发   查看 flask app url 分发 情况   app . url _ map   默认 flask 有个 额外 路由   / static / < filename >   flask 请求 对象   request 请求 对象 ：   form   dict   存储 请求 表 单字 段   args   dict   存储 URL 上 传递 参数   values   form args 合集   cookies   dict   存储 请求 cookies   headers   dict   存储 http headers   files   dict   存储 请求 上传 文件   _ data   返回 请求 主体 缓冲 数据   _ json   return   dict   包含 解析 请求 主题 后 json   blueprint   请求 Flask 蓝本   endpoint   请求 Flask 端点 名称   method   HTTP 请求 方法   scheme   http https   _ secure   HTTPS 发送 请求 返回 True   host   请求 主机名   path   请求 URL 路径   query _ string   URL 查询 字符串   full _ path   URL   路径 查询 字符串   url   完整 URL   base _ url   url 查询 字符串   remote _ addr   远程 IP地址   environ   dict   请求 原始 WSGI 环境   flask 请求 钩子   请求 钩子 装饰器 ， flask 四种 钩子 ：   _ request   请求 执行   _ _ request   只 第一次 请求 前 执行   _ request   每次 请求 后 执行   程序 抛出 异常   teardown _ request   每次 请求 执行 ， 抛出 异常   请求 钩子 视图函数 之间 变量 互通 上下文 全局变量   g   ，   _ request   设置   g . user   登录 用户 ， 视图函数 调用   g . user   得知 登录 用户 。   flask 响应 对象   response   =   make _ response ( content ,   status _ code )   response . set _ cookie ( ' a ' , 1 )   响应 对象 属性 方法 ：   status _ code   headers   set _ cookies   设置 cookies   delete _ cookies   删除 一个 cookies   content _ length   内容 长度   content _ type   响应 主体 媒体 类型   set _ data   _ data   响应 ：   重定向 响应   状态 码   302   Location 写 上 目标 URL   flask 提供   redirect 函数 快速 生成 重定向 响应 对象 。   abort 函数   返回 状态 码 404   其是 抛出 异常   错误 页面   @ app . errorhandler ( 404 )   def   page _ _ found ( e ) :   return   render _ template ( ' 404 . html ' ) , 404   蓝图 ， 全局 效果 ，   app _ errorhandler   ：   @ main . app _ errorhandler   (   404   )   def   page _ _ found   (   e   ) :   return   render _ template   (   ' 404 . html '   ) ,   404   url _   url _ ( ' index ' ,   _ external = True )   名字 ，   送入 参数 进去   _ external   绝对路径   ， 相对路径 即可 ， 浏览器 之外 链接 绝对路径   蓝图 视图函数 ， 加上 蓝图 名 ：   url _ ( ' main . index ' )   静态 文件   url ( ' static ' ,   filename = ' favicon . ico ' )   flash 消息   flash 消息 用户 信息 。 flash 函数 。 模板 文件 上 加上 ：   { %     message     _ flashed _ messages   ( )   % }   < div   class =   \" alert   alert - warning \"   >   < button   type =   \" button \"   class =   \" close \"   data - dismiss =   \" alert \"   >   & times ;   < / button >   { {   message   } }   < / div >   { %   endfor   % }   大型 结构   请 参看 参考资料 1 ， 有名 flasky 项目 结构 。 简单 说 ：   配置 开发 测试 生产 分离   工厂 函数   create _ app   延迟 创建 。   蓝图 （ Blueprint ）   蓝图 模块 写法 ：   ` ` ` python     flask   import   Blueprint   main   =   Blueprint ( ' main ' ,     )     .   import   views ,   errors   ` ` `   views   errors 模块 还 蓝图 对象 main ， 放在 引入 进来 。   蓝图 中 注册 写法 ：   python     . main   import   main     main _ blueprint   app . register _ blueprint ( main _ blueprint )   蓝图 错误 页面   app _ errorhandler   注册 全局 错误处理 ，   errorhandler   只 负责 蓝图 内 错误 。   python   @ main . app _ errorhandler ( 404 )   def   page _ _ found ( e ) :   return   render _ template ( ' 404 . html ' ) ,   404   蓝图 内 注册 视图函数 ，   url _   获取   main . index   形式 ， 蓝图 名 加上 视图函数 名 。   数据库 相关   __ tablename __   定义 表名 ， 默认 表名 遵循 复数 命名 约定     users   。   一块 东西 会 补充 ， 更 sqlalchemy sql 知识 。   flask   shell 命令 定制   @ app . shell _ context _ processor   def   make _ shell _ context   ( ) :   return   dict   (   db   =   db   ,   User   =   User   ,   Role   =   Role   )   运行 ：   flask   shell   db 变量 。   cmd 配置 好 环境变量   export   FLASK _ APP = . py   flask - migrate   flask - migrate   基于 sqlalchemy     alembic   ， 做 额外 工作 。   提供 便捷 命令行 接口 ， 熟悉 sqlalchemy alembic 。   一个 简要 例子 ：     flask   import   Flask     flask _ sqlalchemy   import   SQLAlchemy     flask _ migrate   import   Migrate   app   =   Flask   (   __ __   )   app   .   config   [   ' SQLALCHEMY _ DATABASE _ URI '   ]   =   ' sqlite : / / / app . db '   db   =   SQLAlchemy   ( )   db   .   init _ app   (   app   )   migrate   =   Migrate   (   app   ,   db   )   class   User   (   db   .   Model   ) :   id   =   db   .   Column   (   db   .   Integer   ,   primary _ key   =   True   )     =   db   .   Column   (   db   .   String   (   128   ) )   新 项目 运行 ：   flask   db   init   alembic   alembic   init   命令 ， 创建   migrations   文件夹 ， 文件 alembic ， migrations 文件夹 推荐 源代码 版本控制 。   简单 alembic ， 新建   env . py   优化 ， flask 配置 环境 里 配置   SQLALCHEMY _ DATABASE _ URI   变量 ， alembic 正确 找到 数据库 。   ：   flask   db   revision   #     alembic   revison   flask   db   migrate   #     alembic   revision   - - autogenerate   flask   db   upgrade   #     alembic   upgrade   flask   db   downgrade   #     alembic   downgrade   工作 流程 ：   修改 数据库 模型 或者说 数据库 模型 发生 变动   flask   db   migrate   创建 迁移 脚本   检查 自动 生成 脚本 ， 改正 不 正确 地方   flask   db   upgrade   改动 数据库   删除 无用 迁移 脚本   alembic 自动 生成 脚本 万能 ， 人工 审核 。 就算 没 迁移 脚本 ， 毫无意义 ， 版本 迁移 脚本 删除 。   从零开始 迁移 脚本   alembic 官方 文档 ， 很 有用 。   flask 下 加上 两个 命令 ， 负责 最 创建 数据库 代码生成 表格 工作 。   表格 生成 成功 都 flask - migrate   或者说   alembic 管理 ， 测试 models . py   新加 一列 ， 利用   flask   db   migrate   自动检测 新 一列 ， 自动 生成 代码 会 精准 。     sqlalchemy _ utils   import   database _ exists   ,   create _ database   ,   drop _ database   @ app . cli . command   ( )   def   initdb   ( ) :   user _ input   =   input   (   ' 命令 只 用于 数据库 初始化 ， 后续 更改 请 alembic 管理 ， 请 输入   [ Y ] '   )     user _ input   .   lower   ( )   = =   ' y '   :   engine   =   db   .   engine       database _ exists   (   engine   .   url   ) :   create _ database   (   engine   .   url   )     :   print   (   ' db   exists ... '   )   import   sys   sys   .   exit   (   -   1   )   assert   database _ exists   (   engine   .   url   )   db   .   create _   ( )     alembic . config   import   Config     alembic   import   command   alembic _ cfg   =   Config   (   ' migrations / alembic . ini '   )   command   .   stamp   (   alembic _ cfg   ,   \" head \"   )   @ app . cli . command   ( )   def   dropdb   ( ) :   \" \" \"   TODO   生产 环境 不 调用 命令   : return :   \" \" \"   user _ input   =   input   (   ' 警告 ! ! !   操作 删除 数据库 ， 数据 丢失 ， 请 输入 ：   [ YYY ] '   )     user _ input   = =   ' YYY '   :   engine   =   db   .   engine   db   .   drop _   ( )     database _ exists   (   engine   .   url   ) :   drop _ database   (   engine   .   url   )     :   print   (   ' db     exists ... '   )   assert     database _ exists   (   engine   .   url   )   flask - moment   Moment   JS   送入 UTC 时间 会 自动 转换 本地 时间 ， 服务器 时间 戳 记录 UTC 时间 。 用户 本地 时间 。   { %   block   scripts   % }   { {   super   ( )   } }   { {   moment . include _ moment   ( )   } }   { {   moment . lang   (   \" zh - cn \"   )   } }   { %   endblock   % }   模板 上 ：   < p >   时间 ：   { {   moment   (   current _ time   )   . format   (   ' LLLL '   )   } }   .   < / p >   < p >   { {   moment   (   current _ time   )   . fromNow   (   refresh   =   True   )   } }   刷新 .   < / p >   格式 请 参看   MomentJs   官网   。   flask - wtf   这块 初 接触 理解 上 困难 ， flask - wtf 提供 WTForms 模块 集成 支持 ， 功能   wtf . quick _ form ( form )     flask - bootstrap     WTForms 额外 支持 。 理解 上 关键在于 理解   WTForms   模块 到底 干什么 事情 。   WTForms 模块   简单 来说 WTForms 模块 做 工作 模板 引擎 上 jinja2 模块 引擎 上 快速 创建 输入 表单 相关 验证 事宜 。   定义 一个 Form 类 ：     wtforms   import   Form   ,   BooleanField   ,   StringField   ,   validators   class   RegistrationForm   (   Form   ) :   username   =   StringField   (   ' Username '   ,   [   validators   .   Length   (   min   =   4   ,   max   =   25   ) ] )   email   =   StringField   (   ' Email   Address '   ,   [   validators   .   Length   (   min   =   6   ,   max   =   35   ) ] )   accept _ rules   =   BooleanField   (   ' I   accept     site   rules '   ,   [   validators   .   InputRequired   ( ) ] )   Form 类 Field 类 ， Field 类 一个 列表 定义 一系列 Validators   验证 器 。 Field 都 一个 Widget   ， Widget 负责 HTML 渲染 工作 。   form 类 值得 ：   form 对象 ，   form . username . data   获取 表单 中 值 。   定义 form 对象 定义   validate _ < field _ >   函数 ， 函数 会 针对 特定 field _ 调用 。 验证 失败 ， 抛出   ValidationError   异常 ， 异常 信息 错误信息 。   Form 类 python 中 代码 ：   @ app . route   (   ' / submit '   ,   methods   =   (   ' GET '   ,   ' POST '   ) )   def   submit   ( ) :   form   =   MyForm   (   request   .   form   )     request   .   method   = =   ' POST '     form   .   validate   ( ) :   return   redirect   (   ' / success '   )   return   render _ template   (   ' submit . html '   ,   form   =   form   )     flask - wtf   下 代码 ：   @ app . route   (   ' / submit '   ,   methods   =   (   ' GET '   ,   ' POST '   ) )   def   submit   ( ) :   form   =   MyForm   ( )     form   .   validate _ _ submit   ( ) :   return   redirect   (   ' / success '   )   return   render _ template   (   ' submit . html '   ,   form   =   form   )   flask - wtf   定义 Form 类 上 提供 便利 ：   会 自动   request . form     request . files   塞进去 。     validate _ _ submit   方法 即可 ， 集成   request . method   判断 — —   POST   PUT   PATCH   DELETE   都 。   WTForms   初始化 接收 值 ， 第一个 值   request . form   ， 还 支持 对接 model   对象 ， 还 跟上 关键词 参数 ：   form   =   MyForm ( request . form ,   user ,   username = ' zhangsan ' )   WTForms 提供 很多 内置 验证 器 支持 ， 还 定义 验证 器 。 验证 器   validate   方法 中 ， 。   WTForms 渲染   提到 form 类 实例 中 Field 调用 str ( )   一段 HTML 代码 ：   < input   id = \" content \"   = \" content \"   type = \" text \"   = \" foobar \"   / >   模板 引擎 渲染 时 ， jinja2 ， 会 接受 form 实例 。 一个 表单 渲染 ：   class   LoginForm   (   Form   ) :   username   =   StringField   (   ' Username '   )   password   =   PasswordField   (   ' Password '   )   form   =   LoginForm   ( )   < form   method =   \" POST \"   action =   \" / login \"   >   < div >   { {   form . username . label   } }   :   { {   form . username   (   class   =   \" css _ class \"   )   } }   < / div >   < div >   { {   form . password . label   } }   :   { {   form . password   ( )   } }   < / div >   < / form >   python 代码 ， form Field 接受 额外 关键词 参数 ， 属性 传入 input 标签 属性 。   csrf _ token 相关   WTForms     csrf _ token   支持 功能 ：   { {   form . csrf _ token   } }   这块 细节 请 参看 WTForms csrf _ token 相关 章节 ， 不 深究 ， 一个 csrf _ token 校验 。     flask - wtf   推荐 写法 ：   < form   method =   \" POST \"   action =   \" / \"   >   { {   form . hidden _ tag   ( )   } }   { {   form . . label   } }   { {   form .   (   size   =   20   )   } }   < / form >   hidden _ tag   方法 flask - wtf 提供 ， 隐藏 html   field   渲染 ，   flask - wtf   默认 会 加上   csrf _ token   支持 ， 语句 ：   { {   form . csrf _ token   } }   这是 一个 hidden 标签 ， 会 渲染 。   flask - bootstrap 提供 额外 支持   flask - bootstrap 提供 额外 支持 ， 简单 来说 编写 jinja2 宏 。   quick _ form   宏 ：   { {   wtf . quick _ form   (   form   )   } }   大体 输出 语句 ：   {   %   import   \" bootstrap / wtf . html \"     wtf   %   }   <   form   class   =   \" form   form - horizontal \"   method   =   \" post \"   role   =   \" form \"   >   { {   form   .   hidden _ tag   ( )   } }   { {   wtf   .   form _ errors   (   form   ,   hiddens   =   \" \"   )   } }   { {   wtf   .   form _ field   (   form   .   field1   )   } }   { {   wtf   .   form _ field   (   form   .   field2   )   } }   < /   form   >   说 大体 ， quick _ form   宏 参数 调配 。 默认 参数 输出 情况 。     form _ errors   宏     form _ field   宏 都   flask - bootstrap   宏 文件 定义 。 刚 表单 显示 特别 ，   quick _ form   宏 很 好 。   特别 ， 深究 flask - bootstrap   宏 定义 情况 ， 退化 写法 ， 再 稍作 定制 。   flask - wtf   最 原始 写法 ， 再 调配 下 即可 。   < form   method =   \" POST \"   action =   \" / \"   >   { {   form . hidden _ tag   ( )   } }   { {   form . . label   } }   { {   form .   (   size   =   20   )   } }   < / form >   WTForms 支持 Field   BooleanField   复选框   DateField   文本 字 段     datetime . date   DateTimeField   文本 字 段     datetime . datetime   DecimalField   文本 字 段     decimal . Decimal   FileField   文件 上传 字 段   HiddenField   隐藏 文本 字 段   FieldList   一组 指定 类型 字 段   FloatField   文本 字 段     float   FormField   一个 表单 字 段 嵌入 一个 表单   IntegerField   文本 字 段     integer   PasswordField   密码 文本 字 段   RadioField   单选 按钮   SelectField   下 拉 列表   SelectmultipleField   下拉多选 列表   SubmitField   表单 提交 按钮   StringField   文本 字 段   TextAreaField   多行 文本 字 段   WTForms 提供 Validator   DataRequired   确保 类型转换 后字 段 数据   Email   验证 电子邮箱   EqualTo   两个 字段 值   常用 两次 密码 输入   InputRequired   确保 类型转换 前字 段 数据   IPAddress   验证 IPv4 地址   Length   长度 验证   MacAddress   验证 MAC 地址   NumberRange   数字 校验   Optional   字 段 输入 ， 跳 校验 函数   Regexp   正则表达式 校验   URL   URL 校验   UUID   UUID 校验   AnyOf   输入 值 任一 值中   NoneOf   输入 值 不 一组 值中   flask - login   flask - login 引入 进来   jinja2 模块 都 支持   current _ user   变量 。   提供   login _ required   url 权限 控制 。   flask - login 请 参看 官方 文档 ， 重点 讲 flask - login 都 做 事情 ， 参考资料 1 说 很 好 。   login _ user   函数 用于 登录 用户 ， 核心 用户 id 写入 flask session 。 类似   logout _ user   id session 中 删除 。   渲染 jinja2 模板 ， 会   flask - login     current _ user   变量 请求 。 调用 flask - login     _ _ user   函数 。   _ _ user   检查 session 中 有没有 用户 id ， 返回   AnonymousUser   ， 调用   user _ loader   装饰器 注册 函数 。 【 值得 额外 一提 ， python 代码 引用   current _ user   返回 数据库 User 对象 ， 数据库 对象   current _ user ._ _ current _ object ( )   】   login _ required     current _ user     _ authenticated   方法 调用 ， True   ， False 拒绝 。   参考资料   Flask   Web   开发 第二 版   米格尔 · 格林 贝格 著   安道 译",
            "tags":"python好伙伴",
            "url":"articles/flask-module.html"
        },
        {
            "title":"机器学习第六谈之pipeline",
            "text":"机器学习 第六 谈 pipeline   学习 讨论 keras numpy ， 验证 测试 算法 ， 大概 讨论 很 零零碎碎 。 会 人 机器学习 内容 太多 ， 太难 感觉 。 基础知识 很多 都 再 慢慢 补充 学习 ， 说到底 机器学习 工程 领域 ， 工程 上 思维 更 偏向 ， 偏向 顶向下 学习 方法 — — 底向上 ， 学习 基础知识 一步步 上 ， 先 跟着 成熟 项目 学习 ， 别人 做 ， 马上 手头上 编写出 一个 针对 粗糙 解决方案 ， 再 针对性 学习 一步步 优化 。   学习 中 说 数据处理 流 去 做 思考 藏 脑子 ， 慢慢 接触 sklearn 项目 pipeline 概念 ， 会 发现 sklearn 不 说 很 完美 解决 ， 至少 解决 。 理解 pipeline 概念 ， 发现 视角 宏观 开阔 ， 分裂 神经网络 领域 知识 融合 进来 。 重点 理解 sklearn Pipeline 概念 ， 试着 机器学习 项目 中 实践 。   sklearn pipeline 机器学习 数据处理 流 很 一个 工具 ， 图 很 ， 大概 pipeline 工作 原理 。   【 pipeline 工作 流程图 】   图片 摘自   篇文章   pipeline transformer ， 一个 estimator 。   transformer   transformer fit tranform 两个 方法 ， 调用   pipeline . fit   ， dataset   ( X ,   y )   - - >   会 逐个 transformer ， fit 方法 数据 内部 ， 会 返回 ， transform 方法 会 返回 输出 数据 集   X   ， 自定义 transformer 都 继承   TransformerMixin   类 ， 只 定义 fit transform 方法   fit _ transform   方法 。   一个 都 没 做 自定义 transformer 大概 样子 。     sklearn . base   import   TransformerMixin   class   MyTransformer   (   TransformerMixin   ) :   \" \" \"   定义 Transformer   \" \" \"   def   fit   (     ,   X   ,   y   =   None   ,   * *   kwargs   ) :   \" \" \"   : param   X :   : param   y :   : param   kwargs :   : return :   \" \" \"   return     def   transform   (     ,   X   ,   * *   kwargs   ) :   \" \" \"   : param   X :   : param   kwargs :   : return :   \" \" \"   return   X   调用   pipeline . predict   方法 ， 输入 X 会 transformer transform 方法 【 调用 fit 方法 ， 调用 pipeline . fit ， 模型 或者说 pipeline 中 transformer ， ， pipeline 中 模型 都 训练 好 】 ， 再 调用   estimator   predict   方法 再 。   也就是说 ， pipeline 当做 一个 更 大型 组合 模型 ， 综合 模型 下 ， 输入 数据 集 ， 训练 ， predict ， 数据 集 minmax   scale 标签 标记 都 会 自动 ， 不 再 ： 训练集 scale ， 下 输入 一个 数据 模型 ， 还要 先 数据 scale ， 输出 我该 转换成 标记 。   sklearn 真的 一个 很 Great 项目 ， 找到 老旧 教材 学习 机器学习 ， 会 发现 机器学习 中 太 通用 模式 ， 会 一种 数据处理 流 模式 ， sklearn pipeline 说 初步解决 。 pipeline ， 基于 pipeline 之上 构建 机器学习 项目 ， 最终 搭建 pipeline 当做 综合 模型 ， 剩下 很 简单 一个 ： 选择 参数 ， 输入 数据 ， 训练 模型 ， 利用 模型 预测 ， 评估 模型 。   选择 参数 ， sklearn 还 基于 pipeline 提出 GridSearchCV 网格 搜索 概念 ， 只能 说 sklearn 大成 式 豪迈 宣言 。 GridSearchCV ， 训练 pipeline 模型 ， 参数 评估 模型 自动 优化 工作 。   还 顺便 提 神经网络 框架 keras sklearn 关系 ， 机器学习 包含 神经网络 这门 学科 ， sklearn 模块 上 包含 keras ， keras 神经网络 模型 算法 最 核心 一部分 ， 至少 输入 数据处理 流向 上 ， 这方面 还要 尝试 — — 多个 神经 模型 ， 传统 机器学习 算法 数据处理 最终 一个 大型 综合 模型 。   estimator   estimator 只 fit 方法 ， fit 方法 某种 学习 算法 — — 简单 线性回归 神经网络 ， 训练 好 模型 。 还 提供   predict 方法 ， 学习 算法 本质 ， 利用 训练 好 模型 。   特征 联合   提到 sklearn pipeline 相当于 一个 综合 模型 ， 进一步   FeatureUnion   特征 操作 添加 新 特征 灵活 ， FeatureUnion 类其 实际上 一个   transformer ， 提取 组合 出 想要 几个 特征 。 请 读者   kaggle     小 项目   ， 写法 风格 优雅 。   针对 特征 提取 工作 ， 特征 联合 。 FeatureUnion   还 加上 额外 特征 ， 额外 运算 新 特征 。   小 项目 一点 很 值得 ， 篇文章 提醒 ， sklearn train _ test _ split   分割 pandas DataFrame 返回 pandas DataFrame Series 【 labels 】 对象 。 pandas 无缝 对接 写法 很 好 。   构建 pipeline 还 参考   篇文章   更 连贯 构建 一个 综合 模型 ， 大概 所示 ：   text   =   Pipeline   ( [   (   ' selector '   ,   TextSelector   (   key   =   ' processed '   ) ) ,   (   ' tfidf '   ,   TfidfVectorizer   (   stop _ words   =   ' english '   ) )   ] )   length   =   Pipeline   ( [   (   ' selector '   ,   NumberSelector   (   key   =   ' length '   ) ) ,   (   ' standard '   ,   StandardScaler   ( ) )   ] )   words   =   Pipeline   ( [   (   ' selector '   ,   NumberSelector   (   key   =   ' words '   ) ) ,   (   ' standard '   ,   StandardScaler   ( ) )   ] )   words _ _ stopword   =   Pipeline   ( [   (   ' selector '   ,   NumberSelector   (   key   =   ' words _ _ stopword '   ) ) ,   (   ' standard '   ,   StandardScaler   ( ) )   ] )   avg _ word _ length   =   Pipeline   ( [   (   ' selector '   ,   NumberSelector   (   key   =   ' avg _ word _ length '   ) ) ,   (   ' standard '   ,   StandardScaler   ( ) )   ] )   commas   =   Pipeline   ( [   (   ' selector '   ,   NumberSelector   (   key   =   ' commas '   ) ) ,   (   ' standard '   ,   StandardScaler   ( ) ) ,   ] )   feats   =   FeatureUnion   ( [ (   ' text '   ,   text   ) ,   (   ' length '   ,   length   ) ,   (   ' words '   ,   words   ) ,   (   ' words _ _ stopword '   ,   words _ _ stopword   ) ,   (   ' avg _ word _ length '   ,   avg _ word _ length   ) ,   (   ' commas '   ,   commas   ) ] )   pipeline   =   Pipeline   ( [   (   ' features '   ,   feats   ) ,   (   ' classifier '   ,   RandomForestClassifier   (   random _ state   =   42   ) ) ,   ] )   pipeline 好像 一个 大 综合 模型 ， fit   predict   。   GridSearchCV   网格 搜索 用于 调参 ， pipeline 参数 名字   :   f   ' { transformer _ _ estimator _ } __ { parameter _ } '     sklearn . model _ selection   import   GridSearchCV   hyperparameters   =   {   ' features __ text __ tfidf __ max _ df '   :   [   0.9   ,   0.95   ] ,   ' features __ text __ tfidf __ ngram _ range '   :   [ (   1   ,   1   ) ,   (   1   ,   2   ) ] ,   ' classifier __ max _ depth '   :   [   50   ,   70   ] ,   ' classifier __ min _ samples _ leaf '   :   [   1   ,   2   ]   }   clf   =   GridSearchCV   (   pipeline   ,   hyperparameters   ,   cv   =   5   )   #   Fit     tune   model   clf   .   fit   (   X _ train   ,   y _ train   )   print   (   clf   .   _ params _   )   例子 名字 长 ， 下 找 ， features   - - >   text   - - >   tfidf   - - >   传 进去 参数   max _ df   运算 稍微 耗时 ， 程序化 最佳 参数 保存起来 ：     sklearn . externals   import   joblib   joblib   .   dump   (   clf   .   _ estimator _   ,   ' filename . pkl '   ,   compress   =   1   )   下次 最佳 clf ：   reclf   =   joblib   .   load   (   ' filename . pkl '   )   preds   =   reclf   .   predict   (   X _ test   )   种 保存 方法 ， 保存 clf ， 直观 ， 估计 兼容性 更好 一点 ， 模型 文件 稍微 大了些 ：     sklearn . externals   import   joblib   joblib   .   dump   (   clf   ,   ' filename . pkl '   ,   compress   =   1   )   reclf   =   joblib   .   load   (   ' filename . pkl '   )   机器学习 过程 整理   机器学习 过程 Pipeline 基础 上 再 整理 ：   数据 来源 中 获取数据 汇总 ， pandas io 工具 好用 ， 没 拒绝 。   基于 pandas 普遍性 数据 预处理 【 就要 情况 】   分割 训练集 测试集   针对 训练集 编写 Pipeline   pipeline 过程 大致 涉及 目标 特征 提取 新 特征 计算 特征 融合 ， 缩放 ， 特征选择 ， 最终 算法 选择 。   pipeline . fit   训练 模型   pipeline . predict   模型   K 折 基于 训练 数据 验证 得分   cross _ val _ score ( pipeline ,   train _ data ,   train _ labels ,   cv = 4 )   pipeline . test   基于 测试集 测试   讨论 模型 保存 再 利用   绘图 表现 很 ， 工作 往后面 放一放 。   基于 GridSearchCV 参数 调优   更 更 手段 调优",
            "tags":"机器学习",
            "url":"articles/machine-learning-talk-six.html"
        },
        {
            "title":"python和c++的dll的对接_in_windows",
            "text":"ctypes 模块   python 程序 别人 dll 交互 ， ctypes 模块 。 ctypes linux c 语言 库 交互 ， 本文 重点 讨论 windows 下 dll 交互 。   ：   lib _ comm   =   ctypes   .   windll   .   LoadLibrary   (   _ dll _ path   (   ' _ dll . dll '   ) )   假设 _ dll . dll     helloworld   函数 ， 调用 函数 。   lib _ comm   .   helloworld   ( )   接下 python 数据类型 dll c 语言 数据类型 对接 （ 还会 牵涉到 字符串 编码 。 ）   官方 文档   数据类型 表格 必看 。 类型 都 还好 ， 指针 结构 体 这两块 理解 。   python 脚本 中 大概 类似 创建 一个 C语言 定义 结构 体 ：   class   YOU _ STRUCTURE   (   ctypes   .   Structure   ) :   \" \" \"   基础 信息结构 体   \" \" \"   _ fields _   =   [   (   ' a '   ,   ctypes   .   c _ int   ) ,   (   ' b '   ,   ctypes   .   c _ char   *   24   ) ,   (   ' c '   ,   ctypes   .   c _ char   *   40   ) ,   ]   ：   s   =   YOU _ STRUCTURE   ( )   _ ref _ s   =   ctypes   .   byref   (   s   )     byref   获取 目标 结构 体 指针 ， 调用 dll 函数 传递 结构 体 数据 ， 指针 ，   _ ref _ s   传递 。   lib _ comm   .   test   (   _ ref _ s   )   创建 c++ dll   阅读 官方   篇文章   利用 visual   studio   2017   创建   基于 c++ 语言 dll 过程 整理 ：   visual   studio   安装   C++ 桌面开发 环境 。   新建 项目   新建 项目选择   c++   windows   桌面   里   windows   桌面 向导   点击 下 一步 下 一个 界面 选择   动态链接库   dll   添加 头文件   源文件 dllmain . cpp   不 做 修改 ， 头文件 新建 一个 . h 文件 ， 具体内容 ：   # pragma     # ifdef   MATHLIBRARY _ EXPORTS   # define   MATHLIBRARY _ API   __ declspec ( dllexport )   #   # define   MATHLIBRARY _ API   __ declspec ( dllimport )   # endif   extern   \" C \"   MATHLIBRARY _ API   int   _ stdcall   test _ call   ( ) ;   extern   \" C \"   MATHLIBRARY _ API   int   _ stdcall   test _ buf   (   char   *   buf   ,   int   num   ,   char   *   outbuf   ) ;     MATHLIBRARY   名字 更改 ， 暂时 懒得 改了 。 声明 dll 对外开放 函数 一个 修饰符 。 涉及 dll 相关 知识 ， 一种 写法 ， 不用 太 深究 ， 毕竟 重点 c++ 语言 写 函数 。     _ stdcall   ， 说 标准 windows   API   调用 ， 暂时 不用 太 深究 ， 记得 头文件 源文件 函数 定义 都 加上 修饰符 ， python   ctypes 对接   windll ， 不加   cdll 。   添加 源文件   # include   \" stdafx . h \"   # include   < utility >   # include   < limits . h >   # include   \" MathLibrary . h \"   int   _ stdcall   test _ call   ( )   {   return   2   ;   }   int   _ stdcall   test _ buf   (   char   *   buf   ,   int   num   ,   char   *   outbuf   )   {   int   i   =   0   ;     (   i   =   0   ;   i   <   num   ;   ++   i   )   {   outbuf   [   i   ]   =   ' a '   ;   }   return   num   ;   }   点击   生成 解决方案   debug 文件夹   生成   dll 。 讲 python 项目 集成 。   python 项目 集成   新建 一个 简单 python 项目 ， 一个 最 简单 python 项目 即可 。   做 事情 创建 生成 dll c++ 项目 解决方案 中 添加 进来 。   python 项目 引用 中 ， 项目 添加 进来 。   生成 dll c++ 项目 点击 生成 dll 会 输出 解决方案 debug 文件夹 。   python 脚本 引用 即可 ：   import   ctypes   dll   =   ctypes   .   windll   .   LoadLibrary   (   ' .. \\ Debug \\ MathLibrary . dll '   )   print   (   dll   .   test _ call   ( ) )   test _ buf   =   dll   .   test _ buf   data _   =   ctypes   .   c _ char _ p   (   ' abcd '   .   encode   ( ) )   data _   =   ctypes   .   create _ string _ buffer   (   4   )   numbytes   =   ctypes   .   c _ long   (   4   )   res   =   test _ buf   (   data _   ,   numbytes   ,   data _   )   print   (   res   )   res2   =   data _   .     .   decode   ( )   assert   str   = =   type   (   res2   )   print   (   res2   )   实际上 路径 指向 上 一层 debug 文件 dll 文件 ， python dll 联动 调试 。   参考资料   python   ctypes 探究   篇文章 ctypes c++ 语言 之间 字符串 沟通 很 好",
            "tags":"python语言",
            "url":"articles/python-c++-dll-in-windows.html"
        },
        {
            "title":"机器学习第五谈之数据预处理",
            "text":"前言   sklearn 很多 数据 预处理 支持 函数 ， 重点 理解 数据 预处理 技术 。   本文 介绍 内容 ， 代码 形式 展示 ：   import   pandas     pd   import   numpy     np     sklearn . preprocessing   import   StandardScaler     sklearn . preprocessing   import   MinMaxScaler     sklearn . preprocessing   import   normalize     sk _ normalize     sklearn . preprocessing   import   binarize     sk _ binarize   def   combine _ df   (   df _   ,   _ df   ) :   \" \" \"   输入 ndarray 值 ， 老 df column 列名 输出 一个 新 df   : param   df _ :   : param   _ df :   : return :   \" \" \"   _ df   =   pd   .   DataFrame   (   df _   ,   columns   =   _ df   .   columns   )   return   _ df   \" \" \"   -   scale   缩放 操作   ( 缩放器   df )   返回 df   -   inverse _ scale   反向 缩放 操作   ( 缩放器   df )   返回 df   -   normalize ( df ,   norm = ' l1 ' )   归一化   -   binarize   二值化   阈值 默认 0   -   encode   编码   -   inverse _ encode   反 编码   ###   缩放器   -   z - score 标准化   _ standard _ scaler   -   minmax 缩放   _ minmax _ scaler   \" \" \"     sklearn . preprocessing   import   OneHotEncoder   \" \" \"     hot   encoding   \" \" \"     sklearn . preprocessing   import   LabelEncoder   \" \" \"   LabelEncoder   标记 编码   \" \" \"   def   scale   (   scaler   ,   df   ) :   \" \" \"   缩放 操作   : param   scaler :   : param   df :   : return :   \" \" \"     isinstance   (   df   ,   pd   .   DataFrame   ) :   df _   =   scaler   .   fit _ transform   (   df   )   _ df   =   combine _ df   (   df _   ,   df   )   return   _ df   elif   isinstance   (   df   ,   np   .   ndarray   ) :   df _   =   scaler   .   fit _ transform   (   df   )   return   df _   def   inverse _ scale   (   scaler   ,   df   ) :   \" \" \"   反向 缩放 操作   -   反向 缩放 ：   -   minmax   -   stand   : param   scaler :   : param   df :   : return :   \" \" \"     isinstance   (   df   ,   pd   .   DataFrame   ) :   df _   =   scaler   .   inverse _ transform   (   df   )   _ df   =   combine _ df   (   df _   ,   df   )   return   _ df   elif   isinstance   (   df   ,   np   .   ndarray   ) :   df _   =   scaler   .   inverse _ transform   (   df   )   return   df _   def   normalize   (   df   ,   norm   =   ' l1 '   ) :   \" \" \"   归一化   norm 选项   l1   范数     l2   范数   选项   : param   df :   : param   norm :   : return :   \" \" \"     isinstance   (   df   ,   pd   .   DataFrame   ) :   df _   =   sk _ normalize   (   df   ,   norm   =   norm   )   _ df   =   combine _ df   (   df _   ,   df   )   return   _ df   elif   isinstance   (   df   ,   np   .   ndarray   ) :   df _   =   sk _ normalize   (   df   ,   norm   =   norm   )   return   df _   def   binarize   (   df   ,   threshold   =   0   ) :   \" \" \"   二值化   给定 阈值 默认 0 ,   阈值 返回 0 1   : param   df :   : param   threshold :   : return :   \" \" \"     isinstance   (   df   ,   pd   .   DataFrame   ) :   df _   =   sk _ binarize   (   df   ,   threshold   =   threshold   )   _ df   =   combine _ df   (   df _   ,   df   )   return   _ df   elif   isinstance   (   df   ,   np   .   ndarray   ) :   df _   =   sk _ binarize   (   df   ,   threshold   =   threshold   )   return   df _   def   encode   (   encoder   ,   df   ,   fit _ data   =   None   ) :   \" \" \"   编码   : param   encoder :   : param   df :   : return :   \" \" \"     fit _ data       None   :   encoder   .   fit   (   fit _ data   )     isinstance   (   encoder   ,   OneHotEncoder   ) :   df _   =   encoder   .   transform   (   df   )   .   toarray   ( )   return   df _   elif   isinstance   (   encoder   ,   LabelEncoder   ) :   df _   =   encoder   .   transform   (   df   )   return   df _   def   inverse _ encode   (   encoder   ,   df   ) :   \" \" \"   反向 编码   反向 编码 ：   -   onehot   -   label   : param   encoder :   : param   df :   : return :   \" \" \"   df _   =   encoder   .   inverse _ transform   (   df   )   return   df _   def   _ standard _ scaler   ( ) :   \" \" \"   均值 移除     z - score 标准化   : param   scaler :   : param   df :   : return :   \" \" \"   return   StandardScaler   ( )   def   _ minmax _ scaler   (   feature _ range   =   (   0   ,   1   ) ) :   \" \" \"   缩放 ， 缩 放到 0 - 1 ，   0 - 1 缩放   : param   scaler :   : param   df :   : return :   \" \" \"   scaler   =   MinMaxScaler   (   feature _ range   =   feature _ range   )   return   scaler   代码 很具 实用性 ， 大概 sklearn 数据 预处理 这块 相关 支持 情况 。   缩放 操作   均值 移除   更 喜欢 称之为 z - score 缩放 ， 学习 统计学 z - score 标准分 含义 ， 大体 缩放 操作 做些 事情 。 简单 来说 讲 张量 数据 特征 维度 ， 均值 都 0 ， 标准差 都 1 。   sklearn 提供   StandardScaler   ， 利用 fit tranform 操作 即可 ， 还 利用 缩放器 反向 回滚   inverse _ transform   。   minmax 缩放   控制 张量 数据 最小值 最大值 。   sklearn 提供   MinMaxScaler   缩放器 类 ， 类似 fit tranform 操作 ， 利用 缩放器 回滚 操作 。   归一化   sklearn 提供 normalize 函数 支持 张量 数据 归一化 操作 ， 这是 一个 不 可逆 操作 。 特征 维度 数据 绝对值 1 。   二值化   给定 一个 阈值 ， 张量 数据 0   1   值 。 估计 神经网络 中 有用 。   onehot 编码   onehot 编码 算是 神经网络 入门 知识 ， 简单 来说   数值 字符   编码 空间 扩展   0   1   数值 特征向量 。   sklearn 提供   OneHotEncoder   相关 操作 。   比如说   [   [ ' male ' ,   10 ] ,   [ ' female ' , 5 ] ,   [ ' male ' ,   1 ]   ]   性别 特征 列有值   male   female   两个 值   一列 两个 bit 位   。   数字 列   1   5   10   三个 值   特征 列 三个 bit 位   。   例子 一共   5   bit 位 。   df   =   pd   .   DataFrame   (   [   [   ' male '   ,   10   ] ,   [   ' female '   ,   5   ] ,   [   ' male '   ,   1   ]   ] )   encoder   =   _ onehot _ encoder   ( )   encoder   .   fit   (   df   )   encoder   .   transform   ( [ [   ' female '   ,   10   ] ] )   .   toarray   ( )   array   ( [ [   1 .   ,   0 .   ,   0 .   ,   0 .   ,   1 .   ] ] )   例子 中   1   0     female   0   0   1     10   。   label 编码   label 编码 含义 很 简单 ， 给定 一个 字典 值 ， 字典 单词 赋值 0 , 2 , 3 ... 张量 数据 数值 型 。   sklearn 提供   LabelEncoder   相关 操作 。   计算误差   平均 绝对误差 MAE   数据 集 数据 点 绝对误差 平均值   import   sklearn . metrics     sm   sm   .   _ absolute _ error   (   test _ data   ,   test _ pred   )   均方 误差 MSE   数据 集 数据 点 误差 平方 平均值   sm . _ squared _ error ( test _ data ,   test _ pred )   均 方根 误差 RMSE   均方 误差 开个 根号 ， 更好 描述 模型 误差   中位数 绝对误差   数据 集 数据 点 误差 中位数   sm . median _ absolute _ error ( test _ data ,   test _ pred )   解释 方差 分   分数 用来 衡量 模型 数据 集 波动 解释 能力   sm . explained _ variance _ score ( test _ data ,   test _ pred )   R 方 得分   R2   score   用来 衡量 模型 未知 样本 预测 效果 。   sm . r2 _ score ( test _ data ,   test _ pred )   缩放 归一化 再 讨论   物品 特征 ， 算法 特征 数值 差异 容忍度 很 高 ， 一般来说 算法 都 特征值 缩放 。 基于 特征值 计算 距离 算法 ， 特征值 缩放 ， 才能 算法 。 情况 二值化 解决 ， 剩下 特征值 缩放 ， z - score 缩放 minmax 缩放 。   两个 缩放 手段 都 ， 时间 充裕 ， 两种 缩放 手段 算法 评估 工作 都 做 。   顺便 提 归一化 手段 ， 归一化 normalize 默认 l2 范数 ， 横向 【 默认 axis = 1 ， 特征 维 axis = 0 】 值 平方和 等于 1 ， l1 范数 横向 值 【 绝对值 ？ 】 相加 等于 1 。   l1 范数 是否是 绝对值 重点 ， 归一化 不 缩放 范畴 ， 意义 上 讲 算法 一部分 数据处理 。 比如说 频数 列表   [ 2 , 3 , 0 , 0 ]   利用 l1 归一化 ，   array ( [ [ 0.4 ,   0.6 ,   0 .   ,   0 .   ] ] )   0.4   就可以看 做   2   发生 概率 0.4   ， l1 范数 正好   概率 等于 1 。 场景 计算 。   参考资料   python 机器学习 经典 案例   Prateek   Joshi   著   陶 俊杰   陈小莉译   篇文章 不错",
            "tags":"机器学习",
            "url":"articles/machine-learning-talk-five.html"
        },
        {
            "title":"wxpython第三谈",
            "text":"TextCtrl 代码 改变 文本   TextCtrl 代码 改变 文本 方法 ：   AppendText   尾部 添加 文本   Clear   EmulateKeyPress   一个 按键 事件   SetInsertionPoint   设置 插入 点   SetValue   WriteText   插入 点 插入 文本   Remove   删除 指定 文本   Replace   替换 指定 文本   对接 系统 剪贴板   文本 放入 剪贴板   data   =   wx   .   TextDataObject   ( )   text   =   \"   text \"   data   .   SetText   (   text   )     wx   .   TheClipboard   .   Open   ( ) :   wx   .   TheClipboard   .   SetData   (   data   )   # 数据 放置 剪贴板 上   wx   .   TheClipboard   .   Close   ( )     :   print   (   ' 剪贴板 打不开 .. '   )   剪贴板 中取 内容   data   =   wx   .   TextDataObject   ( )     wx   .   TheClipboard   .   Open   ( ) :   success   =   wx   .   TheClipboard   .   GetData   (   data   )   wx   .   TheClipboard   .   Close   ( )     success   :   return   data   .   GetText   ( )   清空 剪贴板 动作 ：   Clear   方法 。   ScrolledPanel   带 滚动条 面板 ， 值得 额外 一提 东西 ：   SetupScrolling   SetupScrolling   (     ,   scroll _ x   =   True   ,   scroll _ y   =   True   ,   rate _ x   =   20   ,   rate _ y   =   20   ,   scrollToTop   =   True   ,   scrollIntoView   =   True   )   方法 很 ， 谈到 ， 带 滚动条 面板 内容 发生 变动 ，   Layout   之外 ， 还 加上   SetupScrolling   一句 。   选项 很 ：   scroll _ x   设置 False   横向 滚动条 不 显示   scroll _ y   设置 False   竖向 滚动条 不 显示   rate _ x   最小 一步 滚动 距离   rate _ y   最小 一步 竖向 滚动 距离 ，   scroolIntoView   滚动 尽可能 让子 面板 合适 显示     Scroll   方法 程序 滚动 。   wxpython 鼠标 图案   面板 ， 继承 Window 类 都   SetCursor   方法 设置 鼠标 图形   . SetCursor ( wx . Cursor ( wx . CURSOR _ HAND ) )   默认 ：   wx . CURSOR _ ARROW   ， 常用 显示 点击 手型   wx . CURSOR _ HAND   ， ：   wx . CURSOR _ ARROWWAIT   只能 windows 下 ， 繁忙 光标   wx . CURSOR _ BLANK   不 光标   wx . CURSOR _ WAIT   沙漏 等待 光标   wx . CURSOR _ WATCH   手表 等待 光标   wx . CURSOR _ SPRAYCAN   绘图 光标   wx . CURSOR _ SIZING   尺寸 调整 时 光标 ， 四个 指向   wx . CURSOR _ SIZEWE   水平 尺寸 调整 光标 ， 指向   wx . CURSOR _ SIZENS   垂直 尺寸 调整 光标 ， 指向   wx . CURSOR _ RIGHT _ BUTTON   右 按键 按下 光标   wx . CURSOR _ PENCIL   钢笔 样 光标   wx . CURSOR _ PAINT _ BRUSH   画刷样 光标 ， 绘图 程序 中   wx . CURSOR _ MAGNIFIER   放大镜 ， 缩放   wx . CURSOR _ MIDDLE _ BUTTON   一个 按键 按下 鼠标   还 自定义 光标 图案 ：   wx . CursorFromImage ( image )   ComboBox 内容 修改   参考     。   ComboBox 官方 手册 上 找 不到 相关 方法 ， ComboBox 继承   ItemContainer   ， 调用 方法 ， 动态 修改 ComboBox 内容 。   Clear   清空   Append   附加   Delete ( ,   n )   删除   Insert   插入   Set ( ,   items )   替换   自定义 对话框   情况 下 继承   SizedDialog   会 很 ：   import   wx . lib . sized _ controls     sc   class   Dialog   (   sc   .   SizedDialog   ) :   def   __ init __   (     ,   parent   ,   *   args   ,   data   =   None   ,   type   =   ' simple '   ,   * *   kwargs   ) :   sc   .   SizedDialog   .   __ init __   (     ,   parent   ,   *   args   ,   size   =   (   400   ,   300   ) ,   * *   kwargs   )     .   parent   =   parent   pane   =     .   GetContentsPane   ( )   pane   .   SetSizerType   (   \" form \"   )   #   科目 名称   wx   .   StaticText   (   pane   ,   -   1   ,   \" 科目 名称 \"   )     .   nameText   =   wx   .   StaticText   (   pane   ,   -   1   ,   label   =     .     )     .   Fit   ( )     .   SetMinSize   (     .   GetSize   ( ) )     .   Layout   ( )     .   Center   ( )   继承   wx . Dialog   ， 自定义 panel 做 ， 添加 button 推荐 标准 ID ， 类似 关闭 对话框 判断 点击 按钮 ：   val   =   dlg . ShowModal ( )     val   = =   wx . ID _ DELETE   ...   列表 控件   列表 控件 支持 三种 模式 ：   style = wx . LC _ ICON   图标 模式 ， 大概 看上去 windows 上 文件 浏览 样子   style = wx . LC _ SMALL _ ICON   小图标 模式   style = wx . LC _ LIST   列表 模式   类似 小图标 模式 ， 按列 排列   style = wx . LC _ REPORT   报告 模式   类似 excel 表单 那种   更 详尽 查阅 文档 ， item 添加 Panel 控件 ， 建议 读者 下   wx . lib . agw . ultimatelistctrl . UltimateListCtrl   ， 读者 一列 排序 ， 下   wx . lib . mixins . listctrl . ColumnSorterMixin   item   textctrl   输入 ， 下   wx . lib . mixins . listctrl . TextEditMixin   ， mixin ，   ultimatelistctrl 没 mixin 。   网格 控件   网格 控件   wx . grid . Grid   感觉 列表 控件 ， 涉及 方法 很多 ， 建议 查阅 文档 。   树型 控件   TreeCtrl   显示 层次 数据 ， 目录 结构 时 用到 。   HTMLWindow   文本 显示 需求 ， HTMLWindow 种类 html 标记 语言 渲染 而成 ， 底层 浏览器 渲染 ， wxpython 渲染 ， 简单 来说 wxpython 种类 html 标记 语言 一种 快速 定义 文本 显示 界面 功能 。   wxpython 还 提供 html2 包 ， 其是 利用 浏览器 底层 渲染 ， 显示 ， 更 接近 浏览器 显示 效果 。   wxpython 打印 支持   一块 暂时 略过   DateTime python datetime 对象 互转   一节 参考   python   cook   book     # 12   recipe 。 记录 下 ， 有时候 会 用到 ：   import   datetime   import   wx   def   pydate2wxdate   (   date   ) :   assert   isinstance   (   date   ,   (   datetime   .   datetime   ,   datetime   .   date   ) )   tt   =   date   .   timetuple   ( )   dmy   =   (   tt   [   2   ] ,   tt   [   1   ]   -   1   ,   tt   [   0   ] )   return   wx   .   DateTimeFromDMY   (   *   dmy   )   def   wxdate2pydate   (   date   ) :   assert   isinstance   (   date   ,   wx   .   DateTime   )     date   .   IsValid   ( ) :   ymd   =   map   (   int   ,   date   .   FormatISODate   ( )   .   split   (   ' - '   ) )   return   datetime   .   date   (   *   ymd   )     :   return   None   boxsizer 两个 值得注意 方法   AddSpacer   作用 增加 一段 固定 空白 距离 ， boxsizer 覆写 sizer AddSpacer 方法 ， 横向 竖向 混淆 。   def   add _ vspace   (   box   ,   size   ) :   \" \" \"   boxsizer 竖向 增加 空白 距离 ， VERTICAL 抛 异常   : param   box :   : param   size :   : return :   \" \" \"     box   .   GetOrientation   ( )   = =   wx   .   VERTICAL   :   box   .   AddSpacer   (   size   )     :   raise   NotVerticalSizer   def   add _ hspace   (   box   ,   size   ) :   \" \" \"   boxsizer 横向 增加 空白 距离 ， HORIZONTAL 抛 异常   : param   box :   : param   size :   : return :   \" \" \"     box   .   GetOrientation   ( )   = =   wx   .   HORIZONTAL   :   box   .   AddSpacer   (   size   )     :   raise   NotHorizontalSizer   AddStretchSpacer   方法 sizer ， boxsizer 调用 ， 还 没 。 方法 方法 区别 增加 一段 缩放 空白 距离 ， Qt 一段 弹簧 样 东西 。 利用 缩放器 很 空间 居中 比例 位置 调整 。   参考资料   zetcode   wxpython 教程   wxpython 官方 参考 文档   wxpython     action   ,   Author     Harri   Pasanen     Robin   Dunn",
            "tags":"wxpython",
            "url":"articles/wxpython-talk-three.html"
        },
        {
            "title":"pypubsub模块",
            "text":"前言   pypubsub 模块 不 赘述 ， 简单 看 下 官方 文档 即可 。 要说 debug ：   pypubsub 引入 程序 经常出现 异常 信息 退出 ， 日常 编码 带来 很多 困扰 ， 重点 解决 。   官方 文档 高级 相关 介绍 ， 杂乱 ， 语焉不详 。   搜索   页面   ， 配置 捕捉到 异常 信息 。   我试 跟着 写 ， 发现   listenerID     topicObj . getName ( )   消息 名字 ， 程序 捕捉到 异常 写明 。   简单 Topic Linstener 对象 发现 找 不到 存储 异常 信息 地方 。   只好 翻 文档 ， API utils 有个 ExcPublisher 兴趣 ， 看 下 源码 ， 简单   ExcPublisher   发现 打印 出 异常 信息 ， 异常 。 发现 核心 实际上 ：   def   __ call __   (     ,   listenerID   :   str   ,   topicObj   ) :   \" \" \"   Handle     exception   raised       listener .   Send     Traceback       subscribers     topic   . topicUncaughtExc .   \" \" \"   tbInfo   =   TracebackInfo   ( )     .   __ topicObj   .   publish   (   listenerStr   =   listenerID   ,   excTraceback   =   tbInfo   )   新建 topic 发送 消息 ， tbInfo 异常 信息 ， 看 下 ， 发现 实际上 是从 python traceback 异常 堆栈 搜索 ， 奇怪 ， python 全局 异常 信息 ， 程序 却 抛出 异常 ， pypubsub 中途 拦截 。   简单 写 一个 东西 ：     pubsub . utils . exchandling   import   TracebackInfo   ,   IListenerExcHandler   class   MyExcPublisher   (   IListenerExcHandler   ) :   \" \" \"   Example   exception   handler     simply   publishes     exception   traceback .   The   messages       topic         topicUncaughtExc .   \" \" \"   def   __ call __   (     ,   listenerID   :   str   ,   topicObj   ) :   \" \" \"   Handle     exception   raised       listener .   Send     Traceback       subscribers     topic   . topicUncaughtExc .   \" \" \"   tbInfo   =   TracebackInfo   ( )   logger   .   error   (   f   ' message   { topicObj . getName ( ) }   caught   a   error :   \\ n   { tbInfo } '   )   定义 ：   pub . setListenerExcHandler ( MyExcPublisher ( ) )   发现 工作 还行 。 完事 ， 异常 捕捉 差不多 。 东西 建议 读者 稍微 下 ， 情况 debug 用于 知识 。   听 topic   > > >   def   snoop   (   topicObj   =   pub   .   AUTO _ TOPIC   ,   * *   mesgData   ) :   > > >   print   ' topic   \"   % s   \" :   % s   '   %   (   topicObj   .   getName   ( ) ,   mesgData   )   > > >   > > >   pub   .   subscribe   (   snoop   ,   pub   .   ALL _ TOPICS   )   (   <   pubsub   .   core   .   listenerimpl   .   Listener   instance     0x01A040A8   >   ,   True   )   > > >   pub   .   sendMessage   (   ' . topic . '   ,   a   =   1   ,   b   =   2   )   topic   \" . topic . \"   :   {   ' a '   :   1   ,   ' b '   :   2   }   打印 topic 层级   用到 topic 层级 ， 。   pubsub   .   utils   .   printTreeDocs   ( )   消息 缓冲 再 释放   一个 ， 一种 程序设计 ， 模型 层 数据 更改 会 自动 发送 消息 ， 大部分 情况 都 没 ， GUI 还 没 初始化 ， 出 。 消息 先 缓冲 ， 再 释放 。   写 一个 简单 类 ：     pubsub   import   pub   class   PreGUIController   ( ) :   \" \" \"   GUI 初始化 接受 信号 缓冲   GUI 初始化 再 发送   \" \" \"   def   __ init __   (     ) :     .   info _ queue   =   [ ]     .   listener   ,   _   =   pub   .   subscribe   (     .   remember _   ,   pub   .   ALL _ TOPICS   )   def   stop _ listen   (     ) :   pub   .   unsubscribe   (     .   listener   ,   pub   .   ALL _ TOPICS   )   def   repeat _   (     ) :   \" \" \"   再次 发送 信号   : return :   \" \" \"     msg       .   info _ queue   :     =   msg   [   ' '   ]   kwargs   =   msg   [   ' kwargs '   ]   pub   .   sendMessage   (   f   ' { } '   ,   * *   kwargs   )   import   time   time   .   sleep   (   0.1   )   def   remember _   (     ,   topicObj   =   pub   .   AUTO _ TOPIC   ,   * *   kwargs   ) :   msg   =   {   ' '   :   topicObj   .   getName   ( ) ,   ' kwargs '   :   kwargs   }     .   info _ queue   .   append   (   msg   )   ：   pre _ controller   =   PreGUIController ( )   #   GUI 初始化   pre _ controller . stop _ listen ( )   pre _ controller . repeat _ ( )   用到 知识 实际上 听 topic 方法 编写 ， 唯一 一个 新 知识点 listener 取消 监听 topic 。",
            "tags":"wxpython",
            "url":"articles/pypubsub-module.html"
        },
        {
            "title":"推荐系统第二谈",
            "text":"前言   推荐 系统 摸索 性质 ， 一段时间 ， 再 来看 写 推荐 系统 第一 谈 文章 ， 基本上 删掉 重写 。 推荐 系统 第二 谈 ， 大概 没什么 太 大 东西 都 放在 基本概念 。   基本概念   推荐 系统 本质 上 隶属于 机器学习 系统 ， 简单 下 推荐 系统 相关 算法 ， 推荐 系统 架构 ， 基于 机器学习 系统 架构 ， 之上 引入 新 流 即可 。   推荐 系统 分为 两类 推荐 ： 一类 评分 预测 推荐 ； 另一类 topN 推荐 。 看 很多 教材 案例 基本上 都 做 评分 预测 推荐 ， 大概 表格 数据 ：   物品 1   物品 2   物品 3   物品 4   用户 1   2     3     用户 2   1   2   5     用户 3           用户 物品 评分 ， 推荐 工作 。 老实 说 教材 很大 困扰 ， 活着 说 做 推荐 系统 刚 ， 基本上 评分 数据 。 说 ， 网站 运营 后期 收集 用户 评分 需求 。 感谢 项亮 书籍 【 参考资料 2 】 ， 提醒 ， 一类 推荐 系统 ， topN 推荐 ， 返回 推荐 列表 数据 ， 这才 常见 类型 。   评分 预测 推荐 usercf 方法   usercf 协同 过滤 推荐 感觉 教材 到处 都 ， 缺少 用户 评分 数据 不 现实 ， 用处 理解 思路 ， 用户 评分 相似性 扩展 用户 相似性 ， 找到 用户 ， 利用 社群 智慧 力量 ， 算法 爆发 出 奇特 力量 。 实际上 参考资料 1 中有 一章 做过 实验 讨论 ， 一个 运行 协同 过滤 推荐 系统 推荐 效果 。 条件 运行 ， 很多 网站 刚 用户 活跃度 ， 加上 场景 面对 item 数 不想 新闻 类 那种 ， 很 庞大 一个 可控 类 。 usercf 很难 运行 发挥 效果 。   评分 预测 usercf 方法 不 做 讨论 ， topN 推荐 会 提到 usercf 方法 ， 类似 依然 。 记住 usercf 协同 过滤 推荐 ， 推荐 ， 推荐 效果 真的 好 ， 用户 才 真的 懂 用户 ， usercf 才 勉强 冲淡 itemcf 毫无 新意 推荐 。   网站 运营 前期 usercf 方法 很 难 做 ， 时间 就要 着手 做 usercf 工作 ， 做 混入 进来 优化 推荐 ， 协同 过滤 真的 很 不错 思路 。   ibf   物品 推荐   ibf 基于 物品 推荐 原理 简单 ， 很 实用 ， 推荐 系统 采用 推荐 方式 ， ibf 引入 物品 多样性 都 不错 。   一个 简单 做法 物品 贴上标签 ， 有无 标签 ， 打上 1 0 ， 计算 距离 矩阵 ， 选取 距离 物品 即可 。   ibf 在实践中 ， 物品 描述 文本 ， 自动 生成 代表 意义 标签 ， 涉及 自然语言 ， 自然语言 ， 做出 好 效果 ， 还 。   topN 推荐 itemcf 方法   在实践中 网站 不 用户 物品 评分 数据 ， 会 用户 点击 记录 数据 购买 数据 。   参考资料   推荐 系统   Dietmar   Jannach   Markus   Zanker   著   蒋凡译   推荐 系统 实战   项亮 编著",
            "tags":"机器学习",
            "url":"articles/recommender-talk-two.html"
        },
        {
            "title":"wxpython绘图和自定义窗体",
            "text":"前言   本文 重点 讨论 wxpython 较为 底层 绘图 知识 利用 知识 建立 自定义 窗体 。   GDI   wxpython 底层 绘图 有个 GDI （ Graphics   Device   Interface ） 概念 ， 理解 通用 绘图 接口 ， 利用 通用 绘图 接口 ， 一套 绘图 方法 ， 显示器 ， 打印机 绘图 。 程序员 不用 硬件 底层 绘图 编程 。   GDI 具体来说 绘图 类 方法 。   DC   绘图 前 ， 创建 一个 设备 上下文 DC （ device   context ） ， DC 具体来说 wx . DC 类 。 中 不 wx . DC 类 ， 选择 更 设备 DC 子类 。 子类 分为 三类 ：   用于 绘制 屏幕 上下文   用于 绘制 地方 非 屏幕   用于 缓冲 一个 设备 上下文   用于 绘制 屏幕   wx . ClientDC   wx . PaintDC   EVT _ PAINT 事件 中 ， 设备 上下文 ， wx . ClientDC   。   wx . WindowDC   希望 客户 区 绘制 ， 窗体 边框 ， 标题栏 都 想 绘制 ， 。   wx . ScreenDC   希望 屏幕 上 绘制 ， 。   非 屏幕 设备 上下文   wx . MemoryDC   用于 内存 中 位图 bitmap 上 绘制   wx . MetafileDC   只 windows 下 ， 绘制 写入 文件 中   wx . PostScriptDC   跨平台 ， 写入 eps 文件 中   wx . PrinterDC   只 windows 下 ， 写入 打印机 中   缓冲 设备 上下文   wx . BufferedDC   wx . BufferedPaintDC   缓冲 一个 设备 上下文 ， 做 几个 重绘 ， 屏幕 闪烁 ， 缓冲 选择 。 绘制 屏幕 闪烁 ， 推荐   dc   =   wx . BufferedPaintDC ( )   带 颜色 线条   wxpython 里 StaticLine 不 定制 颜色 ， 请 看 类 一个 定义 颜色 线条 功能 。 例子 演示 自定义 窗体 ， OnPaint 上画 上 窗体 图形 ， Bind 好 想要 事件 动作 。   绘图 变得 越 更 定制 需求 ， 窗体 更 方法 支持 特性 。   import   wx   class   ColorStaticLine   (   wx   .   Panel   ) :   \" \" \"   带 颜色 线段   \" \" \"   def   __ init __   (     ,   parent   ,   color   =   ' black '   ,   mode   =   ' hline '   ,   * *   kwargs   ) :   super   (   ColorStaticLine   ,     )   .   __ init __   (   parent   =   parent   ,   * *   kwargs   )     .   parent   =   parent     .   color   =   color     .   mode   =   mode     .   Bind   (   wx   .   EVT _ PAINT   ,     .   OnPaint   )   def   OnPaint   (     ,   event   ) :   dc   =   wx   .   PaintDC   (     )   width   ,   height   =     .   GetClientSize   ( )   dc   .   SetPen   (   wx   .   Pen   (   wx   .   Colour   (     .   color   ) ) )       .   mode   = =   ' hline '   :   dc   .   DrawLine   (   0   ,   0   ,   width   ,   0   )   elif     .   mode   = =   ' vline '   :   dc   .   DrawLine   (   0   ,   0   ,   0   ,   height   )   这是 一个 很 简单 例子 ， 学到 很多 东西 ：   定义 重画 事件 ，   wx . PaintDC   。   绘画 区域 x , y 计算 ，   ( 0 , 0 )   面板 绘画 区域   . GetClientSize ( )   方法 。     dc . SetPen   设置 画笔 ， 这是 设置 颜色 ， dc . DrawLine 画 一条 直线 ， 绘画 过程 。   定义 一个 个性化 复用 小 面板 组件 。   TODO   ：   一个 ， 继承   wx . Panel   才行 ， 道理 暂时 还 没想 明白 。   形状 绘制   带 颜色 方块   dc . SetBrush ( wx . Brush ( ' # 1ac500 ' ) )   dc . DrawRectangle ( 130 ,   15 ,   90 ,   60 )   设置 画刷 ， 画 一个 矩形 。   绘制 圆弧   DrawArc ( x1 ,   y1 ,   x2 ,   y2 ,   xc ,   yc )   绘制 一个 圆弧 ， 起点   x1   y1   终点   x2   y2   中心点   xc   yc   弧线 逆时针 绘制 ， 设置 画 刷 ， 而会 填充 圆弧 区域 。   画 一个 圆   DrawCircle ( x ,   y ,   radius )   x   y   中心 ，   radius 半径 ， 画 一个 圆 。   画一 直线   DrawLine ( x1 ,   y1 ,   x2 ,   y2 )   起点   x1   y1   终点   x2   y2   画一 直线   画 多边形   DrawPolygon ( points )   定义 一系列 点 ， 画一 多边形 ， 起点 终点 自动 相连   画 圆角 矩形   DrawRoundedRectangle ( x ,   y ,   width ,   height ,   radius )   radius 控制 曲率   绘制 文本   DrawText ( text ,   x ,   y )   绘制 文本 ：   SetTextForeground   设置 字体 颜色     GetTextForeground   dc . SetBackgroundMode ( wx . SOLID )   默认   wx . SOLID   文本 背景 颜色 ， 设置   wx . TRANSPARENT   ， 文本 无 背景 颜色 。   dc . SetTextBackground   设置 文本 背景 颜色   dc . SetFont   设置 字体   绘图 图片   DrawBitmap   DrawIcon   设置 画笔   提到 形状 绘制 ， 填充 区域 由画 刷 控制 ， 形状 线条 颜色 ， 画笔 控制 。   SetPen   wx . Pen ( wx . Colour ,   width = 1 ,   style = wx . PENSTYLE _ SOLID )   画笔 样式   wx . PENSTYLE _ SOLID   默认 实线   wx . PENSTYLE _ DOT   小点   wx . PENSTYLE _ LONG _ DASH   虚线   wx . PENSTYLE _ SHORT _ DASH   短 虚线   wx . PENSTYLE _ DOT _ DASH   点 划线   wx . PENSTYLE _ TRANSPARENT   笔线   wx . PENSTYLE _ STIPPLE   提供 位图 笔触   wx . PENSTYLE _ BDIAGONAL _ HATCH   反 斜线   wx . PENSTYLE _ CROSSDIAG _ HATCH   XXX   线   wx . PENSTYLE _ FDIAGONAL _ HATCH   正 斜线   wx . PENSTYLE _ CROSS _ HATCH   +++   线   wx . PENSTYLE _ HORIZONTAL _ HATCH   水平线   wx . PENSTYLE _ VERTICAL _ HATCH   垂直线   设置 画刷   SetBrush ( )   wx . Brush ( colour ,   style = wx . SOLID )   画刷 样式   画刷 样式 列举如下 ：   wx . BRUSHSTYLE _ SOLID   默认 实心 填充   wx . BRUSHSTYLE _ TRANSPARENT   透明 ， 填充   wx . BRUSHSTYLE _ STIPPLE _ MASK _ OPAQUE   用位 图 做 笔触 ，   mask         blitting   monochrome     text   foreground     background   colors .   wx . BRUSHSTYLE _ STIPPLE _ MASK   用位 图 做 笔触 ，   mask         masking   areas       stipple   bitmap .   wx . BRUSHSTYLE _ STIPPLE   用位 图 做 笔触   wx . BRUSHSTYLE _ BDIAGONAL _ HATCH   反 斜线   wx . BRUSHSTYLE _ CROSSDIAG _ HATCH   XXX   线   wx . BRUSHSTYLE _ FDIAGONAL _ HATCH   正 斜线   wx . BRUSHSTYLE _ CROSS _ HATCH   +++   线   wx . BRUSHSTYLE _ HORIZONTAL _ HATCH   水平线   wx . BRUSHSTYLE _ VERTICAL _ HATCH   垂直线   自定义 画刷 图案   brush1   =   wx . Brush ( wx . Bitmap ( ' pattern1 . png ' ) )   dc . SetBrush ( brush1 )   dc . DrawRectangle ( 10 ,   15 ,   90 ,   60 )   画刷 指定 图片 其刷 图案 。   获取 绘图 区域 尺寸   width ,   height   =   . GetClientSize ( )   获取 窗体 尺寸   wxpython 内 窗体 （ 继承 Window ） 都   GetSize   方法 ， 窗体 尺寸 ：   width ,   height   =   . GetSize ( )   获取 文本 宽度 高度   w ,   h   =   . GetTextExtent ( line )   空行 写为 ：   w ,   h   =   . GetTextExtent ( ' M ' )   居中 定义   获取 绘图 区域 width ， 计算 好 想要 居中 对象 width （ w ） ， 居中 绘制 起点 x ：   start _ x   =   ( width   -   w ) / 2   居右 定义   获取 绘图 区域 width ， 计算 好 想要 居右 对象 window （ w ） , 居右 绘制 起点 x ：   start _ x   =   width   - w   dc . Clear   TODO   理解 还 很深 ， 只 用来 清空 背景 画刷 。   brush   =   wx   .   Brush   (   \" white \"   )   dc   .   SetBackground   (   brush   )   dc   .   Clear   ( )   style 管理   常数 状态 不用 说 ， 说 下 wxpython style 管理 ， 定义 常数 ， 比如说   A   =   0b1   B   =   0b10   C   =   0b100   说 定义 一个 状态 ： style   =   A   |   B   ，   执行 逻辑 操作 即可 。 想要 测试 style 包含 B 态则   style   &   B   即可 。 style 态只 占 一个 二进制位 ， 目标 style 逻辑 操作 ， 包含 返回 非 0 值 ， 返回 0 值则 不 包含 目标 style 态 。   参考资料   zetcode   wxpython 教程   wxpython 官方 参考 文档   wxpython     action   ,   Author     Harri   Pasanen     Robin   Dunn",
            "tags":"wxpython",
            "url":"articles/wxpython-drawing-custom-widget.html"
        },
        {
            "title":"websockets模块",
            "text":"简介   python websokets 相关 模块 github 得星 差不多 大概 三个 ， 一个 autobahn 上 更 偏向 twisted ， 连接 上会报 websocket   upgrade   error 错误 ， ， 一个 更 偏向 javascript websocket 风格 ， ， 不 做 点评 ， 本文 重点 关注 模块 ：   https : / / github . / aaugustin / websockets   模块 很 简单 ， 读者 asyncio 那块 异步 编程 熟悉 。   全局 websocket   启动 服务器 建立 websocket 连接 ， websocket 一个 全局变量 ， 后续 发送 监听 消息 需求 都 websocket 。   GUI 框架 继承   websockets 模块 GUI 框架 继承 更 在于 GUI 框架 asyncio 事件 循环 集成 。 目标 GUI 框架 会 讨论 ， 不 讨论 。   简单 来说 asyncio 事件 循环 添加 一个 多个 ， 目标 中 ， websoket 相关 工作 。   常驻 监听 模式   请 读者 看 代码 ， 建立 一种 常驻 监听 模式 ， 原因 websocket 服务器 会 强制 websocket 连接 关闭 ， 捕捉 异常 ， 试着 建立 一个 全局 websocket 连接 。   async   def   create _ websocket   (     ) :   \" \" \"   主 面板 初始化 新建 一个 全局 websocket   websocket 监听   : return :   \" \" \"   ws _ url   =   create _ ws _ url   ( )     True   :     :   async     websockets   .   connect   (   ws _ url   )     websocket   :   g _ var   .   websocket   =   websocket   ws _ message   =   await   websocket   .   recv   ( )   logger   .   info   (   f   ' websoket     message   { ws _ message } '   )   res   =   json   .   loads   (   ws _ message   )   #   先 听到 信息 放入 Queue 中 ， 后续 统一   g _ var   .   ws _ message _ queue   .   put _ nowait   (   res   )     websockets   .   ConnectionClosed     e   :   logger   .   error   (   ' websocket   closed   error '   )   先 请 消息 放到 一个 队列 ， 后续 再 慢慢 队列 消息 ， 特别 ， 写 逻辑 会 更 清晰 。   发送 消息   发送 消息 简单 send ， 程序 中 ， 程序 中 更 完整 表述   时间 循环 中 添加 一个 ， 事件 循环 去 目标 。   import   asyncio   eventloop   =   asyncio   .   _ event _ loop   ( )   eventloop   .   create _ task   (     (   1   ) )   async   def     (   count   ) :   websocket   =   g _ var   .   websocket     =   {   ' '   :   f   ' wanze { count } '   }   _ obj   =   json   .   dumps   (     )   await   websocket   .   send   (   _ obj   )   print   (   f   \" >   { } \"   )",
            "tags":"python好伙伴",
            "url":"articles/websockets-module.html"
        },
        {
            "title":"机器学习第四谈",
            "text":"前言   第三 谈中 谈论 典型 二 分类 ， 分类 回归 机器学习 中 都 监督 学习 。 无 监督 学习 ， 监督 学习 强化 学习 。   无 监督 学习   无 监督 学习 数据分析 必备 技能 ， 解决 监督 学习 ， 更好 数据 集 ， 一个 步骤 。   降维   聚类   常见 无 监督 学习 方法 。   监督 学习   编码器   ( autoencoder )   有名 监督 学习 例子 。   强化 学习   智能 体 接受 环境 信息 ， 某种 奖励 最大化 学习 选择 。   机器学习 通用 工作 流程   定义 ， 收集 数据 集   输入 数据 ？ 预测 ？   面对 类型 ？ 二 分类 分类 。   选择 衡量 成功 指标   模型 优化 ， 业务 目标 相关 。   评估 方法   留出 验证集   数据量 很大 采用   具体操作 训练 数据 一部分 训练集 ， 剩下 一部分 验证集 ， 训练集 训练 ， 验证集 评估 模型 好坏 。 模型 参数 调节 好 训练 好 ， 记得 训练集 从头 训练 ， 测试集 数据测试 下 模型 实际效果 。   K 折 交叉 验证   重复 K 折 验证   数据   数据 张 量化   神经网络 输入 输出 目标 都 浮点数 张量 （ 情况 下 整数 张量 ） 。 面对 声音 ， 文本 ， 图像 视频 ， 都 先 转换 张量 。   数据 标准化   数据 标准化 情况 ：   图像 0 - 255 数据 整除 缩减到   0 - 1   数据 区间   多个 特征 数据 ， 推荐 提及 z - score 标准化     =   train _ data   .     (   axis   =   0   )   train _ data   - =     std   =   train _ data   .   std   (   axis   =   0   )   train _ data   / =   std   缺失 值   神经网络 来说 ， 缺失 值 设置   0   。   特征 工程   自然语言 ， 自然语言 学到 知识 ， 选择 二元 模型 输入 数据 再 。   特征 工程 更 少 资源 更 优雅 解决问题   特征 更 少 数据 解决问题   开发 基准 更好 模型   简单 来说 先 随便 开发 一个 小 模型 ， 太高 ， 至少 随机 乱猜 准确率 高点 模型 。   模型 规模 ， 开发 拟合 模型   ：   添加 更 层   一层 变得 更大   训练 更 次数   始终 监控 训练 损失 验证 损失 ， 发现 模型 训练 次数 增加 验证 数据 上 性能 下降 ， 拟合 。   模型 正则 化 调节 超 参数   一步 最 费时间 ： 调节 模型 ， 训练 ， 验证 ， 再 调节 模型 ...   。 尝试 手段   添加 Dropout 层   Dropout 层 深度学习 之父 Hinton 学生 首次 提出 ， 原理 很 简单 ： 一层 dropout 层 训练 会 随机 舍弃 输出 特征 （ 值 变为 0 ） 。 dropout 比率 设为 0 特征 占 比例 ， 设 0.2 ~ 0.5 之间 。   添加 Dropout 层 最 最 常用 正则 化 方法 — — 正则 化指 降低 拟合 。   尝试 增加 减少 层   实践 中 会 选择 较少 层 节点 数 ， 增加 ， 增加 验证 损失 影响 变得 很小 。   尝试 L1   L2 正则 化   L1 正则 化 L2 正则 化 都 权重 正则 化 ， 这是 一种 降低 拟合 方法 ， 强制 模型 权重 只能 取较 小 值 。   尝试 超 参数   每层 单元 个数 ， 优化 器 学习 率 。   参考资料   机器学习 实战   Peter   Harrington   著   李锐   李鹏 译   机器学习 实 战线 上 教程   python 深度学习   弗朗索瓦 · 肖奈",
            "tags":"机器学习",
            "url":"articles/machine-learning-talk-four.html"
        },
        {
            "title":"机器学习第三谈",
            "text":"前言   上 一文 机器学习 第二 谈中 ， 算是 搭建 一个 简单 神经网络 ， 初步 大体 情况 。 本文 紧跟着 相关 内容 更 细致 讨论 。   relu 激活 函数   relu 激活 函数 数学 运算 公式 很 简单 ， ：   z   =   np . maximum ( z ,   0 )   运算 z 张量 relu 运算 ， 元素 ， 元素 值 大于 0 原 元素 值 ， 0 。   广播 ( broadcasting )   广播 一种 操作 ， shape 小 张量 shape 较大 张量 点对点 运算 时 ， shape 小 张量 广播 操作 ， 使 运算 上 shape 兼容 。   广播 具体操作 规则 ：   shape 小 张量 添加 新 维度 两个 张量 维度 数   shape 小 张量 新 维度 中 数据 重复 ， 相当于 原 维度 数据 ， ：   y [ 1 , j ]   =   y [ 2 , j ]   =   y [ 3 , j ]   = ...   y [ j ]   张量 点积   矩阵 乘法 张量 点积 学过 线性代数 概念 很 ， 更 高 维度 张量 点积 情况 。 张量 点积 shape 变化 弄清楚 ， 会 有用 ， 张量 运算 交给 函数 去 做 。   $ $   x   \\ cdot   y   =   z   $ $   x   shape   ( a ,   b )   y   shape   ( b , c )   输出   z   shape ( a ,   c )   高维 情况 ：   ( a ,   b ,   c   , d )   ·   ( d , )   - >   ( a , b , c )   ( a ,   b ,   c   , d )   ·   ( d ,   e )   - >   ( a , b , c ,   e )   张量 变形   ndarray 调用 reshape 方法 张量 变形 操作 ， 变形 后 元素 总 个数 ， 维度 容量 乘积 数 。   张量 导数   张量 导数 梯度 。   随机 梯度 下降 ( SGD )   小批量 SGD 过程 ：   抽取 训练样本 x 目标 y 数据 批量   x 上 运行 网络 ， 预测值 y _ pred   计算 网络 这批 数据 上 损失 ， 用于 衡量 y _ pred y 之间 距离   计算 损失 网络 参数 梯度   参数 梯度 反 方向 一点   W   - =   step   *   gradient   ， 使 这批 数据 上 损失 减小 一点 。 step 步长 学习 率 。   实践 中 优化 器 optimizer 都 采用 随机 梯度 下降 ， 优化 ， SGD 变体 ： 带动 量 SGD ， Adagrad ， RMSProp 。   二 分类   imdb 电影 评论 二 分类 ， 输出 评论 文字 ， 评论 消极 。   数据   imdb 电影 评论 数据 ， 内部 建立 一个 字典 索引 ， 整数 单词 。   一个 评论 一个 整数 序列 ， 两种 方法 整数 序列 张 量化 ：   填充 截取 ， 整数 序列 长度 ， 神经网络 第一层   Embedding   层 。   列表 - hot 编码 ， 比如说 [ 3 , 5 ] 长度 10 情况 下 编码   [ 0 , 0 , 1 , 0 , 1 , 0 , 0 , 0 , 0 , 0 ]   ， 第一层 Dense 层 ， 提到 。   验证集   model . fit     validation _ data   参数 指定 验证集 ， 验证集 训练 模型 无关 ， 一个 epoch 运算 验证 模型 效果 ， 及时发现 模型 拟合 ， 终止 训练 模型 。   训练集 切 一部分 训练集 ， 测试集 验证集 【 简单 测试集 做 验证集 ， 正式 做法 留出 验证集 法 ， 操作 ： 训练 数据 一部分 训练集 ， 剩下 一部分 验证集 ， 训练集 训练 ， 验证集 评估 模型 好坏 。 模型 参数 调节 好 训练 好 ， 记得 训练集 从头 训练 ， 测试集 数据测试 下 模型 实际效果 】 。     keras . datasets   import   imdb   import   numpy     np   (   train _ data   ,   train _ labels   ) , (   test _ data   ,   test _ labels   )   =   imdb   .   load _ data   (   num _ words   =   10000   )   y _ train   =   np   .   asarray   (   train _ labels   )   .   astype   (   ' float32 '   )   y _ test   =   np   .   asarray   (   test _ labels   )   .   astype   (   ' float32 '   )   word _ index   =   imdb . _ word _ index ( )   reversed _ word _ index   =   dict ( [ , key ]     key ,     word _ index . items ( ) )   decoded _ review   =   '   ' . join ( [ reversed _ word _ index . ( i - 3 ,   ' ' )     i     train _ data [ 0 ] ] )   decoded _ review   采用 - hot 编码 ， 值得注意 一句 话 几个 重复 单词 ， 忽略 ， 第一种 方案 填充 截取 方案 会 保留 词语 顺序 ， 自然语言 中是 很 一个 因素 。   import   numpy     np   def   verctorize _ sequences   (   sequences   ,   dimension   =   10000   ) :   results   =   np   .   zeros   ( (   len   (   sequences   ) ,   dimension   ) )     i   ,   sequence     enumerate   (   sequences   ) :     d     sequence   :   results   [   i   ,   d   ]   =   1   return   results   x _ train   =   verctorize _ sequences ( train _ data )   x _ test   =   verctorize _ sequences ( test _ data )     keras . models   import   Sequential     keras . layers   import   Dense   ,   Dropout     keras . optimizers   import   RMSprop   model   =   Sequential   ( )   model   .   add   (   Dense   (   16   ,   activation   =   ' relu '   ,   input _ shape   =   (   10000   , ) ) )   model   .   add   (   Dense   (   16   ,   activation   =   ' relu '   ) )   model   .   add   (   Dense   (   1   ,   activation   =   ' sigmoid '   ) )   model   .   summary   ( )   model . compile ( optimizer = ' rmsprop ' ,   loss = ' binary _ crossentropy ' ,   metrics = [ ' accuracy ' ] )   history   =   model . fit ( x _ train ,   y _ train ,   epochs = 4 ,   batch _ size = 512 ,   validation _ data = ( x _ test ,   y _ test ) )   history 作图   keras history 没 提供 作图 函数 ， 简单 整理 ：   import   matplotlib . pyplot     plt   def   plot _ history _ loss   (   history   ) :   acc   =   history   .   history   [   ' acc '   ]   val _ acc   =   history   .   history   [   ' val _ acc '   ]   loss   =   history   .   history   [   ' loss '   ]   val _ loss   =   history   .   history   [   ' val _ loss '   ]   epochs   =   range   (   1   ,   len   (   acc   )   +   1   )   #   \" bo \"       \" blue   dot \"   plt   .   plot   (   epochs   ,   loss   ,   ' bo '   ,   label   =   ' Training   loss '   )   #   b       \" solid   blue   line \"   plt   .   plot   (   epochs   ,   val _ loss   ,   ' b '   ,   label   =   ' Validation   loss '   )   plt   .   title   (   ' Training     validation   loss '   )   plt   .   xlabel   (   ' Epochs '   )   plt   .   ylabel   (   ' Loss '   )   plt   .   legend   ( )   plt   .   show   ( )   plot _ history _ loss   (   history   )   def   plot _ history _ acc   (   history   ) :   acc   =   history   .   history   [   ' acc '   ]   val _ acc   =   history   .   history   [   ' val _ acc '   ]   epochs   =   range   (   1   ,   len   (   acc   )   +   1   )   plt   .   plot   (   epochs   ,   acc   ,   ' bo '   ,   label   =   ' Training   acc '   )   plt   .   plot   (   epochs   ,   val _ acc   ,   ' b '   ,   label   =   ' Validation   acc '   )   plt   .   title   (   ' Training     validation   accuracy '   )   plt   .   xlabel   (   ' Epochs '   )   plt   .   ylabel   (   ' Loss '   )   plt   .   legend   ( )   plt   .   show   ( )   plot _ history _ acc   (   history   )   基本上 ephch 超过 2 , 3 拟合 ， 精度 超过 90% 。 Keras 中 相关 看 ， 就算 CNN 提升 很 ， 倒 数据 预处理 这块 二元 模型 ， 准确度 稍微 提升 一点 ， imdb 例子 ， 加上 自然语言 相关 数据 预处理 步骤 才能 更好 提升 准确度 。     验证集 绘图 很 好 观察 拟合 现象 ， 省 ， 测试集 环节 省 验证集 省 。   二 分类 一层 激活 函数 推荐   sigmoid ， 损失 函数 推荐   binary _ crossentorpy   relu 激活 Dense 层 堆叠 ， 解决 很多 。   ， rmsprop 优化 器 都 一个 好 选择 。   分类   数据 点 划分 一个 类别 ， 多个 分类 单 标签 分类 ； 数据 点 划分 多个 分类 ， 标签 分类 。   分类 上 二 分类 很 类似 ， 细节 上 差异 ：   标签 数据 张 量化   _ categorical   - hot 编码 ， 损失 函数 选择   categorical _ crossentropy   。 标签 数据 整数 标签 转成 ndarray 对象 送入 ， 选择 损失 函数   sparse _ categorical _ crossentropy   ， 接口 差异 ， 内部 算法 。   分类 神经网络 一层 N 分类 N units Dense 层 。   分类 神经网络 太小 中间层 ， 信息 瓶颈 。   回归   回归 预测 连续 值 离散 标签 。   取值 差异 很大 数据   取值 差异 很大 数据 送入 神经网络 先 标准化 。 指 标准化 正态分布 概念 ， 计算 特征值 z - score 标准分 。   特征值 减去 特征 平均值 除以 特征 标准差 。     =   train _ data . ( axis = 0 )   这是 计算 维度 0 均值 ， 或者说 计算 特征 列 均值 。 减去 操作 ：   train _ data   - =     往细 上将 还 广播 操作 ， 才能 元素 点对点 执行 减法 操作 。   这是 计算 特征 列 标准差 ：   std   =   train _ data . std ( axis = 0 )   ：   用于 测试数据 标准化 均值 标准差 都 训练 数据 上 。 工作 流程 上 ， 测试数据 上 计算 。   K 折 验证   可用 数据 少 ， K 折 验证 可靠 评估 模型 。   K 折 验证 验证 数据 分成 K 分 ， 重复 K 次 ， 每次 选取 一个 测试集 ， 训练集 。 模型 最终 验证 分数 等于 K 验证 分数 均值 。     回归 神经网络 一层 激活 函数 ， 返回 任意 内 值 。   回归 常用 损失 函数 ： mse 损失 函数 。 MSE （   squared   error ）   均方 误差 损失 函数 。   回归 监控 指标 ： 平均 绝对误差 。 MAS   （   absolute   error ） 预测值 目标值 之差 绝对值 。   可用 训练 数据 少 ， 隐藏 层 少 小型 网络 ， 拟合   参考资料   机器学习 实战   Peter   Harrington   著   李锐   李鹏 译   机器学习 实 战线 上 教程   python 深度学习   弗朗索瓦 · 肖奈     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"机器学习",
            "url":"articles/machine-learning-talk-three.html"
        },
        {
            "title":"机器学习第二谈之初识多层神经网络",
            "text":"前言   本文 先用 tensorflow 单层 神经网络 mnist ， keras 写 一个 两层 神经网络 解决 mnist 。 试着 keras 编写 一个 简单 深度学习 模型 ， 多层 神经网络 解决 mnist 。   本文 代码 参考 keras examples 代码 库 ， 本文 输入 数据 预处理 统一化 过程 。   数据 预处理   利用 keras 下载 mnist 相关 数据 预处理 操作 。     keras . datasets   import   mnist   (   train _ images   ,   train _ labels   ) ,   (   test _ images   ,   test _ labels   )   =   mnist   .   load _ data   ( )   train _ images . shape   ( 60000 ,   28 ,   28 )   train _ labels . shape   ( 60000 , )   train _ images   shape 第一 维度 60000 ， 6 万个 图片 ， 标签 第一 维度 6 万 。   train _ images   =   train _ images   .   reshape   ( (   60000   ,   784   ) )   train _ images   =   train _ images   .   astype   (   ' float32 '   )   train _ images   =   train _ images   /   255   第一步 第二 维 第三 维 数据 合并 一维 。   第二步 转换 ndarray dtype 数据类型 。   第三部 数据 0 - 255   归一化   0 -   1   。   类似 test _ images ， 略过 。   标签 数据 - hot 编码 ：     keras . utils   import   _ categorical   train _ labels   =   _ categorical   (   train _ labels   )   train _ labels   [   0   ]   array   ( [   0 .   ,   0 .   ,   0 .   ,   0 .   ,   0 .   ,   1 .   ,   0 .   ,   0 .   ,   0 .   ,   0 .   ] ,   dtype   =   float32   )   - hot 编码 解释 略过 ， 地方 会 讨论 。   感知器   感知器 一层 或者说 单层 神经网络 。 感知器 类似 逻辑 回归 模型 ， 只能 做 线性 分类 。   单层 神经网络 编写 Keras 简单 ， tensorflow 写 代码 。 推荐 tensorflow 写 一个 简单 单层 神经网络 。 Keras 基于 tensorflow 更 高层 模块 ， 理解 Keras 做 工作 很 ， 理解 单层 神经网络 数学 运算 。   x   =   tf   .   placeholder   (   tf   .   float32   ,   [   None   ,   784   ] )   W   =   tf   .   Variable   (   tf   .   zeros   ( [   784   ,   10   ] ) )   b   =   tf   .   Variable   (   tf   .   zeros   ( [   10   ] ) )   y _ true   =   tf   .   placeholder   (   tf   .   float32   ,   [   None   ,   10   ] )   y _ logits   =   tf   .   matmul   (   x   ,   W   )   +   b   y _ pred   =   tf   .   nn   .   softmax   (   y _ logits   )   输入 参数 x 第二 维度 784 权重 矩阵 第一 维度 784 ， 神经网络 权重 矩阵 W shape ( 前 一层 节点 数 ,   后 一层 节点 数 )   。 输入 参数 矩阵 x 权重 矩阵 W 矩阵 乘法 【 张量 点积 ， np . dot 运算 】 第二 维度 等于 权重 矩阵 第二 维度 矩阵 。 输出 值 数据 送入   y _ logits 。   tf . matmul   矩阵 乘法 运算 。     tf . nn . softmax   激活 函数 ， softmax 激活 函数 讨论 略过 。   交叉熵   tensorflow 提供 交叉熵 计算 函数 ， 先用 更 原始 计算公式 来看 （ 参考   篇文章   ） ：   cross _ entropy   =   -   tf   .   reduce _ sum   (   y _ true   *   tf   .   log   (   y _ pred   ) )   大体 过程 所示 ：   $ $   -   \\ sum   ( 1 , 0 , 0 )   *   log ( ( 0.5 , 0.4 , 0.1 ) )   =   - ( 1 * log0.5   +   0 * log0.4   +   0 * log0.1 )   =   0.301   $ $   交叉熵 越大 预测值 越 偏离 真实 值 ， 交叉熵 越小 预测值 越 接近 真实 值 。   train _ step   =   tf   .   train   .   GradientDescentOptimizer   (   0.01   )   .   minimize   (   cross _ entropy   )   #   0.01 学习 速率   tensorflow 自带 交叉熵 方法   推荐 tensorflow 自带 softmax + 交叉熵 方法 计算 交叉熵 ， 参考   篇文章   ， 说 计算 会 更 稳定 些 。   代码 整理 ：   import   tensorflow     tf     keras . datasets   import   mnist   (   train _ images   ,   train _ labels   ) ,   (   test _ images   ,   test _ labels   )   =   mnist   .   load _ data   ( )   train _ images   =   train _ images   .   reshape   ( (   60000   ,   784   ) )   train _ images   =   train _ images   .   astype   (   ' float32 '   )   train _ images   =   train _ images   /   255   test _ images   =   test _ images   .   reshape   ( (   10000   ,   784   ) )   test _ images   =   test _ images   .   astype   (   ' float32 '   )   test _ images   =   test _ images   /   255     keras . utils   import   _ categorical   train _ labels   =   _ categorical   (   train _ labels   )   test _ labels   =   _ categorical   (   test _ labels   )   x   =   tf   .   placeholder   (   tf   .   float32   ,   [   None   ,   784   ] )   W   =   tf   .   Variable   (   tf   .   zeros   ( [   784   ,   10   ] ) )   b   =   tf   .   Variable   (   tf   .   zeros   ( [   10   ] ) )   y _ true   =   tf   .   placeholder   (   tf   .   float32   ,   [   None   ,   10   ] )   y _ logits   =   tf   .   matmul   (   x   ,   W   )   +   b   y _ pred   =   tf   .   nn   .   softmax   (   y _ logits   )   cross _ entropy   =   tf   .   reduce _ sum   (   tf   .   nn   .   softmax _ cross _ entropy _ _ logits   (   logits   =   y _ logits   ,   labels   =   y _ true   ) )   train _ step   =   tf   .   train   .   GradientDescentOptimizer   (   0.01   )   .   minimize   (   cross _ entropy   )   好 ， 例子 收尾 阶段 ：   correct _ mask   =   tf   .   equal   (   tf   .   argmax   (   y _ pred   ,   1   ) ,   tf   .   argmax   (   y _ true   ,   1   ) )   accuracy   =   tf   .   reduce _   (   tf   .   cast   (   correct _ mask   ,   tf   .   float32   ) )     tf   .   Session   ( )     sess   :   #   Train   sess   .   run   (   tf   .   global _ variables _ initializer   ( ) )   count   =   0     _     range   (   128   ) :   batch _ xs   =   train _ images   [   count   *   128   :   128   *   (   count   +   1   ) ]   batch _ ys   =   train _ labels   [   count   *   128   :   128   *   (   count   +   1   ) ]   sess   .   run   (   train _ step   ,   feed _ dict   =   {   x   :   batch _ xs   ,   y _ true   :   batch _ ys   } )   count   + =   1     count   %   10   = =   0   :   ans   =   sess   .   run   (   accuracy   ,   feed _ dict   =   {   x   :   test _ images   ,   y _ true   :   test _ labels   } )   print   (   \" Accuracy :   { : . 4 } % \"   .   format   (   ans   *   100   ) )   #   LAST   ans   =   sess   .   run   (   accuracy   ,   feed _ dict   =   {   x   :   test _ images   ,   y _ true   :   test _ labels   } )   print   (   \" Accuracy :   { : . 4 } % \"   .   format   (   ans   *   100   ) )   tf . argmax   函数 请 看 例子 。 不感兴趣 略过 ， 作用 标签 解释 ， 重点 。   import   tensorflow     tf   sess   =   tf   .   Session   ( )   m   =   sess   .   run   (   tf   .   truncated _ normal   ( (   5   ,   10   ) ,   stddev   =   0.1   )   )   - - - - -   array   ( [ [   0.0919205   ,   0.06030607   ,   0.01196606   ,   0.03031359   ,   -   0.13546242   ,   -   0.12748787   ,   -   0.09680127   ,   0.12220833   ,   0.15264732   ,   0.05449662   ] ,   [   0.01277541   ,   -   0.00535311   ,   0.03589706   ,   0.01658093   ,   -   0.16726552   ,   -   0.06979545   ,   -   0.14876817   ,   -   0.03735523   ,   -   0.0439501   ,   0.15896702   ] ,   [   -   0.05869294   ,   -   0.14986654   ,   -   0.17551927   ,   0.08360171   ,   -   0.00648978   ,   -   0.03274798   ,   -   0.05770732   ,   0.01505487   ,   0.13726853   ,   -   0.01670119   ] ,   [   -   0.02666636   ,   -   0.05316785   ,   -   0.05433881   ,   -   0.02210794   ,   0.01175172   ,   -   0.0674843   ,   -   0.06402522   ,   0.00812987   ,   -   0.17738222   ,   0.01375954   ] ,   [   -   0.01734987   ,   0.01096244   ,   -   0.19889738   ,   0.08350741   ,   -   0.00222254   ,   0.05094135   ,   0.06777989   ,   -   0.01986633   ,   -   0.1863249   ,   -   0.04648132   ] ] ,   dtype   =   float32   )   - - -   col _ max   =   sess   .   run   (   tf   .   argmax   (   m   ,   0   )   )   - - - -   array   ( [   0   ,   0   ,   1   ,   2   ,   3   ,   4   ,   4   ,   0   ,   0   ,   1   ] ,   dtype   =   int64   )   - - -   row _ max   =   sess   .   run   (   tf   .   argmax   (   m   ,   1   )   )   - - -   array   ( [   8   ,   9   ,   8   ,   9   ,   3   ] ,   dtype   =   int64   )   - - -     tf . argmax   第二个 参数 1 ， 返回 一行 数值 index 索引 值 。   tf . argmax ( y _ pred ,   1 )   返回 索引 值 本例 中 比较简单 ， 预测 数字 值 。   tf . reduce _   维度 元素 相加 求 平均值   例子 调用 tensorflow 作业 流程 ， 启动 运算 数据流 。 评估 测试数据 精度 。 重点 。 单层 神经网络 来说 mnist 例子 很难 超过 90% 。   多层 感知器   多层 感知器 实际上 两层 全 连接 神经网络 。 理论 上 两层 神经网络 无限 逼近 任意 连续 函数 。 Keras 一个 多层 感知器 。   试着 单层 神经网络 Keras 写 一遍 ， 数据 过程 ， 都 。   数据   import   tensorflow     tf     keras . datasets   import   mnist   (   train _ images   ,   train _ labels   ) ,   (   test _ images   ,   test _ labels   )   =   mnist   .   load _ data   ( )   train _ images   =   train _ images   .   reshape   ( (   60000   ,   784   ) )   train _ images   =   train _ images   .   astype   (   ' float32 '   )   train _ images   =   train _ images   /   255   test _ images   =   test _ images   .   reshape   ( (   10000   ,   784   ) )   test _ images   =   test _ images   .   astype   (   ' float32 '   )   test _ images   =   test _ images   /   255     keras . utils   import   _ categorical   train _ labels   =   _ categorical   (   train _ labels   )   test _ labels   =   _ categorical   (   test _ labels   )   建模     keras . models   import   Sequential     keras . layers   import   Dense   model   =   Sequential   ( )   model   .   add   (   Dense   (   10   ,   activation   =   ' softmax '   ,   input _ shape   =   (   784   , ) ) )   model   .   compile   (   optimizer   =   ' rmsprop '   ,   loss   =   ' categorical _ crossentropy '   ,   metrics   =   [   ' accuracy '   ] )   model   .   fit   (   train _ images   ,   train _ labels   ,   epochs   =   5   ,   batch _ size   =   128   )   Epoch   1 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   1s   13us / step   -   loss :   0.6063   -   acc :   0.8482   Epoch   2 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   1s   12us / step   -   loss :   0.3316   -   acc :   0.9083   Epoch   3 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   1s   12us / step   -   loss :   0.3025   -   acc :   0.9159   Epoch   4 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   1s   11us / step   -   loss :   0.2889   -   acc :   0.9194   Epoch   5 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   1s   12us / step   -   loss :   0.2806   -   acc :   0.9219   score   =   model . evaluate ( test _ images ,   test _ labels ,   verbose = 0 )   print ( ' Test   loss : ' ,   score [ 0 ] )   print ( ' Test   accuracy : ' ,   score [ 1 ] )   Test   loss :   0.2757013351589441   Test   accuracy :   0.9232   大概 差不多 。 例子 运行 几次 epoch ， 单层 神经网络 再 优化 只能 92% 。   建模 过程 稍微 加 一行 ， 构建 一个 多层 感知器 。 多层 神经网络 激活 函数 选 relu 会 更好 。 多加 一层 ， 输出 节点 数为 10 神经网络 。     keras . models   import   Sequential     keras . layers   import   Dense   model   =   Sequential   ( )   model   .   add   (   Dense   (   512   ,   activation   =   ' relu '   ,   input _ shape   =   (   784   , ) ) )   model   .   add   (   Dense   (   10   ,   activation   =   ' softmax '   ) )   model   .   compile   (   optimizer   =   ' rmsprop '   ,   loss   =   ' categorical _ crossentropy '   ,   metrics   =   [   ' accuracy '   ] )   model   .   fit   (   train _ images   ,   train _ labels   ,   epochs   =   5   ,   batch _ size   =   128   )   Epoch   1 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   5s   85us / step   -   loss :   0.2569   -   acc :   0.9258   Epoch   2 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   5s   84us / step   -   loss :   0.1037   -   acc :   0.9688   Epoch   3 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   5s   87us / step   -   loss :   0.0685   -   acc :   0.9790   Epoch   4 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   5s   85us / step   -   loss :   0.0508   -   acc :   0.9848   Epoch   5 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   5s   87us / step   -   loss :   0.0368   -   acc :   0.9888   Test   loss :   0.07560657636675751   Test   accuracy :   0.9777   精度 97% 。   Keras 代码 库 examples 解决 mnist 多层 感知器 ， 讨论 代码 稍微 调整 下 ， 建模 过程 ：     keras . models   import   Sequential     keras . layers   import   Dense   ,   Dropout     keras . optimizers   import   RMSprop   model   =   Sequential   ( )   model   .   add   (   Dense   (   512   ,   activation   =   ' relu '   ,   input _ shape   =   (   784   , ) ) )   model   .   add   (   Dense   (   512   ,   activation   =   ' relu '   ) )   model   .   add   (   Dense   (   10   ,   activation   =   ' softmax '   ) )   model   .   summary   ( )   区别 加 一层 神经网络 。   Epoch   1 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   8s   139us / step   -   loss :   0.2197   -   acc :   0.9320   Epoch   2 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   8s   140us / step   -   loss :   0.0815   -   acc :   0.9750   Epoch   3 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   9s   145us / step   -   loss :   0.0530   -   acc :   0.9836   Epoch   4 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   9s   151us / step   -   loss :   0.0374   -   acc :   0.9886   Epoch   5 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   9s   151us / step   -   loss :   0.0302   -   acc :   0.9899   Test   loss :   0.08149926771794035   Test   accuracy :   0.9808   examples 还 新 Dropout 层 ， 一种 拟合 技术 ， 加上 会 ：     keras . models   import   Sequential     keras . layers   import   Dense   ,   Dropout     keras . optimizers   import   RMSprop   model   =   Sequential   ( )   model   .   add   (   Dense   (   512   ,   activation   =   ' relu '   ,   input _ shape   =   (   784   , ) ) )   model   .   add   (   Dropout   (   0.2   ) )   model   .   add   (   Dense   (   512   ,   activation   =   ' relu '   ) )   model   .   add   (   Dropout   (   0.2   ) )   model   .   add   (   Dense   (   10   ,   activation   =   ' softmax '   ) )   model   .   summary   ( )   Epoch   1 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   10s   162us / step   -   loss :   0.2439   -   acc :   0.9253   Epoch   2 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   10s   169us / step   -   loss :   0.1031   -   acc :   0.9688   Epoch   3 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   9s   151us / step   -   loss :   0.0760   -   acc :   0.9771   Epoch   4 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   10s   165us / step   -   loss :   0.0604   -   acc :   0.9817   Epoch   5 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   9s   155us / step   -   loss :   0.0512   -   acc :   0.9846   Test   loss :   0.07319687194137806   Test   accuracy :   0.9814   区别 不 大 ， 至少 mnist 来说 提升 新 一层 神经网络 ， Dropout 层 没 区别 。   多层 神经网络 深度学习   卷积 神经网络 相关 讨论 补 上 ， 来看 下 Keras 代码 库 examples 介绍 CNN ， 深度学习 神经网络 解决 mnist 效果 。 理解 。   import   tensorflow     tf     keras . datasets   import   mnist   (   train _ images   ,   train _ labels   ) ,   (   test _ images   ,   test _ labels   )   =   mnist   .   load _ data   ( )     keras   import   backend     K     K   .   image _ data _ format   ( )   = =   ' channels _ '   :   train _ images   =   train _ images   .   reshape   (   60000   ,   1   ,   28   ,   28   )   test _ images   =   test _ images   .   reshape   (   10000   ,   1   ,   28   ,   28   )   input _ shape   =   (   1   ,   28   ,   28   )     :   train _ images   =   train _ images   .   reshape   (   60000   ,   28   ,   28   ,   1   )   test _ images   =   test _ images   .   reshape   (   10000   ,   28   ,   28   ,   1   )   input _ shape   =   (   28   ,   28   ,   1   )   涉及 backend 图形 维度 选择 ， 。   train _ images   =   train _ images   .   astype   (   ' float32 '   )   train _ images   =   train _ images   /   255   test _ images   =   test _ images   .   astype   (   ' float32 '   )   test _ images   =   test _ images   /   255     keras . utils   import   _ categorical   train _ labels   =   _ categorical   (   train _ labels   )   test _ labels   =   _ categorical   (   test _ labels   )   数据 预处理 。     keras . models   import   Sequential     keras . layers   import   Dense   ,   Dropout   ,   Flatten     keras . layers   import   Conv2D   ,   MaxPooling2D     keras . optimizers   import   Adadelta   model   =   Sequential   ( )   model   .   add   (   Conv2D   (   32   ,   activation   =   ' relu '   ,   input _ shape   =   input _ shape   ,   kernel _ size   =   (   3   ,   3   ) ) )   model   .   add   (   Conv2D   (   64   ,   (   3   ,   3   ) ,   activation   =   ' relu '   ) )   model   .   add   (   MaxPooling2D   (   pool _ size   =   (   2   ,   2   ) ) )   model   .   add   (   Dropout   (   0.25   ) )   model   .   add   (   Flatten   ( ) )   model   .   add   (   Dense   (   128   ,   activation   =   ' relu '   ) )   model   .   add   (   Dropout   (   0.5   ) )   model   .   add   (   Dense   (   10   ,   activation   =   ' softmax '   ) )   model   .   summary   ( )   例子 跑 慢 。 Dropout 不算 一层 ， Flatten 估计 不算 一层 ， 例子 大概 5 层 。   Epoch   1 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   ETA :   0s   -   loss :   0.2683   -   acc :   0.917   -   119s   2ms / step   -   loss :   0.2683   -   acc :   0.9173   Epoch   2 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   120s   2ms / step   -   loss :   0.0891   -   acc :   0.9734   Epoch   3 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   115s   2ms / step   -   loss :   0.0655   -   acc :   0.9804   Epoch   4 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   111s   2ms / step   -   loss :   0.0555   -   acc :   0.9833   Epoch   5 / 5   60000 / 60000   [ = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = ]   -   114s   2ms / step   -   loss :   0.0466   -   acc :   0.9856   Test   loss :   0.031076731445921907   Test   accuracy :   0.9898   例子 报道 说 epochs = 12 精度 99% 。   公平 见 ， 多层 感知器 CNN 神经网络 两个 例子 都 epochs = 12 再 跑 对比 。   多层 感知器 ：   Test   loss :   0.08958661408673184   Test   accuracy :   0.9821   跑 5 次 区别 。   CNN 看 PC   CPU 基本上 跑 满 ， GPU 没 ， tensorflow 换成 tensorflow - gpu   【 PS ： pip 安装 tensorflow ， 再 安装 tensorflow - gpu 即可 ， tensorflow 包 删 。 】 再 看 下 。 发现 显卡 写 Intel   UHD ， NAVID 才能 开启 gpu ， 算了 。   CNN 神经网络 ：   Test   loss :   0.028602463609369078   Test   accuracy :   0.992   精度 提升 99% ， CNN 训练 几次 后续 效果 还 提升 ， 小看 1% 提升 ！   保存 模型   训练 费时 ， 保存 训练 好 模型 ？ keras 文档 FAQ ， 算是 很 经典 一个 。   model . save ( ' _ model . h5 ' )   保存 数据 ：   模型 结构 ， 创造 模型   模型 训练 权重 数据   训练 损失 优化 器 配置   优化 器 状态 ， 上 训练   下次 模型 所示 ：   import   tensorflow     tf     keras . datasets   import   mnist   (   train _ images   ,   train _ labels   ) ,   (   test _ images   ,   test _ labels   )   =   mnist   .   load _ data   ( )     keras   import   backend     K     K   .   image _ data _ format   ( )   = =   ' channels _ '   :   test _ images   =   test _ images   .   reshape   (   10000   ,   1   ,   28   ,   28   )   input _ shape   =   (   1   ,   28   ,   28   )     :   test _ images   =   test _ images   .   reshape   (   10000   ,   28   ,   28   ,   1   )   input _ shape   =   (   28   ,   28   ,   1   )   test _ images   =   test _ images   .   astype   (   ' float32 '   )   test _ images   =   test _ images   /   255     keras . utils   import   _ categorical   test _ labels   =   _ categorical   (   test _ labels   )     keras . models   import   load _ model   model   =   load _ model   (   ' cnn _ _ mnist _ model . h5 '   )   score   =   model . evaluate ( test _ images ,   test _ labels ,   verbose = 0 )   print ( ' Test   loss : ' ,   score [ 0 ] )   print ( ' Test   accuracy : ' ,   score [ 1 ] )   Test   loss :   0.028602463609369078   Test   accuracy :   0.992   参考资料   机器学习 实战   Peter   Harrington   著   李锐   李鹏 译   机器学习 实 战线 上 教程   python 深度学习   弗朗索瓦 · 肖奈   deep   learning   中文版   机器学习   周志华 著   文章 介绍 神经网络 写 很 好     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"机器学习",
            "url":"articles/machine-learning-talk-two.html"
        },
        {
            "title":"tensorflow模块",
            "text":"前言   文档 记录 tensorflow 模块 学习 中 东西 。   tensorflow 通用 数据流 计算 图 框架 ， 都 会 写 上 一个 简单   world 例子 简单 目标 框架 ：   h   =   tf   .   constant   (   ' '   )   w   =   tf   .   constant   (   '   world . '   )   hw   =   h   +   w     tf   .   Session   ( )     s   :   res   =   s   .   run   (   hw   )   print   (   res   )   tf . constant   一个 常量 ， 简单 理解 相当于 一个 输出 数值 节点 。 hw 两个 常量 相加 ， 相当于 连接 两个 节点 执行 相加 操作 。 tensorflow 有个 计算 图 概念 ， 计算 图中 ， 计算 session 回话   run   才 会 执行 ：     tf   .   Session   ( )     sess   :       神经 网络结构   神经元 中 数据 ， 输入 ， 常数 ， 其后 神经元 数据 数据 流动 中 生成 。   神经元 连接 权重 矩阵 ， 节点 神经元 中 数据 值   =   前 输入 层   *   权重 矩阵 ， 数学公式 表达 更好 ：   $ $   data   =   \\ begin { bmatrix }   x1   &   x2   &   x3   \\ end { bmatrix }   \\ begin { bmatrix }   w1 \\ \\   w2 \\ \\   w3   \\ end { bmatrix }   $ $   第二个 神经元 权重 第二列 展开 ，   一层 一层 之间 连接 矩阵 乘法 ，   a   =   tf . matmul ( x ,   w1 )   y   =   tf . matmul ( a ,   w2 )   前 一层 输出 后 一层 第一个 输入 参数 。   变量     tf . Variable   定义 一个 变量 ， 变量 相当于 一个 节点 其内 数据 值 变动 。   tf . assign   手动 变量 赋值 。   placeholder   tf . placeholder   占位 节点 ， 常量 相比 节点 暂时 还 数据 ， session   启动   feed _ dict   数据 塞进去 。 外面 数据流 输入 输入 placeholder 。   tf . placeholder ( dtype ,   [ None ,   dim ] )   None 不 输入 数据 ， dim 指定 输入 数据 个数 。   初始 变量     tf   .   Session   ( )     sess   :   init _ op   =   tf   .   global _ variables _ initializer   ( )   sess   .   run   (   init _ op   )     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"机器学习",
            "url":"articles/tensorflow-module.html"
        },
        {
            "title":"机器学习第一谈",
            "text":"前言   很 火热 深度学习 其本质 机器学习 中 厉害 一种 技术 ， 更好 理解 这门 技术 这门 技术 ， 都 好 机器学习 这门 学科 基本功 。 分类 机器学习 包括 传统 机器学习 讨论 外 ， 还 包括 神经网络 深度学习 ， 相关 模块 keras ， tensorflow ， 还会 包括 matplotlib numpy 相关 模块 讨论 。   这门 技术 不 人工智能 很 务实 态度 ， 很 确信 深度学习 技术 未来 人工智能 技术 基石 ， 更 确切 来说 类似 砖木 ， 机器学习 发展 程度 来说 ， 还 远远 不足以 称之为 人工智能 。 机器学习 发展 状态 ： 人工智能 领域 最 核心 ， 提出 勇气 都 ， 更 说 解决 。   接下来 重点 学习 理解 深度学习 上 ， 传统 机器学习 神经网络 会 谈论 更好 理解 深度学习 相关 概念 。   机器学习 做   讨论 机器学习 ， 程序员 一种 思维 方式 ， 机器学习 常见 算法 ， 算法 ， 计算机 做 ， 数据 ， 数据 含义 都 程序员 去 定义 。 机器学习 机器 去 学习 ， 去 学习 现实 世界 事物 运行 变化 规律 ， 机器学习 算法 能力 很 有限 ， 学科 发力 方向 ， ， 程序员 更 不 去 去 分析 研究 对象 数据 规律 规则 ， 讲 数据 答案 （ 标签 ） 送给 机器学习 算法 ， 机器 出 研究 对象 规律 规则 。   看上去 很 神奇 ， 数据 转换 工作 ， 更 工程 上 东西 。   传统 机器学习   传统 机器学习 应用领域 ：   电子邮件 垃圾邮件 过滤 算法   搜索引擎 点击 记录 优化 下次 搜索   网上 点击 查看 买 东西 ， 网站 记录 活动 ， 更好 地为 推荐 商品 ， 推荐 优惠券 。   手写 数字 识别   金融 活动 ， 各大 银行 都 上线 机器学习 算法 判断 贷款 资格 贷款额度   深度学习 应用领域   深度学习 应用领域 ：   向量 数据 映射 向量 数据   预测性 医疗保健   分析 患者 医疗保健 数据   产品质量 控制   件产品 制成品 相关 一组 属性 映射 产品 明年 会 坏掉 概率   图像 数据 映射 向量 数据   医生 助手   医学影像 幻灯片 映射 肿瘤 判断   自动 驾驶 汽车   车载 摄像机 视频 画面 映射 方向盘 角度 控制 命令   饮食 助手   食物 照片 映射 食物 卡路里 数量   年龄 预测   拍照片 映射 人 年龄   时间 序列 数据 映射 向量 数据   天气预报   多个 地点 天气 数据 时间 序列 映射 某地 下周 天气 数据   脑机 接口   脑磁图 MEG 数据 时间 序列 映射 计算机 命令   定向   网站 上 用户 交互 时间 序列 映射 用户 购买 某件 商品 概率   文本 映射 文本   智能 回复   电子邮件 映射 单行 回复   回答   常识 映射 答案   生成 摘要   一篇 文章 映射 文章 摘要   图像 映射 文本   图像 描述   图像 映射 描述 图像 内容 简短   文本 映射 图像   图像 生成   简短 文字 映射 这段 描述 相匹配 图像   图像 映射 图像   超 分辨率   缩小 图像 映射 图像 更 高分辨率 版本   理解 神经网络   学习 深度学习 不 神经 生物学 ， 传统 机器学习 算法 不 面面俱到 ， 神经网络 基本概念 矩阵 ， 升级 ， 张量 运算 。   来看 Keras 30s 上手 例子 ：     keras . models   import   Sequential   model   =   Sequential   ( )     keras . layers   import   Dense   model   .   add   (   Dense   (   units   =   64   ,   activation   =   ' relu '   ,   input _ dim   =   100   ) )   model   .   add   (   Dense   (   units   =   10   ,   activation   =   ' softmax '   ) )   model   .   compile   (   loss   =   ' categorical _ crossentropy '   ,   optimizer   =   ' sgd '   ,   metrics   =   [   ' accuracy '   ] )   建立 一个 模型 ， 最 常用 模型   Sequential   顺序 模型 。 最 常用 模型 。   神经网络 发展 大脑 无太多 关系 ， 早期 发展 吸收 灵感 ， 推荐 神经网络 分层 学习 层级 学习 。   看   layer   层 ， 深度学习 模型 层 堆叠 。   Dense   常说 全 连接 层 。 全 连接 层 大概 ：   全 连接 层   本层 节点 都 后 一层 节点 相连 。   Dense units 参数 本层 节点 数 ， 一个 ， 本层 输出 维度 数 。   一层 神经网络 发生   output   =   relu ( dot ( W ,   input )   +   b )   数学 运算 。     relu     Dense   指定   activation   激活 函数 。 去 想 神经网络 一套 不 有助于 理解 ， 反倒 数学 思维 更 理解 。 一层 神经网络 一层 数学 运算 层 ， 一个 数据 集 某种 线性变换 ， 输出 一个 数据 集 。 如同   弗朗索瓦 · 肖奈所 打比方 描述 ：   一张 纸 揉 皱巴巴 ， 一系列 步骤 几何变换 ， 一步 都 简单 几何变换 ， 最终 展平 动作 ， 张纸 写 字 。 深度学习 模型 解开 高纬 数据 流形 数学 机器 。   弗朗索瓦 · 肖奈 一个 很 好 ， 很 形象 。 深度学习 网络 看做 多级 信息 蒸馏 操作 ， 信息 穿越 过滤器 ， 纯度 越来越 高 （ 越来越 大 ） 。   公式 中   W   一层 权重 ， 深度学习 训练 过程 找到 更好 权重 参数 ， 深度学习 神经网络 更好 。   model . fit ( x _ train ,   y _ train ,   epochs = 5 ,   batch _ size = 32 )   训练 过程   x _ train   数据 ，   y _ train   标签 数据 ，   epoch   迭代 次数 ， 训练 数据 重复 训练 次数 。 batch _ size   训练 含 样本数 ， 参考   网页   ， 样本 训练 完 开销 太 大 ， 训练 就算 损失 函数 震荡 大 ， 通用 做法 ：   mini - batch   gradient   decent   ， 小批量 数据 梯度 下降 。 batch _ size   训练 所含 样本数 ， 1 epoch 训练 数据 都 训练 完 训练 次数 总 样本数 除以 batch _ size 。   model . compile ( loss = ' categorical _ crossentropy ' ,   optimizer = ' sgd ' ,   metrics = [ ' accuracy ' ] )   模型 compile 指定 损失 函数 loss ， 损失 函数 用来 衡量 模型 预测值 真实 目标值 之间 距离 ， 简单 来说 损失 函数 模型 打分 ， 评价 模型 效果 好坏 。   打分 对模型 权重 参数 微调 反向 传播 算法 。   反向 传播 算法   反向 传播 算法 （ BP 算法   backpropagation ） 。 BP 算法 先 输入 示例 提供 输入 层 神经元 ， 信号 向前 传递 ， 输出 层 ； 计算 输出 层 误差 ， 再 误差 逆向 传播 直 隐含 层 。 隐含 层 神经元 误差 连接 权重 阈值 调整 过程 。 改 迭代 过程 循环 ， 条件 后 停止 。   反向 传播 算法 调节 优化 函数 或者说 优化 器   optimizer 。   理解 张量   标量   向量   矩阵   都 接触 ， 张量 更 维度 数据结构 。 再 谈到 张量 发现 图形 几何 上 理解 东西 丢掉 ， 简单 张量 理解 多个 维度 数据结构 。 python 程序 中 张量 看做 numpy 模块 中 ndarray 对象 这是 。   张量 shape   看 下 矩阵 情况 ：   ( 1 , 3 ）   这是 一个 行 矢量 ，     :   [ 1 , 2 , 3 ]   ( 3 , 1 )   这是 一个 列 矢量 ，   ：   $ $   \\ begin { bmatrix }   1 \\ \\   2 \\ \\   3   \\ end { bmatrix }   $ $   ( 2 , 3 )   两行 三列   小 维度 情况 带上 几何 思维 ， 张量 比如说   shape   ( 3 , 3 , 2 , 3 )   ， 理解 张量 数据 四个 维度 ， 第一个 维度 数据 容量 3 ， 第二个 维度 数据 容量 3 。   ndarray 对象 索引 语法   ndarray [ x ,   y   ,   z ]   ， 一个 维度 支持   ndarray [ x1 : x2 ,   :   ,   : ]   start : end   语法 。 维度 理解 ， 第一个 维度 选择   x1 : x2   之间 ， 第二个 维度 选择 ， 第三个 维度 选择 张量 数据 。 谈及 张量 ， 空间 关系 很 紧密 数据结构 ， 发现 脱离 几何 思维 ， 单纯 讨论 维度 会 更 些 。   张量 dtype   numpy   ndarray 对象 ， 一个   dtype 参数   。 目标 张量 数据结构 包含 数据类型 。 张量 都 包含 数值 型 数据 ， 会 char 型 张量 ， 字符串 型 张量 。 单个 字符 ， 处于 字符 编码 ， 就算 纯 英文 单个 字符 ， 通用 做法 建立 字典 ， 转 成 数值 型 张量 ， 估计 计算速度 一个 点 。   样本 维度   深度学习 领域 ， 第一个 维度 用作 样本 维度 ， MNIST 例子 中 shape   ( 60000 , 28 , 28 ) ， 第一个 维度 60000 样本 。   说 batch _ size   训练 所含 样本数 ， 训练 模型 送入 batch 数据 ：   batch _ size   =   128   batch   =   train _ images [ : 128 ]   #   第一个 批次   batch   =   train _ iamges [ 128 : 256 ]   #   第二个 批次   ...   参考资料   机器学习 实战   Peter   Harrington   著   李锐   李鹏 译   机器学习 实 战线 上 教程   python 深度学习   弗朗索瓦 · 肖奈   deep   learning   中文版   机器学习   周志华 著     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"机器学习",
            "url":"articles/machine-learning-talk-one.html"
        },
        {
            "title":"wxpython第二谈",
            "text":"动态 组件 切换   boxsizer 挂载 面板 ， 隐藏 面板 ， 显示 初始 想要 显示 panel 。 Add ,   Show   Hide   方法 操作 ， Layout ， 这是 基本功 。   值得一提的是 ， panel Layout ， 多个 panel 切换 父 panel 子 panel size 都 ， 子 panel size 大小 ， 动态 切换 更好 效果 ， 调用 父 panel Layout 。   子 Panel 重写   参数 变化 ， 子 panel 重写 ， 推荐 box Replace 方法 ：   _ panel   =     .   category _ sp2 _ panel   _ panel   =   CategorySPInnerPanel   (     ,   data _ list   =     )     .   box   .   Replace   (   _ panel   ,   _ panel   )   _ panel   .   Destroy   ( )     .   category _ sp2 _ panel   =   _ panel   大体 过程 上 ， 切换 推荐 采用 写法 ：   隐藏 box 包含 子 面板 ：   def   hide _ _ panel ( ) :     panel     . box . GetChildren ( ) :   . box . Hide ( panel . GetWindow ( ) )   显示 子 面板   . box . Show ( . category _ sp1 _ panel )   记得 调用 父 面板 级别 Layout 。   全局 捕捉 异常   import   sys   import   traceback   import   wx   class   Panel   (   wx   .   Panel   ) :   def   __ init __   (     ,   parent   ) :   super   (   Panel   ,     )   .   __ init __   (   parent   )   button   =   wx   .   Button   (     ,   label   =   ' 抛 异常 '   )   button   .   Bind   (   wx   .   EVT _ BUTTON   ,     .   OnButton   )   def   OnButton   (     ,   event   ) :   1   /   0   def   MyExceptionHook   (   etype   ,     ,   trace   ) :   \" \" \"   etype   exception   type     exception   message   trace   traceback   header   : param   etype :   : param   :   : param   trace :   : return :   \" \" \"   frame   =   wx   .   GetApp   ( )   .   GetTopWindow   ( )   tmp   =   traceback   .   format _ exception   (   etype   ,     ,   trace   )   exception   =   \" \"   .   join   (   tmp   )   print   (   exception   )   class   DemoFrame   (   wx   .   Frame   ) :   def   __ init __   (     ) :   super   (   DemoFrame   ,     )   .   __ init __   (   None   ,   -   1   ,   \" test   capture     excepiton \"   ,   size   =   (   600   ,   400   ) )   sys   .   excepthook   =   MyExceptionHook   panel   =   Panel   (     )     __ __   = =   ' __ main __ '   :   app   =   wx   .   App   ( )   frame   =   DemoFrame   ( )   frame   .   Show   ( )   app   .   MainLoop   ( )   过程 很 简单 ， python   sys . excepthook   重载   MyExceptionHook   函数 ， 异常 交给 。   验证 器   验证 器 最 对话框 数据格式 限定 ， 发现 验证 器 有用 ， 对话框 管理   . data   做 工作 交给 验证 器来 做 ， 验证 器 一块 早接触 。   验证 器先 定义 一个 验证 器类 ， 继承   wx . Validator   。 自定义 一个   Clone   方法 ， 返回 验证 器 副本 。   验证 器 第一个 功能 验证 数据 ， 验证 器类 中 定义   Validate   方法 做 。 方法 默认 还 传递 一个   win 参数 进来 ， win ， 比如说 验证 器类 挂载 TextCtrl 上 ， TextCtrl 实例 win ， 引用 win 数据 。     Validate   方法 返回   True   ， 验证 成功 ， 返回   False ， 验证 失败 。 再 返回 还 做 事情 。   验证 器类 还 定义   TransferToWindow   方法 ， 验证 器 启动 动作 ； 定义   TransferFromWindow   方法 验证 器 验证 结束 后 动作 。 两个 函数 都 简单   return   True   ， 都 不用 做 ， 两个 方法 一来一去 维护 一个 对话框 维护 全局 数据 集 。 还 没 接触 验证 器 ， 写 几十 行 代码 维护 一个 类似 data 数据 集 ， 对话框 控件 稍 变动 ， 就要 触发 一个 事件 数据 同步 动作 。 验证 器 方案 优雅 。   Dialog 几个 控件 ， 几个 控件 validator 独立 ， 写 验证 器类 统一 一个 类 ， 运行 时有 好几个 验证 器 作用 。 请 看 例子 ：   import   wx   class   CategorySPAddValidator   (   wx   .   Validator   ) :   def   __ init __   (     ,   data   ,   key   ) :   super   (   CategorySPAddValidator   ,     )   .   __ init __   ( )     .   data   =   data     .   key   =   key   def   Clone   (     ) :   return   CategorySPAddValidator   (     .   data   ,     .   key   )   def   handle _ targetCtrl _ state   (     ,   targetCtrl   ,   state   ) :   \" \" \"   成功 失败 动作 通用 动作   : param   state :   : return :   \" \" \"     state   :   targetCtrl   .   SetBackgroundColour   (   wx   .   SystemSettings   .   GetColour   (   wx   .   SYS _ COLOUR _ WINDOW   ) )   targetCtrl   .   Refresh   ( )     :   targetCtrl   .   SetBackgroundColour   (   \" pink \"   )   targetCtrl   .   SetFocus   ( )   targetCtrl   .   Refresh   ( )   def   Validate   (     ,   win   ) :   targetCtrl   =     .   GetWindow   ( )     =   targetCtrl   .   GetValue   ( )   state   =   True       .   key   = =   ' '   :     len   (     )   = =   0   :   dlg   =   wx   .   MessageDialog   (   win   ,   \" 科目 名称 为空 \"   ,   ' 输入 有误 '   )   dlg   .   ShowModal   ( )   state   =   False   elif     .   key   = =   ' code '   :     len   (     )   = =   0   :   dlg   =   wx   .   MessageDialog   (   win   ,   \" 税收 分类 编码 为空 . \"   ,   ' 输入 有误 '   )   dlg   .   ShowModal   ( )   state   =   False   elif   len   (     )   ! =   19   :   dlg   =   wx   .   MessageDialog   (   win   ,   \" 税收 分类 编码 19 位 . \"   ,   ' 输入 有误 '   )   dlg   .   ShowModal   ( )   state   =   False   elif     .   key   = =   ' unit '   :   pass   elif     .   key   = =   ' price '   :   pass     .   handle _ targetCtrl _ state   (   targetCtrl   ,   state   )   return   state   def   TransferToWindow   (     ) :   \" \" \"   对话框 打开 ， 读取数据 窗体   : return :   \" \" \"   targetCtrl   =     .   GetWindow   ( )   state   =   True     =   None       .   key   = =   ' '   :     =     .   data   .     (   ' spmc '   ,   ' '   )   elif     .   key   = =   ' code '   :     =     .   data   .     (   ' spbm '   ,   ' '   )   elif     .   key   = =   ' unit '   :     =     .   data   .     (   ' jldw '   ,   ' '   )   elif     .   key   = =   ' price '   :     =     .   data   .     (   ' dj '   ,   ' '   )   targetCtrl   .   SetValue   (     )   return   state   def   TransferFromWindow   (     ) :   \" \" \"   对话框 关闭   : return :   \" \" \"   targetCtrl   =     .   GetWindow   ( )     =   targetCtrl   .   GetValue   ( )   state   =   True       .   key   = =   ' '   :     .   data   [   ' spmc '   ]   =     elif     .   key   = =   ' code '   :     .   data   [   ' spbm '   ]   =     elif     .   key   = =   ' unit '   :     .   data   [   ' jldw '   ]   =     elif     .   key   = =   ' price '   :     .   data   [   ' dj '   ]   =     return   state   例子 跟着 wxpython     action   书上 例子 优化 ， 书上 例子 很 好地解决 dialog 数据传输 ， 最 神奇 ， 原 对话框   . data   属性 发生 更改 ， 确认   TransferFromWindow     . data   指 验证 器 ， 。 调用 dlg data 数据 ， 没想到 修改 好 数据 。 ， Why     works   .   一个 初步 猜测 wxpython 验证 器 聪明 传输   . data   数据 进来 记住 ， 只能 做 解释 。   试验 发现 面板 层次 稍微 点 ， . data 操作 风格 不行 ， 验证 器要 管理 多个 数据 做 。 验证 器 ， 数据传输 ， 到母 面板 ， 提取 数据 ， 都 小 细节 。   代码 一个 演示 功能 ， 读者 写 代码 寄托 神奇 魔法 ， 明晰 指定 数据 ， 去 。   wxpython asyncio 集成   小节 参考   代码 文件   。 看 ， 空闲 事件 Timer 事件 都 触发 ， 重复 很 ， 选择 一个 Timer 触发 即可 。   看 asyncio 相关 文档 ， stop 事件 循环 中 丢失 ， 总 效果 asyncio   事件 循环 后台 运行 。     .   timer   =   wx   .   Timer   (     )     .   timer   .   Start   (   1   )     .   Bind   (   wx   .   EVT _ TIMER   ,     .   idle _ handler   )     .   eventloop   =   asyncio   .   _ event _ loop   ( )   def   idle _ handler   (     ,   event   ) :   \" \" \"   Idle   handler   runs     asyncio   event   loop .   \" \" \"     .   eventloop   .   call _   (     .   eventloop   .   stop   )     .   eventloop   .   run _ forever   ( )   利用 进程 间通信 启动 一个   讲 wxpython 确保 一个 程序 实例 运行 ， 利用   wx . SingleInstanceChecker   类 ， 很 简单 。   那种 效果 ， 下 点击 图标 ， 弹出 原 窗体 ， 第二次 启动 尝试 悄然 结束 即可 。   仔细分析 查 资料 发现 ， 实际上 一个 简单 进程 间通信 。 第二次 启动 进程 ， 发送 一个 简单 消息 原 效果 。   进程 间通信 原理 发现 这块 还 挺 ， windows win32   API 操作 ， 不 熟悉 ， 套 接字 做 进程 间通信 ， 说白了 开 小 server 监听 端口 client 请求 。 方式 兼容性 ， 总 感觉 杀鸡 牛刀 ， 想 发个 简单 信号 即可 ， python signal 模块 windows 兼容性 不好 ， windows win32 操作 麻烦 还 不 好 方案 ， 写个 简单 套 接字 。   好 asyncio 事件 循环 提及 ， 挂载 上 ， 也就是说 只 利用 asyncio 模块 教程 写个 最 简单 套 接字 发送 一个 简单 消息 即可 。   LOCAL _ SOCKET _ PORT   =   10000   MSG _ INSTANCE   =   ' instance '   async   def   handle _ local _ socket _ server   (   reader   ,   writer   ) :   data   =   await   reader   .   read   ( )   message   =   data   .   decode   ( )     message   = =   MSG _ INSTANCE   :   logger   .   info   (   '   instance     calling . '   )   mainFrame   =   _ mainFrame   ( )   mainFrame   .   taskBarIcon   .   max _ show   ( )   async   def   handle _ local _ socket _ client   (   message   ,   loop   ) :   reader   ,   writer   =   await   asyncio   .   open _ connection   (   ' 127.0 . 0.1 '   ,   LOCAL _ SOCKET _ PORT   ,   loop   =   loop   )   writer   .   write   (   message   .   encode   ( ) )   await   writer   .   drain   ( )   writer   .   close   ( )   .....       .   instance   .   IsAnotherRunning   ( ) :     .   eventloop   .   run _ _ complete   (   handle _ local _ socket _ client   (   MSG _ INSTANCE   ,   loop   =     .   eventloop   ) )   logger   .   warning   (   ' 一个 潮 生活 发票 助手 程序 运行 ！ '   )   return   False     :   local _ socket _ server   =   asyncio   .   start _ server   (   handle _ local _ socket _ server   ,   ' 127.0 . 0.1 '   ,   port   =   LOCAL _ SOCKET _ PORT   ,   loop   =     .   eventloop   )     .   eventloop   .   run _ _ complete   (   local _ socket _ server   )   大概 代码 上 所示 ， 效果 还 挺不错 。   基本上 只用 asyncio 套 接字 编程 最 基础 知识 ， 有个 ， 还 试探 ： 道理 只   . eventloop . create _ task   挂上去 即可 ， 不   run _ _ complete   ， 提及 wxpython asyncio 集成 ， 稍 asyncio 事件 循环 才 启动 ， 计时器 才刚 创建 ， 没试 ， 。   程序 触发 事件   wxpython 程序 触发 事件 ， 所示 ：   homeButton   =   find _ window _ _   (   ' homeButton '   )   evt   =   wx   .   PyCommandEvent   (   wx   .   EVT _ BUTTON   .   typeId   ,   homeButton   .   GetId   ( ) )   wx   .   PostEvent   (   homeButton   ,   evt   )   核心   wx . PostEvent   方法 ， 值得一提的是 ， 方法 触发 事件 调用   event . GetEventObject ( )     button   =   find _ window _ _ id ( event . GetId ( ) )   找到 目标 button ，   GetId   方法 。   参考资料   zetcode   wxpython 教程   wxpython 官方 参考 文档   wxpython     action   ,   Author     Harri   Pasanen     Robin   Dunn",
            "tags":"wxpython",
            "url":"articles/wxpython-talk-two.html"
        },
        {
            "title":"wxpython编码风格推荐",
            "text":"建议     import   wx         import   *   引入 语法 。     size = ( 500 , 400 ) ， 不 推荐   wx . Size   ， 提法   网页   说 ， 会 争议性 ， 说 简单 好 。 点 x ,   y 两个 值 ， 来说 ， 确实 数组 对会 点 ， 编码 ， size 参数 实际上 指明 第一个 参数 x ， 第二个 参数 y 。   凡是 面板 都 子 类化 ， 面板 类 控件 面板 管理 。 说 做 ， 做 好处 很多 。 面板 类 控件 管理 ， 后续 管理 操作 编码 带来 很多 便利 ， 面板 子 类化 大型 GUI 程序 道路 。   多个 按钮 推荐   StdDialogButtonSizer   ，   TODO   ， 体验 再 讨论 几句 。   okButton   =   wx . Button ( ,   wx . ID _ OK ,   \" & OK \" )   okButton . SetDefault ( )   cancelButton   =   wx . Button ( ,   wx . ID _ CANCEL ,   \" & Cancel \" )   btnSizer   =   wx . StdDialogButtonSizer ( )   btnSizer . AddButton ( okButton )   btnSizer . AddButton ( cancelButton )   btnSizer . Realize ( )   代码 重构 ： 思考 视图 操作 分离   小节 思考 ， 更 学习   篇文章   提出 架构 思路 。   说 编程 世界 公认 理念 ， DRY 原则 。   编码 中 wxpython 额外 风格 推荐 。   DIY 原则 ， ：   数据 代码 分离 ， 数据 何种 方式 加载 进来 ， 都 完善 小 细节 ， GUI 编码 特殊性 ， 就要 数据 代码 分离 。   GUI 程序 编码 复杂度 提高 ， 请 立刻 重构 代码 ， 面向对象 风格 写法 ， GUI 程序 内在 面向对象 思想 很 融洽 ， 程序代码 很 简单 不用 上 面向对象 ， 稍微 写 几天 ， 就要 第一次 重构 。 请 视图 层 结构 特色 ， 编写 gui 模块 类 结构 层次 。   说 数据 代码 分离 ， GUI 很多 变量 数据 实际上 常量 数据 ， 建议 发生 变动 常量 数据 都 再 开个 模块 统一 管理 。 一个 不错 风格 常量 数据 包括 变量 数据 配置 数据 最终 都 一个 全局变量 模块 中 汇总 。 代码 中 编写 引用 ， 后续 写 代码 debug 模式 编写 ， GUI 程序运行 时 ， 写个 简单 debug 菜单 ， 程序运行 时 变量 常量 参数 打印 。   程序 核心 面板 都 一个 名字 ， 事件处理 ， 调用 窗体 ， 窗体 ， 调用 目标 窗体 子 窗体 操作 ， 做 完善 ， 窗体 提供 方法 操控 窗体 子 控件 ， 调用 子 控件 。   提到 篇 参考 文章 更进一步 提出 MVC 架构 ， 最 关键 一点 利用 pypubsub 模块 ， 程序 内部 消息 发送 接收 ， 视图 层 模型 层 解 耦 。 模型 层 只 负责管理 好本 应用程序 本地 数据 ， 控制 层 负责 模型 层 视图 层 交互 ， 控制 层 ， 视图 层 不 模型 层 交互 。   样例 代码 不 贴 ， pypubsub 模块 很 简洁 ， 关键在于 理解 MVC 层 层 分工 设计 思路 。 仔细分析 参考 文章 样例 代码 ， 会 发现 设计 很 精妙 地方 。 请 读者 设想 一个 ， GUI 程序 编写 类似 MVC 架构 中 都 会 ， 底层 模型 或者说 数据 更 精确 一点 变量 发生变化 ， 变化 内部 计算 ， 是从 外部 API 获取 数据 ， GUI 程序 数据 池 变动 ， 数据 视图 层 相关 ， 希望 视图 层 做出 调整 。 手工 请求 数据 ， 再 刷新 页面 想法 实在 太 愚蠢 ， 设计 一个 控制器 ， 控制器 负责 内部 运算 外部 获取 数据 ， 检测 数据 变化 ， 数据 变化 送给 本地 模型 层 ， 做好 变化 记录 ， 样例 程序   changing   过程 ， 本地 模型 层 数据 变化 ， 改变 视图 层 显示 ， 发送 changed   信号 页面 更新 驱动 。   视图 层   写 GUI 程序 放在 视图 层 ， 视图 层 panel 类 ， 面板 子 控件 ， 可变 元素 ， 挂 面板 上 调用 ， 业务 GUI 显示 需求 ， 些 更好 针对 面板 子 控件 组合 。   面板 属性 ， 利用 python   @ property   面板 属性 ， 面板 可变 元素 调用 属性 ， 引用 属性 方法 ， 指向 外部 可变 内容 ， 视图 层 内部 代码 每次 引用   .   ， 都 会 调用 定义 属性 方法 ， 实时 再 计算 ， 最新 信息 。   视图 层 常数 信息 ， 讨论 编码 风格 推荐 ， 慢慢 抽离 ， const 常数 模块 统一 管理 ， 一句 话 ， 努力做到 数据 代码 分离 。   控制 层   控制 层 ：   接受 模型 层 ， 组织 好 本地 常量 变量 数据   接受 好 视图 层 模型 层 发送 消息 ， 针对 消息 动作   ， 视图 层 引用 可变 数据 方法 支持 控制 层 提供   模型 层   模型 层 不 视图 层 交互 ， 所说 ， 只 负责管理 好 本地 数据 发送 信号 ， 实际上 模型 层 引入 控制 层 ， 一个 单纯 简单 管理 本地 数据 接口 。   一般来说 变动 业务 相关 数据 模型 层 。   二次 思考 MVC 架构   流行 web 框架 一种 成熟 MVC 架构 风格 ， 很多 东西 太大 ， GUI 编程 web 视图 层 控制 层 不太好 分离 。 GUI 程序 越来越 ， 确实 感觉 东西 杂乱 ， 思路 清晰 ， 一会 数据 变动 ， 视图 层 忘记 跟着 变动 ， 一会儿 数据 变动 ， 信号 忘记 发送 。   方式 ， 程序 常量 汇入 全局变量 池 ， 面板 控件 内 GUI 要素 ， 都 汇入 全局变量 池 ， 实际操作 带来 很大 便利 。 全局变量 池中 变量 ， 建立 模型 层 。   模型 层中 目标 变量 ， 发生 变化 ， 发送 一个 信号 。   视图 层 监听 目标 信号 ， 实时 变动 界面 体现 数据 变化 。   GUI 层 事件处理 。   控制 层 还 逻辑 模型 层 交互 。   提到 都 正确 ， 关键在于 都 混 杂乱 ， 再 加上 GUI 事件 信号 ， 程序员 思维 混乱 。   我试 约定 ， 再试 重构 整理 下 代码 试试看 。   常量 ， 模型 层 变量 ， 全局变量 分离   程序 涉及 常量 ， 模型 层 变量 ， 全局变量 分离 ， 早期 都 汇入 全局变量 挺 ， 全局变量 规模 变得 庞大 ， 分离 减轻 程序员 头脑 负担 。   模型 层 视图 层 分离   模型 层 不 视图 层 东西 ， 面板 。   视图 层 不 模型 层 东西 ， 全局变量 视图 层 （ 控制 好 这部分 量 ） ， 变量 模型 层 。 【 视图 层 模型 层 数据 ， 推荐 接口 统一 管理 】   模型 层 视图 层 发送 消息 （ _ changing ） 只 发送 （ _ changed ） ， 控制 层 修改 模型 层 数据 。 视图 层 只 负责 监听   ( _ changed )   消息 。 控制 层 只 监听 ( _ changing )   。   模型 层 信号 规范   模型 层 数据 层 ， 业务 逻辑 视图 层 数据 显示 ， 其是 数据 依赖 ， 或者说 数据 驱动 ， 控制 层 视图 层 监听 数据模型 。   监听 信号 名 规范 ：   变量名 _ changed   【 模型 层 数据 发生 变动 ， changed 模式 控制 层 视图 层 监听 】   变量名 _ changing   【 视图 层 数据 发生 变动 ， 发射 changing 信号 ， 信号 只 控制 层 监听 ， 模型 层 不用 。 】 （ 再 着重 讨论 下 changing 信号 changed 信号 分工 ， changed 信号 信息 变动 源 更 外部 ， 模型 层 数据 变动 ， 程序 内部 视图 层 跟踪 变动 ， 逻辑 交给 控制 层 中继 ； changing 信号 更 程序 本地 信息 变动 驱动 源 ， changing 第一 GUI 视图 层 内部 面板 组件 之间 信息 同步 ， 才 情况 控制 层 监听 更改 模型 层 数据 。 简言之 ， changing 第一 视图 层 内部 ， changed 第一 外部 数据 变动 视图 层 跟踪 变化 ， 才 视 控制 层 监听 信号 编写 更 内部 程序逻辑 。 ）   _ changing     _ changed   值 发生 变法 才 发送 消息 ， 情况 下 发送 消息 （ 设置 _ send 选项 ）   _ appending   _ appended   情况 下 列表 引入 append 模式 会 很   _ clearing   _ cleared   情况 下 数据 清空 还原 默认值 操作   传递 数据 值 ， append 模式 只 传递 附加 。   代码 重构 后感   思路 ， 模型 层 建立 通用 模型 ， 代码 重构 ， 发现 MVC 架构 项目 早期 实际上 还 增加 很多 额外 代码 量 ， 后期 会 降低 代码 量 。   写 代码 提及 规则 ， 还 额外 再 加上 一条 ：   写 代码 写 完 放在 一个 地方 供 ， 不用 阅读 。   涉及 代码 复用 性 ， 代码 设计 ， 提及 MVC 架构 努力实现 模型 层 视图 层 分离 时 努力 去 追求 一点 。   TODO ：   pypubsub 模块 学习 debug ， 查看 阅读 信息 发送 信息 函数 执行 。   三次 思考 MVC 架构 【 PLUS 】   二次 思考 MVC 架构 内容 正确 ， changing 信号 细节 补充 ：   建立 视图 层 变量 ， 写法 建立 方法 类似 模型 层 变量 做法   视图 层 面板 绑定 好 事件 ， 内容 发生 变更 发送 信号 视图 层 相关 面板 数据 同步 工作 。   视图 层 变量 更 面板 操作 记录 临时 变量 相关 ， 外部 驱动 发生 数据 更改 ， 驱动 方法 优先选择 面板 SetValue 还会 发送 GUI   Event 方法 ， 方法 ， 手工 添加 ， 好 模型 层 初始化 变更 会 自动 触发 视图 层 变更 。   注意事项   pypubsub   4.0 版本 确认 两个 面板 监听 topic ， 面板 函数 ， 参数 格式 。   def   _ topic _ test   (     ,     )   pass   一个 写为 ：   def   _ topic _ test   (     ,     =   None   )   pass   pypubsub 会 抛 异常 ， 两个 都 写作 ， 种 形式 ， 都 没 。   类 变量 实例 变量   算是 python 基础知识 ， 写 复用 面板 ， 千万 记得 ：   class   ...   a   =   1   变量 实例 都   def   __ init __   ( ) ...   b   =   1   变量 实例 都   写 方法 定义 特别 面板 上 元素 ， 挂 类 上 不 大 ， 定义 初始化 函数 ， 好 多个 实例 化后 面板 子 面板 元素 ， 才 出错 。   参考资料   zetcode   wxpython 教程   wxpython 官方 参考 文档   wxpython     action   ,   Author     Harri   Pasanen     Robin   Dunn",
            "tags":"wxpython",
            "url":"articles/wxpython-style-guide.html"
        },
        {
            "title":"算法复杂度",
            "text":"讨论 算法 复杂度 关注 算法 时间 复杂度 ， 真到 思考 算法 时间 复杂度 ， 目标 算法 应对 一个 输入 规模 n 很大 情况 。 常说 大 O 表示法 细枝末节 东西 都 省略 ， 输入 规模 n 很大 ， 还 关心 那多 几步 意义 。   更 专注 算法 中 循环 ， 循环 ， 循环 次数 输入 规模 无关 ， 记为 O ( 1 )   常数 运行 时间 。   循环 ：     i     range   (   n   ) :   print   (   i   )   循环 输入 规模 n 相关 ， 记 作   O ( n )   线性 运行 时间 。   假设 一个 算法 提到 O ( 1 )   ， O ( n )   ， O ( 1 )   项 去掉 ：   运行 时间 一个 多项式 ， 保留 增长速度 最快 项 ， 去掉 各项   提到 算法 复杂度 简单 记   O ( n )   。   假设 有个 算法 ， 两个 循环 ：     i     range   (   n   ) :   print   (   i   )     i     range   (   n   ) :   print   (   i   )   道理 算法 复杂度   2n   ， 大 O 表示法 规则 ：   项是 一个 乘积 ， 去掉 常数   算法 复杂度   O ( 2n )   简化   O ( n )   ， 算法 线性 运行 时间 。   两个 循环 嵌套 情况 ：     i     range   (   n   ) :     j     range   (   n   ) :   print   (   i   ,   j   )   运行 n * n 次 ， 算法 复杂度 记   \\ ( O ( n &# 94 ; 2 ) \\ )   ， 二次 多项式 运行 时间 。 会 情况 ， 第二层 循环 会多 运行 几次 少 运行 几次 ， 都 细枝末节 ， 说 第一条 规则 ： 展开 加减 增长速度 较慢 项 去除 ， 只 剩下   \\ ( O ( n &# 94 ; 2 ) \\ )   。   递归 情况   阶乘 函数 为例 ， 递归函数 计算 复杂度 递归函数 展开 ：   $ $   fac ( n )   *   fac ( n - 1 )   ...   fac ( 1 )   $ $   展开 序列 长度 递归 次数 计算 复杂度   O ( n )   。   对数 复杂度   考量 对数 复杂度 不 关心 对数 底数 ， 提及 第二条 规则 乘积 常数 项 忽略 。     n   >   0   :   print   (   1   )   n   =   n   / /   10   例子 读者 看 循环 次数 输入 规模 n 数次 ，   O ( logn )   。   二分 查找 算法 计算 复杂度 对数 复杂度 ， 大致 2 底数 压缩 查找 空间 。   对数 线性 复杂度   O ( nlog ( n ) )   快速 排序 算法 计算 复杂度 对数 线性 复杂度 。   def   quick _ sort   (   seq   ) :   \" \" \"   10000   随机数 列表 排序 ：   select _ sort     time   3.0919713973999023   quick   sort     time   0.024930477142333984   : param   seq :   : return :   \" \" \"     len   (   seq   )   <   2   :   return   seq     :   pivot   =   seq   [   0   ]   _ part   =   [   i     i     seq   [   1   : ]     i   < =   pivot   ]   greater _ part   =   [   i     i     seq   [   1   : ]     i   >   pivot   ]   return   quick _ sort   (   _ part   )   +   [   pivot   ]   +   quick _ sort   (   greater _ part   )   def   selection _ sort   (   seq   ) :   \" \" \"   两种 写法 速度 都 差不多 ， 优先 写 直白 点 。   : param   seq :   : return :   \" \" \"   def   find _ smallest _ index   (   seq   ) :   smallest   =   seq   [   0   ]   smallest _ index   =   0     i     range   (   1   ,   len   (   seq   ) ) :   target   =   seq   [   i   ]     target   <   smallest   :   smallest   =   target   smallest _ index   =   i   return   smallest _ index   res   =   [ ]   seq _ copy   =   seq   .   copy   ( )     i     range   (   0   ,   len   (   seq   ) ) :   smallest _ index   =   find _ smallest _ index   (   seq _ copy   )   res   .   append   (   seq _ copy   .   pop   (   smallest _ index   ) )   return   res   选择 排序 计算 复杂度 粗略 估计 长度   \\ ( O ( n &# 94 ; 2 ) \\ )   ， 直观 算法 有个 循环 套 循环 。   选择 排序 快速 排序 说 直观 计算 复杂度 等级 ， 运算 效率 提升 。 测试 ：   10000   随机数 列表 排序 ：   select _ sort     time   3.0919713973999023   quick   sort     time   0.024930477142333984   ， 速度 提升 100 倍 。   快速 排序 计算 复杂度 估算 两 ：   小 大部分 合计 约 n 判断 操作   递归 层级 展开 ， 大小 2 类似 二分 查找 分割 ， 一层 8 4 ， 递归 层级   \\ ( log _ 2n \\ )   相乘 快速 排序 计算 复杂度   \\ ( O ( n \\ log ( n ) ) \\ )   。   python 更新 排序 算法   蒂姆 · 彼得斯 不满 python 排序 算法 （ 估计 类似 快速 排序 ） ， 2002 年 发明 timsort 算法 ， 基本思路 类似 快速 排序 ， 利用 数据 集 数据 有序 情况 ， 优化 。   python list . sort sorted 函数 timsort 算法 。   字典   字典 查找 key 计算 复杂度 O ( 1 ) ， 字典 长度 无关 ， 内部 散 列表 算法 。   python 字典 基于 红黑树 二叉 搜索 树 ， 理解 错 。 python 中 字典 基于 hash   table   散 列表 ，   查   插入   删除   计算 复杂度 都   O ( 1 )   ， 引入 一个 散列 函数 ， 一个 大规模 输入 空间 映射 一个 小 输出 空间 ， 数量 key 转换 数量 较少 整数 索引 。   这块 底层 细节 很 懂 ：   TODO     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"算法",
            "url":"articles/suan-fa-fu-za-du.html"
        },
        {
            "title":"wxpython基础窗体一览",
            "text":"简介   最 窗体   窗体 。   wx . Window   wx . Control   wx . ControlWithItem   顶层 窗体   wx . PopupWindow   wx . ScrolledWindow   wx . Frame   wx . MDIParentFrame   wx . MDIChildFrame   wx . Dialog   包含 窗体 窗体   wx . ScrolledWindow   wx . Panel   wx . SplliterWindow   wx . Notebook   动态 窗体   动态 窗体 用户 编辑 。   wx . ToggleButton   wx . CheckBox   wx . TextCtrl   wx . SpinCtrl   ....   静态 窗体   用户 编辑 。   wx . StaticBox   wx . StaticText   wx . StaticLine   wx . StaticBitmap   wx . Gauge   窗体   wx . ToolBar   wx . MenuBar   wx . StatusBar   文本 输入 对话框   TextEntryDialog   一个 小 弹出 窗体 ， 用户 输入 一行 文本 （ 设 多行 ） ， 程序 获取 用户 输入 该行 文本 信息 。   【 图片 】   ShowModal   弹 出 窗体   GetValue   获取 文本 内容   单 选项 对话框   SingleChoiceDialog   一个 小 弹出 窗体 ， 用户 一个 单选 动作 。   ShowModal   弹 出 窗体   GetStringSelection   获取 用户 选择 字符串 内容   GetSelection   获取 用户 选择 索引 位置   文件 对话框   FileDialog   选择 打开 保存 文件 对话   def   OnOpen   (     ,   e   ) :   \" \" \"   Open   a   file \" \" \"     .   dirname   =   ' '   dlg   =   wx   .   FileDialog   (     ,   \" Choose   a   file \"   ,     .   dirname   ,   \" \"   ,   \" * . * \"   ,   wx   .   FD _ OPEN   )     dlg   .   ShowModal   ( )   = =   wx   .   ID _ OK   :     .   filename   =   dlg   .   GetFilename   ( )     .   dirname   =   dlg   .   GetDirectory   ( )   f   =   open   (   os   .   path   .   join   (     .   dirname   ,     .   filename   ) ,   ' r '   )     .   control   .   SetValue   (   f   .   read   ( ) )   f   .   close   ( )   dlg   .   Destroy   ( )   简单 信息 弹窗   dlg   =   wx . MessageDialog ( ,   \" A   small   text   editor \" ,   \" About   Sample   Editor \" ,   wx . OK )   dlg . ShowModal ( )   dlg . Destroy ( )   颜色 选择 对话框   ColourDialog   简单 About 弹窗   AboutBox   文件夹 选择 对话框   DirDialog   字体 选择 对话框   FontDialog   多选 对话框   MultiChoiceDialog   打印 页面设置 对话框   PageSetupDialog   打印 对话框   PrintDialog   启动 画面   wx . adv . SplashScreen   wx . adv . SplashScreen   添加 菜单 菜单栏   filemenu   =   wx   .   Menu   ( )   aboutMenu   =   filemenu   .   Append   (   wx   .   ID _ ABOUT   ,   \" & About \"   ,   \"   Information       program \"   )   filemenu   .   AppendSeparator   ( )   exitMenu   =   filemenu   .   Append   (   wx   .   ID _ EXIT   ,   \" E & xit \"   ,   \"   Terminate     program \"   )   menuBar   =   wx   .   MenuBar   ( )   menuBar   .   Append   (   filemenu   ,   \" & File \"   )     .   SetMenuBar   (   menuBar   )   创建 一个 MenuBar 对象 ， Frame   SetMenuBar   方法 设置 ， 引用   GetMenuBar   方法 MenuBar 对象   创建 一个   Menu   对象 ， MenuBar 菜单栏 菜单   Append   。   菜单 上 所示 添加 选项   菜单 点击 事件 绑定 语句 ：     .   Bind   (   wx   .   EVT _ MENU   ,     .   OnAbout   ,   aboutMenu   )   静态 文本   StaticTex   样式   wx . ALIGN _ CENTER   静态 文本 静态 文本 控件 中心   wx . ALIGN _ LEFT   文本 控件 中 左 对齐   默认   wx . ALIGN _ RIGHT   文本 控件 中右 对齐   wx . ST _ NO _ AUTORESIZE   设置 ， SetLabel 默认 自动 调整 控件 尺寸 ， 不 调整 。   静态 bitmap 图片   StaticBitmap   文本 输入   TextCtrl   样式   wx . TE _ CENTER   控件 中 文本 居中   wx . TE _ LEFT   控件 中 文本 左 对齐   wx . TE _ RIGHT   右 对齐   wx . TE _ PASSWORD   密码 框   wx . TE _ PROCESS _ ENTER   默认 不 Enter 按键 事件 ， 设置 后处理   wx ._ TE _ READONLY   只 可读   wx . TE _ MULTILINE   多行 输入   方法   Clear   输入 文本 重置 为空 字符串   AppendText ( text )   附加 文本   GetInsertionPoint   SetInsertionPoint   GetValue   获取 输入 文本   SetValue   设置 输入 文本   Remove   删除   Replace   替换   WriteText   插入 点 插入 文本   图片 按钮   BitmapButton   图片 按钮 更改 图片   调用 图片 按钮   SetBitmapLabel   方法 ， 文档 没 提及 。   开关 按钮   ToggleButton   通用 按钮   wx . lib . buttons   很多 通用 按钮 创建 方法 ， 提到 按钮 ， 开关 按钮 ， 图片 按钮 都 ， 相 按钮 ， 通用 按钮 提供 更 定制 性 。   滑块   Slider   微 调控 件   SpinCtrl   进度条   Gauge   复选框   CheckBox   单选 按钮   RadioBox   wx . RB _ GROUP   ！ 定义 一组 单选 按钮   列表框   ListBox   滚动 文字 信息 栏   一行 滚动 文字 信息 栏 ，     wx . lib . ticker   import   Ticker   状态栏   状态栏   . statusbar   =   . CreateStatusBar ( )   只能 Frame ， 类似   CreateToolBar   。 ， 不 添加 。   参考资料   wxpython 官方 参考 文档   wxpython     action   ,   Author     Harri   Pasanen     Robin   Dunn",
            "tags":"wxpython",
            "url":"articles/wxpython-basic-window-gallery.html"
        },
        {
            "title":"python新的f-string",
            "text":"python3 版本 迭代 很快 ， python3.4 新 asyncio 很 关心 ， 接触 一个 新 f - string ， python3.6 进来 。 字符串 加个 f 很 困惑 ， python2 字符串 u ， python3 基本上 字符串 没什么 东西 。 这次 新 f - string ， 初步 停不下来 ， 真的 太好 。   情况 ：   python 新 format 字符串   f \" .   { } \"   等价   \" .   { } \" . format ( = )   一个 变量 还好 ， 多个 变量 f - string 写法 好处 很 ， 环境 下 定义 好 变量名 ， 只能 一句 话 形容 ， 太好 ， 上 会 停不下来 。",
            "tags":"python语言",
            "url":"articles/python-the-new-f-string.html"
        },
        {
            "title":"logbook模块",
            "text":"前言   logbook 不错 模块 改进 日志 功能 ， 看做 系统 logging 模块 第三方 升级版 ， 很多 地方 。   接触 logbook 官方 文档 不 推荐 handler 注册 logger 那种 做法 ， logbook handler 注册 线程 进程 上 。 官方 文档 第一个 例子 写法 ：     logbook   import   warn   ,   StreamHandler   import   sys   StreamHandler   (   sys   .   stdout   )   .   push _ application   ( )   warn   (   ' This     a   warning '   )   写作 ：     logbook   import   warn   ,   StreamHandler   import   sys   log _ handler   =   StreamHandler   (   sys   .   stdout   )     log _ handler   .   applicationbound   ( ) :   warn   (   ' This       cool     stdlib '   )   这是 单个 注册 程序 上 ，   threadbound   注册 线程 上 。 桌面 GUI 程序 推荐 注册 程序 上 ， web 推荐 注册 线程 上 。   说 不 定义 logger ， 如同 习惯 定义 。     logbook   import   Logger   logger   =   Logger   (   __ __   )   logger   .   info   (   '   log   . '   )   logbook 更 配置 所示 ， 配置 handler ：   import   os     logbook   import   NestedSetup   ,   NullHandler   ,   FileHandler   ,   \\   MailHandler   ,   Processor   def   inject _ information   (   record   ) :   record   .   extra   [   ' cwd '   ]   =   os   .   getcwd   ( )   #   a   nested   handler   setup           configure     complex   setups   setup   =   NestedSetup   ( [   #   make         bubble         stderr   handler   #       run       setup   handling   NullHandler   ( ) ,   #     write   messages           warnings     a   logfile   FileHandler   (   ' application . log '   ,   level   =   ' WARNING '   ) ,   #   errors         delivered     mail           #       application   log ,           bubble   .   MailHandler   (   ' servererrors @ . '   ,   [   ' admin @ . '   ] ,   level   =   ' ERROR '   ,   bubble   =   True   ) ,   #     '           push   a   processor         stack     #   record   additional   information .   Because   processors     handlers   #         stacks         matter       processor     #   added         bottom           beginning .   Same     #     true     flags .   Processor   (   inject _ information   )   ] )   Processor 会 自动 每条 日志 记录 上 上 额外 信息 。 logbook 还 提供 很 强大 MailHandler 。 相关 配置 信息 慢慢 。   配置   level   critical   导致 程序 终止 异常   error   还 应付 error   warning   情况 error   notice   - error   希望   info   信息 不想   debug   信息 debug   handler   StreamHandler   流 handler ， 指   sys . stdout   FileHandler   RotatingFileHandler   TimedRotatingHandler   用于 输出 文件   MailHandler   用于 输出 email   bubble   bubble 参数 默认 False ， 日志 记录 handler handler ， 设置 bubble = True ， handler 。   action _ level   级别 记录 才 会 输出 日志 ， 不 输出 。",
            "tags":"python好伙伴",
            "url":"articles/logbook-module.html"
        },
        {
            "title":"wxpython技巧大杂烩",
            "text":"一个 程序 实例 运行   利用   wx . SingleInstanceChecker   很 ， 更 信息 请 参看 文档     。 做法 确保 操作系统 用户 一个 程序 实例 运行 。   import   wx   class   SingleAppFrame   (   wx   .   Frame   ) :   def   __ init __   (     ,   parent   ,   title   ) :   wx   .   Frame   .   __ init __   (     ,   parent   ,   title   =   title   ,   size   =   (   300   ,   300   ) )     .   Centre   ( )   class   SingleApp   (   wx   .   App   ) :   def   OnInit   (     ) :     .     =   \" SingleApp -   % s   \"   %   wx   .   GetUserId   ( )     .   instance   =   wx   .   SingleInstanceChecker   (     .     )       .   instance   .   IsAnotherRunning   ( ) :   wx   .   MessageBox   (   \" Another   instance     running \"   ,   \" ERROR \"   )   return   False   frame   =   SingleAppFrame   (   None   ,   \" SingleApp \"   )   frame   .   Show   ( )   return   True   app   =   SingleApp   (   redirect   =   False   )   app   .   MainLoop   ( )   页面   利用 wx . adv . SplashScreen   很 制作 出 一个 页面 ， 读者 还 看 demo 案例 中 提到   wx . lib . agw . advancedsplash     AS   ，   SplashScreen   类比 定制 选项 。     gui . mainFrame   import   ChaoShengHuo   class   ChaoShengHuoApp   (   wx   .   App   ) :   img _ base   =   g _ var   .   img _ base   def   OnInit   (     ) :     .     =   \" SingleApp -   % s   \"   %   wx   .   GetUserId   ( )     .   instance   =   wx   .   SingleInstanceChecker   (     .     )       .   instance   .   IsAnotherRunning   ( ) :   wx   .   MessageBox   (   \" 一个 潮 生活 发票 助手 程序 运行 ！ \"   ,   \" Do     Panic \"   )   return   False     :   #   页面   bitmap   =   wx   .   Bitmap   (     .   img _ base   +   ' . png '   ,   wx   .   BITMAP _ TYPE _ PNG   )   wx   .   adv   .   SplashScreen   (   bitmap   ,   wx   .   adv   .   SPLASH _ CENTRE _ ON _ SCREEN   |   wx   .   adv   .   SPLASH _ TIMEOUT   ,   3000   ,   None   ,   -   1   ,   wx   .   DefaultPosition   ,   wx   .   DefaultSize   ,   wx   .   BORDER _ SIMPLE   |   wx   .   STAY _ ON _ TOP   )   wx   .   Yield   ( )   _ frame   =   ChaoShengHuo   (   None   ,   -   1   )   _ frame   .   Show   (   True   )   return   True   程序 最小化 托盘   主 界面 关闭 事件 ：   def   MinimizeWindow ( ,   event ) :   . Iconize ( True )   def   CloseWindow ( ,   event ) :   . Hide ( )   event . Skip ( )   import   wx   import   wx . adv   class   TaskBarIcon   (   wx   .   adv   .   TaskBarIcon   ) :   ID _ About   =   wx   .   NewId   ( )   ID _ Minshow   =   wx   .   NewId   ( )   ID _ Maxshow   =   wx   .   NewId   ( )   ID _ Closeshow   =   wx   .   NewId   ( )   def   __ init __   (     ,   frame   ) :   wx   .   adv   .   TaskBarIcon   .   __ init __   (     )     .   frame   =   frame     .   SetIcon   (   wx   .   Icon   (     =   ' favicon . ico '   ,   type   =   wx   .   BITMAP _ TYPE _ ICO   ) ,   ' 潮 生活 发票 助手 '   )     .   Bind   (   wx   .   adv   .   EVT _ TASKBAR _ LEFT _ DCLICK   ,     .   OnTaskBarLeftDClick   )   #   定义 左键 双击     .   Bind   (   wx   .   EVT _ MENU   ,     .   OnAbout   ,   id   =     .   ID _ About   )     .   Bind   (   wx   .   EVT _ MENU   ,     .   OnMinshow   ,   id   =     .   ID _ Minshow   )     .   Bind   (   wx   .   EVT _ MENU   ,     .   OnMaxshow   ,   id   =     .   ID _ Maxshow   )     .   Bind   (   wx   .   EVT _ MENU   ,     .   OnCloseshow   ,   id   =     .   ID _ Closeshow   )   def   OnTaskBarLeftDClick   (     ,   event   ) :       .   frame   .   IsIconized   ( ) :     .   frame   .   Iconize   (   False   )         .   frame   .   IsShown   ( ) :     .   frame   .   Show   (   True   )     .   frame   .   Raise   ( )   def   OnAbout   (     ,   event   ) :   wx   .   MessageBox   (   ' 潮 生活 发票 助手 V3.0 '   ,   ' '   )   def   OnMinshow   (     ,   event   ) :     .   frame   .   Iconize   (   True   )   def   OnMaxshow   (     ,   event   ) :       .   frame   .   IsIconized   ( ) :     .   frame   .   Iconize   (   False   )         .   frame   .   IsShown   ( ) :     .   frame   .   Show   (   True   )     .   frame   .   Raise   ( )   def   OnCloseshow   (     ,   event   ) :     .   RemoveIcon   ( )     .   Destroy   ( )     .   frame   .   Destroy   ( )   def   CreatePopupMenu   (     ) :   menu   =   wx   .   Menu   ( )   menu   .   Append   (     .   ID _ Minshow   ,   ' 最小化 '   )   menu   .   Append   (     .   ID _ Maxshow   ,   ' 最大化 '   )   menu   .   Append   (     .   ID _ About   ,   ' '   )   menu   .   Append   (     .   ID _ Closeshow   ,   ' 退出 '   )   return   menu   图片 重画   一个 抹 去 事件 发送 ， 窗体 背景 重画 。   An   erase   event         a   window ' s   background         repainted .   dc   =   event . GetDC ( )   wx . ClientDC ： 用于 一个 窗口 对象 上 绘画 。 想 窗口 部件 主 区域 上 （ 不 包括   边框 装饰 ） 绘画 时 。 主 区域 称为 客户 区 。 wx . ClientDC 类 应临   时 创建 。 该类 仅 wx . PaintEvent 之外 。   参考 网页   import   wx   class   Frame   (   wx   .   Frame   ) :   def   __ init __   (     ) :   wx   .   Frame   .   __ init __   (     ,   None   ,   -   1   ,   \" My   Frame \"   ,   size   =   (   400   ,   300   ) ,   style   =   wx   .   DEFAULT _ FRAME _ STYLE   )     .   panel   =   wx   .   Panel   (     )     .   panel   .   Bind   (   wx   .   EVT _ ERASE _ BACKGROUND   ,     .   OnEraseBack   )   def   OnEraseBack   (     ,   event   ) :   dc   =   event   .   GetDC   ( )       dc   :   dc   =   wx   .   ClientDC   (     )   rect   =     .   GetUpdateRegion   ( )   .   GetBox   ( )   dc   .   SetClippingRect   (   rect   )   dc   .   Clear   ( )   bmp   =   wx   .   Bitmap   (   \" background . jpg \"   )   dc   .   DrawBitmap   (   bmp   ,   0   ,   0   )     __ __   = =   ' __ main __ '   :   app   =   wx   .   App   ( )   frame   =   Frame   ( )   frame   .   Show   ( )   app   .   MainLoop   ( )   窗体 拖动   想要 窗体 拖动 ， 事件 绑定 ， 拖动 事件 执行 方法 主 窗体 上 ， 主 窗体 绑定 。 原因 还 很 明白 。     .   Bind   (   wx   .   EVT _ LEFT _ DOWN   ,     .   OnLeftDown   )   #   左键 点击 按下     .   Bind   (   wx   .   EVT _ LEFT _ UP   ,     .   OnLeftUp   )   #   左键 释放     .   Bind   (   wx   .   EVT _ MOTION   ,     .   OnMouseMove   )   #   鼠标   #   拖动 相关   def   OnLeftDown   (     ,   event   ) :   logger   .   debug   (   f   ' GUI 事件 :   { event }   -   OnLeftDown '   )     .   CaptureMouse   ( )   #   捕获 鼠标   pos   =     .   ClientToScreen   (   event   .   GetPosition   ( ) )   origin   =     .   GetPosition   ( )     .   delta   =   wx   .   Point   (   pos   .   x   -   origin   .   x   ,   pos   .   y   -   origin   .   y   )   def   OnLeftUp   (     ,   event   ) :   logger   .   debug   (   f   ' GUI 事件 :   { event }   -   OnLeftUp '   )       .   HasCapture   ( ) :     .   ReleaseMouse   ( )   #   释放 鼠标   def   OnMouseMove   (     ,   event   ) :   logger   .   debug   (   f   ' GUI 事件 :   { event }   -   OnMouseMove '   )     event   .   Dragging   ( )     event   .   LeftIsDown   ( ) :   pos   =     .   ClientToScreen   (   event   .   GetPosition   ( ) )   newPos   =   (   pos   .   x   -     .   delta   .   x   ,   pos   .   y   -     .   delta   .   y   )     .   Move   (   newPos   )   扩充 颜色 定义   wxpython 内部 一套 颜色 定义 库 ， 还 利用 进一步 扩充 颜色 定义 库 ：   aquamarine ： 海蓝色   black ： 黑色   blue ： 蓝色   brown ： 褐色   coral ： 珊瑚 色   cyan ： 青色   firebrick ： 火砖 色   gold ： 金色   gray ： 灰色   green ： 绿色   khaki ： 土黄色   magenta ： 绛红色   maroon ： 栗色   navy ： 藏青色   orange ： 橙色   orchid ： 淡紫色   pink ： 粉红色   plum ： 梅 红色   purple ： 紫色   red ： 红色   salmon ： 鲜肉 色   sienna ： 红褐色   tan ： 浅棕色   thistle ： 蓟色   turquoise ： 青绿色   violet ： 紫罗兰色   wheat ： 浅黄色   white ： 白色   yellow ： 黄色   更 颜色 请 参看   demo     ColourDB   。   app   OnInit   加载 定义 颜色 ， 请 看 官方 代码 片段 ， 做 ：   def   updateColourDB   ( ) :   \" \" \"   Updates     : class : ` wx . ColourDatabase `     adding     colour   names     RGB   values .   \" \" \"   global   _ haveUpdated       _ haveUpdated   :   import   wx   assert   wx   .   GetApp   ( )       None   ,   \" You       a   wx . App   object             colour   database . \"   cl   =   getColourInfoList   ( )     info     cl   :     ,   colour   =   info   [   0   ] ,   wx   .   Colour   (   *   info   [   1   : ] )   wx   .   TheColourDatabase   .   AddColour   (     ,   colour   )   _ haveUpdated   =   True",
            "tags":"wxpython",
            "url":"articles/wxpython-cookbooks.html"
        },
        {
            "title":"wxpython第一谈",
            "text":"前言   本文 假设 读者 熟悉 一种 桌面 图形 开发 ， 比如说 PyQt ， 图形 桌面开发 概念 读者 熟悉 ， 言简意赅 wxpython 相关 特色 核心 概念 ， 针对 讨论 。   说 下 安装 ， wxpython pyqt5 都 ， 都 pip 安装 ， linux 下 windows 都 安装 。   Sizer . Add 参数 详解   Sizer . Add ( item ,   0   ,   wx . ALIGN _ RIGHT ,   0 )   右 对齐 布局 ， 第一个 参数 proportion 详细 讨论 ， 第三个 参数 设置 border 宽度 。   Sizer . Add ( item ,   0 ,   wx . ALIGN _ CENTER ,   0 )   居中 布局   Sizer . Add ( item ,   0 ,   wx . EXPAND ,   0 )   扩展 布局 ， （ vertical   sizer 水平 扩展 ； horizontal   sizer 垂直 扩展 ）   proportion 参数   默认 0 ， 0 不 缩放 ， 估计 设置 父 窗体 Layout ， 而子 窗体 自动 Layout 。 设置 整数 某种 缩放 。 参考资料 谈 缩放 ， 暂时 很 关心 。 讨论 原文 ：   proportion 参数 wx . BoxSizer 用作 因数 去 sizer 大小 改变 时 ， sizer 调整 孩子 尺寸 。 水平 方向 调整 sizer ， stretch 因数 孩子 水平 尺寸 改变 （ 坚直 方向 改变 box   sizer 基于 第三个 参数 ） 。   0 不 缩放 ， 1 父 窗体 缩放 缩放 。   Flag 参数   这块 东西 ， Flag ， 建议 沉下 心来学 ， 会 频繁 用到 ：   控制 border   wx . TOP   wx . BOTTOM   wx . LEFT   wx . RIGHT   wx . ALL   扩展   wx . EXPAND   空间 扩展   wx . SHAPED   扩展 宽高比   对齐   wx . ALIGN _ CENTER     wx . ALIGN _ CENTRE   wx . ALIGN _ LEFT   wx . ALIGN _ RIGHT   wx . ALIGN _ RIGHT   wx . ALIGN _ TOP   wx . ALIGN _ BOTTOM   wx . ALIGN _ CENTER _ VERTICAL     wx . ALIGN _ CENTRE _ VERTICAL   wx . ALIGN _ CENTER _ HORIZONTAL     wx . ALIGN _ CENTRE _ HORIZONTAL   举 组合 例子 ：   wx . EXPAND   |   wx . LEFT   空间 扩展 ， border 左边 ， 会 左边 空白   wx . EXPAND   |   wx . LEFT   |   wx . RIGHT   空间 扩展 ， border 左边 右边 ， 会 左边 右边 空白   wx . EXPAND   |   wx . ALL   空间 扩展 ， 上下左右 border 都   Frame 样式   wx . FRAME _ NO _ TASKBAR   任务栏   wx . FRAME _ SHAPED   非 矩形 框架   wx . FRAME _ TOOL _ WINDOW   wx . FRAME _ FLOAT _ ON _ PARENT   框架 漂浮 父 窗体 之上   wx . STAY _ ON _ TOP   总在 最上   wx . SIMPLE _ BORDER   装饰 边框   布局 太 布局   手写 布局 代码 ， 肯定 Sizer ， BoxSizer 最 常用 ， 特别 布局 BoxSizer ， 横竖 拼接 加上 Add 参数 调配 ， 基本上 都 调 。 panel 类 都 写 上 一个   . box   惯例 ， 情况 下会 Sizer ， GridSizer ， GridSizer 放在 BoxSizer ， 不 大 。 惯例 ， 引用 面板 ， 想到 主 Sizer ， panel . box 即可 ， 这是 题外话 。   FlexGridSizer   FlexGridSizer 布局 页面 分成 二维 表格 ， 表格 元素 高度 ， 宽度 不 （ GridSizer ） 。   wx . FlexGridSizer ( int   rows = 1 ,   int   cols = 0 ,   int   vgap = 0 ,   int   hgap = 0 )   rows   行   cols   列   vgap   垂直 加点 空间   hgap   水平 加点 空间   wxpython ID   window   identifiers   整数   窗体 系统 中 唯一性 ， wxpython 中 定义 窗体 ID ：   窗体 ID 定义   赋值 一个 正整数 ， 不 推荐   wx . NewID ( )   传递 wx . ID _ ANY     - 1   窗体 构造 器   frame   =   wx . Frame .__ init __ ( None ,   - 1 )   id   =   frame . GetId ( )   笔者 强烈推荐 读者 名字 定义 定位 窗体 ， 代码 更 可读性 。   标准 ID   官方 文档 标准 ID 列表   ID 查找 窗体   1 、 wx . FindWindowById ( id ,   parent = None )   2 、 wx . FindWindowByName ( ,   parent = None )   3 、 wx . FindWindowByLabel ( label ,   parent = None )   窗 体内 调用   . FindWindowById   本窗 体内 查找 ， 找到 第一个 。   名字 查找 窗体   笔者 强烈推荐 读者 写 大型 GUI 程序 几个 核心 窗体 都 定义 好 唯一 名字 （ 大部分 窗体 都 接受 一个 可选 参数 ） ， 查找 。 编程 会 带来 很大 便利 。   import   wx   def   find _ window _ _   (     ) :   \" \" \"   窗体 名字 返回 窗体 ， 推荐 风格   : param   :   : return :   \" \" \"   window   =   wx   .   FindWindowByName   (     )   return   window   def   _ _ window _   (   window   ,     ) :   \" \" \"   名字 判断 是否是 窗体   : param   window :   : param   :   : return :   \" \" \"     window   .   SetName   ( )   = =     :   return   True     :   return   False   理解 wxpython 中 事件   Bind ( event ,   handler ,   source = None ,   id = wx . ID _ ANY ,   id2 = wx . ID _ ANY )   event   wx . Button 上 鼠标 单击 触发 一个   wx . EVT _ BUTTON   事件 ， event 定义 想要 绑定 事件 。   handler   处理器   source   不 指定 ， 父 窗口 多个 触发 源 ， 比如说 多个 按钮 ， 指定 下 。   id   id 定义 事件 触发 源 ， 情况 下 id 来会 更 些 ， id2 id 一串 连续 窗体 。   wxpython 事件 处理过程   事件 触发 - - >   获取 事件 触发 对象   检查 事件 触发 对象 处理事件 （   SetEvtHandlerEnabled ( boolean )   禁用 窗体 处理事件 ） 【 UI 层面 Disable   Enable 禁用 窗体 用户 交互 ， 间接 接受 事件 ， PostEvent 】   event . Skip ( )   方法 事件 跳过 ， 理解 错误 ， 更 准确 说法   事件处理   。   事件 触发 链中 ， 方法 ， 事件 将会 传播 ， 事件处理 终止 。   目标 事件   传播 propagate   ，   还会 触发 父 容器 事件 ， App ， 最 顶层 结束 传播 。 【 默认 情况 ， wx . CommandEvent 子类 实例 向上 展开 容器 级 。 事件 都 不 传播 。 】 【 Button 单击 CommandEvent ， 鼠标 浮动 上 离开 都 MouseEvent 】   习题 1   请 读者 解释 写法 ， 鼠标 浮动 上 离开 事件 只能 定向 . button 。   . Bind ( wx . EVT _ BUTTON ,   . OnButtonClick ,   . button )   # 1   绑定 按钮 事件   . button . Bind ( wx . EVT _ ENTER _ WINDOW ,   . OnEnterWindow )   # 2   绑定 鼠标 位于 其上 事件   . button . Bind ( wx . EVT _ LEAVE _ WINDOW ,   . OnLeaveWindow )   # 3   绑定 鼠标 离开 事件   按钮 点击 传播 ， 窗体 上 触发 按钮 事件 ， 窗体 上 找 方法   OnButtonClick   ， 找到 方法 ， 执行 ， 执行 过程 中 Skip 方法 ， 事件处理 到此结束 ； ， 会试 向上 传播 ， 顶层 窗体 。 向上 传播 过程 传播 事件 ， 窗体 父 窗体 触发 按钮 事件 ， 试着 实行   OnButtonClick   方法 。   鼠标 不 传播 事件 ， 指明 按钮 绑定 。   . button . Bind   过程 执行 初始 挂 方法 ， 找 不到 抛出 异常 。   大体 ， 读者 不 明白 ， 请 阅读   wxpython     action   本书 第三章 ， 这部分 ， 本书 讲 很 好 。   习题 2   一个 按钮 点击 事件 会 触发 两个 动作 。   简单 来说 写 两个   . button . Bind ( )   语句 绑定 两个 函数 ， 说 ， 两个 函数 都 跟上   event . Skip ( )   。   手动 触发 事件   手动 触发 一个 事件 会省 下 很多 代码 。   . Close ( True )   获取 事件 触发 对象   button   =   event . GetEventObject ( )   print ( button . GetName ( ) )   常见 wx . Event 子类   wx . CloseEvent   frame 框架 关闭 时 触发   wx . CommandEvent   按钮 单击   菜单 选择     wx . KeyEvent   按键 事件   wx . MouseEvent   鼠标 事件   wx . PaintEvent   窗体 重画 时 触发   wx . SizeEvent   窗体 大小 布局 改变 时 触发   wx . TimerEvent   wx . Timer 类 创建 定时 事件   按钮 三 事件   按钮 GUI 设计 中是 频率 高 一个 组件 ， 绑定 最 常用 三个 事件 ：   . Bind ( wx . EVT _ BUTTON ,   . OnButtonClick ,   . button )   绑定 按钮 事件   . button . Bind ( wx . EVT _ ENTER _ WINDOW ,   . OnEnterWindow )   绑定 鼠标 位于 其上 事件   . button . Bind ( wx . EVT _ LEAVE _ WINDOW ,   . OnLeaveWindow )   绑定 鼠标 离开 事件   调用 Layout 方法   动态 调整 GUI 元素 ， 会 网上 例子 会 调用   Layout 方法 ， 发现 不 调用 影响 不 大 ， 发现 不 调用 页面 会 变形 ， 到底 调用 Layout 方法 。 请 参看   篇文章   。   StaticText     SetLable   操作 ， Layout 下   sizer 显示 隐藏 面板 元素 Layout   下 。   窗体 触发   EVT _ SIZE   事件 ， wxpython 会 自动 Layout 重排 。 重排 父 窗体 sizer 会 自动 Layout ， 父 窗体 子 窗体 会 重排 操作 ， 子 窗体 不 重排 ， 接受   EVT _ SIZE   事件 ， 调用 Layout 方法 。 StaticText   更改 Layout ， 调用 其父 窗体 Layout ， StaticText 自动 调整 。     网页   介绍 ， 加上 一点 实践经验 ， 不 推荐   SetSizerAndFit   方法 ， 体验   SetSizer   工作 ， 加上 Fit 会 布局 带来 困扰 ， ScrolledPanel Fit 会 发生 截断 。   总 原则 试验 确实 可行 ：   SetSizer   发现 不对劲 ， Layout   Layout 还 不对劲 ， 布局 ， 情况 下 更改 数据 ， Refresh   TODO   Layout     Refresh   区别   一个 ， Refresh 才 ， 重画 透明 组件 再 设置 标签 ， Refresh 才 会 再次 重画 动作 ， 值得 读者 。 子 面板 Layout 会 自动 Refresh 。   ScrolledPanel   特别 值得一提的是   ScrolledPanel   内容 发生 变动 ， Layout 之外 还 加上 ：   . SetupScrolling ( )   实践 发现 内容 变动 都 加上 这句 ， 侧边 滚动条 会 丢失 ， 内容 会 隐藏 。   设置 背景 颜色 字体 颜色   wxpython 窗体 对象 （ 两个 方法 挂 wx . Window 上 ） ，   SetBackgroundColour   设置 背景 颜色 ，   SetForegroundColour   设置 前景 颜色 ， 前景 颜色 字体 颜色 。   动态 调 成 面板 背景 颜色 ， 记得 调用 Refresh 方法 激活 重画 事件 。   图片 转成 python 编码   编写 一个 python 脚本 ：   # ! / usr / bin / env   python   #   - * - coding : utf - 8 - * -   \" \" \"   项目 图片 文件 转成 python 文件 ，   import   images   引用 图片 。   \" \" \"   import   sys     wx . tools   import   img2py   command _ lines   =   [   \"   - F   - i   - n   Favicon   static / images / favicon . ico   images . py \"   ,   \" - a   - F   - n   ApplyTaiKa   static / images / apply _ tai _ ka . png   images . py \"   ,   \" - a   - F   - n   Address   static / images / address _ img . png   images . py \"   ,   ]     __ __   = =   \" __ main __ \"   :     line     command _ lines   :   args   =   line   .   split   ( )   img2py   .   main   (   args   )   调用 wxpython 提供 工具   img2py   ， 输出 images . py   图片 对象 方法 ：   def   GetBitmap ( ) :   return   wx . Bitmap ( . GetImage ( ) )   def   GetData ( ) :   data   =   . data     . isBase64 :   data   =   b64decode ( . data )   return   data   def   GetIcon ( ) :   icon   =   wx . Icon ( )   icon . CopyFromBitmap ( . GetBitmap ( ) )   return   icon   def   GetImage ( ) :   stream   =   BytesIO ( . GetData ( ) )   return   wx . Image ( stream )   最 常用   GetBitmap   获取 Bitmap 图片 对象 。   后台任务   wxpython 后台任务 推荐   wx . CallAfter     wx . CallLater   调用 。 python 内置 多线程 会 界面 奇怪 。   wx . CallAfter ( callable ,   * args ,   * * kwargs )   Timer   wxpython 计时器 挂上去 很 。   . timer   =   wx . Timer ( )   . timer . Start ( 1000 )   . Bind ( wx . EVT _ TIMER ,   . update ,   . timer )   参考资料   zetcode   wxpython 教程   wxpython 官方 参考 文档   wxpython     action   ,   Author     Harri   Pasanen     Robin   Dunn",
            "tags":"wxpython",
            "url":"articles/wxpython-talk-one.html"
        },
        {
            "title":"贪婪算法",
            "text":"总 暴力 穷举 算法 求解 ， 组合 数 情况 太多 ， ， 快速 算法 ， NP 。 试着 近似算法 快速 找到 一个 近似 解 。 贪婪 算法 一个 近似 解 。   贪婪 算法 某种 算法 ， 更 像是 写 算法 时 一种 思路 参考 。 解决问题 ， 分解 多个 步骤 ， 寻找 每步 局部 最优 解 ，   近似   目标 全局 最优 解 。 （ 贪婪 算法 不 保证 解 全局 最优 解 ， 解是 很 靠近 全局 最优 解了 。 ）   一个 ， 贪婪 算法 ， 贪婪 算法 解决 算法 。   背包   class   Knapsack   (   object   ) :   def   __ init __   (     ,   capacity   ,   items   =   None   ) :     .   capacity   =   capacity     .   items   =   [ ]     items     None     items     .   freespace   =     .   capacity   def   add _ item   (     ,   item   ) :       .   freespace   -   item   .   weight   > =   0   :     .   freespace   - =   item   .   weight     .   items   .   append   (   item   )   return   True     :   return   False   def   _ items _   (     ) :     =   0     item       .   items   :     + =   item   .     return     def   __ repr __   (     ) :   return   ' < Knapsack :   { 0 } > '   .   format   (     .   items   )   class   Item   (   object   ) :   def   __ init __   (     ,     ,     ,   weight   ) :     .     =       .   weight   =   weight     .     =     def   __ repr __   (     ) :   return   ' < Item :   { 0 } > '   .   format   (     .     )   def   __ eq __   (     ,     ) :       .     = =     .         .     = =     .         .   weight   = =     .   weight   :   return   True     :   return   False   def   greedy _ algorithm   (   knapsack   ,   items   ) :   \" \" \"   贪婪 法 求解   : return :   \" \" \"   items _ copy   =   items   .   copy   ( )   found   =   True     found   :   max _   =   0   choosed _ item   =   None     item     items _ copy   :     item   .     >   max _   :   choosed _ item   =   item   max _   =   choosed _ item   .       knapsack   .   add _ item   (   choosed _ item   ) :   found   =   True   items _ copy   .   remove   (   choosed _ item   )     :   found   =   False   return   knapsack   版本 还 扩展 出 函数 最小 重量 价值 / 重量 ， 理解 贪婪 算法 思想 即可 。   参考资料   算法 图解   Aditya   Bhargava   著",
            "tags":"算法",
            "url":"articles/greedy-algorithm.html"
        },
        {
            "title":"python语言学习之-技巧大杂烩",
            "text":"logging 中 pprint   参考   网页   。   logging 输出 希望 调用 pprint 输出 打印 美观 些 ， 调用 pformat 函数 效果 ：     pprint   import   pprint   ,   pformat   ds   =   [ {   ' '   :   ' '   } ]   logging   .   debug   (   pformat   (   ds   ) )       运算 优先级   推荐 括号 清晰 表达 ， 优先级 。 再 看 例子 :   > > >   True     True     False   True   例子 很 好 优先级 顺序 ，   优先级 高   。   关键词   这是 python 语言 关键词 函数 ， 源码 很 简单 ， 列出来 ， 看 :   def   ( iterable ) :     element     iterable :       element :   return   False   return   True   def   ( iterable ) :     element     iterable :     element :   return   True   return   False   语言 表述 :   ， 都 True ， 返回 True ， 返回 False   ， 一个 True 返回 True ， 返回 False 。   三元 运算符   类似 结构 :   loop   =   loop     loop       None     _ event _ loop ( )   处理函数 入口 参数 默认值 情况 会 用到 ， 函数参数 写   loop = None   ， 一行 形式 更 简洁 。 不 函数 定义 采用 默认值 两种 情况 ， 一是 默认值 不 默认值 ， 默认 None ； 一种 情况 默认值 函数 运算 。   __ __     __ file __   脚本 引入 指用 import 语句 一个 脚本 引入 进去 ， 脚本 执行 指   python   test . py   形式 执行 py 脚本 。   两种 形式 很 区别 ， 慢慢 谈论 :   __ __   区别 。 很 熟悉 。 脚本 引入 ，   __ __   值 引入 脚本 文件名 ， 引入   test . py   ， 脚本 引入 ， test . py 文件 来说 ， 其内   __ __   值   test   ，   模块 名   ； 脚本 执行 ，   __ __     __ main __   。   __ file __   区别 。 脚本 执行 ， 假设 脚本 文件   . py   ， 执行 脚本 中 ，   __ file __   值   . py   ，   文件名   。 引用 ， 引入 脚本 来说 ，   __ file __   值 引入 脚本 系统 来说   完整 文件名   ，   / home / wanze / 桌面 / . py   。   locals globals   python   locals ( )   返回 函数 内 局部变量 字典 值 ，   globals ( )   返回 模块 文件 全局变量 。   locals   只读 ，   globals ( )   ， 利用   globals ( )   脚本 文件 玩 出 新花样 。   获取 模块 对象   所示 ， 获取 模块 内 变量 。   import   sys   current _ module   =   sys   .   modules   [   __ __   ]   _ module _ dict   =   copy   (   current _ module   .   __ dict __   )   #     k ,   v     _ module _ dict . items ( ) :   #     k   = =   ' case _ base ' :   #   pass   #   elif   k . startswith ( ' case _ ' ) :   #     issubclass ( v ,   case _ base ) :   #   URL _ CASES . append ( v )   字符串 获取 模块 对象   import   importlib   importlib   .   import _ module   (   ' . '   )   检查 变量 模块 对象   参考   网页   > > >   import   os   ,   types   > > >   isinstance   (   os   ,   types   .   ModuleType   )   True   assert 语句   assert 语句 简单 理解   assert   True   ， 刷 ，   assert   False   抛出   AssertionError   。   属性 管理 函数   hasattr ， setattr ， getattr ， delattr ， 函数 都 python 中 对象 属性 管理 函数 ， 都 内置 函数 。   hasattr ( object ,   ) 检测 对象 有没有 属性 。   setattr ( object ,   ,   ) 用于 设置 对象 属性 值 ，   setattr ( x , a , 3 )     x . a   =   3   语法 。   getattr ( object ,   [ ,   default ] ) 用于 取 对象 属性 值 ，   object .   语法 。   delattr ( object , ) 用于 删除 对象 属性 ，   del   object .   语法 。   迭代 对象 flatten 操作   a _ list   =   [ [ 1 ,   2 ] ,   [ 3 ,   4 ] ,   [ 5 ,   6 ] ]   print ( list ( itertools . chain . _ iterable ( a _ list ) ) )   #   Output :   [ 1 ,   2 ,   3 ,   4 ,   5 ,   6 ]   #     print ( list ( itertools . chain ( * a _ list ) ) )   #   Output :   [ 1 ,   2 ,   3 ,   4 ,   5 ,   6 ]   __ missing __ 方法   字典 字典 子类 ， 定义   __ missing __   方法 回避 找 不到 键值 抛出   KeyError   ， 参考   网页   。 所示 :   class   NestedDict   (   collections   .   UserDict   ) :   ' ' '   Implement     data   structure :   { \" section \" : { } ,   }   ' ' '   def   __ init __   (   data   =   None   ) :   super   ( )   .   __ init __   (   data   )   def   __ missing __   (     ,   key   ) :     =     [   key   ]   =   dict   ( )   return     def   update _ _ section   (     ,   section   ,   d   ) :     [   section   ]   .   update   (   d   )   def   _ _ section   (     ,   section   ,   key   ) :   return     [   section   ]   .     (   key   )   def   delete _ _ section   (     ,   section   ,   key   ) :   del     [   section   ] [   key   ]   def   set _ _ section   (     ,   section   ,   key   ,     ) :     [   section   ] [   key   ]   =     找 不到 key ， 该类 会 自动 赋值 一个 新   dict ( ) key 值 。 希望   type ( ) ( )   ， 风格 json 兼容性 不太好 ， 推荐 都 dict 类 。   product 函数   product 函数   itertools   模块 ， 官方 文档 product ( A ,   B ) 返回值 等价 ( ( x , y )     x     A     y     B ) ， 组合 情况 （ 类似 笛卡尔 积 概念 ） :   > > >   list ( product ( [ ' a ' , ' b ' ] , [ ' c ' ] ) )   [ ( ' a ' ,   ' c ' ) ,   ( ' b ' ,   ' c ' ) ]   单一 迭代 加上   repeat   参数 会 生成 很 有意思 :   > > >   list ( product ( [ ' True ' , ' False ' ] , repeat = len ( ' abc ' ) ) )   [ ( ' True ' ,   ' True ' ,   ' True ' ) ,   ( ' True ' ,   ' True ' ,   ' False ' ) ,   ( ' True ' ,   ' False ' ,   ' True ' ) ,   ( ' True ' ,   ' False ' ,   ' False ' ) ,   ( ' False ' ,   ' True ' ,   ' True ' ) ,   ( ' False ' ,   ' True ' ,   ' False ' ) ,   ( ' False ' ,   ' False ' ,   ' True ' ) ,   ( ' False ' ,   ' False ' ,   ' False ' ) ]   看作 :   > > >   list ( product ( [ ' True ' , ' False ' ] , [ ' True ' , ' False ' ] , [ ' True ' , ' False ' ] ) )   [ ( ' True ' ,   ' True ' ,   ' True ' ) ,   ( ' True ' ,   ' True ' ,   ' False ' ) ,   ( ' True ' ,   ' False ' ,   ' True ' ) ,   ( ' True ' ,   ' False ' ,   ' False ' ) ,   ( ' False ' ,   ' True ' ,   ' True ' ) ,   ( ' False ' ,   ' True ' ,   ' False ' ) ,   ( ' False ' ,   ' False ' ,   ' True ' ) ,   ( ' False ' ,   ' False ' ,   ' False ' ) ]   deque 结构   小节 参考   网页   。   想 读者 接触 queue 结构 ， queue 结构 一端 进 data ， 另一端 出 data ， 先进先出 数据流 。 deque 结构 两端 都 进 两端 都 出 ， 看 上 古怪 ， 只 一端 ， 好像 一个 堆栈 结构 ， 先进后出 ； 一端 进 ， 另一端 出 ， 好像 一个 queue 结构 。 其有 优势 ？ deque 结构 优势 ， 原因 :   两端 插入 元素 删除 元素 时间 复杂度 O ( 1 ) ， 一个 常数 级 ， 列表 开头 插入 删除 元素 时间 复杂度 O ( N ) ， 一个 类似 列表 数据 存储 结构 ， 数据结构 中 ， 开头 几个 元素 末尾 几个 元素 都 ， 访问 ， deque 结构 。   网页 介绍 一个 函数 ， 用来 返回 一个 文件 几行 :     collections   import   deque   def   tail   (   filename   ,   n   =   10   ) :   ' Return       n   lines     a   file '     open   (   filename   )     f   :   return   deque   (   f   ,   n   )   其是 利用 deque 一个 size 定长 概念 ， 输入 队列 deque 时较 老 元素 会 丢弃 。 不 太 做法 效率 ， 写法 很 优雅 。   查找 多个 最小 元素 情况   想要 获知 数据 一个 最大值 一个 最小值 ，   max     min   方法 。 讨论 情况 想要 获知 数据 多个 最大值 多个 最小值 。 想到 先对 数据 排序 ， 切片 操作 。 参考资料 2 第一章 第四节 讨论 方法 实际上 利用 最小 堆 结构 堆排序 提出 最小 几个 元素 。   大体 过程 :   lst   =   [   1   ,   8   ,   2   ,   23   ,   7   ,   -   4   ,   18   ,   23   ,   42   ,   37   ,   2   ]   import   heapq   heapq   .   heapify   (   lst   )   heapq   .   nlargest   (   3   ,   lst   )   heapq   .   nsmallest   (   3   ,   lst   )   获取 一个月   要说 利用 python datetime timedelta   days   加减 操作 很 好 支持 跨 月 :   > > >     datetime   import   datetime   > > >   d   =   datetime   .     ( )   > > >   d   datetime   .   datetime   (   2016   ,   5   ,   29   ,   8   ,   50   ,   20   ,   337204   )   > > >     datetime   import   timedelta   > > >   d   -   timedelta   (   days   =   29   )   datetime   .   datetime   (   2016   ,   4   ,   30   ,   8   ,   50   ,   20   ,   337204   )   > > >   d   -   timedelta   (   days   =   28   )   datetime   .   datetime   (   2016   ,   5   ,   1   ,   8   ,   50   ,   20   ,   337204   )   获知 月份 30 31 ， 利用 replace 一个月 。 利用   calendar     monthrange   函数 。 参考   网页   。   > > >   d . replace ( year   =   2016 , month = 4 , day   =   monthrange ( 2016 , 4 ) [ - 1 ] )   datetime . datetime ( 2016 ,   4 ,   30 ,   8 ,   50 ,   20 ,   337204 )   OrderedDict 类   字典 排序 需求 ， 输出 再 排序 ， OrderedDict 字典 存储 开销 大 一倍 ， 不用 不用 。 情况 下 ， 类 确实 带来 便利 。 第一次 情况 大体 bilibili api 对接 ， 计算 密钥 参数 排序 urlencode 字符串 再 基于 字符串 计算 。   params   =   OrderedDict ( sorted ( params . items ( ) ,   key = lambda   t :   t [ 0 ] ) )   string   =   urlencode ( params )   大体 情况 下 ， 字典 值 变量 顺序 输出 ， OrderedDict 很 便利 。 顺序 插入 顺序 ， 做 字典 排序 工作 ， 看作 这是 一个 自动 某种 操作 便捷 对象 。   Counter 类   Counter 类 真 有用 ， 还 好 。 例子 来自 参考资料 2 ， 不多 说 ， 代码 大体 :   words   =   [   ' '   ,   ' '   ,   ' '   ,   ' eyes '   ,   ' '   ,   ' '   ,   ' '   ,   ' eyes '   ,   ' '   ,   ' eyes '   ,   ' '   ,   ' eyes '   ,   ' '   ,   ' eyes '   ,   ' '   ,   ' '   ,   ' '   ,   ' eyes '   ,   \" don ' t \"   ,   ' '   ,   ' '   ,   ' '   ,   ' eyes '   ,   ' '   ,   ' '   ,   ' '   ,   ' eyes '   ,   \" ' \"   ,   ' '   ]     collections   import   Counter   word _ counts   =   Counter   (   words   )   #   频率 3 单词   top _   =   word _ counts   .   _ common   (   3   )   print   (   top _   )   #   Outputs   [ ( ' eyes ' ,   8 ) ,   ( ' ' ,   5 ) ,   ( ' ' ,   4 ) ]   Counter   对象 字典 子类 ， 字典 方法 都 ， 不 赘述 。   update   方法 理解 为同 key 之间 加法 ，     subtract   方法 看作 key 之间 减法 。 还 做 :   加减 运算 提及   update   方法   subtract   方法 区别 ， 加法 大体 类似 ， 减法 将会 自动 去掉 计数 小于 等于零 项 ，   subtract   方法 。   > > >   a   =   Counter ( words )   > > >   b   =   Counter ( morewords )   > > >   a   Counter ( { ' eyes ' :   8 ,   ' ' :   5 ,   ' ' :   4 ,   ' ' :   3 ,   ' ' :   3 ,   ' ' :   2 ,   \" ' \" :   1 ,   \" don ' t \" :   1 ,   ' ' :   1 ,   ' ' :   1 } )   > > >   b   Counter ( { ' eyes ' :   1 ,   ' ' :   1 ,   ' ' :   1 ,   ' ' :   1 ,   ' ' :   1 ,   ' ' :   1 ,   ' ' :   1 ,   ' ' :   1 } )   > > >   #   Combine   counts   > > >   c   =   a   +   b   > > >   c   Counter ( { ' eyes ' :   9 ,   ' ' :   5 ,   ' ' :   4 ,   ' ' :   4 ,   ' ' :   3 ,   ' ' :   2 ,   ' ' :   2 ,   \" ' \" :   1 ,   \" don ' t \" :   1 ,   ' ' :   1 ,   ' ' :   1 ,   ' ' :   1 ,   ' ' :   1 ,   ' ' :   1 ,   ' ' :   1 } )   > > >   #   Subtract   counts   > > >   d   =   a   -   b   > > >   d   Counter ( { ' eyes ' :   7 ,   ' ' :   5 ,   ' ' :   4 ,   ' ' :   3 ,   ' ' :   2 ,   ' ' :   2 ,   \" ' \" :   1 ,   \" don ' t \" :   1 ,   ' ' :   1 } )   > > >   数据结构 最为 数值 统计 频数 ， 调用   _ common ( n )   方法 ， n 排行榜 前 n 名 。   字符串 大小   读者 实验 python 中 字符串 之间 大小 ：   > > >   ' abc '   >   ' ab '   True   > > >   ' fabc '   >   ' abc '   True   > > >   ' 3.04 '   >   ' 3 '   True   特性 很 有用 ， 大小 ？ python 官方 文档 描述 ， 采用 词典 编纂 顺序 。 描述 信息 ：   序列 之间 大小 ， 两个 序列 第一个 元素 ， ， 下 一个 ， 一个 序列 穷尽 。 两个 序列 类型 都 ， 过程 。 两个 序列 ， 一个 序列 一个 序列 子 序列 ， 短 序列 比长 序列 小 。 一个 元素 大小 ， ASCII 顺序 。   中文 大小 ？   读者 会 想到 ， python 中 字符串 都 默认 unicode 编码 （ utf - 8 ） ， 中文 大小 ， 事实 确实 ：   > > >   ' 章 '   >   ' 张 '   True   > > >   ' 章 '   <   ' 张 '   False   > > >   ord ( ' 章 ' )   31456   > > >   ord ( ' 张 ' )   24352   感兴趣 读者 打开 字符 映射 表看 ， ' 张 ' unicode 编号 U + 5F20 ， 输入 0x5f20 ， 返回 正是 24352 。 输入 hex ( 24352 ) ， 返回 ' 0x5f20 ' 。   ord chr 函数   ord 函数 接受   一个   字符 ， 返回 unicode 编码 ， 十进制 。 chr 函数 ord 函数 反向 ， 输入 24352 十进制 uniocde ， 返回 字符 。   > > >   chr ( 24352 )   ' 张 '   ， python3 字符串 大小 ， 基于 utf - 8 编码 。   对象 动态 加载 一个 方法   参考   网页   。   原理 很 简单 ， 构建 一个 函数 对象 ， 对象 赋值 对象 。 函数 对象 接受 参数 ， 类 方法 。   class   Test   ( ) :   pass   test   =   Test   ( )   def     (     ) :   print   (   \" \"   )   import   types   test   .     =   types   .   MethodType   (     ,   Test   )   test   .     ( )   types . MethodType 用来 构建 一个 类 方法 ， 第一个 参数 函数 对象 ， 第二个 参数 类 实例 。   例子 优化 形式 :   import   types   class   Test   ( ) :   @ classmethod   def   removeVariable   (   cls   ,     ) :   return   delattr   (   cls   ,     )   @ classmethod   def   addMethod   (   cls   ,   func   ) :   return   setattr   (   cls   ,   func   .   __ __   ,   types   .   MethodType   (   func   ,   cls   ) )   def     (     ) :   print   (   \" \"   )   test   =   Test   ( )   Test   .   addMethod   (     )   test   .     ( )   addMethod 作用 本类 ， 选择 作用 于本 实例 :   import   types   class   Test   ( ) :   @ classmethod   def   removeVariable   (   cls   ,     ) :   return   delattr   (   cls   ,     )   @ classmethod   def   addMethod   (   cls   ,   func   ) :   return   setattr   (   cls   ,   func   .   __ __   ,   types   .   MethodType   (   func   ,   cls   ) )   def   addMethod2   (     ,   func   ) :   return   setattr   (     ,   func   .   __ __   ,   types   .   MethodType   (   func   ,     ) )   def     (     ) :   print   (   \" \"   )   test   =   Test   ( )   test   .   addMethod2   (     )   test   .     ( )   函数 只加 实例 ， 用处 不太大 。   configparse 特殊字符   configparse 特殊字符 会 报错 ， 参考     ， 推荐   RawConfigParser   ， 解决问题 。",
            "tags":"python语言",
            "url":"articles/python-cookbook.html"
        },
        {
            "title":"windows下的linux子系统",
            "text":"WSL   windows10 新 概念 ， 大体 看做 mingw cygwin 替代 。 windows WSL 开发 更新 ， 发现 东西 解决 程序 linux 下能 跑 windows 下 跑 。   WSL 配置   管理员 方式 运行 powershell ， 运行 ：   Enable - WindowsOptionalFeature   - Online   - FeatureName   Microsoft - Windows - Subsystem - Linux   重启 系统 。 做 ， wsl 会 提示 错误 。   进去 设置 用户名 密码 ， 没什么 好 说 ， 用户名 不 root 。   windows 系统   Settings   - >   Update     Security - >   For   develops   打开   Devoloper   Mode ， 不 ， 推荐 做 ， 参看   官方 文档   。   windows 下 输入 bash ubuntu 系统 ，   ssh 连接   NOTICE ：   小节 可选项 ， 不看 。   修改   / / ssh / sshd _ config   配置 ， 推荐 端口号 改为   2222   ， windows 系统 外面 ssh 服务 会 占用 22 端口 ， ：   UsePrivilegeSeparation     # wsl chroot   PasswordAuthentication     ListenAddress   127.0 . 0.1   #     会 提示 文件 找 不到 错误 ， ：   sudo   ssh - keygen   - t   rsa   - f   / / ssh / ssh _ host _ rsa _ key   sudo   ssh - keygen   - t   ecdsa   - f   / / ssh / ssh _ host _ ecdsa _ key   sudo   ssh - keygen   - t   ed25519   - f   / / ssh / ssh _ host _ ed25519 _ key   重启 ssh 服务 ， 不大 ：   sudo   service   ssh   - - full - restart   NOTICE :   ubuntu 关闭 ， ssh 连不上 ， 网上 解决方案 说 制作 一个 开机 脚本 后台 启动 ， 太 麻烦 ， 不 折腾 ， 开发 打开 ssh 服务 。   额外 安装 软件包   gcc   g ++   make   cmake   gdb 软件包   WSL   安装 ， 推荐 一并 安装 ：   sudo   apt   update   sudo   apt   upgrade   sudo   apt   install   build - esstial   c 语言 开发 环境 搭建 ， WSL   人 一种 怪怪的 感觉 ， 很 好 ， 算是 一种 尝试 。   参考资料   wsl 官方 文档   wsl ssh 配置",
            "tags":"tools",
            "url":"articles/wsl.html"
        },
        {
            "title":"redis",
            "text":"redis 基础   redis 简单 来说 一个 基于 内存 k - v 存储 数据库 ， 具体内容 很 ， 再 慢慢 详细 讨论 。   python 接口     set 操作 都 很 直观 简单 ， 不 说 ， 数据类型 ， 先 字符串 型 即可 ， ， ， redis 存储 数字 1 会 字符串 \" 1 \" 。   一个 简单 获取 redis 连接 函数 所示 ：   def   _ redis _ client   (   db   =   0   ) :   host   =   settings   [   ' redis '   ]   .     (   ' host '   ,   ' localhost '   )   port   =   settings   [   ' redis '   ]   .     (   ' port '   ,   6379   )   redis _ client   =   redis   .   StrictRedis   (   host   =   host   ,   port   =   port   ,   db   =   db   ,   decode _ responses   =   True   )   return   redis _ client   看   decode _ responses = True   ， 加上 目的 python 接受 字符串 bytes 型 ， 字符串 型 ， 大部分 来说 都 会 希望 返回 字符串 型 。   字典 类型   确切 描述   hash   表 ， 大体 python 字典 类型 。   127.0 . 0.1 : 6379 >   hmset   x   a   1   OK   127.0 . 0.1 : 6379 >   hgetall   x   1 )   \" a \"   2 )   \" 1 \"   127.0 . 0.1 : 6379 >   hmset   x   b   2   OK   127.0 . 0.1 : 6379 >   hgetall   x   1 )   \" a \"   2 )   \" 1 \"   3 )   \" b \"   4 )   \" 2 \"   设置 过期 时间   设置 key 过期 时间 ，   请 参看   expire     pexpire   命令 。",
            "tags":"数据库",
            "url":"articles/redis.html"
        },
        {
            "title":"xpath",
            "text":"前言   东西 简单 下 即可 ， 看 例子 。   /   路径 表达 ， 下个 节点   / /   路径 表达 ， 任意 位置 下个 节点     /   下个 节点 中 匹配 ，   / /   下个 子 节点 匹配 。   / / div [ @ id = ' ' ]   id 定位   / / div [ @ id = ' ' ] / a [ 1 ]   id 定位 后 找 第一个 a 标签   / / div [ @ id = ' ' ] / a [ * ]   id 定位 后 找 a 标签     *   。   / / div [ @ ]   找 属性 div 标签   / / div [ @ = ' ' ]   找 属性 等于 div 标签   / / * [ ( @ class , ' ' ) ]   找 标签 class 属性     NOTICE :   ， 多个 class 属性 匹配   class = \"   _ \"   / / div [ @ class = ' ' ]   目标 标签 class 属性 ， 匹配   class = \" \"   / / * [ @ id = \" list \" ] / / dd [ * ] / a [ @ href     @ title ]   找 id = list 标签 dd 标签 a 标签 ， a 标签 href title 属性 。   / / title [ @ * ]   选择 title ， 随意 属性 ， title 标签 属性   选择 内容   选择 属性   / / * [ @ id = \" list \" ] / / dd [ * ] / a [ @ href     @ title ] / @ href   选择 文本   / / title / text ( )   string   选择 节点 （ 返回 节点 集   nodeset 只取 第一个 ） ， 节点 （ 包括 子 节点 ） 文本 抽取 合并 。   string ( / / div [ @ class = \" lemma - summary \" ] )   参考资料   阮 一峰 写 xpath 入门教程   w3school xpath 教程   一篇 xpath 写 不错 博文",
            "tags":"python爬虫",
            "url":"articles/xpath.html"
        },
        {
            "title":"setuptools和pip等相关",
            "text":"setup . py 配置   模块 一章 里 python 模块 包 知识 python 相关 生态圈 知识 谈及 ， 一并 本章 中 。 本章 知识 理解 前人 编写 有用 模块 包 基础 ， 编写 模块 包 基础 。   请 Github 上   pyskeleton 项目   阅读 本章 。   官方 内置 distutils 模块 类似 功能 ， 更 常用 第三方 模块 setuptools ， 相当于 distutils 模块 加强版 ， 初学者 推荐 setuptools 模块 。 更 内容 请 参看 setuptools 模块   官方 文档   。   安装 先 安装 pip3 ：   sudo   apt -   install   python3 - pip   pip3 安装 setuptools ：   sudo   pip3   install   setuptools   最 简单 \" setup . py \" 文件 所示 ：     setuptools   import   setup   ,   find _ packages   setup   (     =   \" HelloWorld \"   ,   version   =   \" 0.1 \"   ,   packages   =   find _ packages   ( ) ,   )   第一行 是从 setuptools 模块 中 引入 setup 函数   find _ packages   函数 。   setup 函数 接受 一系列 字典 值 ， setup 函数 字典 值 含义 慢慢 道 ：     软件 名字   version   软件 版本号   author   软件 作者   author _ email   软件作者 邮箱   maintainer   软件 维护者   maintainer _ email   软件维护 邮箱   contact   软件 联系人 。 不写 ， 维护者 名字 ， 作者 名字 。   contact _ email   软件 联系人 邮箱 ， 不写 ， 维护者 邮箱 ， 作者 邮箱 。   license   软件 license   url   软件 项目 主页 地址   description   软件 简要 描述   long _ description   软件 完整 描述 ， 定义 一行 函数 ， 读取 本地 目录 README . md 文件 。   import   codecs   def   long _ description   ( ) :     codecs   .   open   (   ' README . md '   ,   encoding   =   ' utf - 8 '   )     f   :   return   f   .   read   ( )   platforms   软件 测试 运行 平台   classifiers   软件 分类 ， 请 参考   网页   给出 值 。 字符串 列表 。   keywords   软件 pypi 上 搜索 关键词 ， 字符串 列表 。   packages   软件 依赖 模块 。 ：   packages   =   find _ packages ( )   文件夹 下   __ init __. py   文件 ， 都 视作 python 模块 包 ， 其内 py 文件 都 进去 。   手工 输入 模块 名字 ， 字符串 列表 。   entry _ point   entry _ points   =   {   ' console _ scripts '   : [   ' zwc = zwc . zwc : main ' , ] ,   }   zwc shell 调用 名字 ， zwc 模块 ， 一个 zwc 主 模块 子 模块 ， main main 函数 。 shell 调用 程序 接口 。 类似 gui _ script 控制 调用 GUI 图形 命令 入口 。   install _ requires   接受 字符串 列表 值 ， 依赖 pip 安装 模块 名 放入 进去 ， 软件 安装 会 自动检测 安装 依赖 模块 。   setup _ requires     install _ requires   类似 ， 侧重于   setup . py   依赖 。   setup _ requires   依赖 模块 下载 ， 还 安装 ，   setup . py   还 执行 。 希望 依赖 模块   setup . py   可用 ， 依赖 模块   install _ requires     setup _ requires   中 。   package _ data   软件 模块 额外 附加 （ py 文件 ） 文件 ， 设置 类似   { \" skeleton \" : [ ' * . txt ' ] , }   skeleton 软件 模块 （ 文件夹 名 ） ， 跟着 一系列 文件名 列表 ， 接受 glob 语法 。 只能 包含 模块 文件夹 packages 控制 文件夹 内容 。   include _ package _ data   设置 True   不 常用 属性 值列 ：   scripts   不 推荐 ， 推荐 entry _ point 生成 脚本 。   py _ modules   不 推荐 ， 推荐 packages 管理 模块 。   data _ files   package _ data 只能 模块 文件夹 数据文件 ， 数据文件 包含 ， data _ files 控制 ， 跟着 参数 格式 例子 所示 ：   data _ files   =   [ ( ' icos ' , [ ' icos / wise . ico ' ] ) ] ,   # 这是 添加 icos 文件夹 wise . ico 文件   data _ files   =   [ ( ' ' , [ ' skeleton . tar . gz ' ] ) ] ,   # 这是 添加 主目录 下 skeleton . tar . gz 文件   值得一提的是 data _ files 接受 glob 语法 。   data _ files 不 推荐 ， 推荐 package _ data 管理 ， pkg _ resources 方法 引用 资源 文件 。 请 看 。   pip develop 模式   小节 参考     。   第三方 包 不 修改 ，   python   setup . py   install   ， 写 包 ， 频繁 变动 ， 加载 引用 本地 文件夹 ， 推荐 采用   python   setup . py   develop   命令 安装 。     pip   install   - e   .   命令 ， 安装 本地 文件夹 develop 模式   python   install   .   。   pipenv   pipenv   install   - e   .   develop 模式 ， 修改 代码 会 实时 生效 。   pkg _ resources 模块 管理 读取 资源 文件   所示 ：     pkg _ resources   import   resource _ filename   resource _ stream   (   ' wise '   ,   ' icos / Folder - Documents . ico '   )   第一个 参数 模块 名字 ， 第二个 参数 模块 中 文件 相对路径 表达 。   例子 resource _ filename ， 返回 引用 文件名 。 命令 ： resource _ string ， 参数 resource _ filename ， 返回 字节 流 。 字节 流 赋值 变量 ， 存储 文件 。   pypi 上 注册 软件   很 简单 ，   python3   setup . py   register   pypi 官 网上 注册 一个 帐号 ， 软件 不 注册 成功 ， 很多 好 名字 都 别人 取 。 。   pypi 上 上传 软件   python3   setup . py   sdist   upload   下载 pypi 上 软件 源文件   参考   网页   。   pip   install   - - download = \" / pth / / downloaded / files \"   package _   python 虚拟环境 管理   Virtualenv 模块 作用 建立 一个 封闭 独立 python 开发 环境 ， 一个 python 项目 开发 会 涉及 多个 模块 ， 激活 virtualenv 环境 ， pip 命令 安装 模块 安装 项目 文件夹 内 ， 建立 单独 固定 模块 版本 开发 环境 。 python 虚拟环境 ， 控制 python 版本 ， 控制 python 模块 版本 ， 项目 类似 绿色 安装版 可移植性 。   安装 pip 安装 常规 安装 即可 。   sudo   pip   install   virtualenv   新建 一个 项目   新建 一个 项目 virutalenv 命令 ， 一个 文件夹 名字 ， 下 新建 文件夹 名字 。   virutalenv   [ path ]   path 项目 名字 ， 下会 创建 名字 文件夹 ， 设定   \" . \"   ， 文件夹 下 创建 。   常用 选项 ：   - - python = python2     - - python = python3   不 指定 选项 ， 虚拟环境 会 操作系统 默认 python 版本 。   - - system - site - packages   ， 加上 选项 ， 虚拟环境 安装 系统 里 去 python 模块 。 参考   网页   ， 很 值得一提 小 技巧 ， 设定 venv 引用 系统 级 python 模块 ， 不想 ， 不 重新安装 虚拟环境 ， 只 虚拟环境 中 创建 一个 空白 文件 即可 ：   lib / python3.5 / - global - site - packages . txt   想 引用 系统 级 python 模块 ， 文件 删除 即可 。   激活 本地 虚拟环境   运行 命令 本地 虚拟环境 ：   cd   venv   source   bin / activate   激活 虚拟环境 ， python 虚拟环境 设定 python 解释器 ， pip 安装 模块 安装 虚拟环境 之下 。   退出 本地 虚拟环境   运行 deactivate 命令 即可   deactivate   pipenv 模块   强烈推荐 读者 下 pipenv 模块 。",
            "tags":"python语言",
            "url":"articles/python-setuptools-pip.html"
        },
        {
            "title":"django后台api编写之-模板",
            "text":"模板 基本概念   模板 样子 ， 模板 继承 ， block   ， 循环 ， 过滤 ， 。 熟悉 jinja2 模板 同学 稍微 看 下 大致 。   { %   extends   \" base _ generic . html \"   % }   { %   block   title   % } { {   section . title   } } { %   endblock   % }   { %   block   content   % }   < h1 >   { {   section . title   } }   < / h1 >   { %     story     story _ list   % }   < h2 >   < a   href = \"   { {   story . _ absolute _ url   } }   \" >   { {   story . headline   |   upper   } }   < / a >   < / h2 >   < p >   { {   story . tease   |   truncatewords   : \" 100 \"   } }   < / p >   { %   endfor   % }   { %   endblock   % }   django 查找 模板   django settings . py ：   PROJECT _ DIR   =   os . path . dirname ( os . path . dirname ( os . path . abspath ( __ file __ ) ) )   TEMPLATES = [   {   ' BACKEND ' : ' django . template . backends . django . DjangoTemplates ' ,   ' DIRS ' : [   os . path . join ( PROJECT _ DIR , ' templates ' ) ,   ] ,   默认 app 下 templates 文件 里 都 会 递归 遍历 查找 ， DIRS 加上 一个 文件夹 ， settings . py 所在 文件夹 下 templates 文件夹 会 去 遍历 。   模板 文件 都 会 合并 ， 模板 覆盖 机制 ， 无谓 覆盖 ， 模板 原则上 推荐 结构 templates ， app ， 都 再 新建 一个 目标 app 名字 ， 再 新建 模板 文件 。 稍 小 项目 扔 templates 不 大 。   想 覆盖 django 自带 admin 界面 ， 就要 templates 新建 一个 admin 文件夹 ， 模板 文件 ， 研究 下 django 源码 。   django 变量 传给 javascript   NOTICE :   不 推荐 写法 ， 推荐 走 ajax 通道 传 数据 。   django 视图函数 render context 字典 值 ， 字段 值 传给 django 模板 里 变量 ， ， django 变量 传递 javascript 。 小节 参考   网页   。   传递 字 段 建议 json 封装 下 ：     django . core . serializers . json   import   DjangoJSONEncoder   {     :   json   .   dumps   (   data   [   ' content _ images '   ] ,   cls   =   DjangoJSONEncoder   )   }   javascript ：   var     =   JSON . parse ( \"   { {     |   safe   |   escapejs   } }   \" )     safe     escapejs   过滤器 。",
            "tags":"django",
            "url":"articles/django-templates.html"
        },
        {
            "title":"sqlalchemy模块",
            "text":"前言   老实 说 sqlalchemy 模块 特别 难 学 ， 原因 倒 模块 本身 ， 阻碍 很 好 学习 模块 心态 ， 学习 sqlalchemyORM 封装 就行了 ， 不用 学习 SQL 语句 。 这是 错误 。 学好 sqlalchemy 先 学习 好 SQL 语句 ， 发挥 出 sqlalchemy 威力 ， 先 学会 SQL 语句 SQL 。 一个 误区 ， 上 不 orm 层 接口 。 实际上 sqlalchemy 模块 内容 很 ， 很 灵活 。 取代 sqlite3 模块 psycopg2 模块 初级 DB   API ， 还 提供 高级 ORM 封装 。   安装   sqlalchemy 安装简单 pip3 命令 安装 即可 :   sudo   pip3   install   sqlalchemy   引用 惯例   都 默认 引用 :     sqlalchemy   import   *   再 提及 ， 凡是     sqlalchemy   import     语句 都 归于 上 一条 引用 。   简介   sqlalchemy 连接 数据库 ， 工作 做 ， 参考   sqlalchemy   architecture   一文 描述 :   数据库 相连 熟悉 DBAPI 接口 模块 ， :   sqlite3 ,   pymysql ,   psycopg2 ， 核心层 Engine ， 连接池 ， 方言 ， SQL 表达 语言 类型 系统 。 core 层 很 ， 实际上 模块 建构 core 层 之上 ， 不 要用 ORM 方法 。   非 ORM 风格   创建 一个 Engine   创建 一个   Engine   对象 实际上 数据库 连接 操作 。   create _ engine   函数 创建 Engine 对象 ， 连接 数据库 ， 操作 才 会 去 连接 。   连接 sqlite3   连接 sqlite3   - memory   engine   =   create _ engine ( ' sqlite : / / ' )   推荐 采用 写法 :   engine   =   create _ engine ( ' sqlite : / / / : memory : ' )   谈及 sqlalchmy _ utils   database _ exists   函数 工作 。   连接 sqlite3   - disk   engine   =   create _ engine ( ' sqlite : / / / sqlite3 _ learning _ . db ' )   db 文件 创建 命令行 当前工作 目录 下 ， 相对路径 表达 。 还 写 上 绝对路径 表达 :   engine   =   create _ engine ( ' sqlite : / / / / absolute / path / / foo . db ' )   三个 斜杠 线 基础 上 还 加上 一个 斜杠 线 。 形式 通用 表达 ， 必定 两个 斜杠 线 ， 第二个 斜杠 线 第三个 斜杠 线 之间 登录 信息 描述 ， sqlite3 信息 ， 空 ， 所示 :   dialect : / / username : password @ host : port / database   方言 系统 再 加上 驱动 :   dialect + driver : / / username : password @ host : port / database   方言 :   sqlite :   默认 driver 官方   sqlite3   模块 ， 不 改动 。   mysql :   默认 dirver   mysql - python   ， 推荐   pymysql   ， pip 安装 。   engine   =   create _ engine ( ' mysql + pymysql : / / root @ localhost / test ' )   postgresql :   默认 driver   psycopg2   ， 还 行 。   oracle :   默认 driver   cx _ oracle   。   mssql :   默认 driver   pyodbc   。   连接 mysql   engine   =   create _ engine ( ' mysql + pymysql : / / localhost / mysql _ db ' )   确保 安装 pymysql :   sudo   pip3   install   pymysql   连接 postgresql   engine   =   create _ engine ( ' postgres : / / rick : foo @ localhost : 5432 / pg _ db ' )   MetaData 对象   MetaData 对象 看作 Table 层 更 高 一级 抽象 ， 存放 Table 对象 metadata 描述 信息 。 一个 简单 理解 一个 MetaData 对象 看作 sqlalchemy 内部 database 概念 。   创建 一个 unbound   MetaData 对象     MetaData ( )   默认 创建 一个 unbound   MetaData 对象 。   metadata   =   MetaData ( )   bind 一个 Engine 对象   一个 unbound   MetaData 对象   bind   一个 Engine 对象 。   engine   =   create _ engine ( ' sqlite : / / ' )   metadata   =   MetaData ( )   metadata . bind   =   engine   创建 指定 :   engine   =   create _ engine ( ' sqlite : / / ' )   metadata   =   MetaData ( engine )   还 engine URL 表达 后台 自动 创建 一个 engine ， :   metadata   =   MetaData ( ' sqlite : / / ' )   初学者 最   BoundMetaData   ， 谈及 方法 创建 一个   BoundMetaData   对象 ， Table 对象 关联   BoundMetaData   对象 ， Table 对象 :   table . create ( )   创建 。   测试 数据库     sqlalchemy _ utils   想法 来自   网页   。     sqlalchemy   import   *     sqlalchemy _ utils   import   database _ exists   ,   create _ database   def   init _ sqlalchemy   (   dburl   ,   echo   =   True   ) :   engine   =   create _ engine   (   dburl   ,   echo   =   echo   )       database _ exists   (   engine   .   url   ) :   ### 确保 目标 数据库 。   create _ database   (   engine   .   url   )   metadata   =   MetaData   (   bind   =   engine   )   return   metadata   metadata   =   init _ sqlalchemy   (   ' sqlite : / / / test . db '   )     sqlalchemy _ utils   额外 安装 ， 利用   database _ exists   函数 检测 数据库 ， 不   create _ database   函数 创建 。     init _ sqlalchemy   函数 最 一个 参数   dburl   ， 细节 已 叙述 ， 正是 创建 Engine ， 基于 Engine 对象 创建 MetaData 对象 ， MetaData 对象 bind engine ， 返回 metadata 即可 ， metadata 。   实际操作 创建 一个 Table 对象 ， database 操作 ， 建议 如同 ， 都 提到 顶层 sqlalchemy _ utils 模块 。 类似   drop _ database   :   删除 database ， 参数 create _ database Engine 对象 url 。   创建 一个 Table 对象   一个 完整 例子 ， 创建 一个 Table 表格 。   db   谈及 MetaData 对象 ， 创建 Table 对象 第一个 参数 创建 SQL 表格 名字 ， 第二个 表格 bind MetaData 对象 ， 简单 理解 表格 对象 存入 MetaData 对象 代表 database 中 。 调用   db . create _ ( )   ， bind db 上 表格 都 创建 。 还   users . create ( )   单独 创建 表格 。     sqlalchemy   import   *     sqlalchemy _ utils   import   database _ exists   ,   create _ database   def   init _ sqlalchemy   (   dburl   ,   echo   =   True   ) :   engine   =   create _ engine   (   dburl   ,   echo   =   echo   )       database _ exists   (   engine   .   url   ) :   ### 确保 目标 数据库 。   create _ database   (   engine   .   url   )   metadata   =   MetaData   (   bind   =   engine   )   return   metadata   db   =   init _ sqlalchemy   (   ' sqlite : / / / test . db '   )   users   =   Table   (   ' users '   ,   db   ,   Column   (   ' user _ id '   ,   Integer   ,   primary _ key   =   True   ) ,   Column   (   ' '   ,   String   (   40   ) ) ,   Column   (   ' age '   ,   Integer   ) ,   Column   (   ' password '   ,   String   ) ,   )   db   .   create _   ( )   利用 已 Table   数据库 Table ， 创建 一个 Table 对象 ， 只 做 Table 对象 :   users   =   Table ( ' users ' , db , autoload = True )     autoload   设置 True 即可 。 db metadata ， bind metadata 对象 ， 还 未 bind ， 还 加上 autoload _ 参数 。   数据库 中 创建表格   metadata 对象 ， 调用   create _   方法 创建 表格 （   checkfirst   参数 。 ） :   db . create _ ( )   Table 对象 调用   create   方法 来自 创建 。 推荐 加上   checkfirst = True   设置 ， 就算 数据库 中该 表格 报错 。 所示 :   users . create ( checkfirst = True )   类似 用法 用于 安装 删除 表格 ， 表格 不 报错 :   users . drop ( checkfirst = True )   代码 改成 样子 :     :   users   =   Table   (   ' users '   ,   db   ,   autoload   =   True   )     sqlalchemy   .   exc   .   NoSuchTableError   :   users   =   Table   (   ' users '   ,   db   ,   Column   (   ' user _ id '   ,   Integer   ,   primary _ key   =   True   ) ,   Column   (   ' '   ,   String   (   40   ) ) ,   Column   (   ' age '   ,   Integer   ) ,   Column   (   ' password '   ,   String   ) ,   )     NoSuchTableError   ，   autoload = True   获取 Table 对象 数据库 中 不 ， 抛出 异常 。   列 属性 设置   创建表格 对象 一系列 参数 列 Column 对象 ， 第一个 参数 列 名字 ， 第二个 参数 该列 存储 值 类型 ， 还 可选项 属性 进一步 修饰 。 所示 :   primary _ key :   设置 列为 主键 列 称之为 主键 约束   unique :   该列 加上 唯一 约束 ， 列 值 重复 。 主键 约束 一种 唯一 约束 。   nullable :   该列 为空   default :   该列 默认值 设置   index :   该列 索引   auto _ increment :   Integer 列 数值 自动 递增   ForeignKey ( ' brand . id ' ) :   设置 外键 约束   CheckConstraint ( ' amount   >   0 ' ) :   设置 Check 约束   onupdate :   最 常见 用法 :   onupdate = datetime . utcnow   update 调用 callable 对象 。   列 数据类型 声明   列 存储 值 类型 描述 详细 介绍 ， 更 信息 请 参看 文档 查看 。   Class     Python   Type   SQL   Type   (   SQLitedriver )   Arguments   String   string   TEXT     VARCHAR   length   Integer   int   INTEGER     SmallInteger   int   SMALLINT     Numeric   float , Decimal   NUMERIC   precision = 10 ,   length = 2   Float   float   NUMERIC   precision = 10   DateTime   datetime . datetime   TIMESTAMP     time   datetime . time   TIME     Date   datetime . date   DATE     Binary   byte   string   BLOB   length   Boolean   bool   BOOLEAN     Unicode   unicode   TEXT     VARCHAR   length   大致 ， sqlalchemy 类名 大致 等同 ， 一个 上 名字 。   FLOAT :   等同于   Numeric   TEXT :   等同于   String   DECIMAL :   等同于   Numeric   INT :   等同于   Integer   INTEGER :   等同于   Integer   TIMESTAMP :   等同于   DateTime   DATETIME :   等同于   DateTime   CLOB :   等同于   String   VARCHAR :   等同于   String   CHAR :   等同于   String   NCHAR :   等同于   Unicode   BLOB :   等同于   Binary   BOOLEAN :   等同于   Boolean   mysql 方言 额外 类型   Class     Python   type   SQL   type   Arguments   MSEnum   string   ENUM   values   MSTinyInteger   int   TINYINT   length   MSBigInteger   int   BIGINT   length   MSDouble   float   DOUBLE   length = 10 , precision = 2   MSTinyText   string   TINYTEXT     MSMediumText   string   MEDIUMTEXT     MSLongText   string   LONGTEXT     MSNVarChar   unicode   NATIONAL   VARCHAR   length   MSTinyBlob   byte   string   TINYBLOB     MSMediumBlob   byte   string   MEDIUMBLOB     MSLongBlob   byte   string   LONGBLOB     MSBinary   byte   string   BINARY   length   MSVarBinary   byte   string   VARBINARY   length   MSSet   set   SET   set   values   MSYear   int   YEAR   length   MSBit   long   BIT   length   postgresql 额外 类型   Class     Python   type   SQL   type   Arguments   PGArray     TypeEngine   type   engine [ ]   TypeEngine   PGBigInteger   int , long   BIGINT     PGInet     INET     PGInterval     INTERVAL     Oracle 额外 类型   Class     Python   type   SQL   type   Arguments   Oracle   byte   string   RAW   length   JSON 支持   特别 值得 提 ， 主流 数据库 都 支持 JSON 数据 。 sqlalchemy JSON 字 段 类型 ， postgresql 很 早就 支持 ， mysql 版本   >   5.7 . 5   支持 ， 估计 大多 超过 版本 。   很 好 ， 强烈推荐 读者 去 下 ， 时间 补 上 技巧 ：   TODO   insert 语句   谈及 Table 对象 调用   insert   方法 即可 一个 临时 表达 语句 对象 （ 大概 类似 东西 ， 词是 杜撰 。 ） ， 执行   i   =   users . insert ( )   :   > > >   type ( i )   < class   ' sqlalchemy . sql . dml . Insert ' >   > > >   str ( i )   ' INSERT   INTO   users   ( user _ id ,   ,   age ,   password )   VALUES   ( ,   ,   ,   ) '   > > >   i 临时 表达 语句 对象   execute   方法 ， 接受 参数 ， 所示 :   i   =   users . insert ( )   i . execute ( = ' Mary ' ,   age = 30 ,   password = ' secret ' )   语句 执行 ， 数据 插入 进 数据库 。 还 execute 方法 插入 多个 值 ， 所示 :   i . execute ( { ' ' :   ' John ' ,   ' age ' :   42 } ,   { ' ' :   ' Susan ' ,   ' age ' :   57 } ,   { ' ' :   ' Carl ' ,   ' age ' :   33 } )     insert   ignore   语句 ， :   i   =   users . insert ( ) . prefix _ ( '   ignore ' )   ' INSERT     ignore   INTO   users   ( user _ id ,   ,   age ,   password )   VALUES   ( ,   ,   ,   ) '   > > >   例子 sqlite 情况 ， mysql 写成   . prefix _ ( ' ignore ' )   形式 。   额外 值得一提的是 :   重复 刷 ， primary _ key ，   user _ id   指定 ， ignore 逻辑 基于 主键 列 不 重复 。   delete 语句   delete 语句 类似 insert 语句 谈及 ， SQL   delete 语句 情况 ， 其为 第一个 选 参数 过滤 字句 ， 所示 :   d   =   users . delete ( users . c . password   = =   None )   > > >   str ( d )   ' DELETE   FROM   users   WHERE   users . password   IS   NULL '     users . c . password   用法 ， 细节 再 讨论 ， 大体 users 表格 password 一列 其值 等于 None （ NULL ） ， python 中     None   写法 试 不行 。   delete 语句 users 表格 中 password 为空 行 都 删除 ， 构建 delete 语句 时 ， 不填 语句 ， 表格 记录 都 删除 。   d   =   users . delete ( )   update 语句   update 语句 ， 更新 几个 user password 。   update   语句 参数设置 :   update ( whereclause = None ,   values = None ,   inline = False ,   * * kwargs )   第一个 选 参数 delete   whereclause   过滤 字句 ， 第二个 values 一个 字典 值 ， 用来 设置 值 。 演示 构建 update 语句 风格 ， 风格   insert   ,   update   ,   select   语句 构建 。   u1   =   users . update ( )   u2   =   u1 . ( users . c .   = =   ' John ' ) . values ( password = ' 123456 ' )   > > >   str ( u1 )   ' UPDATE   users   SET   user _ id = ,   = ,   age = ,   password = '   > > >   str ( u2 )   ' UPDATE   users   SET   password =   WHERE   users .   =   '   str 显示 参数 打进去 ，   u2 . execute ( )   执行 会 实际效果 。   select 语句   select 语句 谈论   insert   语句 构建 过程 类似 ， SQL 中 select 语句 情况 较为 ， select 语句 还 查询 返回值 ， 东西 很多 。   看 函数 :   def   show _ squery   (   squery   ) :   res   =   squery   .   execute   ( )     r     res   :   print   (   r   )   select 语句 执行 返回   ResultProxy   对象 ， 语句 迭代 。 不带 参数 select 语句 返回 Table 行 :   > > >   show _ squery ( users . select ( ) )   ( 1 ,   ' Mary ' ,   30 ,   ' secret ' )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' )   ( 3 ,   ' Susan ' ,   57 ,   None )   ( 4 ,   ' Carl ' ,   33 ,   None )   :   > > >   show _ squery ( users . select ( users . c . = = ' John ' ) )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' )   这是   _     &   用法 :   > > >   show _ squery ( users . select ( _ ( users . c . age   <   40   ,   users . c .   ! =   ' Mary ' ) ) )   ( 4 ,   ' Carl ' ,   33 ,   None )   > > >   show _ squery ( users . select ( ( users . c . age   <   40 )   &   ( users . c .   ! =   ' Mary ' ) ) )   ( 4 ,   ' Carl ' ,   33 ,   None )   类似   _     |   做 逻辑   ;     _     \" ~ \"   做 逻辑 非 。     startswith   ,     ,   endswith   users . select ( users . c . . startswith ( ' M ' ) )       ,   _   :   users . select ( users . c . age . ( 30 , 39 ) )   users . select ( users . c . . _ ( ' Mary ' ,   ' Susan ' ) )   ResultProxy 对象   select 语句 执行 后 返回 ResultProxy 对象 迭代 外 方法 。   fetchone :   取 一行 ，   RowProxy   对象 ， 可用 api 会 描述 。   fetchmany :   取 多行 ， 返回 一个 列表 ， 其内 装着   RowProxy   对象 。   fetchall :   取 行 ， fetchmany 不 指定 size 等同于 取 行 ， 返回 一个 列表 ， 其内 装着   RowProxy   对象 。   scalar :   keys :   rowcount :   close :   RowProxy 对象   ResultProxy 对象 迭代 ， fetchone ， fetchmany ， fetchall 方法 ， RowProxy 对象 ， 数据库 一行 记录 。 对象 api 操作 很 灵活 ， 操作 一个 字典 操作 ， 类似 操作 namedtuple 般的 操作 ， 还 如同 列表   [ 0 ]   索引 方法 提取 一列 ， 所示 :   s   =   users . select ( )   rs   =   s . execute ( )   row   =   rs . fetchone ( )   > > >   row [ 0 ]   1   > > >   row .   ' Mary '   > > >   row [ ' password ' ]   ' secret '   多表 连接   代码 情况 所示 :   import   sqlalchemy     sqlalchemy   import   *     sqlalchemy _ utils   import   database _ exists   ,   create _ database   def   init _ sqlalchemy   (   dburl   ,   echo   =   True   ) :   engine   =   create _ engine   (   dburl   ,   echo   =   echo   )       database _ exists   (   engine   .   url   ) :   ### 确保 目标 数据库 。   create _ database   (   engine   .   url   )   metadata   =   MetaData   (   bind   =   engine   )   return   engine   ,   metadata   engine   ,   db   =   init _ sqlalchemy   (   ' sqlite : / / / test . db '   )     :   users   =   Table   (   ' users '   ,   db   ,   autoload   =   True   )     sqlalchemy   .   exc   .   NoSuchTableError   :   users   =   Table   (   ' users '   ,   db   ,   Column   (   ' id '   ,   Integer   ,   primary _ key   =   True   ) ,   Column   (   ' '   ,   String   (   40   ) ) ,   Column   (   ' age '   ,   Integer   ) ,   Column   (   ' password '   ,   String   ) ,   )   users   .   create   (   checkfirst   =   True   )   insert _ query   =   users   .   insert   ( )   .   prefix _   (   '   ignore '   )   insert _ query   .   execute   (   id   =   1   ,     =   ' Mary '   ,   age   =   30   ,   password   =   ' secret '   )   insert _ query   .   execute   ( {   ' id '   :   2   ,   ' '   :   ' John '   ,   ' age '   :   42   } ,   {   ' id '   :   3   ,   ' '   :   ' Susan '   ,   ' age '   :   57   } ,   {   ' id '   :   4   ,   ' '   :   ' Carl '   ,   ' age '   :   33   } )   delete _ query   =   users   .   delete   ( )   update _ query   =   users   .   update   ( )   update _ query   =   update _ query   .     (   users   .   c   .     = =   ' John '   )   .   values   (   password   =   ' 123456 '   )   update _ query   .   execute   ( )   def   run   (   query   ) :   query   .   execute   ( )   def   show _ squery   (   squery   ) :   res   =   squery   .   execute   ( )     r     res   :   print   (   r   )     :   emails   =   Table   (   ' emails '   ,   db   ,   autoload   =   True   )     sqlalchemy   .   exc   .   NoSuchTableError   :   emails   =   Table   (   ' emails '   ,   db   ,   Column   (   ' id '   ,   Integer   ,   primary _ key   =   True   ) ,   Column   (   ' address '   ,   String   ) ,   Column   (   ' user _ id '   ,   Integer   ,   ForeignKey   (   ' users . id '   ) ) ,   )   emails   .   create   (   checkfirst   =   True   )   insert _ query   =   emails   .   insert   ( )   .   prefix _   (   '   ignore '   )   insert _ query   .   execute   (   {   ' address '   :   ' mary @ . '   ,   ' user _ id '   :   1   } ,   {   ' address '   :   ' john @ . net '   ,   ' user _ id '   :   2   } ,   {   ' address '   :   ' john @ . org '   ,   ' user _ id '   :   2   } ,   {   ' address '   :   ' carl @ nospam . net '   ,   ' user _ id '   :   4   } ,   )   交叉 连接 笛卡尔 积   交叉 连接 情况 :   > > >   show _ squery ( select ( [ users , emails ] ) )   2015 - 10 - 28   20 : 27 : 21 , 721   INFO   sqlalchemy . engine . base . Engine   SELECT   users . id ,   users . ,   users . age ,   users . password ,   emails . id ,   emails . address ,   emails . user _ id   FROM   users ,   emails   2015 - 10 - 28   20 : 27 : 21 , 721   INFO   sqlalchemy . engine . base . Engine   ( )   ( 1 ,   ' Mary ' ,   30 ,   ' secret ' ,   1 ,   ' mary @ . ' ,   1 )   ( 1 ,   ' Mary ' ,   30 ,   ' secret ' ,   2 ,   ' john @ . net ' ,   2 )   ( 1 ,   ' Mary ' ,   30 ,   ' secret ' ,   3 ,   ' john @ . org ' ,   2 )   ( 1 ,   ' Mary ' ,   30 ,   ' secret ' ,   4 ,   ' carl @ nospam . net ' ,   4 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   1 ,   ' mary @ . ' ,   1 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   2 ,   ' john @ . net ' ,   2 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   3 ,   ' john @ . org ' ,   2 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   4 ,   ' carl @ nospam . net ' ,   4 )   ( 3 ,   ' Susan ' ,   57 ,   None ,   1 ,   ' mary @ . ' ,   1 )   ( 3 ,   ' Susan ' ,   57 ,   None ,   2 ,   ' john @ . net ' ,   2 )   ( 3 ,   ' Susan ' ,   57 ,   None ,   3 ,   ' john @ . org ' ,   2 )   ( 3 ,   ' Susan ' ,   57 ,   None ,   4 ,   ' carl @ nospam . net ' ,   4 )   ( 4 ,   ' Carl ' ,   33 ,   None ,   1 ,   ' mary @ . ' ,   1 )   ( 4 ,   ' Carl ' ,   33 ,   None ,   2 ,   ' john @ . net ' ,   2 )   ( 4 ,   ' Carl ' ,   33 ,   None ,   3 ,   ' john @ . org ' ,   2 )   ( 4 ,   ' Carl ' ,   33 ,   None ,   4 ,   ' carl @ nospam . net ' ,   4 )   内 连接   内 连接 情况 :   > > >   show _ squery ( select ( [ users , emails ] , users . c . id   = =   emails . c . user _ id ) )   2015 - 10 - 28   20 : 39 : 09 , 173   INFO   sqlalchemy . engine . base . Engine   SELECT   users . id ,   users . ,   users . age ,   users . password ,   emails . id ,   emails . address ,   emails . user _ id   FROM   users ,   emails   WHERE   users . id   =   emails . user _ id   2015 - 10 - 28   20 : 39 : 09 , 173   INFO   sqlalchemy . engine . base . Engine   ( )   ( 1 ,   ' Mary ' ,   30 ,   ' secret ' ,   1 ,   ' mary @ . ' ,   1 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   2 ,   ' john @ . net ' ,   2 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   3 ,   ' john @ . org ' ,   2 )   ( 4 ,   ' Carl ' ,   33 ,   None ,   4 ,   ' carl @ nospam . net ' ,   4 )   sqlalchemy 一种 更 智能 内 连接 用法 :   > > >   show _ squery ( join ( users ,   emails ) . select ( ) )   2015 - 10 - 28   20 : 40 : 17 , 502   INFO   sqlalchemy . engine . base . Engine   SELECT   users . id ,   users . ,   users . age ,   users . password ,   emails . id ,   emails . address ,   emails . user _ id   FROM   users   JOIN   emails   ON   users . id   =   emails . user _ id   2015 - 10 - 28   20 : 40 : 17 , 502   INFO   sqlalchemy . engine . base . Engine   ( )   ( 1 ,   ' Mary ' ,   30 ,   ' secret ' ,   1 ,   ' mary @ . ' ,   1 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   2 ,   ' john @ . net ' ,   2 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   3 ,   ' john @ . org ' ,   2 )   ( 4 ,   ' Carl ' ,   33 ,   None ,   4 ,   ' carl @ nospam . net ' ,   4 )   外 连接   外 连接 所示 ， 写入 顺序 。 第一个 连接 第二个 ， 过滤 条件 data 收进来 ， NULL 填充 。   > > >   show _ squery ( outerjoin ( users ,   emails ) . select ( ) )   2015 - 10 - 28   20 : 41 : 16 , 610   INFO   sqlalchemy . engine . base . Engine   SELECT   users . id ,   users . ,   users . age ,   users . password ,   emails . id ,   emails . address ,   emails . user _ id   FROM   users   LEFT   OUTER   JOIN   emails   ON   users . id   =   emails . user _ id   2015 - 10 - 28   20 : 41 : 16 , 610   INFO   sqlalchemy . engine . base . Engine   ( )   ( 1 ,   ' Mary ' ,   30 ,   ' secret ' ,   1 ,   ' mary @ . ' ,   1 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   3 ,   ' john @ . org ' ,   2 )   ( 2 ,   ' John ' ,   42 ,   ' 123456 ' ,   2 ,   ' john @ . net ' ,   2 )   ( 3 ,   ' Susan ' ,   57 ,   None ,   None ,   None ,   None )   ( 4 ,   ' Carl ' ,   33 ,   None ,   4 ,   ' carl @ nospam . net ' ,   4 )   > > >   show _ squery ( outerjoin ( emails ,   users ) . select ( ) )   2015 - 10 - 28   20 : 43 : 56 , 590   INFO   sqlalchemy . engine . base . Engine   SELECT   emails . id ,   emails . address ,   emails . user _ id ,   users . id ,   users . ,   users . age ,   users . password   FROM   emails   LEFT   OUTER   JOIN   users   ON   users . id   =   emails . user _ id   2015 - 10 - 28   20 : 43 : 56 , 590   INFO   sqlalchemy . engine . base . Engine   ( )   ( 1 ,   ' mary @ . ' ,   1 ,   1 ,   ' Mary ' ,   30 ,   ' secret ' )   ( 2 ,   ' john @ . net ' ,   2 ,   2 ,   ' John ' ,   42 ,   ' 123456 ' )   ( 3 ,   ' john @ . org ' ,   2 ,   2 ,   ' John ' ,   42 ,   ' 123456 ' )   ( 4 ,   ' carl @ nospam . net ' ,   4 ,   4 ,   ' Carl ' ,   33 ,   None )   ORM 风格   sqlalchemy 模块 面向对象 封装 改动 较大 ， 参考资料 1 2 内容 很多 都 过时 ， 没 办法 只好 看嚼 官方 文档 。   段 代码 :   import   sqlalchemy     sqlalchemy   import   *     sqlalchemy _ utils   import   database _ exists   ,   create _ database     sqlalchemy . ext . declarative   import   declarative _ base   engine   =   create _ engine   (   ' sqlite : / / / : memory : '   ,   echo   =   True   )       database _ exists   (   engine   .   url   ) :   ### 确保 目标 数据库 。   create _ database   (   engine   .   url   )   metadata   =   MetaData   (   bind   =   engine   )   Base   =   declarative _ base   (   bind   =   engine   )   class   User   (   Base   ) :   __ tablename __   =   ' users '   id   =   Column   (   Integer   ,   primary _ key   =   True   )     =   Column   (   String   )   fullname   =   Column   (   String   )   password   =   Column   (   String   )   def   __ init __   (     ,     ,   fullname   ,   password   ) :     .     =       .   fullname   =   fullname     .   password   =   password   def   __ repr __   (     ) :   return   ' < User   { } > '   .   format   (     .     )   调用   User   类   __ table __   ， 其实质 - orm 风格 提及 Table 对象 。   > > >   User .__ table __   Table ( ' users ' ,   MetaData ( bind = Engine ( sqlite : / / / : memory : ) ) ,   Column ( ' id ' ,   Integer ( ) ,   table = < users > ,   primary _ key = True ,   nullable = False ) ,   Column ( ' ' ,   String ( ) ,   table = < users > ) ,   Column ( ' fullname ' ,   String ( ) ,   table = < users > ) ,   Column ( ' password ' ,   String ( ) ,   table = < users > ) ,   schema = None )   > > >   ORM 层 Session 对象 数据库 会话 :     sqlalchemy . orm   import   *   Session   =   sessionmaker   (   bind   =   engine   )   session   =   Session   ( )   先 session 数据库 CRUD （ CREATE   RETRIEVE   UPDATE   DELETE ） 操作 :   orm 层 创建 数据库   引入 orm 对象 ， 调用   __ table __   Table 对象 ， 调用   create   方法 即可 。   UserInfo .__ table __. create ( bind   = engine )   Warning :   单表 创建 外键 关系 ， 会 失败 。   官方 教程 推荐 ：   Base . metadata . create _ ( engine )   增加 记录   表格 增加 一条 记录 :   admin   =   User ( ' admin ' , ' administor ' , ' admin ' )   session . add ( admin )   #     add _   方法 一次性 添加 多个 orm 对象   session . commit ( )   session   add   一条 记录 ， 更改 称之为 - fly 更改 ， 谈及 基于 python 对象 操作 记录 属性 更改 ， 都 - fly 模式 。 执行   session . commit ( )   ， 更改 才 会 刷入 数据库 ， 更改 刷入 数据库 ， 代码 查询 操作 都 基于 改动 新 （ 看作 某种 形式 基于 内存 ） 数据库 。   SQL transaction 概念 ， SQL 数据库 transaction 数据 提交 保障 — — transaction 提交 失败 ， 将会 rollback 回滚 ， 保证 SQL 数据库 mess   。 session   rollback   方法 主动 回滚 ， - fly commit transaction 都 会 丢弃 。 session   commit   ， 这次 transaction 成功 提交 ， 下次 一个 新 transaction 。   查询 记录   谈及 - orm 风格 中 提到 select 语句 查询 ， orm 风格 查询 语句 精简 ， 脱离 select 语句 查询 本质 ， 熟悉 SQL select 语句 更好 学习 查询 语句 。   查询 起步 :   session . query ( User )   返回 orm 子 模块 Query 对象 。 User 查询 类 （ 表格 ） 。 简单 理解   query   方法 看作 select 操作   select   *     User   。   Query 对象 迭代 对象 ， 迭代 过程 中 返回   User   对象 。   写成 形式 :   session . query ( User . ,   User . fullname )   大致   select   , fullname     User   。   所示 :   > > >     i     session . query ( User ) :   ...   print ( i )   ...   < User   admin >   > > >   guest   =   User ( ' guest ' , ' guest ' , ' 123456 ' )   > > >   session . add ( guest )   > > >     , fullname     session . query ( User . , User . fullname ) :   ...   print ( , fullname )   ...   admin   administor   guest   guest   学习 SQL select 语句 学到   select         语句 还 跟上 字句 ， order   字句 。 sqlalchemy orm 封装 支持 额外 操作 ， query 语句 基础 上 进一步 操作 。 额外 操作 返回 Query 对象 ， 写 上   session . query ( User ) . filter _ ( ) . filter ( ) . order _ ( )   。 看上去 长 语句 ， 熟悉 SQL 语句 ， 做些 ， 。   过滤 排序 操作   filter 方法 :   filter 方法 select 语句 字句 。 官方 文档 例子 ， 复制到 熟悉 即可 ， 大多 含义 都 :   query . filter ( User .   = =   ' ed ' )   query . filter ( User .   ! =   ' ed ' )   query . filter ( User . . ( ' % ed% ' ) )   query . filter ( User . . _ ( [ ' ed ' ,   ' wendy ' ,   ' jack ' ] ) )   query . filter ( ~ User . . _ ( [ ' ed ' ,   ' wendy ' ,   ' jack ' ] ) ) #     query . filter ( User .   = =   None )   query . filter ( User .   ! =   None )   query . filter ( _ ( User .   = =   ' ed ' ,   User . fullname   = =   ' Ed   Jones ' ) )   query . filter ( _ ( User .   = =   ' ed ' ,   User .   = =   ' wendy ' ) )   filter _ 方法 :   filter _ 方法 类似 filter 方法 ， User . 写成 ， 引用 表格 列名 。   query . filter _ (   =   ' ed ' )   order _ 方法 :   select 语句 order   字句 。   order _ ( User . id ) [ 1 : 3 ]   还 揭示   Query   对象 很 一个 特性 ， 支持 python 切片 操作 。   返回   Query 对象 还 方法 还 返回 :   ( ) :   返回 一个 列表 ， 包含 。   ( ) :   返回 第一个 。   ( ) :   一个 ， 多个 ， 抛出   MultipleResultsFound   异常 ， ， 抛出   NoResultFound   异常 。   scalar ( ) :   参考   网页 第五条   ， 执行 查询 ， 多条 记录 命中 ， 抛出 MultipleResultsFound   异常 ， 命中 ， 返回 None ， 命中 数为 一条 记录 ， 返回 记录   第一列   值 。   count ( ) :   返回 命中 记录 数 。   更 查询 例子   懂得 ， 更 查询 例子   TODO   ：   session . query ( Game ) . filter ( Game . release _ date   > =   ' 1999 - 01 - 01 ' )   text 函数   text 函数 用于 支持   filter     order _   方法 支持 原生 SQL 语句 表达 。 大致 所示 ， 下 即可 :     sqlalchemy   import   text   session   .   query   (   User   )   .   filter   (   text   (   \" id < 224 \"   ) )   .   order _   (   text   (   \" id \"   ) )   更改 记录   更改 记录 ORM 封装 变得 很 简单 ， 查询 python 对象 ， 修改 即可 。   game   =   session . query ( Game ) . ( 1 )   game .   =   ' Super   Mario   Brothers '   session . commit ( )   删除 记录   session . delete ( jack )   批量 修改 删除   session . query ( Game ) . filter _ ( category = \" RPG \" ) . update ( { \" category \" :   \" ARPG \" } )   session . query ( Game ) . filter _ ( category = \" ARPG \" ) . delete ( )   ORM 层 关系   SQL 表格 四种 关系 ， - - ,   - - ,   - - ,   - - ， 实际上 都 基于 SQL 外键 约束 join 查询 。 - - - - 最 关系 模型 ， 之上 - - ， 三个 SQL 表格 搭建 关系 模型 很 好 理解 。 推荐 读者 阅读   篇文章   更好 理解 SQL 表格 四种 关系 模型 。 - - 实际上 - - 情形 ， - - 实际上 - - 模型 反向 ， 重点 - - 模型 。   - - 模型   sqlalchemy orm 层 - - 关系 高度 封装 ， 不 SQL join 连接 语法 细节 ， 只 声明 好 外键 约束 关系 约束 （ 看作 sqlalchemy 新 关系 约束 ） ， 神奇 SQL 表格 - - 特性 。   ORM 层 join 方法 暂时 SQL 表格 relationship 建立 细节 ， 再 讨论 更 实用 ORM 层 relationship 建立 写法 。   这是 示例 代码 :   import   sqlalchemy     sqlalchemy   import   *     sqlalchemy _ utils   import   database _ exists   ,   create _ database     sqlalchemy . ext . declarative   import   declarative _ base   engine   =   create _ engine   (   ' sqlite : / / / test . db '   ,   echo   =   True   )       database _ exists   (   engine   .   url   ) :   print   (   ' create     database '   )   create _ database   (   engine   .   url   )   metadata   =   MetaData   (   bind   =   engine   )   Base   =   declarative _ base   (   bind   =   engine   )   class   User   (   Base   ) :   __ tablename __   =   ' users '   id   =   Column   (   Integer   ,   primary _ key   =   True   )     =   Column   (   String   )   password   =   Column   (   String   )   def   __ init __   (     ,     ,   password   ) :     .     =       .   password   =   password   def   __ repr __   (     ) :   return   ' & lt ; User   { } & gt ; '   .   format   (     .     )   class   Email   (   Base   ) :   __ tablename __   =   ' emails '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   email   =   Column   (   String   )   user   =   Column   (   Integer   ,   ForeignKey   (   ' users . id '   ) )   def   __ init __   (     ,   email   ,   user   ) :     .   email   =   email     .   user   =   user   def   __ repr __   (     ) :   return   ' & lt ; Email   { } & gt ; '   .   format   (     .   email   )   Base   .   metadata   .   create _   (   checkfirst   =   True   )   ###   create   table     sqlalchemy . orm   import   *   Session   =   sessionmaker   (   bind   =   engine   )   session   =   Session   ( )   admin   =   User   (   ' admin '   ,   ' admin '   )   session   .   add   (   admin   )   session   .   add _   ( [   User   (   ' Mary '   ,   ' secret '   ) ,   User   (   ' John '   ,   ' 123456 '   ) ,   User   (   ' Susan '   ,   ' 123456 '   ) ,   User   (   ' Carl '   ,   ' 123456 '   ) ] )   session   .   add _   ( [   Email   (   ' mary @ . '   ,   2   ) ,   Email   (   ' john @ . net '   ,   3   ) ,   Email   (   ' john @ . org '   ,   3   ) ,   Email   (   ' carl @ nospam . net '   ,   4   ) ] )   session   .   commit   ( )   sqliteman 观察 数据库 情况 :   session . query ( User , Email )   返回 笛卡尔 积 形式 :   > > >   session . query ( User , Email ) . ( )   [ ( < User   admin > ,   < Email   mary @ . > ) ,   ( < User   admin > ,   < Email   john @ . net > ) ,   ( < User   admin > ,   < Email   john @ . org > ) ,   ( < User   admin > ,   < Email   carl @ nospam . net > ) ,   ( < User   Mary > ,   < Email   mary @ . > ) ,   ( < User   Mary > ,   < Email   john @ . net > ) ,   ( < User   Mary > ,   < Email   john @ . org > ) ,   ( < User   Mary > ,   < Email   carl @ nospam . net > ) ,   ( < User   John > ,   < Email   mary @ . > ) ,   ( < User   John > ,   < Email   john @ . net > ) ,   ( < User   John > ,   < Email   john @ . org > ) ,   ( < User   John > ,   < Email   carl @ nospam . net > ) ,   ( < User   Susan > ,   < Email   mary @ . > ) ,   ( < User   Susan > ,   < Email   john @ . net > ) ,   ( < User   Susan > ,   < Email   john @ . org > ) ,   ( < User   Susan > ,   < Email   carl @ nospam . net > ) ,   ( < User   Carl > ,   < Email   mary @ . > ) ,   ( < User   Carl > ,   < Email   john @ . net > ) ,   ( < User   Carl > ,   < Email   john @ . org > ) ,   ( < User   Carl > ,   < Email   carl @ nospam . net > ) ]   调用 Query 对象   join   方法 执行 内 连接 :   > > >   session . query ( User , Email ) . join ( Email ) . ( )   [ ( < User   Mary > ,   < Email   mary @ . > ) ,   ( < User   John > ,   < Email   john @ . net > ) ,   ( < User   John > ,   < Email   john @ . org > ) ,   ( < User   Susan > ,   < Email   carl @ nospam . net > ) ]   > > >   一点 - - 影子 ， John 两个 Email 对象 。   稍加 过滤 条件 :   > > >   session . query ( User , Email ) . join ( Email ) . filter ( User .   = =   ' John ' ) . ( )   [ ( < User   John > ,   < Email   john @ . net > ) ,   ( < User   John > ,   < Email   john @ . org > ) ]   更 查询 email :   > > >   session . query ( User , Email . email ) . join ( Email ) . filter ( User .   = =   ' John ' ) . ( )   [ ( < User   John > ,   ' john @ . net ' ) ,   ( < User   John > ,   ' john @ . org ' ) ]   形式 :   > > >   session . query ( Email , User ) . join ( User ) . ( )   [ ( < Email   mary @ . > ,   < User   Mary > ) ,   ( < Email   john @ . net > ,   < User   John > ) ,   ( < Email   john @ . org > ,   < User   John > ) ,   ( < Email   carl @ nospam . net > ,   < User   Susan > ) ]   > > >   session . query ( Email , User ) . join ( User ) . filter ( User .   = =   ' John ' ) . ( )   [ ( < Email   john @ . net > ,   < User   John > ) ,   ( < Email   john @ . org > ,   < User   John > ) ]   内 连接 输出 一行 输出 内容   select     ， 行数 内容 描述 上 实际上 回事 。 一种 内 连接 顺序 。 利用 反向 查询 邮箱 User ， - - 数据模型 。   Query 对象   outerjoin   方法 ， 描述 关系 模型 ， 略过 。 介绍 ORM 层 更 实用 关系 定义方法 :   import   sqlalchemy     sqlalchemy   import   *     sqlalchemy . orm   import   *     sqlalchemy _ utils   import   database _ exists   ,   create _ database     sqlalchemy . ext . declarative   import   declarative _ base   engine   =   create _ engine   (   ' sqlite : / / / test . db '   ,   echo   =   True   )       database _ exists   (   engine   .   url   ) :   print   (   ' create     database '   )   create _ database   (   engine   .   url   )   metadata   =   MetaData   (   bind   =   engine   )   Base   =   declarative _ base   (   bind   =   engine   )   class   User   (   Base   ) :   __ tablename __   =   ' users '   id   =   Column   (   Integer   ,   primary _ key   =   True   )     =   Column   (   String   )   password   =   Column   (   String   )   email   =   relationship   (   \" Email \"   ,   backref   =   backref   (   ' user '   ) )   def   __ init __   (     ,     ,   password   ) :     .     =       .   password   =   password   def   __ repr __   (     ) :   return   ' & lt ; User   { } & gt ; '   .   format   (     .     )   class   Email   (   Base   ) :   __ tablename __   =   ' emails '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   email   =   Column   (   String   )   user _ id   =   Column   (   Integer   ,   ForeignKey   (   ' users . id '   ) )   def   __ init __   (     ,   email   ,   user _ id   ) :     .   email   =   email     .   user _ id   =   user _ id   def   __ repr __   (     ) :   return   ' & lt ; Email   { } & gt ; '   .   format   (     .   email   )   Base   .   metadata   .   create _   (   checkfirst   =   True   )   ###   create   table   Session   =   sessionmaker   (   bind   =   engine   )   session   =   Session   ( )   admin   =   User   (   ' admin '   ,   ' admin '   )   session   .   add   (   admin   )   session   .   add _   ( [   User   (   ' Mary '   ,   ' secret '   ) ,   User   (   ' John '   ,   ' 123456 '   ) ,   User   (   ' Susan '   ,   ' 123456 '   ) ,   User   (   ' Carl '   ,   ' 123456 '   ) ] )   session   .   add _   ( [   Email   (   ' mary @ . '   ,   2   ) ,   Email   (   ' john @ . net '   ,   3   ) ,   Email   (   ' john @ . org '   ,   3   ) ,   Email   (   ' carl @ nospam . net '   ,   4   ) ] )   john   =   session   .   query   (   User   )   .   filter   (   User   .     = =   ' John '   )   .     ( )   e1   =   session   .   query   (   Email   )   .   filter   (   Email   .   email   = =   ' john @ . org '   )   .     ( )   :   > > >   john . email   [ < Email   john @ . net > ,   < Email   john @ . org > ]   > > >   e1 . user   < User   John >   确实 很 好 ， 模型 （ user ） （ email ） - - 模型 。   重点 介绍   relationship   一行 干 些 :   email   =   relationship ( \" Email \" , backref = backref ( ' user ' ) )   User   email 属性 ， 如上   john . email   调用 。   指定 Email （ ） 端 （ 理解 针对 Email 执行 内 连接 操作 ， sqlalchemy 内部 细节 还 不 ， 差不多 过程 。 ） ， 这样的话 User . email 值 某种 机制 大概 所示   > > >   session . query ( User , Email ) . join ( Email ) . filter ( User .   = =   ' John ' ) . ( )   > > >   [ ( < User   John > ,   < Email   john @ . net > ) ,   ( < User   John > ,   < Email   john @ . org > ) ]   User   John 回应 几个 Email 对象 。 过程 不 ， 但用 语句 理解 八九不离十 。   - - 模型   - - 模型 - - 模型 特例 ， 先 讲 ， 区别 很小 。   class   User   (   Base   )   :   __ tablename __   =   ' users '   id   =   Column   (   Integer   ,   primary _ key   =   True   )     =   Column   (   String   )   password   =   Column   (   String   )   email   =   relationship   (   \" Email \"   ,   backref   =   backref   (   ' user '   ) ,   uselist   =   False   )   def   __ init __   (     ,     ,   password   )   :     .     =       .   password   =   password   def   __ repr __   (     )   :   return   ' < User   { } > '   .   format   (     .     )   class   Email   (   Base   )   :   __ tablename __   =   ' emails '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   email   =   Column   (   String   )   user _ id   =   Column   (   Integer   ,   ForeignKey   (   ' users . id '   ) )   def   __ init __   (     ,   email   ,   user _ id   )   :     .   email   =   email     .   user _ id   =   user _ id   def   __ repr __   (     )   :   return   ' < Email   { } > '   .   format   (     .   email   )   加上   uselist = False )   一句 ， 返回 Email 对象 。   - - 模型   - - 模型 实际上 - - 模型 回事 ， 如同   backref   设置 好 ， 针对 多个 Email 对象 实际上 找到 User 对象 ， 简单 见 ， - - 模型 理解 。   - - 模型   - - 模型 难于 理解 ， 是因为 还 一个 额外 Table 管理 原 两个 表格 之间 元素 映射 关系 ， 幸好 sqlalchemy 官方 文档 小节 做出 。 描述 一个 场景 一篇 博文 多个 标签 ， 一个 标签 多篇 博文 （ 简单 构建 出 一个 功能 ， 单击 一个 标签 按钮 ， 弹 出 标签 文章 ） 。 一个 博文 多个 标签 很 简单 ， 一个 - - 模型 解决 ， 大概   blog . tags   ， 弹出 一个 list ， 装着 标签 对象 。 关键性 出   tag . blogs   ， 弹出 一个 list ， 装着 博文 对象 。   篇文章   这幅 图片 中 :   情况 ， blog   - - ，   一个 表格 ， tag   - - ， 一个 表格 。 一方 存储 外键 约束 值 ， 表格 两列 ， 左列 外键 引用 blog ， 右列 外键 引用 tag ， 一个 映射 关系 都 写 一条 记录 。 不管怎么 说 ， 看 例子 :   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   sqlalchemy     sqlalchemy   import   *     sqlalchemy . orm   import   *     sqlalchemy _ utils   import   database _ exists   ,   create _ database     sqlalchemy . ext . declarative   import   declarative _ base   engine   =   create _ engine   (   ' sqlite : / / / test2 . db '   ,   echo   =   True   )       database _ exists   (   engine   .   url   ) :   print   (   ' create     database '   )   create _ database   (   engine   .   url   )   metadata   =   MetaData   (   bind   =   engine   )   Base   =   declarative _ base   (   bind   =   engine   )   blog _ tags   =   Table   (   ' blog _ tags '   ,   Base   .   metadata   ,   Column   (   ' blog _ id '   ,   Integer   ,   ForeignKey   (   ' blogs . id '   ) ) ,   Column   (   ' tag _ id '   ,   Integer   ,   ForeignKey   (   ' tags . id '   ) ) )   class   Blog   (   Base   ) :   __ tablename __   =   ' blogs '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   title   =   Column   (   String   )   body   =   Column   (   String   )   tags   =   relationship   (   \" Tag \"   ,   secondary   =   blog _ tags   ,   backref   =   backref   (   ' blogs '   ) )   def   __ init __   (     ,   title   ,   body   ) :     .   title   =   title     .   body   =   body   def   __ repr __   (     ) :   return   ' & lt ; BLog   { } & gt ; '   .   format   (     .   title   )   class   Tag   (   Base   ) :   __ tablename __   =   ' tags '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   tag   =   Column   (   String   )   def   __ init __   (     ,   tag   ) :     .   tag   =   tag   def   __ repr __   (     ) :   return   ' & lt ; Tag   { } & gt ; '   .   format   (     .   tag   )   Base   .   metadata   .   create _   (   checkfirst   =   True   )   ###   create   table   Session   =   sessionmaker   (   bind   =   engine   )   session   =   Session   ( )   blog1   =   Blog   (   ' learning   mysql '   ,   '     learning   mysql '   )   tag1   =   Tag   (   ' python '   )   blog2   =   Blog   (   ' learning   sqlalchemy '   ,   '     learning   sqlalchemy '   )   tag2   =   Tag   (   ' sql '   )   tag3   =   Tag   (   ' sqlalchemy '   )   tag4   =   Tag   (   ' mysql '   )   blog1   .   tags   .   append   (   tag2   )   blog1   .   tags   .   append   (   tag4   )   blog2   .   tags   .   append   (   tag1   )   blog2   .   tags   .   append   (   tag2   )   blog2   .   tags   .   append   (   tag3   )   session   .   add _   ( [   blog1   ,   blog2   ,   tag1   ,   tag2   ,   tag3   ,   tag4   ] )   session   .   commit   ( )   生成 表格 所示 :   执行 :   > > >   blog1   < BLog   learning   mysql >   > > >   blog1 . tags   [ < Tag   sql > ,   < Tag   mysql > ]   > > >   blog2   < BLog   learning   sqlalchemy >   > > >   blog2 . tags   [ < Tag   python > ,   < Tag   sql > ,   < Tag   sqlalchemy > ]   > > >   tag1   < Tag   python >   > > >   tag1 . blogs   [ < BLog   learning   sqlalchemy > ]   > > >   tag2 . blogs   [ < BLog   learning   mysql > ,   < BLog   learning   sqlalchemy > ]   关键 建立 一个 表格 :   blog _ tags   =   Table ( ' blog _ tags ' , Base . metadata ,   Column ( ' blog _ id ' , Integer , ForeignKey ( ' blogs . id ' ) ) ,   Column ( ' tag _ id ' , Integer , ForeignKey ( ' tags . id ' ) ) )   建立 一个 relationship :   tags   =   relationship ( \" Tag \" , secondary = blog _ tags , backref = backref ( ' blogs ' ) )     secondary   参数 指定 新建 表格 ， 表格 数据 都 不 操心 ， 只 上   blog1 . tags   属性 （ 一个 列表 ） 操作 就行了 。   利用 ORM 层来 很 简单 ， 不敢想像 sqlalchemy 底层 到底 做 工作 ， 不得不 承认 ， sqlalchemy   Great 地方 。 值得一提 地方 两个 表格 都 外键 约束 ， 说 关系 连接 工作 抽象 一个 表格 。   ， 类似 - - ， 管理 方 表格 ， 回引 backref 方 对象 属性 ， 定义 一个 表格 就行了 。 - - 数据模型 很 有用 。   高级 议题   cascade   定义 基于 关系 删除   items   =   relationship ( \" Item \" ,   cascade = \" ,   delete - orphan \" )   默认值   save - update   merge   save - update   指 一个 对象   Session . add ( )   ， 对象 都 应 加进去 。   merge   Session . merge   最       delete - orphan     指   save - update   merge   refresh - expire   expunge   delete   delete   Session . delete ， 默认 没加 delete ， 子 对象 parent _ id 赋 空值 ， 加 子 对象 删除 。   delete - orphan   增加 delete   删除 ， 子 对象 删除 ， 子 对象 执行 Session   delete 标记 ， 子子 对象 删除 delete 配合 。   自我 引用 表达 树状 结构   一个 SQL 表格 表达 出 树状 层级 结构 （ 很大 程度 上 弥补 python 语言 树状 结构 应付 能力 ） :   root   - - + - - - >   child1   + - - - >   child2   - - + - - >   subchild1   |   + - - >   subchild2   + - - - >   child3   写法 所示 :   class   Folder   (   db   .   Model   ) :   __ tablename __   =   ' folders '   id   =   db   .   Column   (   db   .   Integer   ,   primary _ key   =   True   )     =   db   .   Column   (   db   .   String   (   400   ) ,   nullable   =   False   )   description   =   db   .   Column   (   db   .   String   (   800   ) )   parent _ id   =   db   .   Column   (   db   .   Integer   ,   db   .   ForeignKey   (   ' folders . id '   ) )   children   =   db   .   relationship   (   \" Folder \"   ,   backref   =   db   .   backref   (   ' parent '   ,   remote _ side   =   [   id   ] ) )     parent _ id   NULL 最高级 节点 ， 一个 子 节点 都 描述   parent _ id   。 children 引用 ， 大体 类似   - -   写法 ， 一个 节点 多个 子 节点 ， 。 唯一 区别 设置   remote _ side = [ id ]   ， 写法   remote _ side = id   ， parent _ id 本地 local 端的 ， id 列是 remote 端的 。 更 信息 请 参看   官方 文档   。   面向 ORM 内省 机制   原 数据库 表格 ， 提及 :   users   =   Table ( ' users ' , db , autoload = True )   自动 内省 表格 ， 面向 ORM 写法 中 ， 。 请 参看   官方 文档   。 最 核心 代码 :   engine   =   create _ engine   (   ' sqlite : / / / session . db '   )     sqlalchemy . ext . automap   import   automap _ base   AutoBase   =   automap _ base   (   bind   =   engine   )   class   OldTable   (   AutoBase   ) :   __ tablename __   =   NewTable   .   __ tablename __   schema 任意 改动 ， 扩展 SQL 数据库 ， 搭建 关系 ， 实在 改动 schema ， 推荐 采用 migrate 机制 。 写 一个 简单 migrate 脚本 :   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -     __ future __   import   print _ function     __ future __   import   unicode _ literals   import   sqlalchemy     sqlalchemy   import   *     sqlalchemy . orm   import   *     sqlalchemy _ utils   import   database _ exists   ,   create _ database     sqlalchemy . ext . automap   import   automap _ base     sqlalchemy . ext . declarative   import   declarative _ base   _ engine   =   create _ engine   (   ' sqlite : / / / _ session . db '   )   Base   =   declarative _ base   (   bind   =   _ engine   )   _ engine   =   create _ engine   (   ' sqlite : / / / session . db '   )   class   User   (   Base   ) :   __ tablename __   =   ' user '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   username   =   Column   (   String   (   80   ) ,   unique   =   True   )   password   =   Column   (   String   (   80   ) )   def   __ init __   (     ,   username   ,   password   ,   * *   kwargs   ) :   ' ' ' kwargs 用于 收集 废 参数 ' ' '     .   username   =   username     .   password   =   password   def   __ repr __   (     ) :   return   ' & lt ; User   { } & gt ; '   .   format   (     .   username   )   def   migrate _ database   (   NewTable   ,   fromdb   ,   todb   ) :       database _ exists   (   fromdb   .   url   ) :   raise   Exception     :   NewTable   .   __ table __   .   create   (   checkfirst   =   True   )   ###   create   table   AutoBase   =   automap _ base   (   bind   =   fromdb   )   class   OldTable   (   AutoBase   ) :   __ tablename __   =   NewTable   .   __ tablename __   AutoBase   .   prepare   (   fromdb   ,   reflect   =   True   )   Session   =   sessionmaker   (   bind   =   fromdb   )   _ session   =   Session   ( )   Session   =   sessionmaker   (   bind   =   todb   )   _ session   =   Session   ( )     q     _ session   .   query   (   OldTable   )   .     ( ) :   add _   =   NewTable   (   * *   q   .   __ dict __   )   _ session   .   add   (   add _   )   _ session   .   commit   ( )   print   (   ' '   )     __ __   = =   ' __ main __ '   :   migrate _ database   (   User   ,   _ engine   ,   _ engine   )   多个 表格 加上 关系 情况 变得 更 ， 脚本   AutoBase . prepare ( fromdb ,   reflect = True )   建立 内省 模型 关系 ， 多个 表格 ， 这句 话 再 放到 些 。 添加 新 数据 sqlalchemy 自动 相关 关系 对象 功能 ， 倒 不 大 ， 会 。 模块 迁移 数据库 ， 绝不 一件 轻松 事 。 SQL 表格 尽量 设计 好 可扩展性 好 ， 太 精力 花 很 浪费 。   面向 ORM 数据 继承 机制   时间 补 上 。   额外 属性 支持   额外 属性 基于 SQL 表格 一列 属性 ， ORM 之上 建立 额外 属性 ， 基于 SQL 表格 一列 列 ， ORM 封装 之上 提供 便利 属性 接口 。   class   EmailAddress   (   Base   ) :   __ tablename __   =   ' email _ address '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   _ email   =   Column   (   \" email \"   ,   String   )   @ hybrid _ property   def   email   (     ) :   \" \" \" Return         _ email           twelve   characters . \" \" \"   return     .   _ email   [ :   -   12   ]   @ email . setter   def   email   (     ,   email   ) :   \" \" \" Set         _ email ,   tacking       twelve   character     @ . . \" \" \"     .   _ email   =   email   +   \" @ . \"   一列 额外 别名   一列 额外 别名 指 创建 额外 列 ， ORM 层 针对 一列 额外 别名 做 类似 操作 。     sqlalchemy . ext . declarative   import   synonym _   class   MyClass   (   Base   ) :   __ tablename __   =   ' _ table '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   status   =   Column   (   String   (   50   ) )   @ synonym _   (   \" status \"   )   @ property   def   job _ status   (     ) :   return   \" Status :   \"   +     .   status   等于 :   class   MyClass   (   Base   ) :   __ tablename __   =   ' _ table '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   status   =   Column   (   String   (   50   ) )   @ property   def   job _ status   (     ) :   return   \" Status :   \"   +     .   status   job _ status   =   synonym   (   \" status \"   ,   descriptor   =   job _ status   )   该列 ORM 层   status     job _ status   操作 。 参考     。   多列 组合 唯一性 约束   请 参看   网页   。   ORM 层 ， :   class   Location   (   Base   )   :   __ tablename __   =   ' locations '   id   =   Column   (   Integer   ,   primary _ key   =   True   )   customer _ id   =   Column   (   Integer   ,   ForeignKey   (   ' customers . customer _ id '   ) ,   nullable   =   False   )   location _ code   =   Column   (   Unicode   (   10   ) ,   nullable   =   False   )   __ table _ args __   =   (   UniqueConstraint   (   ' customer _ id '   ,   ' location _ code '   ,     =   ' _ customer _ location _ uc '   ) ,   )   flask _ sqlalchemy   db . UniqueConstraint   。   :   __ table _ args __   =   (   db . UniqueConstraint ( \" main _ directory \" ,   \" _ directory \" , \" filename \" ,   \" filext \" ) ,   )   Core 层 ， :   mytable   =   Table ( ' mytable ' ,   meta ,   #   ...   Column ( ' customer _ id ' ,   Integer ,   ForeignKey ( ' customers . customer _ id ' ) ) ,   Column ( ' location _ code ' ,   Unicode ( 10 ) ) ,   UniqueConstraint ( ' customer _ id ' ,   ' location _ code ' ,   = ' uix _ 1 ' )   )   ORM 层 内省   Table 层 利用 数据库 表格   reflect   概念 ， ORM 层多 很多 额外 东西 ， 最 关键   relationship   概念 ， sqlalchemy Automap 一章 解决 ORM 层 内省 。 更 详细 讨论 请 参看   官方 文档   。   最   建立 一个   automap _ base   对象 :     sqlalchemy . ext . automap   import   automap _ base   Base   =   automap _ base   ( )   运行   prepare   方法 内省 :   Base . prepare ( engine ,   reflect = True )   sqlalchemy   ORM 层 类 :   User   =   Base . classes . user   #   Base . classes . ( ' user ' )   属性 引用 ， 这是 。 relationship ， 预先 定义 属性 ，   prepare   ， 预先 定义 东西 覆盖 自动 reflect 定义 ， 起到 矫正 作用 。 预先 定义 类 类 ，   Base . classes .   风格 再 获取 。   分表 策略   表格 数据 量过大 ， 建立 分表 策略 ， 值取 模来 表名 ， 先看 例子 ， 例子 参考   网页   。   class   NovelChapter   (   object   ) :   _ mapper   =   { }   @ staticmethod   def   model   (   book _ id   ) :   table _ index   =   book _ id   %   100   class _   =   ' NovelChapter _ { 0 } '   .   format   (   table _ index   )   ModelClass   =   NovelChapter   .   _ mapper   .     (   class _   ,   None   )     ModelClass     None   :   ModelClass   =   type   (   class _   ,   (   Base   , ) ,   {   ' __ module __ '   :   __ __   ,   ' __ __ '   :   class _   ,   ' __ tablename __ '   :   ' bh _ _ chapter _ { 0 } '   .   format   (   table _ index   ) ,   ' id '   :   Column   (   Integer   ,   primary _ key   =   True   ) ,   #   填写 目标 Model 字 段 定义   } )   NovelChapter   .   _ mapper   [   class _   ]   =   ModelClass   return   ModelClass   提供   . model   方法 ， 核心 利用 type 函数 生成 一个 类 ， 说 元类 编程 ， 参数 ：   class   =   type   (   classname   ,   superclasses   ,   attributedict   )     _ mapper   对象 一个 类 对象 缓存 ， 免得 重复 创建 。   例子 中 最 关键   __ tablename __   差异化 定制 。   附录   datetime 数据类型   sqlalchemy 中 DateTime   数据类型 默认值 跟着   datetime . datetime . utcnow   所示 :   created _ date   =   Column ( DateTime ,   default = datetime . datetime . utcnow )   参考 网页   测试   参考 网页   参考资料   essential   sqlalchemy   ;   author :   Rick   copeland   ; press : O ' REILLY   a   step     step   sqlalchemy   tutorial   sqlalchemy - essential - tutorial - - techniques   面向 django   orm 用户 sqlalchemy 教程",
            "tags":"数据库",
            "url":"articles/sqlalchemy-module.html"
        },
        {
            "title":"alembic模块",
            "text":"alembic 模块 ， 读者 熟悉 django ， 类比 django makemigrations migrate 相关 命令 ， 简单 来说 ， 管理 数据库 版本 ， 数据库 迁移 工作 。 数据库 操作 频繁 ， 读者 会 慢慢 感受 数据库 迁移 管理 必要性 ， 实际上 读者 会 不 东西 代码 版本控制 ， 主动 代码 版本控制 。   更 alembic 请 参看 官方 文档 ， 概念 说 。     初始化 alembic 项目   alembic   init   alembic   当前目录 下会 一个   alembic . ini   文件 ， 配置文件 很多 配置 ，   sqlalchemy . url   必配 。   models . py   类似 django   models . py   文件 定义 模型 ， 利用 sqlalchemy 模块 定义 模型 文件 ， 模型 文件 定义 ， 利用 alembic 自动 数据库 更改 ：   alembic   revision   - - autogenerate   - m   \" add _ _ key \"   定义 好   alembic   文件 下   env . py     target _ metadata   变量 ：     myapp . models   import   Base   target _ metadata   =   Base   .   metadata   其会 自动 生成 版本控制 py 文件 ，   upgrade     downgrade   操作 。   升级   alembic   upgrade   head   #   head 最新 版本 ， 指定 版本号   管理 多个 模型 文件 ， 多个 表格 对象 ， 更 细节 请 参看 官方 文档 ， 时间 本文 会 详细 补充 。   TODO 。",
            "tags":"数据库",
            "url":"articles/alembic-module.html"
        },
        {
            "title":"pandas模块",
            "text":"本文 pandas 模块 核心 概念 。   入门   pandas 最 核心 两个 数据结构   Series   类   DataFrame   类 。 DataFrame 会用 偏 多一点 ， Series 相当于 一维 情况 下较 简单 DataFrame ， 会 用到 。 本文 重点 讨论 DataFrame 类 。   DataFrame 很 常用 是因为 数据结构 太 常见 ， excel 中 ， csv 中 ， sql 中 ， 来源 数据 都 汇总 DataFrame 数据结构 ， 数据处理 ， 包括 送入 机器学习 深度学习 模型 中 去 。   读写 文件 支持   pandas io 子 模块 写 很 便捷 ， 实际上 python 程序员 做 数据处理 ， 都 会 调用 下 pandas io 做 读写操作 。   大体 函数 ：   read _ csv   _ csv   read _ json   _ json   read _ html   _ html   read _ excel   _ excel   read _ sql   _ sql   ， html 读写 网络 抓取 上 有用 ， 很 强大 ， 推荐 工具 做 ， sql 操作 简单 点 pandas 接口 ， 稍微 点 推荐 sqlalchemy 做 ， 写 代码 可读性 更好 ， orm 层 接口 更 便捷 写 ， 代码 全是 一大堆 sql 语句 ， 总 不是太好 。   读 txt 文件   实际上 更常 txt 文件 ，   read _ csv   函数 来读 ， 做 额外 配置 ，     例子 ：   data   =   pd . read _ csv ( ' output _ list . txt ' ,   sep = \"   \" ,   header = None )   sep   设置 读取 csv 时 字段 分隔 ， 默认 逗号 ，   \\ t   分隔符 情况   header   默认 取 csv 第一行 df 数据 列 列名 ， 设置   names   ， 手动 指定 列名 ， header 相当于 设置 None ， header 设置 None ， 读取 第一行 列名 。   read _ csv   很多 选项 ， 应付 初步 加载 csv 数据 df 内 没 。   读 excel 文件   利用 pd . read _ excel 来读 excel 文件 数据 ， 功能 安装   xlrd   模块 。   执行 sql 查询 语句   pd . read _ sql   sql 查询 语句 中 获取数据 ， 其有 第二个 必填 参数 conn ， 利用 sqlalchemy ：   import   sqlalchemy   data _ source   =   sqlalchemy   .   create _ engine   (   ' sqlite : / / / mydata . sqlite '   )   创建 DataFrame 对象   从文件 读写 创建 DataFrame 对象 外 ， 还 DataFrame 类来 生成 DataFrame 对象 ， 所示 ：   加载 python 对象   支持 python 对象 字典 ， DataFrame 。   data   =   {   ' state '   :   [   ' Ohio '   ,   ' Ohio '   ,   ' Ohio '   ,   ' Nevada '   ,   ' Nevada '   ,   ' Nevada '   ] ,   ' year '   :   [   2000   ,   2001   ,   2002   ,   2001   ,   2002   ,   2003   ] ,   ' pop '   :   [   1.5   ,   1.7   ,   3.6   ,   2.4   ,   2.9   ,   3.2   ] }   frame   =   pd   .   DataFrame   (   data   )   操作 DataFrame 思路 更 偏向 一行 一行 ， 类似 numpy ndarray 结构 数据 转成 DataFrame 对象 ：   pd . DataFrame ( [ [ 1 , 2 ] , [ 2 , 3 ] ] )   再 ：   新建 一个 随机数 填充 DataFrame   新建 一个 DataFrame 对象 ， 随机数 填充 6 行 4 列 ， 列名   [ ' a ' , ' b ' , ' c ' , ' d ' ]   。   df   =   pd . DataFrame ( np . random . randn ( 6 , 4 ) ,   columns = [ ' a ' , ' b ' , ' c ' , ' d ' ] )   例子 还 演示 列名 不用 默认 0   1   ， 去 指定 。   选择 合适 时机 转入 DataFrame   选择 一个 合适 时机 python 数据 转入 DataFrame 中 ， 越早 越 好 。 DataFrame 更快 更 适合 矩阵 操作 ， 元素 都 操作 。 python 数据 ， 更改 操作 ， 一行 ， 一列 操作 ， DataFrame 会 发现 很 不 。   DataFrame 基础   DataFrame 转 ndarray   计算 希望 ndarray （ numpy ） 形式 （ 引入 DataFrame 是因为 其有 label 列 数据 含义 功能 ， 底层 算法 ， 特征 1234 ， 不再 关心 特征 名字 ， 数据 退化 numpy ndarray 数据类型 很 ， 底层 算法 层 不在意 ， 第二 numpy ndarray 对象 常见 算法 包括 新 tensorflow 很 对接 。 ）   ， 非常简单 ：     =   df . values   参考   网页   。   DataFrame 列 重命名   创建 DataFrame 对象 时   columns   参数 设置 列名 ， DataFrame 对象 创建 ， 还 所示 修改 列名 。   def   set _ columns   (   df   ,   columns   ) :   \" \" \"   设置 列名   \" \" \"   df   .   columns   =   columns   def   rename _ column   (   df   ,   origin _ column _   ,   column _   ) :   \" \" \"   列名 更 改为 名字   默认 column   可用   0   1   2   引用   数值 型   \" \" \"   d   =   { }   d   [   origin _ column _   ]   =   column _   df   .   rename   (   columns   =   d   ,   inplace   =   True   )   def   rename _ columns   (   df   ,   columns   ) :   \" \" \"   设置 列名   \" \" \"   df   .   rename   (   columns   =   columns   ,   inplace   =   True   )   def   rename _ column _ _ index   (   df   ,   index   ,   column _   ) :   \" \" \"   不 列名 ， 只 几列 ， 修改 名字   \" \" \"   df   .   rename   (   columns   =   {   df   .   columns   [   index   ] :   column _   } )   DataFrame append 操作   现有 Datafrme 额外 添加 一行 几行 数据 ， 操作 很 。   import   pandas     pd   df   =   pd   .   DataFrame   (   columns   =   [   ' a '   ,   ' b '   ,   ' c '   ] )   df   .   append   ( {   ' a '   :   1   } ,   ignore _ index   =   True   )   Out   [   7   ] :   a   b   c   0   1.0   NaN   NaN   df   .   append   ( [ {   ' a '   :   1   } , {   ' b '   :   2   } ] ,   ignore _ index   =   True   )   Out   [   8   ] :   a   b   c   0   1.0   NaN   NaN   1   NaN   2.0   NaN   字典 形式 ， 带上   ignore _ index = True   参数 。 还 append   pandas   Series 对象 ， Series 对象 属性 ， 插入 新 一行 index 名字 ， 带上   ignore _ index = True   参数 。   索引   列名 选择   定义 列名 ， 选择 一列 列名 最 直观 ：   df [ column _ ]   返回 Series 对象 ， 原 DataFrame 对象 index 保留 ， DataFrame index 名字 ， 索引 名字 。   引用 用于 添加 一列 删除 一列 ：   del   df [ column _ ]   df [ column _ ]   =   series   列名 选择 多个 列   df   [ [   ' a '   ,   ' b '   ,   ' c '   ] ]   一个 copy ！   iloc 方法   喜欢 矩阵 那种 几行 几列 某一 单元格 描述 ， 很 喜欢   df . iloc [ i ] [ j ]   形式 索引 单元格 数据 ， i 行 j 列 ， column 指定 数字 ， 0 ， 引用 0 会 索引 异常 【 列名 数字 类型 】 。   唯一 线性代数 行列式 下标 有所不同 ， 索引 都 是从 0 计数 。   索引 选择 多个 列   选择 多个 列 【 切片 式 】   df . iloc [ : , 0 : 2 ]   种 写法 【 列举 式 】 ：   df . iloc [ : ,   [ 0 , 2 ] ]   特征 列 运算   DataFrame 中 特征 列 ， 其为 Series 对象 ， 推荐   map   方法 :   df   [   ' commas '   ]   =   df   [   ' text '   ]   .   map   (   lambda   text   :   text   .   count   (   ' , '   ) )   参考   网页   ， apply 方法 作用 方向 为行 列 ， apply 方法 针对 dataframe 对象 整体 操作 。   搜索 语句   DataFrame 搜索 语句 针对 特征 列 值 判断 ， 过滤 掉 行 。   df [ df [ ' col1 ' ] = = 1 ]   df [ ( df [ ' col1 ' ] = = 1 ) | ( df [ ' col2 ' ] = = 1 ) ]   df [ ( df [ ' col1 ' ] = = 0 )   &   ( df [ ' col2 ' ] = = 0 ) ]   行 排序   df . sort _ index ( axis = 1 ,   ascending = False )   列 排序   df . sort _ values ( = ' B ' )   绘图 相关   绘制 散点图   DataFrame . plot . scatter ( x ,   y ,   s = None ,   c = None ,   * * kwds )   数据 记录   x   列 （ x 参数 指定 ）   y   列 （ y 参数 指定 ） 一一对应 数据 ， 绘制 散点图 。",
            "tags":"机器学习",
            "url":"articles/pandasmo-kuai.html"
        },
        {
            "title":"airflow模块",
            "text":"前言   airflow luigi 模块 相比 优点 ：   通用 DAG 概念 描述 工作 流 ， 更 专业 点 。   集成系统 crontab 支持 周期性 ， airflow 只能 linux 系统 下 运行 。   图形界面 很 美观 ， 功能 更 强大 。   老实 说 不 喜欢 crontab ， 简单 调度 ， apscheduler 工具 简单 写下 集成 软件系统 中 去 ， 再 点 工作 流 ， 流程 管理 ， 都 推荐 airflow 框架 管理 。   说 大 数据 上 流式 数据处理 工具 ， 实际上 百分之几 公司 业务 上大 数据 ， 大部分 公司 没 上大 数据 ， 大 数据 引入 太 复杂度 ， ， 仅仅 追求 时髦 去 玩 大 数据 ， 违背 程序 界 公认 KISS 原则 【 Keep     simple     stupid . 】 。   安装 airflow   pip   install   apache - airflow   推荐 起步   推荐   项目 工作 目录 下   . env   文件 下 写 上 ：   export   AIRFLOW _ HOME = .   pipenv 工具 当前目录 激活 工作 环境 ， 自动 激活 airflow 当前目录 下 工作 配置 。 airflow 相关 works 配置 相关 代码 都 放在 。   激活 虚拟环境 后 ， 操作 ：   初始化 数据库   airflow   initdb   启动 webserver   airflow   webserver   数据库   刚 玩下 sqlite3 数据库 ， 正式 运行 上 正式 数据库 ， sqlalchemy 支持 数据库 airflow 都 支持 。   sqlite3 数据库 不 支持   LocalExecutor   ， 搭建 项目 大概 项目 百分之八九十 代码 还 没 测试 好 ， 推荐 sqlite3 数据库 。 LocalExecutor 相 默认   SequentialExecutor   只能 运行 一个 ， LocalExecutor   支持 进程 运行 ， 很 有用 。   运行 情况 数据库 中 都 做好 记录 ：   pipenv   install   apache - airflow [ postgres ]     airflow . cfg   配好 配置 ：   sql _ alchemy _ conn   正式 运行 必做 配置   正式 运行 很多 配置 都 想 好 ， 配置 好 ， 配置 必 做 修改 ：   executor   正式 运行 ， 推荐 切换   LocalExecutor   支持 进程 运行 ， 分布式   CeleryExecutor   请 启用   airflow   scheduler   好 配置 自动 周期 运行 。   请 参看   airflow   github 仓库 源码   scripts 文件夹 systemd upstart 配置 服务 脚本 。   编写 dags   \" \" \"   Code             Airflow   tutorial   located   :   https : / / github . / airbnb / airflow / blob / master / airflow / _ dags / tutorial . py   \" \" \"     airflow   import   DAG     airflow . operators . bash _ operator   import   BashOperator     datetime   import   datetime   ,   timedelta   default _ args   =   {   ' owner '   :   ' airflow '   ,   ' depends _ _ past '   :   False   ,   ' start _ date '   :   datetime   (   2015   ,   6   ,   1   ) ,   ' email '   :   [   ' airflow @ . '   ] ,   ' email _ _ failure '   :   False   ,   ' email _ _ retry '   :   False   ,   ' retries '   :   1   ,   ' retry _ delay '   :   timedelta   (   minutes   =   5   ) ,   #   ' queue ' :   ' bash _ queue ' ,   #   ' pool ' :   ' backfill ' ,   #   ' priority _ weight ' :   10 ,   #   ' end _ date ' :   datetime ( 2016 ,   1 ,   1 ) ,   }   dag   =   DAG   (   ' tutorial '   ,   default _ args   =   default _ args   )   #   t1 ,   t2     t3     examples     tasks   created     instantiating   operators   t1   =   BashOperator   (   task _ id   =   ' print _ date '   ,   bash _ command   =   ' date '   ,   dag   =   dag   )   t2   =   BashOperator   (   task _ id   =   ' sleep '   ,   bash _ command   =   ' sleep   5 '   ,   retries   =   3   ,   dag   =   dag   )   templated _ command   =   \" \" \"   {   %   f     i     range ( 5 )   % }   echo   \" { {   ds   } } \"   echo   \" { {   macros . ds _ add ( ds ,   7 ) } } \"   echo   \" { {   params . _ param   } } \"   {   %   e   ndfor   % }   \" \" \"   t3   =   BashOperator   (   task _ id   =   ' templated '   ,   bash _ command   =   templated _ command   ,   params   =   {   ' _ param '   :   ' Parameter   I   passed   '   } ,   dag   =   dag   )   t2   .   set _ upstream   (   t1   )   t3   .   set _ upstream   (   t1   )   配置 DAG 参数 ：   owner   所有者   depends _ _ past   start _ date   email   email _ _ failure   email _ _ retry   retries   retry _ delay   BashOperator   调用 bash 命令 ：   task _ id   名字   bash _ command   bash 命令   还 支持 jinja2 模板 语法 ， 输出 执行 bash 命令   retries   重试 次数   脚本 实际上 一个   DAG   结构 配置 描述 文件 ， python 代码 写 地方 都 。 ：   t2 . set _ upstream ( t1 )   t3 . set _ upstream ( t1 )   一个 目标 dag 一个 节点 ， 设置 节点 t2 上 一个 节点 t1 ， t3 上 一个 节点 t1 。   PythonOperator   深度 python 爱好者 ， 进一步 讨论 下 PythonOperator ：     airflow . operators   import   PythonOperator   重点 一点 ：   dags 配置文件 ， python 函数 都 移到 地方 ， python 模块 引入 ， 强烈推荐   pipenv     - e   风格 。   task   =   PythonOperator (   task _ id   =   ' 名字 '   ,   python _ callable   =   func ,   provide _ context = True ,   dag   =   dag   )   一个 参数   provide _ context = True   ， 默认 False ， 设置 True ， 函数 接受 额外 两个 参数 ：   def   func ( ds ,   * * kwargs ) :   ds 执行 时间 ， kwargs 更 参数 ， 请 参看 官方 文档 API   Macors   。   测试   airflow   test   dag _ id   task _ id   date   测试 数据库 中有 记录 。   调度 时间 控制   scheduler 调度 时间 控制 说 ：   调度会   start _ date   计算 ， dag 设置   catchup   =   False   ， 只会 最新 dag 间隔 序列 算 。   调度 间隔 序列 基于 设置   schedule _ interval   属性 ， 时间 分成 一个 一个 片段 ， 目标 dag 运行 目标 间隔时间 完 。   clear dag   时间 片 dag 想要 再 运行 ， UI 上 点击 时间 片 dag ， 点击   Clear   。   时间 片较 运行 命令 ：   airflow   clear   - s   start _ dt   - e   end _ dt   dag _ id   backfill dag   backfill test 运行 状态 会 数据库 记录下来 ， 会 更改 临时 更改   start _ date   ，   scheduler 照顾 ， 重启   scheduler 照顾 。 backfill 设定 一个 时间 片段 ， 执行 目标 dag   airflow   backfill   dag _ id   - s   start _ dt   - e   end _ dt   杂谈   大 数据处理 这块 ， 写过 一篇 小 文章 谈过 一点 ， 一个 核心 点   碎片 化   ， airflow 提供 框架 一种 基于   时间 片 过程   大 数据   碎片 化 ， 小 片段 状态 都 记录 好 回溯 。   比如说 程序 时间 片上 抛出 一个 异常 ， 有意 无意   raise   Exception   ， airflow 记录 小 片段 会 标记 failed 失败 状态 ， 点击 ， clear 状态 ， scheduler 调度 下 ， 一会 会 启动 。   运行 ， 运行 完 会 标记   sucess   ， 小 时间 片下 数据 。   一个 好 建议 设置 好 数据库   updated _ time   ，   updated _ time   切分 数据 时间 片 ， 情况 写   插入 时间 切分 够用 ， 额外 记录 更新 时间 。   参考资料   airflow 官方 文档   airflow   tutorial   etl     airflow",
            "tags":"python好伙伴",
            "url":"articles/airflow-module.html"
        },
        {
            "title":"sql数据库基础",
            "text":"小节 sqlite3 简要 sql 数据库 理论知识 。 SQL 数据库 mysql ， postgresql 相关 知识 本文 讨论 。   术语   数据库 （ database ） 简单 理解 一个 文件柜 。 DBMS （ database   management   system ） 数据库 管理系统 。   table   表 看作 文件柜 里 一个 结构化 文件 。 表格 数据 都   按行 存储   ， 头脑 中 牢记 。 一行 数据 称之为 一个   记录   。 SQL （ Structured   Query   Language ） 结构化 查询语言 。   sqlite3 安装 不 罗嗦 ， 若有 请 网络 查阅 。   第一个 例子   sqlite3 postgresql ， 客户端 / 服务器 概念 ， 文件 管理 ， sqlite3 数据库 一个 文件 ， 连接 不 文件 ， 会 自动 创建 数据库 文件 。 删除 数据库 删除 数据库 文件 即可 ， 一块 sqlite3 很 简单 。   数据库 一点 东西 :   wanze @ wanze - ubuntu64 : ~ / 桌面 $   sqlite3   mydb   SQLite   version   3.8 . 2   2013 - 12 - 06   14 : 53 : 30   Enter   \" . \"     instructions   Enter   SQL   statements   terminated     a   \" ; \"   sqlite >   create   table   mytable ( id   integer   primary   key ,     text ) ;   sqlite >   insert     mytable ( id , )   values ( 1 , \" Micheal \" ) ;   sqlite >   select   *     mytable ;   1 | Micheal   sqlite >   . table   mytable   sqlite >   . database   seq     file   - - -   - - - - - - - - - - - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   0   main   / home / wanze / 桌面 / mydb   sqlite >   . header     sqlite >   select   *     mytable ;   id |   1 | Micheal   例子 连接 创建 mydb 数据库 ， CREATE   TABLE 语句 创建 database 数据库 一个 表 ， 接下来 INSERT   INTO 语句 表 插入 数据 ， SELECT 语句 查看 数据 。     . database   列出 连接 数据库 信息   . table   列出 表格 信息   . header     显示 SQL 表格 头   . quit   退出 sqlite3 命令行   还   .   查看 更 相关 信息 。   CREATE   TABLE   所示 创建表格 命令 格式 :   CREATE   TABLE   mytable (   id   INTEGER   PRIMARY   KEY ,     TEXT ) ;   mytable 创建 表格 名字 ， 接下来 一行 定义 表格 一个 字 段 或者说 一列 。 第一个 字 段 名字 ， 第二个 字 段 数据类型 定义 ， 可选 还 跟上 约束 词 。 先 字 段 数据类型 做出 。   字 段 数据类型     sqlite3 官方 文档   介绍   ， 支持 五种 数据类型 ：   NULL   空值   INTEGER   整型   REAL   浮点 型   TEXT   字符串 型   BLOB   字节 流型   sqlite3 类型 声明 字符串 还 建立 一套 语法 糖 规则 ， 语法 糖 规则 所示 :   类型 声明 ， 视为   affinity ;   声明 字符串 中 \" int \" （ 不 区分 大小写 ） 子 字符串 ， 视为 integer   affinity ；   ， 接下来 找到 \" char \" \" clob \" \" text \" ， 视为 text   affinity ； varchar ( 80 ) 会 简单 视为 text   affinity ;   ， 接下来 找到 \" blob \" ， 视为 blob ， 没 数据类型 声明 ， 视为   affinity ;   ， 接下来 找到 \" real \" \" floa \" \" doub \" ， 视为 float   affinity ;   都 视为 numeric   affinity 。   affinity sqlite 特有 概念 ， text   affinity 内置 TEXT 字符串 型 ， NULL ， TEXT BLOB 。 输入 数值 会 自动 转换 字符串 型 。 NUMERIC 会 自动 分配 INTEGER REAL 型 ， 输入 字符串 还 负责 转化 。 ， sqlite3 类型 声明 上 很 灵活 就行了 ， 喜欢 一套 类型 声明 即可 ， 五个 :   null   int   float   text   blob     null   integer   float   varchar   blob   。   字 段 约束 词   请 看 例子 :   sqlite >   CREATE   TABLE   products (   ... >   id   int   PRIMARY   KEY ,   ... >     text   NOT   NULL ,   ... >   quantity   int   NOT   NULL   DEFAULT   1 ,   ... >   price   real   NOT   NULL ) ;   PRIMARY   KEY   一个 表格 只能 一个 PRIMARY   KEY ， PRIMARY   KEY 约束 字 段值 唯一 不 空 ， 使 表格 中 记录 唯一 标识 。 表格 中 一个 列 几个 列 选定 primary   key 。 值得一提的是   integer   primary   key   自动 自动 分配 属性 ， id 一列 ， 不 赋值 ， 会 自动 添加 。   NOT   NULL   约束 该字 段 不 可取 空值 ， 该字段 赋值 。   DEFAULT   指定 该字 段 默认值 。   创建表格 表格 不   create   table       exists   department   ( dept _ id   int   primary   key ,     varchar     null   ) ;   更改 表格 属性   sqlite3 更改 表格 属性 功能 很 有限 ， 两个 ， 一个 更改 表格 名字 ， 还 一个 新建 一个 字 段 。 sqlite3 CREATE   TABLE 字 段 属性 设置 好 （ 迁移 单独 写 脚本 ） 。   ALTER   TABLE   语句 ， 所示 :   ALTER   TABLE   tablename   RENAME   TO   _ tablename ;   ALTER   TABLE   tablename   ADD   COLUMN   column _   column _ datatype ;   删除 表格   删除 前 请 慎重 。   DROP   TABLE   tablename ;   插入 记录   插入 一条 记录 前 所示   INSERT   INTO   语句 ， 所示 ：   INSERT   INTO   products   ( product _ ,   ,   price )   VALUES   ( 1 ,   ' Cheese ' ,   9.99 ) ;   这是 推荐 风格 ， 圆括号 跟着 列名 不 顺序 ， 值 一一对应 ， 一条 记录 列 不 都 列出来 ， 不写 会 默认值 。 INSERT   INTO 语句 通用 。   简单 插入 新 一行 数据 insert   语句 。   sqlite >   insert     mytable ( age )   values ( 6 ) ;   sqlite >   select   *     mytable ;   id     age   - - - - - - - - - -   - - - - - - - - - -   - - - - - - - - - -   1   Alice   2   Betty   3   Cassie   4   Doris   5   Emily   6   Abby   7   Bella   8   6   不 重复 插入   主 键值 不 重复 才 插入 ：   insert     ignore     department   ( dept _ id ,   )   values   ( 1 ,   ' Operations ' ) ;   insert     ignore     department   ( dept _ id ,   )   values   ( 2 ,   ' Loans ' ) ;   insert     ignore     department   ( dept _ id ,   )   values   ( 3 ,   ' Administration ' ) ;   更新 记录   语句 用于 更新 特定 表格 数据 ：   sqlite >   update   mytable   set   age = 18     id   = 1 ;   sqlite >   select   *     mytable ;   id     age   - - - - - - - - - -   - - - - - - - - - -   - - - - - - - - - -   1   Alice   18   2   Betty   3   Cassie   4   Doris   5   Emily   6   Abby   7   Bella   8   6   删除 记录   DELETE   FROM   products   WHERE   price   =   10 ;   DELETE   FROM   products ;   ： 第二个 语句 表内 记录 都 删除 ！   DELETE   FROM   语句 通用 。   查询 记录   讲解 ， 第一个 例子 简单 创建 一个 数据库 ， 代码 ：   ~ $   sqlite3   test . db   sqlite >   CREATE   TABLE   mytable ( id   INTEGER   PRIMARY   KEY ,     TEXT ) ;   sqlite >   INSERT   INTO   mytable ( id , )   values ( 1 , ' Alice ' ) ;   sqlite >   INSERT   INTO   mytable ( id , )   values ( 2 , ' Betty ' ) ;   sqlite >   INSERT   INTO   mytable ( id , )   values ( 3 , ' Cassie ' ) ;   sqlite >   INSERT   INTO   mytable ( id , )   values ( 4 , ' Doris ' ) ;   sqlite >   INSERT   INTO   mytable ( id , )   values ( 5 , ' Emily ' ) ;   sqlite >   . header     sqlite >   . mode   column   sqlite >   SELECT   *   FROM   mytable ;   id     - - - - - - - - - -   - - - - - - - - - -   1   Alice   2   Betty   3   Cassie   4   Doris   5   Emilyv   检索 语法 ：   sqlite >   SELECT   id   FROM   mytable ;   想要 显示 多个 列则 写 上 多个 列名 ， 列名 之间 逗号 隔开 。 检索 列 列名 处用 通配符   \\ verb + * +   匹配 列 。   排序   SELECT 语句 默认 情况 排序 ， 排序 ORDER   BY 字句 。 插入 几个 新 名字 ：   sqlite >   INSERT   INTO   mytable ( id , )   values ( 6 , ' Abby ' ) ;   sqlite >   INSERT   INTO   mytable ( id , )   values ( 7 , ' Bella ' ) ;   输入 排序 ：   sqlite >   SELECT   id ,   FROM   mytable   ORDER   BY   ;   id     - - - - - - - - - -   - - - - - - - - - -   6   Abby   1   Alice   7   Bella   2   Betty   3   Cassie   4   Doris   5   Emily   多个 列 排序   更新 表格 数据 。   sqlite >   ALTER   TABLE   mytable   ADD   COLUMN   age   int ;   sqlite >   UPDATE   mytable   set   age = 18   WHERE   id = 1 ;   sqlite >   update   mytable   set   age = 20     id   = 2 ;   sqlite >   update   mytable   set   age = 6     id   = 3 ;   sqlite >   update   mytable   set   age = 25     id   = 4 ;   sqlite >   update   mytable   set   age = 30     id   = 5 ;   sqlite >   update   mytable   set   age = 66     id   = 6 ;   sqlite >   update   mytable   set   age = 20     id   = 7 ;   sqlite >   INSERT   INTO   mytable ( id , , age )   values ( 8 , ' Alice ' , 20 ) ;   sqlite >   SELECT   *   FROM   mytable ;   id     age   - - - - - - - - - -   - - - - - - - - - -   - - - - - - - - - -   1   Alice   18   2   Betty   20   3   Cassie   6   4   Doris   25   5   Emily   30   6   Abby   66   7   Bella   20   8   Alice   20   多个 列 排序 ：   sqlite >   SELECT   *   FROM   mytable   ORDER   BY     ,   age ;   id     age   - - - - - - - - - -   - - - - - - - - - -   - - - - - - - - - -   6   Abby   66   1   Alice   18   8   Alice   20   7   Bella   20   2   Betty   20   3   Cassie   6   4   Doris   25   5   Emily   30   排序 ， 名字 age 排序 。   降序 排序   ORDER   BY 字句 默认 排序 升序 ， 想要 其为 降序 DESC 关键词 ， 所示 :   sqlite >   SELECT   *   FROM   mytable   ORDER   BY     ,   age   DESC ;   id     age   - - - - - - - - - -   - - - - - - - - - -   - - - - - - - - - -   6   Abby   66   8   Alice   20   1   Alice   18   7   Bella   20   2   Betty   20   3   Cassie   6   4   Doris   25   5   Emily   30   DESC 关键词 放在 想要 降序 排序 列 。 想要 多个 列 降序 排序 ， 列   \\ uline { 都 加上 DESC 关键词 }   。   过滤 数据   SQL WHERE 字句 查询 时 过滤 数据 功能 ， WHERE 字句 ORDER   BY 字句 ， ORDER   BY 字句 放在 。   一个 简单 例子 所示 :   sqlite >   SELECT   *   FROM   mytable   WHERE   age   <   30 ;   id     age   - - - - - - - - - -   - - - - - - - - - -   - - - - - - - - - -   1   Alice   18   2   Betty   20   3   Cassie   6   4   Doris   25   7   Bella   20   8   Alice   20   值 字符串 加上 单引号 ， :   ' string '   ， 符号 含义 都 一目了然 ， :   =   ,   < >   ,   ! =   ,   <   ,   < =   ,   ! <   ,   >   ,   > =   , ! >   。   BETWEEN   两个 值 之间 ，   IS   NULL   判断 NULL 值 。   BETWEEN :   SELECT   prod _ ,   prod _ price   FROM   Products   WHERE   prod _ price   BETWEEN   5   AND   10 ;   NULL   无值 ， 字 段 包含 0 ， 空 字符串 。   IS   NULL   用法 :   SELECT   prod _   FROM   Products   WHERE   prod _ price   IS   NULL ;   外键 引用   外键 引用 sqlite3 中 加上 一行 设置 :   PRAGMA   foreign _ keys   =   ON ;   外键 引用 语法 mysql 类似 ，   constraint   pk _ product _ type   这一 描述 外 。 sqlite3   \\ textbf { date }   类型 ， 内部 会 自动 text , int real 类型 。 声明 写 ， 值得一提的是 sqlite3 date 相关 函数 支持 。   外键 引用 更 信息 请 参看   官方 文档   。   PRAGMA   foreign _ keys   =   ON ;   create   table       exists   employee   ( emp _ id   int   primary   key ,   fname   varchar     null ,   lname   varchar     null ,   start _ date   date     null ,   end _ date   date ,   superior _ emp _ id   int   ,   dept _ id   int   ,   title   varchar ,   assigned _ branch _ id   int   ,   foreign   key   ( superior _ emp _ id )   references   employee   ( emp _ id ) ,   foreign   key   ( dept _ id )   references   department   ( dept _ id ) ,   foreign   key   ( assigned _ branch _ id )   references   branch   ( branch _ id )   ) ;   SQL 关系 模型 浅谈   内部 联接   联接 抽象 理论 讨论 很 ， 谈论 ， 读者 沉思 。 一个 SQL 表格 看作 一个 外部 世界 模型 ， 看作 柏拉图 谈论 理念 。 外部 世界 模型 来说 ， 彼此之间 两种 关系 :   第一种 继承 关系 ， 第二种 组合 关系 。 继承 关系 指 一个 苹果 实体 来说 ， 各种各样 属性 ， 不 装入 一个 数据库 中 ， 比如说 苹果 实体 供应商 信息 ， 苹果 重量 颜色 信息 。 更 做法 描述 苹果 （ 产品 ） 供应商 信息 单独 放入 一个 模型 ， 描述 苹果 重量 颜色 信息 单独 放入 一个 模型 ， 水果店 信息 。 ， 衍生 模型 都 一个   parent _ id   类似 字 段 属性 描述 衍生 模型 记录 母体 parent ， 多个 衍生 模型 一个 实体 对象 上 统一 ， 表 联接 。 看作 表 联接 最终 成果 心目 中所想 超大型 SQL 表格 ， 苹果 模型 ， 存放 苹果 相关 属性 信息 。 SELECT 语句 查 即可 。   第二个 组合 关系 苹果 苹果皮 苹果肉 ， 各子 母体 某种 实体性 ， 苹果 模型 上 如同   pingguopi _ id     pingguorou _ id   字 段 属性 ， 约定   _ id   结尾 都 视作 苹果 组成部分 ， 都 视作 非 组成部分 独独 苹果 模型 属性 。 组合 关系 很 ， 再 谈及 ， 谈论 表格 联接 ， 表格 联接 描述 模型 之间 继承 关系 。   语法 所示 :   SELECT   , price , weight   FROM   Supplier , Info   WHERE   Supplier . parent _ id   =   Info . parent _ id   约定 Supplier Info 两个 衍生 模型 内 存储   parent _ id   Pingguo 模型 中 记录 号 。 记录 号 代表 同一个 苹果 实体 。 同一个 苹果 实体 ,   price ,   weight   属性 列出来 。   不 WHERE 字句 会 执行 笛卡尔 乘积 操作 ， 字 段 属性 随意 组合 ， 现实意义 。   SQL 规范 ， 不 推荐 WHERE 字句 表达 ， 内部 联接 （ INNER   JOIN ） 语句 更 推荐 写成 形式 :   SELECT   , price , weight   FROM   Supplier   INNER   JOIN   Info   ON   Supplier . parent _ id   =   Info . parent _ id   SQL 语法 一个 术语 形容 SELECT 语句 ， 内部 联接 。 WHERE ON ， 关键词 INNER   JOIN 。 SQL 联接 默认 方式 内部 联接 。   视图   视图 虚拟 表 ， 不 包含 数据 ， 更 确切 来说 一种 检索 手段 。 视图 嵌套 视图 ， 视图 不 包含 数据 ， 依赖于 检索 ， 过多 视图 会 很 降低 性能 。",
            "tags":"基础",
            "url":"articles/sqlshu-ju-ku-ji-chu.html"
        },
        {
            "title":"makefile你不来一发吗",
            "text":"简单 下 makefile   makefile 只能 Linux 环境 下 运行 ， 更 确切 来说 gnu   make 工具 去 运行 Makefile 文件 。   makefile 内容 很 ， 实际上 过于 。 简单 基本功能 很 便利 。   project   =   helloworld   cflags   =   - g   - Wall   $ {   CCFLAGS   }   $ { project }   :   $ {   CC   }   helloworld . c   - o   $ @   $ {   cflags   }   clean   :   rm   $ {   project   }   install   :   cp   $ {   project   }   / usr / local / bin   uninstall   :   rm   / usr / local / bin /   $ {   project   }   . PHONY   :   clean   uninstall   install   便于 理解 ， makefile 有意 采用 一种 bash   shell 接近 风格 。   project =   一个 定义 变量 。 project 变量 脚本 名字 。 makefile 主体 格式 :   target   :   prerequisites     command   生成 target 文件 ， 确保 prerequisites 依赖 文件 都 最新 ， 不 最新 查找 目标 生成 规则 生成 。 target 生成 执行 bash 命令 。 例子 讲解 信息 :   特别 ， 命令 请   Tab 键   隔开   。   变量 读者 例子 ， 有意 采用 类似 bash 脚本 语法 。 写 支持 。   $ @   符号 神秘 东西 ， 目标 文件名 ， 例子 中 目标   $ { target }   ， helloworld ，   $ @     \" helloworld \"   。   . PHONY   跟着 生成 目标 ， 生成 目标 伪 目标 ， 或者说 生成 文件 ， 执行 命令 。     $ { CC }     $ { CCFLAGS }   用户 定义 ， 其是 make 命令 默认 变量 。   $ ( CC )   调用 系统 默认 c 编译器 ， gcc 。   make   命令 不 输入 子 命令 时 ， 默认 执行 输出 第一个 目标 命令 ， 项目 目标 。   makefile 命令 都 一个 独立 终端 ， 终端 不 共享 变量 ， 多个 命令 连接 一个 命令 ， 好 一个 shell 执行 共享 变量 。 （ export 共享 ？ ）   makefile 扫描 两边 ， 第一遍 变量 替换 ， 第二遍 依赖 关系 。 变量 声明 跟着 规则 ， 保证 变量 声明 改变 。   强制 目标 更新   参考   网页   。   大致 所示 ， 设置 一个   FORCE   目标 ， 凡是 依赖 FORCE 目标 都 强制 没 都 再 更新 一遍 ， 原因 FORCE 目标 不 不 依赖 目标 ， makefile 目标 不 ， 每次 都 会 再 更新 生成 一遍 。   $ { project } . org   :   FORCE   python3   make _   $ {   project   }   org . py   FORCE   :",
            "tags":"linux",
            "url":"articles/makefileni-bu-lai-yi-fa-ma.html"
        },
        {
            "title":"python2和python3的兼容性",
            "text":"2to3 内置 模块   python 有个   2to3   内置 模块 自动 python2 脚本 python3 脚本 移植 工作 ， 感觉 过分 依赖 工具 ， 适合 初学者 。 python2 python3 很多 地方 不 。 模块 很 深 ， 手工 修改 会 更 合适 （ 会 涉及 新 编写 思路 ） 。 模块 请 参看 官方 文档 。   / /     /   python2 中 ， 两个 整数 相除 会 返回 一个 整数 ， python3   / /   。   > > >   5 / 2   2   兼容 方案   文件 头上 加上 一行 ：     __ future __   import   division   都 python3 语法 规则 ， :   /   常规 除法 ，   / /   整除 — — 返回 商 。   print 函数   最 常见 错误 ， 推荐 第一步 文档 find   print 字符串 操作 ， ：   print   ...   形式 都 换成 ：   print ( ... )   这是 python2 python3 都 兼容 形式 ， 好 犹豫 ， 大胆 修改 。   python2   print   1 ,   2 ,   还 小 ， 简单 理解 python3   print ( 1 ,   2 ,   end = '   ' )   python2 支持 重定向 语法   print   > > sys . stderr ,   1 ,   2 ,   3   python3 file 选项 ：   print ( 1 ,   2 ,   3 ,   file = sys . stderr )   兼容性 方案   推荐 模块 最 写 上 :     __ future __   import   print _ function   python3 语法 print 函数 。 python2 运行 。   unicode 字符串   说 Unicode 字符串 历史 ， python2 诞生 Unicode 字符串 （ 宽 字符 解决 编码方案 统称 ） 早 ， python2 早期 基于 ASCII 编码 ， ASCII 编码 8 位值 编码 ， 单纯 ， python2 一个 str 类型 8 位 字符 二进制 数据 。 python2 才 引入 unicode 字符 类型 ， 宽 字符 文本 。   python2 兼容 python3 引入 bytes 类似 bytearray 类型 。 兼容性 。 python2 python3 代码 兼容 上 一个 坑 python2 str 类型 8 位 文本 二进制 数据 统称 ， 默认 ASCII 编码 情况 下 ， 不知不觉 ， 系统 默认 编码 默认 ASCII ， 8 位值 数据 不 到底 文本 。 （ python3 str 默认 UTF - 8 编码 ， 支持 8 位 文本 支持 宽 字符 文本 ， 真的 文本 含义 。 ）   都 同意 python3 新 分类 很 好 ：   str   文本 ，   bytes   字节 流 。 编程 都 一律 采用 思维 。   写 python2 代码 都 推荐 文件 头上 写 上 ：     __ future __   import   unicode _ literals   写 python2 中 随便 定义 字符串   > > > \" test \"   u ' test '   返回 unicode 类型 ， python3 str 类型 。 程序员   （ \\ cite { 高质量 python 代码 } ）   编码 时 更多地 业务 逻辑 字符 编码 二进制 形式 存放 。   简单 见 字符串 都 简单 字符串 （ 或者说 文本 ） ， 程序员 编码 ， 确实 点 ， 操作 字符 bytes 形式 ， 确实 ， 再 转换 操作 。   转换 ：   #   python2   def   _ unicode ( unicode _ _ str ) :     isinstance ( unicode _ _ str ,   str ) :     =   unicode _ _ str . decode ( ' utf - 8 ' )   :     =   unicode _ _ str   return     def   _ str ( unicode _ _ str ) :     isinstance ( unicode _ _ str ,   unicode ) :     =   unicode _ _ str . encode ( ' utf - 8 ' )   :     =   unicode _ _ str   return     历史 遗留 代码 ， 遗憾 ， python2 python3 一块 裂痕 ， 详细 阅读 修改 重写 代码 恐怕 不了 。   input raw _ input   python2 中 raw _ input 函数 python3 input 函数 。 python2 一个 input 函数 ， python3 中 eval ( input ( ) ) ， 函数 推荐 废弃 掉 。   兼容 方案     builtins   import   input     =   input   (   ' What         '   )   类 都 继承 object   python3 中 类 都 默认 object 子类 。   兼容 方案   兼容 方案 引入 builtns 引入 object ， 都 指明 继承 object 。     builtins   import   object   class   Upper   (   object   ) :   def   __ init __   (     ,   iterable   ) :     .   _ iter   =   iter   (   iterable   )   def   __ __   (     ) :   #   Py3 - style   iterator   interface   return     (     .   _ iter   )   .   upper   ( )   #   builtin   ( )   function   calls   def   __ iter __   (     ) :   return     execfile 函数   python2 中 execfile 内置 函数 ， 运行 ， 用来 执行 python 脚本 。   execfile ( join ( dirname ( __ file __ ) ,   ' openerp ' ,   ' release . py ' ) )   #   Load   release   variables   lib _   =   ' openerp '   exec ( compile ( open ( join ( dirname ( __ file __ ) ,   ' openerp ' ,   ' release . py ' ) ) . read ( ) ,   join ( dirname ( __ file __ ) ,   ' openerp ' ,   ' release . py ' ) ,   ' exec ' ) )   lib _   =   ' openerp '   兼容 方案   exec ( compile ( open ( ' myfile . py ' ) . read ( ) ) )   < > 替换   ! =   不 等于号 < > 废弃 ， 推荐 ! = ， python2 python3 都 兼容 。   模块 包 导入   python2 python3 模块 包 结构 很多 地方 发生 变动 ， 实际上 python3 ， 版本升级 ， 内置 模块 包 内部 发生 变动 ， 新 函数 类 。 这是 不可避免 ， python2 模块 包 官方 提醒 废弃 ， 值得 。 一块 ， 平时 阅读 官方 文档 （ 变动 官方 文档 都 会 ） 。",
            "tags":"python语言",
            "url":"articles/python2he-python3de-jian-rong-xing.html"
        },
        {
            "title":"计算机网络基础",
            "text":"先 找到 目标 计算机   简单 回顾 学习 Linux 系统 时 接触 网络 知识 ， Internet 源起 美国 ARPAnet 项目 ， 其有 知识点   两个 位于 网域 计算机 才 文件 交互   。 读者 会 问 网域 ， 网域 说白了 一个 大 互联网 分割 分割 再 分割 一个 产物 。 分割 手段   子网掩码   ， 判断 两个 计算机 网域 ？ 计算机 IP地址 子网掩码 相加 ， 说 位于 网域 。   说 一台 计算机 一台 计算机 发送 一个 信息 包 ， 计算机 会 分析 路由表 ， 发现 目标 机器 网域 ， 发送信息 。 不 网域 ， 计算机 就要 路由表 信息 包 发送给 默认 路由器 （ gateway ） 。 路由器 交换机 网络 世界 里 扮演着 一个 角色 ， 不 数据 ， 只 负责 数据 分发 。 过程 实际上 描述 过程 迭代 重复 ， 路由器 一个 路由表 ， 目标 机器 网域 ， 不则 信息 包 发送给 一个 默认 路由器 交换机 ， 最终目标 机器 位于 网域 ， 信息 包 发送给 目标 机器 。   通信协议   计算机 找到 目标 计算机 开口 说话 ， 随便 说话 发送 一堆 乱码 ， 目标 机器 看不懂 。 制定 计算机 之间 通信协议 。 计算机 之间 通信协议 ？ 简单 来说 好比 两个 人 之间 对话 某种 规范 ， 两个 国家 外交 协商 某种 特定 交互 流程 。 一个 人 一个 人 说 \" 你好 \" ， 一个 人 收到 回应 \" 你好 \" ， 收到 ， 第一个 收到 回应 ， 协议 牵手 成功 ， 会话 ， \" 星期 \" ， 发送 ， 一个 人 收到 回应 \" 星期一 \" … … 类似 交互方式 。 连接 双向 ， 连接 持续 ， 发送 goodbye 关闭 协议 ， 协议 单向 ， 无 状态 协议 ， HTTP 协议 ， 信息 发送 完 连接 就算 自动 关闭 。   描述 还 遗漏 一点 交互 流程 上 规范 ， 发送 信息 包 格式 规范 ， 或者说 格式 。   应用程序 体系结构   网络 世界 里 两种 应用程序 体系结构 ： 一种 client / server 体系结构 ； 一种 peer     peer ， P2P 体系结构 。   选择 客户机 / 服务器 体系结构 ， 应用程序 会 两个 命令 两种 工作 模式 ， 一个 启动 本地 客户机 进程 ， 一个 启动 服务器 进程 ， 很多 应用程序 都 。 P2P BitTorrent 下载 软件 熟知 。   讨论 最 client / server 体系结构 。   套 接字   程序 之间 进程 进程 之间 通信 ， 一个 客户机 进程 ， 一个 服务器 进程 ， 两个 进程 之间 通信 。 谈到 P2P 体系结构 ， 理解 ， 一个 进程 客户机 服务器 。 定义 :   给定 一对 进程 之间 通信 ， 称 发起 通信 进程 客户机 进程 ， 会 话 中 等待 进程 服务器 进程 。 （ 理解 被动 等待 通信 信号 ）   两个 进程 之间   \\ textbf { 套 接字 }   ( socket ) 发送 接受 报文 。 套 接字 一个 主机 内 应用层 传输层 之间 接口 ， 应用程序 开发者 控制 套 接字 层面 上 东西 ， 套 接字 传输层 控制 东西 有限 ， 仅限于 :   选择 传输层 协议 设定 几个 传输层 参数 （ 缓存 报文 长度 ） 。   TCP / IP 网络 上 两个 传输 协议 :   UDP 协议 TCP 协议 。 软件 开发者 创建 新 应用程序 时 ， 传输层 TCP 协议 UDP 协议 。   TCP 协议   TCP 协议 面向 连接 可靠 数据传输 。 面向 连接 指 客户机 服务器之间 握手 过程 好 建立 TCP 连接 ， 结束 拆除 连接 。 可靠 数据传输 指 TCP 协议 保证数据 无差错 顺序 交付 发送 。 TCP 协议 还 拥塞 控制 机制 。 SMTP （ 电子邮件 ） 协议 ， Telnet 协议 ， HTTP 协议 ， FTP 协议 多用 TCP 协议 。   UDP 协议   UDP 一种 不 提供 不必要 服务 轻量级 传输层 协议 ， 仅 提供 最小 服务 。 UDP 无 连接 ， 两个 进程 之间 握手 过程 。 UDP 协议 不 保证 报文 接受 进程 收到 ， 不 保证数据 顺序 到达 。 UDP 拥塞 控制 机制 。 因特网 电话 流媒体 多用 UDP 协议 。   HTTP 协议   HTTP （ HyperText   Transfer   Protocol ） 超文本 传输 协议 网络 世界 一个 熟知 协议 ， 应用层 ， 应用层 协议 。 HTTP 定义 两个 端系统 ， 一个 客户机 ， 一个 服务器 ， 两个 之间 报文交换 报文 格式 。 Web 浏览器 HTTP 协议 客户机 端 ， Web 服务器 HTTP 协议 服务器端 。   HTTP 协议 TCP 协议 传输层 协议 ， 用户 请求 一个 Web 页面 时 ， 浏览器 HTTP 客户机 服务器 建立 一个 TCP 连接 ， 连接 建立 ， 浏览器 服务器 套 接字 交流 。 客户机 经由 其套 接字 服务器发送 一个 HTTP 请求 报文 ， 随后 服务器 接受 HTTP 请求 报文 ， 内部 ， 找到 html 文件 资源 文件 数据 运算 ， 经由 套 接字 回应 一个 HTTP 响应 报文 客户机 。 HTTP 服务器 进程 通知 TCP 断开 TCP 连接 ， TCP 大概 等到 客户机 完整 接受 HTTP 响应 报文 ， TCP 连接 断开 。 HTTP 客户机 接受 HTTP 响应 报文 ， TCP 连接 断开 ， HTTP 请求 算是 完 。   Web 页面 还 包含 图片 引用 javascript 引用 ， 一个 引用 浏览器 客户机 都 一个 HTTP 请求 ， 类似 。 基于 HTTP 协议 TCP 协议 只 一个 请求 报文 一个 响应 报文 传输 ， 一个 Web 页面 ， 发送 十几个 HTTP 请求 ， 就要 建立 十几个 TCP 连接 。 （ 过程 大抵 ， 客户机 都 会 打开 5 - 10 并行 TCP 连接 。 ）   描述 HTTP 协议 初始 版本 情况 ， HTTP /   1.1 HTTP 协议 持久 连接 特性 ， 默认 采用 持久 连接 方式 。 持久 连接 减少 新开 TCP 连接 消耗 ， HTTP 每送 一个 报文 请求 断开 TCP 连接 ， 连接 长时间 未 ， HTTP 服务器 才 关闭 连接 。   说 HTTP 协议 本身 无 状态 ， HTTP 服务器 记忆 客户机 信息 ， cookie session ， cookie 客户机 保存 状态 信息 ， session 服务器 保存 状态 信息 ， 。   HTTP 报文格式   HTTP 报文 分为 两种 ， 一种 请求 报文 ， 一种 响应 报文 。   一个 HTTP 请求   GET   /   HTTP   /   1   .   1   Host   :   www   .   google   .     User - Agent   :   Mozilla   /   5   .   0   (   X11   ;   Ubuntu   ;   Linux   x86 _ 64   ;   rv   :   40   .   0   )   Gecko   /   20100101   Firefox   /   40   .   0   Accept   :   text   /   html   ,   application   /   xhtml   +   xml   ,   application   /   xml   ;   q   =   0   .   9   , * / * ;   q   =   0   .   8   Accept - Language   :   zh - CN   ,   zh   ;   q   =   0   .   8   ,   en - US   ;   q   =   0   .   5   ,   en   ;   q   =   0   .   3   Accept - Encoding   :   gzip   ,   deflate   Connection   :   - alive   第一个 方法 字 段 ， HTTP GET 、 POST 、 PUT 、 DELETE 方法 ， HOST 请求 主机 名字 ， User - Agent 用户 浏览器 ， Connection 设置 - alive 正是 说 建立 持久 连接 。   响应 :   HTTP   /   1   .   1   200   OK   Cache - Control   :   private   Content - Length   :   231   Content - Type   :   text   /   html   ;   charset   =   UTF - 8   Date   :   Wed   ,   02   Sep   2015   08   :   47   :   52   GMT   Location   :   https   : / /   www   .   google   .     /   gws _   =   ssl   .........   响应 200 熟知 HTTP 响应 状态 码 。 HTTP 协议 更 内容 html5 学习 中 讨论 。   cookie 技术   cookie 作用 原理 ， 用户 登录 一个 网站 ， 网站 服务器返回 一个 HTTP 响应 ， 一行   Set - cookie :   whatwhatwhat   HTTP 响应 用户 浏览器 接受 ， 特定 cookie 文件 中 添加 一行 ， 服务器 名字 （ HOST ） Set - cookie 标识码 信息 。 浏览器 再 访问 网站 ， 自动 HTTP 请求 上 加上 一行 :   Cookie :   whatwhatwhat   网站 服务器 HTTP 请求 一行 ， 说 ， ， 张三 回来 。 用户 网站 上 操作 记录 都 网站 数据库 统一 管理 ， 张三 点击 页面 ， 张三买 东西 。   web 缓存 器   web 缓存 器 代理服务器 ， 代表 初始 服务器 满足用户 HTTP 请求 。 过程 :   用户 浏览器 缓存 器 建立 TCP 连接 ， 发送 一个 HTTP 请求 。   web 缓存 器会 检查 本地 缓存 目标 对象 备份 ， ， web 缓存 器用 HTTP 响应 回应 用户 浏览器 。   web 缓存 器 目标 对象 缓存 ， 会 初始 服务器 打开 一个 TCP 连接 ， 发送 一个 HTTP 请求 ， 目标 对象 ， 对象 缓存 本地 ， 用户 浏览器 回应 一个 HTTP 响应 好 新 对象 发给 用户 浏览器 。   web 缓存 器 本地 目标 对象 缓存 ， 缓存 过于 陈旧 。 缓存 器 证实 本地 缓存 内容 最新 ， 利用 HTTP 协议   \\ verb + If - modified - +   一行 。 web 缓存 器 发送 一个 短小 HTTP 请求 ， 包含 一行 :   If - modified - sine :   Wed ,   4   Jul   2007   09 : 23 : 24   日期 web 缓存 器 存储 上 缓存 对象 HTTP 响应 头上   Last - Modified   一行 。   Web 服务器 会 回应 一个 很 短小 HTTP 响应 ， 最 简短 HTTP 状态 码 几个 信息 ， 304 , Not   Modified 。   DNS 协议   DNS 协议 计算机网络 最底层 找到 目标 计算机操作 相关 ， 应用层 。   输入 域名   www . .   ， 计算机 不 ， 计算机 转化 IP地址 才行 ， 计算机 转化 ， 互联网 世界 ， 很多 DNS 服务器 ， 计算机 查询 DNS 服务器 ， 获取 域名 IP地址 。",
            "tags":"基础",
            "url":"articles/ji-suan-ji-wang-luo-ji-chu.html"
        },
        {
            "title":"python语言学习之-学习资料整理",
            "text":"python 入门教程 ， python 官 网上 tutorial 。 原作者 ： Guido   van   Rossum   Fred   L .   Drake   ； 中文翻译 ： 刘鑫 ； 版本 ： 2013 - 10 - 28 ； pdf 下载 链接 ：   python 入门教程   。   learning   python ， python 语言 参考 ， 参看 python 学习 手册 （ 第四版 ） 。 原作者 ： Mark   Lutz ， 中文翻译 ： 李军 ， 刘红伟 。   programming   python ， 作者 Mark   Lutz python 编程 进阶 讨论 ； 版本 ： 第四版 。   python   官 网上 资料   。   第三方 模块 参考手册 ， numpy ,   scipy ,   matplotlib 第三方 模块 官 网上 发布 官方 参考手册 。   dive     python3   english   version   ,   这是   中文版   。   A   Guide     Python ' s   Magic   Methods ， 作者 ： Rafe   Kettler   , 版本 ： 2014 - 01 - 04 ，   Github   地址   .   Foundations     Python   Network   Programming   ， python 网络 编程 基础 ， [ 美 ]   John   Goerzen   著 ， 莫迟 译   。   这是   中文 在线 阅读 网页   ， 这是   english   version   。   Unix 网络 编程 卷 1 :   套 接字 联网 API   ,   Author :   W .   R .   Stevens   ,   Bill   Fenner   著   ,   version :   第三版   python   3   cookbook   Effective   Python   编写 高质量 Python 代码 59 方法 ， [ 美 ]   Brett   Slatkin   著 ，   爱 飞翔 译 。   计算机网络 自顶向下 方法   ,   Author :   James   F .   Kurose   ,   Keith   W .   Ross   , 陈鸣译   。 本书 入门 计算机网络 相关 知识 很 不错 。   SQL 必知 必会   [ 英 ]   Ben   Forta   著 ，   钟鸣   刘晓霞 译 。",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-xue-xi-zhi-xue-xi-zi-liao-zheng-li.html"
        },
        {
            "title":"docker",
            "text":"前言   docker 请 参看   网页   ， 说 docker 改变 软件 生态 确实 不为过 。 老实 说 接触 docker 感觉 学到 很多 东西 ， linux 系统 相关 ， ansible 部署 工具 相关 ， virtualbox   vagrant 相关 ， 都 慢慢 过时 淘汰 。 工具 很 有用 ， 说 淘汰 ， 更 确切 来说 ， 玩家 来说 ， 节省 更 精力 时间 ， 不 折腾 工具 配置 学习 折腾 老半天 。   That ‘ s       love   docker .   实际上 docker 带来 变化 远远 不止 一个 节省 开发者 做 事情 时间 一个 不错 工具 简单 ， 伴随 SPPS ， 软件 服务 ， 更 确切 来说 互联网 大 背景 下 ， 应运而生 。 ， 开发者 顺应 时代 ， 编码 ， 软件应用 很多 ， 都 做出 改变 。 请 读者 进一步 阅读   https : / / 12factor . net / zh _ cn /   讨论 。   实际上 折腾 vagrant ， 很 认同 理念 ：   开发 ， 测试 ， 生产 环境 ， 彻底解决 ， 运行 ， 不行 。 vagrant 控制 virtualbox 创建 虚拟机 方式 ， 在我看来 显得 略微 笨拙 点 ， 配置 繁琐 ， 很 好地解决 ； docker 很 好地解决 之外 ， 虚拟化 方案 更 轻量级 ， 更 接近 原生 。   docker 包括 三个 核心 概念 ：   镜像 image ， 容器 container ， 仓库   image   镜像   用来 创建 docker 容器 模板   container   容器 ， 看做 镜像 生成 一个 实例   docker 仓库 用来 保存 镜像 ，   docker   hub   提供 很多 docker 仓库 。   安装   内容   过时   ， 请 参考 官方 文档 安装 。   windows 下 安装   windows 下 安装 操作系统 专业版 企业 版 ， 只能   docker   tool   box   安装 。 记得   window10   开发者 模式 打开 。   windows10 企业 版 专业版 ， 没试 ， 想 官网 ， 安装 成功 。   kitematic   docker   镜像 管理工具 ， 推荐 ， 很 。   centos 下 安装   更 详细 内容 见   官方 文档   。   yum   install   - y   yum - utils   yum   install   - y   device - mapper - persistent - data   yum   install   - y   lvm2   yum - config - manager   - - add - repo   https : / / download . docker . / linux / centos / docker - ce . repo   yum   install   docker - ce   ubuntu 下 安装   更 详细 内容 见   官方 文档   。   sudo   apt -   remove   docker   docker - engine   docker . io   containerd   runc   sudo   apt -   update   sudo   apt -   install   \\   apt - transport - https   \\   ca - certificates   \\   curl   \\   gnupg - agent   \\   software - properties - common   curl   - fsSL   https : / / download . docker . / linux / ubuntu / gpg   |   sudo   apt - key   add   -   sudo   add - apt - repository   \\   \" deb   [ arch = amd64 ]   https : / / download . docker . / linux / ubuntu   \\   $ (   lsb _ release   - cs   )   \\   stable \"   sudo   apt -   update   sudo   apt -   install   docker - ce   docker - ce - cli   containerd . io   linux 系统 下 安装   linux 系统 下 安装 docker 运行 ：   sudo   docker   run   - world   ， 运行 ：   docker   run   - world   不 ， 登录 用户 docker 群组 中 去 ：   sudo   usermod   - aG   docker   $ USER   【 NOTCIE   命令 生效 退出 登录 下 】   第一个 项目   内容 参考 视频 ：   项目 新建 一个 docker   镜像 或者说 image 。   新建 一个 文件夹 ， 编写 Dockerfile   FROM   php : 7.0 - apache   COPY   src /   / var / www / html   EXPOSE   80   FROM     镜像 基于 镜像 ， 镜像 名字 php ， 一个 官方 镜像 ， 分支 名字   7.0 - apache   。   执行 COPY 动作 ， 文件夹 src 文件夹 内容 ， 复制到 容器 【 镜像 生成 容器 ， 源 镜像 基于 linux 系统 】   / var / www / html   文件夹 下 。   暴露 80 端口   src 下 一个 简单 php 文件 ， 讨论 重点 。   生成 镜像   docker   build   - t   image _   . < _ foler >   列出 本地 镜像   docker   image   ls   网下 下载 镜像   docker   pull   - world   删除 镜像   docker   image   rm   < id >   制作 镜像 运行 命令 ，   a358003542   docker   hub   注册 用户名 ， 采用 写法 ：   docker   build   - t   a358003542 /   .   启动 镜像   docker   run   - p   8080 : 80   a358003542 /   docker   run   命令 自动 试着 docker   hub 下载 镜像 功能 ， 命令 run 单词 含义 一个 容器 内 执行 命令 ， 会 自动 一个 镜像 创建 一个 容器 。   端口 转发 ， docker 容器 内 80 ， 容器 对外 发布 8080 端口 。 命令 查看 下 创建 容器 ：   docker   container   ls   项目 提交 docker   hub   docker   login   docker   push   a358003542 /   docker   push   名字 格式   docker   hub 上 用户名 / 仓库 名字   。   删除 虚悬 镜像   docker   build   docker   pull   同名 镜像 ， 旧 镜像 仓库 名 tag 会 ， 类 镜像 虚悬 镜像 。 可用 命令 删除 组合 虚悬 镜像 ：   docker   image   prune   . dockerignore   . dockerignore   类似   . gitignore   文件 ， 用于 docker   build 镜像 忽略 掉 不 文件 文件夹 ， docker build 镜像 过程 时 ， 会 自动 指定 上下文 目录 打包 传递 docker 引擎 。   Dockerfile   FROM   指定 基础 镜像   COPY   文件 文件夹 复制到 容器 位置 ， COPY 本地 内容 路径 相对路径 。   ADD   ADD COPY 功能 基本一致 ， ADD 还 增加 额外 功能 ， 面向 网络 下载 。   RUN   相当于 容器 内 执行 shell 命令 ， RUN 之间 环境 不 共用 ， 一个 RUN 命令 容器 一层 ， 推荐 RUN 命令 都 合并 。   CMD   CMD 提供 运行 容器 默认 ，   ubuntu   镜像   CMD     / bin / bash   ， 输入 ：   docker   run   -   ubuntu   会 bash 。   Dockerfile 定义 ENV 环境变量 会先 CMD shell 层 。   ENV   设置 环境变量   Dockerfile ，   引用 设置 环境变量 ：   $ APP _ PATH   VOLUME   定义 匿名 卷   ：   VOLUME   / home / data   定义 容器 数据 存储 匿名 卷 ， Dockerfile 会 申明 匿名 卷 ， 就算 容器 运行 时 用户 忘记 指定 存储 卷 ， 容器 运行 时 容器 存储 卷 写入 数据 。   - v   mydata : / home / data   制定 存储 卷 ， 会 覆盖 Dockerfile 声明 默认 配置 。   EXPOSE   声明 容器 提供 服务 端口 ，   - p   9001 : 9001   映射 端口 。   WORKDIR   指定 docker 环境 下 当前工作 目录 （ 运行 docker   run docker 环境 下 ）   保存 镜像 文件   docker   save   < image >   启动 容器   启动 容器 bash 交互   docker   run   -   \" id     running   container \"   bash   容器 后台 运行 ， 希望 登入 容器 ， 推荐   exec   ：   docker   exec   -   < container >   bash   exec 登入 容器 ， 输入   exit   导致 容器 停止 。   容器 运行 时 设定 重启 策略   - - restart =   默认   容器 退出 不 做   - - restart = - failure   容器 非 0 状态 退出   docker 会 尝试 启动 容器   - - restart =   用于 docker 服务 重启 自动 启动 容器   查看 容器 输出 日志   台 形式 启动 容器 ， 查看 容器 日志 ：   docker   logs   < container >   docker   logs   - - tail = 100   < container >   - - tail   列出 条 日志 。   docker   compose   安装   更 详情 参考   官方 文档   ， 列出 linux 简单 下载安装 。   sudo   curl   - L   \" https : / / github . / docker / compose / releases / download / 1.24 . 0 / docker - compose - $ ( uname   - s ) - $ ( uname   - m ) \"   - o   / usr / local / bin / docker - compose   sudo   chmod   + x   / usr / local / bin / docker - compose   docker - compose 说 docker 容器 编排 工具 ， 实际上 单个 容器 启动 配置 定制 很 。   一个 简单 例子 所示 ：   version :   \" 3 \"   services :   web :   build :   .   env _ file :   -   . / pycode / python . env   volumes :   -   . / data : / home / data   -   . / pycode : / home / pycode   ports :   -   9001 : 9001   选项 很多   docker   run   命令 时 可选 参数 ， 功能 大体 都 类似 。   运行 docker - compose   启动 容器 组 ， 重启 查看 日志 。   docker - compose     阶段 构建   阶段 构建 最 常用 模式 容器 dev 环境 runtime 环境 分开 ， 实施 阶段 构建 ， 深刻理解 项目 包是 运行 时 环境 ， 包是 编译 环境 。   新开 一个 编译 环境 容器 ， 装 好 编译 项目 代码 依赖 ， 项目 代码 编译 好 。   新建 一个 运行 时 环境 容器 ， 最 核心 代码 ：   COPY   - - = builder   $ ROOT / build   $ ROOT / build   builder 容器 编译 好 build 内容 复制到 运行 时 容器   做 两个 好处 ：   编译 依赖 很多 ， 运行 时 容器 镜像 很 小巧   编译 容器 发生 变动 情况 下 ， build 镜像 ， 编译 时 容器 会 利用 cache ， 再 费时 编译 工作   Dokcerfile 最佳 实践     . dockerignore   命令 尽量 合并 ， dockerfile 一个 命令 新建 一个 docker 层 。 docker 早期 很 关键 ， docker 重点 关注 三个 命令 ， 尽量 合并 ：   RUN   COPY   ADD   阶段 构建 ， 大大降低 镜像 大小 ， 不用 再 苦苦 挣扎 去 想 减少 中间层 文件 。   安装 不 软件   apt 安装 软件 先 update 尽量 合并 一句 话 ， 一个 最佳 实践 ， 还 apt 安装 过程 缓存 删掉 。   RUN   apt -   update   &&   apt -   install   - y   \\   aufs - tools   \\   automake   \\   build - essential   \\   curl   \\   &&   rm   - rf   / var / lib / apt / lists / *   docker 权限 控制 最佳 实践   docker 项目 下 默认 root 会 更 ， docker 容器 就算 root ， 安装 性 容器 外 root 区别 ， 说 。 情况 一般来说 ， 推荐 非 root 账号 ， 实践 容器 外 运行 用户 容器 内 运行 用户 。 容器 会 ， 更 容器 运行 程序 输出 文件 ， 容器 外 用户 访问 ， 容器 外该 用户 文件夹 ， 挂载 容器 时 ， 容器 内 用户 运行 程序 访问 文件 ， 权限 。   这方面 docker 版本 【 18.06 】 还 支持 ， 只能 DIY 定制 方式 ， 好 特别 麻烦 。 docker Dockerfile 运行 容器 ， 加上 ：   - - user   1000 : 1000   运行 容器 用户 。   docker - compose 启动 容器 ， docker - compose . yml 上 配置 ：   web   :   build   :   context   :   .   args   :   -   UNAME = $ { UNAME }   -   UID = $ { UID }   -   GID = $ { GID }   ...   user   :   $ { UID } : $ { GID }   配置 环境变量 ， 再 运行   docker - compose   ， 写 一个 bash 脚本 ：   # ! / usr / bin / env   bash   export   UNAME   =   $ (   whoami   )   export   UID   =   $ (   id   - u   )   export   GID   =   $ (   id   - g   )   exec   docker - compose   \"   $ @   \"   运行 ：   bash   runinenv - docker - compose . sh     传递 环境参数 启动 docker - compose   命令 效果 。   还 容器 配置 ：   FROM   python : 3.6   ARG   UNAME   =   wanze   ARG   UID   =   1000   ARG   GID   =   1000   ENV   UHOME   =   / home /   $ UNAME   RUN   groupadd   - g   $ GID   - o   $ UNAME   RUN   useradd   - m   - u   $ UID   - g   $ GID   - o   - s   / bin / bash   - d   $ UHOME   $ UNAME   USER   $ UNAME   新 建立 容器 root 用户 ， 新建 一个 容器 外 用户 用户 群组 。 容器 默认 登录 用户 配置 好 。   挂载 VOLUMN 上 配置 ：   volumes :   -   . / data : / home /   $ {   UNAME   }   / data   -   . / pycode : / home /   $ {   UNAME   }   / pycode   目标 文件夹 容器 外 所有者 容器 运行 ， 容器 内 程序 都 访问 。   小节 参考   网页     网页   。   docker 镜像 存储 配置   小节 参考   网页   ， 值得一提的是 方法 服务器 重启 重新配置 ， 好处 配置 很 简单 ：   sudo   docker   rm   - f   $ ( docker   ps   - aq ) ;   docker   rmi   - f   $ ( docker   images   - q )   sudo   systemctl   stop   docker   sudo   rm   - rf   / var / lib / docker   sudo   mkdir   / var / lib / docker   sudo   mkdir   / mnt / docker   sudo   mount   - - rbind   / mnt / docker   / var / lib / docker   sudo   systemctl   start   docker   参考资料   http : / / www . ruanyifeng . / blog / 2018 / 02 / docker - tutorial . html   https : / / docker _ practice . gitee . io   https : / / docs . docker . /",
            "tags":"tools",
            "url":"articles/docker.html"
        },
        {
            "title":"python-dateutil模块",
            "text":"python 内置 模块 datetime 解决 简单 写 几个 辅助 函数 解决 没 上   python - dateutil   模块 ， ， 上 python - dateutil 模块 会 ， 发现 好多 有名 模块 都 默认 安装 模块 。   relativedelta   ， datetime replace 值设 0 值 ， timedelta 减去 值 ， 大部分 都 解决 ， ， 跨 月份 涉及 天数 不 ， relativedelta 很 。   涉及 datetime 跨度 计算 ， 推荐   relativedelta 函数 。     dateutil . relativedelta   import   relativedelta     =   datetime   .   utcnow   ( )   sdt   =     -   relativedelta   (   months   =   months   )   rrule   lrule ， relativedelta 配置 起始 时间 ， 指定 结束 时间 ， rrule 函数 生成 一个 时间 区间 ， 很 。     dateutil . rrule   import   rrule   ,   MONTHLY   list   (   rrule   (   freq   =   MONTHLY   ,   dtstart   =   sdt   ,     =     ) )   parse   dateutil     parse 函数 输入 日期 时间 字符串 datetime   object 很 ， 简单 情况 下 ， datetime   strftime   函数 够用 。",
            "tags":"python好伙伴",
            "url":"articles/python-dateutilmo-kuai.html"
        },
        {
            "title":"python爬虫之-表单和登陆等相关",
            "text":"表单 简单 来说 一个 前端 友好 界面 ， 其实质 发送   一个   POST   请求 。   关键 理解 前端 表单 界面 ， POST 参量 。   < form   method =   \" POST \"   action =   \" \"   < input   type =   ...   =   \" firstname \"   ...   >   < input   type   ...   submit   < / form   >   input         POST   参量 ， action   POST   目的地 。   类似 表单 很多 元素 ， checkbox ， 都 用户 快速 设置 参量 。   登录 cookies   http 无 状态 ， cookies     session   ， 服务端 数据库 记录 session ， cookies 客户端 。 爬虫 登录 ， 记得 保留 好 登录 成功 cookies 。   请求 ， requests cookies 保存 设置 不好 。 记得 requests session 机制 。   import   requests   session   =   requests   .   Session   ( )   data   =   {   ' username '   :   ' user '   ,   ' password '   :   ' 123456 '   }   s   =   session   .   post   (   ' login . html '   ,   data   )   #####   session 请求 ，   s   .     (   ' profile . html '   )",
            "tags":"python爬虫",
            "url":"articles/pythonpa-chong-zhi-biao-dan-he-deng-lu-deng-xiang-guan.html"
        },
        {
            "title":"python爬虫之-防止被封的策略",
            "text":"封 首要 策略 尽量 别人 服务器 下 ， 写 爬虫 少 请求 ， 每次 请求 都 核心 请求 获取 最 核心 数据 ， 刷 页面 刷 ajax ， 请求 之间 设置 一个 停顿 时间 。   time . sleep ( 3 )   首要 原则 基础 上 ， 介绍 很多 实战 技巧 ， 都 符合 一个 大 原则 ： 尽可能 爬虫 人 浏览 网页 区别 。   http 请求 头 调整   user - agent   设置 ， 时不时 切换 下 。   还 ， 推测   Referrer   header 场景 下 文章 。     Accept - Language   有用 。   Cookies   情况 下 cookies 获取 javascript 支持 。 cookies 总 原则 第一次 请求 获取 cookies ， 很 请求 都 cookies 即可 。   反 爬虫 cookies 都 会 时间 ， 一个 简单 做法 设置 时间 ， 定时 获取 最新 cookies ， 请求 量 再 获取 一个 新 cookies 。     scrapy - splash   下 。   表单 陷阱   表单 ：   < input   type = \" hidden \"   ...   记住 人 页面 上 点击 ， 显示 字 段 值 会 一并 送 ， 服务器 会 值 加密 值来 判断 请求 人点 爬虫 。   策略 先 表单 内容 爬 ， 收集 好 再 发送 表单 请求 。   情况 ， 一种 情况 ， 页面 表单 发送 特别 ， 表 单字 段 ， 用户 看得见 看不见 ， 都 发送 ， 发送 会 毙掉 。   表单 陷阱 ， css 会 动态 input   hidden 属性 ， 好好 分析 下 。   403   forbidden   这极 爬虫 封 。   参考资料   web   scraping     python   writing     Ryan   Mitchell",
            "tags":"python爬虫",
            "url":"articles/pythonpa-chong-zhi-fang-zhi-bei-feng-de-ce-lue.html"
        },
        {
            "title":"python爬虫之-自然语言处理相关",
            "text":"网页 内容 大部分 文本 ， 爬虫 不可避免 研究 自然语言 。   爬虫 越 学到 会 明白 ， 漫无目的 爬虫 真的 入门 阶段 ， 爬虫 进阶 很多 就要 爬虫 定向 上 下功夫 。   本文 介绍 自然语言 相关 知识 ， 爬虫 相关 做 讨论 思考 。   分析 文章 热门 词 ， 热门 词 进一步 定向 搜索 定向 爬取 。   说 抽象 一点 ， 爬虫 进阶 自然语言 理想 状态 ， 简言之 ：   好像 一个 人 阅读 一篇 文章 ， 真的 理解 文章 词语 ， 去 url 该点 ， 关键词 收集 ， 篇文章 价值 ， 篇文章 该分 一类 。   列出 自然语言 基本功 ， 想要 爬虫 进阶 深造 就要 基本功 扎实 ：   分词   词频 统计   ngram 模型 分析 词语 之间 关系",
            "tags":"python爬虫",
            "url":"articles/pythonpa-chong-zhi-zi-ran-yu-yan-chu-li-xiang-guan.html"
        },
        {
            "title":"python爬虫之-字体反爬虫",
            "text":"爬虫 ， 分析 网页 会 ， 东西 看上去 乱码 ， css 设置 一种 额外 字体 。 破解 内容 ？   目标 字体 下载 ， 字体 各种各样 名字 ， 字体 codepoint 随机 ...   下载 一个 fontcreator 会 字 codepoint ， 爬虫 编码 ， python   fonttools 库来 加载 字体 。   下载 好 字体 ， 保存 好 字体 做好 缓存 工作 。   见 本文 参考资料 2 ， 利用   fonttools   模块 加载 目标 字体 。   font   =   TTFont ( font _ filename )   分析 字体 cmap   tables cmap 数据 ， 字体 情况 ， 分析 ， fonttools 模块 文档 少 ， 加上 字体 知识 不太多 ， 只能 简单 摸索 下 。   font _ mapping   =   font [ ' cmap ' ] . tables [ ] . cmap   找到   font _ mapping   ， 字符   python   ord   函数 下 ， 目标 字符   unicode   code   point ， 说 字体 code   point ，   font _ mapping   会 ， 内容 。   参考资料   https : / / zhuanlan . zhihu . / p / 32087297       find       codepoint     ttf   file",
            "tags":"python爬虫",
            "url":"articles/pythonpa-chong-zhi-zi-ti-fan-pa-chong.html"
        },
        {
            "title":"python中的位操作",
            "text":"位操作 c 语言 会 更 ， 先 这块 概念 弄清楚 ， 迁移 c 代码 很 。   1 ， 任意 长度 基于 字节   位 向量   比如说 想 表达   01010101010101   答 ：   0b01010101010101   2   任意 长度 位 向量 ， 遍历 逻辑   ， 看 编程 珠玑 ， 发现 python ， ， 类似 库 ：   https : / / github . / ilanschnell / bitarray   好好 研究 下 项目 源码 。   4   建立 位 图 映射     0b1010101010   - >     数字 集合   { 1 , 3 , 5 , 7 , 9 }   5   有没有 建立 位 图 映射   3   常规 位操作 运算符 ， 帮 说 说   按位   x   =   0b111101010   y   =   0b101010101   print ( bin ( x ) )   print ( bin ( y ) )   print ( bin ( x   &   y ) )   - - -   0b111101010   0b101010101   0b101000000   按位   按位 异或   按位 取反   按位 左移   按位 右移",
            "tags":"python语言",
            "url":"articles/pythonzhong-de-wei-cao-zuo.html"
        },
        {
            "title":"使用cython来加速python",
            "text":"找到 性能 瓶颈 所在   确认 脚本 函数 到底 性能 瓶颈 ：   python   - m   cProfile   test . py   jupyter   notebook   timeit   功能 ， 写   time 计时 。   循环 结构 提速 很 ， 指定 静态 类型 会 提速 。   python 代码 cython 都 支持 ， 重点 去 开发 限速 目标 函数 ， 到处 优化 。   参考资料 1 例子 ， 加速 ， N 设置 3000 ， 用时   53.301 s ， 加速 ， 用时 4.186 s 。 加速 exp 运算 很多很多 次 ， 大概 花 一两秒 样子 ， 原始 python 代码 循环 操作 上 开销 很大 。 关键 计算 循环 次数 太 ， 就要 上 c 扩展 优化 。   做 性能 测试 一类 耗时 操作 不用 c 代码优化 ， 类 耗时 操作 IO 等待 型 操作 ， 有的是 等待 数据库 IO 操作 ， 有的是 等待 文件 读写 IO 操作 ， 有的是 等待 网络 IO 请求 。 请求 很多 都 socket 套 接字 请求 相关 。   pyx 文件   pyx 文件 更 请 查看 cython 官方 手册 。   重点 讲   python 模块 包 管理 方案 ， 推荐 利用   setuptools   ，     setuptools   import   setup   ,   find _ packages   ,   Extension   ext1   =   Extension   (   \" expython . common \"   ,   [   \" expython / common . pyx \"   ] )   EXTENSIONS   =   [   ext1   ]   setup   (   zip _ safe   =   False   ,   ext _ modules   =   EXTENSIONS   ,   )   Extension 类 ：   第一个 参数 想 目标 加速 模块 （ python 文件 模块 ， 多个 带 __ init __. py 包 ） 总 模块 中 名字 ， 支持 点 标记 。   第二个 参数   sources ， 一个 列表 ， 文件 路径 写 上 。   集成 原始 c 代码   会 写 原始 c 代码 ， 利用 cython 集成 进来 。     setuptools   import   setup   ,   find _ packages   ,   Extension     Cython . Distutils   import   build _ ext   ext1   =   Extension   (     =   \" expython . wrapped \"   ,   sources   =   [   \" expython / clib / cgfun . c \"   ,   \" expython / clib / wrapped . pyx \"   ] ,   libraries   =   [ ] ,   include _ dirs   =   [ ] )   EXTENSIONS   =   [   ext1   ]   setup   (     =   ' ... '   ,   ...   packages   =   find _ packages   (   exclude   =   [   ' ez _ setup '   ,   ' examples '   ,   ' tests '   ] ) ,   zip _ safe   =   False   ,   cmdclass   =   {   \" build _ ext \"   :   build _ ext   } ,   ext _ modules   =   EXTENSIONS   ,   )   setup . py   核心 代码 上 所示 ， 几个 文件 :   cgfun . c   cgfun . h   wrapped . pyx   内容 所示 ， 引用   clib   __ init __. py   写 上 ：     expython . wrapped   import   _ prime   ,   fibonacci   ,   factorial   ：     expython . clib   import   _ prime   ,   fibonacci   ,   factorial   cgfun . c   内容 ：   int   cgcd ( int   x ,   int   y )   {   int   g   =   y ;     ( x   >   0 )   {   g   =   x ;   x   =   y   %   x ;   y   =   g ;   }   return   g ;   }   long   cfib ( long   n ) {   long   i ;   long   a = 0 ;   long   b = 1 ;   long   tmp ;     ( i = 0 ;   i < n ;   ++ i ) {   tmp   =   b ;   b   =   a   +   b ;   a   =   tmp ;   }   return   a ;   }   cgfun . h   内容 ：   # ifndef   __ CGFUN _ H __   # define   __ CGFUN _ H __   int   cgcd   (   int   a   ,   int   b   ) ;   long   cfib   (   long   n   ) ;   # endif   wrapped . pyx 内容 ：   cimport   cython   cdef   extern     \" cgfun . h \"   :   int   cgcd   (   int   a   ,   int   b   )   long   cfib   (   long   n   )   def   gcd   (   a   ,   b   ) :   return   cgcd   (   a   ,   b   )   def   fibonacci   (   n   ) :   return   cfib   (   n   -   1   )   def   factorial   (   int   x   ) :   \" \" \"   cython   language   \" \" \"   cdef   int   m   =   x   cdef   int   i     x   < =   1   :   return   1     :     i     range   (   1   ,   x   ) :   m   =   m   *   i   return   m   @ cython . boundscheck   (   False   )   @ cython . cdivision   (   True   )   def   _ prime   (   int   n   ) :   ' ' ' test   input   integer   n     a   prime .   > > >   _ prime ( 0 )   False   > > >   _ prime ( - 5 )   False   > > >   _ prime ( 5 )   True   > > >   _ prime ( 123 )   False   ' ' '     n   = =   2   :   return   True   elif   n   <   2     (     n   &   1   ) :   return   False   cdef   int   x     x     range   (   3   ,   int   (   n   * *   0.5   )   +   1   ,   2   ) :     n   %   x   = =   0   :   return   False   return   True   更 高级 集成 numpy ， 查看 cython 官方 文档 。   参考资料   Cython   入门教程   github 上 一个 简单 cython 样例   python3   cookbook 相关 讨论",
            "tags":"python好伙伴",
            "url":"articles/shi-yong-cythonlai-jia-su-python.html"
        },
        {
            "title":"软件即服务的12因素方法论",
            "text":"本文 学习   网站   ， 网站 提出 软件 服务 架构 12 因素 方法论 。 软件开发 ， 部署 docker 化 ， 微 服务 ， 云 服务 ， 分布式 架构 大 趋势 下 ， 软件 对外 提供 一种 http   api 服务 定位 很 普遍性 。 本文 讨论 很 值得 细细 去 思考 。   前言   Adam   Wiggins   研究 数以百计 应用程序 开发 部署 ， Heroku 平台 上 数十万 应用程序 开发 运作 扩展 过程 ， 写作 博客 ：   https : / / 12factor . net / zh _ cn /   。   互联网 Internet 大 背景 下 ， 软件 一种 服务 ， 更 确切 来说 一种 api 服务 一种 普适性 架构 模式 ， 软件 功能 ， 软件 本身 一个 提供 对外 api 接口 工具 定位 ， 无疑 面向 互联网 面向未来 。   讨论 涉及 部署 运维 ， 实际上 ， 软件 编写 时 架构设计 编码 内部 细节 ， 编码 思路 作出 调整 。   总 原则     标准化   流程 自动 配置 ， 使 新 开发者 花费 最少 学习 成本 项目 。   操作系统 之间 尽可能   划清界限   ， 各个系统 中 提供   可移植性   。   适合   部署     云 计算 平台   ， 服务器 系统管理 节省 资源 。   开发 环境 生产 环境   差异 降 最低   ，   持续 交付   实施 敏捷 开发 。   工具 、 架构 开发 流程 不 发生 变化 前提 下   扩展   。   这套 理论 任意 语言 后 端 服务 （ 数据库 、 消息 队列 、 缓存 ） 开发 应用程序 。   一套 基准 代码 多份 部署     development   testting     production   状态 采用 git 版本号 控制 ， 做法 很 优雅 ， 软件开发 状态 软件 相关 配置 ， 正是 讨论 配置管理 讨论 。   git 代码 管理 一个 ， 一个 对外 api 接口 ， 一个 git 仓库 ， 一个 docker 部署 。 多份 部署 无非 修改 项目 根目录 下 没 git 管理 文件 环境变量 。   环境 中 存储配置   程序 编码 编码 ， 软件 立刻 开源 ， 泄露 敏感 信息 。 部署 无 差异 配置 ， 写入 代码 ， 这是 。   推荐 做法 相关 核心 配置 存储 环境变量 中 。 python 生态圈 讨论 。   项目 根目录 下写 一个   . env   文件 ， 只 写 上 一个 核心 环境 配置 变量 即可 ：   ENV _ FOR _ DYNACONF = development   项目 根目录 下 写 上 一个   . secrets . toml   文件 ， toml 配置文件 很 好 ， 很 简单 ， dynaconf 模块 推荐 ， 读者 简单 下 即可 。 格式 写 上 私密 信息 :   [ default ]   [ development ]   MONGODB _ USERNAME   =   ' '   MONGODB _ PASSWORD   =   ' '   [ testing ]   MONGODB _ USERNAME   =   ' '   MONGODB _ PASSWORD   =   ' '   [ production ]   MONGODB _ USERNAME   =   ' '   MONGODB _ PASSWORD   =   ' '   两个 文件 不 版本控制 。   项目 根目录 下 写 上   settings . toml   文件 ， 配置 文件格式 上 ， 写 上 不太 私密 配置 信息 ， 文件 版本控制 。   时 修改   . env   改变 项目 环境变量 状态 。 python 编码 ：     dynaconf   import   settings   settings 取 配置 变量值 。 dynaconf 稍作 配置 ， 集成 django flask 配置 。 更 信息 请 参看   dynaconf   官方 文档 。   ， pipenv 工具   pipenv   shell     pipenv   run   pycharm 很多 工具 ， 都 会 默认 加载   . env   环境变量 配置文件 。   显式 声明 依赖 关系   python 生态圈 很多 依赖 关系 管理工具 ， 推荐 pipenv ， pipenv 会 输出 一个 lock 文件 ， lock 并不一定 版本 库 ， 官方 文档 介绍 ， 部署 python 版本号 不太 ， lock 文件 写入 版本 库 。   requirments . txt   输出 一份 。 喜好 ， 软件 项目 依赖 关系 软件 部署 友好 ， 强烈推荐 Dockerfile 集成 。   语言 应 依赖 关系 ， 都 声明 好 。   端口 绑定 提供 服务   后 端 服务 附加 资源   两条 ， 编写 软件 服务 架构 时 ， 本地 服务 ， 第三方 提供 服务 软件应用 提供 服务 不 区分 。   服务 包括 ： 服务 ， 数据库 服务 ， 消息 队列 服务 ， 缓存 服务 。   docker 部署 ， 后 端 附加 资源 服务 ， 推荐 集成 进去 。   分离 构建 、 发布 运行   构建 代码 仓库 转化 执行 包 过程 。   发布 时 构建 配置 过程 。   运行 针对 发布 版本 启动 运行 进程 过程 。   分离 构建 、 发布 运行 三个 过程 。   实践 中 针对 互联网 ， 构建 指 发布 一个 exe 文件 ， 一个 docker image 文件 ， 运行 image 配置 环境变量 ， 运行 。   进程 并发   进程 第一等 公民 ， 一个 无 状态 进程 启动 ， 简单 运行   python   script . py   区别 。   工具 进程 并发 ， gunicorn ， 一个 进程 ， 多个 worker 模型 。 进程 不 推荐 supervisor 守护 进程 ， 推荐 操作系统 进程 管理 或者说 服务 systemd 集成 。   快速 启动 ， 优雅 终止   尽可能 开发 环境 线 上 环境   这两点 docker 化 不 。   日志   不用 太 在意 日志 ， 互联网 开发 都 快速 开发 ， 快速 迭代 ， 线上 修改 风格 。 监控 软件应用 运行 情况 ， 优先 终端 输出 流 。 开发人员 开发 实时 查看 运行 情况 。   存放 文件 日志 信息 时 ， 推荐 发送给 日志 管理工具 统一 管理 。   零碎 一次性 提供 命令行 接口   django 迁移 数据库 操作   python   manage . py   migrate   ， 零碎 一次性 编写 命令行 接口 。",
            "tags":"设计",
            "url":"articles/12factor-app-talk.html"
        },
        {
            "title":"python语言之-单例模式",
            "text":"情况 下 确保 类 一个 实例 ， 单例 模式 。   python 中 对象   __ __   方法     __ init __   方法 ，   __ __   方法 会 返回 类 创建 实例 ，   __ init __   方法 仅仅 实例 化 初始化 额外 动作 相关 。   ：   class   SingleInstance   (   object   ) :   def   __ __   (   cls   ,   *   args   ,   * *   kwargs   ) :       hasattr   (   cls   ,   ' _ instance '   ) :   cls   .   _ instance   =   super   (   SingleInstance   ,   cls   )   .   __ __   (   cls   ,   *   args   ,   * *   kwargs   )   return   cls   .   _ instance",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-zhi-dan-li-mo-shi.html"
        },
        {
            "title":"python语言之-format函数",
            "text":"format 函数 或者说 字符串 format 方法 ， 很 简单 ， 高级 需求 ， 渐渐 收集 。   宽 数字   { : 0 > 2d }   目标 数字 宽度 两位 ， 左边 填充 0   ，   >   左边 填充 ，   0 >   左边 填充 0 ，   >   右边 填充 。",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-zhi-formathan-shu.html"
        },
        {
            "title":"python语言之-int函数",
            "text":"没想到 学 python 这么久 ， 竟然 还要 再 介绍 int 函数 。   int 函数 用于 强制 类型转换 ， 一个 类 数值 字符串 integer ， 函数 还 隐藏 一个 强大 功能 ， 第二个 选 参数 ， 进位制 。   > > >   int   (   ' a '   ,   base   =   16   )   10   > > >   int   (   ' 0xa '   ,   base   =   16   )   10   效果 一个 十六进制 字符 十六进制 输出 一个 十进制 数值 。 需求 地方 别用 eval 。",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-zhi-inthan-shu.html"
        },
        {
            "title":"500lines-一个简单的web服务器",
            "text":"前言   本文   500lines   项目 篇文章 学习 讨论 ， 篇文章 写 极好 ， 编码 很 好 借鉴 参考价值 ， 还 读者 http   web   server   做 事情 一个 。 篇文章 弄清楚 ， django flask 做 事 ， 很 胸有成竹 ， 包括 nginx 服务器 做 事 一个 大致 。   作者 后 端 出身 ， 篇文章 质量 价值 ， 作者 呼唤 一篇 类似 描述 前端 框架 文章 ， 前端 框架 过程 还 一个 很 好 。   计算机网络 HTTP 相关 不 本文 讨论 ， 笔者 自觉 一块 时间 还 再 补一补 。   web 服务器 做 工作 ：   占 端口 HTTP   请求 包 发过来   HTTP 请求 包有 格式 ， 信息 parse 操作   请求 做点 （ 分发 GET   POST ）   程序 做点   返回 数据格式 ， html 。   返回 数据 传 回去   步骤 前 两步 一步 python   HTTPServer   帮 自动 做 ， 更 不用说 django flask 框架 ， 早就 帮 做好 。 只 关注 ， 请求 GET POST ， 程序 总要 干点 事 ， 送 回去 数据 整理 好 ， 再 并发 即可 。   更 高级 web   server   flask ， 会 提供 很多 额外 支持 ， 请求 参数 ， 请求 头等 信息 整理 ， 希望 restful 风格 api ， 只 返回 一个 字典 值 ， 响应 头 封装 帮 做好 ， 返回 数据 上 ， html 会 引入 jinja2 模块 引擎 ， 都 很 好 理解 。 web   server 干 事 。   第一个 例子   针对 python3 版本 代码 稍作 修改 。     http . server   import   HTTPServer   ,   BaseHTTPRequestHandler   class   RequestHandler   (   BaseHTTPRequestHandler   ) :   ' ' ' Handle   HTTP   requests     returning   a   fixed   ' page ' . ' ' '   #   Page     send   back .   Page   =   ' ' '   \\   < html >   < body >   < p > Hello ,   web ! < / p >   < / body >   < / html >   ' ' '   #   Handle   a   GET   request .   def   _ GET   (     ) :     .   send _ response   (   200   )     .   send _ header   (   \" Content - Type \"   ,   \" text / html \"   )     .   send _ header   (   \" Content - Length \"   ,   str   (   len   (     .   Page   ) ) )     .   end _ headers   ( )     .   wfile   .   write   (     .   Page   .   encode   ( ) )   # - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -     __ __   = =   ' __ main __ '   :   serverAddress   =   (   ' '   ,   8080   )   server   =   HTTPServer   (   serverAddress   ,   RequestHandler   )   server   .   serve _ forever   ( )     _ GET   方法 内部 作用 原理 ：   mname   =   ' _ '   +   . command       hasattr ( ,   mname ) :   . send _ error (   HTTPStatus . NOT _ IMPLEMENTED ,   \" Unsupported   method   ( % r ) \"   %   . command )   return   method   =   getattr ( ,   mname )   method ( )     . command   http 协议 请求 头 传过来 GET POST ，   handler 类会 去 找 方法 ， 找到 再 操作 。   函数 名来 分发 编程 模式 ， 很 值得 ， web   server 都 需求 。 url   server _   虚拟 server 分发 ， path   method   函数 分发 ， 再 高级 参数 验证 valide _   类似 分发 需求 。   简单 模板 输出 方案   不码 代码 ， 简单 python 字符串 format 方法 ， 更 jinja2 模板 系统 生成 html 内容 ， 后 话 。   挂载 静态 文件   静态 文件 找到 文件 ， 返回 。   index . html   文件 特别 。   500lines 该文 提到 一种 有趣 编码 写法 ：   class   case _ _ file   (   object   )   :   ' ' ' File     directory       exist . ' ' '   def   test   (     ,   handler   )   :   return     os   .   path   .   exists   (   handler   .   full _ path   )   def   act   (     ,   handler   )   :   raise   ServerException   (   \" ' { 0 } '     found \"   .   format   (   handler   .   path   ) )   def   _ GET ( ) :   :   #   Figure             requested .   . full _ path   =   os . getcwd ( )   +   . path   #   Figure         handle   .     case     . Cases :   cond =   case ( )     cond . test ( ) :   cond . act ( )   break   #   Handle   errors .     Exception     msg :   . handle _ error ( msg )   class   RequestHandler   (   BaseHTTPServer   .   BaseHTTPRequestHandler   )   :   Cases   =   [   case _ _ file   ,   case _ existing _ file   ,   case _ _ fail   ]   针对 多种 情况 ， 分发 ， 有点像 switch 语句 更 python 风格 更 优美 写法 。   简单 cgi 接口   接下来 cgi 接口 代码 很 简单 ：   class   case _ cgi _ file   (   object   ) :   ' ' ' Something   runnable . ' ' '   def   test   (     ,   handler   ) :   return   os   .   path   .   isfile   (   handler   .   full _ path   )     \\   handler   .   full _ path   .   endswith   (   ' . py '   )   def   act   (     ,   handler   ) :   handler   .   run _ cgi   (   handler   .   full _ path   )   def   run _ cgi   (     ,   full _ path   ) :   cmd   =   \" python   \"   +   full _ path   child _ stdin   ,   child _ stdout   =   os   .   popen2   (   cmd   )   child _ stdin   .   close   ( )   data   =   child _ stdout   .   read   ( )   child _ stdout   .   close   ( )     .   send _ content   (   data   )   核心 针对 python 脚本 文件 ， 启动 cgi 协议 接口 ， 简单 来说 启动 一个 python 解释器 运行 目标 脚本 文件 ， 获取 返回 内容 ， web   server 返回 内容 返回 即可 。   下 cgi 协议 ， CGI 协议 ， 全称 （ Common   Gateway   Interface ） 通用 网关 接口 ， 说 再 确切 一点 ， cgi 程序 web   server 之间 接口标准 ， 说 再 简单 粗糙 点 ， 一个 web   server ， apache     nginx   会 讨论 返回 静态 文件 做好 ， 请 读者 进一步 参看   篇文章   。   请求 ， 请求 讨论 CGI 协议 ， nginx web   server ， 例子 中 大部分 代码 扮演 角色 ， cgi 程序 ， 实际上 python 脚本 ， python 框架 ， 会 讨论 。   路径 上 挂载 参数 环境变量 传递 进来 ， 工作 ， CGI 协议 定义 内容 。 讲到 cgi 协议 ， python ， 不 不 提到 pep3333 wsgi 标准 。   WSGI   PEP3333   定义   Python   Web   Server   Gateway   Interface   ， python   web   server   网关 协议 ， 简称 WSGI 协议 。 名字 ， python 世界 里 ， 推荐 WSGI 协议 。 猜到 WSGI 好 ， 路径 path 挂载 参数 ， 送入 环境变量 。 还 服务器 信息 ， 客户端 信息 ， 本次 请求 信息 都 存入 environ 变量 中 ， WSGI   application （ python 程序 框架 提供 ） ， 调用 ， 规范 。   WSGI   middleware   层 ， django flask （ Werkzeug   ） ， 都 接触   Middleware   类 概念 。   nginx   扮演 web   server 服务 静态 文件 角色 ， wsgi 请求 发给 gunicorn ： gunicorn 官方 介绍 ：   Gunicorn   ' Green   Unicorn '     a   Python   WSGI   HTTP   Server     UNIX .   简单 来说 WSGI 协议 扮演 web   server 角色 ， gunicorn 挂载 另一边 ， django flask 框架 提供 wsgi 脚本 app ， 或者说 application 对象 所在 。   编码 框架 人 来说 ， 不用 太 在意 ， 记得 调用 path ， path 挂载 参数 ， 写 ， 返回 内容 。 框架 编写 人员 ， 就要 详细 研究 WSGI 协议 。",
            "tags":"基础",
            "url":"articles/500lines-a-simple-web-server.html"
        },
        {
            "title":"http知识",
            "text":"HTTP 知识   URL 结构   URL 结构 :   scheme : [ / / [ user : password @ ] host [ : port ] ] [ / ] path [ query ] [ # fragment ]   :   scheme :   描述 访问 服务器 协议 ， 获取 资源 ， 最 常见 http ， ftp 。   user : password :   用于 http 认证   host :   获取 资源   port :   连接 端口号   path :   访问 资源 path   query :   额外 参数   fragment :   片段 ， client 。 一个 params 不太 常用 。   URL 只 支持 ascii 字符 ， 字符 utf - 8 编码 操作 。 转义字符   %   ， 空格 SPACE ， URL 中   % 20   。 ascii ， 字符 转义 ， 中文 字符 ， utf - 8 编码 转义 。   \" 书 \"   > > >   ' 书 ' . encode ( ' utf - 8 ' )   b ' \\ xe4 \\ xb9 \\ xa6 '   URL 中   % e4% b9% a6   。 细节 ， 实际操作 中 编程语言 都 提供 函数 接口 ， python urlencode 函数 。   http   header 详解   小节 参考   网页   ， 内容 整理 不错 ， 都 搬 ， 做 备份 。   http 协议 过程 分为 http 请求 过程 http 响应 过程 ， http 请求 过程 发送 http 请求 信息 包 ， http 响应 过程 发送 http 响应 信息 包 过程 。   http   请求 信息 包   http 请求 信息 包 格式 :   < method >   < URL >   < version >   < headers >   < entity - body >   打开 google 主页 请求 包是 :   GET   /   HTTP   /   1   .   1   Host   :   www   .   google   .     User - Agent   :   Mozilla   /   5   .   0   (   X11   ;   Ubuntu   ;   Linux   x86 _ 64   ;   rv   :   40   .   0   )   Gecko   /   20100101   Firefox   /   40   .   0   ........   第一 熟知 ，     GET   方法 ， 打开 URL   /   ， http version   HTTP / 1.1   。 请求 包 header 内容 不定 ， 再细 讲 。 请求 信息 包 大多 都 entity - body ， 额外 content 内容 ， 就算 header 完 留 空白行 。   请求 headers 详解   header   解释   示例   Accept   指定 客户端 接收 内容 类型   Accept :   text / plain ,   text / html   Accept - Charset   浏览器 接受 字符 编码 集   Accept - Charset :   iso - 8859 - 5   Accept - Encoding   指定 浏览器 支持 web 服务器返回 内容 压缩 编码 类型   Accept - Encoding :   compress ,   gzip   Accept - Language   浏览器 接受 语言   Accept - Language :   en , zh   Accept - Ranges   请求 网页 实体 一个 多个 子 字 段   Accept - Ranges :   bytes   Authorization   HTTP 授权 授权 证书   Authorization :   Basic   QWxhZGRpbjpvcGVuIHNlc2FtZQ = =   Cache - Control   指定 请求 响应 遵循 缓存 机制   Cache - Control :   - cache   Connection   持久 连接   （ HTTP   1.1 默认 持久 连接 ）   Connection :   close   Cookie   HTTP 请求 发送 时 ， 会 保存 请求 域名 下 cookie 值 发送给 web 服务器 。   Cookie :   $ Version = 1 ;   Skin = ;   Content - Length   请求 内容 长度   Content - Length :   348   Content - Type   请求 实体 MIME 信息   Content - Type :   application / x - www - form - urlencoded   Date   请求 发送 日期 时间   Date :   Tue ,   15   Nov   2010   08 : 12 : 31   GMT   Expect   请求 特定 服务器   Expect :   100 - continue   From   发出请求 用户 Email   From :   user @ email .   Host   指定 请求 服务器 域名 端口号   Host :   www . zcmhi .   If - Match   请求 内容 实体 相匹配 才   If - Match :   \" 737060cd8c284d8af7ad3082f209582d \"   If - Modified - Since   请求 指定 时间 修改 请求 成功 ， 未 修改 返回 304 代码   If - Modified - Since :   Sat ,   29   Oct   2010   19 : 43 : 31   GMT   If - None - Match   内容 未 改变 返回 304 代码 ， 参数 服务器 先前 发送 Etag ， 服务器 回应 Etag 判断 改变   If - None - Match :   \" 737060cd8c284d8af7ad3082f209582d \"   If - Range   实体 未 改变 ， 服务器发送 客户端 丢失 ， 发送 实体 。 参数 Etag   If - Range :   \" 737060cd8c284d8af7ad3082f209582d \"   If - Unmodified - Since   只 实体 指定 时间 未 修改 才 请求 成功   If - Unmodified - Since :   Sat ,   29   Oct   2010   19 : 43 : 31   GMT   Max - Forwards   信息 代理 网关 传送 时间   Max - Forwards :   10   Pragma   用来 包含 特定 指令   Pragma :   - cache   Proxy - Authorization   连接 代理 授权 证书   Proxy - Authorization :   Basic   QWxhZGRpbjpvcGVuIHNlc2FtZQ = =   Range   只 请求 实体 一部分 ， 指定   Range :   bytes = 500 - 999   Referer   先前 网页 地址 ， 请求 网页 紧随其后 , 来路   Referer :   TE   客户端 接受 传输 编码 ， 通知 服务器 接受 接受 尾加头 信息   TE :   trailers , deflate ; q = 0.5   Upgrade   服务器 指定 某种 传输 协议 服务器进行 转换 （ 支持 ）   Upgrade :   HTTP / 2.0 ,   SHTTP / 1.3 ,   IRC / 6.9 ,   RTA / x11   User - Agent   User - Agent 内容 包含 发出请求 用户 信息   User - Agent :   Mozilla / 5.0   ( Linux ;   X11 )   Via   通知 网关 代理服务器 地址 ， 通信协议   Via :   1.0   fred ,   1.1   .   ( Apache / 1.1 )   Warning   消息 实体 警告 信息   Warn :   199   Miscellaneous   warning   http   响应 信息 包   http 响应 信息 包 格式 :   < version >   < status - code >   < reason - phrase >   < headers >   < entity - body >   :   HTTP   /   1   .   1   200   OK   Cache - Control   :   private   Content - Length   :   231   Content - Type   :   text   /   html   ;   charset   =   UTF - 8   Date   :   Wed   ,   02   Sep   2015   08   :   47   :   52   GMT   ....   响应 体   HTTP / 1.1   http version ，   200   http 状态 码 ，   OK   一个 描述 文字 。 响应 体 header ， 空 一行 ， 响应 信息 包 发送 cotent 内容 。   http 方法 method 状态 码为 熟知 ， header 内容 列出来 。   响应 headers 详解   header   解释   示例   Accept - Ranges   服务器 支持 指定 请求 哪种 类型 分段 请求   Accept - Ranges :   bytes   Age   原始 服务器 代理 缓存 估算 时间 （ 以秒计 ， 非负 ）   Age :   12   Allow   网络资源 请求 ， 不 返回 405   Allow :   GET ,   HEAD   Cache - Control   告诉 缓存 机制 缓存 哪种 类型   Cache - Control :   - cache   Content - Encoding   web 服务器 支持 返回 内容 压缩 编码 类型 。   Content - Encoding :   gzip   Content - Language   响应 体 语言   Content - Language :   en , zh   Content - Length   响应 体 长度   Content - Length :   348   Content - Location   请求 资源 替代 备用 地址   Content - Location :   / index . htm   Content - MD5   返回 资源 MD5 校验 值   Content - MD5 :   Q2hlY2sgSW50ZWdyaXR5IQ = =   Content - Range   返回 体中本 字节 位置   Content - Range :   bytes   21010 - 47021 / 47022   Content - Type   返回 内容 MIME 类型   Content - Type :   text / html ;   charset = utf - 8   Date   原始 服务器 消息 发出 时间   Date :   Tue ,   15   Nov   2010   08 : 12 : 31   GMT   ETag   请求 变量 实体 标签 值   ETag :   \" 737060cd8c284d8af7ad3082f209582d \"   Expires   响应 过期 日期 时间   Expires :   Thu ,   01   Dec   2010   16 : 00 : 00   GMT   Last - Modified   请求 资源 修改 时间   Last - Modified :   Tue ,   15   Nov   2010   12 : 45 : 26   GMT   Location   用来 重定向 接收 方到 非 请求 URL 位置 请求 标识 新 资源   Location :   Pragma   包括 特定 指令 ， 响应 链上 接收 方   Pragma :   - cache   Proxy - Authenticate   指出 认证 方案 代理 URL 上 参数   Proxy - Authenticate :   Basic   refresh   重定向 一个 新 资源 创造 ， 5 秒 重定向   Retry - After   实体 暂时 不 可取 ， 通知 客户端 指定 时间 再次 尝试   Retry - After :   120   Server   web 服务器软件 名称   Server :   Apache / 1.3 . 27   ( Unix )   ( Red - Hat / Linux )   Set - Cookie   设置 Http   Cookie   Trailer   指出 头域 分块 传输 编码 尾部   Trailer :   Max - Forwards   Transfer - Encoding   文件传输 编码   Vary   告诉 下游 代理 缓存 响应 原始 服务器 请求   Via   告知 代理 客户端 响应 发送   Warning   警告 实体   WWW - Authenticate   客户端 请求 实体 授权 方案   WWW - Authenticate :   Basic   http 状态 码详   MIME   type :   全称 Multipurpose   Internet   Mail   Extensions   ， 看得出来 email 系统 ， 不管怎么 说 ， http 用于 描述 文件类型 即可 。   Content - type   :   image / jpeg   一行 ， image / jpeg   MIME   type 描述 ， image 主 文件类型 ， jpeg 次 文件类型 。 最 常见 html 文件 ， MIME   type   text / html   。   URI :   Uniform   Resource   Identifier   ， 常见 URN URL 概念 。 参考   网页   。 URN URL 都 URI 范畴 ， 都 视同 一连串 字符串 资源 文件 ， URN URL 两种 标识 方法 ， URL 类似 门牌号码 街道 描述 ， 大致 结构 :   scheme : [ / / [ user : password @ ] host [ : port ] ] [ / ] path [ query ] [ # fragment ]   URN :   urn : isbn : 0451450523   绝大部分 URI URL ， URN 只 特别 领域 。   参考资料",
            "tags":"html5",
            "url":"articles/httpzhi-shi.html"
        },
        {
            "title":"css布局",
            "text":"css 布局   网站 介绍   css 布局   ， 深入浅出 讲 很 好 ， css 布局 css 很 课题 ， 建立 认真学习 。   display 属性   block   块级 元素 ， 占 满 右边 行 行 空间 。   div 元素 p 默认 block 元素 ， display 属性   block   。   display   :   block   ;   inline   span 元素 默认   inline   。   display   :   inline   ;   占据 宽度 ， 盒子 元素 填满 一行 。   :   li   {   display   :   inline   ;   }   无序 列表 序列表 item 另起 一行 。 默认   display : list - item ;   。   inline - block   inline - block 块 级 元素 块级 元素 ， 几个 块级 元素 对外 排布   inline   模式 排布 ， 这是 css 新 一个 特性 。 块状 元素 设置 display 属性   inline   ， 块状 元素 都 会 内部 尺寸 布局 ， 想要 。     display   :     元素 显示 。   visibility : hidden   区别 本该 显示 空间 保留 。   float 属性   元素 居右 放置   float   :     ;   clear 属性   两侧 都 浮动 元素   clear   :     ;   position 属性   css 布局 控制 中 ， positon 一个 很 关键 属性 。 参考   网页     网页   。 position 属性 四个 值 设置 :   static   static 默认值 ， 额外 位置 调整 ， \" positioned \" 。   relative   relative static 类似 ， 属性 设置 。   top   ,     ,   bottom   ,   left   属性 调整 ， 含义 原本 地方 。 调整 留下来 地方 会 保留 ， 后续 动作 。   fixed   fixed 元素 显示 页面 上 ， 比如说 弹窗 广告 。   top   ,     ,   bottom   ,   left   属性 辅助 调整 弹窗 位置 。   absolute   absolute 类似 fixed ， 视窗 固定 ， 页面 固定 。 设置 :     {   margin - left :   - 200px ;   width :   181px ;   position :   absolute ;   background - color : # FDF6E3 ;   }   目录 ， 放在 正文 左边 ， 不用 absolute 布局 ， 右边 空间 释放出来 。 请 参看   网页 nav 标签 元素   。",
            "tags":"html5",
            "url":"articles/cssbu-ju.html"
        },
        {
            "title":"css盒子模型",
            "text":"css 盒子 模型   html 显示 布局   ( TeX )   显示 布局 采用 浮动 盒子 模型 ， 从上到下 ， 从左到右 ， 一个个 盒子 排下来 ，   ( TeX )   更 ， 一个 分页 算法 。 简言之 一个 标签 元素 都 一个 盒子 ( 还 不 太 一个个 字 一个 盒子 ，   ( TeX )   一个个 字 都 一个 盒子 。 )   。   图片 来自   网页   。   篇文章   讲解 很 好 ， 简要 介绍 ， 放在 短 代码 环境 都 用作 css 属性 。 盒子 最 中心 content 区域 ， 盒子   box - sizing   默认值 ，   width   控制 content 区域 宽度 。   box - sizing   设置   border - box   ，   width   盒子 宽度 。 一点 简单 数学 加减法 把戏 ， 没什么 大不了 。   类似   height   默认 控制 content 区域 高度 ，   min - width   ,   min - height   控制 盒子 content 区域 最小 宽度 最小 高度 ，   max - width   ,   max - height   控制 盒子 content 区域 宽度 高度 ， 类似 几个 属性   box - sizing   设置   border - box   ， 都 盒子 宽度 高度 。   content 区域 外围 padding 区域 ， padding 区域 透明 ， 盒子 设置   background - color     backgroud - image   ， 会 。 padding 区域 属性 控制 左边 右边 长度 :   padding - top   ,   padding - bottom   ,   padding - left   ,   padding -   。   一个 简便 写法   padding   ， 写法 设置 一个 值 控制 四个 量 很 ， 还 接 多个 值 ， 顺序 ， 不太 喜欢 用法 。   padding 区域 外面 border 区域 ， 网页 中 一条条 边框线 ，     border - width   控制 边框线 宽度 。 实际上 一个 简写 ， 类似   padding   ， 四个 值 :   上 ， 右 ， 下 ， 左 :   border - width   :   1px   2em   0   4rem   ;   三个 值 :   上 ， 右 左 ， 下 :   border - width   :   1px   2em   1   .   5cm   ;   两个 值 :   ， :   border - width   :   2px   1   .   5em   ;   :   border - top - width   上 宽度 ，   border - bottom - width   。   border 区域 外面 margin 边距 区域 。 其有 属性 ， 含义 一看 明白 :   margin - top   ,   margin - bottom   ,   margin - left   ,   margin -   ,   margin   。   border 属性   border 属性 跟上 三个 值 ， :   border - width   border - style   border - color   img   {   border :   1px   solid   # 4682b4   }   border - style 情况 ， 常见   solid   实线   dashed   虚线   double   双线   dotted   点线 ， 更 请 参看   网页   。 v",
            "tags":"html5",
            "url":"articles/csshe-zi-mo-xing.html"
        },
        {
            "title":"css基础",
            "text":"css 基础   谈到 inline   css 肯定 作用 于本 标签 ， 写法 简化 ， style 引入 属性 即可 。 谈到 外部 css ， 写法 都 所示 :   p   {   text - indent   :   2   em   ;   / * 段落 缩进 * /   line - height   :   180   %   ;   / * 行间距 * /   }   第一个 元素 简单 称之为 css 选择器 ， 网络 抓取 中 类似 概念 。 花 括号 类似   inline   css   格式 ， 用分 号 隔开 ， 换行 不 换行 都 无所谓 ， 美观 都 一个 属性 占 一行 。   css 选择器   html5 为例 ， html5 内置 标签 都 引用 ， body ， article ， video ， table ， figure 。 css 中 引用 section ， 文档 section 标签 元素 选中 。   html5 中   class   属性 元素 归于 一类 ， 假设 :   <   p   class   =   \" emph \"   >     < /   p   >     p . emph   选中 p 标签 class 属性 emph 标签 。   css 中 形式 ：   . hightlight   完整 形式   * . hightlight   ， class 属性 hightlight 元素 都 选中 。   id 属性 可用 定义 标签 唯一 id ，   # idname   选中 标签 即可 。   子 选择器   h1   >   strong   ， 只 选择 h1 标签 下   第一个   strong 标签 ， 下 意义 上 父子 标签 包含 关系 下 ， strong 标签 em 标签 ， em 标签 h1 标签 ， strong 元素 逐级 选择 选中 。   后代 选择器   figure   p   选择 figure 标签 元素     p 标签 元素 。 谈及 标签 元素 方法 都 ，   # footer   . emph   选择 id footer 标签 class 属性 emph 标签 。   更 css 选择 信息 请 参看 w3school   css 元素 选择 详解   ， 一块 弄 太 。 实际上 选择 逻辑 弄 越 css 代码 维护 越 困难 ， 实践   class     id   管理 css 属性 。   带上 属性 选择   href 属性 a 标签 才 样式 :   a   [   href   ]   {   color   :   red   ; }   href 属性 title 属性 a 标签 才 样式 :   a   [   href   ] [   title   ]   {   color   :   red   ; }   属性 值 指定 :   a   [   href   =   \" http : / / www . w3school . . cn / _ . asp \"   ]   {   color   :   red   ; }   伪类 选定   带个 : 冒号 跟着 标签 伪类 ， 值 标签 某种 状态 ， 最 常见 a 标签 状态 ， 所示 :   a   :   link   {   color   :   #   FF0000   }   / *   未 访问 链接   * /   a   :   visited   {   color   :   #   00   FF00   }   / *   已 访问 链接   * /   a   :   hover   {   color   :   #   FF00FF   }   / *   鼠标 链接 上   * /   a   :   active   {   color   :   #   0000   FF   }   / *   选定 链接   * /   - child 伪类   p   :     -   child   {   color   :   red   ;   }   父 标签 第一个 子 标签 元素 才 会 选定 。   nth - child 伪类   p   :   nth   -   child   (   2   )   {   color   :   red   ;   }   父 标签 第几个 子 标签 元素 才 会 选定 。   css 选择权 值   标签 多个 css 语句 选定 ， 权值 ：   标签 权值 1   子 选择器 后代 选择器 两个 标签 1 + 1 = 2   类 选择器 权值 10   id 选择器 权值 100   css 样式 层叠 优先级   内联 样式   >   嵌入 样式   >   外部 样式   ! important   用法   css 设置 不可避免 会 发生 样式 重叠 覆盖 ， 尽可能 统一 css 设置 ， 嫌 麻烦 懒得 弄 ，   ! important   手工 提高 css 设置 优先级 ( 参考   网页   。 ) 。 所示 ：   table   ,     ,   td   {   margin   :   0   auto   ;   min - width   :   2   em   ;   text - align   :   center   ! important   ;   padding   :   5   px   ;   }   严格控制 表格 各项 都 居中 对齐 。   css 长度 单位   css 很多 长度 单位 ， 单位 熟悉   ( \\ LaTeX )   会 单位 很 眼熟 。 长度 单位 ： 1in   =   2.54 cm   =   25.4 mm   =   72pt   =   6pc   ， 不 推荐 。   这篇 网页   推荐   px   ，   em     %   长度 单位 。 \" px \" \" % \" css 特有 ， 其会 显示屏 变动 ， 1em 字体 M 宽度 （ TeX 情况 ） 。 px 值得 ， 其会 显示 设备 很 好 调整 ， 更 信息 请 参看 提到 参考 网页 。",
            "tags":"html5",
            "url":"articles/cssji-chu.html"
        },
        {
            "title":"前端开发之-javascript基础",
            "text":"javascript 基础   本文 面向 熟悉 一门 编程语言 读者 ， 不 适合 编程 初学者 阅读 。   第二次 修订版 ： 小节 参考 aribnb javascript 规范 修订 重写 。   注释   多行 注释 推荐 写法 ：   / * *   *   make ( )   returns   a     element   *   based       passed -   tag     * /   单行 注释   / /   ， 注释 都 新起 一行 写 ， 代码 块 内 注释 ， 空 一行 ：   / /   This     a   comment       computer     ignore .   function   getType   ( )   {   console   .   log   (   ' fetching   type ... '   ) ;   / /   set     default   type     '   type '   const   type   =     .   type   | |   '   type '   ;   return   type   ;   }   注释 文字 具体内容 注释 符号 空一 空格 。   javascript 代码 放在   javascript 代码 推荐 放在   < / body >   ， 浏览器 更快 加载 页面 。 倒 特别 ， 刚 简单 javascript 代码 写上去 :   <   script   >     awesome   javascript   code   < /   script   >   javascript 代码 量 一点 推荐 单独 放在 一个 js 文件 上 ， 引入 进来 :   <   script   src   =   \" \"   > < /   script   >   声明 常量 变量   这是 参考 aribnb javascript 规范 ， 简单 来说 不用   var   ， 声明 常量   const   ； 声明 变量     。 理由 ：   const       都   block - scoped （ 程序员 习惯 变量 作用域 盒子 模型 ） 。   const   a   =   1   ;   const   b   =   2   ;     count   =   1   ;     (   true   )   {   count   + =   1   ;   }   {     a   =   1   ;   const   b   =   1   ;   }   console   .   log   (   a   ) ;   / /   ReferenceError   console   .   log   (   b   ) ;   / /   ReferenceError   全局变量   网页 中有 全局 对象   window   ， 全局变量 挂   window   对象 。   数据类型 简介   数值 型 ( number )   javascript 整数 浮点数 都 不分 ， 都 统一 number ， 数值 型 运算 ， 加减乘除 不用 说 。   %   python 求余 操作 。 python3 中有   5 / / 2   求商 概念 ， javascript 概念 ， 类似 效果 。   console . log ( parseInt ( 5 / 2 ) )   parseInt ( )   字符串 转 成 整数型 ， 返回 NaN 。   parseInt   (   ' 123 '   ,   10   ) ;   / /   123   parseInt   (   ' 11 '   ,   2   ) ;   / /   3   parseFloat ( )   字符串 转 成 浮点 型 ， 返回 NaN 。   parseFloat   (   ' 3.14 '   )   3.14   NaN number 型 ， 判断 是否是 NaN ， airbnb 推荐 风格 ：   Number   .   isNaN   (   ' a '   )   false   Number   .   isNaN   (   1   )   false   Number   .   isNaN   (   NaN   )   true   字符串 ( string )   javascript python 单引号 双引号 都 ， aribnb 规范 ， 字符串 都 推荐   单引号   包围起来 。   const     =   ' Capt .   Janeway '   ;   很长 很长 字符串 aribnb 规范 不 推荐   \\   不 推荐   +   连接起来 ， 写 上 ， 一个 人 眼睛 一亮 建议 ， 理由 代码 更具 搜索 性 。 对此 我持 保留意见 ，   `   （   Esc ） 包围 多行 更 便捷 ：   ` 多行   字符串   `   类似 python   \" \" \"   三 双引号 写法 。   aribnb 规范 提出 字符串 程序性 拼接 推荐 模块 语言 ，   $ { variable }   ， 很 好 （   `   符号 ） 。   ` How     ,   $ {     }   `   javascript 字符串 类型 python 类似 ，   string [ 0 ]   支持 。 不 string [ 0 : 2 ] ， 幸运 javascript 提供 类似 python 中 那种 切片 概念 ，   slice   方法   console . log ( \" \" . slice ( 0 , 2 ) )   console . log ( [ 1 , 3 , 4 , 5 ] . slice ( 0 , 2 ) )   javascript slice 方法 python 切片 操作 区别 ，   ( start , end )   两个 参数 ， 负数 末尾 算起 概念 ， 倒 ， 都 从左到右 那种 顺序 。 请 参看     。   字符串 方法   length :   字符串 长度   toUpperCase :   大写   toLowerCase :   小写   indexOf :   返回 子 字符串 索引 位置 ， index 索引 编号 规则 python 。   substring :   返回 子 字符串 ， 熟悉 python 那种 切片 规则 ， 推荐   slice   方法 。   replace :   替换 操作   split :   分割 操作   toString 方法   javascript 数值 、 布尔值 、 对象 字符串 都 一个   toString   方法 ， 大体 类似 python   str   函数 。 定义 对象 加上   toString   方法 ：   class   Jedi   {   constructor   (   options   =   { } )   {     .     =   options   .     | |   '   '   ;   }   getName   ( )   {   return     .     ;   }   toString   ( )   {   return   ` Jedi   -   $ {     .   getName   ( )   }   `   ;   }   }   数组   javascript 数组 （ array ） 大体 类似 python 列表 :   新建 一个 空 array ：   const   items   =   [ ] ;     const   items   =   [   1   ,   2   ,   3.14   ,   ' Hello '   ,   null   ,   true   ] ;   索引 index 编号 法则 python 。   数组 方法   length :   数组 长度   indexOf :   返回 数组 子 元素 索引 位置   slice :   切片 操作 ， 类似 python   lst [ 0 : 2 ]   那种 表达方法 。 slice 方法 不 接受 参数 默认 返回 列表 引用 ， 所说   浅 拷贝   。 浅 拷贝 简单 来说 复制 一个 字典 数组 （ 对象 ） ， 第一层 key 赋值 第一层 ， 第一层 key 一个 对象 引用 ， 拷贝 前 对象 拷贝 后 对象 都 会 指向 统一 对象 ， 深 拷贝 进一步 递归 拷贝 。   push :   末尾 添加 一个 元素   pop :   一个 元素 删除   unshift :   数组 头部 添加 一个 多个 元素 ， 返回 新 数组 长度   shift :   数组 头部 删除 一个 元素   sort :   排序 ， 破坏型 。 值得一提的是 数字 排序 从大到 小 顺序 ， 不太 :   >   var   lst   =   [ 1 , 5 , 2 , 3 , 51 , 4 , 45 , 545 , 541 , 48 , 77 ]   >   undefined   >   lst . sort ( )   >   [   1 ,   >   2 ,   >   3 ,   >   4 ,   >   45 ,   >   48 ,   >   5 ,   >   51 ,   >   541 ,   >   545 ,   >   77   ]   python 中 最 说 字符串 ， number 类型 。 排序 ， 操作 （ 参看   网页   ） :   var   lst   =   [   1   ,   5   ,   2   ,   3   ,   51   ,   4   ,   45   ,   545   ,   541   ,   48   ,   77   ]   function   sortNumber   (   a   ,   b   ) {   return   a   -   b   }   lst   .   sort   (   sortNumber   )   alert   (   lst   )   sort 方法 接受 一个 函数参数 ， 函数 接受 两个 参量 ， 用来 判断 a b 值 大小 ， 返回值 小于 0 ， a 放在 。 返回值 大于 0 ， a 放在 。 排序 方法 支持 数字 字符串 情况 。 javascript   字符串   -   字符串   情况 会 尝试 做 转换成 number 类型 才 做 。   reverse :   反转 ， 破坏型 。   splice :   指定 索引 删除 元素 ， 此处 添加 元素 ， 相当于 update 更新 。   >   var   arr   =   [   ' Microsoft '   ,   ' Apple '   ,   ' Yahoo '   ,   ' AOL '   ,   ' Excite '   ,   ' Oracle '   ] ;   >   undefined   >   arr   .   splice   (   2   ,   3   ,   ' Google '   ,   ' Facebook '   ) ;   >   [   \" Yahoo \"   ,   \" AOL \"   ,   \" Excite \"   ]   >   arr   >   [   \" Microsoft \"   ,   \" Apple \"   ,   \" Google \"   ,   \" Facebook \"   ,   \" Oracle \"   ]   参数 是从 索引 2 删除 3 元素 ， 添加 元素 。 例子 splice 方法 破坏型 方法 ， 返回 删除 元素 。   splice 方法 用于 只 删除 不 添加 纯 删除 操作 ， 只 添加 不 删除 纯 添加 操作 。   / /   只 删除 , 不 添加 :   arr . splice ( 2 ,   2 ) ;   / /   只 添加 , 不 删除 :   arr . splice ( 2 ,   0 ,   ' Google ' ,   ' Facebook ' ) ;   concat :   连接 两个 数组 ， 非 破坏型 。   >   var   lst1   =   [ 1 , 2 , 3 ]   >   undefined   >   var   lst2   =   [ ' a ' , ' b ' , ' c ' ]   >   undefined   >   lst1 . concat ( lst2 )   >   [ 1 ,   2 ,   3 ,   \" a \" ,   \" b \" ,   \" c \" ]   join :   类似 python 字符串 join 方法 ， 所示 :   var   arr   =   [ ' A ' ,   ' B ' ,   ' C ' ,   1 ,   2 ,   3 ] ;   arr . join ( ' - ' ) ;   / /   ' A - B - C - 1 - 2 - 3 '   fill :   数组 值来 填充   两个 数组   参考   网页   。   function   arraysEqual   (   a   ,   b   )   {     (   a   = = =   b   )   return   true   ;     (   a   = =   null   | |   b   = =   null   )   return   false   ;     (   a   .   length   ! =   b   .   length   )   return   false   ;   / /   If     don ' t   care       order       elements   inside   / /     array ,       sort     arrays   .     (   var   i   =   0   ;   i   <   a   .   length   ;   ++   i   )   {     (   a   [   i   ]   ! = =   b   [   i   ] )   return   false   ;   }   return   true   ;   }   object   javascript object 大体 看作 python 中 字典 类型 。   创建 空 object 推荐 写法 ：   const   item   =   { } ;   ：   const   person   =   {     :   ' Bob '   ,   age   :   20   ,   tags   :   [   ' js '   ,   ' web '   ,   ' mobile '   ] ,   city   :   ' Beijing '   ,   zipcode   :   null   } ;   aribnb 提出 属性 名 写 上 ， 包括 函数 ：   const   lukeSkywalker   =   ' Luke   Skywalker '   ;   const   obj   =   {   lukeSkywalker   ,   } ;   函数 先 function 声明 ， 写进去 ：   const   atom   =   {     :   1   ,   addValue   (     )   {   return   atom   .     +     ;   } ,   } ;   属性 名 javascript 非法 ， 只好 单引号 包围起来 。   动态 生成 对象 属性 名   const   obj   =   {   id   :   5   ,     :   ' San   Francisco '   ,   [   getKey   (   ' enabled '   ) ]   :   true   ,   } ;   语句   ' '     xiaoming   ;   >   var   d   =   { }   undefined   >   d   [   ' a '   ]   =   1   1   >   d   Object   {   a   :   1   }   >   ' a '     d   true   >   1     [   1   ,   2   ,   3   ]   true   delete 语句   python del 语句 。 javascript   delete   语句 删除 不 键 报错 。   >   d   Object   {   a   :   1   }   >   delete   (   d   .   b   )   true   >   d   Object   {   a   :   1   }   >   delete   (   d   .   a   )   true   >   d   Object   { }   hasOwnProperty 方法   python2 _ key 方法 ， python2 移 ， 推荐 语句 。   d   =   {   ' a '   :   1   }   d   .   hasOwnProperty   (   ' a '   )   true   aribnb 提出 相关 建议 ， 我持 保留意见 ， python 出身 ， 更 喜欢 语句 。   / /   good   console   .   log   (   Object   .   prototype   .   hasOwnProperty   .   call   (   object   ,   key   ) ) ;   shallow   copy   const   original   =   {   a   :   1   ,   b   :   2   } ;   const   copy   =   {   ...   original   ,   c   :   3   } ;   / /   copy   = >   {   a :   1 ,   b :   2 ,   c :   3   }   布尔值 ( boolean )   javascript 布尔值   true     false   。 额外 ， 类似 python 判断 （ = = ） 符号 javascript 中是   = = =   ， 三个 号 ， 别出心裁 ， 好处 ， javascript 历史 遗留问题 。   = = =   Equal     ! = =   Not   equal     boolean 值 判断 遵循 规则 ：   false   0   空 字符串   \" \"   NaN   null   undefined   都 视作 false   都 视作 true   Boolean   ( { } )   true   null   javascript   null   。 一个 单独 对象 。 类似 python   None   ， 一个   undefined   。 函数 return 值 会 默认 返回   undefined   ， 感兴趣 查 两个 区别 ， 看 ， 挺 无聊 。 谈到   = =     = = =   区别 ，   = = =   ，   undefined   不 等于   null   ，   = =   ， javascript 会 额外 做 类型转换 工作 ， 两个 会 看作 。   ECMA - 262   ：   null   = =   undefined ;   - >   return   true   airbnb 推荐 风格 ， 操作 一律 推荐   = = =     ! = =   ，   = =     ! =   。 这样的话 函数 返回 undefined 情况 ？   TODO 。   typeof 操作符   查看 对象 对象 类型 ， typeof 操作符 只 返回 六种 ， 比如说 提到 数组 object ； null object 。   number   string   object   function   array   date   regexp   boolean   null   undefined   symbol   (     es6 )   typeof   x   \" undefined \"   typeof   1   \" number \"   定义 函数   一个 简单 函数 定义 所示 （ 写法 airbnb 规范 推荐 风格 ） :     greeting   =   function   (     ) {   console   .   log   (     ) ;   }   greeting   (   ' '   )   javascript 函数 名 一个 变量 ， 这是 唯一 值得注意 ， 采用 写法 ， 熟悉 :   function   abs   (   x   ) {     (   x   > =   0   )   {   return   x   ;   }     {   return   -   x   ;   }   }   两种 定义 风格 等价 。 值得一提的是 函数 return 值 ， 返回   undefined   。   arguments 用法   javascript 函数 内部   arguments   变量 ， 一个 Array ， :   arguments [ 0 ]   arguments . length   其会 接受 传入 函数 参量 。   rest 用法   类似 lisp 语言 rest 参量 控制 概念 ，   function   func   (   a   ,   b   , ...   rest   ) {   console   .   log   (   rest   ) ;   }   rest a b 之外 参量 。 三个 点 号 :   ... rest   。   箭头 函数   简单 来说 箭头 函数   lambda   表达式 更 简洁 写法 ， 说 javascript 语境 区别 function ：   绑定   。   (   param1   ,   param2   ,   …   ,   paramN   )   = >   {   statements   }   条件 判断 结构   条件 判断 结构 ， python 大同小异 ， 圆括号 （ 记住 圆括号 加上 ） 花 括号 。   var   feedback   =   10     (   feedback   >   8   )   {   console   .   log   (   \" Thank   !   We     race         concert ! \"   )   }     {   console   .   log   (   \" I ' ll     practicing   coding     racing . \"   )   }   javascript 不像 python 强制 缩进 风格 ， 推荐 用缩 进来 增强 代码 可读性 逻辑 清晰性 ， :   age   =   20     (   age   <   6   )   {   console   .   log   (   ' kid '   )   }       (   age   > =   18   )   {   console   .   log   (   ' adult '   )   }     {   console   .   log   (   ' teenager '   )   }   javascript switch 语句 ， pythoner 懂 ， 多个   语句 。   循环 结构   javascript python 都 语句 ， 语句 少 ， 更 语句 。   循环   var   count   =   10   ;     (   var   i   =   0   ;   i   <   count   ;   i   ++   ) {   console   .   log   (   i   ) ;   }   遍历 数组     (         array   )   {   / /           }   遍历 数组 还 ：   >   a   =   [   ' a '   ,   ' b '   ,   ' c '   ]   <   a   .   forEach   (   function   (     ,   index   ) {   console   .   log   (     ,   index   ) ;   } ) ;   >   a   0   >   b   1   >   c   2   大体 类似 python   enumerate   写法 。   遍历 对象   递归 遍历 对象 key :     (   var   i     {   ' a '   :   1   ,   ' b '   :   2   } )   {   console   .   log   (   i   )   }   循环   语句 循环 ：   var   count   =   10   ;   var   i   =   0   ;     ( ;   i   <   count   ;   ) {   console   .   log   (   i   ) ;   i   ++   ;   }   无限 循环   语句 无限 循环 ：     ( ; ; ) {   dosomething ;   }   语句   语句 简单 下 。   var   x   =   0   ;   var   n   =   99   ;     (   n   >   0   )   {   x   =   x   +   n   ;   n   =   n   -   2   ;   }       语句   var   n   =   0   ;     {   n   =   n   +   1   ;   }     (   n   <   100   ) ;   异常   类似 python   ... ...   ， javascript ：     {   throw   （   Error ( \" Invalid   Parameters \" ) ) ;   } catch   ( e )   {   console . log ( e ) ;   } finally   {   / /     .   }   关键词   类似 python 中 ， javascript ， object 定义 方法 ，     指向 对象 实例 。   面向对象 传统 写法   function   Point   (   x   ,   y   )   {     .   x   =   x   ;     .   y   =   y   ;   }   Point   .   prototype   .   toString   =   function   ( )   {   return   ' ( '   +     .   x   +   ' ,   '   +     .   y   +   ' ) '   ;   } ;   var   p   =     Point   (   1   ,   2   ) ;   新式 写法   / / 定义 类   class   Point   {   constructor   (   x   ,   y   )   {     .   x   =   x   ;     .   y   =   y   ;   }   toString   ( )   {   return   ' ( '   +     .   x   +   ' ,   '   +     .   y   +   ' ) '   ;   }   }       函数 ， ：   function   ( ) {     .   x   =   1   ;   }   指定 函数 运行 ， 调用 函数 对象 。   比如说 函数 调用 ：   jquery 对象 .   函数 指定 jquery 实例 ， 网页 标签 元素 。   集合   javascript 中 集合 Set 大体 python 中 集合 概念 相近 。   var   s1   =     Set ( ) ;   / /   空 Set   var   s2   =     Set ( [ 1 ,   2 ,   3 ] ) ;   / /   含 1 ,   2 ,   3     add   方法 用于 添加 一个 元素 。   delete   方法 删除 元素 。   三元 运算符   test     expression1   :   expression2",
            "tags":"html5",
            "url":"articles/javascript-tutorial-one.html"
        },
        {
            "title":"前端开发之-jquery",
            "text":"jquery 语法   jquery 语法 :   $   (   selector   ) .   action   ( )   单   $ ( selector )   返回 找到 对象 数组 ， action 找到 对象 都 动作 。   文档 初始化 执行 动作   $   (   document   ) .   ready   (   function   ( ) {   / /   jQuery   methods     ...   } ) ;   还 常见 一种 简化 写法 ：   $ ( function ( ) { } ) ;   会 写法 ：   ( function ( $ ) { … } ) ( jQuery )   这是 运行 一个 匿名 函数 ， 参数 ( JQuery ) ，   $   符号 ， 不 库 冲突 。 （   参考 篇文章   ）   获取 屏幕 宽度 高度   var   width   =   $   (   window   ) .   width   ( )   var   height   =   $   (   window   ) .   height   ( )   两个 方法 更 确切 描述 返回 选 元素 宽度 高度 。   innerWidth     innerHeight   方法 （ 包含 内边 距 ） ，   outerWidth     outerHeight   包含 内边 距 边框 。   hide 方法   实际上 css 设置   display :   。   $   (   ' # test '   ) .   hide   ( )   隐藏 id test 元素 。   获取 文本 修改 文本   text ( )   $ ( ' div ' ) . text ( )   #   获取 文本   $ ( ' div ' ) . text ( '   text ' )   #   修改 文本     html ( )   方法 ， 写 上 html 标签 。   获取 表单 值 修改   val 方法   $ ( ' input ' ) . val ( )   #   获取 值   $ ( ' input ' ) . val ( '   ' )   #   修改 值   css 操作   添加 class   div . addClass ( ' highlight ' ) ;   / /   添加 highlight class   删除 class   div . removeClass ( ' highlight ' ) ;   / /   删除 highlight class   修改 css   $ ( ' div ' ) . css ( ' background - color ' ,   ' # ffd351 ' ) ;   按钮 变为 选   prop 方法 设置 返回 选 元素 属性 。   $ ( \" button \" ) . prop ( ' disabled ' ,   true )   移除 选 元素   remove 方法   $ ( ' # target4 ' ) . remove ( ) ;   选 元素   选中 元素 目标 元素 中 。   $ ( ' # target2 ' ) . appendTo ( ' # - ' ) ;   复制 选 元素   $ ( ' # target5 ' ) . clone ( ) . appendTo ( ' # left - ' ) ;   选中 父 元素   $ ( ' # target1 ' ) . parent ( ) . css ( ' background - color ' , ' red ' ) ;   选中 子 元素   $ ( ' # - ' ) . children ( ) . css ( ' color ' , ' orange ' ) ;   选中 元素 第几个   $ (   ' . target : nth - child ( 2 ) '   )   .   addClass   (   ' animated   bounce '   ) ;   $ (   ' . target : '   )   .   addClass   (   ' animated   shake '   ) ;   #   选中 元素 偶数   ，   0   2   4   ...   事件 绑定 动作   $ ( selector ) . click ( function )   鼠标 事件   click :   鼠标 单击 时 触发 ；   dblclick :   鼠标 双击 时 触发 ；   mouseenter :   鼠标 时 触发 ；   mouseleave :   鼠标 移出 时 触发 ；   mousemove :   鼠标 DOM 内部 时 触发   （ 接受 e   ， e . pageX 鼠标 x 值 ， e . pageY 鼠标 Y 值 ）   hover :   鼠标 退出 时 触发 两个 函数 ， 相当于 mouseenter 加上 mouseleave 。   键盘 事件   键盘 事件 仅 作用 焦点 DOM 上 ，   < input >     < textarea >   。   keydown :   键盘 按下 时 触发 ；   keyup :   键盘 松开 时 触发 ；   keypress :   键后 触发 。   取消 事件 绑定   a . ( ' click ' ,   ) ;   jquery   动画 效果   面板 展开 隐藏   <   script   >   $   (   document   ) .   ready   (   function   ( ) {   $   (   \" . slidepanel \"   ) .   click   (   function   ( ) {   $   (   \" # panel - \"   ) .   slideToggle   (   \" slow \"   ) ;   } ) ;   } ) ;   < /   script   >   <   div   class   =   \" slidepanel \"   style   =   \" background - color : # efefef ;   padding : 5px \"   >   滑动 面板   < /   div   >   <   div   id   =   \" panel - \"   style   =   \" border : solid   1px   # efefef ;   padding : 5px \"   >     jquery   .   < /   div   >   滑动 面板     jquery   .   $ ( document ) . ready ( function ( ) {   $ ( \" . slidepanel \" ) . click ( function ( ) {   $ ( \" # panel - \" ) . slideToggle ( \" slow \" ) ;   } ) ;   } ) ;   页 内 导航 慢慢   ajax   jquery 基于   XMLHttpRequest   ， 不得不 承认 jquery ajax 这块 写得 实在 太好了 。     $   (   \" button \"   ) .   click   (   function   ( ) {   $   .     (   \" / / ajax / demo _ test . php \"   ,   function   (   data   ,   status   ) {   alert   (   \" 数据 :   \"   +   data   +   \" \\ n 状态 :   \"   +   status   ) ;   } ) ;   回调 函数 接受 两个 参数 ， 传 回来 data 状态 码 。 等价 ：   $   .   ajax   ( {   url   :   url   ,   data   :   data   ,   success   :   callback   ,   dataType   :   dataType   } ) ;   请求 data 附加 url 上 。   getJSON   等价 ：   $ . ajax ( {   url :   url ,   data :   data ,   success :   callback ,   dataType :   json   } ) ;   dataType 设置 json   post   jQuery   .   post   (   url   ,   data   ,   success   (   data   ,   textStatus   ,   jqXHR   ) ,   dataType   )   等价 ：   $   .   ajax   ( {   type   :   ' POST '   ,   url   :   url   ,   data   :   data   ,   success   :   callback   ,   dataType   :   dataType   } ) ;   data 发送 请求 发送给 服务器 数据 。 dataType 可选 ， 会 智能 判断 服务器 响应 数据 。   跨域   参看   js 跨域   篇文章 ，   XMLHttpRequest   跨域 。 所说 jsonp ， 一种 跨域 解决方案 ， 不想 太 深究 ， restful   api 都 采用 json 格式 ， jsonp 之外 ， 服务端 加上 响应 头 ：   header   (   ' Access - Control - Allow - Origin : * '   ) ; / /   跨域 请求 域名   ，   设   *   header   (   ' Access - Control - Allow - Methods : POST , GET '   ) ;   先 网络 加载 jquery 本地 加载   代码 先 网络 加载 jquery ， 本地 找找看 。   < script   src =   \" https : / / code . jquery . / jquery -   { {   JQUERY _ VERSION   } }   . min . js \"   > < / script >   < script >   window . jQuery   | |   document . write ( '   < script   src =   \" js / vendor / jquery -   { {   JQUERY _ VERSION   } }   . min . js \"   >   <   \\ / script > ' )   < / script >   $ . fn   $ . fn   jquery 定义 一个 命名 空间 ， jquery 实例 都 引用 命名 空间 中 定义 方法 。   $ . extend   $ . extend ( { } , { } )   相当于 多个 字典 合并 ， key 重复 ， 字典 为准 。   $ . trim   去掉 字符串 首尾 空格   $ ( ) . ( )   $ ( ) . ( )   迭代 jquery 选中 实例 。",
            "tags":"html5",
            "url":"articles/jquery.html"
        },
        {
            "title":"django后台api编写之-API设计原则",
            "text":"API 设计   讲 讨论 API 设计 网络 上 流行 Restful 风格 API 设计 都 一般性 原则 ， 强制性 。 API 还 分为 内部 对外 API ， 对外 API 接口 遵循 无 惊讶 原则 ， 遵循 都 通用 写法 风格 ， 内部 API ， 很多 情况 下 ， 还要 内部 便捷性 。   url 设计   url 域名 都 推荐   api . .   风格 ， API 版本 ， URL 上 加上 版本号 ， 一个 很 好 主意 。 端 分离 大 背景 下 ， 前端 后 端的 代码 都 带来 额外 复杂度 。   版本号   阮 一峰 篇文章   ， 推荐   Accept   字 段 ：   Accept   :   vnd   .     -     .   foo   +   json   ;   version   =   2.0   url 第一个 字段 喜欢 django app 名字 ， 接下来 第二个 字 段 推荐   Restful   风格 写 上 目标 资源 名字 ， 并不一定 强制 写 上 名词 复数 形式 ， 两个 url ， 一个 操纵 目标 资源 集 ， 一个 定向 操纵 目标 资源 ， 尾缀 写 上 s 区分 推荐 风格 。   针对 资源 目标 资源 集 额外 动作 ， 额外 动作 指 常规 Restful 风格 增删 查改 动作 之外 额外 动作 需求 ， 讨论 Restful 风格 url 基础 上 加上 第三个 字 段 ， 第三个 字段 额外 动作 名字 不错 风格 。   方法 设计   方法 通用   GET   POST   ， GET 用于 查询 获取 资源 信息 ， POST 用于 创建 修改 信息 这是 疑问 。   Restful 风格 还 推荐 DELETE ， PATCH 方法 ， 编写 都 GET POST 方法 。   参数 设计   查询 操作 针对 目标 资源 集合 ， 参数 推荐 加上 ：   limit   返回 个数   offset   偏移 值 ， 分页 效果   sort   sortby ， 一个 排序 参数   reverse   排序 反转 参数   状态 码 设计   请 参看 HTTP 状态 码 。   返回 内容 结构设计   喜欢 风格 ：   1 .   成功 返回 ：   {   ' a ' : 1   }   人会 说 成功 加上 code : 200 代码 ， 这是 ， 获取数据 ， ， 怕 数据 不 ， 加个 针对 目标 数据 判断 即可 。 加个 code : 200 ， 目标 数据字 段 不 ， 程序 不 会 报错 ？   失败 带上 code 错误码 msg 错误信息   {   ' code ' :   10001 ,   ' msg ' :   '   error   msg '   }   错误码 软件系统 内部 一个 统一 规范 ， 常见 错误 类型 ：   资源 找到   找到 多个 资源   未知 错误   输入 缺少 参数   编写 文档   这是 。   参考   http : / / cizixs . / 2016 / 12 / 12 / restful - api - design - guide",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-apishe-ji-yuan-ze.html"
        },
        {
            "title":"django后台api编写之-apps.py",
            "text":"apps . py   快捷 命令 创建 app 模块 文件 ， 例子 其有 文件 ， 文件 含义 ： 这是 django 项目 用来 存放 app   相关 配置 信息 地方 。   一个 例子 ：     django . apps   import   AppConfig   class   RockNRollConfig   (   AppConfig   ) :     =   ' rock _ n _ roll '   verbose _   =   \" Rock   ' n '   roll \"   定义 app 名字 完整 名字 ， app   __ init __. py   文件 下 ：   default _ app _ config   =   ' rock _ n _ roll . apps . RockNRollConfig '   引入 配置文件 。   ？ ， 最 简单 用处 app   INSTALLED _ APPS   默认 文件夹 名字 ， 定义 名字 。   一个 高级 用法 定制   ready   方法 ， 初始化 app 信号 设置 。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-appspy.html"
        },
        {
            "title":"django后台api编写之-beginning",
            "text":"Beginning   先 介绍 下 Djanog 项目 文件夹 结构 ， 命令 操作 常识性 东西 。   新建 一个 项目 ：   新建 项目   django - admin   startproject   project -   命令 创建 一个 文件夹 ， 文件夹 名字 设置 project - ， 文件夹 一个 manage . py 文件 ， 文件 作用 挂载 django 配置 （ settings . py 文件 ， 修改 dev _ settings . py 文件 ） 。   一个 文件夹 ， settings . py   、   urls . py     wsgi . py   文件 。   settings . py   控制 django 配置管理 ；   urls . py   控制 django 路径 分发 主 入口 ， 配置 中 修改 。   wsgi . py   apache uwsgi 挂载 控制 入口 。   最 简单 初始 项目 运行 ：   开启 服务器   python   manage . py   runserver   localhost : 8080   控制 服务器 监听 localhost 外网 0.0 . 0.0 ， 端口号 。   新建 一个 app   python   manage . py   startapp   app _   顺便 说 ， 项目 找 不到   manager . py   文件 ， 文件 一个 便捷 入口 ， 命令 都   django - admin   命令 运行 。   数据库 操作   定义 模型 ， 运行 :   python   manage . py   makemigrations   app _   过程 创建 app 下 migrations 文件夹 迁移 python 脚本 文件 ， 情况 手工 修改 迁移 文件 。   python   manage . py   migrate   命令 执行 迁移 python 脚本 。   交互式 环境   python 交互 环境 ， 纯 python 交互 环境 区别 django 东西 ， 定义 模型 对象 。 开发 测试 工作 有用 ！   python   manage . py   shell   sql 交互 环境 :   python   manage . py   dbshell   创建 超级 用户   最 创建 项目 admin   url 挂上去 ， 去   \\ verb + / admin +   url 下 看 ， 登录 做 数据库 表格 创建 工作 外 ， 还 创建 一个 超级 用户 用于 登录 。   python   manage . py   createsuperuser",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-beginning.html"
        },
        {
            "title":"django后台api编写之-部署",
            "text":"部署   部署 apache nginx web 服务器 对接 django 项目 ， 说 再 一点 django 一个 wsgi 程序 服务 。   本文 apache 部署 讲解 较为 成熟 。   apache   上 例子 ：   < IfModule   ! wsgi _ module   >   LoadModule   wsgi _ module   modules / mod _ wsgi .   < / IfModule >   WSGIPythonHome   \" / home / wanze / venv \"   WSGIPythonPath   \" / home / wanze / venv / webapp \"   < VirtualHost   * : 80   >   ServerName   api . cdwanze . work   WSGIScriptAlias   /   / home / wanze / venv / webapp / webapp / wsgi . py   < Directory   / home / wanze / venv / webapp   >   < IfVersion   >   =   2.4 >   Require     granted   < / IfVersion >   < IfVersion   <   2.4   >   Order   deny ,   Allow       < / IfVersion >   < / Directory >   Alias   \" / static \"   \" / home / wanze / venv / webapp / static \"   < Directory   / home / wanze / venv / webapp / static   >   < IfVersion   >   =   2.4 >   Require     granted   < / IfVersion >   < IfVersion   <   2.4   >   Order   deny ,   Allow       < / IfVersion >   < / Directory >   < / VirtualHost >   检测 wsgi 模块 加载 ， 加载 上 。   WSGIPythonHome   设置 python 虚拟环境 所在 目录 ， 例子   venv / bin python 执行 脚本 。   WSGIPythonPath   设置 Django 项目 目录 所在   WSGIScriptAlias   设置 WSGI 文件 所在   Alias   Directory   设置 服务 项目 静态 文件 。   静态 文件   静态 文件 再 补充 下 ， 服务 静态 文件 项目 目录 下 static 文件夹 下 ， 静态 文件 djano djangorestframwork 框架 带 静态 文件 ，   python   manage . py   collectstatic   命令 生成 内容 。   settings 设置   STATIC _ ROOT   值 。   STATIC _ ROOT =   os . path . join ( BASE _ DIR ,   ' static ' )   django 站点 部署   多个 django 站点 都   mod _ wsgi   部署 写 ：   WSGIScriptAlias   /   / path / / mysite . / mysite / wsgi . py   WSGIPythonHome   / path / / venv   WSGIPythonPath   / path / / mysite .   deamon 模式 （ 参考   网页   ） ：   < VirtualHost   * : 80 >   ServerName   api . cdwanze . work   WSGIDaemonProcess   cdwanze _ api   processes = 1   python - path = / home / wanze / venv / myapi   python - home = / home / wanze / venv /   threads = 10   WSGIProcessGroup   cdwanze _ api   WSGIScriptAlias   /   / home / wanze / venv / myapi / myapi / wsgi . py   process - group = cdwanze _ api   ...     WSGIProcessGroup   来看 名字 随意 ， 写 。 定义 daemon 进程   python - path   定义 django   project ，   python - home   定义 python 虚拟环境 。   文件 权限   设置 好   Directory   之外 ， 还会 文件 读写 权限 ， 查看 日志 发现 提示 说 文件 权限 读写 。 httpd 执行 User Group ， 看 目标 文件夹 文件 权限 。   Django 项目 wsgi 文件 执行 权限 。 Django 项目 操纵 数据库 ， sqlite3 文件 数据库 ， 会 读写 权限 。   值得一提的是 母 文件夹 执行 权限 ， 文件 都 不 。   nginx   nginx 对接 wsgi 接口 uwsgi 模块 wsgi 接口 服务 。   pip   install   uwsgi   更 细节 请 参看 uwsgi   官方 文档   。   ngnix 配置 ：   upstream   django   {   server   127.0 . 0.1 : 8001   ;   }   server   {   location   /   {   uwsgi _ pass   django   ;   include   / path / / / mysite / uwsgi _ params   ;   }   }   nginx   serve   静态 文件   server   {   listen   80 ;   ......   client _ max _ body _ size   75M ;   location   / media   {   alias   / path / / media ;   }   location   / static   {   alias   / path / / static ;   }   ......   }   更 nginx 配置 细节 请 参看 写 nginx 配置 文章 。   对外 部署 必看   django 项目 对外 部署 ， python 一个 动态 脚本语言 ， 会 很多 安全性 检查 ， 项目 对外 会 很 不 。 本文 参看 官方 文档     。   第一 确保   DEBUG = False   ， 对外 开着   DEBUG = True   简单 开玩笑 。   运行 ：   python   manage . py   check   - - deploy   ###   settings . py   里 密钥 外置   settings . py   文件 密钥 信息 ， 包括   SECRET _ KEY   数据库 连接 信息 密钥 ， 信息 都 环境变量 引入 配置文件 中 读取 。   ALLOWED _ HOSTS   限定 好域名 ， nginx 服务器 入口 请求 做好 限定 ， 凡是 不 域名 HOST 请求 都 抛出 444 错误 ：   server   {   listen   80   default _ server ;   return   444 ;   }",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-bu-shu.html"
        },
        {
            "title":"django后台api编写之-创建可复用的app",
            "text":"创建 复用 app   创建 复用 app 会 极大 降低 目标 django 项目 复杂度 ， ， app 复用 风格 首选 。   制作 django - pypi 包   pypi 包 制作 不 赘述 ， 官方 文档     基础 上 讨论 。   测试   我试 安装 测试 过程 ：   python   setup . py   sdist   pip   install   dist / . tar . gz   安装 官方 文档 ， INSTALL _ APPS 设置 好 。 app 。 安装 测试 过程 中 ， 实在 繁琐 。 推荐 app 文件夹 复制到 测试 webapp 去 ， 修改 看 。 测试 好 再 内容 同步 pypi 安装包 去 。   migrations   官方 文档 选择 制作 sdist pip   install   tar 包 风格 原因 ， 测试 egg 包在 访问 上 很 成问题 ， pip 安装 方法 ， site - packages 安装 才 文件夹 风格 那种 egg 文件 。 下 执行 ：   python   manage . py   makemigrations   app _   才 会 成功 。   生成 迁移 文件 放在 site - packages 目标 文件夹 下 。 制作 pypi 包 migrations 文件夹 迁移 文件 包含 进去 ， 包含 包含   __ init __. py   文件 即可 。   就算 制作 django 目标 pypi 包 ， django 项目   . gitignore   文件 上 加上 一行 不错 ：   * / migrations / *   PS :   stackoverflow 都 加上 ， 人 写 长篇大论 加上 。 一点 ： 早期 测试 开发 过程 ， migrations 文件夹 都   __ init __. py   空白 文件 ， 代码 整洁 ， 测试 开发阶段 不花 精力 ， 这是 争议 。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-chuang-jian-ke-fu-yong-de-app.html"
        },
        {
            "title":"django后台api编写之-单元测试",
            "text":"单元测试   单元测试 前期 开发 关注 后台 api ， 实际上 编写 一套 postman 请求 ， 后期 再 上 代码 级 单元测试 。     rest _ framework . test   import   APITestCase     rest _ framework   import   status   import   django     django . urls   import   reverse   import   mock   class   Tests   (   APITestCase   ) :   def   test _ permutation   (     ) :   \" \" \"   : return :   \" \" \"   data   =   {   ' n '   :   10   ,   ' k '   :   3   }   response   =     .   client   .     (   reverse   (   ' arithmetic - permutation '   ) ,   data   )   result   =   response   .   data   .     (   ' result '   )     .   assertEqual   (   response   .   status _ code   ,   status   .   HTTP _ 200 _ OK   )     .   assertEqual   (   result   ,   720   )",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-dan-yuan-ce-shi.html"
        },
        {
            "title":"django后台api编写之-django和celery",
            "text":"django celery   django - crontab 模块 我试 ， 很 便捷 ， 基于 系统 crontab ， django celery 组合 ， celery 灵活 消息 分发 机制 ， 无疑 未来 开发 带来 更 可能性 。 celery 官方 文档     ， 本文 讲 celery 基本概念 django 集成 ， 更 celery 知识 请参阅 官方 文档 。   celery 核心 概念   broker   队列 服务提供者 ， celery 推荐 redis rabbitmq broker 。   task   执行 ， 定义 函数 。   backend   用来 存储 输出   worker   celery 启动 开启 一个 worker 。   django 内 文件 安排   小节 参考   篇文章     篇文章   。 提醒 读者 ， django celery 集成 并不需要 额外 安装 插件 ， 讲 配置 实际上 一个 单独 celery   app 大部分 都 类似 ， 细节 上 优化 。   celeryconfig . py   推荐 django   app   settings . py   旁 新建   celeryconfig . py   文件 ， 教程 设置 配置文件 名字   celery . py   ， 很 不好 ， 文件名 模块 名字 重复 会出 。 内容 ：   import   os     celery   import   Celery   os   .   environ   .   setdefault   (   ' DJANGO _ SETTINGS _ MODULE '   ,   ' project _ . settings '   )   app   =   Celery   (   ' project _ '   )   app   .   config _ _ object   (   ' django . conf : settings '   ,   namespace   =   ' CELERY '   )   app   .   autodiscover _ tasks   ( )   @ app . task   (   bind   =   True   )   def   debug _ task   (     ) :   print   (   ' Request :   { 0 ! r } '   .   format   (     .   request   ) )   新建 测试 ， 几行 配置 基本上 死 。 最 值得 讲 两行 ：   app . config _ _ object ( ' django . conf : settings ' ,   namespace = ' CELERY ' )   app . autodiscover _ tasks ( )   第一行 是从 django 配置 对象 中 读取 配置 ， 特别   namespace = ' CELERY '   ，   CELERY _   开头 配置 才 会 读取 ， 原 celery 配置 关系 ：   CELERY _ BROKER _ URL   - >   BROKER _ URL   那次   CELERY _ BEAT _ SCHEDULE   写成   CELERYBEAT _ SCHEDULE   老实 发现 周期性 程序 启动 不 。   第二行 一个 优化 细节 ， 函数 名字 ， 自动 发现 。 django app 新建 一个   tasks . py   ， celery 会 自动 发现 定义 。   __ init __. py   django 项目 project   settings . py   文件夹 ，   __ init __. py   推荐 写 上 几行 内容 ：     . celeryconfig   import   app     celery _ app   __ __   =   (   ' celery _ app '   , )   settings . py   celery 配置 统一 写   settings . py   文件 ， 提到 ， 都   CELERY _   开头 ， 大体 所示 ：   CELERY _ BROKER _ URL   =   ' redis : / / localhost : 6379 '   # CELERY _ RESULT _ BACKEND   =   ' redis : / / localhost : 6379 '   # CELERY _ ACCEPT _ CONTENT   =   [ ' application / json ' ]   # CELERY _ RESULT _ SERIALIZER   =   ' json '   # CELERY _ TASK _ SERIALIZER   =   ' json '   CELERY _ TIMEZONE   =   ' Asia / Shanghai '   #   schedules     celery . schedules   import   crontab   CELERY _ BEAT _ SCHEDULE   =   {   ' crawl _ juhe _ _ _ hour '   :   {   ' task '   :   ' wxarticles . tasks . crawl _ juhe '   ,   ' schedule '   :   crontab   (   minute   =   0   ,   hour   =   ' * / 3 '   ) ,   } ,   ' _ miniute _ _ test '   :   {   ' task '   :   ' wxarticles . tasks . test _ celery '   ,   ' schedule '   :   crontab   ( ) ,   } ,   }   定义   好 ， 定义 ， 实际上 定义 一个 函数 ， 简单 打印函数 确认 celery 周期 程序 工作 ：     celery   import   shared _ task   @ shared _ task   ( )   def   test _ celery   ( ) :   print   (   ' celery     working . '   )   celery crontab 功能 很 强大 ，   crontab ( )   每分钟 执行 。 请 参看   官方 文档   。   启动   celery 操作 都 ， 启动 worker ：   celery   - A   project _   worker   - l   info   - A   选项 跟着   celery   app 名字 ， django 项目 名字 。   - l   选项 设置 日志 打印 级别 。   还 加上   - B   启动 周期性 。   开个 命令 ：   celery   - A   project _   beat   - l   info   制作 脚本 ， 制作 后台程序 ， 制作 服务 ， supervisor ， 实际上 celery 关系 不大 ， 不 说 。   手工 启动   参考   网页   。   $   python   manage   .   py   shell   > > >     myapp . tasks   import   _ task   > > >   eager _ result   =   _ task   .   apply   ( )",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-djangohe-celery.html"
        },
        {
            "title":"django后台api编写之-django和scrapy",
            "text":"django scrapy   django scrapy 集成 ， 简单 来说   scrapyd   ， django 发送 一个 信号 ， scrapyd   后台 启动 一个 爬虫 。 小节 参考   篇文章   ， 谢谢 作者 。   做 好处 ？ 大体 好处 ：   爬虫 运行 状态 信息 查询 操作   爬虫 后台 爬取 不卡顿 前台 显示   信号 基础 celery 建立 基于 简单 HTTP 信号 机制 爬虫 系统 （ 包括 周期性 ）   读者 请 参看 篇文章 ， 最 核心 点 描述 。   views 说起     scrapyd _ api   import   ScrapydAPI   scrapyd   =   ScrapydAPI   (   ' http : / / localhost : 6800 '   )   @ api _ view   ( [   ' POST '   ] )   def   crawl _ article   (   request   ) :   \" \" \"   POST   :   传递 公众 号 文章 title ， 运行 spider 去 爬 取 。   GET   ;   查询 爬虫 状态   : param   request :   : return :   \" \" \"     request   .   method   = =   ' POST '   :   mode   =   int   (   request   .   data   .     (   ' mode '   ,   1   ) )     mode   = =   1   :   gzh _ id   =   request   .   data   .     (   ' gzh _ id '   ,   None   )       gzh _ id   :   return   OurResponse   .   fail _ missing _ paras   (   msg   =   \" missing   gzh _ id \"   )   settings   =   {   ' gzh _ id '   :   gzh _ id   ,   ' mode '   :   mode   ,   }   task   =   scrapyd   .   schedule   (   ' default '   ,   ' article '   ,   settings   =   settings   ,   * *   settings   )   return   OurResponse   .   sucess _ response   (   task _ id   =   task   ,   gzh _ id   =   gzh _ id   ,   status   =   ' started '   )   安装 pypi 包有 ：   django   ， ，   python - scrapyd - api   scrapyd 交谈 python   api 接口 。   Scrapy     scrapyd   。   最 核心   scrapyd . schedule ( )   函数 ，   default   projecet   ， 意义 有待 进一步 阐明 。   article   写 爬虫 名字 ， 还 传递 参数 进去 ， 参数 传到 scrapy 爬虫 ， 简单 来说 手工 模拟 加上   - a   mode = 1   效果 。 参数 爬虫类   . mode   调用 后 话 。   scrapyd ， ， 后台 开 一个 爬虫 ， 要说 ？ 没 。 django scrapy 集成 知识 来说 没 ， scrapy 数据 存 都 scrapy 。   粘贴 查看 spider 运行 状态 视图函数 ， 粘贴 是因为 本文 讨论   python - scrapyd - api   ， 暴漏 很多 api 操作 ， 简单 看 下 下 。   @ api _ view   ( [   ' GET '   ,   ' POST '   ] )   def   crawl _ index   (   request   ) :   \" \" \"   task _ id   #   task _ id   查询     status   过滤 查询   ' '   running   pending   finished   project _   参数 默认   default   : param   request :   : return :   \" \" \"     request   .   method   = =   ' GET '   :   project _   =   request   .   query _ params   .     (   ' project _ '   ,   ' default '   )   task _ id   =   request   .   query _ params   .     (   ' task _ id '   ,   None   )     task _ id   :   status   =   scrapyd   .   job _ status   (   project _   ,   task _ id   )       status   :   return   OurResponse   .   fail _ uri _ _ found   (   msg   =   ' task _ id     found '   )     :   return   OurResponse   .   sucess _ response   (   task _ id   =   task _ id   ,   status   =   status   )   status _ filter   =   request   .   query _ params   .     (   ' status '   ,   ' '   )   data   =   scrapyd   .   list _ jobs   (   project _   )     status _ filter   :   data   =   scrapyd   .   list _ jobs   (   project _   )   data   =   {   status _ filter   :   data   .     (   status _ filter   ) }   return   OurResponse   .   sucess _ response   (   * *   data   )   elif   request   .   method   = =   ' POST '   :   task _ id   =   request   .   data   .     (   ' task _ id '   ,   None   )       task _ id   :   return   OurResponse   .   fail _ missing _ paras   (   msg   =   ' missing   task _ id '   )   status   =   scrapyd   .   cancel   (   ' default '   ,   task _ id   ,   signal   =   ' TERM '   )   #   kill       status   =   scrapyd   .   cancel   (   ' default '   ,   task _ id   ,   signal   =   ' TERM '   )   return   OurResponse   .   sucess _ response   (   task _ id   =   task _ id   ,   status   =   status   )",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-djangohe-scrapy.html"
        },
        {
            "title":"django后台api编写之-翻译",
            "text":"翻译   django 翻译 很 便捷 ， 关注 后台 api 编写 ， 实际上 很多 教程 说 ：   TEMPLATES   =   [   {   ...   ' OPTIONS ' :   {   ' context _ processors ' :   [   ...   ' django . template . context _ processors . i18n ' ,   ] ,   } ,   } ,   ]   配置 只 模板 输出 翻译 ， 再 加上 。   MIDDLESWARES   加上 ：   ' django . middleware . locale . LocaleMiddleware ' ,   配置 ：   LANGUAGE _ CODE   =   ' zh - Hans '   USE _ I18N   =   True   设置 好 语言 代码 ， 这是 。   看   django   restframework   翻译 管理 相关 ， 发现 大体 配置 ， 很多 教程 说 设置   LOCALE _ PATHS   变量 没 ， 默认 app locale 文件夹 够用 。   目标 py 文件 下   字符串   装饰 ：     django . utils . translation   import   ugettext _ lazy     _   ...     username     None   :   raise   TypeError   (   _   (   ' Users       a   username . '   ) )   Model 字段 定义 名字 加上 ， verbose _   加上 ， 异常 信息 加上 。   加完 运行 ：   django - admin   makemessages   - l   zh _ Hans   app locale 文件夹 创建 ， 文件 不想 ，   manage . py   ， 加上   - - ignore   选项 即可 。   windows 下 很 ， 推荐 linux 服务器 下 创建 目标   django . po   文件 ， 再 修改 文件 即可 。 po 文件 头部 东西 ， 估计 ：   \" Language :   zh - Hans \\ n \"   必填 ， 时间 填上 。   运行 :   django - admin   compilemessages   不出意外 ， 翻译 生效 。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-fan-yi.html"
        },
        {
            "title":"django后台api编写之-基于类的视图",
            "text":"基于 类 视图   django 初步 下 基于 类 视图 概念 ， 代码 ：     django . http   import   HttpResponse   def   _ view   (   request   ) :     request   .   method   = =   ' GET '   :   #   < view   logic >   return   HttpResponse   (   ' result '   )   变为 更 简洁 ：     django . http   import   HttpResponse     django . views   import   View   class   MyView   (   View   ) :   def     (     ,   request   ) :   #   < view   logic >   return   HttpResponse   (   ' result '   )   依赖 类 继承 ， 引入 Minxin 类 ， http 很多 restful 风格 请求 上 ， 套路 ， 代码 复用 。 基本知识 python 类 继承 ， django   restframework   模块 用手 见识 DRY 理念 。   APIView   django   restframework   APIView   继承   django     View ， 针对 restful   api   很多 优化 ， 情况 下 编写 视图 ， 继承 APIView 合适 ， 介绍 通用 视图 高级 视图 ， 都 情况 下 特别 合适 少 写 代码 ， 好用 ， 仅此而已 。 不 合适 ， 定义     post   put   方法 很 。   视图 再 升级   情况 下   APIView   类   Mixin   最合适 ， 谈谈 django   restframework   提供 高级 通用 视图 类 。 类 都 继承   GenericAPIView   ， 都 一个 ， 类似   Serializer   - >   ModelSerializer   升级 过程 ， 视图 类 方法 操作 对象 基于 数据库 Model 操作 ， 推荐 视图 类 继承   GenericAPIView   。   GenericAPIView   GenericAPIView   继承   django   restframework     APIView   类 ， 提供 一个 很 特性   queryset   ， 设定   queryset 属性   _ queryset   方法 ， 视图 类 很多 方法 都 围绕   queryset   展开 。     CRUD   数据 操作   Minxin 类 ， GenericAPIView   组合 出 很多 高级 视图 类 。   一个 好 建议 这块 ， 看 源码 ， 源码 都 很 简单 ， 看 懂 ， 发现 符合 ， 少写 点 代码 。 额外 定制 需求 ， 重写 方法 。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-ji-yu-lei-de-shi-tu.html"
        },
        {
            "title":"django后台api编写之-扩展用户模型",
            "text":"扩展 用户 模型   小节 参考 这篇   不错 文章   。 扩展 django 自带 用户 模型 ， 最 常见 两种 情况 ， 实际上 两种 情况 都 会 。 第一种   User   模型     Profile   模型 分开 ， User 用来 存放 登录 相关 信息 ， Profile 用来 存放 更 用户 资料 信息 ， User     Profile     onetoone   关系 ， 会 建立 一个 signals 文件 保证 没 创建 一个 User 会 跟着 创建 一个 Profile ：     django . db . models . signals   import   post _ save     django . dispatch   import   receiver     profiles . models   import   Profile     . models   import   User   @ receiver   (   post _ save   ,   sender   =   User   )   def   create _ user _ profile   (   sender   ,   instance   ,   created   ,   * *   kwargs   ) :     created   :   Profile   .   objects   .   create   (   user   =   instance   )   @ receiver   (   post _ save   ,   sender   =   User   )   def   save _ user _ profile   (   sender   ,   instance   ,   * *   kwargs   ) :   instance   .   profile   .   save   ( )   django 默认 auth 机制 ， session   cookies 不 太 满意 ， 推荐 建立   User   模型 ，   继承   AbstractBaseUser   ， 大概 看   AbstractBaseUser   源码 ， 做 工作 都 围绕   password 字段 ， settings 定义 好 :   AUTH _ USER _ MODEL   =   ...   都 工作 。 继承 定义 字 段 不 多用 说 ， 推荐 进一步 继承   PermissionsMixin   类 。   class   User   (   AbstractBaseUser   ,   PermissionsMixin   )   :   email   =   models   .   EmailField   (   _   (   ' email   address '   ) ,   unique   =   True   )   PermissionsMixin   类 定义 群组 信息 。   三个 字 段 属性 含义 ， 都 设置 ：   USERNAME _ FIELD   =   ' username '   EMAIL _ FIELD   =   ' email '   REQUIRED _ FIELDS   =   [ ' email ' ]   写 好   objects     UserManager   ， 继承   BaseUserManager   ， 做 定制 ， 东西 ？   Model . objects .   用法 。 情况 定义 好 ：   create _ user   create _ superuser   两个 方法 即可 。 两个 方法 控制 用户 创建 。   create _ superuser   负责   _ superuser   _ staff   设为 True 。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-kuo-zhan-yong-hu-mo-xing.html"
        },
        {
            "title":"django后台api编写之-模型的定义和使用",
            "text":"模型 定义   django 模板 sqlalchemy 很多 地方 类似 。   settings 配置   INSTALLED _ APPS :   加上 新   app   名字 ， 不 加   makemigrations   管理 数据库 。   DATABASES :   默认 会 创建 一个 sqlite3 数据库 ， 需求 ， 想要 mysql 数据库 ， 参考 样例 修改 配置 。 连接 mysql 样例 :   DATABASES   =   {   ' default ' :   {   ' ENGINE ' :   ' django . db . backends . mysql ' ,   ' NAME ' :   \" database _ \" ,   ' USER ' :   \" root \" ,   ' PASSWORD ' :   \" \" ,   ' HOST ' :   \" localhost \" ,   ' PORT ' :   \" 3306 \" ,   ' OPTIONS ' :   {   ' charset ' :   ' utf8 '   }   }   }   会 加上   charset     utf8 选项 ， mysql 设置 好 字符 编码 。 设置 init _ command   设置 字符 编码 更好 字符 编码 兼容性 。   ' OPTIONS ' :   {   ' init _ command ' :   ' SET   character _ set _ database = utf8   , \\   character _ set _ server = utf8 , \\   character _ set _ connection = utf8 , \\   collation _ connection = utf8 _ unicode _ ci ' ,   ' charset ' :   ' utf8 ' }   多个 数据库   多个 数据库 ， 最 常见 情况 单独 app 一个 数据库 。   再 加上 一个 数据库 定义 ：   DATABASES   =   {   ' default ' :   {   ' ENGINE ' :   ' django . db . backends . mysql ' ,   ' NAME ' :   \" database _ \" ,   ' USER ' :   \" root \" ,   ' PASSWORD ' :   \" \" ,   ' HOST ' :   \" localhost \" ,   ' PORT ' :   \" 3306 \" ,   ' OPTIONS ' :   {   ' charset ' :   ' utf8 '   }   } ,   ' youapp ' :   {   ' ENGINE ' :   ' django . db . backends . mysql ' ,   ' NAME ' :   ' youapp ' ,   ' USER ' :   ' root ' ,   ' PASSWORD ' :   ' ' ,   ' HOST ' :   ' ' ,   ' PORT ' :   ' ' ,   ' OPTIONS ' :   { ' charset ' :   ' utf8 ' }   } ,   }   app 新建 一个 dbrouter 文件 ， 定义 一个 YourRouter 类 。   DATABASE _ ROUTERS   =   [ ' youapp . dbrouter . YourRouter ' ]   类 定义 数据库 选择 ：   NOTICE :   app 中 定义 模型 记得 都 加上 app _ label meta 属性 。   class   YourRouter   (   object   )   :   def   db _ _ read   (     ,   model   ,   * *   hints   )   :     model   .   _ meta   .   app _ label   = =   ' youapp '   :   return   ' youapp '   return   None   def   db _ _ write   (     ,   model   ,   * *   hints   )   :     model   .   _ meta   .   app _ label   = =   ' youapp '   :   return   ' youapp '   return   None   def   _ relation   (     ,   obj1   ,   obj2   ,   * *   hints   )   :     obj1   .   _ meta   .   app _ label   = =   ' youapp '     \\   obj2   .   _ meta   .   app _ label   = =   ' youapp '   :   return   True   return   None   def   _ migrate   (     ,   db   ,   app _ label   ,   model _   =   None   ,   * *   hints   )   :     app _ label   = =   ' youapp '   :   return   db   = =   ' youapp '   return   None   定义 模型   好 ， 定义 模型 。 语法 :     django . db   import   models   class   Question   (   models   .   Model   ) :   question _ text   =   models   .   CharField   (   max _ length   =   200   )   pub _ date   =   models   .   DateTimeField   (   ' date   published '   )   熟悉 sqlalchemy 这段 代码 很 陌生 ， 进一步 细节 。   字 段 类型   IntegerField :   整型   BigIntegerField :   大 整数   BinaryField :   raw   data   BooleanField :   bool   值   CharField :   定义 字符串 类型 ， 设置 长度   max _ length   属性 。   TextField :   大段 文字 。   DateField :   python 中   datetime . date   对象 。   DateTimeField :   python 中   datetime . datetime   对象 。   一个 有用 基类 :   class   BaseModel   (   models   .   Model   ) :   class   Meta   :   abstract   =   True   updated _   =   models   .   DateTimeField   (   auto _   =   True   )   created _   =   models   .   DateTimeField   (   auto _ _ add   =   True   )   模型 都 继承 自该 基类 ， 基类 创建表格 ， Meta 设置   abstract = True   。 DateTimeField 加上   auto _ = True   ， 模型 每次   save   操作 都 会 自动更新 最新 日期 。     auto _ _ add = True   即该 记录 第一次 创建 时 设置 最新 日期 。 DateTimeField   auto _     auto _ _ add   两个 选项 default 选项 ， 自动 插入 默认 时间   django . utils . timezone . ( )   。   想 六个 小时 记录 查询 ：   checktime   =   timezone . ( )   -   timedelta ( hours = 6 )   result   =   result . exclude ( created _ __ gt =   checktime )   通用 选项   字 段 声明 控制 中有 通用 可选项 :   default :   设置 该字 段 默认值 ， default 还 接受 一个 函数 对象 。   null :   设置 True ， 自动 会 自动 填充 sql 中 NULL 值 ， 字符串 类型 字 段 默认 空字符 。   blank :   设置 True ， 空值 ， null 区别 null 说 数据库 ， blank 说 显示 。   db _ column :   设置 该字段 数据库 中 表格 名字 。   db _ index :   设置   True   该字段 开启 索引 。   primary _ key :   主键   。   unique :   唯一   unique _ _ date :   title 字段 设置 :   unique _ _ date = \" pub _ date \"     title 字段   pub _ date   字段 都 。 日期 内 title 只能 唯一 值 。 看作 一种   unique _   。   数据库 中 关系   ForeignKey :   外键 引用 ， 该字 段 名字 user ， 存储 表格 中 名字 user _ id ，   db _ column   控制 表格 名字 。 -   说 onetomany 关系 定义 ForeignKey 。 ：   class   City   (   models   .   Model   )   :     =   models   .   CharField   (   max _ length   =   60   )   state   =   models   .   CharField   (   max _ length   =   40   )   zipcode   =   models   .   IntegerField   ( )   class   Address   (   models   .   Model   )   :   number   =   models   .   IntegerField   ( )   street   =   models   .   CharField   (   max _ length   =   100   )   city   =   models   .   ForeignKey   (   City   )   一个 city 多个 address ， 一个 address 只能 一个 city ， 一个 外键 映射 city 。 ForeignKey 更 确切 manytoone 关系 ， 模型 一个 外键 属性 ， 多个 记录 指向 同一个 它物   参阅 篇文章   。   OneToOneField   OneToOneField   比较简单 ， 一个 记录 一个 属性 ， 用户 管理 会 用到 。   ManyToManyField   ManyToManyField   读者 请参阅 写   sqlalchemy 模块   一文 ，   写得 详细 。   模型 定义 字 段 ， 更 内容 请 参看 官方 文档 。   多字段 组合 唯一   参考   网页   ，   Meta   定义   unique _   属性 。   ...   title   =   models . CharField ( max _ length = 255 )   gzh _ id   =   models . CharField ( max _ length = 255 ,   null = True ,   blank = True )   ...   class   Meta :   db _ table   =   ' article '   unique _   =   ( \" title \" , \" gzh _ id \" )   定义 模型 中 元类 数据   ...   class   Meta :   db _ table   =   ' table _ '   db _ table   指定 创建 table 表格 名字 。   abstract   创建表格 ， 模型 抽象 模型 。   模型   模型 最 核心 查询 操作 ， 修改 记录 ， 查询 目标 记录 ， 修改 属性 save 即可 。   新建 记录     people . models   import   Person   Person   .   objects   .   create   (     =   \" WeizhongTu \"   ,   age   =   24   )   插入 一条 记录 主键 重复 ， 程序 会 返回 异常 。 推荐   _ _ create   方法 ：   obj ,   created   =   Person . objects . _ _ create ( _ = ' John ' ,   _ = ' Lennon ' ,   defaults = { ' birthday ' :   date ( 1940 ,   10 ,   9 ) } )   语句 查询 效果 新建 记录 效果 。 写 属性 操作 ， 大体 加强版 ：     :   obj   =   Person   .   objects   .     (   _   =   ' John '   ,   _   =   ' Lennon '   )     Person   .   DoesNotExist   :   obj   =   Person   (   _   =   ' John '   ,   _   =   ' Lennon '   ,   birthday   =   date   (   1940   ,   10   ,   9   ) )   obj   .   save   ( )   单纯 方法 ， 记录 不 会 抛出   DoesNotExist   异常 ； 找到 多个 记录 ， 会 抛出   MultipleObjectsReturned   异常 。   _ _ created   方法 找到 多个 记录 会 抛出   MultipleObjectsReturned   异常 。     _ _ created   方法 确保 插入 一条 记录 记录 。 created = True target 新建 记录 。   理解   defaults   选项 ， defaults 定义 属性 参与 查询 过程 ， 参与 找到 记录 情况 下 ， 设置 值 。   查询 记录   说 获取 记录 ：   result   =   Person . objects . ( )   返回   QuerySet   对象 ， QuerySet 对象 下 一步 查询 操作 。 ：   result   =   result . filter ( = \" abc \" )   例子 来说 filter 方法 即可 ：   result   =   Person . objects . filter ( = \" abc \" )   排序   QuerySet 对象 进一步 排序 ：   result   =   result . order _ ( ' ' )   reverse   result   =   result . reverse ( )   exclude   排除 记录 ， 排除 created _ 字 段值 大于 时间 值 ：   result   =   result . exclude ( created _ __ gt =   checktime )   offset     limit   result   =   result [ offset :   offset + limit ]   删除 记录   找到 目标 记录 instance ， 调用   delete   方法 即可 。   记录   谈到 查询 操作 ， 读者 单纯 想 记录 ，   exists   方法 最快 最 简便 。 参考   网页   。     Article . objects . filter ( unique _ id =   unique _ id ) . exists ( ) :   ...   关系   OnetoOne 关系 非常简单 ，   a . b     b . a   都 。   ManytoOne 关系   ForeignKey   定义 关系 ， 引用 外键 对象 ，   a . b   即可 ， 反向 onetomany 那种 ， 定义 定义 好   related _   ， （ 参考     ） 引用 ：   b . related _   细节 请 查看 文档     。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-mo-xing-de-ding-yi-he-shi-yong.html"
        },
        {
            "title":"django后台api编写之-其他技巧",
            "text":"技巧   模型 python2 兼容性   提高 模型 python2 兼容性 ， 推荐 模型 定义 上加个 装饰器 。     django . utils . encoding   import   python _ 2 _ unicode _ compatible   @ python _ 2 _ unicode _ compatible   class   Question   (   models   .   Model   ) :   #   ...   def   __ str __   (     ) :   return     .   question _ text   不 加 装饰器 ， python2   __ unicode __   方法 。   重置 migrations   方法 migrations 文件 删掉 ， 表格 删掉 成功 ， 忽视 django _ migrations 表格 数据 （ 参考   网页   ） 。     django _ migrations   app 迁移 数据 删掉 ， 再 makemigrations migrate ， 更 。   python   manage . py   makemigrations   app _   python   manage . py   migrate   app _   列表 对象   自定义 一个 model 新 Field 对象 解决 ， ListField 。   def   parse _ _ python   (     )   :     :     =   ast   .   literal _ eval   (     )   return       Exception     e   :   rasie   ValidationError   class   ListField   (   models   .   TextField   )   :   \" \" \"   存储 python 列表 对象   \" \" \"   description   =   _   (   \" Stores   a   python   list \"   )   def   __ init __   (     ,   *   args   ,   * *   kwargs   )   :   super   (   ListField   ,     ) .   __ init __   (   *   args   ,   * *   kwargs   )   def   _ python   (     ,     )   :         None   :     =       isinstance   (     ,   list   )   :   return     return   parse _ _ python   (     )   def   _ prep _   (     ,     )   :         None   :   return       =     .   text _ type   (     )   return     def   _ _ string   (     ,   obj   )   :     =     .   _ _ object   (   obj   )   return     .   _ prep _   (     )   def   _ db _   (     ,     ,   expression   ,   connection   ,   context   )   :         None   :   return     return   parse _ _ python   (     )   _ db _   数据 数据库 读取 ， 总会 调用 方法 。 包括 （ including     aggregates     values ( )   calls 。   最 最 核心 一个 定制 方法 ， 含义 很 ， 不用 说 。   四个 方法 大体 流程 ：   python   < -   _ python   < -   _ db _   < -   database   python   - >   _ _ string   - >   _ prep _   - >   database   NOTICE   上 图 读者 理解 ， 实际上 django 逐个 。 官方 文档 说法   _ python   django 反 序列 （ deserialization   ） ， 还 好 三种 情况 ： None ， 目标 对象 ， 字符串 情况 。   _ _ string   序列化 ，   _ python   。   _ prep _   输入 ( = ' 20170809 ' )   执行 查询 ， 讲过 转化 sql 查询 中 用到 字符串 （ 比如说 datetimefield ） 做 额外 工作 。   数据库   一个 django 项目 原因 ， app 单独 操作 数据库 ， 情况   settings   定义 好 数据库 配置 ：   DATABASES   =   {   ' default ' :   {   ...   } ,   ' newdb ' :   {   ' ENGINE ' :   ' django . db . backends . mysql ' ,   ...   } ,   加上 dbroute 对象 ：   DATABASE _ ROUTERS   =   [ ' articles . dbrouter . ArticlesRouter ' ]   app 定义 好 dbroute 对象 ：   class   ArticlesRouter ( object ) :   def   db _ _ read ( ,   model ,   * * hints ) :     model ._ meta . app _ label   = =   ' articles ' :   return   ' articles '   return   None   def   db _ _ write ( ,   model ,   * * hints ) :     model ._ meta . app _ label   = =   ' articles ' :   return   ' articles '   return   None   def   _ relation ( ,   obj1 ,   obj2 ,   * * hints ) :     obj1 ._ meta . app _ label   = =   ' articles '     \\   obj2 ._ meta . app _ label   = =   ' articles ' :   return   True   return   None   def   _ migrate ( ,   db ,   app _ label ,   model _ = None ,   * * hints ) :     app _ label   = =   ' articles ' :   return   db   = =   ' articles '   return   None   代码 看 ， 定义 模型   Meta   定义 好   app _ label   属性 。 更 信息 请 参看 官方 文档     。   django 模型 对象 获取 表格 名字   参看   网页   。   答 :   model _ instance ._ meta . db _ table   好 django ImageField   参考   篇文章   。   ImageField FileField 很 类似 ， 还   width     height   属性 ， 上传 确保 文件 图片 文件 。   模型 文件 中 定义 :   banner   =   models . ImageField ( upload _ = game _ 2048 _ images ,   blank = True ,   storage = OverwriteStorage ( ) ,   default = \" placeholder . jpg \" )     upload _   控制 图片 计算机 中 保存 路径 ， 指定 一个 文件夹 路径 ， 灵活 ， 一个 函数 灵活 路径 指定 :   def   game _ 2048 _ images ( instance ,   filename ) :   \" \" \"     image   upload   .   \" \" \"   return   ' game / 2048 / images / { } / { } ' . format ( instance . user . username ,   filename )   路径   settings   指定   MEDIA _ ROOT   ， 再 指定 文件夹 路径 。 函数 还 接受 模型 实例 ， 建立 自动 user 用户名 分配 文件夹 路径 。   storage = OverwriteStorage ( )   文件名 重复 覆盖 逻辑 :   class   OverwriteStorage   (   FileSystemStorage   )   :   ' ' '   存储 文件 图片 ， 文件名 重复 覆盖 。   ' ' '   def   _ _   (     ,     )   :       .   exists   (     )   :   os   .   remove   (   os   .   path   .   join   (   settings   .   MEDIA _ ROOT   ,     ) )   return     ImageField   rest _ framework 序列化 类 很 好 联动 ， 序列化 返回 文件 路径 url 字符串 ， 测试 django 挂载 静态 资源 文件 ， 运营 推荐 nginx 设置 url 分发 。     django . conf . urls . static   import   static     django . conf   import   settings     settings   .   DEBUG   :   urlpatterns   + =   static   (   ' / data / '   ,   document _ root   =   settings   .   MEDIA _ ROOT   )   保存 传过来 图片 文件 ， 常规 构建 form 对象 可行 :   form   =   Game2048InfoForm (   request . POST ,   request . FILES ,   instance = target _ info )     form . _ valid ( ) :   _ game _ info   =   form . save ( )   :   logger . warning ( ' form   invalid ' )   :   request . FILES [ ' imgfield ' ]   语法 获取 图片 内容 。   django messages 系统   小节 参看   网页   。   django messages 系统 ， 所示 settings 配置 ：   INSTALLED _ APPS   =   [   ' django . contrib . messages ' ,   ......   MIDDLEWARE _ CLASSES   =   [   ' django . contrib . messages . middleware . MessageMiddleware ' ,   ......   TEMPLATES   =   [   {   ' OPTIONS ' :   {   ' context _ processors ' :   [   ' django . contrib . messages . context _ processors . messages ' ,   ......   views ，   messages . add _ message ( )   来往 django 信息系统 发送 一个 信息 ， 快捷 方法 ：   messages . debug ( )   messages . info ( )   messages . success ( )   messages . warning ( )   messages . error ( )   还 设置 request 请求 下 信息系统 级别 ：     django . contrib   import   messages   messages   .   set _ level   (   request   ,   messages   .   DEBUG   )   定义 一个 简单 flash 函数   def   flash   (   request   ,   title   ,   text   ,   level   =   ' info '   ) :   \" \" \"   利用 django message 系统 发送 一个 信息 ， 对接 模板 sweetalert 。   \" \" \"   level _ map   =   {   ' info '   :   messages   .   INFO   ,   ' debug '   :   messages   .   DEBUG   ,   ' success '   :   messages   .   SUCCESS   ,   ' warning '   :   messages   .   WARNING   ,   ' error '   :   messages   .   ERROR   }   level   =   level _ map   [   level   ]   messages   .   add _ message   (   request   ,   level   ,   text   ,   extra _ tags   =   title   )   return   ' '   做 封装 更好 对接 sweetalert javascript 库 ， 模块 内容 信息 弹 出 。   { %     messages   % }   < script   src =   \"   { %   static   ' js / sweetalert . min . js '   % }   \"   > < / script >   < script >   { %     msg     messages   % }   sweetAlert ( {   title :   '   { {   msg . extra _ args   } }   ' ,   text :   '   { {   msg . message   } }   ' ,   type :   '   { {   msg . level _ tag   } }   ' ,   } )   { %   endfor   % }   < / script >   { %   endif   % }",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-qi-ta-ji-qiao.html"
        },
        {
            "title":"django后台api编写之-其他问题",
            "text":"csrf 认证 失败   提到 表单 加上 ：   < form   method = \" post \" > { %   csrf _ token   % }   csrf 认证 失败 ， 参考   答案   设置 才 。   CSRF _ TRUSTED _ ORIGINS   =   [ ' www . cdwanze . work ' ]",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-qi-ta-wen-ti.html"
        },
        {
            "title":"django后台api编写之-请求和响应",
            "text":"请求 响应   request   ， APIView 含义 方法 ， 都 会 接收 一个   request 对象 ， 对象 ：   query _ params   GET 传过来 参数   data   POST   PUT   PATCH   传过来 参数 ， 还 没完 ， 传过来 文件 ， 表单 都 支持 。   user   请求 认证 会 返回 用户 记录 ， 编写 auth 类 会 ， 认证 ， 返回   AnonymousUser   Response   含义 方法 返回 对象 ， 第一个 参数 data ， 字典 值 ， 会 自动 封装 json 友好 格式 。 实际上 套路 ：   return   Response ( serializer . data )     serializer   有个   _ valid   方法 ， 用来 序列化 类 输出 前 预热 。 这两点 序列化 讨论 中 会 涉及 。 看 ：   Response ( data ,   status = None ,   template _ = None ,   headers = None ,   content _ type = None )   headers   http 协议 响应 头 ， status   http 状态 码 。   过程 套路 ， 很多 高级 视图 套路 都 类似 例子 ， 看 几遍 。   class   SnippetDetail   (   APIView   ) :   \" \" \"   Retrieve ,   update     delete   a   snippet   instance .   \" \" \"   def   _ object   (     ,   pk   ) :     :   return   Snippet   .   objects   .     (   pk   =   pk   )     Snippet   .   DoesNotExist   :   raise   Http404   def     (     ,   request   ,   pk   ,   format   =   None   ) :   snippet   =     .   _ object   (   pk   )   serializer   =   SnippetSerializer   (   snippet   )   return   Response   (   serializer   .   data   )   def   put   (     ,   request   ,   pk   ,   format   =   None   ) :   snippet   =     .   _ object   (   pk   )   serializer   =   SnippetSerializer   (   snippet   ,   data   =   request   .   data   )     serializer   .   _ valid   ( ) :   serializer   .   save   ( )   return   Response   (   serializer   .   data   )   return   Response   (   serializer   .   errors   ,   status   =   status   .   HTTP _ 400 _ BAD _ REQUEST   )   def   delete   (     ,   request   ,   pk   ,   format   =   None   ) :   snippet   =     .   _ object   (   pk   )   snippet   .   delete   ( )   return   Response   (   status   =   status   .   HTTP _ 204 _ NO _ CONTENT   )   urls . py 加上 :   url ( r ' &# 94 ; snippets / ( P < pk > [ 0 - 9 ] + ) / $ ' ,   views . SnippetDetail . _ view ( ) ) ,   正则表达式   ( P < pk > [ 0 - 9 ] + )   收集 一串 数字 ， 一串 数字 命名   pk   。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-qing-qiu-he-xiang-ying.html"
        },
        {
            "title":"django后台api编写之-权限管理",
            "text":"权限 管理   认证   视图 类里 定义   authentication _ classes   目标 视图 类 认证 ， 默认 认证 管理 类 。   自定义 身份 认证   写 身份 认证 类 ， 继承   BaseAuthentication   ， 重写   authenticate ( ,   request )   方法 ， 认证 成功 返回   ( user ,   auth )   ， 返回 None 。 request . user   登录 用户 实例 ，   request . auth   登录 auth 信息 。   情况 下 身份 认证 失败 想要 抛出   AuthenticationFailed   异常 。   权限   视图 类里 定义   permission _ classes   目标 视图 类 权限 管理 ， 采用 默认 权限 管理 类 。   认证 完 会 进去 权限 管理 ， 权限 检查   request . user   request . auth   调用 。   最 简单 权限 管理 类   IsAuthenticated   ， 身份验证 用户 访问 ， 拒绝 没 用户 访问 。   IsAuthenticatedOrReadOnly   类 身份 认证 用户 访问 ， 身份验证 用户 只能 只读 访问 。   自定义 权限 管理 类   自定义 权限 管理 类 ， 继承   BasePermission   ， 一个 两个 方法 ：   _ permission ( ,   request ,   view )   _ object _ permission ( ,   request ,   view ,   obj )   请求 授予 权限 ， 返回 True ， 权限 返回 False 。   自定义 权限 管理 类 还 加上   message   属性 ， 用户 权限 没 抛出   PermissionDenied   异常 额外 显示信息 。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-quan-xian-guan-li.html"
        },
        {
            "title":"django后台api编写之-日志",
            "text":"django 日志   简介   django python logging 模块 日志 系统 ， django 项目 日志 管理 学习 离不开 logging 模块 学习 。   logging 模块 中级 教程   logging 模块 中级 几个 词汇 ： loggers ,   handlers ,   filters ,     formatters 。   loggers   记录器   运行 logging . info ， 调用 默认 记录器 ， 会 针对 python 模块 文件创建 一个 记录器 。   logger   =   logging . getLogger ( __ __ )     __ __   一种 简便 命名 方法 ， 勤快 某种 情况 下 需要的话 手工 记录器 取个 名字 。     getLogger   函数 指定 名字 定义 （ 指 第三方 模块 下定义 ） ，   getLogger   指定 目标 名字 会 记录器 。 DIY 第三方 模块 日志 记录器 有用 。   记录器 挂载 卸载 处理器 对象 过滤器 对象 ：   -   logger . addHandler ( )   -   logger . removeHandler ( )   -   logger . addFilter ( )   -   logger . removeFilter ( )   记录器   setLevel ( )   方法 设置 最小 记录 级别 ， Handler 级别 协作关系 。   handlers   处理器 负责 分发 日志 信息 目标 地去 。 介绍 几个 Handler 类 ：   StreamHandler   信息 以流 形式 输出 ， 指 输出 终端   FileHandler   信息 写入 文件 中 去   RotatingFileHandler   信息 写入 文件 ， 文件大小 超过 值 ， 新建 一个 文件 写 。   TimeRotatingFileHandler   信息 写入 文件 ， 每隔 一段时间 ， 比如说 ， 会 自动 再 新建 一个 文件 再 往里面 写 。   处理器 对象   setLevel   方法 ， 提及 ， 记录器   setLevel   协作关系 ， 更 详细 描述 ， 信息 先 记录器 并分 发给 处理器 对象 ， 再 处理器 再 分发 目的地 。   处理器 挂载   格式 器   对象   过滤器   对象 。   handler . setFormatter ( )   handler . addFilter ( )   handler . removeFilter ( )   filters   过滤器   formatters   格式 器 ， 信息 格式 定义 。   字典 统一 配置   django setting . py 会 配置 ， 含义 很 ， 定义 处理器 ， 格式 器 ， 记录器 。   LOGGING   =   {   ' version ' :   1 ,   ' disable _ existing _ loggers ' :   False ,   ' formatters ' :   {   ' simple ' :   {   ' format ' :   \" % ( asctime ) s   % ( ) s   [ % ( levelname ) s ]   % ( thread ) d   % ( module ) s   % ( funcName ) s   % ( lineno ) s :   % ( message ) s \"   }   } ,   ' handlers ' :   {   ' log _ file ' :   {   ' class ' :   ' sdsom . common . log . DedupeRotatingAndTimedRotatingFileHandler ' ,   ' filename ' :   config . ( ' web ' ,   ' log _ path ' ) ,   ' ' :   ' midnight ' ,   ' maxBytes ' : int ( config . ( ' web ' , ' log _ max _ bytes ' ) ) ,   ' interval ' :   1 ,   ' backupDay ' :   int ( config . ( ' web ' ,   ' log _ backup _ days ' ) ) ,   ' dedupetime ' :   int ( config . ( ' web ' ,   ' log _ dedupe _ time ' ) ) ,   ' formatter ' :   ' simple '   } ,   } ,   ' loggers ' :   {   ' django . request ' :   {   ' handlers ' :   [ ' log _ file ' ] ,   ' level ' :   config . ( ' web ' ,   ' log _ level ' ) ,   ' propagate ' :   True ,   } ,   }   }",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-ri-zhi.html"
        },
        {
            "title":"django后台api编写之-url分发",
            "text":"url 分发   web 框架 一个 核心 功能 url 分发 工作 ， 先 来看 下 django 这块 内容 。   过程   project     urls . py   定义 好 项目 url 分发 规则 。 默认 内容 :     django . urls   import   path     django . contrib   import   admin   urlpatterns   =   [   path   (   ' admin / '   ,   admin   .   site   .   urls   ) ,   ]   读者 兴趣 先看 下 admin 页 ，   / admin   。 请 确认 执行 数据库 操作   makemigrations     migrate   ， 创建 超级 用户   createsuperuser   。 django 默认 自动 创建 admin 支持 页面 。   接下来 类似 插入   app     urls 定义 。 简单 写 上 即可 :     django . urls   import   include   ,   path   ....   path   (   ' app _ / '   ,   include   (   ' app _ . urls '   ) ) ,   ....   url 分发 需求 情况 下 ， 都 推荐 上 django 官方 教程 推荐 url 分发 写法 。   app 下   urls . py   进一步 定义 url 分发 规则 :     django . urls   import   path     .   import   views   urlpatterns   =   [   path   (   ' '   ,   views   .   index   ,     =   ' index '   ) ,   ]   讨论 django 官方 教程 ， 推荐 写法 风格 。   url 上带 参数     django . urls   import   _ path     .   import   views   urlpatterns   =   [   _ path   (   r   ' &# 94 ; add / ( [ \\ d ] + ) / ( [ \\ d ] + ) $ '   ,   views   .   add   ,     =   ' add '   ) ,   ]   参数 逐个 传递 视图函数 ， 唯一 值得一提的是 django 视图函数 默认 第一个 函数 传递 进去   request   参量 。   views . py   内容 :     django . http   import   HttpResponse   def   add   (   request   ,   a   ,   b   ) :   res   =   int   (   a   )   +   int   (   b   )   return   HttpResponse   (   str   (   res   ) )   正则表达式 写法 老式 django url 写法 ， 特别 需求 ， django 官方 教程 ， 采用 推荐 写法 ：     django . urls   import   path     .   import   views   urlpatterns   =   [   path   (   ' add / < int : a > / < int : b > '   ,   views   .   add   ,     =   ' add '   ) ,   ]   url 定义     参量 大体 类似 flask   endpoint   概念 ， django   reverse   函数 ， 大体 类似 flask   url _   概念 。   视图函数   add   url :     django . core . urlresolvers   import   reverse   reverse   (   ' add '   ,   args   =   (   1   ,   2   ) )   模板 中有 :   < a   href =   \" { %   url   ' add '   1   2   % } \"   >   link   < / a >   获取 full - url   提到 reverse 函数 返回 url 字符串 还 完整 url ， url 。 获取 全站 完整 url   request . build _ absolute _ uri ( location )   ， 不 指定 location 默认 url 。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-urlfen-fa.html"
        },
        {
            "title":"django后台api编写之-序列化",
            "text":"序列化   理解 序列化 过程   django   restframework 序列化 类 类似 django 表单 类 ， django 表单 类 用于 沟通 django Model 网页 form 之间 桥梁 ； 序列化 类 用于 沟通 django Model 类 JSON 数据格式 之间 桥梁 。   注   :   Model   - >   Serializer   （   data 挂载 python dict 字典 值   ）   serializer   =   SnippetSerializer   (   snippet   )   serializer   .   data   #   {   ' pk '   :   2   ,   ' title '   :   u   ' '   ,   ' code '   :   u   ' print   \" ,   world \" \\ n '   ,   ' linenos '   :   False   ,   ' language '   :   u   ' python '   ,   ' style '   :   u   ' friendly '   }   过程 视图 类 方法 下 ， 数据库 操作 获取 数据库 目标 Model 记录 ， 送入 序列化 类 ， 目标 类   . data   属性 字典 值 ， 送入 Response HTTP 响应 值 。   用法 ， 字典 data 送入 序列化 类 data 属性 中 ，   serializer   =   SnippetSerializer ( data = data )   调用 序列化 类 save 方法 进一步 数据库 操作 。   serializer . save ( )   save 方法 依赖于 进一步 定义 序列化 类   create     update   方法 。 所示 ：   def   create ( ,   validated _ data ) :   return   Comment . objects . create ( * * validated _ data )   def   update ( ,   instance ,   validated _ data ) :   instance . email   =   validated _ data . ( ' email ' ,   instance . email )   instance . content   =   validated _ data . ( ' content ' ,   instance . content )   instance . created   =   validated _ data . ( ' created ' ,   instance . created )   instance . save ( )   return   instance   情况 下 想 定义 save 方法 。   ModelSerializer   类似 django 表单 类 ， 利用   ModelSerializer   类来 更 快 创建 序列化 类 。     rest _ framework   import   serializers   class   SnippetSerializer   (   serializers   .   ModelSerializer   ) :   class   Meta   :   model   =   Snippet   fields   =   (   ' id '   ,   ' title '   ,   ' code '   ,   ' linenos '   ,   ' language '   ,   ' style '   )   证明 简便 写法 （ 包括 create update 方法 都 会 自动 ） 应付 。 shell 里 代码 再 撸 一遍 。   > > >     snippets . models   import   Snippet   > > >   snippet   =   Snippet   (   code   =   ' print   \" ,   world2 \"   \\ n   '   )   > > >     snippets . serializers   import   SnippetSerializer   > > >   snippet   .   save   ( )   > > >   serializer   =   SnippetSerializer   (   snippet   )   > > >   serializer   .   data   {   ' language '   :   ' python '   ,   ' linenos '   :   False   ,   ' id '   :   3   ,   ' title '   :   ' '   ,   ' code '   :   ' print   \" ,   world2 \"   \\ n   '   ,   ' style '   :   ' friendly '   }   _ valid   方法   serializer . _ valid ( raise _ exception = True )   定义   validate   方法 目标 对象 验证 ， 定义   validate _ < fieldname >   定义 字 段 级别 验证 。   def   validate   (     ,   data   ) :   \" \" \"   Check       start         stop .   \" \" \"     data   [   ' start '   ]   >   data   [   ' finish '   ] :   raise   serializers   .   ValidationError   (   \" finish     occur     start \"   )   return   data   序列化 类 引用 request . user   参考     ， 序列化 类   . context [ ' request ' ]   获取   request   对象 ， 获取   user 对象 。   user   =   . context [ ' request ' ] . user",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-xu-lie-hua.html"
        },
        {
            "title":"django后台api编写之-邮箱认证",
            "text":"邮箱 认证   参考   篇文章   。   过程 分为 两步 ， 发送 验证 邮箱 ， 接受 确认 邮箱 链接 ：   _ path ( r ' &# 94 ; users / verify _ email / $ ' ,   VerifyEmailView . _ view ( ) ,   = ' users _ verify _ email ' ) ,   _ path ( r ' &# 94 ; users / confirm _ email / ( P < uidb64 > [ 0 - 9A - Za - z _ \\ - ] + ) / ( P < token > [ 0 - 9A - Za - z ] { 1 , 13 } - [ 0 - 9A - Za - z ] { 1 , 20 } ) / $ ' ,   ConfirmEmailView . _ view ( ) ,   = ' users _ confirm _ email ' ) ,   发送 邮件 过程 填写 信息 ， 发送 邮件 即可 ：   class   VerifyEmailView   (   APIView   ) :   permission _ classes   =   (   IsAuthenticated   , )   def   post   (     ,   request   ) :   profile   =   request   .   user   user   =   profile   .   user   current _ site   =   _ current _ site   (   request   )   mail _ subject   =   ' 请 确认 邮箱 . '   message   =   render _ _ string   (   ' verify _ email . html '   ,   {   ' user '   :   user   ,   ' domain '   :   current _ site   .   domain   ,   ' uid '   :   urlsafe _ base64 _ encode   (   force _ bytes   (   user   .   pk   ) )   .   decode   (   ' utf8 '   ) ,   ' token '   :   PasswordResetTokenGenerator   ( )   .   make _ token   (   user   ) ,   } )   _ email   =   user   .   email   email   =   EmailMessage   (   mail _ subject   ,   message   ,     =   [   _ email   ]   )   email   .   send   ( )   return   Response   ( {   ' info '   :   \" 邮件 已 发送 ， 请 查收 邮箱 。 \"   } )   确认 邮件 过程 ：   class   ConfirmEmailView   (   APIView   ) :   permission _ classes   =   (   AllowAny   , )   def     (     ,   request   ,   uidb64   ,   token   ) :   uid   =   urlsafe _ base64 _ decode   (   uidb64   )   user   =   None     :   profile   =   Profile   .   objects   .     (   pk   =   uid   )   user   =   profile   .   user     Profile   .   DoesNotExist   :   pass     (   user       None   )     PasswordResetTokenGenerator   ( )   .   check _ token   (   user   ,   token   ) :   user   .   _ email _ verified   =   True   user   .   save   ( )   return   Response   ( {   ' info '   :   \" 邮箱 确认 。 \"   } )     :   return   Response   ( {   ' info '   :   ' 无效 激活 链接 。 '   } )   技术 点 传递 token 加密 解密 过程 。   利用 django 自带 密码 重置 token 检验 系统 ：   ' token ' :   PasswordResetTokenGenerator ( ) . make _ token ( user ) ,   PasswordResetTokenGenerator ( ) . check _ token ( user ,   token )   类似 JWT   token 过程 ， 额外 加上 uid 判断 登录 用户 。",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-you-xiang-ren-zheng.html"
        },
        {
            "title":"django后台api编写之-自定义命令",
            "text":"自定义 命令   目标 app 新建 一个   management   文件夹 ， 新建 一个   commands   文件夹 ， 两个 文件夹 都 带上   __ init __. py   文件 。   commands 文件夹 定义 python 脚本 ， 脚本 命令 调用 ：   python   manage . py   command _   ：   python   manage . py     查看 命令 列表 。   一个 命令 模块 所示 ：     django . core . management . base   import   BaseCommand   ,   CommandError     polls . models   import   Question     Poll   class   Command   (   BaseCommand   ) :     =   ' Closes       poll     voting '   def   add _ arguments   (     ,   parser   ) :   parser   .   add _ argument   (   ' poll _ id '   ,   nargs   =   ' + '   ,   type   =   int   )   def   handle   (     ,   *   args   ,   * *   options   ) :     poll _ id     options   [   ' poll _ id '   ] :     :   poll   =   Poll   .   objects   .     (   pk   =   poll _ id   )     Poll   .   DoesNotExist   :   raise   CommandError   (   ' Poll   \"   % s   \"       exist '   %   poll _ id   )   poll   .   opened   =   False   poll   .   save   ( )     .   stdout   .   write   (     .   style   .   SUCCESS   (   ' Successfully   closed   poll   \"   % s   \" '   %   poll _ id   ) )",
            "tags":"django",
            "url":"articles/djangohou-tai-apibian-xie-zhi-zi-ding-yi-ming-ling.html"
        },
        {
            "title":"html5代码规范",
            "text":"html5 代码 规范   本文 参考   篇文章     篇文章     aribnb javascript 规范   。   指出 都 代码 建议 ， 还 大头 开蛋 小头 开蛋 ， 到底 空 四个 空格 两个 空格 ， 分歧 不 写 ， 读者 自行决定 。   总 原则   团队 人数 ， 代码 看起来 好像 一个 人写 。 — — 原则 公认 。   文件名 推荐 小写字母 加 下划线 。 （ 小写字母 加连 字符 ， 不 推荐 带上 空格 ）   html   缩进 ， 一个 好 编辑器 会 提供 自动 缩进 功能 。   属性 名 小写 ，   -   隔开 。   属性 定义   双引号   包围起来 。   < hr >   < img   src = ... >   不用 加个   /   号 。   关闭 标签 省略   < li > ... < / li >   这是 疑问 。   开头 格式 都 ：   < ! DOCTYPE   html >   语言 指定 遵循 规范   ，   < html   lang = \" zh - cn \" >   字符 编码 推荐 指定 utf8 ，   < meta   charset = \" utf - 8 \" >   IE 兼容 模式 ， 推荐 加上 一行 ：   html   < meta   http - equiv = \" X - UA - Compatible \"   content = \" IE = Edge \" >   引用 css javascript ， 所示 （ 再 加上 杂七杂八 东西 ， 尽可能 代码 简洁 。 ） ：   ` ` ` html   ...   ...   ` ` `   属性 顺序 ：   class   id     data - *   src     type   href     title   alt   role   aria - *   布尔 属性 ， html 规范 原文 ：   The   values   \" true \"     \" false \"       allowed     boolean   attributes .   To   represent   a   false   ,     attribute         omitted   altogether .   布尔 属性 true ， 不 取值 false 。   ` ` ` html   1   ` ` `   代码 简洁 简洁 ， 尽可能减少 标签 数量 。 这是 疑问 。   css   css 代码 规范 兴趣 请 参看 提到 参考 文章 ， 不 太 感兴趣 ， 老实 说 css 本来 可读性 偏低 ， 代码 规范 做 。   javascript   javascript 好几种 代码 风格 写法 规范 ， 推荐 读者 安装   eslint   插件 ， 学习   aribnb   javascript 规范 ， 接下来 javascript 基础 篇 内容 按此 修订 重写 。",
            "tags":"html5",
            "url":"articles/html5dai-ma-gui-fan.html"
        },
        {
            "title":"html5基础",
            "text":"html5 基础   第一个 模板   < ! DOCTYPE   html >   <   html   lang   =   \" zh - cn \"   >   <   head   >   <   meta   charset   =   \" utf - 8 \"   >   <   title   >     awesome   title   < /   title   >   < /   head   >   <   body   >   < /   body   >   < /   html   >   doctype 声明   html5 doctype 声明 非常简单 ， 开头 简单 一行 即可 :   < ! DOCTYPE   html >     html   标签 ，   head   标签 ， head 标签 内容 显示 网页 上 ， 本网页 配置 信息 。   字符集 设置 utf - 8   html5 更 简洁 语法 :   < meta   charset = \" utf - 8 \" >     body   标签 存放 显示 网页内容 。   第二个 例子   < ! DOCTYPE   html >   <   html   lang   =   \" zh - cn \"   >   <   head   >   <   meta   charset   =   \" utf - 8 \"   >   <   title   >   basic   html   < /   title   >   < /   head   >   <   body   >   <   nav   >   <   ul   >   <   li   > <   a   href   =   \" # \"   >   Home   < /   a   > < /   li   >   <   li   > <   a   href   =   \" # \"   >   About   < /   a   > < /   li   >   <   li   > <   a   href   =   \" # \"   >   Products   < /   a   > < /   li   >   <   li   > <   a   href   =   \" # \"   >   Contact   Us   < /   a   > < /   li   >   < /   ul   >   < /   nav   >   <   header   >   <   h1   > <   a   href   =   \" # \"   >   Very   Basic   Document   < /   a   > < /   h1   >   <   h2   >   A   tag   line         < /   h2   >   < /   header   >   <   section   >   <   article   >   <   h3   > <   a   href   =   \" # \"   >   First   Article   Title   < /   a   > < /   h3   >   <   p   >   Lorem   ipsum   dolor   sit   amet ,   consectetur   adipiscing   elit .   Integer   nec   odio .   < /   p   >   < /   article   >   <   article   >   <   h3   > <   a   href   =   \" # \"   >   Second   Article   Title   < /   a   > < /   h3   >   <   p   >   Praesent   libero .   Sed   cursus   ante   dapibus   diam .   < /   p   >   < /   article   >   < /   section   >   <     >   <   h4   >   Connect   With   Us   < /   h4   >   <   ul   >   <   li   > <   a   href   =   \" # \"   >   Twitter   < /   a   > < /   li   >   <   li   > <   a   href   =   \" # \"   >   Facebook   < /   a   > < /   li   >   < /   ul   >   < /     >   <   footer   >   <   p   >   All   rights   reserved .   < /   p   >   < /   footer   >   < /   body   >   < /   html   >   html5 新 很多 文档 结构 标签 ， 标签 布局 含义 ， 相当于 一个 自带 名字 div ， 默认 标签 。 作用 html 内容 分组 ( group ) 。   常用 标签 含义 ， 中 ， 尽量 规范 标签 。   header :   一个 网页 总要 个头 ， 推荐 都 标签 。   nav :   目录 导航 菜单 。   section :   本网页 主体 信息 主 页面 — — 类似 GUI 显示 窗口 。   article :   section 独立 内容 。   :   网页 主体 信息 不太 相关 信息 。   footer :   作者 ， 版权 脚注 信息 。   都 div class id 写法 取代 ， 中 默认 标签 需求 ， html5 默认 标签 。   例子 标签 ， 很 常用 标签 ， 承接 补充 写 一个 常用 html 标签 清单 。   常用 html 标签 清单   ul :   不 编号 列表 ， 无序 列表 （ Unordered   list ） 。 item   li   标签 封装 。   ol :   编号 列表 ， 序列表 （ Ordered   list ） 。 item   li   标签 封装 。   h1 , h2 , h3   ...   标题 标签 ， 数字 标题 层级 。   p :   段落 标签 。   b :   文字 加粗   i :   文字 斜体   br   换行   hr   水平线   img   图片 ， 最 常用 属性   src   ， 指明 图片 引用 地址 。   建立 一个 链接   a :   引用 链接 标签 ， 常用 属性   href   ， 指明 引用 地址 ，   title   悬浮 提示 文字 。   < a   href =   \" / \"   title =   \"     \"   >   show   < / a >   一个 链接 用来 下载 文件 ，   download   属性 指定 默认 保存 文件名 。   < a   href =   \" https : / / download . mozilla . org / product = firefox - 39.0 - SSL & os = win & lang = en - US \"   download =   \" firefox - 39 - installer . exe \"   >   Download   Firefox   39     Windows   < / a >   连接   target = \" _ blank \"   属性 ， 目标 连接 将会 浏览器 新 标签 页 打开 。   创建 一个 电子邮箱 链接 ：   < a   href =   \" mailto : @ mozilla . org \"   >   Send   email       < / a >   文字 html5 规范   html5 提出 规范 ， 不 推荐   < b >   标签 文字 用途 （ 文字 加粗 词 提醒 读者 词 特别 记忆 ） 。 推荐   < em >   标签 一级 ，   < strong >   标签 更进一步 。 默认 样式 中 ，   < em >   斜体 ，   < strong >   粗体 。 html5 表达 文字 样式 标签   < b > < i >   尽可能 不用 废弃 ， 文字 都 推荐   < em >     < strong >   标签 。 设计 思路 html 一个 描述 文档 内容 结构 标签 系统 ， 不 带有 内容 表现形式 东西 。 推荐 html5 规范 ， 少   < b >   标签   < i >   标签 。 请 参看   网页   讨论 。   注释   < ! - -   Make       a   comment .   - - >   序列表 带 无序 列表   无序 列表 嵌套 进去 即可 。   <   ol   >   <   li   >   ol   li1   < /   li   >   <   li   >   ol   li2   < /   li   >   <   ul   >   <   li   >   ul   li1   < /   li   >   <   li   >   ul   li2   < /   li   >   < /   ul   >   < /   ol   >   table   table 表格 用于 布局 ， 不 推荐 风格 ， html 标签 尽可能 文本 结构层 非 表现形式 层 。 一个 完整 table 模板 所示 :   <   table   >   <   caption   >   表格 标题 caption 标签   < /   caption   >   <   thead   >   <   tr   > <     >   标签   < /     > <     >   fullname   < /     > <     >     < /     > < /   tr   >   < /   thead   >   <   tbody   >   <   tr   > <   td   >   tr   < /   td   > <   td   >   table   row   < /   td   > <   td   >   表格 中 一行   < /   td   > < /   tr   >   <   tr   > <   td   >     < /   td   > <   td   >   table   head   < /   td   > <   td   >   表格 列名   < /   td   > < /   tr   >   <   tr   > <   td   >   td   < /   td   > <   td   >   table   data   < /   td   > <   td   >   表格 展示 数据   < /   td   > < /   tr   >   < /   tbody   >   < /   table   >   表格 标题 caption 标签   标签   fullname     tr   table   row   表格 中 一行     table   head   表格 列名   td   table   data   表格 展示 数据   大体 html 上 画表格 上 所示 ， 更 漂亮 表格 制作 都 css ， 先 略过 。   div span   div （ division ） html 标记 语言 中 区块 。 html 页面 显示 元素 好比 一个个 盒子 排布 ，   div   看作 一个 自定义 盒子 。 html 中有 两种 显示 风格 盒子 ， 一种 块状 区块 ， p 段落 标签 ； 一种 inline 盒子 ， 比如说 em 标签 ， 换行 。   div 标签 更 确切 表达 块状 区块 ， 看作 display 属性   block   （ 不 ， 推荐 接受 设定 ） ； inline 区块 ，   span   标签 元素 ， 理解 改 标签 元素 display 属性   inline   。   inline   css   最 css 属性 inline   css 模式 html 标签 中   style   属性 加上 。   font - size   字体大小   <   p   style   =   \" font - size : 12pt \"   >   paragraph   < /   p   >   color   字体 颜色 ，   这是 css 支持   color 关键词 清单   。   <   h2   style   =   \" color : green \"   >   paragraph   < /   h2   >   font - family   字族 ，   这是 css 支持   字族 信息   。   <   ol   >   <   li   style   =   \" font - family : Arial \"   >   Arial   < /   li   >   < /   ol   >   文字 标签 都 三个 属性 控制 其内 文字 大小 ， 颜色 字族 。 都 推荐 css 控制 ， 思路 顺序 优先 inline   css ， 太过 情况 下才 单独 css 控制 。   background - color   背景 颜色 。 读者 熟悉 LaTeX 排版系统 ， 都 LaTeX 排版 很 核心 一个 概念 盒子 。 html ， 一个个 标签 看作 一个个 排版 盒子 。 background - color 控制 一个 盒子 背景 颜色 。   <   body   style   =   \" background - color : yellow \"   >   < /   body   >   text - align   文字 标签 盒子 里 对齐 方式 。 选 参数 :   left ,   ,   center 。   <   h3   style   =   \" text - align : center \"   >   居中 对齐 标题   < /   h3   >   外部 css   一种 说法 ， 放在 html   标签 css 外部 css 文件 引用 区分 开来 ， 在我看来 区别 不大 。 网络 上 一种 说法 html   标签 多用 id css 定义 ， 外部 css 文件 只用 class 定义 好 普适性 ， 在我看来 削足适履 。 额 ， 国内 网络 环境 都 懂 ， 喜欢 少用 css 文件 引用 ， 尽量 css 定义 都 放在   标签 ， 加载 快 一点 ， ， 倒 没什么 特别 好 讲究 。 css 定义 前 class ， 元素 才 id 属性 控制 ， 想 。   放在   标签 css 大致 格式 引入 进来 :   <   style   >   格式 外部 css 文件格式 完全一致   < /   style   >   引入 外部 文件 css :   <   link   rel   =   \" stylesheet \"   href   =   \" main . css \"   >   外部 css 文件 还 进一步 引用 css 文件 :   @   import   url   (   \" http : / / getbootstrap . / dist / css / bootstrap . min . css \"   )   ;   引用 语句 分号 不 太 ， 不太 关心 ， 没事 加上 。 参考   网页   。",
            "tags":"html5",
            "url":"articles/html5ji-chu.html"
        },
        {
            "title":"html5进阶",
            "text":"html5 进阶   设置 背景图片   background - image   :   url   (   \" https : / / theurl / tothe / image . jpg \"   ) ;   设置 背景图片 位置   设置 背景图片 位置 ， 值 top ， center ， ， left ， top ， bottom ， 所示 :   top   left   top   center   top     center   left   center   center   center     bottom   left   bottom   center   bottom     只 给出 一个 值 ， 第二个 值 默认值 center 。   background - position   :   center   center   ;   设置 背景图片 重复   默认 repeat ， 设置   - repeat   ， 背景图片 重复 铺满 背景 。   background - repeat   :   - repeat   ;   设置 背景图片 不随 页面 滚动   background - attachment   :   fixed   ;   设置 背景 图片尺寸   设置   cover   ， 背景图片 会 拉伸 足够 大 ， 覆盖 区域 ， 图片 部位 显示 背景 中 。   background - size   :   cover   ;   设置     ， 背景图片 会 拉伸 长度 宽度 不 超过 背景 为止 。   还 指定 宽高比 ， 宽 100px ， 高 150px :   background - size   :   100px   150px   ;   设置 背景 颜色   html 标签 盒子 背景 颜色 ， color 设置 字体 颜色 。   background - color   :   red   ;   控制 文本 大小写   所示 ， 依次 :   大写 ， 首字母 大写 ， 小写 。   h1   { text - transform : uppercase }   h2   { text - transform : capitalize }   p   { text - transform : lowercase }   边框 画 一个 圆   边框 一个 圆 。   < div   style =   \" border : 1pt   solid   blue ; border - radius : 50% ; width : 100px ; height : 100px ; margin : auto ; \"   > < / div >   z - index 属性   css 中 标签 盒子 设置 z - index 属性 ， 影响 标签 盒子 堆叠 顺序 。 比如说 header 标签   z - index   属性 设置 1 ， 都 不 设置 ， 保证 header 网页 头 第一个 先 堆放 。 :   header   {   z - index   :   1   ;   }   表单   html 中 表单 情况 ， 详细 。 表单 指   form   标签 加上 其内 包含   input   元素 。 input 元素 熟知 文本 输入框 ， 下 拉 列表 ， 单选框 ， 复选框 。   < form >   < input >   < / input >   < / form >   表单 元素 类型 input 标签   type   元素 定义 ， 详细 :   单行 文本 输入   单行 文本 输入 input 标签 ， type 类型   text   ， 文字 推荐   label   标签 。   <   form   >   <   label   >   :   < /   label   >   <   input   type   =   \" text \"     =   \" yourname \"   > < /   input   >   < /   form   >   input     属性 很 ， 其值 文本 输入 值 变量名 （ python wsgi 机制 其刷成   form . yourname   引用 ） 。   :   多行 文本 输入   多行 文本 输入   textarea   标签 生成 ， 先 简单 下 即可 。   <   p   >   :   < /   p   >   <   textarea   rows   =   \" 5 \"   >     textarea         < /   textarea   >   <   p   >   :   < /   p   >   :     textarea         :   加上 action   表单 form 标签 上 加上 action 属性 ， 表单 内 定义 submit 按钮 input 元素 ， 点击 将会 数据 发送给 action 去 ， 具体方法 method 属性 定义 ， 默认 GET 。   < form   action =   \" / \"   method =   \" POST \"   >   < input   type =   \" text \"   >   < button   type =   \" submit \"   >   submit   < / button >   < / form >   required   加上 requird 属性 ， 该字段 填上值 。   < input   type = \" text \"   required >   placeholder   预 显示 文字   < input   type = \" text \"   placeholder = \" input     \"   required >   按钮   html 好几种 方法 创建 一个 按钮 ， w3school 不 推荐 button 标签 ， 推荐 所示 input 标签 形式 :   <   form   action   =   \" https : / / www . google . \"   method   =   \" \"   >   <   input   type   =   \" submit \"     =   \" click     google \"   > < /   input   >   < /   form   >       属性 定义 按钮 上 显示 文字 。 跳转 form 标签   action   属性 定义 ， 还 定义   method   属性 定义 HTTP method ， 一个 表单 提交 例子 :   <   form   action   =   \" http : / / httpbin . org / post \"   method   =   \" post \"   >   <   label   >   :   < /   label   >   <   input   type   =   \" text \"     =   \" \"   / >   <   label   >   password :   < /   label   >   <   input   type   =   \" password \"     =   \" password \"   / >   <   input   type   =   \" submit \"     =   \" 提交 \"   / >   < /   form   >   :   password :   还 一个 新 type 类型   password   ， 类似 单行 文本 输入 ， 输入 密码 ， 屏幕 上 显示 。   重置 按钮   < input   type = \" reset \"   = \" 重置 \"   / >   按钮 将会 表单 内容 清空 。   单选 按钮   <   form   action   =   \" http : / / httpbin . org / \"   method   =   \" \"   >   <   label   >   Male   < /   label   >   <   input   type   =   \" radio \"     =   \" Sex \"     =   \" Male \"   checked   =   \" checked \"   / >   <   label   >   Female   < /   label   >   <   input   type   =   \" radio \"     =   \" Sex \"     =   \" Female \"   / >   <   input   type   =   \" submit \"     =   \" 提交 \"   >   < /   form   >   Male   Female   新   checked   ， 默认 单选 按钮 复选 按钮 选中 ， 设置   \" checked \"   默认 选中 。   复选 按钮   <   form   action   =   \" http : / / httpbin . org / \"   method   =   \" \"   >   <   p   >   喜欢 吃 水果 :   < /   p   >   <   label   >   apple   < /   label   > <   input   type   =   \" checkbox \"     =   \" fruits \"     =   \" apple \"   / >   <   label   >   banana   < /   label   > <   input   type   =   \" checkbox \"     =   \" fruits \"     =   \" banana \"   / >   <   label   >   pear   < /   label   > <   input   type   =   \" checkbox \"     =   \" fruits \"     =   \" pear \"   / >   <   input   type   =   \" submit \"     =   \" 提交 \"   / >   < /   form   >   喜欢 吃 水果 :   apple   banana   pear   label 标签   标签 用户 输入框 内容 ， 一个 用途 ， 改进 鼠标 用户 可用性 ， 用户 点击 标签 ， 将会 聚焦 目标 表单 对象 上 ， 只 设置 ：   < label   = \" 控件 id 名称 \" >   < input   id = \" 控件 id 名称 \"   响应 式 布局   提示 ： 推荐 bootstrap 响应 式 设计 ， 内容 有助于 理解 bootstrap 内部 响应 式 布局 。   请 读者 先 阅读   篇文章   。 这篇刚   Ethan   Marccote   给出 例子 有个 信息 ， 设备 像素 分级 :   大于 1300 像素   600 1300 像素   400 600 像素   小于 400 像素   像素 分级 设备 css 设置 提供 参考 。   网页 都 加上 一行 :   < meta   = \" viewport \"   content = \" width = device - width ,   initial - scale = 1 \"   / >   网页 默认 宽度 设备 宽度 ， 原始 缩放 比为 1 。   元素 宽度   width :   xxx   px   写 死 css 设置 ，   %     auto   。 字体 大小 都 推荐   em   大小 。   h1   默认 大小   1.5 em   。   h1   {   font - size   :   1.5   em   ;   }   small   默认   0.875 em   。   small   {   font - size   :   0.875   em   ;   }   流动 式 布局 ， 区块 位置 都 浮动 ， 情况 下会   position :   absolute   ， 这会 带来 很多 麻烦 ， 尽量少 。   屏幕 响应 式 多个 css 配置 :   【 css 很多 通用 配置 设备 皆 ， 屏幕 响应 css 放在 css 文件 面 。 】   参看   篇文章   ， 提到 流行   mobile -   设计 思路 ， 有限 照顾 手机 小 屏幕 设备 设计 流程 。 先写 好 通用 css 配置 ， css 文件 面 设置 屏幕 响应 css 设置 。 最小 屏幕 照顾 :   @   media   screen     (   min - width   :   400px   )   { }   @   media   screen     (   min - width   :   600px   )   { }   @   media   screen     (   min - width   :   1000px   )   { }   @   media   screen     (   min - width   :   1400px   )   { }     min - width   指 设备 宽度 至少 大于 值 ，   max - width   指 设置 宽度 小于 值 。 例子 ， 假设 设备 750px ， 第一个 第二个 配置 都 ， css 覆盖 配置 ， 定制 生效 ， 先 调 手机 端的 mobile - 思路 。   图片 ， 设置 宽度 。   img   {   max - width   :   100   %   ; }   - js   class   < html   class = \" - js \"   lang = \" zh \" >   说 class 用来 设置 情况 下 javascript 禁用 css 。",
            "tags":"html5",
            "url":"articles/html5jin-jie.html"
        },
        {
            "title":"pyqt5编程之-安装和配置",
            "text":"安装 配置   利用 pip3   安装 ：   pip3   install   pyqt5   安装 qt5 ， windows 下 测试 发现 不 安装 qt5 ， 估计 ubuntu 下 不 安装 qt5 。   写 上 ， 读者 程序 提示 没 找到 qt 类似 错误 ， 安装 qt ：   sudo   apt -   install   qt5 - default   sudo   apt -   install   qtbase5 - dev   sudo   apt -   install   qtdeclarative5 - dev   安装 SIP 挺 麻烦 ， sip pip 安装 ， 安装 pyqt5 ， 顺便 装上 。 发现 windows 下   pyuic5     pyrcc5   两个 命令 ， pip 安装 装上 。   ubuntu 下 安装 东西 ， 估计 不 ：   sudo   apt -   install   pyqt5 - dev - tools   检查 pyqt5 安装 情况 执行 脚本 即可 ， 显示 安装 pyqt5 版本号 :   > > >     PyQt5 . QtCore   import   QT _ VERSION _ STR   > > >   print   (   QT _ VERSION _ STR   )   > > >   5.9   .   2   本文 代码 都 PyQt 版本号 都 ， 特别 理由 ， 会 版本号 。",
            "tags":"pyqt5",
            "url":"articles/pyqt5-development-environment.html"
        },
        {
            "title":"pyqt5编程之-exe制作和安装程序制作",
            "text":"exe 制作 安装程序 制作   exe 制作   exe 制作 写 pyqt 程序 或者说 python 程序 freeze ， 目标 机器 上 用户 安装 python 依赖 都 运行 程序 。   推荐 pyinstaller 。   pyinstaller 官网     。   pip   安装 ， 推荐 项目 根目录 下 创建 一个 简单 启动 脚本 ， 平时 测试 ， pyinstaller 程序 入口 。   \" \" \"     pyinstaller   脚本 名字 设置   quicktikz   \" \" \"   import   quicktikz . main     __ __   = =   ' __ main __ '   :   quicktikz   .   main   .   gui   ( )   NOTICE :   脚本 名字 pyqt 程序 模块 名字 ， 安装 后 闪退 脚本 名字 没取 好 。   很 简单 ：   import   subprocess   PROJECT   =   ' quicktikz '   cmd   =   ' pyinstaller . exe   - - noconsole   - y   QuickTikz . py '   subprocess   .   call   (   cmd   ,   shell   =   True   )     - y   选项 自动 删除 原 输出 文件 ，   - - noconsole   隐藏 pyqt 程序 终端 界面 ， 程序 会开 两个 窗口 不太好 看 。   一切顺利 ，   dist   文件夹 下 运行 目标程序 exe 运行 ， 都 OK ， 出 ， 请 钻研 官方 文档 。 。   安装程序 制作   推荐   advanceinstaller 程序 ， 程序   官网 地址   。 推荐 安装 官网 simple   过程 ， 请 参看 官网   入门 tutorial   。   设置 文件 文件夹   dist   内容 都 加进去 即可 ， 软件 操作 说 添加 文件 只能 添加 文件 ， dist   PyQt5 文件夹 再 操作 添加 文件夹 。   运行 顺利 ， 太好了 ， 程序 安装程序 ， 赶快 分享 小伙伴 。",
            "tags":"pyqt5",
            "url":"articles/pyqt5-intall.html"
        },
        {
            "title":"pyqt5编程之-国际化支持",
            "text":"国际化 支持   小节 参考资料 官方 文档 之外   网站   。   指 pyqt 软件 国际化 支持 指 i18n ， 两种 语言 ， 英语 本土 语言 。 软件 字符串 都 英语 ，   . tr ( )   封装 ， 官方 pyqt5 文档     ， 推荐 形式 ：     PyQt5 . QtCore   import   QCoreApplication   QCoreApplication   .   translate   (   ' A '   ,   \" Hello \"   )   translate 函数 第一个 参数 翻译 目标 类 ， 第二个 翻译 字符串 。 写个 translate 函数 ， 翻译 都 统一 程序 主类 上 。   def   translate   (   string   ,   targetobj   =   None   ) :     targetobj     None   :   targetobj   =   \" MainWindow \"   return   QCoreApplication   .   translate   (   targetobj   ,   string   )   项目 里 新建 一个 translations 文件夹 ， 新建 一个 小 文件   wise . pro   ， wise 模块 名字 ， 随意 修改 。 文件 内容 简要 ：   SOURCES   + =   .. / main . py   .. / __ init __. py   \\   .. / Widgets / __ init __. py   TRANSLATIONS   + =   wise _ zh _ CN . ts   SOURCES   希望 扫描 py 文件 ， 文件 所说 translate 封装 ， 字符串   pylupdate5   工具 扫描 。 支持 路径 表达 。 不 支持 glob 语法 。   第二个 变量 TRANSLATIONS 希望 生成 目标 翻译 ts 文件 文件名 ， 格式 ：   { PROJECT _ NAME } _ { QLocale . system ( ) . ( ) } . ts   PROJECT _ NAME 项目 名字 ， QLocale . system ( ) . ( ) 机器 所用 目标语言 简写 ， python3 eval 模式 下 查看 ：   > > >     PyQt5 . QtCore   import   QLocale   > > >   QLocale   .   system   ( )   .     ( )   ' zh _ CN '     pylupdate5   小 工具 pro 文件 ：   pylupdate5   wise . pro   生成   wise _ zh _ CH . ts   文件 。   翻译 文件   样 下 ：     PyQt5 . QtCore   import   QTranslator   ,   QLocale   myapp   =   QApplication   (   sys   .   argv   )   translator   =   QTranslator   ( )     translator   .   load   (   ' wise _ '   +   QLocale   .   system   ( )   .     ( )   +   ' . qm '   ,   \" : / translations / \"   ) :   myapp   .   installTranslator   (   translator   )   构建 一个 QTranslator 对象 ， 调用 对象 方法 load ， 第一个 参数 load qm 文件名 ， 第二个 参数 qm 文件 路径 ， 谈及 qrc 引用 路径 。   主母 窗口 myapp installTranslator 方法 QTranslator 对象 加进去 即可 。   qt 官方 翻译 文件   qt 窗体 内部 文字 不好 DIY ， 上 加载 qt 官方 翻译 文件 。 代码 所示 ：   translator _ qt   =   QTranslator   ( )     translator _ qt   .   load   (   ' qt _ '   +   QLocale   .   system   ( )   .     ( )   +   ' . qm '   ,   \" : / translations / \"   ) :   #   print ( ' i   found   qt ' )   myapp   .   installTranslator   (   translator _ qt   )   主母 窗口 myapp 加载 两个 翻译 文件 。   官方 qt 翻译 文件 qt 源码 translations 文件夹 ， git   clone 获取 。   git   clone   https : / / gitorious . org / qt / qttranslations . git   ts 文件 如前所述   lrelease   命令 ， 语言 工具 打开 发布 即可 。",
            "tags":"pyqt5",
            "url":"articles/pyqt5-internationalizing.html"
        },
        {
            "title":"pyqt5编程之-布局管理",
            "text":"布局 管理   布局 管理 GUI 设计 中 回避 一个 话题 ， 详细 讨论 下 pyqt 布局 管理 。 正 如前所述 ， pyqt5 用于 布局 管理 类 都 移到 QtWidgets 子 模块 ， 最   QHBoxLayout     QVBoxLayout   。   QBoxLayout   QHBoxLayout     QVBoxLayout   一个 横向 排布 ， 一个 竖向 排布 。 方法 所示 ：   mainLayout   =   QHBoxLayout   ( )   mainLayout   .   addWidget   (   button1   )   mainLayout   .   addWidget   (   button2   )     .   setLayout   (   mainLayout   )   Layout 对象 好像 一个 封装 器 ， Layout 还 Layout ， 窗体 子 单元 ， 都   addWidget   方法 确立 封装 关系 。 主母 窗口 接受 一个 Layout 对象 ，   setLayout   方法 。   【 layout / 】     PyQt5 . QtWidgets   import   QApplication   ,   QWidget   ,   QLabel   ,   QVBoxLayout   ,   QPushButton   ,   QLineEdit   ,   QMessageBox   class   Form   (   QWidget   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )   nameLabel   =   QLabel   (   \" Name : \"   )     .   nameLine   =   QLineEdit   ( )     .   submitButton   =   QPushButton   (   \" Submit \"   )   bodyLayout   =   QVBoxLayout   ( )   bodyLayout   .   addWidget   (   nameLabel   )   bodyLayout   .   addWidget   (     .   nameLine   )   bodyLayout   .   addWidget   (     .   submitButton   )     .   submitButton   .   clicked   .   connect   (     .   submit   )     .   setLayout   (   bodyLayout   )     .   setWindowTitle   (   \" Hello   Qt \"   )     .   show   ( )   def   submit   (     ) :     =     .   nameLine   .   text   ( )       = =   \" \"   :   QMessageBox   .   information   (     ,   \" Empty   Field \"   ,   \" Please   enter   a   . \"   )   return     :   QMessageBox   .   information   (     ,   \" Success ! \"   ,   \" Hello   % s   ! \"   %     )     __ __   = =   ' __ main __ '   :   import   sys   app   =   QApplication   (   sys   .   argv   )   screen   =   Form   ( )   sys   .   exit   (   app   .   exec _   ( ) )   addStretch 方法   插入 一个 分隔符 ， 设计 器 弹簧 。   QGridLayout   tkinter 中有 grid 方法 ， 网格 布局 ， pyqt 中 网格 布局 对象 QGridLayout 。 QGridLayout 用法 QBoxLayout 类似 ，   addWidget   方法 还 接受 两个 额外 参数 几行 几列 。   请 例子 。 例子 很 好 演示 QGridLayout 。   ( i - 1 ) / / 3   该数 3 取商 ， 本来 1   2   3   4   5   6 … 0   0   0   1   1   1   2   2   2 … 正好 网格 中 几行 ，   ( i - 1 ) % 3   该数 3 取余 ， 本来 1   2   3   4   5   6 … 0   1   2   0   1   2   0   1   2 … 正好 网格 中 几列 概念 。   【 layout / gridlayout 】     PyQt5 . QtWidgets   import   QApplication   ,   QWidget   ,   QPushButton   ,   QGridLayout   class   Form   (   QWidget   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )   bodyLayout   =   QGridLayout   ( )     i     range   (   1   ,   10   ) :   button   =   QPushButton   (   str   (   i   ) )   bodyLayout   .   addWidget   (   button   , (   i   -   1   )   / /   3   , (   i   -   1   )   %   3   )   print   (   i   , (   i   -   1   )   / /   3   , (   i   -   1   )   %   3   )     .   setLayout   (   bodyLayout   )     .   setWindowTitle   (   \"   grid   layout \"   )     .   show   ( )     __ __   = =   ' __ main __ '   :   import   sys   app   =   QApplication   (   sys   .   argv   )   screen   =   Form   ( )   sys   .   exit   (   app   .   exec _   ( ) )   QFormLayout   QFormLayout ， 表单 布局 ， 常用 提交 配置 信息 表单 。   请 例子 。 例子 来自 pyqt5 源码 examples 文件夹 layouts 文件夹 basiclayouts . py 文件 ， 做 简化 用于 演示 表单 布局 。   【 layout / basiclayouts 】     PyQt5 . QtWidgets   import   (   QApplication   ,   QDialog   ,   QDialogButtonBox   ,   QFormLayout   ,   QGroupBox   ,   QLabel   ,   QLineEdit   ,   QSpinBox   ,   QVBoxLayout   ,   QTextEdit   )   class   Dialog   (   QDialog   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )     .   createFormGroupBox   ( )   buttonBox   =   QDialogButtonBox   (   QDialogButtonBox   .   Ok   |   QDialogButtonBox   .   Cancel   )   buttonBox   .   accepted   .   connect   (     .   accept   )   buttonBox   .   rejected   .   connect   (     .   reject   )   mainLayout   =   QVBoxLayout   ( )   mainLayout   .   addWidget   (     .   formGroupBox   )   mainLayout   .   addWidget   (   buttonBox   )     .   setLayout   (   mainLayout   )     .   setWindowTitle   (   \" user   info \"   )   def   createFormGroupBox   (     ) :     .   formGroupBox   =   QGroupBox   (   \"   infomation \"   )   layout   =   QFormLayout   ( )   layout   .   addRow   (   QLabel   (   \" : \"   ) ,   QLineEdit   ( ) )   layout   .   addRow   (   \" age : \"   ,   QSpinBox   ( ) )   layout   .   addRow   (   QLabel   (   \"   infomation : \"   ) ,   QTextEdit   ( ) )     .   formGroupBox   .   setLayout   (   layout   )     __ __   = =   ' __ main __ '   :   import   sys   app   =   QApplication   (   sys   .   argv   )   dialog   =   Dialog   ( )   sys   .   exit   (   dialog   .   exec _   ( ) )     QDialog   类   QDialogButtonBox   类 不 去 ， QDialog 类 accept reject 方法 ， QDialogButtonBox 最 两个 按钮 绑定 喜好 accepted rejected 。   创建 表单 函数 ，   QGroupBox   一个 窗体 类型 ， 带有 标题 。 接下来 QFormLayout 表单 布局 核心 代码 ：   layout   =   QFormLayout   ( )   layout   .   addRow   (   QLabel   (   \" : \"   ) ,   QLineEdit   ( ) )   layout   .   addRow   (   QLabel   (   \" age : \"   ) ,   QSpinBox   ( ) )   layout   .   addRow   (   QLabel   (   \"   infomation : \"   ) ,   QTextEdit   ( ) )     .   formGroupBox   .   setLayout   (   layout   )   layout 创建 母 窗体 layout   setLayout   方法 两个 布局 都 类似 ， 表单 布局 一行行 ， 方法 addWidget ，   addRow   ， addRow 方法 意义 上 接受 两个 窗体 类型 （ 包括 layout 类型 ） ，   第一个 参数 还 字符串 ， 显示 文字   。",
            "tags":"pyqt5",
            "url":"articles/pyqt5-layout.html"
        },
        {
            "title":"pyqt5编程之-第一个例子",
            "text":"第一个 例子   窗口   【 beginning - first01 】   import   sys     PyQt5 . QtGui   import   *     PyQt5 . QtWidgets   import   *   class   MyWidget   (   QWidget   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )     .   setGeometry   (   0   ,   0   ,   800   ,   600   )   # 坐标 0   0   大小 800   600     .   setWindowTitle   (   ' myapp '   )   myapp   =   QApplication   (   sys   .   argv   )   mywidget   =   MyWidget   ( )   mywidget   .   show   ( )   sys   .   exit   (   myapp   .   exec _   ( ) )   导入 sys 宏包 ， 这是 接受 sys . argv 参数 。   接下来 定义 MyWidget 类 ， 继承 QWidget 类 。 QWidget 类   setGeometry   方法 调整 窗口 左 顶点 坐标 位置 窗口 大小 。     setWindowTitle   方法 设置 窗口 程序 标题 ， 简单 设置 \" myapp \" 。   窗口 程序 都 创建 一个 QApplication 类 实例 ， myapp 。 接下来 创建 QWidget 类 实例 mywidget ， 调用 mywidget 方法   show   显示 窗体 。   系统 退出 调用 myapp 实例   exec _   方法 。   加上 图标   【 beginning - first02 】   import   sys     PyQt5 . QtGui   import   QIcon     PyQt5 . QtWidgets   import   QWidget   ,   QApplication   class   MyWidget   (   QWidget   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )     .   resize   (   800   ,   600   )     .   setWindowTitle   (   ' myapp '   )     .   setWindowIcon   (   QIcon   \\   (   ' icons / myapp . ico '   ) )   myapp   =   QApplication   (   sys   .   argv   )   mywidget   =   MyWidget   ( )   mywidget   .   show   ( )   sys   .   exit   (   myapp   .   exec _   ( ) )   程序 程序 增加 一个   setWindowIcon   方法 ， 方法 调用   QtGui . QIcon   方法 ， 图标 存放 路径 ， 相对路径 。 运行 例子 ， 请 随便 弄个 图标 文件 。   简单 见 程序 QWidget 类   resize   方法 设置 窗体 大小 。   弹 出 提示信息   【 beginning - first03 】   import   sys     PyQt5 . QtGui   import   *     PyQt5 . QtWidgets   import   *   class   MyWidget   (   QWidget   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )     .   resize   (   800   ,   600   )     .   setWindowTitle   (   ' myapp '   )     .   setWindowIcon   (   QIcon   \\   (   ' icons / myapp . ico '   ) )     .   setToolTip   (   ' 看 看 &# 94 ; _&# 94 ; '   )   QToolTip   .   setFont   (   QFont   \\   (   ' 微软 雅黑 '   ,   12   ) )   myapp   =   QApplication   (   sys   .   argv   )   mywidget   =   MyWidget   ( )   mywidget   .   show   ( )   sys   .   exit   (   myapp   .   exec _   ( ) )   段 代码 代码 在于 MyWidget 类 初始 函数 新 两条 命令 。   setToolTip   方法 设置 显示 弹出 提示 文本 内容 ， 调用 QToolTip 类   setFont   方法 设置 字体 字号 ， 不 太 随便 设置 系统 字体 微软 雅黑 。   鼠标 停放 窗口 上 一会儿 会弹 出 一小 段 提示 文字 。   关闭 窗体 时 询问   【 beginning - first04 】   import   sys     PyQt5 . QtGui   import   *     PyQt5 . QtWidgets   import   *   class   MyWidget   (   QWidget   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )     .   resize   (   800   ,   600   )     .   setWindowTitle   (   ' myapp '   )     .   setWindowIcon   (   QIcon   \\   (   ' icons / myapp . ico '   ) )     .   setToolTip   (   ' 看 看 &# 94 ; _&# 94 ; '   )   QToolTip   .   setFont   (   QFont   \\   (   ' 微软 雅黑 '   ,   12   ) )   def   closeEvent   (     ,   event   ) :   # 定义 colseEvent   reply   =   QMessageBox   .   question   \\   (     ,   ' 信息 '   ,   \" 退出 ？ \"   ,   QMessageBox   .   Yes   ,   QMessageBox   .   No   )     reply   = =   QMessageBox   .   Yes   :   event   .   accept   ( )     :   event   .   ignore   ( )   myapp   =   QApplication   (   sys   .   argv   )   mywidget   =   MyWidget   ( )   mywidget   .   show   ( )   sys   .   exit   (   myapp   .   exec _   ( ) )   段 代码 代码 定义   colseEvent   事件 。 段 代码 核心 QtGui 类 QMessageBox 类 question 方法 ， 方法 将会弹 出 一个 询问 窗体 。 方法 接受 四个 参数 ： 第一个 参数 窗体 所属 母体 ， 实例 mywidget ； 第二个 参数 弹出 窗体 标题 ； 第三个 参数 一个 标准 button ； 第四个 参数 一个 标准 button ， 默认 （ enter 选定 ） button 。 方法 返回 点击 标准 button 标识符 ， 标准   QMessageBox . Yes   ， 执行 event accept 方法 。   屏幕 居中 显示 窗体   【 beginning - first05 】   import   sys     PyQt5 . QtGui   import   *     PyQt5 . QtWidgets   import   *   class   MyWidget   (   QWidget   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )     .   resize   (   800   ,   600   )     .   center   ( )     .   setWindowTitle   (   ' myapp '   )     .   setWindowIcon   (   QIcon   \\   (   ' icons / myapp . ico '   ) )     .   setToolTip   (   ' 看 看 &# 94 ; _&# 94 ; '   )   QToolTip   .   setFont   (   QFont   \\   (   ' 微软 雅黑 '   ,   12   ) )   def   closeEvent   (     ,   event   ) :   # 定义 colseEvent   reply   =   QMessageBox   .   question   \\   (     ,   ' 信息 '   ,   \" 退出 ？ \"   ,   QMessageBox   .   Yes   ,   QMessageBox   .   No   )     reply   = =   QMessageBox   .   Yes   :   event   .   accept   ( )     :   event   .   ignore   ( )   # center   method   def   center   (     ) :   screen   =   QDesktopWidget   ( )   .   screenGeometry   ( )   size   =     .   geometry   ( )     .   move   ( (   screen   .   width   ( )   -   size   .   width   ( ) )   /   2   ,   \\   (   screen   .   height   ( )   -   size   .   height   ( ) )   /   2   )   myapp   =   QApplication   (   sys   .   argv   )   mywidget   =   MyWidget   ( )   mywidget   .   show   ( )   sys   .   exit   (   myapp   .   exec _   ( ) )   例子 相比 改动 新建 一个   center   方法 ， 接受 一个 实例 ， mywidget 。 实例 窗口 具体位置 做 调整 。   QDesktopWidget 类   screenGeometry   方法 返回 一个 量 ， 量 width 属性 屏幕 宽度 （ pt 像素 计 ， 1366 × 768 ， 宽度 1366 ） ， 量 height 属性 屏幕 高度 。   QWidget 类   geometry   方法 返回 一个 量 ， 量 width 窗体 宽度 ， 量 height 属性 窗体 高度 。   调用 QWidget 类 move 方法 ， mywidget 实例 作用 。 move 方法 X ， Y 是从 屏幕 坐标 原点   ( 0 , 0 )   计算 。 第一个 参数 X 右 宽度 ， Y 向下 高度 。   函数 作用 效果 窗体 居中 显示 。   QMainWindow 类   QtGui . QMainWindow 类 提供 应用程序 主 窗口 ， 创建 一个 经典 拥有 状态栏 、 工具栏 菜单栏 应用程序 骨架 。 （ QWidget 类 ， 换成 QMainWindow 类 。 ）   第一个 例子 都 QtGui . QWidget 类 创建 一个 窗体 。 QWidget QMainWindow 两个 类 区别   网站   结论 ： QWdget 类 Qt 中是 可画类 基础 （ 窗体 基础 。 ）   基于 QWidget 类 都 独立 窗体 显示 不 母体 （ parent ） 。   QMainWindow 类 针对 主 窗体 需求 设计 ， 预定 义 菜单栏 状态栏 widget （ 窗口 小 部件 ）   。 继承 QWidget ， 谈及 属性 修改 都 。 代码 中 QWidget 类 换成 QMainWindow 类 。   【 beginning - first06 】   import   sys     PyQt5 . QtGui   import   *     PyQt5 . QtWidgets   import   *   class   MyWidget   (   QMainWindow   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )     .   resize   (   800   ,   600   )     .   center   ( )     .   setWindowTitle   (   ' myapp '   )     .   setWindowIcon   (   QIcon   \\   (   ' icons / myapp . ico '   ) )     .   setToolTip   (   ' 看 看 &# 94 ; _&# 94 ; '   )   QToolTip   .   setFont   (   QFont   \\   (   ' 微软 雅黑 '   ,   12   ) )   def   closeEvent   (     ,   event   ) :   # 定义 colseEvent   reply   =   QMessageBox   .   question   \\   (     ,   ' 信息 '   ,   \" 退出 ？ \"   ,   QMessageBox   .   Yes   ,   QMessageBox   .   No   )     reply   = =   QMessageBox   .   Yes   :   event   .   accept   ( )     :   event   .   ignore   ( )   # center   method   def   center   (     ) :   screen   =   QDesktopWidget   ( )   .   screenGeometry   ( )   size   =     .   geometry   ( )     .   move   ( (   screen   .   width   ( )   -   size   .   width   ( ) )   /   2   ,   \\   (   screen   .   height   ( )   -   size   .   height   ( ) )   /   2   )   myapp   =   QApplication   (   sys   .   argv   )   mywidget   =   MyWidget   ( )   mywidget   .   show   ( )   sys   .   exit   (   myapp   .   exec _   ( ) )   程序运行 情况 ， 加点 东西 进去 。   加上 状态栏   【 beginning - first07 】   import   sys     PyQt5 . QtGui   import   *     PyQt5 . QtWidgets   import   *   class   MainWindow   (   QMainWindow   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )     .   resize   (   800   ,   600   )     .   center   ( )     .   setWindowTitle   (   ' myapp '   )     .   setWindowIcon   (   QIcon   \\   (   ' icons / myapp . ico '   ) )     .   setToolTip   (   ' 看 看 &# 94 ; _&# 94 ; '   )   QToolTip   .   setFont   (   QFont   \\   (   ' 微软 雅黑 '   ,   12   ) )   def   closeEvent   (     ,   event   ) :   # 定义 colseEvent   reply   =   QMessageBox   .   question   \\   (     ,   ' 信息 '   ,   \" 退出 ？ \"   ,   QMessageBox   .   Yes   ,   QMessageBox   .   No   )     reply   = =   QMessageBox   .   Yes   :   event   .   accept   ( )     :   event   .   ignore   ( )   # center   method   def   center   (     ) :   screen   =   QDesktopWidget   ( )   .   screenGeometry   ( )   size   =     .   geometry   ( )     .   move   ( (   screen   .   width   ( )   -   size   .   width   ( ) )   /   2   ,   \\   (   screen   .   height   ( )   -   size   .   height   ( ) )   /   2   )   myapp   =   QApplication   (   sys   .   argv   )   mainwindow   =   MainWindow   ( )   mainwindow   .   show   ( )   mainwindow   .   statusBar   ( )   .   showMessage   (   ' 程序 已 就绪 ... '   )   sys   .   exit   (   myapp   .   exec _   ( ) )   程序 区别 在于 倒数 第二行 ， 调用 mainwindow QMainWindow 类 生成 实例   statusBar   方法 生成 一个 QStatusBar 对象 ， 调用 QStatusBar 类   showMessage   方法 显示 一段 文字 。   希望 段 代码   __ init __   方法 ， 过程 描述 类似 。   加上 菜单栏   【 beginning - first08 】   import   sys     PyQt5 . QtGui   import   *     PyQt5 . QtWidgets   import   *   class   MainWindow   (   QMainWindow   ) :   def   __ init __   (     ) :   super   ( )   .   __ init __   ( )     .   initUI   ( )   def   initUI   (     ) :     .   resize   (   800   ,   600   )     .   center   ( )     .   setWindowTitle   (   ' myapp '   )     .   setWindowIcon   (   QIcon   \\   (   ' icons / myapp . ico '   ) )   # 菜单栏   menu _ control   =     .   menuBar   ( )   .   addMenu   (   ' Contorl '   )   act _ quit   =   menu _ control   .   addAction   (   ' quit '   )   act _ quit   .   triggered   .   connect   (     .   close   )   menu _   =     .   menuBar   ( )   .   addMenu   (   ' Help '   )   act _   =   menu _   .   addAction   (   ' ... '   )   act _   .   triggered   .   connect   (     .     )   act _ aboutqt   =   menu _   .   addAction   (   ' aboutqt '   )   act _ aboutqt   .   triggered   .   connect   (     .   aboutqt   )   # 状态栏     .   statusBar   ( )   .   showMessage   (   ' 程序 已 就绪 ... '   )     .   show   ( )   def     (     ) :   QMessageBox   .     (     ,   \"     software \"   ,   \" wise   system \"   )   def   aboutqt   (     ) :   QMessageBox   .   aboutQt   (     )   def   closeEvent   (     ,   event   ) :   # 定义 colseEvent   reply   =   QMessageBox   .   question   \\   (     ,   ' 信息 '   ,   \" 退出 ？ \"   ,   QMessageBox   .   Yes   ,   QMessageBox   .   No   )     reply   = =   QMessageBox   .   Yes   :   event   .   accept   ( )     :   event   .   ignore   ( )   # center   method   def   center   (     ) :   screen   =   QDesktopWidget   ( )   .   screenGeometry   ( )   size   =     .   geometry   ( )     .   move   ( (   screen   .   width   ( )   -   size   .   width   ( ) )   /   2   ,   \\   (   screen   .   height   ( )   -   size   .   height   ( ) )   /   2   )   myapp   =   QApplication   (   sys   .   argv   )   mainwindow   =   MainWindow   ( )   sys   .   exit   (   myapp   .   exec _   ( ) )   讨论 加上 状态栏 类似 ， QMainWindow 类   menuBar   方法 一个 菜单栏 对象 。 菜单栏 对象   addMenu   方法 创建 一个 新 菜单 对象 （ QMenu 类 ） ， addMenu 方法 内容 新建 菜单 显示 文本 。   菜单 对象 加上 动作 ， 调用 菜单 对象   addAction   方法 ， menuBar 创建 一个 菜单栏 对象 ， addMenu 方法 创建 一个 菜单 ， 返回 一个 菜单 对象 ， 菜单 对象 addAction 方法 ， 方法 菜单 添加 一个 动作 ， 或者说 一个 item 一个 内容 ， addAction 返回 一个 动作 对象 ， 动作 对象 信号 － 槽 机制 连接 ， 一个 函数 连接起来 。   动作 对象 ， 菜单 下 拉 选项 ， 鼠标 点击 ， 将会 触发   triggered   信号 ， connect 方法 连接 槽 上 （ 定义 函数 ） ， 将会 触发 函数 执行 。 信号 － 槽 机制 详细 。   信号 － 槽 机制   GUI 程序 都 引入 一种 事件 信号 机制 ， ， 简单 来说 一个 循环 程序 ， 循环 程序 等到 时刻 程序 会 自动 做 事情 刷新 程序界面 ， 扫描 键盘 鼠标 ， 用户 点击 鼠标 键盘 ， 它会 接受 信号 做出 。   猜到 ，   close   函数 退出 循环 程序 。 调用 主程序   exec _   方法 ， 开启 循环 程序 。   pyqt4 旧 信号 － 槽 连接 语句 忽略 ， 值得 提醒 pyqt5 不 支持 旧 信号 － 槽 连接 语句 。 新 语句 。   act _ exit   .   triggered   .   connect   (     .   close   )   新 信号 － 槽 机制 语句 变得 更 精简 更 易懂 。 过程 所述 ， 对象 发出 信号 ， connect 信号 槽 （ 定义 函数 ） 连接起来 一个 反射弧 。   槽 主 窗口 实例 close 方法 ， 主 窗口 自带 函数 。   aboutqt 函数 。 读者 不 懂 请 翻阅 QMessageBox 类 静态方法       aboutqt   。",
            "tags":"pyqt5",
            "url":"articles/pyqt5-lesson-one.html"
        },
        {
            "title":"pyqt5编程之-资源文件管理",
            "text":"资源 文件 管理   资源管理   pyqt 都 qrc 文件 管理软件 内部 资源 文件 （ 图标 文件 ， 翻译 文件 ） 。 qrc 文件 编写 格式 ：   < ! DOCTYPE   RCC >   < RCC   version =   \" 1.0 \"   >   < qresource >   < file >   images / copy . png   < / file >   < / qresource >   < / RCC >   qrc 编写 很 简单 ， 手工 编写 。 代码 第三行 images / copy . png qrc 文件 所在 目录 下 images 文件夹 ， copy . png 文件 。   qrc 文件 编写 好 运行 命令   pyrcc5   wise . qrc   - o   wise _ rc . py   将会 输出 一个   wise _ rc . py   文件 ， 资源 ，   import   wise _ rc   引用 路径   : / images / copy . png   ， 图标 文件 。   推荐 一个 项目 资源 文件 都 一个 qrc 文件 管理 。",
            "tags":"pyqt5",
            "url":"articles/pyqt5-resources.html"
        },
        {
            "title":"pyqt5编程之-配置文件管理",
            "text":"配置文件 管理   pyqt5 里 QtCore 子 模块 里 提供   QSettings   类来 管理软件 配置文件 。   QSettings 构造函数   先 推荐 OrganizationName ApplicationName 设置 好 。   app   .   setOrganizationName   (   \" Wise \"   )   app   .   setApplicationName   (   \" wise \"   )   接下来 构建 一个 QSettings 对象 。   QSettings   (   parent   )   设置 好 组织 名 软件 名 ， 上 简单   QSettings ( )   创建 一个 配置文件 对象 ， 不带 参数 ， parent 取 默认值 ， format 取 默认值   QSettings . NativeFormat   ， scope 取 默认值   QSettings . UserScope   。 scope QSettings . SystemScope ， 软件 配置文件 权限 ， 先 略过 ， 默认 UserScope 。   fromat 取 默认 NativeFormat 软件 配置文件 安装 目录 ：   linux 系统 ， 例子 配置文件 ：   / home / wanze / . config / Wise / wise . conf   windows 系统 ， 例子 ：   HKEY _ CURRENT _ USER \\ Software \\ Wise \\ wise   windows 下 配置 放在 注册表 。   IniFormat   希望 配置文件 都 ini 形式 存储 ， 格式 初始化 配置文件 对象 ：   . settings   =   QSettings ( QSettings . IniFormat , QSettings . UserScope , \" Wise \" , \" wise \" )   配置文件 ：   / home / wanze / . config / Wise / wise . ini   。 linux 系统 情况 ， windows 系统 官方 文档 给出 ：   % APPDATA% \\ Wise \\ wise . ini   ，   % APPDATA%     C : \\ Documents     Settings \\ * User   Name * \\ Application   Data   调用   . settings . fileName ( )   查看 配置文件 对象 路径 所在 。   推荐 配置文件 mainwindow 实例 属性 如上 . settings ， 子 窗体 都 调用 配置文件 对象 。   ini 文件 存放 DIY   希望 ini 文件 放在 喜欢 地方 ， 配置文件 构造函数 第三种 形式 ：   QSettings ( \" wise . ini \" , QSettings . IniFormat )   第一个 参数 配置 文件名 ， 第二个 参数 format 。 上 相对路径 是从 软件 运行 时 文件夹 算 。   调用   settings . fileName ( )   配置文件 所在 。   ini 文件 注意事项   ini 文件 大小写 不 敏感 ， 尽量避免 两个 变量名 相近 大小写 。   \" \\ \" \" / \" 。 windows 里 \\ 会 转换成 / ， \" / \" 配置文件 中 分组 关系 。   存值 读值   配置文件 对象 建立 很 存放 值 读 取值 。 存值   setValue   方法 ， 取值     方法 。 所示 ：   settings . setValue ( \" editor / wrapMargin \" ,   68 )   margin   =   . settings . ( \" editor / wrapMargin \" )   setValue 键 配置文件 对象 中 ， 更新 值 ， 修改 生效 ，   sync   方法 ， sync 方法 不 接受 参数 ， 同步 配置文件 中 更新 。     方法 第一个 参数 \" 键 \" ， 第二个 参数 选值 ， 没 找到 键 ， 将会 返回 值 。 写 上 ， 配置文件 不 ， 会 发生 读取 错误 。   方法 ：   :   接受 一个 \" 键 \" ， 字符串 对象 ， 返回 bool 值 ， 键 。   remove :   接受 一个 \" 键 \" ， 移除 该键 。   allkeys :   不 接受 参数 ， 返回 \" 键 \" 。   clear :   不 接受 参数 ， 清除 \" 键 \" 。   群组 管理   settings . setValue ( \" editor / wrapMargin \" ,   68 )   上 例子 所示 \" / \" 数据结构 中 分组 ， 很多 值 都 前缀 ， 同属 一组 ， beginGroup 方法 endGroup 方法 管理 。 所示 ：   settings . beginGroup ( \" editor \" )   settings . setValue ( \" wrapMargin \" ,   68 )   settings . engGroup ( )",
            "tags":"pyqt5",
            "url":"articles/pyqt5-settings.html"
        },
        {
            "title":"pyqt5编程之-快捷键管理",
            "text":"快捷键 Tab 键 管理   创建 ui 文件 Action 快捷键 设置 好 。   伙伴关系   QLabel setBuddy 方法 关联 输入 窗体 。 QLabel 一个 快捷键 ， 下 快捷键 ， 输入 焦点 就会 转到 QLabel 伙伴 输入 窗体 上 。   快捷键   QShortcut 类   文本 前用 & 会 引入 Alt + w 快捷键 。   QAction 初始化   QAction 方法   QKeySequence   QKeySequence   类 pyqt4 pyqt5 中 来自 QtGui 子 模块 ， 快捷键 解决方案 。 引用   QKeySequence . Open   快捷键 Ctrl + O 。 可用 构造函数 所示 ：   QKeySequence ( QKeySequence . Print )   QKeySequence ( tr ( \" Ctrl + P \" ) )   QKeySequence ( tr ( \" Ctrl + p \" ) )   QKeySequence ( Qt . CTRL   +   Qt . Key _ P )   不 太 喜欢 第一种 表达方式 ， 软件 都 打印 操作 ， 打印 快捷键 之间 逻辑联系 ， 程序员 经验 ， 这是 不小 记忆负担 。 喜欢 第四种 写法 ， 看上去 意义 清晰 ， Qt 来自 QtCore 子 模块 。   字母 按键 类似   Qt . Key _ W   形式 ， Shift 按键 Qt . SHIFT ， Meta 按键 Qt . META ， CTRL 按键   Qt . CTRL   ， ALT 按键   Qt . ALT   。",
            "tags":"pyqt5",
            "url":"articles/pyqt5-shortcut.html"
        },
        {
            "title":"pyqt5编程之-信号-槽详解",
            "text":"信号 － 槽 详解   pyqt5 只 支持 新式 信号 － 槽 机制 ， 新式 信号 － 槽 机制 详细 。   信号 ( singal ) 连接 无数 多个 槽 ( slot ) ， 连接 槽 ， 信号 连接 信号 。 所述 ， 连接 语句 形式 ：   . singal . connect ( slot )   。 比如说 按钮 最 常见 内置 信号   triggered   ， 槽 实际上 函数 ， 主 窗体   . close   方法 。   信号   QObject   一个 属性 ， pyqt 窗体 很多 内置 信号 ， 定义 信号 ， 再 提及 。 信号 还 没 槽 连接起来 一个 属性 ，   connect   方法 连接起来 ， 信号 － 槽 机制 建立 。 类似 信号   disconnect   方法   emit   方法 。 disconnect 断开 信号 － 槽 机制 ， emit 激活 信号 。   pyqt 很多 内置 信号 内置 槽 GUI 事件驱动 细节 隐藏 ， 定义 信号 槽 . singal . connect ( slot ) 简洁 形式 工作 感到 困惑 。 先 简要地 介绍 。   信号 都 类 一个 属性 ， 新 信号 继承 QObject ，   PyQt5 . QtCore . pyqtSingal   方法 创建 ， 方法 接受 参数 中 最 types 类型 ， int ， bool ， 这是 信号 传递 参数 类型 ， 传递 参数值 emit 方法 。 槽 实际上 封装 函数 ， 函数 接受 参数 不 接受 参数 ， 参数 值 传 进来 emit 方法 执行 ， . singal . connect ( slot ) 形式 信号 槽 连接起来 ， 信号 ， 信号 类 自带 连接 方法 ， 连接 slot 函数 上 ， 隐藏 一个 细节 emit 方法 ， 比如说 定义 一个 新 信号 ， 点击 屏幕 x , y 坐标 发送 ， 内置 信号 － 槽 机制 都 ， 定义 信号 槽 ，   pyqtSingal ( int , int )   ， 发送给 func ( x , y ) ， x y 值 emit ( x , y ) 发送 。 发送 ， 发送 x , y 值 获取 ， 一个 信号 － 槽 机制 细节 。   请 看 例子 ：   【 singal - slot / age 】   import   sys     PyQt5 . QtWidgets   import   QHBoxLayout   ,   QSlider   ,   QSpinBox   ,   QApplication   ,   QWidget     PyQt5 . QtCore   import   Qt   app   =   QApplication   (   sys   .   argv   )   window   =   QWidget   ( )   window   .   setWindowTitle   (   \" enter     age \"   )   spinBox   =   QSpinBox   ( )   slider   =   QSlider   (   Qt   .   Horizontal   )   spinBox   .   setRange   (   0   ,   130   )   slider   .   setRange   (   0   ,   130   )   spinBox   .   valueChanged   .   connect   (   slider   .   setValue   )   slider   .   valueChanged   .   connect   (   spinBox   .   setValue   )   spinBox   .   setValue   (   35   )   layout   =   QHBoxLayout   ( )   layout   .   addWidget   (   spinBox   )   layout   .   addWidget   (   slider   )   window   .   setLayout   (   layout   )   window   .   show   ( )   sys   .   exit   (   app   .   exec _   ( ) )   16 行将 spinBox   valueChanged   信号 slider   setValue   槽 连接起来 ， QSpinBox 内置   valueChanged   信号 发射 自带 一个 参数 改变 后 值 ， 值 传递 QSlider 内置 槽   setValue   ， slider 值 设置 新值 。 17 行 slider 值 发生 改变 ， 会 发送 valueChanged 信号 ， 传递 spinBox ， 执行 内置 槽 setValue ， 值 原值 ， spinBox 内 值 发生 改变 ， 程序 陷入 死循环 。   自定义 信号   正 如前所述 自定义 信号   PyQt5 . QtCore . pyqtSingal   方法 创建 ， 格式 ：     PyQt5 . QtCore   import   QObject   ,   pyqtSignal   class   Foo   (   QObject   ) :   closed   =   pyqtSignal   ( )   range _ changed   =   pyqtSignal   (   int   ,   int   ,     =   ' rangeChanged '   )   Foo 类 自定义 一个 新 信号 ， GObject 子类 。 定义 一个 closed 信号 ， 接受 参数 。 range _ changed 信号 ， 接受 一个 int 一个 int 类型 ， 信号 名字 rangeChanged ， 选项 一个 可选项 ， 不填 信号 名字 range _ changed 。   信号 还 overload ， 不太 适合 python 。   信号 定义 为类 属性 ， GObject 子类 。   自定义 槽   python 格式 定义 函数 自定义 槽 。 推荐 pyqt 槽 装饰器 定义 槽 。     PyQt4 . QtCore   import   pyqtSlot   # 1   @ pyqtSlot   ( )   def   foo   (     ) :   pass   # 2   @ pyqtSlot   (   int   ,   str   )   def   foo   (     ,   arg1   ,   arg2   ) :   pass   # 3   @ pyqtSlot   (   int   ,     =   ' bar '   )   def   foo   (     ,   arg1   ) :   pass   # 4   @ pyqtSlot   (   int   ,   result   =   int   )   def   foo   (     ,   arg1   ) :   pass   # 5   @ pyqtSlot   (   int   ,   QObject   )   def   foo   (     ,   arg1   ) :   pass   第一个 例子 定义 名叫 foo 一个 槽 ， 不 接受 参数 。 第二个 槽 接受 一个 int 类型 值 str 类型 值 。 第三个 槽 名字 bar ， 接受 一个 int 类型 值 ， 第四个 槽 接受 一个 int 类型 值 ， 返回 一个 int 类型 值 ， 第五个 操作 接受 一个 int 类型 值 一个 GObject 类型 值 ， 此处 暗指 pyqt 窗体 类型 都 参数 传递 。   @ pyqtSlot   (   int   )   @ pyqtSlot   (   ' QString '   )   def   valueChanged   (     ,     ) :   pass   定义 两个 槽 ， 名字 都 valueChanged ， 一个 接受 int 类型 ， 一个 接受 QString 类型 ， 信号 overload ， python 中 不 推荐 ， 明晰 一点 好 。   发射 信号   信号 对象 emit 方法 用来 发射 信号 ， 信号 对象 disconnect 方法 断开 信号 槽 连接 。   一个 信号 连接 多个 槽 ， 多个 信号 连接 同一个 槽 ， 一个 信号 一个 信号 相连接 。   一个 例子 详解 建 信号 自建槽 建立 发射 机制 情况 。   【 singal - slot / FindDialog 】     PyQt5 . QtWidgets   import   QDialog   ,   QLabel   ,   QLineEdit   ,   QCheckBox   ,   QPushButton   ,   QHBoxLayout   ,   QVBoxLayout   ,   QApplication     PyQt5 . QtCore   import   Qt   ,   pyqtSignal   ,   QObject   ,   pyqtSlot   class   FindDialog   (   QDialog   ) :   findNext   =   pyqtSignal   (   str   ,   Qt   .   CaseSensitivity   )   findPrevious   =   pyqtSignal   (   str   ,   Qt   .   CaseSensitivity   )   def   __ init __   (     ,   parent   =   None   ) :   super   ( )   .   __ init __   (   parent   )   label   =   QLabel   (     .   tr   (   \" Find   & : \"   ) )     .   lineEdit   =   QLineEdit   ( )   label   .   setBuddy   (     .   lineEdit   )     .   caseCheckBox   =   QCheckBox   (     .   tr   (   \" Match   & case \"   ) )     .   backwardCheckBox   =   QCheckBox   (     .   tr   (   \" Search   & backward \"   ) )     .   findButton   =   QPushButton   (     .   tr   (   \" & Find \"   ) )     .   findButton   .   setDefault   (   True   )     .   findButton   .   setEnabled   (   False   )   closeButton   =   QPushButton   (     .   tr   (   \" Close \"   ) )     .   lineEdit   .   textChanged   .   connect   (     .   enableFindButton   )     .   findButton   .   clicked   .   connect   (     .   findClicked   )   closeButton   .   clicked   .   connect   (     .   close   )   topLeftLayout   =   QHBoxLayout   ( )   topLeftLayout   .   addWidget   (   label   )   topLeftLayout   .   addWidget   (     .   lineEdit   )   leftLayout   =   QVBoxLayout   ( )   leftLayout   .   addLayout   (   topLeftLayout   )   leftLayout   .   addWidget   (     .   caseCheckBox   )   leftLayout   .   addWidget   (     .   backwardCheckBox   )   rightLayout   =   QVBoxLayout   ( )   rightLayout   .   addWidget   (     .   findButton   )   rightLayout   .   addWidget   (   closeButton   )   rightLayout   .   addStretch   ( )   mainLayout   =   QHBoxLayout   ( )   mainLayout   .   addLayout   (   leftLayout   )   mainLayout   .   addLayout   (   rightLayout   )     .   setLayout   (   mainLayout   )     .   setWindowTitle   (     .   tr   (   \" Find \"   ) )     .   setFixedHeight   (     .   sizeHint   ( )   .   height   ( ) )   def   enableFindButton   (     ,   text   ) :     .   findButton   .   setEnabled   (   bool   (   text   ) )   @ pyqtSlot   ( )   def   findClicked   (     ) :   text   =     .   lineEdit   .   text   ( )       .   caseCheckBox   .   isChecked   ( ) :   cs   =   Qt   .   CaseSensitive     :   cs   =   Qt   .   CaseInsensitive       .   backwardCheckBox   .   isChecked   ( ) :     .   findPrevious   .   emit   (   text   ,   cs   )     :     .   findNext   .   emit   (   text   ,   cs   )     __ __   = =   ' __ main __ '   :   import   sys   app   =   QApplication   (   sys   .   argv   )   findDialog   =   FindDialog   ( )   def   find   (   text   ,   cs   ) :   print   (   ' find : '   ,   text   ,   ' cs '   ,   cs   )   def   findp   (   text   ,   cs   ) :   print   (   ' findp : '   ,   text   ,   ' cs '   ,   cs   )   findDialog   .   findNext   .   connect   (   find   )   findDialog   .   findPrevious   .   connect   (   findp   )   findDialog   .   show   ( )   sys   .   exit   (   app   .   exec _   ( ) )   自建 信号 类 属性 ， 类 QObject 子类 ， QDialog 继承 QObject 。 请 9 行 10 行 ， pyqtSignal 函数 来自 建 信号 ， 信号 两个 参数 ， 一个 str 字符 变量 ， 一个 Qt . CaseSensitivity 枚举 值 。 假设 输入 文字 ， 点击 Find 按钮 ， 请 26 行 ， 点击 执行 findClicked 槽 ， 按钮 clicked 信号 不带 参数 。 定义 findClicked 槽 （ 简单 函数 ） 参数 。   findClicked 槽 53 - 57 行 QLineEdit text 值 cs 大小写 检查 状态 。 向前 后 勾选来 接下来 发送 信号 。 findNext 信号 调用 emit 方法 ， 两个 参数 传递 。 findNext 正是 自定义 信号 ， 正是 两个 参数 类型 。   再 简单 做 一个 测试程序 ， 70 - 73 行 定义 两个 简单 函数 ， 75 ， 76 行将 findDialog 两个 信号 两个 函数 连接起来 。 点击 Find 按钮 ， 执行 findClicked 槽 ， 假设 发送 findNext 信号 （ 附带 两个 参数 ） ， 信号 find 函数 相连 （ 参数传递 find 函数 ） ， 执行 find 函数 。 过程 。   信号 － 槽 机制 反思   接下来 Qt   designer 一章 会 详细 讨论 ， Qt   designer 设计 修改 ui 文件 — — 程序 中 大部分 静态 视图 元素 ， 目的 倒 快速 GUI 程序 编写 ， 写 代码 挺快 ， 目的 代码 复用 。 养成 习惯 ， 强迫 程序 中 静态 视图 元素 都 ui 文件 ， 增强 ui 文件 复用 性 ， 增强 剩下 python 代码 复用 性 。 很大 一部分 讨论 信号 － 槽 机制 功劳 。   自定义 类 加载 好 ui 文件 ， 该类 代码 实际上 剩下 两个 工作 ：   窗体 信号 槽 都 编写 好   母 窗体 和子 窗体 信号 － 槽 接口 写 好 。   程序 用户 互动 接口 大多 最 顶层 ， 用户 喜欢 菜单栏 找到 程序 控制 ， 控制 函数 放在 都 放在 母 窗体 ， 程序 代码 复用 性会 降到 最低 ， 函数 移到 视图 窗体 最 紧密 窗体 类中 ， 代码 复用 性会 大大提高 ， 槽 函数 编写 会 简单 很多 。 组织 信号 槽 （ 函数 ） ？ 提出 组织学 上 抽象 原则 ：   最小 组织 原则 ， 凡是 小 组织 自我实现 功能 绝不 上 传到 更大 一级 组织 中 去 。   大 组织 小 组织 元素 引用 ， 采用 明文 引用 原则 。 比如说 母 窗体 中有 一个 小窗 体有 一个 编辑器 ， 母 窗体 想要 操控 编辑器 执行 剪切 操作 ， 采用 明文 引用 ， . textEdit . cut 。   小 组织 对大 组织 属性 引用 采用 信号 激活 原则 ， 比如说 编辑器 发生 内容 修改 ， 自定义 一个 信号 ， 信号 标题 修改 信号 ， 信号 触发 母 窗体 方法 ， 修改 母 窗体 标题 目的 。 母 窗体 中 ， 只 声明 小 组织 信号 大 组织 方法 连接起来 即可 。   引用 信号 发射 对象   sender   方法 来自 GObject ， Qt 里 窗体 对象 都 。 用法 槽 ， 调用   . sender ( )   ， 返回 一个 发射 信号 调用 槽 对象 。",
            "tags":"pyqt5",
            "url":"articles/pyqt5-singal-slot.html"
        },
        {
            "title":"pyqt5编程之-ui文件管理",
            "text":"ui 文件 管理   利用   Qt   designer   设计 输出   ui   界面 文件 ，   PyQt5 . uic . loadUi   加载 进来 ， ui 文件 利用 pypi 资源管理 机制 ， 一种 解决方案 ， pythonic 。   推荐   pyuic5   输出 ui 文件 py 文件 。 大体 利用 命令行 ：   pyuic5   {   filename   }   .   ui   -   o   {   filename   }   _ ui   .   py   - -   import   -     =   {   project   }   ' . format ( filename = filename ,   project   =   PROJECT   )     - - import -   选项 影响 输出 py 文件 资源 引入 语句 ， 默认   import   main _ rc   ， 设置 选项 更 改为 ：     project   import   main _ rc   利用 输出 py 文件 ui 类 。     . uis . main _ ui   import   Ui _ MainWindow   class   MainWindow   (   QMainWindow   ) :   def   __ init __   (     ,   parent   =   None   ,   *   args   ) :   super   ( )   .   __ init __   (   parent   ,   *   args   )   ###   setup   ui     .   mainUi   =   Ui _ MainWindow   ( )     .   mainUi   .   setupUi   (     )   引入 官方 教程 几种 写法 ， 写法 中   setupUi   函数 跟着 窗体 parent ， 挂 窗体 上 ， 窗体 挂 母 窗体 即可 。",
            "tags":"pyqt5",
            "url":"articles/pyqt5-ui-file.html"
        },
        {
            "title":"前端开发之-bootstrap",
            "text":"bootstrap   文档 基于 bootstrap   v4 重写 ， 文档 不 求全 ， 大体 点到为止 讲解 ， 读者 简单 即可 ， 练手 学习 。   安装   本文 加载 ：   < link   rel =   \" stylesheet \"   href =   \" https : / / cdn . bootcss . / bootstrap / 4.0 . 0 - beta.2 / css / bootstrap . min . css \"   integrity =   \" sha384 - PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb \"   crossorigin =   \" anonymous \"   >   < script   src =   \" https : / / cdn . bootcss . / jquery / 3.2 . 1 / jquery . slim . min . js \"   integrity =   \" sha384 - KJ3o2DKtIkvYIK3UENzmM7KCkRr / rE9 / Qpg6aAZGJwFDMVNA / GpGFF93hXpG5KkN \"   crossorigin =   \" anonymous \"   > < / script >   < script   src =   \" https : / / cdn . bootcss . / popper . js / 1.12 . 9 / umd / popper . min . js \"   integrity =   \" sha384 - ApNbgh9B + Y1QKtv3Rn7W3mgPxhU9K / ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q \"   crossorigin =   \" anonymous \"   > < / script >   < script   src =   \" https : / / cdn . bootcss . / bootstrap / 4.0 . 0 - beta.2 / js / bootstrap . min . js \"   integrity =   \" sha384 - alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ \"   crossorigin =   \" anonymous \"   > < / script >   viewport 元 数据 声明   确保 绘制 触屏 缩放 ， 加上 viewport 元 数据 声明 :   < meta   = \" viewport \"   content = \" width = device - width ,   initial - scale = 1 ,   shrink - - fit = \" >   container 类   container   class   div   一个 固定 宽度 响应 式 容器 。   < div   class =   \" container \"   style =   \" background : # FFF0F5 \"   >   container 类 。   < / div >   container 类 。   一个   container - fluid   class ， 区别 container 类会 设备 尺寸 自动 调整 大小 。 推荐 页面 都 包围 container 盒子 。   栅格 系统   栅格 系统 bootstrap 框架 很 有用 一个 特性 ， 基本思路 :   一行   row   类 都 放在 谈及   container   类 。   一行 row 类 （ 类 实际上 该类 属性 div 盒子 ） 再 添加 行类 。   行类 很 多种 ， 请 参看   网页   官方 文档     设计 。   <   div   class   =   \" container \"   style   =   \" background : # FFF0F5 \"   >   container 类 。   <   div   class   =   \" row \"   style   =   \" background - color : yellow \"   >   <   div   class   =   \" col - md - 8 \"   style   =   \" background - color : red \"   >   col - md - 8 盒子 ， 黄色 row 盒子 。   < /   div   >   <   div   class   =   \" col - md - 4 \"   style   =   \" background - color : blue \"   >   col - md - 4 盒子 ， 8 + 4 = 12 ， bootstrap 最多 12 列 。   < /   div   >   < /   div   >   < /   div   >   container 类 。   col - md - 8 盒子 ， 黄色 row 盒子 。   col - md - 4 盒子 ， 8 + 4 = 12 ， bootstrap 最多 12 列 。   常规 css 设置   常规 css 设置 比如说 h1 - h6 字体大小 ， 常规 标签 字体大小 颜色 代码 背景 设置 ， 都 浏览器 开发者 工具 查看 css 代码 设置 ， 默认设置 不好 再 弄 css 文件 重载 ， 不 说 。   bootstrap 提供   text - lowercase   ,   text - uppercase   ,   text - capitalize   class :   < p   class =   \" text - lowercase \"   >   HELLO   world   < / p >   < p   class =   \" text - uppercase \"   >     world   < / p >   < p   class =   \" text - capitalize \"   >     world   < / p >   HELLO   world     world     world   控制 文本 对齐 方式   作用 p 段落 盒子 属性 支持 :   text - left   ,   text - center   ,   text -   ,   text - justify   ,   text - nowrap   。   css 都 很 简单 :   < pre   class =   \" pre - scrollable \"   >   . text - left   {   text - align :   left ;   }   . text -   {   text - align :   ;   }   . text - center   {   text - align :   center ;   }   . text - justify   {   text - align :   justify ;   }   . text - nowrap   {   white - space :   nowrap ;   }   < / pre >   lead 盒子   都 约定 ，   lead 盒子   指 class 属性 lead div 标签 ， :   <   div   class   =   \" lead \"   style   =   \" border : 1px   solid \"   >     ， lead 盒子 ， 边框 额外 加上 去 。 用来 特别 。   < /   div   >     ， lead 盒子 ， 边框 额外 加上 去 。 用来 特别 。   jumbotron 盒子   bootstrap 提供 jumbotron 盒子 首页 用于 展示 特别 希望 读者 阅读 信息 。   <   div   class   =   \" jumbotron \"   >   <   p   >   好 ， jumbotron 盒子 。   < /   p   >   < /   div   >   好 ， jumbotron 盒子 。   pull - left pull -   bootstrap class 属性 左 对齐 或右 对齐 标签 元素 。   tabs 制作   利用 bootstrap 制作 tabs ， 建立 一个 ul 无序 列表 ， class 属性 设置   nav   nav - tabs   ， 制作 一个 简单 tabs 。   <   ul   class   =   \" nav   nav - tabs \"   >   <   li   class   =   \" active \"   > <   a   href   =   \" # \"   >   Features   < /   a   > < /   li   >   <   li   > <   a   href   =   \" # \"   >   Details   < /   a   > < /   li   >   < /   ul   >   Features   Details   pill 形状 tabs 制作   <   ul   class   =   \" nav   nav - pills \"   >   <   li   class   =   \" active \"   > <   a   href   =   \" # \"   >   Features   < /   a   > < /   li   >   <   li   > <   a   href   =   \" # \"   >   Details   < /   a   > < /   li   >   < /   ul   >   Features   Details   list - inline   ul ol 加上   list - inline   属性 ， li 列表 元素 水平 inline - block 显示 ， 所示 :   第一个 li   第二个 li   kbd 标签   kbd 标签 用来 显示 按键 组合 :   Ctrl + X   制作 一个   Bootstrap   风格 带 链接 按钮   参看   网页   。   更 喜欢 写法 :   < a   href =   \"   { {   message   [   \" body \"   ]   } }   \"   target =   \" _ blank \"   role =   \" button \"   class =   \" btn   btn - success   btn - large \"   >   Click   !   < / a >",
            "tags":"html5",
            "url":"articles/qian-duan-kai-fa-zhi-bootstrap.html"
        },
        {
            "title":"pycharm和webstrom编辑器使用技巧",
            "text":"操作 不 说 ， 说 略显 高级 技巧 。   上传 文件 服务器   原理 利用 sftp 上传 ， pycharm 大 环境 下 ， 确实 很 。 功能 只 pycharm 专业版 下 才 。   Tools   - >   Deployment   - >   configuration   服务器 上 频繁 测试 工作 ， 不 git 频繁 commit 情况 ， 先 测试 好 ， git 推送 。   设置 环境 远程 python 解释器   ：   Settings   - >   Project   - >   Project   Interpreter   ， 利用 pycharm 新建 一个 本地 虚拟环境 ， pipenv 建立 环境 ， pycharm 会 自动 找到 ， 利用 python 虚拟环境 ， 讲 ， 还 设置 解释器 环境 远程 服务器 python 环境 ， 开发 调试 接近 程序 运行 时 环境 。   ：   Tools   - >   Start   SSH   session ...   terminal 打开 一个 连接 远程 服务器 ssh 终端 ， 加上 设置 好 文件 upload 功能 ， 基本上 不 一个 额外 ssh 终端 连接 程序 。   讨论 都 基于 ssh 连接 ， ：   Tools   - >   Deployment   - >   Configuration   设置 好 ssh   server   连接 方式 。   正则表达式 替换   按下 路径 替换 ， 点 做 正则表达式 替换 ， 正则表达式 都 很 熟悉 ， 不 说 ， group 替换 ， 。   原 表达式   ( )   包围 想要 设定 group ， 表达式 引用 group （ 1 数 ） ，   \\ 1   \\ 2   ...   替换 表达式 引用 group 依次   $ 1   $ 2   ...   更 内容 请 参看 官方 文档     。",
            "tags":"others",
            "url":"articles/pycharm-webstrom-editor.html"
        },
        {
            "title":"学习gunicorn",
            "text":"简介   gunicorn   挂载 python   wsgi   服务 不错 ， 进程 多线程 支持 ， 提升 服务 性能 。   配置   配置 一个 python 文件 ， 大体 内容 ：     multiprocessing   import   cpu _ count     os   import   environ   def   max _ workers   ( ) :   return   cpu _ count   ( )   bind   =   ' 127.0 . 0.1 : 8000 '   max _ requests   =   1000   worker _ class   =   ' gevent '   workers   =   max _ workers   ( )   写 上 一个 python 文件 ， 启动 gunicorn 挂载 django 服务 大体 ：   gunicorn   - c   gunicorn _ config . py   youapp . wsgi   配置 ：   pidfile   reload   代码 改变 自动 reload ， 前期 开发 会 很 有用   accesslog   access 日志 所在地   errorlog   error   日志 所在地   workers   进程 数   threads   一个 进程 线程 数   worker _ class   worker _ connections   单 进程 连接数   loglevel   日志 级别",
            "tags":"linux",
            "url":"articles/learning-gunicorn.html"
        },
        {
            "title":"数据处理的程序的设计原则讨论",
            "text":"数据量 很大 情况 下 ， 指 数据库 下 数据量 较大 情况 下 ， 编写 数据处理 程序 设计 原则 ：   分布式 流式 计算 框架 不太熟悉 ， 也许 框架 思路 ， 纯粹 面对 作出 提出 原则 ：   大 基本操作 应 数据库 某处 某处 标记 操作 ， 大 基本操作 变动性 太 大 ， 数据库 地方 数据 都 特别 含义 。   大 基本操作 下 小 操作步骤 ， 这是 一个 难点 ， 第一 入口 数据 不断更新 老 数据 会 变化 ， 第二 代码 会 变更 ， 这部分 一劳永逸 完美 扩展 方案 ， 带来 太 复杂性 。 一个 好 建议 记录 operations 信息 ：   operations   :   op _   op _ state   _ op _ time   op _ day   2.1   操作 名   2.2   op _ state   操作 状态 ， 操作前 都 state 调为 2 ， 程序 快 结束 一行 ， state 调为 1 ， 确保 op 操作   state = 0     = 2   state 参量 都 操作   2.3   操作 碎片 化 ， 一个 好 建议 目标 数据   天数   一个 小 处理单元 ， 一步 ， 重复 刷 ， 保证 数据处理 中断 ， 状态 记录 。   2.4   上 操作 时间 ， 信息 记录 便于 某种 情况 下 老 数据 发生 更新 ， 模式 update 模式 ， 一个 稍长 时间 后 （ 减轻 服务器 压力 ） ， 再 update 更新 目标 数据 ， 更新 _ op _ time   ， update 模式 系统 初期 老 数据 变化 情况 下 ， 读者 情况 引入 记录 ， 上 操作 时间 记录 。   数据 聚合 操作 ， 数据 聚合 操作 一个 操作 ， op _ day   很 ， 数据 入口 来源 ， 一个 好 思路 数据 聚合 一个   主 数据源 ，     op _ day   主 数据源 目标 数据 时间 为准 。   原则上 设计 工作 流程 一日 事 今日毕 ， 读者 手段 ， 操作 碎片 化 思路 不错 。",
            "tags":"设计",
            "url":"articles/data-process-design-principle.html"
        },
        {
            "title":"fire模块",
            "text":"前言   初次 接触   fire 模块   不 自觉   click 模块   对比 ， 老实 说 还 真 不 太 这是 google 团队 作品 ， google 团队 产品 会 简洁 ， 毕竟 写   ：   This         official   Google   product .   说 下 fire 模块 优点 ， 初步 优点 很 ：   少 写点 代码 。 一个 程序员 愿望 ：   少写 点 代码 事 办成 。 往下 说 ， fire 模块 代码 更 简洁 ， 真的 一个 python 脚本 一个 命令行 工具 ， 一句 废话 都 ， 包括 函数 类 文档 定义 都 有用 。 最 简单 命令行 需求 ， 推荐 fire 模块 。   fire 模块 github 上   commit 很少 ， 版本号 才   0.1 . 2 ， 模块 很多 不 稳定 bug 都 ， 读者 项目 需求 上 一两个 python 脚本 做成 命令行 工具 ， 推荐 click 模块 。 读者 python 脚本 转 成 命令行 工具 需求 ， 数据处理 工作 越来越 大 环境 （ 实际上 怀疑 开发 fire 模块 初衷 ） ， fire 模块 无疑 省点 力气 ， 毕竟 当初 click 模块 写 一个 命令行 工具 ， 情况 确实 有所不同 。   pip   install   fire   官方 文档 说 很 详细 ， 本身 很 简单 ， 随便说说 。   第一个 例子   import   fire   def     (     ) :   return   '   { } . '   .   format   (     =     )   def   main   ( ) :   fire   .   Fire   ( )     __ __   = =   ' __ main __ '   :   main   ( )   查看 信息   加上 一个 分隔符   - -   再 跟上   - -     - h   才 会 显示 信息 。   Usage   :   test   .   py   test   .   py   fire   test   .   py     test   .   py   main     main   函数   fire   模块     都 暴 漏出来 ， 不太好 。 稍微 改造 ， 文件名 改为   . py   import   fire   def     (     ) :   return   '   { } . '   .   format   (     =     )     __ __   = =   ' __ main __ '   :   fire   .   Fire   (     )   ：   PS   C : \\ Users \\ a3580 \\ Desktop >   python   . \\ . py   - -   - -   Usage :   . py   NAME   . py   - -   NAME   写法 好处 控制 只 显示 想要 几个 函数 ， 输出 少 很多 乱七八糟 东西 。 想 写 多个 命令 ， ：   多个 命令   import   fire   def     (     ) :   return   '   { } . '   .   format   (     =     )   def   bang   ( ) :   return   ' bang '     __ __   = =   ' __ main __ '   :   fire   .   Fire   ( {   ' '   :     ,   ' bang '   :   bang   } )   PS   C : \\ Users \\ a3580 \\ Desktop >   python   . \\ . py   - -   - -   Type :   dict   String   form :   { ' ' :   < function       0x000001ED71FB2E18 > ,   ' bang ' :   < function   bang     0x000001ED740A5620 > }   Length :   2   Usage :   . py   . py     . py   bang   也许 会 更好 一点 ， 免得 烂 七八 杂 东西 混进来 。   尽量少 些 代码 追求 ， 多个 命令 写 不错 ：   def     (     ) :   \" \" \"   打印   \" \" \"   return   '   { } . '   .   format   (     =     )   def   bang   ( ) :   \" \" \"   打印 bang   \" \" \"   return   ' bang '     __ __   = =   ' __ main __ '   :   import   fire   fire   .   Fire   ( )   fire 模块 会 定义 函数 类 （ 包括 类 属性 函数 类 ） 都 暴露 。   挂载 类   fire 模块 挂载 类 不 实例 化 ， fire 自动 实例 化 ， 还 指定 实例 化 参数 ：   class   Hello   ( ) :   def   __ init __   (     ,   punctuation   ) :     .   punctuation   =   punctuation   def     (     ,     ) :   \" \" \"   打印   \" \" \"   return   '   { } { p } '   .   format   (     =     ,   p   =     .   punctuation   )   @ staticmethod   def   bang   ( ) :   \" \" \"   打印 bang   \" \" \"   return   ' bang '     __ __   = =   ' __ main __ '   :   import   fire   fire   .   Fire   (   Hello   )   PS   C : \\ Users \\ a3580 \\ Desktop >   python   . \\ . py     world   - - punctuation = !     world !   总 感觉 fire 模块 开发 前期 程序员 写 命令行 工具 省 点心 ， 专心 代码 编写 上 ， 后期 时间 精力 click 代码 更 友好 命令行 界面 。",
            "tags":"python好伙伴",
            "url":"articles/fire-module.html"
        },
        {
            "title":"学习centeos7系统",
            "text":"安装 系统   centos7 安装 难点 硬盘分区 上 ， 加上 新生代 uefi 启动 方式 ， 新 讨论 。   记得 早起 折腾 ubuntu 系统 时 ， 一个 影响 linux 系统 安装 预先 分出 一个 swap 分区 ， 内存 两倍 ， 还 不 太 懂 ，   鸟哥 私房 菜   一章 描述 ，   服务器 内存 都 十几 G - 64G 内存 ， 公式 ， ， 分出 3 - 4Gswap 分区 。   硬件 linux 下 名字   下 ， 参考   鸟哥 私房 菜 第二章   ，   硬盘 USB 模拟 硬盘   ：   / dev / sd [ a - p ]   CDROM DVDROM   :   / dev / scd [ 0 - 1 ]   ,   / dev / cdrom （ cdrom ）   ,   / dev / sr [ 0 - 1 ]   打印机   ：   / dev / lp [ 0 - 2 ]   ,   / dev / usb / lp [ 0 - 15 ]   鼠标   ：   / dev / input / mouse [ 0 - 15 ]   ,   / dev / mouse   ( 鼠标 )   UEFI   启动   分区 推荐   鸟哥 私房 菜 推荐 ， 随便 玩玩 ， 工作 服务器 ， 推荐 多分 几个 区 ：   / boot   /   / home   / var   swap   firewall - cmd   防火墙 策略管理 命令 ：   firewall - cmd   ，     - - list -   列出 开启 端口号 情况 ，   - - add - port   开放 端口号 ， ：   firewall - cmd   - - add - port = 80 / tcp   更 细节 请 参看   篇文章   ， 常用 用法 简要 。   firewall - cmd   - - - active - zones   #   查看 活动 区域   firewall - cmd   - - zone   =   work   - - add - interface   =   eth0   #   区域 指定 网卡 界面   #   默认 zone public   firewall - cmd   - - zone   =   work   - - list - ports   #   列出 开放 端口   firewall - cmd   - - zone   =   work   - - add - port   =   8080   / tcp   #   区域开发 端口   firewall - cmd   - - zone   =   work   - - add - service   =   ssh   #   区域开发 服务   #   类似   - - remove - prot     - - remove - service   firewall - cmd   - - - services   #   列出 可用 服务   NOTICE :   提及 操作 不 加   - - permanent   参数 临时 ， 重启 firewalld 服务 会 配置 丢失 。   systemd   centos7 引入 systemd ， 一个 好用 工具 ， 接触   / / init . d   下 编写 服务 脚本 麻烦 ， 喜欢 supervisor 管理 进程 ， 假设 一个 工具 ， 简洁 配置管理 语法 ， centos 系统 自带 ， 不用 工具 管理 后台 进程 ？ 工具 systemd 。   systemd 服务 都   systemctl   命令 管理 ， 实际上 systemd ， 取代 inid pid 1 进程 ， 很多 进程 都 启动 ， 还 systemctl 重启 电脑 ， systemd 服务 多么 底层 ：   systemctl   reboot   systemctl   poweroff   system systemd 服务 脚本 放在   / usr / lib / systemd / system   ， 用户 systemd 服务 脚本 放在   / usr / lib / systemd / user   。 放在   / / systemd / system     / / systemd / user   。   说 服务 脚本 ， 一个 配置 配置文件 ， 内容 大体 ：   [ Unit ]   Description   =   nginx   -   high   performance   web   server   Documentation   =   http : / / nginx . org / en / docs /   After   =   network . target   remote - fs . target   nss - lookup . target   [ Service ]   Type   =   forking   PIDFile   =   / usr / local / nginx / logs / nginx . pid   ExecStartPre   =   / usr / local / nginx / sbin / nginx   - t   - c   / usr / local / nginx / conf / nginx . conf   ExecStart   =   / usr / local / nginx / sbin / nginx   - c   / usr / local / nginx / conf / nginx . conf   ExecReload   =   / bin / kill   - s   HUP   $ MAINPID   ExecStop   =   / bin / kill   - s   QUIT   $ MAINPID   PrivateTmp   =   true   [ Install ]   WantedBy   =   multi - user . target   Unit   -   Description   描述 服务   Unit   -   Documentation   服务 文档   Unit   -   After   服务 依赖 ， 依赖 服务 启动 服务 才 启动   Service   -   Type   启动 类型 ， simple ：   默认值 ， 启动 服务 ；   forking ： fork 方式 启动 进程 ； oneshot ： 一次性 进程 ； dbus ： dbus 启动 ； notify ： 服务 启动 完毕 ， 通知 systemd ， 向下 执行 。   Service   -   PIDFile   pid 文件 路径   Service   -   ExecStartPre   启动 前 动作   Service   -   ExecStart   启动 动作   Service   -   ExecReload   reload 动作   Service   -   ExecStop   停止 动作   Service   -   PrivateTmp   临时 空间   Service   -   ExecStartPost   启动 后 动作   Install   -   WantedBy   systemd   东西 还 ， 时间 再 慢慢 补 上 ， 强烈推荐   金步国 翻译 systemd 中文 手册   。   服务 文件 修改   推荐 配置文件 外移 ， 服务 文件 设置 好 没 修改 ， 服务 文件 修改 ：   systemctl   daemon - reload   日志 管理   systemd 统一 管理 日志 ， 可用   jourlnalctl   命令 查看 。 点名 看 服务 Unit ：   jourlnalctl   - - unit = nginx   启动 服务   启动 服务 重启 服务 暂停 服务 想 都 很 熟悉 ：   systemctl   start   . service   systemctl   stop   . service   systemctl   restart   . service   centos7 配置 dns   发现 centos7 配置 dns 重启   network   服务 配置 会 丢失 ，   / / NetworkManager / NetworkManager . conf   main 加上   dns   =     重启   systemctl   restart   NetworkManager . service   再 如同 修改   / / resolv . conf   。   配置 语言   查看 操作系统 语言   cat   / / locale . conf     localectl   status   列出 可用 语言   locale   - a     localectl   list - locales   |   grep   zh   修改 操作系统 语言   sudo   localectl   set - locale   LANG = zh _ CN . utf8   参考资料   鸟哥 私房 菜   systemd 入门教程 命令   systemd 详解",
            "tags":"linux",
            "url":"articles/learning-centos7-system.html"
        },
        {
            "title":"pipenv模块",
            "text":"pipenv 模块 刚 听说 virtualenv 够用 ， 没 太 在意 。 一试 发现 真的 ， 很 ， 设计 理念 上 nodejs 包 管理 接近 ， 很 不错 。   刚 一个 文件夹 ， 运行 ：   pipenv   install   运行 前 ：   pip   install   pipenv   其会 创建   Pipfile     Pipfile . lock   两个 文件 。 读者 熟悉 nodejs 包 管理机制 ， 两个 文件 作用 不 做过 。   激活 虚拟环境 ：   pipenv   shell   调用 虚拟环境 下 运行 命令 ：   pipenv   run   _ awesom _ command   读者 打开   Pipfile   文件 会 发现 一行   url   =   \" https : / / pypi . douban . / simple \"   还要 系统 地方 去 配置 ， 修改 。   安装 模块 ：   pipenv   install   requests   remove 模块 ：   pipenv   uninstall   requests   值得注意 pipenv 模块 很 好 解析 包包 依赖 关系 ， 比原   requirements . txt   好 一点 地方 。   忘   pip   freeze   命令 。   读者 pycharm 设置 下 pipenv 管理 虚拟环境 路径 ： 用户 家 目录 下   . virtualenvs   。   文件夹 格式 引入   文件夹 格式 引入 ， 一个 简单 pypi 包 格式 ， 写 好 setup . py 那种 ， ：   pipenv   install   - e   \" .. / _ _ pypi _ package \"   格式 懂得 人 都 会 明白 ， 功能 简直 人 拍案叫绝 。 python 模块 ， 修改 源码 ， pycharm 对接 好 ， python   shell 自动 虚拟环境 shell 都 文件夹 格式 pypi 包 ，   关键 重点   ： 不 运行   python   setup . py   build   install ， 工作 ， 拍案叫绝 有没有 ， 有没有 。",
            "tags":"python好伙伴",
            "url":"articles/pipenv-module.html"
        },
        {
            "title":"pillow模块",
            "text":"简介   pillow 模块 前身 PIL 模块 ， 其有 更好 github pypi 支持 ， 简单 安装 pip 命令 安装 即可 。 pillow 模块 格式 图片 支持 依赖于 系统 额外 图形处理 模块 ， libjpeg ， libtiff 。 系统 安装 ， ， 具体情况 ， 不 一一 讨论 。   安装 官方 文档 叙述 （   reference     ） ， 装 上 。   sudo   apt -   install   python3 - dev   python3 - setuptools   sudo   apt -   install   libtiff4 - dev   libjpeg8 - dev   zlib1g - dev   \\   libfreetype6 - dev   liblcms2 - dev   libwebp - dev   tcl8.5 - dev   tk8.5 - dev   测试 安装 情况   找个 图片 简单 测试 安装 情况 :     PIL   import   Image   img   =   Image   .   open   (   \" test . jpg \"   )   print   (   img   .   format   ,   img   .   size   ,   img   .   mode   )   img   .   show   ( )   pillow 模块 名字 PIL 是因为 父亲 PIL ， pillow   fork 自它 ， setuptools 兼容 。   pillow 模块 语法 很 清晰 ， Image 类 ， open 方法 返回 jpg   img   对象 ， 简单 称作 img 对象 ， img 对象 format ,   size   ,   mode 方法 ， 图片 格式 （ JPEG ） ， 图片 尺寸 （ ( 1920 ,   1080 ) ） 图片 模式 （ RGB ） 。 img 对象 调用 show 方法 会 （ 系统 内部 工具 ） 显示 图片 。   open 方法 官方 文档 叙述 支持 格式 ： bmp ， eps ， gif ， im ， jpeg ， jpeg2000 ， msp ， pcx ， png ， ppm   ， spider ， tiff ， webp ， xbm ， xv 。 格式 只 支持 读要 只 支持 写 不 。 写 save 方法 图片 目标 格式 ， open 方法 打开 图片 名字 随意 ， pillow 会 自动检测 图片 格式 。   open 方法 图片 打开 失败 ， 将会 返回   IOError   异常 。   获取 图片 信息   引用 :     PIL   import   Image   利用 Image 类 open 方法 创建 一个 图片 对象 :   im   =   Image . open ( ' lena . jpg ' )   获取 图片 格式 ， 尺寸 模式 信息 。   > > >   im . format   ' JPEG '   > > >   im . size   ( 512 ,   512 )   > > >   im . mode   ' RGB '   > > >   图片格式 转换   接触 pillow 模块 第一个 图片格式 转换 ， 请 看 写 两个 函数 ， 都 利用 pillow 模块 ， 一个 单独 转换 图片 ， 一个 文件夹 后缀 文件批量 格式 转换 。     __ future __   import   print _ function   import   os . path     PIL   import   Image   import   subprocess   import   logging   logging   .   basicConfig   (   level   =   logging   .   DEBUG   )   def   mkdir _ p   (   path   ) :     :   os   .   makedirs   (   path   )     OSError     exc   :   #   Python   & gt ; 2.5     exc   .   errno   = =   errno   .   EEXIST     os   .   path   .   isdir   (   path   ) :   pass     :   raise   def   convert _ imgformat   (   inputimg   ,   imgext2   ,   outputdir   =   ' '   ) :   ' ' ' support   convertion :   pillow 点阵图 之间 互换 png   jpg   gif   eps   tiff   bmp   ppm   加上 输出 dir 自动 支持   。   ' ' '   pillow _ support   =   [   ' png '   ,   ' jpg '   ,   ' gif '   ,   ' eps '   ,   ' tiff '   ,   ' bmp '   ,   ' ppm '   ]   imgname   ,   imgext   =   os   .   path   .   splitext   (   os   .   path   .   basename   (   inputimg   ) )   # pillow     imgext   [   1   : ]     pillow _ support     imgext2     pillow _ support   :   outputimg   =   imgname   +   ' . '   +   imgext2     :   im   =   Image   .   open   (   os   .   path   .   abspath   (   inputimg   ) )   logging   .   info   (   os   .   path   .   abspath   (   inputimg   ) )       os   .   path   .   exists   (   os   .   path   .   abspath   (   outputdir   ) ) :   mkdir _ p   (   outputdir   )   outputimg   =   os   .   path   .   join   (   os   .   path   .   abspath   (   outputdir   ) ,   outputimg   )   logging   .   info   (   outputimg   )   im   .   save   (   outputimg   )     IOError   :   logging   .   error   (   ' IOError ,   I       convert   { } '   .   format   (   inputimg   ) )     :   logging   .   warning   (   ' pillow   doesnot   support     output   format   { } '   .   format   (   imgext2   ) )   def   batch _ convert _ imgformat   (   inputext   ,   outputext   ,   inputdir   =   ' '   ,   outputdir   =   ' '   ) :   ' ' ' 转换 图片格式 函数 批量 封装 ， 加上 目标 图片 dir 输出 图片 dir ， 默认 当前目录   第一个 参数 改成 inputext ， 目标 文件夹 输入 图片格式 才 会 转换 。 ' ' '   import   glob   inputdir   =   os   .   path   .   abspath   (   inputdir   )   inputimgs   =   glob   .   glob   (   os   .   path   .   join   (   inputdir   ,   ' * . '   +   inputext   ) )     inputimg     inputimgs   :   convert _ imgformat   (   inputimg   ,   outputext   ,   outputdir   =   outputdir   )   图片 缩小 尺寸   仿照 api 写 两个 函数 :   resize _ img     batch _ resize _ img   。   def   resize _ img   (   inputimg   ,   outputsize   ,   outputdir   =   ' '   ,   outputname   =   ' '   ) :   ' ' ' outputsize   parameter       ( 120 , 100 )   width = 120 , height = 100   resize 保留 图片 原 宽高比 情况 下 ， 目标 图片 宽度 高度 不 小于 指定 值   加上 输出 dir 自动 支持   。   不 指定 输出 文件名 ， 默认   原 文件名 _ width * height . 原 扩展名   ' ' '   imgname   ,   imgext   =   os   .   path   .   splitext   (   os   .   path   .   basename   (   inputimg   ) )     :   im   =   Image   .   open   (   os   .   path   .   abspath   (   inputimg   ) )   im   .   thumbnail   (   outputsize   )   logging   .   info   (   os   .   path   .   abspath   (   inputimg   ) )       os   .   path   .   exists   (   os   .   path   .   abspath   (   outputdir   ) ) :   mkdir _ p   (   outputdir   )       outputname   :   outputname   =   imgname   +   ' _ { } * { } '   .   format   (   im   .   size   [   0   ] ,   im   .   size   [   1   ] )   +   imgext   outputimg   =   os   .   path   .   join   (   os   .   path   .   abspath   (   outputdir   ) ,   outputname   )   logging   .   info   (   outputimg   )   ####   im   .   save   (   outputimg   )     IOError   :   logging   .   error   (   ' IOError ,   I       resize   { } '   .   format   (   inputimg   ) )   resize _ img   (   \" lena . jpg \"   , (   300   ,   200   ) ,   outputdir   =   \" \"   )   def   batch _ resize _ img   (   inputext   ,   outputsize   ,   inputdir   =   ' '   ,   outputdir   =   ' '   ) :   ' ' ' 缩小 图片尺寸 批量 封装 ， 加上 目标 图片 dir 输出 图片 dir ， 默认 当前目录   第一个 参数 改成 inputext ， 目标 文件夹 输入 图片格式 才 会 转换 。 ' ' '   import   glob   inputdir   =   os   .   path   .   abspath   (   inputdir   )   inputimgs   =   glob   .   glob   (   os   .   path   .   join   (   inputdir   ,   ' * . '   +   inputext   ) )     inputimg     inputimgs   :   resize _ img   (   inputimg   ,   outputsize   ,   outputdir   =   outputdir   )   图片 去 背景   小节 参考   网页   。 稍作 封装 即可 。     PIL   import   ImageChops   def   trim _ img   (   inputimg   ,   outputdir   =   ' '   ,   outputname   =   ' '   ) :   ' ' ' 图片 去 白边 （ 背景 白 ， 背景 黑 ）   输出 名字 默认   原名 _ trim . 原 后缀   ' ' '   imgname   ,   imgext   =   os   .   path   .   splitext   (   os   .   path   .   basename   (   inputimg   ) )     :   im   =   Image   .   open   (   os   .   path   .   abspath   (   inputimg   ) )   bg   =   Image   .     (   im   .   mode   ,   im   .   size   ,   im   .   getpixel   ( (   0   ,   0   ) ) )   diff   =   ImageChops   .   difference   (   im   ,   bg   )   diff   =   ImageChops   .   add   (   diff   ,   diff   ,   2.0   ,   -   100   )   bbox   =   diff   .   getbbox   ( )   ###   _ im   =   im   .   crop   (   bbox   )   logging   .   info   (   os   .   path   .   abspath   (   inputimg   ) )       os   .   path   .   exists   (   os   .   path   .   abspath   (   outputdir   ) ) :   mkdir _ p   (   outputdir   )       outputname   :   outputname   =   imgname   +   ' _ trim '   +   imgext   outputimg   =   os   .   path   .   join   (   os   .   path   .   abspath   (   outputdir   ) ,   outputname   )   logging   .   info   (   outputimg   )   ####   _ im   .   save   (   outputimg   )     IOError   :   logging   .   error   (   ' IOError ,   I       trim   { } '   .   format   (   inputimg   ) )   def   batch _ trim _ img   (   inputext   ,   inputdir   =   ' '   ,   outputdir   =   ' '   ) :   ' ' ' 批量 图片 去 ' ' '   import   glob   inputdir   =   os   .   path   .   abspath   (   inputdir   )   inputimgs   =   glob   .   glob   (   os   .   path   .   join   (   inputdir   ,   ' * . '   +   inputext   ) )     inputimg     inputimgs   :   trim _ img   (   inputimg   ,   outputdir   =   outputdir   )   算法 最 核心 语句 :   bg   =   Image . ( im . mode ,   im . size ,   im . getpixel ( ( 0 , 0 ) ) )   diff   =   ImageChops . difference ( im ,   bg )   diff   =   ImageChops . add ( diff ,   diff ,   2.0 ,   - 100 )   bbox   =   diff . getbbox ( )   _ im   =   im . crop ( bbox )     bg   =   Image . ( im . mode ,   im . size ,   im . getpixel ( ( 0 , 0 ) ) )   一句 看得出来 新建 一个 图片 对象 ， 图片 对象 看作 纯色 背景图片 ， 参数 color ，   im . getpixel   去 原图片 ( 0 , 0 ) 像素点 颜色 ， 最 左边 最 顶上 点 。   diff   =   ImageChops . difference ( im ,   bg )   一句 ， 官方 文档 描述 ，   PIL . ImageChops . difference ( image1 ,   image2 )   相当于 图片 像素点 逐个 算术 运算 :   $ $     =   abs ( image1   -   image2 )   $ $     diff   =   ImageChops . add ( diff ,   diff ,   2.0 ,   - 100 )   官方 文档 描述 ，   PIL . ImageChops . add ( image1 ,   image2 ,   scale = 1.0 ,   offset = 0 )   相当于 图片 像素点 做 算术 运算 :   $ $     =   ( ( image1   +   image2 )   /   scale   +   offset )   $ $   diff 图片 对象 实际上 原图片 减去 背景 ， 双倍 重叠 除以 2 。 操作 都 看作 四周 背景 边框 趋于 0 。 offset 设为 100 ， 最 疑问 地方 ， ， 像素 值 变为 负值 会 ？ 二 ， 减去 100 ， 理由 ？   bbox   =   diff . getbbox ( )   _ im   =   im . crop ( bbox )   接下来 实际上 还好 理解 ， Image 对象   getbbox   方法 一个 矩形 边框 值 （ left ， upper ， ， lower 四个 像素点 坐标 ） 。 内部 算法 非 0 值来 计算 图形 边界 。 算法 还 很 。   调用 Image 对象   crop   方法 执行 裁剪 操作 ， 接受 一个 矩形 边框 值 ， 边框 一个 新 图形 对象 。   裁剪 效果 所示 :   去 裁剪 效果 :   附录   有名 lena 图   福利 图 。 。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"python好伙伴",
            "url":"articles/pillow-module.html"
        },
        {
            "title":"统计学入门",
            "text":"均值 中位数 众数     均值 ， 算术 平均数 ， 熟知 数加 除以 个数 ， 数 平均 大 。   median   中位数 ， 概念 ： 一组 数 从小到大 排列 ， 最 数 中位数 。 最 解释 ， 一共 奇数 数字 ， 去掉 一个 最小 去掉 一个 ， 类推 ， 剩下 数 中位数 ； 一共 偶数 数字 ， 会 剩下 两个 数字 ， 中位数 两个 数字 均值 。   mode   众数 ， 一组 数中 频率 或者说 分布 最多 数 。 比如说 [ 1 , 2 , 2 , 3 ] 一个 样本 ， 数字 2 次数 最 ， 说 样本 众数 2 。   统计 意义   平均值 概念 最 熟悉 ， 最 统计学 手段 。 物理学 上 测量 ， 精确 测量 取 平均值 。 再 衡量 一类 数据 大致 平均 情况 ， 考试 平均 成绩 ， 平均 成绩 大致 对待 本学期 学业 态度 。   中位数 均值 考察 样本 总体 状态 ， 区别 中位数 极值 （ 偏离 特别 远 值 ） 不 敏感 。 收入 来举 例子 ： 人 收入 特别 高 ， 均值 考察 社会 收入水平 会 抬高 嫌疑 。 家庭 之间 收入 共享 ， 计算 中 却 一并 。 中位数 考察 看着 社会 总体 收入水平 。 考察 家庭 平均收入 中位数 。   众 数只 关注 次数 最多 数 ， 来讲 不 考察 样本 总体 状态 能力 ， 情况 下 却 。 比如说 头发 颜色 定性描述 ， 众数 很 合适 。   python 相关   python3.4 ， python statistics 模块 ， 不 重复 发明 轮子 。 ， median mode 三个 名字 statistics 模块 中 都 函数 ， 演示 例子 ：     statistics   import     ,   mode   ,   median   > > >   lst   =   [   23   ,   29   ,   20   ,   32   ,   23   ,   21   ,   33   ,   25   ]   > > >     (   lst   )   25.75   > > >   median   (   lst   )   24.0   > > >   mode   (   lst   )   23   三个 函数 都 接受 一个 迭代 对象 ， 相关 操作 ， 空 数据 ， raise   statistics . StatisticsError   。   值得注意 mode 还 操作 字符串 ：   > > >   mode ( [ ' a ' , ' b ' , ' a ' , ' c ' , ' d ' ] )   ' a '   mode 函数 几个 数都 频率 情况 ， 运行 命令 ， raise   statistics . StatisticsError   。   > > >   lst   =   [ 1 , 1 , 2 , 3 , 3 ]   > > >   mode ( lst )   利用 collections 模块 Counter 类 _ common 方法 更 健壮 mode 函数 。     collections   import   Counter   def   mode   (   obj   ) :   \" \" \"   多个 情况   \" \" \"   c   =   Counter   (   obj   )     =   0     =   True     k   ,   v     c   .   _ common   ( ) :       :     =   v     =   False   yield   k     :       = =   v   :   yield   k     :   break   python3   statistics   内置 模块   均值   中位数     众数 运算 ， ， python2 模块 不 说 ， 矢量 思维 计算 效率 。 好 ， numpy     scipy   出场 。   python 迭代 对象 （ Iterable ） numpy ndarray 对象 ， ， pass 掉 。   利用 numpy scipy 函数 支持 。   import   numpy     np     collections   import   Iterable   def   _ ndarray   (   pyobj   ,   dtype   =   None   ) :       isinstance   (   pyobj   ,   Iterable   ) :   raise   TypeError   (   '       a   iterable   object '   )     isinstance   (   pyobj   ,   np   .   ndarray   ) :   return   pyobj     dtype       None   :   return   np   .   array   (   pyobj   ,   dtype   )     :   return   np   .   array   (   pyobj   )   def     (   obj   ) :   obj   =   _ ndarray   (   obj   )   return   obj   .     ( )   def   median   (   obj   ,   axis   =   None   ) :   obj   =   _ ndarray   (   obj   )   return   np   .   median   (   obj   ,   axis   =   axis   )   mode 统计 频数 scipy   scipy . stats . mode   函数 ， 返回 频数 ， 频数 多个 情况 只 返回 一个 。   方差 标准差   来说 总体 情况 ， 总体 均值   \\ ( \\ mu \\ )   ， 总体 方差 公式 所示 :   $ $   { \\ sigma   } &# 94 ; { 2   }   = \\ frac   {   1   } { n   }   \\ sum   _ {   i = 1   } &# 94 ; {   n   } { (   X _ i   -   \\ mu ) &# 94 ; 2 }   $ $   总体 方差 一个 数 总体 均值 差 平方和 均值 。   > > >     statistics   import   *   > > >   pvariance   ( [   0   ,   0   ,   5   ,   5   ] )   6.25   statistics   .   pvariance   (   data   ,   mu   =   None   )   上 所示 ， pvariance 还 接受   mu   选 参数 ， 总体 均值 ， 重复 计算 ， 赋值 函数 会 自动 计算 。   总体 标准差 总体 方差 平方根 ， 或者说   \\ ( \\ sigma \\ )   。   > > >     statistics   import   *   > > >   pstdev   ( [   0   ,   0   ,   5   ,   5   ] )   2.5   pstdev （ Population   standard   deviation ） 还 接受   mu   选 参数 。   中 ， 绝大多数 情况 都 考察 样本 总体 ， 更 常用 样本 方差 :   $ $   { S   } &# 94 ; { 2   }   = \\ frac   {   1   } { n - 1   }   \\ sum   _ {   i = 1   } &# 94 ; {   n   } { (   X _ i   -   \\ overline   {   X   }   ) &# 94 ; 2 }   $ $   ，   ( n - 1 )     ( n )   ， 统计学 ， 无偏 估计 ， 样本 评估 总体 方差 ， 总会 估计值 偏小 ， 再 加上 一个 额外 数据量 估计值 更 准确 些 ， 大体 ，   n - 1   ， 统计学 高级 内容 ， 更好 估计 （ 样本 估计 总体 ） 。   python 中 样本 方差   variance   函数 ， 样本 标准差   stdev   函数 :   > > >   variance ( [ 0 , 0 , 5 , 5 ] )   8.333333333333334   > > >   stdev ( [ 0 , 0 , 5 , 5 ] )   2.886751345948129   > > >   统计 意义   方差 描述 数据 集 离散 程度 ， 标准差 方差 平方根 ， 用来 描述 数据 集 离散 程度 。 标准差 数据 会 更 ， 比如说 统计 一班 身高 标准差   10cm   ， 人 一个 直观 感受 。 正态分布 中有   均值   $   \\ pm   $   三个 标准差 ， 样本 中   99 点 数据 都 包含 在内 。   简单 来说 ， 总体 考察 对象 ， 简单 均值 ， 中位数 ， 众数 描述性 概念 ， 总体 来说 都 很 难 考察 。 总体 中 取出 考察 对象 （ 理论 上 近似于 随机取样 ） ， 一个 样本 。 希望 样本 统计 描述性 数据 很 好 总体 数据 状况 。 统计学 量 实际上 都 两种 类型 ， 均值 总体 均值   \\ ( \\ mu \\ )   样本均值   \\ ( \\ overline { X } \\ )   。   python 相关   利用 numpy 计算 ：   def   pvariance   (   obj   ) :   obj   =   _ ndarray   (   obj   )   return   np   .   var   (   obj   )   def   pstd _ deviation   (   obj   ) :   obj   =   _ ndarray   (   obj   )   return   np   .   std   (   obj   )   def   variance   (   obj   ) :   obj   =   _ ndarray   (   obj   )   return   np   .   var   (   obj   ,   ddof   =   1   )   def   std _ deviation   (   obj   ) :   obj   =   _ ndarray   (   obj   )   return   np   .   std   (   obj   ,   ddof   =   1   )   计算 样本 方差   variance   ddof = 1   设置 1 ， 默认 0 。 计算 样本 样本 方差 样本 标准差 。   中位数 分 位数   中位数 谈过 ， 最 数 。 一种 说法 数据 集里   50%   数比 小 ，   百分之 50 数比 大 。 分 位数 概念 由此 ，   25%   分 位数 （ quantile ） 数据 集里   25%   数比 小 。 联想 统计学 分布图 ，   25% 分 位数 看作 数画 一条线 ， 左边 面积 总面积   25% 。   python 相关   def   quantile   (   obj   ,   seq   =   None   ) :   obj   =   _ ndarray   (   obj   )     seq     None   :   seq   =   range   (   0   ,   101   ,   25   )   res   =   pd   .   Series   (   np   .   percentile   (   obj   ,   seq   ) ,   index   =   seq   )   return   res   numpy     percentile   函数 分 位数   quantile ， 显示 几个 分 位数 位置 定制 。 利用 pandas   Series   数据结构 返回 ， 好 分 位数 。   极差   中程 数   极差 （ range ） 一组 数 最大值 最小值 差值 。 中程 数 （ midrange ） 一组 数 最大值 最小值 均值 。   python 相关   极差 range 名字 python 语言 range 函数 相冲突 ， python 极差 定义 一个 函数 ， 计算公式 简单 ， 不 额外 定义 一个 公式 。 ：   max   (   lst   )   -   min   (   lst   )   中程 数   (   max   (   lst   )   +   min   (   lst   ) )   /   2   统计 意义   极差 统计学 上 入门级 粗略 样本 离散 程度 考察 ， 一组 数 很 分散 ， 都 均值 ， 极差 会 很小 ， 情况 另一组 数 极差 更大 ， 说 第二组 数 离散 程度 更大 。   中程 数 样本 数组 离散 程度 很 高 ， 均值 近似 快速 计算 。   标准分   标准分   \\ ( z   =   \\ frac { x -   \\ mu } { \\ sigma } \\ )   标准分 正态分布 映射 一个 标准 正态分布 上 手段 ， 简单 来说 一种 均值 标准差 正态分布 标准化 过程 ， 理解 过程 理解 标准 正态分布 ：   标准 正态分布 值 均值 0 ， 标准差 1 正态分布 。   标准分 做出 假设   目标 研究 数据 集   或者说 学生 得分 数据 集是   正态分布   。 正态分布 。 正态分布 中有 规律 ：   95.45%   数据 位于 两个 标准差 内   99.73%   数据 位于 三个 标准差 内 。   （ 公式 ）   参考 同济大学 概率论 数理统计 第四版 一书   p48   引理 ：     X   分布 正态分布 ，   \\ ( Z   =   \\ frac { X - \\ mu } { \\ sigma } \\ )   分布 标准 正态分布 。 ， 简单 看 下 数学公式 推导 ， 信心 足 ， 没 。   条件 概率   条件 概率 维恩 图解 很 有意思 ：   $ $   P ( A | B )   =   \\ frac { P ( A   \\ cap   B ) } { P ( B ) }   $ $   用维恩图 基本上 写出 公式 ， 含义 很 。   ：   $ $   P ( A | B )   P ( B )   =   P ( A   \\ cap   B )   $ $   $ $   P ( A   \\ cap   B )   =   P ( B   \\ cap   A )   =   P ( B | A )   P ( A )   $ $   概率 树来 理解 ， 先 发生 B 发生 A 事件 ， 事件 AB 概率 两个 事件 概率 乘积 ， 困惑 ， AB 事件 BA 事件 两个 概率 ？ （ 针对 古典 概率模型 ， 顺序 地方   P ( a , b )   符号 ，   P ( a , b )   不 等于   P ( b , a ) 。 ）   互斥 事件 A ， B ， 不 发生 事件 ，   \\ ( P ( A   \\ cap   B )   = 0 \\ )   全 概率 公式 ：   $ $   P ( B )   =   P ( A )   \\ times   P ( B   |   A )   +   P ( A ' )   \\ times   P ( B   |   A ' )   $ $   贝叶斯 定理 ：   $ $   P ( A | B )   =   \\ frac { P ( B | A )   P ( A ) } { P ( B )   =   P ( A )   \\ times   P ( B   |   A )   +   P ( A ' )   \\ times   P ( B   |   A ' ) }   $ $   贝叶斯 定理 提供 一个 计算 逆 条件 概率 方法 ， 情况 先 发生   A   再   发生 B   ， 想 B 发生 A 发生 概率 。   贝叶斯 定理 思想 提及 更深 ， 假设   A   事件 ， 机器 人 针对 A 事件 做 推断   B ， 想 推断 B 正确 可能性 大 ， A 事件 发生 概率 ， A 事件 发生 后 B 推断 概率 ， A 事件 发生 B 推断 发生 概率 都 是从 经验 数据 中 学习 。 后验 B 推断 发生 ， A 事件 发生 推断 错误 ， A 事件 发生 推断 正确 ，   $ P ( A | B )   $   常 统计学家 称为   后验 概率 ， 实际上 逆 概率 ， 计算 过程 贝叶斯 公式 计算 。   参考资料   深入浅出 统计学   同济大学   概率论 数理统计   机器学习   周志华     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"数学",
            "url":"articles/statistics-tutorial.html"
        },
        {
            "title":"自然语言处理第一谈",
            "text":"简介   自然语言 应用领域 ：   机器翻译   自动 文摘   信息检索   文档 分类   问答 系统   信息 过滤 ， 信息 抽取   文字编辑 自动 校对   作文 自动 评分   语音 识别   语音 合成 ， text     speech   ​   信息熵   信息熵 人 难懂 概念 ， 很多 领域 都 接触 信息熵 概念 ， 会 发现 没 理解 信息熵 概念 。 自然语言 领域 ， 信息熵 ， 自然 信息 传输 领域 很多 ， 信息熵 概念 基本上 信息论 基石 。   不管怎么 说 ， 先 死记硬背 ， 信息熵 定义 ， 一个 事物 一个 东西 ， 一个 系统 中 几率 p ， 东西 系统 中 信息熵 ：   $ $   H   =   -   p   log _ 2 { p }   $ $   最 简单 抛 硬币 ， 正面 来说 几率 1 / 2 ， 抛 硬币 正面 信息熵   0.5 ， 反面 信息熵 0.5   1   。 信息熵 单位 bit ， 信息熵 服从 可加性 （ 总 系统 信息熵 子系统 信息熵 加 ） ， 抛 一枚 硬币 ， 正面 反面 信息熵 总和   1   bit 。 信息论 角度 来说 一个 字节 描述 抛 一枚 硬币 信息量 。 信息论 专注 信息 传输 领域 。   一个 ， 摘自 宗庆成 统计 自然语言 第二 版例 2 - 3 ：   假设 a , b , c , d , e , f   6 个字符 概率   1 / 8   1 / 4   1 / 8   1 / 4   1 / 8   1 / 8   ， 传输 一个 字符 信息熵 ？   传输 一个 字符   a   b   c   d   e   f 只 六种 情况 ， 信息熵 ：   H   =   - [ 1 / 8log1 / 8   +   1 / 4log1 / 4   +   1 / 8log1 / 8   +   1 / 4log1 / 4   +   1 / 8log1 / 8   +   1 / 8log1 / 8 ]   =   2.5   bit   传输 六个 字母 2.5 bit ， 三个 bit 位 够用 ， 设计 一种 信息 编码 规则 即可 ， 设计 编码 规则 还要 具体情况 概率 ， 细节 不 讨论 。 信息熵 干 。   一个 事件 会 发生 ， 信息熵 等于 0 ， 一个 事件 发生 概率 0 ， 信息熵 等于 0 。 信息熵 0 事件 发送给 带来 额外 信息 。 抛 硬币 描述 一个 事件 ， 硬币 一无所知 ， 信息熵 = 1 信息熵 ， 一半一半 0.5 情况 。   薛定谔 猫 一半 生 一半 死 情况 下 打开 黑盒子 ， 流 信息熵 ， 或者说 流 信息量 最 。   信息 增益   信息 增益 决策树 算法 分类 特征选择 中 很 ， 暂时 先 简单 理解 引入 特征 分类 信息熵 增量 很大 ， 获取 特征 系统 程度 影响 ， 简单 来说 特征 好 ， 引入 收获 更 信息 。   联合 熵 条件 熵   是从 概率分布 联合 概率 条件 概率 推出 概念 。 联合 概率 两个 事件 概率 ； 条件 概率 已知 Y 发生 ， X 事件 发生 概率 。   $ $   H ( X , Y )   =   -   \\ sum _ { x   \\ epsilon   X }   \\ sum _ { y   \\ epsilon   Y }   p ( x , y ) log ( p ( x , y ) )   $ $   XY 联合 熵 描述 一对 随机变量 平均 信息量 。   熵 连锁 规则 ：   $ $   H ( X _ 1 , X _ 2   ... )   =   H ( X _ 1 )   +   H ( X _ 2 | X _ 1 )   +   H ( X _ 3 |   X _ 1 ,   X _ 2 )   $ $   多个 事件 信息熵 等于 第一个 事件 信息熵 加上 第一个 事件 第二个 事件 再 信息熵 ， 以此类推 。   互信息   互信息 用来 衡量 两个 事件 相关度 。 互信息 定义 ：   $ $   I ( X ; Y )   =   H ( X )   -   H ( X | Y )   $ $   分 号 ， 逗号 ， 两个 事件 ， | Y 求 X 条件 概率 。   含义 X Y 互信息 Y 事件 X 事件 发生 信息熵 减少 量 。 假设 不 Y 事件 X 事件 信息量 = 2 ， Y X 事件 再 发生 信息量 = 1 ， X Y 互 信息量 = 1 。   假设 XY 不相干 ， XY 互 信息量 = 0 ； 假设 Y 事件 发生 X 事件 必 发生 ， XY 互 信息量 = X 信息熵 。   熵 链式 规则 ：   $ $   I ( X ; Y )   =   H ( X )   -   H ( X | Y )   =   H ( X )   +   H ( Y )   -   H ( X , Y )   $ $   熵 交叉熵   熵 称为 交叉熵 【 熵 交叉熵 两个 概念 ， 数学 之美上 说法 存疑 。 】 ， 机器学习 核对 学习 算法 误差 接触 ， 熵 用来 两个 取值 正数 函数 相似性 。   两个 完全相同 函数 ， 熵 0   熵 越 大 ， 两个 函数 差异 越大 ， 熵 越 小 ， 两个 函数 差异 越小 。   ， 熵 用来 衡量 两个 概率分布 函数 差异性   互信息 两个 事件 联合 分布 独立 分布 熵 ， 两个 事件 越 接近 独立 分布 ， 相关性 越小 ， 熵 越 小 ， 互信息 越小 ； 两个 事件 越 不 接近 独立 分布 ， 相关性 越大 ， 熵 越 大 ， 互信息 越大 。   统计 语言 模型   S   一连串 顺序排列 词语 ， S 文本 中 可能性 ， P ( S )   ，   利用 条件 概率 ：   $ $   P ( S )   =   P ( word1 ) P ( word2 | word1 ) P ( word3 | word1word2 ) ... P ( wordn | word1word2word3 ... wordn - 1 )   $ $   马尔科夫 假设   一连串 事件 序列 状态 发生 概率 只 依赖于 前 几个 状态 ， 这一 事件 序列 马尔科夫 链 。   只 依赖于 前 一个 词 ， 模型 称为 二元 模型 ， 一阶 马尔科夫 链 ， 记 作   bigram   依赖于 前 两个 词 ， 模型 称为 三元 模型 ， 二阶 马尔科夫 链 ， 记 作   trigram   二元 模型 例子 ， 计算 一句 话 概率 ：   $ $   P ( S )   =   P ( word1 ) P ( word2 | word1 ) P ( word3 | word2 ) ... P ( wordn | wordn - 1 )   $ $   \\ ( P ( w _ i | w _ { i - 1 } ) \\ )   一个 词 下 一个 词 条件 概率 ， 利用 条件 概率 ：   $ $   P ( w _ i | w _ { i - 1 } )   =   P ( w _ iw _ { i - 1 } ) / P ( w _ { i - 1 } )   $ $   令 句首 标记   < BOS >   令 句末 标记   < EOS >   。     \\ ( P ( w _ iw _ { i - 1 } ) \\ )   概率 两个 词 文本 中所 占 频率 ， 等于   目标 两个 词 序列 记数 / 总 文本 记数     \\ ( P ( w _ { i - 1 } ) \\ )   前 一个 词 次数 / 总 文本 数 ， ：   $ $   P ( w _ i | w _ { i - 1 } )   =   两个 词 序列 计数 / 前 一个 词 计数   $ $   请 参看 宗庆成 自然语言 第二 版 P85 例子 详细 理解 计算 一个 句子 概率 计算方法 。   大数 定理   试验 条件 下 ， 重复 试验 ， 随机 事件 频率 近似于 概率 。   高阶语言 模型   简单 二元 模型 只 假设 一个 词 只 词 相关 ， 假设 N - 1 词 词 相关 ， 模型 称为 N 元 模型 。   古德 - 图灵 估计   统计 一个 句子 概率 计算方法 ， 序列 语料库 （ 统计 文本 ） 中 ， 次数 极少 。 句子 概率 计算 都 估算 零 不 合适 。 古德 - 图灵 估计 解决 。   事件 ， 发生 概率 零 ， 概率 总量 中 分配 一个 很小 比例 给予 事件 。   计算公式 ：   $ $   N   =   \\ sum _ 1 &# 94 ; { \\ infty } r   N _ r   $ $   公式 含义 很 ， 1 次 （ r = 1 ） 词有 （   \\ ( N _ r \\ )   ） ， 逐个 相加 总 词数 。 写成 形式 会 简单 ：   $ $   N   =   1N _ 1   +   2N _ 2   +   3N _ 3   ...   $ $   古德 - 图灵 估计 假设 r 次 （ 小 才 会上 估计 ） 规律 （ 次数 低 ， 0 次 未知 ） ：   $ $   r &# 94 ; *   N _ r   =   ( r + 1 ) N _ { r + 1 }   $ $   公式 看起来 很 突兀 ， 理解 ：   $ $   N   =   2N _ 2   +   3N _ 3   +   4N _ 4   ...   $ $   次数 很少 词 次数 乘以 词 次数 大体 次数 加一 ， 上 次数 情况 估计 。 次数 很少 ， 公式 加 无穷大 ， 估计 损失 极小 。     \\ ( r &# 94 ; * \\ )   次 词 ， 概率 ：   $ $   P _ r   =   \\ frac { r &# 94 ; * } { N }   $ $   估计 方法 ， 还 剩下 一个   \\ ( 1N _ 1 \\ )   ， 未知事件 ， 未知事件 概率 估计 ：   $ $   P _ 0   =   \\ frac { N _ 1 } { N }   $ $   未知事件 概率 等于 1 次 词 计数 除以 总 词数 。   中文 分词   自然语言 相关 ， 自然语言 研究 上下文 相关 特性 建立 数学模型 ， 数学模型 常说 统计 语言 模型 （ Statistical   Language   Model ） 。   贾里 尼克 ：   一个 句子 ， 看 可能性 大小 。   有个 穷举 分词 方法 ： 这是 一个 动态规划 ， 利用 维特 算法 （ Viterbi ） 解决 。   讨论 ， 基于 统计 词典 ， 一个 可能性 句子 分词 方法 ， 兼顾 准确性 性能 最佳 方案 ， 后续 很多 方法 都 站 肩膀 上 ， 试着 更 好地解决 词典 完善 命名 实体 识别 。   隐 马尔科夫 模型   广义 通信模型   人 人 之间 语言 ， 形式 信息 交流 ， 都 看做 一种 广义 上 通信模型 ， 一个 信号 编码序列 某种 信息 载体 信道 中 发送 ， 接受者 接受 ， 转码 过程 。   找到 观测 信号 o1   o2   o3 ...   条件 概率 状态 信号   s1   s2   s3 ...   。   $ $   s _ 1 ,   s _ 2 ,   s _ 3 ,   \\ dots   =   \\ underset {   s _ 1 , s _ 2 , s3 , \\ dots } { \\ arg \\ max }   P ( s _ 1 , s _ 2 , s _ 3 , \\ dots   |   o _ 1 , o _ 2 , o _ 3 , \\ dots )   $ $   条件 概率 ：   $ $   s _ 1 ,   s _ 2 ,   s _ 3 ,   \\ dots   =   \\ underset {   s _ 1 , s _ 2 , s3 , \\ dots } { \\ arg \\ max }   \\ frac { P ( s _ 1 , s _ 2 , s _ 3 , \\ dots )   \\ cdot   P (   o _ 1 , o _ 2 , o _ 3 , \\ dots   | s _ 1 , s _ 2 , s _ 3 , \\ dots ) } { P ( o _ 1 , o _ 2 , o _ 3 , \\ dots ) }   $ $   最大值 ， 观测 信号 发射 概率 忽略 ：   $ $   s _ 1 ,   s _ 2 ,   s _ 3 ,   \\ dots   =   \\ underset {   s _ 1 , s _ 2 , s3 , \\ dots } { \\ arg \\ max }   P ( s _ 1 , s _ 2 , s _ 3 , \\ dots )   \\ cdot   P (   o _ 1 , o _ 2 , o _ 3 , \\ dots   | s _ 1 , s _ 2 , s _ 3 , \\ dots )   $ $   s1 , s2 - - >   o1 , o2   条件 概率 状态 信息 s1 ... 传输 后 接受者 接受 o1 ... 概率 。   s1 , s2 ... 发送 端 随机 过程 概率 。   计算 过程 利用 隐 马尔科夫 模型 计算 。   马尔科夫 模型   马尔科夫 模型 ， 比较简单 易懂 。 随机 过程 ， 假设 研究 一个 系统 ， 系统 随机 吐 出 信号 ， s1   s2   ...   系统 某种 激活状态 。 随机 过程 生成 图形 描述 ：   例子 来自 宗庆成 统计 自然语言 第二 版 P109 。   转移 矩阵 所示 ：   $ $   \\ begin { bmatrix } 0.3   &   0.5   &   0.2   \\ \\   0.5   &   0.3   &   0.2   \\ \\   0.4   &   0.2   &   0.4 \\ end { bmatrix }   $ $   观察 序列   名   动   形   名   概率   0.5   *   0.2   *   0.4   ， 详细 讨论 请 参看 宗庆成 统计 自然语言 第二 版 P109 。   习题 中 ， ， 马尔科夫 模型 其内 暗含 假定 ：   其内 随机 过程 马尔科夫 链 过程 ， 状态 只受 前 一个 状态 影响 。   隐 马尔科夫 模型   隐 马尔科夫 模型 讨论 上 ， 引入 东西 ， 观察 系统 s1   s2   状态 ， 只能 观察 系统 抛出来 信号   o1   o2 ... ， 讨论 广义 通信模型 接近 ， 正 隐 马尔科夫 模型 很 通用 ， 条件 机场 模型 站 隐 马尔科夫 模型 基础 上 ， 隐马 可夫 模型 其内 思想 内核 触及 广义 通信模型 内核 ， 广义 通信模型 用来 看待 信息 传输 ， 包括 自然语言 ， 人 沟通交流 看做 一种 信息 传输 过程 （ 想象 ， 人 机器语言 某种 人机交互 ， 符合 广义 通信模型 ） 。   而隐 马尔科夫 模型 说 观察   o1   o2   ...   系统 状态   s1   s2 相关 ， 这是 自然 。 隐 马尔科夫 模型 马尔科夫 链 过程 简单 模型 做 假定 ：   o1 只 s1 相关 ， o2 只 s2 相关 。   隐 马尔可夫 模型 大方向 没 ， 引入 马尔科夫 链 状态 相关性 做 太 简化 ， 条件 机场 模型 会 进一步 完善 。   讨论 ， 算是 理解 隐 马尔科夫 模型 。 数学 ...   会 提及 HMM 三个 ， 提 两个 算是 很 ：   训练 模型 ？   模型 ？   两个 ， 一个 鲍姆 - 韦尔奇 算法 ， 一个 维特 算法 。 没什么 好 说 ， 硬下 头皮 啃 数学 。   条件 机场   条件 机场 算是 广泛应用 中 一个 算法 ， 基于 HMM 隐 马尔可夫 模型 。   维特 算法   参考资料   数学 之美   第二 版   吴军 著   统计 自然语言   第二 版   宗成庆   脚注   请 读者 参看   知乎   maxdeath 讨论 。   ↩     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"自然语言处理",
            "url":"articles/nlp-talk-one.html"
        },
        {
            "title":"有向无环图",
            "text":"图论 ， 听 挺 高大 上 ， ， 数学家 画 圈圈 画线 线 还 很 乐趣 地方 。   线 方向 ， 无向 图 ， 线有 方向 ， 有向图 。   有向图 中 ， 任意 一个 节点 流向 流着 流着 都 流不回 ， 说 图为   无 环图   ， 英文 缩写   DAG ， （ directied   acyclic   graph ） 。   东西 ？   最先 接触   DAG   术语 ， 找 工作 流 软件 ， 一种 工作 流 通用 方法   DAG   。 ？ 假设 工作 流中 节点 员工 ， workflow 走 ， 闭环 ， 无限 循环 流程 中 ， 那可真 蠢 。   比如说   git   版本控制 ， 内部   无 环图 ， 版本 修改 修改 ， 回到 老 版本 ， 版本控制 失效 。   聪明 朋友 肯定 想到 宇宙 时间 不 可逆 ， 也就是说 模型 宇宙 信息 数据 变动 流 结构 ， 无 环图 。   python     algorithms 项目   有向图 代码 ， 存储 一个 字典 值 ， 再 加上 辅助 方法 ，   key   节点 值 ， 一个 列表 ， 存放 节点 节点 流向地 。 过程 很 好 理解 ， jieba 分词 中 ：   def   _ DAG   (     ,   sentence   ) :     .   check _ initialized   ( )   DAG   =   { }   N   =   len   (   sentence   )     k     xrange   (   N   ) :   tmplist   =   [ ]   i   =   k   frag   =   sentence   [   k   ]     i   <   N     frag       .   FREQ   :       .   FREQ   [   frag   ] :   tmplist   .   append   (   i   )   i   + =   1   frag   =   sentence   [   k   :   i   +   1   ]       tmplist   :   tmplist   .   append   (   k   )   DAG   [   k   ]   =   tmplist   return   DAG   大体 类似 。   实际操作 中 ， 对无环 条件 判断 ， 出乎 意料之外 。 图论 算法 ， 没什么 好 想 ， 图论 拓扑 排序 方法 判断 一个 有向图 是否是 无环 。   wiki 上 伪 代码 ， 下 看 ：   L   ←   Empty   list           sorted   elements   S   ←   Set       nodes       incoming   edge     S     - empty     remove   a   node   n     S   add   n     tail     L       node   m       edge   e     n     m     remove   edge   e       graph     m         incoming   edges     insert   m     S     graph     edges     return   error   ( graph           cycle )     return   L   ( a   topologically   sorted   order )   算法   Kahn   算法 ， 思路 请 读者 假想 目标 研究 有向图 一个 闭环 ， 闭环 节点 都 箭头 ， 不 set   S ， 算法 中 只   m   中 选中 ， 闭环 中 节点 n 中 ， 算法 再 运算 ， 语句 闭环 中 m 来说 都 成立 。   假设 几个 节点 都 入口 ， 顺藤摸瓜 ， 逐个 删除 节点 都 放到 S 去 。   一个 担心 ， 算法 终止 ， 闭环 。 初步 判断 闭环 内 节点 m S ， 节点 慢慢 会 放入 L 。 OK ， 写 代码 ， 再 看 。   代码 参考 提及   algorithm   项目 之外 ，   还 参看   网页   ， 深度 优化 。   # ! / usr / bin / env   python   #   - * -   coding :   utf - 8   - * -     copy   import   deepcopy     collections   import   defaultdict   import   logging   logger   =   logging   .   getLogger   (   __ __   )   class   CyclicError   (   Exception   ) :   pass   class   DAG   ( ) :   def   __ init __   (     ) :     .   _ dag   =   defaultdict   (   list   )     .   _ vertex _ count   =   0     .   _ edge _ count   =   0   @ property   def   data   (     ) :   return     .   _ dag   @ property   def   vertex _ count   (     ) :   \" \" \"   Returns     number     vertices       graph .   Worst   Case   Complexity :   O ( 1 )   \" \" \"   return     .   _ vertex _ count   @ property   def   edge _ count   (     ) :   \" \" \"   Returns     number     edges       graph .   Worst   Case   Complexity :   O ( 1 )   \" \" \"   return     .   _ edge _ count   def   add _ edge   (     ,   src   ,   dest   ) :   \" \" \"   Adds     undirected   edge   ' src ' - ' dest '       graph .   Worst   Case   Complexity   O ( 1 )   \" \" \"   def   _ add _ edge   (     ,   src   ,   dest   ) :     src       .   _ dag   :     dest         .   _ dag   [   src   ] :     .   _ dag   [   src   ]   .   append   (   dest   )     .   _ edge _ count   + =   1     :   logger   .   warning   (   ' src - > dest     exists '   )     :     .   _ dag   [   src   ]   =   [   dest   ]     .   _ vertex _ count   + =   1     .   _ edge _ count   + =   1     dest         .   _ dag   :     .   _ dag   [   dest   ]   =   [ ]     .   _ vertex _ count   + =   1   backup   =   deepcopy   (     )   _ add _ edge   (   backup   ,   src   ,   dest   )       backup   .   sort   ( ) :   raise   CyclicError     :   _ add _ edge   (     ,   src   ,   dest   )   def   remove _ edge   (     ,   src   ,   dest   ) :   \" \" \"   remove   edge   src   - >   dest   \" \" \"     src       .   _ dag   :     dest       .   _ dag   [   src   ] :     .   _ dag   [   src   ]   .   remove   (   dest   )     .   _ edge _ count   - =   1     :   raise   ValueError     :   raise   ValueError   ##   clear   data       .   indegree   (   src   )   = =   0       .   outdegree   (   src   )   = =   0   :     src       .   _ dag   :   del     .   _ dag   [   src   ]     .   _ vertex _ count   - =   1       .   indegree   (   dest   )   = =   0       .   outdegree   (   dest   )   = =   0   :     dest       .   _ dag   :   del     .   _ dag   [   dest   ]     .   _ vertex _ count   - =   1   def   adjacent   (     ,   src   ) :   \" \" \"   Returns     vertices   adjacent     vertex   ' src ' .   Worst   Case   Complexity :   O ( 1 )   \" \" \"   return     .   _ dag   [   src   ]   def   outdegree   (     ,   src   ) :   \" \" \"   Returns     degree       vertex   ' src '   Worst   Case   Complexity :   O ( 1 )   \" \" \"   count   =   0     src       .   _ dag   :   count   =   len   (     .   _ dag   [   src   ] )   return   count   def   indegree   (     ,   src   ) :   \" \" \"   Returns       degree       vertex   ' src '   \" \" \"   count   =   0     k   ,   v       .   _ dag   .   items   ( ) :     src     v   :   count   + =   1   return   count   @ property   def   vertices   (     ) :   \" \" \"   Returns     iterable         vertices       graph .   Worst   Case   Complexity :   O ( V )   \" \" \"   return     .   _ dag   .   keys   ( )   def   __ str __   (     ) :   s   =   [ ]   s   .   append   (   \" { 0 }   vertices     { 1 }   edges   \\ n   \"   .   format   (     .   vertex _ count   ,     .   edge _ count   ) )     key       .   vertices   :   s   .   append   (   \" { 0 } :   \"   .   format   (   key   ) )     val       .   adjacent   (   key   ) :   s   .   append   (   \" { 0 }   \"   .   format   (   val   ) )   s   .   append   (   \"   \\ n   \"   )   return   \" \"   .   join   (   s   )   def   __ repr __   (     ) :   s   =   [ ]     key       .   vertices   :   s   .   append   (   \" { 0 } :   \"   .   format   (   key   ) )     val       .   adjacent   (   key   ) :   s   .   append   (   \" { 0 }   \"   .   format   (   val   ) )   s   .   append   (   \"   \\ n   \"   )   return   ' '   .   join   (   s   )   def   sort   (     ) :   \" \" \"   L   ←   Empty   list           sorted   elements   S   ←   Set       nodes       incoming   edge     S     - empty     remove   a   node   n     S   add   n     tail     L       node   m       edge   e     n     m     remove   edge   e       graph     m         incoming   edges     insert   m     S     graph     edges     return   error   ( graph           cycle )     return   L   ( a   topologically   sorted   order )   \" \" \"   target   =   deepcopy   (     )   top _ order   =   [ ]     collections   import   deque   queue   =   deque   ( )     k     target   .   vertices   :     target   .   indegree   (   k   )   = =   0   :   queue   .   append   (   k   )   logger   .   debug   (   ' queue   append   { 0 } '   .   format   (   k   ) )     queue   :   n   =   queue   .   pop   ( )   top _ order   .   append   (   n   )     m       .   adjacent   (   n   ) :   target   .   remove _ edge   (   n   ,   m   )   logger   .   debug   (   ' remove   n - > m   { 0 }   { 1 } '   .   format   (   n   ,   m   ) )     target   .   indegree   (   m   )   = =   0   :   logger   .   debug   (   ' append   { 0 } '   .   format   (   m   ) )   queue   .   append   (   m   )     len   (   top _ order   )   ! =   len   (     .   vertices   ) :   return   False     :   return   top _ order",
            "tags":"算法",
            "url":"articles/directied-acyclic-graph.html"
        },
        {
            "title":"jupyter notebook",
            "text":"magic   function   运行 python 脚本   % run   test   .   py   运行 python 脚本 ， 变量 会 赋值   运行 系统 命令   ! cat   text . txt   windows 下 ：   ! type   text . txt   脚本 命令 运行 计时   % timeit     更好 集成 matplotlib   % matplotlib   inline",
            "tags":"python好伙伴",
            "url":"articles/jupyter-notebook.html"
        },
        {
            "title":"powershell入门",
            "text":"简介   linux 系统 做 服务器 环境 下 玩 东西 ， 竟然 windows 服务器 下 做 东西 ， python 一块 都 还好 ， 很多 python 模块 都 支持 windows 系统 ， 很多 linux 系统 相关 进程 东西 差异 。   项目 中 确实 需求 ， 数据处理 一块 ， 后台 进程 多个 杂 ， luigi 模块 更 关注 工作 流 ， 进程 毫无关系 ， 开 两个 进程 。 linux 系统 下 ， 进程 开启 后台 管理 bash 脚本 编写 都 基本功 ， wondows 下 感觉 一块 学习 接触 好 。   bat 脚本 针对 cmd ， powershell 越来越 主流 ， powershell 功能 强大 完善 ， powershell 不 熟悉 。   本文 作者 ， 写 ， 题目 权记作   powershell   入门 。   powershell 脚本 后缀   ps1   ， 编写 powershell 第一个 挫折 会 提示 权限 执行 脚本 ， 这是 windows 默认 安全策略 ， 管理员 身份 运行 ：   set - executionpolicy   remotesigned   启动 一个 进程   Start - Process   - FilePath   \" ping . exe \"   - Args   \" www . baidu . \"   进程 输出 重定向 ：   Start - Process   - FilePath   \" ping . exe \"   - Args   \" www . baidu . \"   - RedirectStandardOutput   ' . \\ console . '   - RedirectStandardError   ' . \\ console . err '   获取 当前工作 目录   例子 讲解 powershell 定义 变量 字符串 中 变量 知识 。   $ curpath   = $ (   Convert - Path   . )   echo   $ curpath   cd   \" $ curpath \\ logs \"   echo   $ (   Convert - Path   . )   cd   $ curpath   熟悉 脚本 例子 ， 基本上 子 命令 调用 返回 ， 字符串 中 变量 替换 ， 引用 变量 都 看 。",
            "tags":"others",
            "url":"articles/powershell-tutorial.html"
        },
        {
            "title":"elasticsearch数据库",
            "text":"简介   需求 ： 数据库 全文 搜索 支持 很 好 ， mongodb 中文 全文 搜索 支持 企业 版才 功能 ， 估计 中文 分词 效果 太好 ， elasticsearch 专注 数据库 搜索 ， 术业 专攻 ， 搜索 需求 ， elasticsearch 解决 。   推荐 elasticsearch   中文 插件 版   ， 集成 很多 中文 支持 插件 ， elasticsearch 官方 内置 中文 分词 效果 很 不好 ， 集成   ik 分词 插件   ， 分词 效果 。 项目 新手 马上 上路 ， 一个 还 算 效果 ， 精力 再 进一步 优化 。   elasticsearch python 接口 官方   elasticsearch - py   ， 编写 代码 强烈推荐   elasticsearch - dsl - py   项目 ， 基于   elasticsearch - py   项目 ， 提供 更 便捷 接口 封装 。   elasticsearch 数据库 结构 类似 mongodb ， 一条 记录 称为 一个 文档 （ doc ） ， 一个 文档 大体 一个 字典 值 ， 字典 套 字典 那种 。 一个 索引 （ index ） 概念 ， 大体 类似 database ， 一个 type 概念 ， 大体 类似 collections 。 elasticsearch nosql 数据库 ， nosql 数据库 存储 时 很 一个 思路 ， 一个 文档 一个 doc 一个 实体 。   elasticsearch 基于 Lucene ， 下 ， 喝水 不 忘 挖井 人 。   elasticsearch windows 下 安装 很 简单 ， 下载 好 代码 ， 解压 运行 bin 文件夹   elasticsearch . bat   文件 即可 ， 先 安装 好 java ， 配置 好   JAVA _ HOME   变量 。 下载安装 jdk ， PATH 里 添加 jdk bin 所在 目录 即可 。   运行   localhost : 9200   打开 看 ， 文字 响应 elasticsearch 运行 。   本文 例子   本文 例子 中   book _ info     index ， elasticsearch 版本   6.2   ， 默认   doc _ type     doc   搜索 文档   elasticsearch 不 搜索 ， 会 更 讨论 python   api 接口 ， 简单 elasticsearch 搜索 操作 ， 有个 大体 概念 。   搜索   GET   / book _ info / _ search   给出 搜索 关键词 ， 返回 目标 index 文档 。 有用 信息 ， 返回 格式 详细 讲讲 :   {   \" \" :   11 ,   \" timed _ \" :   false ,   \" _ shards \" :   {   \" total \" :   5 ,   \" successful \" :   5 ,   \" skipped \" :   0 ,   \" failed \" :   0   } ,   \" hits \" :   {   \" total \" :   4223547 ,   \" max _ score \" :   1 ,   \" hits \" :   [   {   \" _ index \" :   \" book _ info \" ,   \" _ type \" :   \" doc \" ,   \" _ id \" :   \" 5aa2349e7227a6501fba4653 \" ,   \" _ score \" :   1 ,   \" _ source \" :   {   \" unique _ id \" :   \" 5aa2349e7227a6501fba4653 \" ,   \" \" :   \" 史上 最强 少年 阿武 \" ,   \" author \" :   \" 最强 绅士 物语 \" ,   \" book _ type \" :   \" 同人小说 \" ,   \" title \" :   \" 9 章   ...   }   }   }   }   先 关注 最 核心 hits 字段 ， 其内 ：   total   总共 找到   max _ score   得分   hits   搜索 记录 信息 ，   _ index   目标 记录 索引   _ type   目标 记录   doc _ type   _ id   目标 记录 id   _ score   目标 记录 搜索 得分   _ source   目标 记录 内容   DSL 查询 表达式   搜索 会 一种 查询语言 ， DSL （ 领域 特定 语言 ） 。 东西 支持 非常复杂 搜索 ， 查询 表达式 。   搜索 ， 讲 ， index 数据结构 设计 很 ， content   设计   Text   字 段 ， 设置 好 中文 分词 全文 搜索 ， 再     Keyword   字 段 ， match 搜索 精确 匹配 模式 。   GET   / book _ info / _ search   {   \" query \"   :   {   \" match \"   :   {   \" \"   :   \" 未来 霸气 小吃 货 \"   }   }   }   content 字段 全文 搜索 ，   match   query 词 。   GET   / book _ info / _ search   {   \" query \"   :   {   \" match \"   :   {   \" content \"   :   \" 未来 霸气 小吃 货 \"   }   }   }   size 分页       size   字 段   query 字段   DSL 语言 最靠 前 三个 字 段 ， 更 DSL 查询 语句 都   query 字段 字典 套 字典 。   GET   / book _ info / _ search   {   \" query \"   :   {   \" match \"   :   {   \" content \"   :   \" 未来 霸气 小吃 货 \"   }   } ,   \" \"   :   30   ,   \" size \"   :   10   }   高亮 搜索   第一级   query   平行 关系 ， 额外 返回 一个   highlight   搜索 匹配 高亮 信息 。   \" query \"   :   {   \" match \" :   {   \" content \" :   \" kimchy \"   }   } ,   \" highlight \"   :   {   \" fields \"   :   {   \" content \"   :   { }   }   }   查询 语句   match _   都 没 说 下 默认 查询 ， 过滤 操作   match   全文 搜索 精确 匹配 ， match 都   multi _ match   多字段 查询   range   限定 区间 内 数字 时间   term   数字 ， 时间 ， 布尔值 不 分析 文本 精确 匹配   terms   多个 候选 项 匹配   exists   查 字 段   字 段 查询 Argument   \" match \" :   {   \" title \" :   {   \" query \" :   \" BROWN   DOG ! \" ,   \" operator \" :   \" \"   }   match 下 指明 字段 查询 ， 上 结构 ，   query   查询 词 ， 平行 还 指定 更 Argument ， ：   operator   多词 查询 默认 逻辑 ， 设置 逻辑 ，   minimum _ _ match   最小 匹配 度 ，   boost   字 段 评分 权重 加大   bool 组合 查询   bool 下 三个 字 段值 （ ,   _ ,   ） ， 组合 查询 逻辑 。 （   _ ,   逻辑       ）   ' query ' :   {   ' bool ' : {   ' ' :   { ' match ' :   { ' source ' :   ' ' ,   }   } ,   ' ' :   {   ' match ' :   { ' content ' :   q   }   }   }   }   例子 content q 字段 搜索 ， source 字段 ' ' 。 bool 组合 查询 用于 过滤 语句 。   bool 还 加上   filter   执行 过滤 逻辑 ， 查询 参与 评分 ， 过滤 不 参与 评分 。   DSL   查询 语句 很 很多 复合 查询 语句 拼成 ， bool 一个 ， dis _ max   一个 ， ， 再 。   多字段 搜索     multi _ match   多个 字 段 搜索 。 所示 ，   {   \" query \"   :   {   \" multi _ match \"   :   {   \" query \"   :   \" elasticsearch   guide \"   ,   \" fields \"   :   [   \" title \"   ,   \" summary \"   ]   }   } ,   }   默认 搜索 类型   _ fields   找到 得分 字 段 ， 得分 得分 。   \" dis _ max \" :   {   \" queries \" :   [   {   \" match \" :   {   \" title \" :   \" elasticsearch   guide \"   } } ,   {   \" match \" :   {   \" summary \" :   \" elasticsearch   guide \"   } }   ] ,   }   等于 一个   dis _ max   复合 查询 语句 。   dis _ max   执行 多个 查询 语句   tie _ breaker   因素 ， tie _ breaker   默认 0 ， 就是指 得分 字 段 查询 得分 。   多字段 搜索 第二个 类型   _ field   ， 字段 查询 得分 会 相加 。   多字段 搜索 第三个 类型   cross _ field   ，   其会 多个 字 段 合并 计算 出 一个 得分 。   多字段 搜索 情况 很 ， 默认 类型 ， 还要 写出 一个 很 复合 查询 语句 。   更好 写 字 段 搜索   小节 参考 这篇   不错 文章   。   插入 文档   PUT   / book _ info / doc / < id >   {   \" field _ \" :   1111 ,   \" field _ \" :   \" abcdefg \"   }     < id >   指定 目标 记录 文档 存储   _ id   。   定向 id 取出 文档   GET   / book _ info / doc / < id >   更新 文档   PUT   / book _ info / doc / < id >   {   \" field _ \" :   1111 ,   \" field _ \" :   \" abcdefg \"   }   插入 文档 类型 ， 返回   _ version   会加 1 ， 旧版本 文档 会 ， elasticsearch 会 慢慢 删除 旧版本 文档 。   更新 文档   更新 文档 提到 版本控制 更新 文档 本质区别 ， 一个 便捷 内部 api ， 更新 文档 删除 旧 文档 过程 。   POST   / book _ info / doc / < id > / _ update   {   \" doc \"   :   {   \" tags \"   :   [   \" testing \"   ] ,   \" views \" :   0   }   }   更新 文档 原 文档 合并 ， 覆盖 写 上 已有 字 段 新增 新 字 段 。   删除 文档   DELETE   / book _ info / doc / < id >   删除 文档 删除 文档 ， 文档 标记 已 删除 ， es 会 自动 删除 文档 。   python 对接   elasticsearch _ dsl   刚 很 推荐 ， 尽可能   elasticsearch - py   模块 ， 内部 doc 语法   官方 文档   教程 都 ， 原生 查询 语句   kibana 上 很 好 输入 测试 。 查询 语句 繁琐 点 ， 开个 python 脚本 文件 统一 管理 。   创建 索引   elasticsearch   数据库   index   索引 概念 ， 一个   doc _ type   概念 ， 不   doc _ type   ， 发现 大体 ， 刚   doc _ type   概念 。     datetime   import   datetime     elasticsearch   import   Elasticsearch   es   =   Elasticsearch   ( )   res   =   es   .   index   (   index   =   \" test - index \"   )   print   (   res   [   ' created '   ] )   elasticsearch 数据库 默认 开启 自动 创建 索引 ， 删除 索引 操作 暂时 先 不 涉及 ， 集中精力 搜索 修改 数据库 弄清楚 。   忽略 连接 异常   编程 希望 忽略 连接 异常 ， 加上   ignore   参数 即可 ：     elasticsearch   import   Elasticsearch   es   =   Elasticsearch   ( )   #   ignore   400       IndexAlreadyExistsException     creating     index   es   .   indices   .   create   (   index   =   ' test - index '   ,   ignore   =   400   )   #   ignore   404     400   es   .   indices   .   delete   (   index   =   ' test - index '   ,   ignore   =   [   400   ,   404   ] )   返回 内容 过滤   search 方法 加上   filter _ path   参数 指明 只 属性 。   es   .   search   (   index   =   ' test - index '   ,   filter _ path   =   [   ' hits . hits ._ id '   ,   ' hits . hits ._ type '   ] )   搜索   搜索 格式 所示 ：   res   =   es   .   search   (   index   =   \" test - index \"   ,   body   =   {   \" query \"   :   {   \" match _ \"   :   { } } } )   print   (   \" Got   % d   Hits : \"   %   res   [   ' hits '   ] [   ' total '   ] )     hit     res   [   ' hits '   ] [   ' hits '   ] :   print   (   \"   % ( timestamp ) s   % ( author ) s   :   % ( text ) s   \"   %   hit   [   \" _ source \"   ] )   更新 文档     Elasticsearch   对象   update     update _ _ query   方法 ， 参数 ：   def   update ( ,   index ,   doc _ type ,   id ,   body = None ,   params = None )   看 下 源码 ， update 方法 前 几个 都 必填 参数 。   update _ _ query ：   def   update _ _ query ( ,   index ,   doc _ type = None ,   body = None ,   params = None )   不太 ， 同步 存储 风格 会 更好 一点 ， elasticsearch 文档 版本控制 ， 旧 文档 会 慢慢 自动 删除 。   同步 存储   同步 存储   elasticsearch - dsl   模块 很 ， 官方 文档 推荐   DocType   ， 所示 ：   class   Post   (   DocType   ) :   title   =   Text   ( )   title _ suggest   =   Completion   ( )   created _   =   Date   ( )   published   =   Boolean   ( )   category   =   Text   (   analyzer   =   html _ strip   ,   fields   =   {   ' raw '   :   Keyword   ( ) }   )   class   Meta   :   index   =   ' blog '   def   save   (     ,   * *   kwargs   ) :     .   created _   =   datetime   .     ( )   return   super   ( )   .   save   (   * *   kwargs   )   连接 推荐 设置 默认 连接 风格 ：     elasticsearch _ dsl . connections   import   connections   connections   .   create _ connection   (   hosts   =   ' localhost '   ,   timeout   =   20   )   调用   DocType     init   方法 ：   Post . init ( )   赋值   save   。   指定 字段 es _ id   小节 参考   网页   。   设置   . meta . id   属性 ：   def   save ( ,   * * kwargs ) :   \" \" \"   自动 填充 doc 创建 时间   自动 填充 _ id   unique _ id   \" \" \"   . created _   =   datetime . utcnow ( )   . meta . id   =   . unique _ id   super ( ) . save ( * * kwargs )   附录   插入 点 数据   数据库 学习 总要 先 往里面 插入 点 数据 ， 再 好 戏 出不来 。   阮 一峰 elasticsearch 数据库 入门教程   描述 ， 参考   篇文章   ， 说 elasticsearch5 一个 index 下 多个 type ， elasticsearch6 一个 index 下 只能 一个 type ， elasticsearch7 下 移除 type 概念 ， 简单 。 来看   elasticsearch - dsl - py   项目 提供   插入 数据   类似   model   段 代码 ：   class   Article   (   DocType   ) :   title   =   Text   (   analyzer   =   ' snowball '   ,   fields   =   {   ' raw '   :   Keyword   ( ) } )   body   =   Text   (   analyzer   =   ' snowball '   )   tags   =   Keyword   ( )   published _   =   Date   ( )   lines   =   Integer   ( )   class   Meta   :   index   =   ' blog '   刚 没 意识 ， 意识 ， 操作 ， 网上   elasticsearch 权威 指南   本书 描述 很 不 ， 定义 elasticsearch 数据模型 ， 下 index 之外 ， doctype 名字 没 定义 ， 发现 大部分 搜索 工作 都 没管 ， 还 不 放心 ， 放心 ， 思考 elasticsearch 数据库 架构 ， 丢弃 type 概念 。   提醒 读者 ， 移除 过程 ， 仔细 核对 下 elasticsearch 数据库 返回 数据结构 信息 。   自定义 插件   脱离 提及 elasticsearch 中文 插件 版 ， elasticsearch 最新 版本 6 . X ， 初步 琢磨 下 安装 分词 插件 。 JAVA 那块 太 熟悉 ， 慢慢来 。   插件 两种 安装 方法 ， 绿色版 推荐 插件 安装 放在   plugins   文件夹 ， 推荐 找到 elasticsearch bin 文件夹 ， 调用   . / bin / elasticsearch - plugin   命令 ， 大体 所示 ：   . / bin / elasticsearch - plugin   install   https : / / github . / medcl / elasticsearch - analysis - ik / releases / download / v6.2 . 2 / elasticsearch - analysis - ik - 6.2 . 2 . zip   重启 elasticsearch 服务 即可 。   开启 外 网 端口   程序 host 配置   config     elasticsearch . yml   中 配置 ：   network . host :   0.0 . 0.0   正式 产品 运营 不 设置   0.0 . 0.0   ， 任何人 都 访问 。   Kibana   kibana ， 简单 来说 pgadmin 之于 postgresql ， 一个 图形界面 查看 elasticsearch 数据库 工具 。   Dev   Tools   学习 elasticsearch 语法 特别 有用 ， 更 细节 请 参看 官方 文档 。   查看 集群 健康   GET   _ cluster / health   备份   elasticsearch 备份 建立 快照 概念 ， 快照 增量 备份 策略 。   新建 一个 快照 仓库   PUT   _ snapshot / backup   {   \" type \" :   \" fs \" ,   \" settings \" :   {   \" location \" :   \" / path / / elasticsearch / backup \"   }   }   记得 elasticsearch 配置文件   elasticsearch . yml   配置 好 ：   path . repo   :   [ \" / path / / elasticsearch / backup \" ]   新建 一个 快照   PUT   _ snapshot / backup / snapshot _ 1   查看 已有 快照   GET   _ snapshot / backup / _   删除 目标 快照   DELETE   _ snapshot / backup / snapshot _ 1   插件   列出 插件   bin / elasticsearch - plugin   list   安装 插件   bin / elasticsearch - plugin   install   [ pluginname ]   移除 插件   bin / elasticsearch - plugin   remove   [ pluginname ]   参考资料   Elasticsearch :   权威 指南   IT 自学 教程 Elastic 全文检索   23 有用 elasticsearch 查询 例子   elasticsearch 入门教程",
            "tags":"数据库",
            "url":"articles/elasticsearch-database.html"
        },
        {
            "title":"luigi模块",
            "text":"简介   luigi 模块 很早以前 接触 ， 特别 需求 模块 处于 一种 浅尝辄止 状态 。 数据处理 ， 感觉 一个 大 框架 管理 小 数据处理 脚本 ， 使 自动化 流程化 。 找 软件 ， 发现 相关 软件 少 杂而多 ， 请 读者 参看   篇文章   。   项目 证明 程序员 软件 需求 很 ， 杂乱 ， 大概 两三百 ， scrapy django 那种 特别 出色 脱颖而出 项目 ， 令人遗憾 。 间接 ， 这方面 ， 恐怕 程序员 编写 定制 代码 ， 工具 。   我选 luigi 学习 原因 无非 二 ：   python   github 星数 前   luigi 不 太 满意 ， 官方 文档 一部分 原因 ， 这块 需求 特别 一部分 原因 ， ？ 硬着头皮 学习 ， 再 慢慢 定制 。   定义   定义 ， 继承   luigi . Task   ， 其内 含义 方法 ：   run   执行 动作   output   描述 输出 对象   requires   描述 依赖   requires   返回 对象 对象 列表 ， 前置 。 看得出来 对象 参数 区别对待 ， 依赖于 对象 ， 参数 前 日期 时间 ， 上 再 执行 。   依赖于 Target   创建 一个   ExternalTask   ：   class   LogFiles   (   luigi   .   ExternalTask   ) :   date   =   luigi   .   DateParameter   ( )   def   output   (     ) :   return   luigi   .   contrib   .   hdfs   .   HdfsTarget   (     .   date   .   strftime   (   ' / log / % Y - % m -   % d   '   ) )   依赖于 外部 文件 对象 ， 目标 文件 对象 创建 ， 才 会 。   Parameter 对象   类 定义   Parameter   对象 ， 命令行 调用 ， 提供 参数 。   date   =   luigi . DateParameter ( default = datetime . date . today ( ) )   date _ interval   =   luigi . DateIntervalParameter ( )   _ hadoop   =   luigi . BoolParameter ( )   input 方法   input 方法 luigi 框架 对象 调用 前 依赖 输出 对象 便捷 方法 ，   . input   ，   requires   Target   对象 ， 或者说 调用   . input ( )   实际上   . requires ( )   输出 。   运行   luigi   - - module   autowriting . workflow   examples . HelloWorldTask   - - local - scheduler   生产 环境 会 去掉   - - local - scheduler   中央 调度 器 ，   luigid   开启 。   默认 localhost   8082   端口 监视 画面 。   Target 对象   描述 观察 对象 ， 硬盘 里 文件 数据库 里 某条 记录 ， 内部 唯一 含义 方法   exists   ， 用来 判断 目标 对象 ， 返回 True ， 不 返回 False 。   LocalTarge   描述 本地 磁盘 文件 对象   luigi . contrib . mongodb . MongoTarget   mongodb   target   luigi . contrib . mongodb . MongoCellTarget   mongodb doc 属性   luigi . contrib . mongodb . MongoRangeTarget   mongodb doc 属性   ​   日志 管理   luigi   日志 不 做 调配 ， 默认   luigi - interface   流 打印 终端 。 所示 ：   def   setup _ interface _ logging   (   conf _ file   =   ' '   ,   level _   =   ' DEBUG '   ) :   #     a   variable       function   object     determine         run       getattr   (   setup _ interface _ logging   ,   \" _ run \"   ,   False   ) :   return     conf _ file   = =   ' '   :   #     log   config   ,   setup   default   logging   level   =   getattr   (   logging   ,   level _   ,   logging   .   DEBUG   )   logger   =   logging   .   getLogger   (   ' luigi - interface '   )   logger   .   setLevel   (   level   )   stream _ handler   =   logging   .   StreamHandler   ( )   stream _ handler   .   setLevel   (   level   )   formatter   =   logging   .   Formatter   (   '   % ( levelname ) s   :   % ( message ) s   '   )   stream _ handler   .   setFormatter   (   formatter   )   logger   .   addHandler   (   stream _ handler   )     :   logging   .   config   .   fileConfig   (   conf _ file   ,   disable _ existing _ loggers   =   False   )   setup _ interface _ logging   .   _ run   =   True   运行 luigi 命令 工作 目录 下 写 上 配置文件   luigi . cfg   :   [ core ]   logging _ conf _ file   =   luigi _ logging . cfg     luigi _ logging . cfg   写 上 logging 配置 ：   [ loggers ]   keys   =   luigi , root   [ logger _ luigi ]   handlers   =   custom   qualname   =   luigi   level   =   DEBUG   propagate   =   0   [ logger _ root ]   handlers   =   output   [ formatters ]   keys   =   simple   [ formatter _ simple ]   format   =   % ( asctime ) s   % ( ) s   [ % ( levelname ) s ]   % ( thread ) d   % ( module ) s   % ( funcName ) s   % ( lineno ) s :   % ( message ) s   [ handlers ]   keys   =   output , custom   [ handler _ output ]   class   =   StreamHandler   formatter   =   simple   args   =   ( sys . stdout , )   [ handler _ custom ]   class   =   FileHandler   formatter   =   simple   args   =   ( ' logs / luigi . log ' , )   日志 输出 指定 文件 下 。   请 进一步   参看   logging . config . fileConfig   中 配置文件 写法 。 luigi 脚本 中   logger ：   import   logging   logger   =   logging   .   getLogger   (   ' luigi '   )   遗留 ：   更 logger   - >   多些 几个 。   RotateFileHandler   加载   - >   写法 ：   class   =   logging   .   handlers   .   RotatingFileHandler   args   = (   ' logs / elasticsearch _ sync . log '   ,   ' a '   ,   200000   )   测试 logger   qualname   参数 省略 。   NOTICE   :   logger 放在 类 ， 引用 脚本 会 环境污染 。   一个   都 执行 。   class   AllReports   (   luigi   .   WrapperTask   )   :   date   =   luigi   .   DateParameter   (   default   =   datetime   .   date   .   today   ( ) )   def   requires   (     )   :   yield   SomeReport   (     .   date   )   yield   SomeOtherReport   (     .   date   )   yield   CropReport   (     .   date   )   执行 循环   luigi   - - module   _ reports   RangeDailyBase   - -   AllReports   - - start   2015 - 01 - 01",
            "tags":"python好伙伴",
            "url":"articles/luigi-module.html"
        },
        {
            "title":"mongodb",
            "text":"简介   mongodb 一款 主流 nosql sql 数据库 区别 很大 ， 类似 ， mongodb collection 概念 大体 类似 table ， ， 摒弃 思维 。 mongodb sql 两个 优点 ， 开发 好好 ， sql 思维 自我 设限 。   mongodb 不 一个 collection 文档 chema 简单 说 ， key 。   sql join 思维 带入 进来 ， 更好 利用 mongodb 字典 套 字典 ， 列表 塞 字典 特性 。 数据结构 ， mongodb 查询 语法 ， 速度 很快 。   user _ doc   =   dbh   .   users   .   find _   ( {   \" facebook . username \"   :   \" foofacebook \"   } )   看 例子 ， 本来 一个 doc （ mongodb 最小 一条 记录 doc ） 大概 类似 一个 字典 ， 还 点着 去 查询 ， ， 字典 放 字典 ， 放心 ， 结构 速度 保证 。   安装   本来 安装 不想 说 ， 历史 原因 ， ubuntu 下 东西 放在 ， 读者 。   ubuntu 下 安装 ：   sudo   apt   install   mongodb   mongo 命令 client 接口 ， mongod 命令 服务端 接口 。 默认 开启 mongod 后台 服务 ， 看 ：   sudo   service   - - status -   mongodb 后台 服务 默认 端口   27027   ，   mongod   指定 数据库 存放 位置 开启 端口号 ：   mongod   - - dbpath   ~ / mongodb   - - port   12321   默认 mongodb 数据库 存放 点   / var / lib / mongodb   。   robomongo   一个 不错 图形界面 管理 mongodb 软件 ， 强烈推荐 。 基本上 mongo 命令 需求 ， 列出来 东西 ：   show   dbs   显示 数据库   db   显示 数据库 名字     dbname   切换 数据库 创建 数据库 ， 新建 一个 数据库 还 往里面 塞点 东西 。 :   db . users . save ( { username : ' zhangsan ' } )   show   collections   显示 数据库 colletions 名字 。   exit   退出 mongo   pymongo   mongodb 数据类型   pymongo ， 很多 python 中 数据类型 都 数据类型 中 ， 很大 ， 数据类型 需求 ， 查阅 文档 。   值得一提 python datetime 模块 datetime 对象 用来 Date 类型 pymongo 接受 。     ObjectId   查询 ：   find _ ( { ' _ id ' :   target [ ' _ id ' ] } )   引用 ， 进一步 执行   ObjectId   ：     bson   import   ObjectId   mongodb 数据 json 文件   参考   网页   ， 比如说 想要 mongodb 数据 读出来 存到 json 文件 中 ， 会 错误 ：   TypeError   :   ObjectId   (   ' '   )       JSON   serializable   json 文件 读入 写入 操作 ， 推荐 风格 所示 ：   > > >     bson   import   Binary   ,   Code   > > >     bson . json _ util   import   dumps   > > >   dumps   ( [ {   ' foo '   :   [   1   ,   2   ] } ,   ...   {   ' bar '   :   {   ' '   :   ' world '   } } ,   ...   {   ' code '   :   Code   (   \" function   x ( )   {   return   1 ;   } \"   ) } ,   ...   {   ' bin '   :   Binary   (   \" • • • • \"   ) } ] )   额外 提醒 读者 ， bson 模块 ， 安装 pymongo 自动 安装 。   bson . json _ util     dumps   loads   很 有用 ，   bson   提供 很多 mongodb 数据类型 支持 ， 提及   ObjectId   Binary   Code   。   连接 数据库   代码 想 ， repset 连接 mongodb 集群 写法 。     pymongo   import   MongoClient     pymongo . errors   import   ConnectionFailure   def   _ mongodb _ client   (   host   =   ' localhost '   ,   dbport   =   27017   ,   repset   =   None   ) :   dbport   =   int   (   dbport   )     :     repset     None   :   mongodb _ client   =   MongoClient   (   ' mongodb : / / { } / '   .   format   (   host   ) ,   port   =   dbport   )     :   mongodb _ client   =   MongoClient   (   ' mongodb : / / { } / '   .   format   (   host   ) ,   replicaset   =   repset   ,   port   =   dbport   )   return   mongodb _ client     ConnectionFailure       :   logging   .   warning   (     )   查找 数据   pymongo 写法 中 ， 喜欢 定位 collection ， 再 操作 ：   db   =   client [ ' dbname ' ]   collection   =   db [ ' collection _ ' ]   查找 数据   find     find _   两个 方法 ， find _   只 找 一个 目标 记录 （ doc ） ， find 找到 很多 。   过滤器 语法 查找 工作 ， 简单 介绍 ：   过滤器 语法   最 简单 写 上 希望 目标 记录 属性 ，   q   =   {   \" firstname \"   :   \" jane \" ,   \" surname \"   :   \" doe \"   }   说 专业 点 语句 连接 ， 不管怎么 说 理解 目标 doc 属性 符合 条件 。   属性 操作符 ， ：   q   =   {   \" score \"   :   {   \" $ gt \"   :   0   }   }   查询 得分 大于 0 。   类似 很多 过滤 操作符 ，   $     $ exists   ， 慢慢 。   $ exists   \" email \" :   { \" $ exists \" : True }   排序   find 跟着   sort   方法 排序 ， 默认 升序 （ pymongo . ASCENDING ） 。     doc     collection . find ( ) . sort ( [   ( ' field1 ' ,   pymongo . ASCENDING ) ,   ( ' field2 ' ,   pymongo . DESCENDING ) ] ) :   print ( doc )   插入 文档   col . insert _ ( )   col . insert _ ( )   更新 文档   replace _ ( filter ,   replacement ,   upsert = False )   update _ ( filter ,   update ,   upsert = False )   update _ ( filter ,   update ,   upsert = False )   upsert   设为 True 过滤器 找到 更新 数据 ， 执行 插入 操作 。   replace _   一个 新 文档 替换 旧 文档 ，   update _     更新 修饰符   操作 。   更新 修饰符   更新 修饰符 大体 ：   $   doc 属性 数值 加上 ，   \" $ \" : { \" score \" : 1 }     score   属性 加 1 。   $ set   doc 属性 设 。   $ unset   删除 属性   $ push   列表 append 操作   $ pop   列表 右边 一个 元素 删除   $ pull   列表 中 元素 删除   $ pullAll   删除 多个   $ rename   属性 名 更改   $ addToSet   列表 添加 元素 ， 不加 ， 加上 。   删除 文档   col . delete _ ( filter )   col . delete _ ( filter )   长时间 查询 丢失 cursor   写 一个 脚本 ， 数据库 数据 大 ， find 会 执行 很 长时间 ， 会 返回 一个 cursor   找 不到 错误 ， 是因为 mongodb 自动 关闭 cursor ， find 方法 上 加上 选项 ：   _ cursor _ timeout = True   。   PS :   设置 选项 ， 有时候 会 异常 ， 原因 是因为 操作 文档 doc 记录 文本 较大 ， 设置   batch _ size   ， 默认   4M   ，   最 只能 设置   16M 。   col . find ( { } ,   _ cursor _ timeout = True ) . batch _ size ( 16 )   doc 创建 时间   写   created _ time   ， mongodb   ObjectId   doc 创建 时间 含义 ：     bson   import   ObjectId   id   =   ObjectId   (   \" 5a505b643004c52888489b02 \"   )   id   .   generation _ time   datetime   .   datetime   (   2018   ,   1   ,   6   ,   5   ,   15   ,   16   ,   tzinfo   = <   bson   .   tz _ util   .   FixedOffset   object     0x0000022CEDC414E0   >   )   原生 mongo 命令     update _     updateMany   ， pymongo 很多 命令 都 。   索引   很多 初学 mongodb 人用 一段时间 会 抱怨 ， mongodb 很慢 ， 实际上 mongodb 不慢 ， 很大 一部分 原因 ， 创建 索引 操作 。   mongodb 记录   _ id   字 段 默认 会 创建 索引 ， 会 字 段 ， 程序 会 频繁 查询 ， 文档 记录 很多 ， 加上 索引 ， 程序 会 很慢 很慢 。   db . COLLECTION _ NAME . ensureIndex ( { KEY : 1 } )   查询 会 涉及 多个 字 段 ， 推荐 创建 一个多 值 索引 （ 复合 索引 ？ ） ：   db . getCollection ( ' clean ' ) . ensureIndex ( { ' ' : 1 , ' author ' : 1 , ' chapter _ id ' : 1 } )   备份 还原   mongo 命令 平时 特别 ，   mongodump     mongorestore   两个 命令 ， 一个 mongodb 备份 操作 ， 一个 还原 操作 。   mongodump   mongorestore   dump   最 简单 流程 上 ， 备份文件 放在 dump 文件夹 下 。 更 选项 请 读者 自行 。 ：   mongodump   - - host   =   atlas - 04   - - db   =   mls06085   - o   mongodump _ 2015 - 07 - 29   - - db   指定 数据库 名 ，   - o   指定 导出 文件夹 名 。   连接 数据库   windows 下 连接 数据库   请 参看   网页   ，   - u   - p   输入 用户名 密码 不 连不上 ， 查询 发现 还 加上   admin ， 不太 （ ， linux 选项   - authenticationDatabase   ，   管理 认证 相关 数据库 名字 ） 。   mongo   admin   - u   admin   - p   SECRETPASSWORD   连接 mongodb 集群   mongo   - - host = inors0504 / redstone : 27019 , ltprod01 : 27108 , innoali02 : 27018   查询 只 显示 字 段   db   .   getCollection   (   ' qidian _ book _ info '   ) .   find   ( { } , {   ' bookInfo . updTime ' :   1   } ) .   sort   ( {   ' updated _ time '   : -   1   } )   参考资料   mongodb     python ,   Author : Niall   O ' Higgins ,   year : 2011   mongodb   -     definitive   guide ,   Author : Kristina   Chodorow ,   May   2013 : Second   Edition   MongoDB   Basics   ,   Author : David   Hows ,   Peter   Membrey   .   year :   2014",
            "tags":"数据库",
            "url":"articles/mongodb.html"
        },
        {
            "title":"crontab定时任务",
            "text":"crontab 工具 用来 系统 执行 周期性 ， ubuntu 下 服务 名字 cron ； centos 下 服务 名字 crond 。   crontab 命令 查看 修改 配置 ：   crontab   - l   # 列出 配置文件 内容   crontab   - e   # 配置文件 编辑   编辑 vi 编辑器 。 crontab   - e 修改 配置 会 生效 ， 不 重启 crontab 后台 服务 。 重启 后台 服务 ， 都 会 计时 。 配置 写 每隔 一个 小时 执行 ， 等到 下 一个 小时 才 会 执行 。   推荐 写 上 一个 每分钟 echo 命令 crontab 运行 情况 。   *   *   *   *   *   echo   \" test \"   日志 默认   / var / log / cron   （ centos ） 。   配置 含义   ：   分   时   日   月   星期   命令   小时 24 时制 ， 星期 0 星期日 ， 1 星期一 。 命令 一行 简单 shell 命令 ， 多行 命令 建议 写成 bash 脚本 ， 脚本 执行 权限 ， 写 上 脚本 绝对路径 名 即可 。   NOTICE   ：   crontab 执行 命令 shell 环境 下 ， pyenv 环境 工作 ， 推荐 命令 文件 都 绝对路径 。   五分钟 ：   * / 5   *   *   *   *   三个 小时 ：   0   * / 3   *   *   *   分钟 写 上 0 ， 这是 新手 很 犯 一个 错误 。   早上 七点钟 ：   0   7   *   *   *   常见 crobtab 配置   小节 参考   篇文章   。   每月   0   0   1   *   *   每周   0   0   *   *   0     0   0   *   *   *   五个 小时   0   * / 5   *   *   *   三十分钟   * / 30   *   *   *   *   定时 备份 crontab 配置   远程 连接 服务器 ， crontab   - e 编辑 连接 意外 终止 ， crontab 配置 都 会 清空 ！ ！   请 加个 定时 备份 crontab 配置 命令 ：   *   * / 1   *   *   *   crontab   - l   >   / home / backup / crontab . back",
            "tags":"linux",
            "url":"articles/crontab.html"
        },
        {
            "title":"git版本控制",
            "text":"git 基础   git 命令 流程 ：   远程 仓库 文件 本地   网上 创建 项目 ， 网上 存档 下载 本地 ， 希望 下载 地点 ， 打开 终端 ：   git   clone   https : / / github . / a358003542 / xelatex - guide - book . git   初始化 本地 仓库   git   init   命令 用于 初始化 本地 仓库 ，   git   clone   仓库 文件 初始化 ，   origin   远程 服务器 名字 加上 去 。   本地 仓库 索引   先   git   status   命令 查看 仓库 改动 情况 ， 文件 不想 改动 ，   git   checkout     放弃 更改 ， 某项 改动 想 提交 ，   git   add     目标 文件 索引 。 add 命令 跟上 文件夹 名 ， 文件夹 下 文件 都 跟踪 。 本地 删除 文件 ， 希望 仓库 删除 文件 ， 加上   - -   选项 ：   git   add   - -   _ folder   索引 改动 提交 本地 仓库   git   commit   - m   ' 2013 - 08 - 25 : 19 : 00 '   文字 信息 这次 更改 注释 ， 不 加上   - m   选项 ， 编辑器 写 上 信息 。   本地 仓库 改动 提交 远程 仓库   第一次 提交 远程 服务器 取个 简单 点 名字 ：   git   remote   add   origin   https : / / github . / a358003542 / xelatex - guide - book . git     origin   远程 服务器 简称 ， 按理 来说 名字 随便 取 ， 都 origin ， github 上 clone 仓库 默认 远程 服务器 名字 大多   origin 。   都 简单 命令 更新 ：   git   push   origin   master   最新 git 版本 简单 写作   git   push   。   远程 仓库 改动 更新 本地   命令 git 文件 操作 合并式 ， 替换 最新 改动 文件 。 希望 远程 仓库 改动 包括 删除 更新 本地 ， 可选项   - -     （ - - 删除 动作 选项 ， 想要 删除 文件 git   rm   命令 git 仓库 才 会 记录 这次 删除 动作 ， 本地 远程 仓库 都 跟踪 这次 删除 动作 ）   。   git   pull   origin   master   最新 版本 git   简单 写 上   git   pull   ， 内部 智能 判断 分支 参数 。   情况 下   add   commit   push   三步 。 这是 日常 维护 提交 流程 。 网站 上 远程 仓库 做 修改 ， 记得 先用 pull 命令 远程 仓库 改动 更新 本地 。   第一次 配置   设置 名字 email ：   git   config   - - global   user .   \" Your   Name \"   git   config   - - global   user . email   \" _ email @ . \"   git 全局 设置 ， 项目 无关 。 打开 家 目录 下   . gitconfig   文件 看 。   . gitignore 文件   github 创建 项目 选择 好 项目 语言 ， 会 自动 创建 一个   . gitignore   文件 ， 文件 语法 很 简单 ，   * .   项目 内 后缀 文件 都 索引 。   推荐   gitignore 项目   看 。   初始化 仓库   git   init   git   init   当前工作 目录 下 初始化 git 管理 仓库 ， 打开 查看 隐藏 文件 ， 会 一个   . git   文件夹 ， git 用于 管理 项目 文件 存放 ， 会 用到   config   文件 。   github 上 创建 项目 ， 项目 克隆 （ 创建 一个 文件 ） ， 不 再 执行 init 命令 ， 远程 仓库 执行 。 打开 config 文件 会 remote   origin   定义 好 。   clone http 连接 ， 想 ssh 连接 ， config 文件 下 修改 即可 。   删除 文件 动作 跟踪   本地 删除 文件 ， 希望 远程 仓库 删除 文件 ， 先看   git   status   文件 改动 。     git   rm   目标 文件   跟踪目标 文件 删除 动作 。     git   add   文件夹 ， 加上   - -   选项 ， 文件夹 内 文件 删除 动作 会 自动 跟踪 。   查看 git 仓库 文件 改动 情况   git   status   查看 git 仓库 更改 记录   git   log   git   log   命令 查看 本地 仓库 更改 记录 。 git   log 很多 设置 ， 有个 最 简单 例子 （ 参考 githowtu 网页 ） ：   git   log   - - pretty = format : ' % h   % ad   |   % s% d   [ % ] '   - - graph   - - date = short   创建 一个 别名 ， 家 目录   . gitconfig   文件 写 上 ：   [ alias ]   hist   =   log   - - pretty = format : ' % h   % ad   |   % s% d   [ % ] '   - - graph   - - date = short   git 命令 别名 功能   提到 修改 家 目录   . gitconfig   文件 输入   git   hist   很 git 仓库 更改 记录 好看 打印信息 。     git   config   - - global   alias . hist   \" log   - - pretty = format : ' % h   % ad   |   % s% d   [ % ] '   - - graph   - - date = short \"   命令 实际上 修改 主 文件夹 . gitconfig 文件 ， 打开 看 。   切换 版本   切 回到 一个 版本 中 去 ：   git   checkout   3fbdf2c   commit hash 值 可用 git   log 查看 ， 命令 将会 本地 文件夹 返回 特定 版本 状态 。   取消 文件 修改   git   checkout   file _ _ folder   修改 文件 ， 还 add commit ， 修改 不 满意 ， 想 舍弃 。 上 checkout 文件 文件夹 取消 修改 ， 文件 回滚 commit 时 未修改 样子 。   commit 更改   提交 一个 commit ， 发现 地方 修改 ， commit 附加 信息 不 满意 ， :   git   commit   - - amend   覆 写 上 commit 记录 ， amend 改进 修正 。 只能 amend 那次 commit ， 运行 命令 ， 等于 上 commit 都 取消 掉 ， 做 修改 ， 再 一个 commit 。   取消 add 文件   不 小心   add   .   文件 ， 文件 不想 add ， 取消 add 操作 。   git   reset   HEAD   file _ _ folder   分支 功能   git 分支 功能 特别 强大 ， 推荐 灵活 开发 。 git 保存 文件 差异 变化 量 一系列 文件 快照 。 git commit ， 相关 提交 信息 之外 ， 一个 指向 这棵树 指针 。 git 中 分支 本质 上 仅仅 指向 commit 对象 可变 指针 。   git   branch   testing   新建 一个 分支 ， commit 对象 上 新建 一个 分支 指针 。 git 还 保存 一个 名叫   HEAD   特别 指针 ， 指向 工作 本地 分支 。 运行 git   branch 仅仅 新建 一个 分支 ， 系统 自动 切换 分支 ， 切换 分支   git   checkout   testing   命令 。 master 分支 testing 分支 向前 commit 推 ， 一个 分支 样貌 图 所示 :   上图 HEAD 工作 分支 点 ， master 默认 主 分支 ， 上 图 一个 testing 分支 。 上图 f30ab 开 一个 testing 分支 ， testing 分支 commit ， master 分支 推 ， 本地 文件夹 当前工作 分支 master 。     pro   git   一书 说法 ， Git 中 分支 实际上 仅 一个 包含 所指 对象 校验 （ 40   个字符 长度   SHA - 1   字串 ） 文件 ， 创建 销毁 一个 分支 廉价 ， 切换 快 。 Git 鼓励 开发者 频繁 分支 。   新建 分支   新建 一个 git 分支 ：   git   branch   _ branch _   ​   额外 提醒 新建 一个 git 分支 ， 还 checkout 命令 切换 分支 ， 停留 分支 上 。   查看 分支   git   branch   用于 查看 分支 状态 。 加上 选项   - a   还会 显示 远程 分支 状态 。   ​   切换 分支   git   checkout   _ branch _   ​   克隆 分支   git   clone 项目 只 想 克隆 分支 ， 加上   - b   选项 只 clone 远程 仓库 分支 ：   git   clone   - b   _ branch _   _ project _ url   ​   合并 分支   比如说 testing 分支 master 分支 想 合并 。 切换 master 分支 ， git   merge 合并 分支 ， 所示 :   git   checkout   master   git   merge   _ branck _   合并 策略 新建 ， 迭加 合并 ， 文件 冲突 手工 。   删除 本地 分支   小节 参考   网页   。   git   branch   - D   branch _   删除 远程 分支   git   push   origin   : branch _   分支 分支 推送   git   push   origin   dev : dev   本地 一个 dev 分支 ， 推送 远程 dev 分支 。 删除 远程 分支 语法 类似 ， 冒号 指定 本地 分支 。   一种 很 不 规范 做法 :   git   push   origin   dev : master   本地 dev 分支 推送 远程 master 分支 ， 不 推荐 做 ， 尽量 本地 分支 远程 分支 名字 ， 免得 弄混 。   tag 功能   github 上 release 栏 基于 git tag 功能   ， 参考   篇文章   。   查看 tag   git   tag   添加 tag   git   tag   tag _   tag 推送 远程   git   push   - - tag   commit 几次 后悔   commit 几次 ， 几次 commit 都 不 太 满意 ， 想 回滚 commit 下 。 ：   git   reset   - - hard   commit _ id   ##   修改   ##   新 commit   git   push   - - force   喜欢   - - hard   选项 回滚 commit 下 （   - - soft     - - mixed   选项 。 ） ， 远程 仓库 都 记录 ， 再 对照 选择 。 记得 push 操作 加上   - - force   选项 。   子 模块 功能   git 项目 添加 子 模块   一个 git 仓库 文件夹 一个 git 仓库 ， 称该 git 仓库 为子 模块 ， 内容 添加 子 模块 管理 ：   git   submodule   add   submodule _ url   将会 多出 一个   . gitmodules   文件 ， 存放 项目 子 模块 信息 。   子 模块 还 内容 ， 还 运行 ：   git   submodule   update   获取 子 模块 内容 。   clone 包括 子 git 模块   项目 有子 git 模块 ， 简单 git   clone 命令 内容 下载 。 参考   网页   。   加上   - - recursive   选项 会 下载 项目 子 git 模块 。   git   clone   - - recursive   . git   ​   日常 子 模块 操作   子 模块 一个 git 项目 ， 子 模块 文件夹 ， 常规 git 操作 。 主 项目 指向 版本号 子 模块 ， 操作 主 模块 上 生效 。   要主 项目 指向 子 模块 最新 版本 操作 ：   git   add   - -   submodule _ folder   git   commit   - m   \" update   submodule \"   中文 乱码   参考   网页   。   用户 家 目录 下   . gitconfig   文件 设置 ， 读者 参考 下 ：   [ core ]   quotepath   =   false   autocrlf   =   false   safecrlf   =   true   [ gui ]   encoding   =   utf - 8   [ i18n   \" commit \" ]   encoding   =   utf - 8   [ i18n ]   logoutputencoding   =   utf - 8     autocrlf   =   false   git     windows 一个 设置 ， Linux 换行符 windows 换行符 关闭 ；   safecrlf = true   设置 ， git     windows 不 做 更改 。   quotepath   git 路径 默认 转义 关闭 。   设置 utf8 编码 。   ​   参考资料   git 简明 指南   git   howto   图解 git   git   community   book 中文版   pro   git 第二 版",
            "tags":"linux",
            "url":"articles/git.html"
        },
        {
            "title":"bash脚本入门",
            "text":"简单 讲   bash   shell   脚本 知识 ， 点到为止 ， 关注 一行 之内 shell 命令 ， 逻辑 请 python 编写 脚本 。   变量   i = 2   echo   $ i   赋值 上 所示 ， 编程语言 变量 赋值 大体 类似 ，   特别 变量 值 之间 号 相连 ， 空格 隔开   。 变量 符号 字母 数字 ， 加 下划线 。 声明 变量 局部变量 ， shell 中 。 创建 全局变量 export 命令 。   变量 加上   $   符号 ， 变量 字符 字符 组合成 一个 新 字符 ， 用花 括号 变量名 包围起来 。 形式   $ { i }   。 一般来说 变量 都 推荐   $ { }   形式 。   ： 修改 终端 前缀   export   PS1 = \" = > \"   利用 export 命令 变量 变为 全局变量 （ 全局变量 指子 shell 继承 父 shell 变量 。 ） ， shell 脚本 都 通用 。   代码 放入 你家 目录   . bashrc   文件 ， 每次 终端 启动 都 会 自动 加载 文件 。 开启 终端 前缀 都 会   = >   形式 。   节省 点 屏幕 空间 。 pwd 命令 查看 ， 都 影响 。   PS1 终端 一级 前缀 符号 ， PS2 进一步 输入 提示 符号 。 换成 形式 ：   export   PS2 = \" > \"   echo 命令   echo 命令 接触 很多 ， 不 赘述 。 echo 命令 用于 查看 变量 值 输出 一行 字符串 。   unset 命令   取消 bash 变量 赋值 。   read 命令   请求 用户 输入 变量 值   read     ;   echo   ' 输入 ： '   $ {     }   bash 特殊符号   分号 bash 编程语言 都 大体 类似 ， 一行 结束 。 bash 很多 特殊符号 ， 讲 ， 特殊符号 搜索 都 不太好 搜索 。   更 信息 请参阅   网页   。   $ 0   命令 名字 ， shell 脚本 成 脚本 名字 。   $ 1   $ 2   ...   命令 接受 参数   $ @   参数 ：   { $ 1 ,   $ 2 ,   $ 3   ... }   ， 其是 一个 array 。   $   上 一个 命令 返回 状态 ， 0 成功 。   $ !   上 一个 命令 运行 进程 号   &&     cmd1   &&   cmd2   前 一个 命令 执行 成功 再 执行 第二个 命令   &   命令   &   结尾 ， 命令 异步 ， 后台 执行 。 （ PS ： ， 远程 连接 服务器 创建 命令 ， 远程 关闭 后台 进程 自动 关闭 。 nohup screen 。 ）   条件 判断   条件 语句 格式 ：     [   test   expression   ]         fi   短小 shell 命令行 ， 写成 一行 格式 ， 分 号 换行 。     [   test   expression   ]   ;         ;   fi   还 值得 提醒 ： 条件 判断 语句 （ test   expression ） 方括号 [ ] 一个 空格 分开 ， （ 上古 神器 都 怪僻 ， 淡定 好 ） 。   ： 确认 文件夹     [   !   - d   workspace   ]   ;     mkdir   workspace   ;   fi   - d   检测 文件夹 ，   !   符号 逻辑 否 操作 。 workspace 不 ， 新建 workspace 文件夹 。   循环   小节 参考   bash     loop   篇文章 ， bash 编程 循环 讲 很 详细 。   循环 语句 格式 ：     var     1   2   3     cmd1   cmd2     ， 写成 一行 样子 ：     var     1   2   3   ;     cmd1   ;   cmd2   ;     ​   加分 号 地方 多行 格式 下 换行 地方 。   ： 小数点 递加 输出 流     animate     $ (   seq   4   . 0   0   . 1   8   . 0   )   ;     echo   $ {   animate   }   ;     seq 命令 简单 说 下 ， 请   - -   查阅 信息 ：   用法 ： seq   [ 选项 ] ...   尾数   ： seq   [ 选项 ] ...   首数   尾数   ： seq   [ 选项 ] ...   首数   增量   尾数   ： 批量 创建 文件   文件夹 输入 命令 ：     ( (   i   =   1   ;   i <   =   10   ;   i ++   ) )   ;     touch   file   $ i   . txt   ;     ： 批量 缩小 图片大小   这是 一个 多行 脚本 ， 用于 批量 缩小 图片 大小 。     [   !   - d   smallsize   ]   ;     mkdir   smallsize   ;   fi   cd   smallsize     i   =   1         $ (   ls   * . png   )     convert   - resize   50   % x50%   $   $ i   -   $     i   =   i + 1   echo   $     smallsized     ： 批量 重命名 文件     i   =   1   &&     f     $ (   ls   * . jpg   )   ;     mv   - vi   $ {   f   }   0000   $ {   i   }   . jpg   &&     i   =   i + 1   ;     调用 子 命令 返回值   几个 例子 中 ， 形式 ：   $ ( cmd )   ， 执行 子 shell 命令 ， 返回 字符串 值 。   array   shell 编程 过多 涉及 编程 内容 ， 很 痛苦 ， 情况 下 array 概念 。 演示 一个 例子 ， 需求 一个 自动 备份 程序 之上 再 加上 自动 删除 逻辑 。   DATE   =   $ (   date   +% F   )   DAYS   =   30   ##         autodump   code ,       output   filename     whatdump _ $ { DATE }   ###     allowed   list   ALLOWED   [   0   ] =   whatdump _   $ {   DATE   }     ( (   i   =   1   ;   i   &   lt   ;   =   $ {   DAYS   }   ;   i ++   ) )     ALLOWED   [   i   ] =   whatdump _   $ (   date   - d   \"   -   $ {   i   }   days \"   +   \" % F \"   )     ###       python   script   ,         hard     write       bash   python   ~ / thepython / scripts / whatdump _ autoremove . py   $ {   ALLOWED   [ @ ]   }   程序 逻辑 创建 一个 名字   whatdump _ DATE   备份文件 （ crontab 控制 好 运行 ） ， 希望 目标 文件 只 保留 三十天 文件 。 逻辑 较为 ， 本来 打算   DATE   参数传递 python 脚本 做 接下来 工作 ， date 命令 强大 人类 友好 日期 时间 表达 功能 （ 请 参考     ） ， 文件名 都 传递 进 python 脚本 中 去 。   兴趣 下 date 命令 - d 选项 灵活 表达 支持 ，   date   - d   \"   - 3days \"   三天 日期 时间 ，   date   - d   \" + 3weeks \"   三周 日期 时间 。 兴趣 下 ， date 命令 - d 选项 真的 好 强大 。   好 详细 讲 array 涉及 语法 。   赋值 引用   =   > array   [   0   ] =   \" \"   =   > array   [   1   ] =   \" world ! \"   =   > echo   $ {   array   [ 0 ]   }   $ {   array   [ 1 ]   }     world !   表达 常见 那种 数组 概念 相近 ， 记得 索引 0 惯例 即可 。 赋值 :   =   > array2   = (   \" \"   \" python \"   )   =   > echo   $ {   array2   [ @ ]   }     python     $ { arrayname [ @ ] }   表达方式 引用 array ，   $ { # arrayname [ @ ] }   表达 返回 array 长度 。   = > echo   $ {   # array2 [ @ ]   }   2   这句 :   python   ~ / thepython / scripts / whatdump _ autoremove . py   $ {   ALLOWED   [   @   ]   }   收集 文件名 array 传递 进 python 脚本 中去 。 python 脚本 中 一个 粗糙 做法 引用   def   main ( args , path = \" \" ) :   print   args   main ( sys . argv [ 1 : ] )   array 传递 进 args 去 ， 读者 兴趣 试一下 ， args python 中 一个 列表 对象 。 python 更 逻辑 都 很快 写 ， 不 说 。   大概 类似 所示 ， pathlib python3.4 才 会 ， pip 安装 。   # ! / usr / bin / env   python   #   - * -   coding :   utf - 8   - * -     __ future __   import   print _ function   import   sys     datetime   import   datetime   import   os     pathlib   import   Path   import   shutil   def   main   (   args   ,   path   =   \" \"   ) :   allowed   =   args   p   =   Path   (   path   )   pfolds   =   [   p     p     p   .   iterdir   ( )     p   .   _ dir   ( ) ]   print   (   pfolds   )     p     pfolds   :     p   .       allowed   :   print   (   p   .     ,   \" passed \"   )     :   print   (   p   .     ,   \" removed \"   )   ###         remove   thing   shutil   .   rmtree   (   p   .     )     __ __   = =   ' __ main __ '   :   ###   切换 autodump 目录   os   .   chdir   (   os   .   path   .   expanduser   (   \" ~ / autodump \"   ) )   main   (   sys   .   argv   [   1   : ] )   date 命令   date 命令 放在 一章 是因为 date 命令 单独 一个 命令 ， 打印 显示 日期 意义 很大 。 bash 脚本 中 ， 管道 中 ， date 命令 却 变得 有用 。 读者   - -   查看 信息 ， 命令 预想 还要 ， 输出 格式 参数 控制 语法 ， 编程语言 中 有用 （ python time 模块 中 strftime 函数 ） 。   date 返回 日期 字符   date 命令 返回 特定 格式 日期 shell 脚本 中 很 有用 ， 所示 一个 简单 例子 ：   date = $ ( date   + \" % F _% R \" ) ; echo   $ date   date 命令 已 谈到 一点 ， 更 信息 请 参看   篇文章   。 不 赘述 。",
            "tags":"linux",
            "url":"articles/bash-tutorial.html"
        },
        {
            "title":"ansible自动化运维",
            "text":"ansible 一个 自动化 运维 工具 ， 学习 ， 会 发现 只 写 一个 简单 web   app ， 远程 计算机 环境 很多 配置 ， 后台 脚本 执行 ， nginx 配置 服务 静态 文件 。 都 手工   ssh   端 操作 低效率 ， 繁多 ， 环境 重复 部署 。 ansible 解决 这一 。   第一个 例子 ： 假设 免 密钥 登录 一个 远程 服务器 ，   / / ansible / hosts   文件 服务器 名字 加进去 ， 执行 :   ansible     - m   ping   一切正常 返回   SUCESS   信息 ， 证明 ansible 连通 远程 服务器 。   hosts 文件 配置   讨论   / / ansible / hosts   文件 默认   inventory   文件 ， 默认 inventory 配置文件 之外 ， 还 写 很多 配置文件 。 配置文件 内容 大体 :   [ webservers ]   foo . .   bar . .   [ webservers ]   字 段 定义 主 机组 概念 ， 随便 写上去 主机 没 主 机组 ， 一个 主 机组 还 一个 主 机组 ， 。 主 机组 主机 统一 管理 ， 。   主机 变量 设置   组 变量 情况 请 看 文档 ， 主机 变量 大体 写 上 值 ， 变量 定义 后 playbooks ， playbooks 无疑 重头戏 ， 值得 提 。   [ atlanta ]   host1   http _ port   =   80   maxRequestsPerChild = 808   host2   http _ port   =   303   maxRequestsPerChild = 909   主机 参数 控制   大多 ssh 连接 配置 ， :   _ host   ansible _ ssh _ port = 2222   ansible _ ssh _ user = manager   ansible _ ssh _ host   没 好 设置 ， 主机名 很长 ， 设置 连接 主机名 。 写   _ host   主机 别名 。 ansible 版本号 大于 2 ， 推荐   ansible _ host   。   ansible _ ssh _ port   端口号 ， 默认 不 配置 。 ansible 版本号 大于 2 ， 推荐   ansible _ port   。   ansible _ ssh _ user   ssh 登录 用户名 ， 默认 电脑 登录 用户名 ， 情况 下 配置 。 ansible 版本号 大于 2 ， 推荐   ansible _ user   。   ansible _ ssh _ pass   登录 密码 ， 免 密钥 登录 不 配置 。 文档 说 不 推荐 。   playbooks 熟悉 yaml   简单 下 yaml 语法 ， 一个 简单 例子 :   - - -   #   一位 职工 记录     :   Example   Developer   job   :   Developer   skill   :   Elite   employed   :   True   foods   :   -   Apple   -   Orange   -   Strawberry   -   Mango   languages   :   ruby   :   Elite   python   :   Elite   dotnet   :   Lame   yaml 文件 都 加上 :   - - -   。   注释   #   缩进 级别   -   开头 一个 列表 ， 键值 字典 ， 大体 。   playbook 入门   最 简单 一个 例子 ， 新建 一个   . yaml   文件 :   - - -   -   hosts   :   work   tasks   :   -     :   ping     pong   ping   :   执行 :   ansible - playbook   . yaml   简单 ping   pong   ， 配置 简单 内容 主机   work   ， 提到   / / ansible / hosts   文件 里 定义 。 主机 执行   tasks   。 这是 一个 列表 清单 ，   描述 ， 文字 随意 。 执行   ping   模块 。   确保 nginx 重启 :   -   :   make     nginx   restarted   service :   = nginx   state = restarted   确保 nginx 服务 运行 :   -   :   make     nginx     running   service :   = nginx   state = running   playbook 最佳 实践   hosts 文件   项目 文件夹 下 新建 一个 hosts 文件 ， 类似 讨论   / / ansible / hosts   文件 ， 本地 语法 引入 ：   ansible - playbook   - i   hosts   site . yml   ​   site . yml   刷 脚本 主 入口   tags 单独 运行 子   roles 文件夹 新建 一个 common 文件夹 ， common 文件夹 新建 一个 tasks 文件夹 ， tasks 文件夹 定义 一个 main . yml ， 文件 内容 大体 :   - - -   -   :   task 名字   command :   ...   site . yml 定义 ：   - - -   -     :   ansible   参数 侦测   hosts   :     remote _ user   :   root   roles   :   -   {   role   :   common   ,   tags   :   [   ' common '   ] }   只 运行 子 利用 tags 。   ansible - playbook   - i   hosts   site . yml   - - tags = common   ​   临时 加上   tags     -     :   create   odoo   superuser   shell   :   su   -   postgres   - c   \" createuser   - s   { {   user   } } \"   tags   :   -   psql _ user   role 全局 参数   全局 参数 放在   group _ vars   文件夹     文件 ， 一个 简单 yaml 文件 。   role 里 局部参数   参数 推荐 site . yml 文件 role 定义 ， 所示 定义 一个   folder _   变量   ：   roles   :   -   {   role   :   update - sdsomweb   ,   folder _   :   \" resource / install _ venv \"   ,   tags   :   [   ' update - sdsomweb '   ] }   ansible - playbook 最 配置 编写 很 简单 ， 关键 具体任务 熟悉 好 特定 模块 。   playbook 模块   官方 模块 很多 ， 内容 很 ， 不 赘述 ， 请 参看 官方 文档 。   本地 安装   hosts 添加 一行 ：   localhost   ansible _ connection = local   本地 安装 不 提供 ssh 用户名 密码 ， 不 上传 ssh   key ， 上传 操作 加上 一行 ：     :   ansible _ connection   ! =   \" local \"   ​   压缩包 解压包 远程 机器 目标 点   值得一提 unarchive 模块 才 支持   remote _ src   模式 ， 推荐 采用 本地 压缩包 源 解压 方式 。   -     :   解压   apr   unarchive   :   src   :   \" { { folder _ } } / apr - 1.5 . 2 . tar . gz \"   dest   :   / root   rsync 风格 文件夹 复制   不 利用 copy 模块 ， scp 文件夹 结构 稍微 点 会 很慢 ， 推荐   synchronize   模块 ：   -   :   上传 源   synchronize :   src = resource / winstore   dest = / root   mode = push   值得一提的是 ， rsync 远程 机器 免 密码 ssh 连接 ， 输入 密码 ， 推荐 playbook pub 密钥 传 ， rsync 功能 远程 机装 libselinux - python   rsync   两个 软件包 。   -   :   上传 ssh   key   authorized _ key :   user = root   key = \"   { {   lookup   (   ' file '   ,   ' / home / / . ssh / id _ rsa . pub '   )   } }   \"   user 登录 远程 机器 用户名 。   远程 机器 更 参数信息   ansible   setup   模块 远程 机器 很多 有用 信息 ， 远程 机器运行 虚拟机 软件 。 更 信息 ， 远程 机器 默认 python 版本 ， 方式 ：   -     :     python   version   command   :   python   -   c   ' import   sys ; print ( \" { 0 } . { 1 } \" . format ( sys . version _ info . major , sys . version _ info . minor ) ) '   register   :   python _ version _ check   register 注册 执行 命令 command 返回 ， ansible 运行 时里 都 ， 还   python _ version _ check . stdout   方式 。   command   shell 区别   command shell 很多 情况 下 都 区别 ， shell 意义 上 来讲 类似 shell 中 执行 命令 ， bash 环境变量 ， 没事 会 优先 shell 模块 。   pip 虚拟环境 下 工作   参考   网页   ， 所示 目标 虚拟环境 文件夹 下 requirements . txt 文件夹 描述 安装 目标 python 模块 虚拟环境 中 。   -     :   Install   requirements   pip   :   requirements   :   / _ app / requirements . txt   virtualenv   :   / user / home / venvs / myenv   virtualenv _ python   :   python3.4   安装 本地 rpm 包   兴趣 看 ansible   yum   模块 ， 免 网络 利用 本地下载 rpm 包来 安装 模块 很 好 ， 很 好 模块 之间 依赖 。 推荐 调用 shell 模块 ， 所示 ：   -   :   install   rpms   shell :   yum   localinstall   - yC   - - disablerepo = *   ` ls   / path / / rpms / * . rpm `   rpm 包 base ， 推荐 ：   yum   install   yum - utils   yum   install   - - downloadonly   - - downloaddir = .   _ rpm _   下载 。 来自 epel ， 推荐   pkgs . org   搜 名字 ，   网站   下载 。   删除 文件 文件夹   删除 文件 文件夹 推荐   file   模块 调用 rm 命令 ， 所示 ：   -   :   确保 目标 venv 文件夹 不   file :   path = / opt / sdsom / venv   state = absent   微调 配置文件   配置文件 远程 机器 上 有个 原样 ， 几行 修改 ， lineinfile 模块 微调 配置 很 适宜 。   -     :   调配 apache   httpd . conf   lineinfile   :   dest   :   / / apache / conf / httpd . conf   regexp   :   \" { { item . regexp } } \"   insertafter   :   \" { { item . insertafter } } \"   line   :   \" { { item . line } } \"   _ items   :   -   {   regexp   :   \" &# 94 ; Listen   \"   ,   insertafter   :   \" &# 94 ; # Listen   \"   ,   line   :   \" Listen   8880 \"   }   -   {   regexp   :   \" &# 94 ; User   \"   ,   insertafter   :   \" &# 94 ; # User   \"   ,   line   :   \" User   sdsadmin \"   }   -   {   regexp   :   \" &# 94 ; Group   \"   ,   insertafter   :   \" &# 94 ; # Group   \"   ,   line   :   \" Group   sdsadmin \"   }   -   {   regexp   :   \" &# 94 ; ServerName   \"   ,   insertafter   :   \" &# 94 ; # ServerName   \"   ,   line   :   \" ServerName   { { server _ } } \"   }   例子   regexp   匹配 目标 行 ，   替换 内容   line   。 insertafter 匹配 ， line 插入 该行 。   例子 插入 一行   line ：   -     :   Load   config   files       config   directory   conf . d / * . conf   lineinfile   :   dest   :   / / apache / conf / httpd . conf   line   :   \" { { item . line } } \"   _ items   :   -   {   line   :   \" Include   conf . d / * . conf \"   }   template 模块 利用 本地 模板 文件 （ jinja2 模块 系统 ） 生成 一个 配置文件 。   只 版本 操作系统 下才 执行 动作       语句 表达 ， 只 远程 机器 操作系统 CentOS 版本号 7.2 时才 执行 动作 （ 参考   网页   。   -   :       centos7.2       tweak   command :   ...   :   ansible _ distribution   = =   ' CentOS '     ansible _ distribution _ version . startswith ( ' 7.2 ' )   ansible _ distribution   还   Ubuntu   ， Debian   ，   Red   Hat   Enterprise   Linux   。   register 用法   比如说 写 上 一个 简单   test . yml   文件 ， 内容 ：   - - -   -   hosts   :   localhost   tasks   :   -     :   test   shell   :   date   register   :   test   -     :   debug   debug   :   msg = \" { {   test [ ' stdout ' ]   } } \"   运行 ：   ansible - playbook   - i   \" localhost , \"   - c   local   test . yml   运行 显示 运行 date 命令 注册 ansible 全局变量 池 去 ， 名字 register 赋值 ， jinja2 模板 系统 中 都 调用 。   _ items 用法   请 参看 官方 文档     。   换行 写 一行 写   小 细节 ， 官方 文档 看 会 两种 形式 ， 不多 说 。   lookup 用法   lookup 上传 ssh   key 用到 ，   ansible 一个 高级 。   command   模块 skip 判断   加上   creates   参数 command 跳过 判断 标准 ， 文件 command 执行 会 跳 。   local _ action   local _ action     delegate _ :   127.0 . 0.1   缩写 ， 简单 来说 只 本机 说 操作 机上 执行 动作 。 顺便 提   delegate _   含义 ， 指定 主机 执行 动作 ， 脱离 ansible 默认 inventory 输出 几个 hosts ，   delegate _   主机 默认 几个 hosts 中 一个 ， 主机 。   tasks   :   -     :         load   balancer   pool   local _ action   :   command   / usr / bin / _ _ _ pool   { {   inventory _ hostname   } }   handlers   -     :   template   configuration   file   template   :   src = template . j2   dest = / / foo . conf   notify   :   -   restart   memcached   -   restart   apache   handlers   :   -     :   restart   memcached   #   The   service   module     ,             module     wanted   service   :   = memcached   state = restarted   -     :   restart   apache   service   :   = apache   state = restarted   会 playbook role hanlders 文件夹 ， 简单 来说 执行 （ 跳过 不算 ， 执行 changed   state 返回 ） ， 执行 notify :   定义 hanlders 。   参考资料   ansible 官方 文档   ， 有个 翻译   中文 ansible 官方 文档   。   - - - ansible   篇文章 写 ansible 东西 写 挺 好 。",
            "tags":"linux",
            "url":"articles/ansible-auto-operations.html"
        },
        {
            "title":"apache web服务器",
            "text":"apache2   web   server 简要 介绍 请 参看   apache   http   server   wiki   。 推荐 apache2.4 ，   apache 官方 文档   。   Ubuntu 系统 Centos 系统 之间 httpd 安装 配置 环境 差异 很大 ， 想 说 知识 都 重点 ， 跟着 官方 文档 ， 折腾 出 一个 绿色 本地 安装 版本 httpd ， 跟着 官方 文档 学 配置 才 王道 。 系统 命令 ， 系统 文件夹 下 配置 都 不 东西 。   apache 本地 安装   apache 本地 安装 过程 大体 分为 几步 ：   安装 apr   安装 apr - util   安装 httpd   安装 mod _ wsgi   （ 可选项 ， django flask ）   更 细节 官方 文档   install   那一 章节 里 ， 读者 懂 ansible ，   写   green - install 项目   apache   role   。   说 ， 日志 文件 ， 配置文件 加载 都 定制 ， 摸清楚 配置 语法 才 王道 。   挂个 简单 静态 网站   httpd . conf   写 上   LISTEN   80   ， apache 将会 监听 80 端口 。 域名 指向 远程 服务器 ip 。 httpd . conf   写 上 一句 ：   Include   conf . d / * . conf   conf . d 文件夹 下 配置 自动 加载 进来 。 conf . d 文件夹 conf 文件夹 平行 关系 。 conf . d 定义   VirtualHost   。   上 完整 例子 ：   < VirtualHost   * : 80   >   ServerName   www . cdwanze . work   DocumentRoot   / home / wanze / venv / html   DirectoryIndex   index . html   < Directory   / home / wanze / venv / html   >   < IfVersion   >   =   2.4 >   Require     granted   < / IfVersion >   < IfVersion   <   2.4   >   Order   deny ,   Allow       < / IfVersion >   < / Directory >   < / VirtualHost >   ServerName ：   apache 监听 80 端口 信号 ServerName 进一步 分发 ， 请求 域名   api . cdwanze . work ， 情况 例子 VirtualHost 。   DocumentRoot   ：   服务 静态 网站 内容 所在 文件夹 。 级别 五颗星 。   DirectoryIndex   ：   文件夹 请求   / a / b   ， 文件夹 下有 index . html 文件 ， 显示 文件 内容 。   Directory ：   文件夹 权限 管理 ， 级别 五颗星 ， 不写 会 权限 访问 错误 。   403   Forbidden   You   don ' t     permission     access   /       server   apache2.4 版本 语法   Require     granted   ， 原 2.2 配置 ：   Order   , deny   Allow       考究 癖 下 2.2 写法 ：   Order   , deny   — —   先写 规则 ， 再 写 deny 规则   Allow       — —   都 访问   Deny       — —   都 拒绝   2.2 配置   Order   deny ,   Deny       等同于 2.4 ：   Require     denied   \\ end { Verbatim }   2.2 ：   Order   Deny , Allow   Deny       Allow     . org   都 拒绝 ， 只   . org 访问 。   等同于 2.4 ：   Require   host   . org   2.4 Require 语句 更 简洁 ， ：   Require     granted   Require     ip   10.252 . 46.165   都 ， 禁止 访问 。   挂个 wsgi 站点   上 例子 ：   < IfModule   ! wsgi _ module   >   LoadModule   wsgi _ module   modules / mod _ wsgi .   < / IfModule >   WSGIPythonHome   \" / home / wanze / venv \"   WSGIPythonPath   \" / home / wanze / venv / webapp \"   < VirtualHost   * : 80   >   ServerName   api . cdwanze . work   WSGIScriptAlias   /   / home / wanze / venv / webapp / webapp / wsgi . py   < Directory   / home / wanze / venv / webapp   >   < IfVersion   >   =   2.4 >   Require     granted   < / IfVersion >   < IfVersion   <   2.4   >   Order   deny ,   Allow       < / IfVersion >   < / Directory >   Alias   \" / static \"   \" / home / wanze / venv / webapp / static \"   < Directory   / home / wanze / venv / webapp / static   >   < IfVersion   >   =   2.4 >   Require     granted   < / IfVersion >   < IfVersion   <   2.4   >   Order   deny ,   Allow       < / IfVersion >   < / Directory >   < / VirtualHost >   检测 wsgi 模块 加载 ， 加载 上 。   WSGIPythonHome   设置 python 虚拟环境 所在 目录 ， 例子   venv / bin python 执行 脚本 。   WSGIPythonPath   设置 Django 项目 目录 所在   WSGIScriptAlias   设置 WSGI 文件 所在   Alias   Directory   设置 服务 项目 静态 文件 。   文件 权限   设置 好   Directory   之外 ， 还会 文件 读写 权限 ， 查看 日志 发现 提示 说 文件 权限 读写 。 httpd 执行 User Group ， 看 目标 文件夹 文件 权限 。   Django 项目 wsgi 文件 执行 权限 。 Django 项目 操纵 数据库 ， sqlite3 文件 数据库 ， 会 读写 权限 。   值得一提的是 母 文件夹 执行 权限 ， 文件 都 不 。",
            "tags":"linux",
            "url":"articles/apache-web-server.html"
        },
        {
            "title":"linux系统基础",
            "text":"debian 系 rpm 系   Linux 主流 包 管理系统 分为 debian 系 rpm 系 两个 。 CentOS Redhat rpm 系 ； ubuntu debian 系统 rpm 系 。 ubuntu 中 第一个 学习 命令   apt   命令 ， 系统软件 安装 卸载 更新 工作 ； centos 第一个 学习 命令   yum   命令 ， apt 命令 类似 一系列 系统 软件包 管理 操作 。   yum 命令 rpm 命令   yum   install     安装 软件   yum   groupinstall     安装 软件 组 。   yum   update   更新 系统 软件包   yum   remove     卸载 软件   yum   groupremove     卸载 软件 组   yum   clean   清除 系统 软件包 管理 相关 缓存   rpm   - i   . rpm   本地 安装 rpm 包 ， 会 加上   - vh   选项 显示 更 安装 信息 安装 进度 。   apt 命令 dpkg 命令   系统 安装 好 第一件 做 事 选 一个 好 源 ， 安装 更新 。 系统 设置 → 软件 更新 ， \" 下载 \" 软件 源 服务商 ， 搜索 一个 速度 最快 源 。 终端 中 执行 命令 升级 系统 软件包 ：   apt   update   更新 源   apt   upgrade   升级 源下 安装 软件 （ 很多 软件 升级 推荐 命令 ：   （   apt   dist - upgrade   不 出错 些 。 ）   apt   install     安装 软件   apt   autoremove   清理 软件 残余   apt   autoclean   清理 安装 软件 留下 缓存   apt   remove     删除 软件   apt   purge     删除 软件 包括 软件 配置   设置 root 用户 密码   Centos Ubuntu 安装 好 ， 创建 一个 用户 密码 ， root 用户 密码 设置 。 终端 输入 ：   sudo   passwd   root   设置 好 密码 ， 输入 ：   su   root 账户 ， 输入 ：   exit   退出 root 用户 。   passwd 命令 还 修改 用户 密码 ：   sudo   passwd   youname   。   一种 情况 忘 用户 密码 包括 root 密码 ， 操作 修改 root 密码 ：   系统 重启 菜单 选项 ，   e   grub 编辑 模式 ， kenerl 一行 再   e   编辑 该行 ， 行尾 加上   single   ，   Enter 确认 ，   b   单用户 维护 模式 ，   passwd   命令 修改 root 密码   （ 此条 参考 vbird 第五章   ） 。   最 命令   打开 终端 ， 一个 美元   $   符号 ， 输入   su   命令 ， root 账户 ， 开头 一个   #   符号 ，   $   普通用户 ，   #   超级 用户 。 一个 波浪 号   ~   ， 波浪 号 用户 目录 ，   ~   目录   / home / wanze   。   Linux 系统 最 常用 两个 命令   ls     cd   。   ls   命令 会 列出 当前目录 包含 文件夹 文件 ，     cd   folder _   文件夹 。 再 输入   cd   ， 会 回到 家 目录 。 等于 执行   cd   ~   。   cd 命令 还   cd   .   ， 点 当前目录 ，   cd   ..   返回 上 一级 目录 。   cd   /   ， 跳 系统   /   目录 下 。   命令 学会 用熟 ， 请 读者   - -   学习 ：   cp   复制 文件 命令     查看 系统 命令 位置   touch   创建 文件 已 文件 更新 时间 戳   rm   删除 文件 ，   - r   选项 删除 一个 文件夹 ， 文件夹 文件夹 文件 。   mkdir   创建 文件夹 ， 加上   - p   选项 创建 多层 目录 。   rmdir   删除 文件夹 ， 加上   - p   选项 删除 多层 目录 ， 保证 文件夹 空 。   mv   文件 ， 命令 重命名 操作 。   shell   shell 好像 一个 包装 层 ， shell Linux 操作系统 核心 kernel ， 进去 ， 将会 一个 艰深 领域 ， 计算机硬件 ， 驱动程式 Linux 系统 设计 核心 ， 知识 都 专业 ， 人 不 深究 。   Shell 提供 操作系统 核心 （ 称为 kernel ） 用户 之间 交互 程序 ， 参见 下图 。 kernel 启动 时 装入 内存 , 管理系统 关机 为止 。 负责 建立 控制 进程 ， 管理 内存 、 文件系统 、 通信 。 实用程序 ， 包括 Shell 在内 都 存储 硬盘 上 。 kernel 程序 硬盘 中 装入 内存 ， 运行 ， 程序运行 结束 后 回收 程序 占用 系统资源 。 Shell   是从 登录 开始运行 实用程序 ， 用户   Shell   脚本 命令行 方式 输入 命令 ， 翻译 命令 用户 kernel 交互 。   系统 Bourne   Shell （ bash   shell ） 。 本文 提到 shell 指 bash   shell ， shell 不 讨论   PATH 变量   输入 ls 命令 ， shell   PATH   变量 搜索 相关 命令 文件 所在 。 读者 查看 变量 ：   echo   $ PATH   安装 软件 ， shell 却 发现 找 不到 ， 软件 可执行文件 目录 系统   PATH   环境 下 找到 。 语法 ：   PATH   =   $ PATH : / / / bin   管道   简单 shell ， 简单 下 管道 重定向 两个 概念 ， 最 简单 一行 bash 命令 会 涉及 两个 概念 。   管道 最 简单 理解 第一个 shell 命令 输出 流 流向 一个 shell 命令 中 输入 。 比如说 火狐 浏览器 卡住 （ 随便 举个 例子 ， 没 。 。 ） ， 看 pid kill 掉 ， 查看 ：   ps   aux   |   grep   firefox     |   管道 概念 ，   ps   aux   命令 ， 输出 送入   grep   命令 中 去 ， 抓取 包含 firefox 字符 匹配 行 。   重定向   kernel 一个 进程 都 默认 都 0 ， 1 ， 2 三个 文件 说明符 。 0 标准 输入 ， 1 标准 输出 ， 2 标准 错误 输出 。 标准 输出 指 输出 终端 ， 标准 错误 输出 输出 终端 。   文件 说明符 分配 非 终端 ， I / O 重定向 。 Shell 关闭 标准 输出 ， 标准文件 说明符   1 （ 终端 ） 分配 文件 ， 输出 定向 文件 ；   文件 说明符 0 ， 标准 输入 定向 ； 文件 说明符 2 重定向 标准 错误 输出 。   >   重定向 操作 。   > >   文件 追加 操作 ， 相当于 文件 操作   a   操作 。   最 简单 重定向 ：   cat   * . txt   >   test . txt   目录 下 glob 抓取 txt 文件 都 合并 成 一个 字符串 流 ， 重定向 送入 test . txt 文件 中 去 。   cat   * . txt   命令 神奇 处 ， 神奇 Linux 终端 文件 glob 操作   *   （ 任意 数目 任意 字符 ）     （ 一个 任意 字符 ） 支持 。   echo   * . txt   命令 查看 。   再学 几个 命令   clear   终端 清屏 ， 内容 清除 ， 终端 都 带有 记忆 功能 回滚 功能 ， 向上 滚 ， 看 内容 。   history   显示 登录 用户 执行 命令 ， 登录 用户 家 目录 下   . bash _ history   文件 内容 。   cat   cat 命令 简单 用法 ：   cat   test . txt   ， 查看 文本文件 内容 ， cat 命令 来自 英文单词 ( concatenate ) ， 英文单词 通用 联接 ， 延伸 计算机领域 单词 就是指 两个 字符 联接 成 一个 。 cat 命令 功能 两个 更 字符 流 文件 联接 一个 字符 流 ， 默认 显示 终端 上 ， 重定向 字符 流 流向 文件 保存起来 。     命令 常用 接受 管道 传过来 字符 流 信息 ， 延缓 打印 读者 阅读 。   额外 值得一提的是   windows 下   powershell ， 管道 ：   type   test . txt   |     head   打印文件 前 几行 内容 ，   - n   指定 打印 行 。   tail   打印文件 后 几行 内容 ，   - n   指定 打印 行 。 tail 一个 用法 ，   加上   - f   选项 跟踪 打印文件 附加 内容 。   uname   命令 输入 简单 返回 \" Linux \" 字符串 ， 用处 不 大 。 查看 uname 命令 信息 得知 命令 返回 电脑 操作系统 ， 硬件 架构 ， 内核 版本号 信息 。 ：   = > uname   - s   # 内核 名字   Linux   = > uname   - n   # 主机 名字   wanze - ubuntu   = > uname   - r   # 内核 发行 号   3.13 . 0 - 36 - generic   = > uname   - m   # 硬件 架构   i686   = > uname   - p   # 处理器 类型   i686   = > uname   - o   # 操作系统 名字   GNU / Linux   whoami   whoami 返回 登录 用户 名字 ， 等价   id   -   。   文件 用户   小节 参考   阮 一峰 inode 文章   。   Linux 系统 一句 很 有名 一句 话 ，   一切都是 文件   。 文件 分为 ：   文件 、 目录 文件 、 字符 设备 文件 、 块 设备 文件 、 链接 文件 、 套 接字 文件 。   Linux 操作系统 找 文件 ，   / / passwd   文件 。 文件名 ， 一连串 字符串 ， 找个 inode 号 ， inode 号 获取 inode 信息 ， inode 信息 ， 找到 文件 所在 block ， 读出 数据 。   Linux 文件名 两种 写法 ， 一种 绝对路径 ， 一种 相对路径 。 绝对路径   /   开头 文件名 ，   .     ..   开头 相对路径 写法 。 相对路径 shell 工作 目录 ， pwd 命令 查看 shell 当前工作 目录 。   pwd 命令   pwd 命令 用来 查看 当前工作 目录 文件系统 中 路径 。   ：   /   Linux 文件系统 地方 。   ~   shell 登录 用户 家 目录 所在 ， shell   $ HOME   变量 值 。   .   相对路径 写法 ， 当前目录 。   ..   相对路径 写法 ， 上 一级 目录 。   stat 命令   stat   命令 用来 查看 文件 信息 。   [ root @ host   ~ ] #   stat   /   File :   ` / '   Size :   4096   Blocks :   8   IO   Block :   4096   directory   Device :   802h / 2050d   Inode :   37   Links :   76   Access :   ( 0755 / drwxr - xr - x )   Uid :   (   0 /   root )   Gid :   (   0 /   root )   Access :   2017 - 09 - 05   01 : 35 : 41.983000000   - 0400   Modify :   2017 - 09 - 21   15 : 10 : 57.103000000   - 0400   Change :   2017 - 09 - 21   15 : 10 : 57.103000000   - 0400   信息   Inode   inode 号 （ 看作 电脑 文件名 ） 之外 ， 信息 都 存放 Inode   table   。 大体 ： 文件大小 ， 文件类型 ， 权限 ， 所有者 id ， 群 id ， access   time （ 上 打开 时间 ） ， modify   time （ 上 修改 时间 ） ，   change   time （ 上 inode 信息 读写 权限 更改 时间 ） 。   文件 例子 ， Links 1 ， 目录 文件 Links 1 ， 含义 硬 连接 （ hard   link ） 指向 ， 一般来说   2 + n ， n 目录 子目录 数目 ， Linux 下 新建 文件夹 都 预先 包含   .     ..   两个 子 文件夹 ， 用途 读者 猜到 ， 做 相对路径 （ 参考   网页   ） 。 讨论 硬 连接 会 讨论 硬 连接 文件夹 ， 硬 连接 文件夹 会 破坏 Linux 层级 文件系统 。   [ root @ host   ~ ] #   stat   / / passwd   File :   ` / / passwd '   Size :   986   Blocks :   8   IO   Block :   4096   regular   file   Device :   802h / 2050d   Inode :   17775   Links :   1   Access :   ( 0644 / - rw - r - - r - - )   Uid :   (   0 /   root )   Gid :   (   0 /   root )   Access :   2017 - 09 - 21   11 : 23 : 26.112000000   - 0400   Modify :   2017 - 09 - 21   11 : 23 : 26.112000000   - 0400   Change :   2017 - 09 - 21   11 : 23 : 26.113000000   - 0400   块 设备 文件 ， 其是 一个 文件系统 ， 大小 查看 加上   - f   选项 。   [ root @ host   ~ ] #   stat   / dev / sda   File :   ` / dev / sda '   Size :   0   Blocks :   0   IO   Block :   4096   block   special   file   Device :   6h / 6d   Inode :   9005   Links :   1   Device   type :   8 , 0   Access :   ( 0660 / brw - rw - - - - )   Uid :   (   0 /   root )   Gid :   (   6 /   disk )   Access :   2017 - 09 - 05   01 : 36 : 41.869000000   - 0400   Modify :   2017 - 09 - 05   01 : 36 : 41.869000000   - 0400   Change :   2017 - 09 - 05   01 : 36 : 41.869000000   - 0400   [ root @ host   ~ ] #   stat   - f   / dev / sda   File :   \" / dev / sda \"   ID :   0   Namelen :   255   Type :   tmpfs   Block   size :   4096   Fundamental   block   size :   4096   Blocks :   Total :   61502   Free :   61465   Available :   61465   Inodes :   Total :   61502   Free :   60924   ls 命令   ls 命令 最 常用 两个 选项   - a     - l   ， 一个 显示 隐藏 文件 （ Linux 系统 中 文件名   .   开头 隐藏 文件 ） ， 一个 显示 更 更 信息 。     - i   选项 显示文件 Inode 号 。   Linux 系统 最 精彩 管道 重定向 概念 小 程序 小 工具 揉合 一个 协作 整体 ， 先举个 简单 例子 看 下 ：   ls   * . txt   将会 一个 文件夹 后缀 txt 文件名 字符 流 扫描 ， 字符 流 包含 目标 文件 文件名 管道 进一步 操作 。   ls   - - sort   选项 用来 排序 ， 很 有用 ， ， 管道 传递 sort 命令 进一步 排序 操作 。 所示 ：   ls   * . txt   |   sort   ls 抓取 文件 字符 流 操作 ， 所示 ：     i     $ (   ls   * . txt   |   sort   )   ;     echo   $ i   ;     ;   ​   段 代码   $ i   一个个 文件 字符 流 。   - l 选项 详解   先看 例子 ：   - rw - rw - r - -   1   wanze   wanze   41034   8 月   27   15 : 19   wisesystem . xoj   drwxrwxr - x   4   wanze   wanze   4096   5 月   28   18 : 50   yEd   lrwxrwxrwx   1   wanze   wanze   22   9 月   11   18 : 37     git   链接   - >   / home / wanze / 桌面 / git   最 先 第一 栏看 懂 ， 文件 所有者 文件 群 再 讨论 。   第一 栏 文件属性 开头   d   文件 目录 文件 ，   -   文件 文件 ， 开头   l   文件 链接 文件 （ 讨论 软 连接 相关 ） 。 三个 rwx 文件 所有者 文件 可读 写 执行 ， 控制 执行 ， 就要 属性 改为 rw - ， 文件 权限 控制 更 详细 讨论 。   第二 栏是 hard   links 连接 ， 提到 。   第三 栏是 文件 所有者 ， 第四 栏是 文件 群 ， 第五 栏是 文件大小 。 第六 栏是 文件 修改 日期 建档 日期 。   UID GID   用户 shell 登录 Linux 系统 ， 一个 login 接口 ， 输入 用户名 密码 才能 操作 。   系统 会   / / passwd   找 有没有 用户名 ， ， UID GID 取出 ， shell 家 目录 一并 设置 。   UID   / / shadow   文件 内容 核对 密码 。 密码 核对 成功 ， 成功 登入 shell 。   / / passwd   内容 大体 所示 ：   root   :   x   :   0   :   0   :   root   : /   root   : /   bin   /   bash   bin   :   x   :   1   :   1   :   bin   : /   bin   : /   sbin   /   nologin   含义 ：     :   x   :   UID   :   GID   :   信息   :   home 目录   :     shell   shell 有个 特别 值 ：   / sbin / nologin   登录 。   ， 系统   / / passwd   登录 用户 GID 查看   / / group   用户 所属 群组 信息 。   root   :   x   :   0   :   bin   :   x   :   1   :   bin   ,   daemon   一行 含义 ：     :   x   :   GID   :   群组 所含 用户 ， 逗号 隔开   useradd usermod 命令   useradd usermod 两个 命令 很多 选项 类似 ， 简单 创建 一个 新 用户   useradd   _ user _   很多 选项 设置 useradd 设置 ，   usermod   命令 设置 。     - d   用于 设置 新 用户 家 文件夹 。   - m   选项 只能   - d   选项 所示 ：   usermod   user _   - md   / newhome / newpath   用户 原家 目录 移到 新 位置 （ 请 参看   网页   ） 。   userdel 命令   userdel 用于 删除 用户 数据 ，   / / passwd   / / shadow   群组 相关 数据 。 加上   - r   选项 ， 将会 用户 家 目录 一并 删除 。   groupadd groupmod 命令   类似 groupadd groupmod ， groupdel 命令 。   su 命令 sudo 命令   su 命令 用于 切换 身份 ， 最 常用 一个 选项   - c   ， 用于 用户 身份 执行 命令 。   su   root   - c   \" ls   / root \"   su 命令 新 切换 用户 密码 ， sudo 命令 只 密码 即可 ， 不 root 用户 密码 没关系 。 Linux 系统   / / sudoers   文件 管理 sudoer 权限 ， 用户 sudoer ， 其是 运行 sudo 命令 。   sudo   - u   root   ls   / root     - u   指定 用户 ， 默认 root 用户 ，   - u   root   不 写 。   用户 sudoer   运行   visudo   命令 ， 跳 文件 ， 找到 一行 ：   ##   Allows   people     group   wheel     run     commands   #   % wheel   ALL = ( ALL )   ALL   第二行   #   去掉 ， 目标 用户 wheel 群组 中 去 ：   usermod   - aG   wheel   user _   目标 用户 执行 sudo 命令 。   NOTICE   ：   做 不 成功 ， 想要 用户名 加上 去 ， 大体 ：   user _   ALL = ( ALL )   ALL   chown chgrp 命令   讲到 Linux 系统 中 文件 都 两个 属性 ： 文件 所有者 ， 群是 。 登录 用户 （ 或者说 进程 执行 用户 ） 文件 所有者 ， 再 来看 文件 权限 前三位 rwx 写 ， 可读 可读 ， 写 写 。 权限 管理 第一步 先 管理 好 文件 所有者 群 。   chown   user _   filename   #   改变 文件 所有者   chgrp   group _   filename   #   改变 文件 群   两个 命令 都 接受   - R   选项 递归 修改 目录 目录 下 文件 文件属性 。   chmod 命令   chmod 命令 改变 文件 权限 。 用法 ：   chmod   a + x   filename   chmod   755   filename   命令 接受   - R   选项 递归 修改 目录 目录 下 文件 文件属性 。   权限 两种 方法 ：   r   ead 、   w   rite 、 执行 (   x   ) 。   a   ， ，   u   ser （ 所有者 ） ，   g   roup （ 群 ）   o   thers （ 用户 ） 。   +     -   加 权限 减 权限 （   =   设定 值 ） 。   第二个 方法 权限 rwx 分为 三位 ， r 数字 4 ， w 数字 2 ， x 数字 1 ， 比如说 数字 7 rwx ， 比如说 数字 6   rw -   ， 比如说 数字 5   r - x   。   目录 文件 权限 含义   文件 权限 含义 很 ， 目录 文件 权限 含义 直白 。   目录 文件 读 ls 命令 列出来 。   目录 文件 写 文件夹 新建 文件 或子 文件夹 ， 删除 文件 ， 包括 更名 。   目录 文件 执行 cd 目录 。 用户 cd   / root   文件夹 去 。 cd 进去 ， 文件 执行 ，   web   服务器 服务 文件夹 时 ， rx 权限 ， w 权限 ， 小心 ， 母 文件夹 权限 没 设置 好 ， x 权限 ， 会 导致 web   服务器 权限 ： Permission   denied   错误 。   硬 连接 软 连接   硬 连接 （ hard   link ） 谈论 ， 提到 一个 文件 Links 1 ， 讨论 创建 硬 连接 创建 一个 新 文件名 指向 同一个 inode 节点 ， 硬 连接 。 硬 连接 跨 文件系统 ， 连接 目录 。   软 连接 符号 连接 ， 软 连接 相当于 新建 一个 快捷方式 文件 。 硬 连接 局限 ， 连接 目录 ， 实践 中 常用 软 连接 。 软 连接 创建 一个 链接 文件 。   ln 命令 默认 创建 硬 链接 ，   - s   参数 创建 符号 连接 。   ln   - s   源文件   目标 文件   ​   tar 命令   打包 解压 文件 tar 命令 ， 支持 gzip bzip2 两种 格式 。   常见 打包 解压 ：   tar   - cf   archive . tar   foo   bar   tar   - xf   archive . tar     - c   创建 打包 文件 ，   - f   选项 指定 文件名 ， 跟着   archive . tar   文件名 ， 跟着 想 打包 进 压缩文件 文件 文件夹 名 。   解压 文件 带上   - x   选项 ， 带上 一个   - v   选项 linux 命令 中 常见 verbose 模式 ， 显示 更 打印信息 。   tar 命令 还 支持 格式 打包 解压 ， gzip 格式 ， 就要 带上   - z   选项 ， 文件名   . tar . gz   ， 记住 打包 解压 都 带上 选项 。   bzip2 格式 ， 就要 带上   - j   选项 ， 文件名   . tar . bz2   。   - - exclude   选项 ：   压缩 文件夹 排除 掉 文件夹 子 文件夹 ， 更 确切 表述   PATTERN   排除 ， 排除 文件 。 类似 排除 选项 很多 ， 最 简单 子 文件夹 名字 写上去 ， 排除 子 文件夹 。   - C   选项 ：   很 有用 一个 选项 ， 想要 解压 内容 文件夹 下 选项 。   - - strip - components   选项 ：     - C   选项 单独 一个 ， 想 解压 一个 压缩包 ， 文件夹 目录   what2.2 /   ， 假设 指定 解压   / root   test 文件夹 ， test 文件夹 还会 创建   what2.2 文件夹 再 内容 。   - - strip - components     - C   一个 很 有用 用法 ，   重命名 输出 文件夹   ， 选项 用处 输出 文件夹 路径名 剔除 掉 几个 ：   ， 文件夹 路径名 expython 开头 ， 定制 输出 test 文件夹 ， 剔除 文件 文件 路径名 第一个 ， expython / ， 重命名 输出 文件夹 功能   （ 参考   网页   ） 。   tar   - zxvf   expython - 0.2 . 2 . tar . gz   - C   . / test   - - strip - components   1   ps 命令   ps 查看 系统 运行 进程 命令 ， 用法 ：   ps   [ option ]   进程 卡住 ， 运行   ps   aux   查看 进程 进程 号 （ PID ） ， kill （ kill 命令 ， 杀死 进程 。 ） 就行了 。   ssh 登录   SSH 协议 用于 计算机 之间 加密 远程 登录 。 小节 参考   阮 一峰 ssh   remote   login   一文   。   ssh 登录 操作系统 都 便捷 工具 ， 推荐 读者 先 工具 ， 讨论 ssh 命令 用法 概念 。   ssh 登录 命令 格式 :   ssh   username @ host   ssh 默认 端口号 22 ，   - p   指定 端口号 。 username 远程 计算机 用户名 ， host 远程 计算机 ip 地址 。   默认 情况 下 ssh 登录 远程 终端 输入 远程 计算机 密码 ， 一种 公钥 上 传到 远程 计算机 方法 不用 输入 密码 登录 。 生成 公钥 :   ssh - keygen   - t   rsa   生成 公钥 文件 文件   $ HOME / . ssh   （ windows 系统 下 登录 用户 家 目录 下 ） ， 其为   id _ rsa . pub   ， 一个   id _ rsa   私钥 文件 。 公钥 文件 上 传上去 即可 :   ssh - copy - id   username @ host   懒得 记   ssh - copy - id   命令 ，   id _ rsa . pub   公钥 文件 内容 ， 复制粘贴 远程 计算机 （ 想 登录 登录 用户 ） 登录 用户 家 目录 下   . ssh   （ 新建 ） 文件夹 下   authorized _ keys   文件 （ 新建 ） 。   免 密码 ssh 登录 ， Github 走 ssh 通道 免 密码 方式 ， 类似 计算机 公钥 文件 内容 设置 。   ssh 连接 长时间   ssh 连接 远程 主机 ， 执行 长时间 命令 ， 一段时间 没去 终端 窗口 ， ssh 连接 会 自动 中断 ， 终端 远程 相关 进程 会 kill 掉 。 会 返回   Broken   pipe   错误 。   一个 简单 解决方案 远程 主机 上 执行 命令 ， 命令 加上   nohup   命令 ， 类似 格式 :   nohup   thecommand   更 好地解决 方案   screen   小 工具 ， 远程 screen 命令 开启 一个 执行 shell 命令 全屏 窗口 （ 自动 关闭 ） ， 本地 终端 窗口 关闭 ， 远程 主机 相关 进程 会 运行 。 screen 命令 常见 用法 :   screen 命令   screen   - S     创建 一个 screen 进程 ， 取个 名字 ， screen 进程 名字 。   screen   - ls   电脑 都 screen 进程 。   screen   - r   thename _ _ thepid   重连 screen 进程 ， 默认 只能 Detached （ 失连 ） 进程 。   exit   退出   Ctrl + a   再 d   断 ， screen 进程 还 。   screen   - wipe   清除 Dead screen 进程 。   screen   - D   - r   screen 进程 断开连接 ， 显示 Attached ， 选项 组合 强制 screen 进程 失连 ， 再重 。   设置 后台 服务   写 一个 后台 服务 脚本 ， Linux 系统 一个 后台 服务 。 小节 参考   网页   。   # ! / bin / sh   ###   BEGIN   INIT   INFO   #   Provides :   shadowsocks   #   Required - Start :   $ remote _ fs   $ syslog   #   Required - Stop :   $ remote _ fs   $ syslog   #   Default - Start :   2   3   4   5   #   Default - Stop :   0   1   6   #   Short - Description :   Example   initscript   #   Description :   The   shadowsocks   service   ###   END   INIT   INFO   PROG _ BIN   =   ssserver   PIDFILE   =   / var / run / shadowsocks . pid   OPTIONS   =   \" - - pid - file   $ PIDFILE   - c   / / shadowsocks / config . json \"   RETVAL   =   0   start   ( )   {   echo   - n   $   \" Starting   $ 0   :   \"   $ PROG _ BIN   $ OPTIONS   - d   start   RETVAL   =   $   return   $ RETVAL   }   stop   ( )   {   echo   - n   $   \" Stopping   $ 0   :   \"   $ PROG _ BIN   $ OPTIONS   - d   stop   RETVAL   =   $   return   $ RETVAL   }   status   ( ) {     [   - e   $ PIDFILE   ]   ;     echo   $ 0     running ,   pid   =   `   cat   $ PIDFILE   `     echo   $ 0     stopped   RETVAL   =   1   return   $ RETVAL   fi   RETVAL   =   0   return   $ RETVAL   }   #   See         called .   case   \"   $ 1   \"     start   )   start   ; ;   stop   )   stop   ; ;   status   )   status   ; ;   reload   |   restart   )   stop   start   RETVAL   =   $   ; ;   *   )   echo   $   \" Usage :   $ 0   { start | stop | restart | reload | status } \"   RETVAL   =   2   esac   exit   $ RETVAL   服务 脚本 放入   / / init . d   去 。     service     start +   调用 服务 脚本 。   服务 脚本 开机 自启动 ， 推荐   chkconfig +   命令 做 。   chkconfig   - - add     添加 服务 chkconfig 管理 。   chkconfig   - - del     删除 服务   chkconfig   - - level   < 级别 >       设置 服务 启动 级别   启动 级别 ：   等级 0 ： 关机   等级 1 ： 单用户 模式   等级 2 ： 无 网络连接 多用户 命令行 模式   等级 3 ： 网络连接 多用户 命令行 模式   等级 4 ：   等级 5 ： 带 图形界面 多用户 模式   等级 6 ： 重新启动   ​   常用 级别 设置   35   chkconfig   - - level   35       网络 配置   IP地址   IP地址 32 位 二进制 ， 十进制 最小   0.0 . 0.0     255.255 . 255.255   。 NetID HostID ， 网域 NetID 。   IP地址 分类 ：   以二 進位 說明   Network   第一 個 數字 定義 ：   Class   A   :   0xxxxxxx . xxxxxxxx . xxxxxxxx . xxxxxxxx   = = >   NetI _ D   開頭   0   | - - net - - | - - - - - - - - - host - - - - - - - - - - - - |   Class   B   :   10xxxxxx . xxxxxxxx . xxxxxxxx . xxxxxxxx   = = >   NetI _ D   開頭   10   | - - - - - - net - - - - - - - | - - - - - - host - - - - - - |   Class   C   :   110xxxxx . xxxxxxxx . xxxxxxxx . xxxxxxxx   = = >   NetI _ D   開頭   110   | - - - - - - - - - - - net - - - - - - - - - - - | - host - - |   Class   D   :   1110xxxx . xxxxxxxx . xxxxxxxx . xxxxxxxx   = = >   NetI _ D   開頭   1110   Class   E   :   1111xxxx . xxxxxxxx . xxxxxxxx . xxxxxxxx   = = >   NetI _ D   開頭   1111   五種 分級 十進位 ：   Class   A   :   0 . xx . xx . xx   ~   127 . xx . xx . xx   Class   B   :   128 . xx . xx . xx   ~   191 . xx . xx . xx   Class   C   :   192 . xx . xx . xx   ~   223 . xx . xx . xx   Class   D   :   224 . xx . xx . xx   ~   239 . xx . xx . xx   Class   E   :   240 . xx . xx . xx   ~   255 . xx . xx . xx   系统 ABC 三个 等级 。   IP 两种 IP ，   一种   公网 IP   ， 一个   私网 IP   。   私网 IP 三个 等级 之下 所示 ：   Class   A ： 10.0 . 0.0   -   10.255 . 255.255   Class   B ： 172.16 . 0.0   -   172.31 . 255.255   Class   C ： 192.168 . 0.0   -   192.168 . 255.255   ​   子网掩码   子网掩码 概念 确实 难 理解 ， 关键 太 拘泥于 特例 细节 ， 鸟哥 最 说 ， 子网掩码 东西 分割 网域 ， 一个 网域 定义   Network   网域 最小 IP   Netmask   子网掩码   Broadcast   广播 地址   ​   描述 ， 最 常见   192.168 . 0.0 / 24   24 指 子网掩码 24 1 。 表达 定义 完整 网域 ：   192.168 . 0.0   -   192.168 . 0.255   最 核心 知识 ， 子网掩码 重要性 在于 给定 IP ， 子网掩码 推断出 网域 Network Broadcast 。 子网掩码 最 常见 24 1 16 1 ， 都 ， 不定 。   路由   理论 上 位于 网域 内 计算机 才 文件 交互 ， 网域 之间 计算机 信息 都 路由 IP 分发 信息 互通 目的 。 一块 刚 会 很 生疏 ， 建议 跟着 鸟哥 私房 菜 这幅 图 好好 route 流程 ：   机器 上 都 一个 路由表 ， 假设 PC1 要传 资料 PC11 ， 其会 分析 路由表 ， 发现 目标 IP IP 一个 网域 ， 区域 网 功能 传输数据 。   发现 目标 IP IP 不再 网域 ， 机会 查询 路由表 ， 相关 设定 ， 封包 发送给 默认 路由器 （ gateway ） ， 类似 ， gateway 类似 转发 工作 。   route 命令   route 命令 查看 主机 路由表 设置 。 会加个   - n   参数 ， 其会 主机名 IP 形式 显示 。   查看 路由表 先 第一 栏   Destination   目标   第三 栏   Genmask   子网掩码 组合 网域 概念 （ windows 下 route   PRINT   第一 栏 第二 栏 ） ， 网关   0.0 . 0.0   缺省值 ， 本机 网卡 interface 发送 。   FLAG 标志   U   路由 可用 ， G   路由 网关 Gateway ，   H   改行 路由 一个 主机 一个 网域 。   路由表 规则 ：   依据 网络 界面 IP 路由   手工 设定 路由 ， 设定 路由 网卡 设备 IP broadcast 。   动态 路由 生成   ​   route   add   - net   192.168 . 5.0   netmask   255.255 . 255.0   dev   etho03   网卡 界面 设置     / / sysconfig / network - scripts / ifcfg - XXX   配置 ：   DEVICE = 網卡 代號   BOOTPROTO =   dhcpHWADDR = 網 卡卡 號 ( MAC )   IPADDR = IP 位址   NETMASK = 子 網路 遮罩   ONBOOT = 預設 啟動此 介面   GATEWAY = 通訊閘   DEVICE ： 這個 設定 值後面 接 裝置 代號 與 檔名   ( ifcfg - eth0 )   那個 裝置 代號 才行 ！ 否則 會 裝置 名稱 找 不到 困擾 。   BOOTPROTO ： 啟動 該 網路 介面 時 ， 何種 協定 ？   手動 給予   IP   環境 ， 請輸入   static       ， 自動   IP   時候 ，   請輸入   dhcp   ( 寫錯 字 ， 因為 這是 最 關鍵 字 ！ )   GATEWAY ： 代表 『 整個 主機 系統   default   gateway 』 ，   ， 設定 這個 項目 時 ， 請 特別 留意 ！ 有重 複 設定 情況 發生 喔 ！ 當你有   ifcfg - eth0 ,   ifcfg - eth1 ....   多個 檔案 ， 一個 檔案 設定   GATEWAY   即可     / / resolv . conf   设置 DNS 规则 ：   nameserver   DNS IP     / / hosts   设置 ：   私有 IP   主機 名稱   別名     / / sysconfig / network   设置 ：   NETWORKING = 網路   NETWORKING _ IPV6 = 支援 IPv6 否 ？   HOSTNAME = 主機名     / / services   记录 記錄 架構   TCP / IP   總 總協定 ， 包括   http ,   ftp ,   ssh ,   telnet   服務 所定 義的   port   number   ， 都 這個 檔案 規劃 出來 。 想要 自訂 一個 新 協定 與   port   對 應 ， 改 這個 檔案 ；     / / protocols   定义出   IP   封包 协定 相关 资料 ， 包括   ICMP / TCP / UDP   這 封包 协议 定义 。   重启 网络   / / init . d / network   restart   這個   script   最 ！ 因為 一口 氣 啟動 整個 網路 參數 ！   他會 主動 去 讀取 網路 設定 檔 ， 很快 恢 復 系統 預設 參數值 。   ifconfig 命令   ifconfig 命令 用来 查看 网络 配置 信息 ， 信息 含义 ：   -   eth0 ： 網 路卡 代號 ，   lo   這個   loopback   ；   -   HWaddr ： 網 路卡 硬體 位址 ， 俗稱   MAC   ；   -   inet   addr ： IPv4     IP   位址 ， 後 續   Bcast ,   Mask   分別 代表   Broadcast   與   netmask   喔 ！   -   inet6   addr ：   IPv6   版本   IP   ， 我們 沒有 ， 略過 ；   -   MTU ： 第二章 談到   [ MTU ] ( http : / / linux . vbird . org / linux _ server / 0110network _ basic . php # tcpip _ link _ mtu )   ！   -   RX ： 一行 代表 是網 路由 啟動 為止 封包 接收 情況 ，   packets   代表 封包 數 、 errors   代表 封包 發生 錯誤 數量 、   dropped   代表 封包 於 問題 遭 丟棄 數量   -   TX ： 與   RX   ， 為網 路由 啟動 為止 傳 送情 況 ；   -   collisions ： 代表 封包 碰撞 情況 ， 發生 太 ，   網路 狀況 不太好 ；   -   txqueuelen ： 代表 用來 傳輸 資料 緩衝區 儲存長 度 ；   -   RX   bytes ,   TX   bytes ： 總 接收 、 傳送 位元 組總量   ifup ifdown 命令   ifup   { interface }   ifdown   { interface }   启用 关闭 网络 界面 。 两个 命令 去 修改 提到   / / sysconfig / network - scripts /   网卡 界面 配置文件 。   修改 主机名   centos7 新 一个 命令 很 修改 主机名 ，   hostnamectl   ， 主机名 几个 类似 ：   静态 主机名   static   瞬态 主机名   transient   灵活 主机名   pretty   hostnamectl   status   hostnamectl   set - hostname   < hostname >   第二个 命令 设置 主机名 ， 指定 一个 设置 加上 选项 ：   - - pretty   ,   - - static   ,     - - transient   。   df 命令   Linux 系统 中 一切都是 文件 ， 包括 硬盘 光盘 。 硬盘 挂载 系统 中 目录 下才 ，   /   自动 挂载 。 计算机 额外 加上 硬盘 ， 会 自动 挂载 ， 不 。 挂载 操作 。   执行 挂载 操作 ， 可先用 df 命令 来看 计算机 磁盘 挂载 情况 。   [ root @ host   ~ ] #   df   Filesystem   1K - blocks   Used   Available   Use%   Mounted     / dev / sda2   9952216   2879484   6547532   31%   /   tmpfs   258184   0   258184   0%   / dev / shm   / dev / sda1   289293   141262   132671   52%   / boot   Filesystem 目标 文件系统 ， 1K - blocks 列出 目标 文件系统 大小 ， 单位 KB ， Used ， Available 可用 。 Use% 百分比 ， Mounted   目标 文件系统 挂载 点 。   blkid 命令   blkid 命令 列出 目标 文件系统   UUID   号 ， 文件系统 类型 。 mount 命令 调用 。   [ root @ host   / ] #   blkid   / dev / sda1   / dev / sda1 :   UUID = \" ec5c9ab8 - b71e - 46e6 - aac9 - 5ccc757a02d2 \"   TYPE = \" ext3 \"   [ root @ host   / ] #   blkid   / dev / sda1 :   UUID = \" ec5c9ab8 - b71e - 46e6 - aac9 - 5ccc757a02d2 \"   TYPE = \" ext3 \"   / dev / sda2 :   LABEL = \" ROOTPART \"   UUID = \" 971ffe7e - 0c71 - 40c1 - 97a9 - bdb6b167d4b7 \"   TYPE = \" ext4 \"   mount 命令   mount 命令 挂载 文件系统 ， 挂载 点 ， 挂载 目录 空 文件夹 ， 原空 文件 内容 挂载 后 访问 。   mount   - l   #   列出 计算机 挂载 情况   mount   - t   文件系统 类型   UUID = \" * * * \"   挂载 点   #   挂载 操作   mount   - t   文件系统 类型   文件系统 名   挂载 点   开机 自动 挂载   开机 自动 挂载 设置 修改   / / fstab   文件 。   UUID = 971ffe7e - 0c71 - 40c1 - 97a9 - bdb6b167d4b7   /   ext4   defaults , discard , noatime   1   1   UUID = ec5c9ab8 - b71e - 46e6 - aac9 - 5ccc757a02d2   / boot   ext3   defaults   1   2   对照 例子 ，   / dev / sda1   挂载   / boot   。 三项 很 清晰 ， UUID 号 改为 目标 文件系统 名如   / dev / sda1   。   重点 讲下 第四 列 ， 第五 列 第六 列 ：   第四 列是 设置 目标 文件系统 挂载 参数 ， mount 命令   - o   选项 指定 。   async / sync   推荐 设置 async   auto / noauto   主动 测试 挂载 ， 默认 auto 。   rw / ro   ro 不 写入   exec / noexec   执行   user / nouser   nouser 用户 不 挂载   defaults   rw ， exec ， auto ， nouser ， async 参数 ， 设置 defaults 即可 。   备份 相关 ， 第五 列 设置 0 。   第六 列 ， fsck 检查 分区 ， 设置 0 即可 。   ​   unmount 命令   卸载 命令   unmount   目标 文件系统 名 挂载 点   lsof 命令   最先 接触 lsof 命令 需求 ： 查看 端口号 占用 ， 希望 释放 端口号 ， kill 掉 进程 即可 。   lsof   - i   : 1080   lsof   命令 倒 查看 端口号 设置 ， 完整 名字 list   open   files ， 列出 系统 打开 文件 。 linux 系统 中 ，   皆 文件   ， 查看 打开 文件 信息 很多 有用 系统 运行 情况 信息 。   命令 方法 很多 ， 请 读者 参看   网页     网页   。   telnet 命令   telnet 命令 查看 TCP 端口 访问 。   telnet   ip 地址   port 端口   nmap 命令   扫描 目标 主机 端口号 ， 参考   网页   。   最 常见 需求 查看 目标 主机 端口号 打开 ：   nmap   ip 地址   curl 命令   最 用法   curl   _ url   看作 一个 简单 版 web   browser ， 其内 选项 很多 ， HTTP method 方法 选择 ， user - agent cookie 设定 都 。   查看 更 信息 读者 参考   网页   。   查看 本机 外网 ip   curl   ifconfig . sh     httpbin 网站 ：   curl   httpbin . org / ip   离线 安装 rpm 包   推荐 安装   yum - utils   软件包 ：   yum   install   yum - utils   利用 提供   yumdownloader   命令 下载 rpm 包 。   下载 相关 依赖 本地 安装   安装 rpm 包 ， 依赖 ，   fedoraproject   下载 epel 安装包 ， 干脆 yum   安装   epel - realse   ， 还 安装 提及   yum - utils   ， 运行 ：   yum   install   - - downloadonly   - - downloaddir = .   . rpm   ...   自动 下载 补齐 rpm 包 还 确实 依赖 ， 本地 安装 语句 面 网络 安装 rpm 包了 。   本地 安装   免 网络 本地 安装 rpm 包 ， 自动 解决 相互依赖 。   yum   localinstall   - C   - - disablerepo = *   . rpm   ...   centos6 centos7 区别   小节 参考   篇文章     篇文章   。   默认 文件系统 ext4 xfs 。     / bin   / sbin   / lib   / lib64   移到   / usr   下 。 （ 区别 较大 ）   防火墙 iptables firwalld 。 （ 区别 较大 ）   默认 数据库 mysql mariadb ， 单纯 不用 太 。   python2.6 升级 python2.7 ， 这是 极好 。   修改 主机名 推荐   hostnamectl   。   语言 字符集 管理 配置文件   / / local . conf   修改 时 区 推荐   timedatectl   命令 。   修改 地区 推荐   localectl   命令 。   服务 管理 推荐   systemctl   命令 ， service 命令 。 chkconfig 推荐 systemctl 命令 。   systemctl   restart / start / stop   service _   systemctl   enable / disable   service _   强制 终止 进程 ，   \\ verb + kill   - 9   PID +   ， 推荐 ：   systemctl   kill   - - singal = 9   PID   ifconfig 命令 单独 安装 （ net - tools ） ， 推荐 ip 命令 。   U盘 安装 ubuntu   安装 请 先 硬盘 中 资料 做 调整 ， 空 出 一个 大于 20G 硬盘 做 将来 安装 ubuntu 根目录 地方 。 还 一个 内存 两倍 硬盘分区 下 linux 系统 swap 交换 分区 。 （ 更 还 开个 分区 / home 不 讨论 。 ）   ubuntu 官 网上 下载 系统 光盘 映像 。   ultroiso 软件 （ 类似 功能 软件 行 ） （ ultroiso 选择 最新 版本 ， ubuntu10.10 要用 9.3 版本 之上 ） 光盘 映像 写入 U盘 中 去 。   重启 计算机 ， BIOS 稍作 改动 使 计算机 U盘 启动 。   安装 过程 ， 过程 都 直观 ， 硬盘分区 设置 上 选择 高级 手动 ， 分 20G 硬盘 ／ 加载点 ， 设置 格式化 成 ext4 日志 系统 （ 文件系统 ext3 行 ） 。 设置 交换 分区 ， 安装 。   ubuntu 下 ISO 文件 硬盘 安装 win7 系统   gparter 分区   先 mount   文件 复制到 d 盘   执行   sudo   update - grub   重启 新 恢复模式 下 即可 .   Virtualbox   网络连接 模式   小节 参考   网页   。   NAT 模式   网络地址 转换 ， 理解 Guest 机 发送 IP 包 主机 （ 类似 做 路由器 功能 ） 分发 再 。   网桥 模式   模式 理解 ， 虚拟机 类似 一台 真实 机器 Host 同等 地位 接入 网络 ， 内网 不 分发 IP地址 功能 模式 不 可行 。   Host - 模式   理解 Guest Host 上 模拟 一张 网卡 ， 虚拟机 都 连接 这张 网卡 上 。 虚拟机 访问 。 虚拟机 主机 之间 ， 虚拟机 外网 之间 都 设置 访问 。   共享 文件夹 设置   安装 增强 功能 ， virtualbox 设置 好 共享 文件夹 ， 记得 客机 系统 ， 还 加载 文件夹 ：   sudo   mount   - t   vboxsf   share   / home / wanze / share     share   名字 virtualbox 设置 名字 ， 挂载 文件夹 请 客机 系统 新建 一个 。   找 不到 错误   章节 加上 内容 ， 都 说 ， No   Such   file 报错 ， 软件包 依赖 出 。 讨论 Ubuntu 系统 （ debian 系 ） ， Centos （ RPM 系 ） ， 包 名字 ， 想 读者 灵感 。   ffi . h   参考   网页   。   报错 ：   fatal   error :   ffi . h :   No     file     directory   解决方案 ：   sudo   apt -   install   libffi - dev   opensslv . h   报错 ：   fatal   error :   openssl / opensslv . h :   文件 目录   解决方案 ：   sudo   apt   install   libssl - dev   参考资料   网络 ， 别人 博客 知识 引用 文章 中 列出来 列出来 ， Linux 系统 很多 知识 很多 网页内容 都 很 接近 ， 实在 不 原创 ， 并用 网络 词来 。 谢谢 博客 网页 编写者 ， 劳动 传播 知识 ， 提升 IT 从业者 技能 解决 很多 ， 人类 IT 技术 。 也许 赚 一分钱 ， 半点 名利 ， 做出 贡献 遗忘 ， 都 上帝 嘉许 。   有名 鸟哥 linux 私房 菜 基础 篇 网络 篇 。 请 参看   鸟哥 文章 官网   。 基础 篇   / linux _ basic   ， 网络 篇   / linux _ server   。   unix 编程 艺术   unix 编程 艺术   [ 美 ]   Eric   S · Raymond   ,   姜宏   ( 译者 ) ,   何源   ( 译者 ) ,   蔡晓骏   ( 译者 )   ​",
            "tags":"linux",
            "url":"articles/linux-system-basic.html"
        },
        {
            "title":"vi编辑器",
            "text":"推荐 先 安装 完整版 vim ， 按键 乱码 会 自动 解决 。 中文 输入法 状态 下 会 切换 vi 模式 困扰 。   vi 编辑器 第一条 ， 记住   i   编辑 模式 ， 按键 都   Esc   退出 编辑 模式 才 。   常用 快捷键   按键 针对 常见 键盘 ， MAC 下 按键 会 有所不同 。   Ctrl   +   f   屏幕 向下 一页   G   一行   gg   第一行   推荐   1G   行 跳转 操作 ，   100G   跳 转到第 100 行 。   dd   删除 行   yy   复制 行   p   粘贴   u   撤销   r   redo   块 选择   按键   v   块 选择 ， 光标 块 选择 。   y   复制 块   d   删除 块   查找   匹配 单词   / Lao   Zi   搜索 精确 匹配 含有 \" Lao   Zi \" 字符串 ，   n   查找 \" Lao   Zi \" ， 查找 下 一个   查找 历史   输入   /   方向键 ， 如同 终端 上 方向键 调用 上 一个 命令 ， 调用 上 查找 命令 。 很 有用 。   反向 查找   问号     反向 查找 。   n   ， 下 一个 反向 ， 理解 n 上 查找 命令 重做 。   锚定 行   正则表达式 知识 ：   &# 94 ;   符号 一行 。 执行 查找 命令 ：   / &# 94 ; Th   算是 一个 小型 正则表达式 匹配 模式 ， 自然语言 描述 ： 匹配 T 行首 ， 还 一个 字母 h 文本 。 The This 开头 行 都 匹配 进去 ， 请 读者 试试   / &# 94 ; This   精确 匹配 T 行首 ， 跟着 字母 文本 。   锚定 行 结尾   $   符号 一行 结尾 。   空行   / &# 94 ; $   。 将会 匹配 一条 字符 空行 。   替换   全局 替换   % s   /   源 字符串   /   目的 字符串   /   g     %   文档 ，   快速   shift + g   快速 文档 尾部   gg   快速 文档 头部   vimrc 配置   用户 主 文件夹 下   . vimrc   文件 vi 编辑器 定制 配置 。   vi 编辑器 下 输入   :   ， 写下 配置 ， 会 编辑器 上 生效 。   解决 Backspace 键 乱码 方向键 乱码   set   nocompatible   set   backspace = 2   自动 缩进   set   autoindent   显示 行号   set   nu   开启 语法 高亮   syntax     ​",
            "tags":"linux",
            "url":"articles/vi-editor.html"
        },
        {
            "title":"如何让自己更有名-seo入门",
            "text":"seo 简介   SEO 英文 （ Search   Engine   Optimization ） 缩写 ， 搜索引擎 优化 。 简单 来说 网站 搜索引擎 中 排名 更 高 方法 研究 。   外链   网站 引用 网站 提高 网站 排名 ， 搜索引擎 算法 中 一个 很 指标 。   meta 标记   早期 搜索引擎 会 爬 取 meta 源 标记 信息 ， 所示 ：   < meta   = \" keywords \"   content = \" search   engine   optimization ,   SEO ,   Jennette   Banks ,   搜索引擎 优化 ,   tttwaca \" / >   搜索引擎 发展 方向 忽略 指定 关键词 ， 分析 关键词 。   无疑 seo 最最 内容 ：   更新 高质量 内容   更新 高质量 内容   无疑 seo 重中之重 。 搜索引擎 发展 越来越 智能化 ，   更能 满足用户 需求   网页 ，   用户 体验 好 网页   无疑 更 高 排名 。 做个 假想 ， 搜索引擎 都 检测 目标 网页 评论 数 ， 点赞数 ， 目标 网页 更 高 评分 ， 已知 因素 衡量 一篇 网页 网站 价值 上 会 越来越 ：   因素   跳出 率   只 访问 入口 网页 离开 访问量 占 总 访问量 百分比   用户 访问 深度   用户 访问 网站 打开 总 页面 数 （ 跳出 率 衡量 网站 价值 上 会 有失 偏颇 ， 博客 。 ）     2017 排名 因素 篇文章   介绍 ， 推荐 网站   https   链接 。   网站 流量 点击率 排名 影响 ， 高 查询 量 关键词 。   查询 站点 收录 情况   site   :   _ domain   google   seo 文档 学习   参看   google 文档   。   title 很   description   元 标记 很 ， 短 过长 重复 元 标记   html   < meta   content = \" 指南 对象 &# 10 ;   Google   搜索 运营 、 管理 推广 在线 内容 ， 在线 内容 获利 ， 指南 。 业务 快速 发展 商家 、 拥有   \"   = \" description \" >   元 标记 很 ，   Google   会 用作 网页 摘要 。   google   文档 原话 ， 说 ， 优化 优化 下 。   em     strong   标签 会 影响 google 分析 文档 ， 视为 文字 ， 文字 本文 关键词 很 好 关联性 。   添加 结构化 数据 标记 （ TODO ）   网站 结构 导航条 优化   读者 所想 提供   链接 文字 优化 ， 点击 ， 文章 ， 而应 描述 文字 （ 做 不太好 ）   优化 图片   alt   信息   推广 网站 （ google 言下之意 网站 访问量 因素 ）     google 网站 管理员 工具     bing 网站 管理员 工具   。   分析 网站 上 用户   facebook 爬虫   facebook 上 分享 网页 ， facebook 爬虫 会 工作 ， facebook 推荐   Open   Graph   Tags 定制 分享 页面 效果 ：   <   meta   property   =   \" og : type \"   content   =   \" article \"   / >   <   meta   property   =   \" og : title \"   content   =   \" 自訂 網頁 Facebook ,   Google + 社群 平台 顯示 內容 \"   / >   <   meta   property   =   \" og : description \"   content   =   \" 透過 社群 分享 中繼標 籤 ， 我們 優化 顯示 社群 網 站上 內容 ， 包含 標題 、 縮圖 、 說明 文字 、 作者 … ， 還有 豐富 訊息 。 這 篇文章 就要 教 社群 分享 中繼標 籤 來 自訂 顯示 社群 網 站上 分享 訊息 。 \"   / >   <   meta   property   =   \" og : image \"   content   =   \" http : / / blog . shihshih . / social - meta - tag / demo / images / social - sharing . png \"   / >   <   meta   property   =   \" og : url \"   content   =   \" http : / / blog . shihshih . / social - meta - tag / \"   / >   twitter 爬虫   twitter 分享 类似 twitter   card 标准 ：   <   meta     =   \" twitter : card \"   content   =   \" summary \"   / >   <   meta     =   \" twitter : site \"   content   =   \" @ sullen1209 \"   / >   <   meta     =   \" twitter : title \"   content   =   \" 自訂 網頁 Facebook ,   Google + 社群 平台 顯示 內容 \"   / >   <   meta     =   \" twitter : description \"   content   =   \" 透過 社群 分享 中繼標 籤 ， 我們 優化 顯示 社群 網 站上 內容 ， 包含 標題 、 縮圖 、 說明 文字 、 作者 … ， 還有 豐富 訊息 。 這 篇文章 就要 教 社群 分享 中繼標 籤 來 自訂 顯示 社群 網 站上 分享 訊息 。 \"   / >   <   meta     =   \" twitter : image \"   content   =   \" http : / / blog . shihshih . / social - meta - tag / demo / images / social - sharing . png \"   / >   <   meta     =   \" twitter : url \"   content   =   \" http : / / blog . shihshih . / social - meta - tag / \"   / >   seo 术语   PV   page   view   页面 浏览量   Visit   访问 次数   UV   独立 访客 数   参考资料   seo 教程 - 极客 学院   social - meta - tag",
            "tags":"others",
            "url":"articles/seo-tutorial-one.html"
        },
        {
            "title":"mol文件格式",
            "text":"前言   本文 参考 Molfile   wiki 页面   。   openbabel heroku 上 不好 安装 ， 其有 c 依赖 ， pubchem 数据库 输出 sdf 文件 ， chemdoodle 接受 mol 文件格式 显示 分子 3D 图形 ， 我试 openbabel smiles 输出 mol   file ：   def   smi2mol   (   smiles   ) :   \" \" \"   read   smiles   string   ,   retrun   3d   mol   file   content .   : param   smiles :   : return :   \" \" \"   mol   =   pybel   .   readstring   (   \" smi \"   ,   smiles   )   mol   .   make3D   ( )   return   mol   .   write   (   \" mol \"   )   大体 。 pubchem   restful   api 输出 record 全记录 时有 很 详细 原子 数目 坐标 ， 想 可不可以 数据 自动 输出 mol   file 。   最 简单 方法 ， 利用 pubchem 目标 分子 sdf 文件 ， sdf 文件 前 兼容 mol   文件 ， 前端 网页 初步 测试 文件 前 一行   M   END   之间 内容 复制粘贴 新建 一个 mol   file ， 测试 可行 。 一个 最 简单 方法 写 一个 简单 函数 ， 之间 内容 返回 即可 。   更 点 方法 理解 化学 信息学 连接 表 结构 ， 读取 pubchem 原子 坐标 和键 信息 ， 本地 绘制 连接 表 。   mol 文件 行 信息   第一行 分子 名字   第二行 程序 信息   第三行 空行 注释   接下来 连接 表 信息 ，   M   END   结束 ， 连接 表 信息 ：   几个 原子   几个 键   ........   V2000   标准   第一个 原子   x 坐标   y 坐标   z 坐标   元素符号   ...   ...   第一个 键   连接   第几个 原子     第几个 原子   类型   ...   sdf 文件   sdf 文件 连接 表 内容 上 ， 1 - 3 行 header 修改 不 影响 分子 显示 。 sdf 文件 结尾 会 加上 ：   $ $ $ $   mol   file 。 之上 会 会 写 分子 属性 信息 ：   >   < PUBCHEM _ IUPAC _ OPENEYE _ NAME >   1 - bromobutane   >   < PUBCHEM _ IUPAC _ CAS _ NAME >   1 - bromobutane   >   < PUBCHEM _ IUPAC _ NAME >   1 - bromobutane   >   < PUBCHEM _ IUPAC _ SYSTEMATIC _ NAME >   1 - bromanylbutane   >   < PUBCHEM _ IUPAC _ TRADITIONAL _ NAME >   1 - bromobutane   >   < PUBCHEM _ IUPAC _ INCHI >   InChI = 1S / C4H9Br / c1 - 2 - 3 - 4 - 5 / h2 - 4H2 , 1H3   >   < PUBCHEM _ IUPAC _ INCHIKEY >   MPPPKRYCTPRNTB - UHFFFAOYSA - N   >   < PUBCHEM _ XLOGP3 >   2.8   >   < PUBCHEM _ EXACT _ MASS >   135.989   >   < PUBCHEM _ MOLECULAR _ FORMULA >   C4H9Br   >   < PUBCHEM _ MOLECULAR _ WEIGHT >   137.02   >   < PUBCHEM _ OPENEYE _ CAN _ SMILES >   CCCCBr   看 结构 很 程序 分析 ， pubchem 返回 json 格式 还好 分析 一点 。 更 对接 分析 sdf 文件 。",
            "tags":"chemistry",
            "url":"articles/mol-file.html"
        },
        {
            "title":"化学信息学第二谈",
            "text":"分子   价键 模型 现代化 学 基石 ， 现代化 学 信息学 基石 。 化学家 想要 研究 一个 ， 图形 出 一个个 节点 ， 原子 ， 一个个 节点 之间 连成 ， 化学键 。   价键 理论 分子 轨道 理论 区别 意义 只 量子化学 计算 层面 上 ， 老实 说 学习 ， 简单 化学键 理解 电子 运动 轨迹 ， 电子 两个 原子 共享 分子 层面 共享 理解 ， 离子键 共价键 还 说 ， 一种 程度 。 大体   离子键   - >   共价键 单键   - >   苯 化学键   - >   共价键 双键 。 量子化学 计算 ， 理解 化学 世界 来说 ， 确实 价键 理论 够用 。   连接 表格   早期 研究 化学 信息学 一个 分子 连接 表 （ connection   table ） ， 列出 原子 ， 原子 之间 连接 键 （ 描述 连接起来 ） 。   SMARTS   ( SMiles   ARbitrary   Target   Specification ) .   子结构 搜索 语言 ， 比如说   [ C , N ]   将会 找 一个 原子 碳原子 氮 原子   子结构 搜索 索引   索引 indexing 预处理 加速 搜索 过程 。   化学 信息学 分子结构 索引 过程 目标 分子 降解 （ decompose ） 小 ， 索引 。   子结构 搜索 数学 上 图同构 （ graph   isomorphism ） ， 子 图同构 NPC ， 图同构 P NPC NP （ 参考 wikipedia ） 。 简单 来说 P 多项式 复杂度 ， 计算机 应付 得来 ； NP 是非 多项式 复杂度 ， 计算机 很难 应付 。   化学 信息学 上 ， 子结构 搜索 复杂度 原子 化学键 数目 增长 指数 级别 增长 。 数学 上 证明 子结构 搜索 一个 NPC ， 没 去试 找 一个 多项式 复杂度 算法 。 好消息 分子 很 低 连接性 （ low   connectivity ） ， 原子 化学键 少于 四个 ， 不像 数学家 研究 奇怪 图形 。 在实践中 ， 子结构 搜索 计算 复杂度   \\ ( N &# 94 ; 2 \\ )     \\ ( N &# 94 ; 3 \\ )   之间 。 ， 子结构 搜索 计算机 来说 都 一个 昂贵 计算 。   索引 indexing 化学 信息学 系统 来说 ， 计算机 一秒钟 内 检索 几千个 分子 ， 百万 分子 检索 不 ， indexing 关键性 作用 。   分子 度   子结构 搜索 很 有用 ， 会 分子 之间 很 信息 忽略 ， 子结构 ， 地方 一个 单键 一个 双键 区别 ， 子结构 搜索 忽略 。 这是 分子 度 搜索 更 有用 信息 。   用来 检测 分子 度 手段 ：   2D 拓扑 计算 ， 2D 拓扑 计算 只 分子 原子 化学键 ， 不 形状 。   3Dconfiguration   医药 分子 3D 形状 医药 价值 很 ， 3D 构造 分析 ， 电子 表面 分析   物理性质   clustering   化学 注册 系统   化学 注册 系统 （ Chemical   Registration   System ） 化学 信息学 两 兄弟 。 化学 注册 系统 解决 ：   单个 分子 只 注册   结构 规范化   结构 绘制   维护 相关 分子 之间 关系 。   注册 混合物 ， 配方 描述 ，   注册 未知 分子   公司 角色 、 安全性 、 责任 、 工作 流程   更新 、 修正 、 控制 化合物 繁衍 增进 （ 混合物 混合 比例 ）   假设 五个 烧杯 ：   第一个 烧杯 仔细 分析 ， 发现 单一 立体 异构体   第二个 烧杯 仔细 分析 ， 发现 一个 立体 异构体 外 消旋 混合物   第三个 烧杯 未知 ， 纯 物质 ， 单一 立体 异构体 外 消旋 混合物 。   第四个 烧杯 第二个 烧杯 色谱 分离 ， 单一 立体 异构 ， 不 立体 异构 。   第五个 烧杯 制作 第四个 烧杯 过程 一部分 ， 单一 立体 异构 纯 ， 不 立体 异构 ， 只 第四个 烧杯 立体 构造 。   化学 注册 系统 情况 都 记录 分 ， 已 超出 化学 信息学 研究 领域 。 化学 信息学 关心 结构 ， 化学 注册 系统 记录 化学家 研究 事实 不 事实 。   参考资料   openbabel 提供 化学 信息学   介绍 章节   。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"chemistry",
            "url":"articles/cheminformatics-talk-two.html"
        },
        {
            "title":"postgresql数据库",
            "text":"安装 配置   ubuntu 下 简单 安装 ：   sudo   apt -   install   postgresql   centos 下 安装 ：   sudo   yum   install   postgresql - server   postgresql - contrib   centos 下 运行 命令 ：   sudo   postgresql - setup   initdb   安装 ， 牢记 一点 ， 新 安装 PostgreSQL 数据库 还   postgres   用户 新建 role （ 说 用户 ） 新建 数据库 权限 。   postgres   用户 执行   createuser     createdb   命令 。 先不急 学习 SQL 语句 ， postgresql 用户 群组 权限 设置 稍微 ， postgresql ， 一块 有个 。   用户 群组 权限 管理   postgresql 登录 用户 用户 概念 术语 Rules ， 都 称之为 用户 （ rules ） ， 理解 用户 确立 一系列 访问 修改 数据库 规则 。 rules 包含 rules ， 包含 rules rules 称之为 群组 （ group   rules ） ， 群组 包含 群组 ， 都 推荐 简单 分为 用户 （ rules ） 群组 用户 （ group   rules ） 两类 。 用户 登录 权限 称之为 登录 用户 （ login   rules ） ， 群组 用户 赋予 登录 权限 ， 出于 简单 没 做 。 rules 简单 划分 分为 这三类 :   用户 ， 指 登录 权限 用户 。   登录 用户 ， 登录 用户 ， 用户 ， 登录 权限 。   群组 用户 ， 包含 用户 rules 。   postgresql 还 提供   superuser   超级 用户 这一 类型 ， 默认 登录 ， 数据库 拥有 权限 — — 创建 数据库 ， 创建 用户 ， 数据库 查 增删 改等 。 实际上 superuser 加上   login   属性 ， 不 推荐 做 ， 不 超级 用户 ， 用户 数据库 权限 分配 。   默认 创建 postgres 用户 连接 ， 至少 postgres 数据库 权限 ， 还 不 太 superuser ， 数据库 权限 ， 再谈 。   修改 postgres 密码   sudo   - u   postgres   psql   postgres   postgres = #   \\ password   postgres   Enter     password :   Enter     :   一点 psql 连接 （ postgres ） 输入   \\ password   修改 postgres 密码   TCP / IP   方式 连接 postgresql 数据库 密码 ， 系统 passwd 管理 密码 。   postgres 用户   postgres 用户 信息 所示 :   postgres   :   x   :   121   :   131   :   PostgreSQL   administrator   , , , : /   var   / lib / postgresql : / bin /   bash   新建 postgres 群组 :   postgres   :   x   :   131   :   121 uid ， 131 gid ，   / var / lib / postgresql   文件夹 postgres 用户 主 文件夹 ， postgresql 配置 数据 都 放在 。 会 保存   . psql _ history   文件 权限 ， 参看   网页   ， 确认 文件夹 用户 群组 都 postgres 。   查看 用户     这篇 网页   介绍 ，   pg _ roles   一个 view 视图 ， 一个   pg _ authid   简单 可读 视图 封装 ， 所示 ， 来说 差异 ， postgres superuser ， login   user 。   select   rolname , rolsuper , rolcreaterole , rolcreatedb , rolcanlogin     pg _ roles ;   rolname   |   rolsuper   |   rolcreaterole   |   rolcreatedb   |   rolcanlogin   - - - - - - - - - - + - - - - - - - - - - + - - - - - - - - - - - - - - - + - - - - - - - - - - - - - + - - - - - - - - - - - - -   postgres   |   t   |   t   |   t   |   t   wanze   |   t   |   t   |   t   |   t   select   rolname , rolsuper , rolcreaterole , rolcreatedb , rolcanlogin     pg _ authid ;   rolname   |   rolsuper   |   rolcreaterole   |   rolcreatedb   |   rolcanlogin   - - - - - - - - - - + - - - - - - - - - - + - - - - - - - - - - - - - - - + - - - - - - - - - - - - - + - - - - - - - - - - - - -   postgres   |   t   |   t   |   t   |   t   wanze   |   t   |   t   |   t   |   t   新建 用户   新建 一个 用户 :   create   role   _ ;   最起码 登录 login 权限 :   create   role   _   login ;   postgresql 时 ， 用户 不 ， PostgreSQL 将会 报错 :   createdb   :       connect     database   template1   :   FATAL   :   role   \" wanze \"       exist   删除 用户   drop   role   _ ;   用户名 不 报错 写法 :   drop   role     exists   _ ;   改变 用户 权限   所示 改变 一个 用户 权限 。   alter   role   _   createdb ;   参照 手册 ， 关键词 :   SUPERUSER   |   NOSUPERUSER   CREATEDB   |   NOCREATEDB   CREATEROLE   |   NOCREATEROLE   CREATEUSER   |   NOCREATEUSER   INHERIT   |   NOINHERIT   LOGIN   |   NOLOGIN   REPLICATION   |   NOREPLICATION   改变 用户 密码   新建 用户 ， :   create   role   _   password   \" _ password \" ;     alter   role   :   alter   role   _   password   \" _ password \" ;   新建 一个 群组   CREATE   ROLE   royalty   INHERIT ;   群组 用户 增加 登录 用户   GRANT   royalty   TO   leo ;   GRANT   royalty   TO   regina ;   pg _ hba . conf   很多 连接 文件 配置 好 ， 详细 研究 文件 。   #   #   local   DATABASE   USER   METHOD   [ OPTIONS ]   #   host   DATABASE   USER   ADDRESS   METHOD   [ OPTIONS ]   #   hostssl   DATABASE   USER   ADDRESS   METHOD   [ OPTIONS ]   #   hostnossl   DATABASE   USER   ADDRESS   METHOD   [ OPTIONS ]   local   指 本地连接   host   指 plain ssl 加密 TCP 套 接字 连接 （ 指 http https ）   hostssl   指 ssl 加密 TCP 套 接字 连接   hostnossl   指 plain   简单 TCP 套 接字 连接   DATABASE   设置 连接 数据库 ， 常见   ADDRESS     127.0 . 0.1 / 32   本地连接 ipv4 ，   0.0 . 0.0 / 0   指 ipv4 外网 。 这是 一种 网域 段 表示法 。   METHOD   trust ， reject ， md5 （ 加密 密钥 ） ， password （ 明文 密钥 ）   人 困惑 peer 方法 查阅 文档 解释 ：   The   peer   authentication   method   works     obtaining     client ' s   operating   system   user         kernel             allowed   database   user     (   optional   user     mapping ) .   This   method       supported     local   connections .   peer 认证 方法 获取 客服 端 操作系统 用户名 ， 数据库 用户名 。 方法 只 local 连接 。   ident 方法 本地连接 会 peer 方法 ， 官方 文档 解释 上 字面 很 ， 区别     ident   server   , 一个   kernel ，   一个   ident   server ，   暂时 不 懂 ？   psql   参考   网页   。   \\ l     \\ list   :   列出 数据库   \\ du   :   列出 用户   \\ dt   *   :   列出 数据库 表格   \\ c     \\ connect   :   切换 数据库   数据库 操作 基础   创建 数据库   CREATE   DATABASE   mydb ;     CREATEDB   权限 用户 新建 数据库 。   创建 一个 数据库 ， 指定 数据库 owner 。   CREATE   DATABASE   mydb   WITH   owner   =   mydb _ admin ;   mydb _ admin 登录 数据库 操作 。   备份 还原   两个 backup 方法   pg _ dump     pg _ dumpall   pg _ restore   还原 ，   改变 数据库 所有者   postgres 身份 连接 postgres 数据库 ， 更改 数据库 所有者 ， 数据库 所有者 。   wanze @ wanze - ubuntu : ~ $   sudo   - u   postgres   psql   postgres   psql   ( 9.3 . 8 )   Type   \" \"     .   postgres = #   ALTER   DATABASE   mydb   OWNER   TO   learner ;   ALTER   DATABASE   postgres = #   \\ q   ALTER   DATABASE 语句   mydb   更改 数据库 名字 ， learner 更 改为 所有者 名字 。   类似 谈及 ，   dropdb   用于 删除 数据库 ，   dropuser   用于 删除 用户 。   CREATE   TABLE 语句 都 熟悉 ， 数据类型 上 ， 还 详细 讨论 一番 。   postgresql 字段 数据类型   int   ,   smallint   ,   real   ,   double   precision   ,   char (   N   )   ,   varchar (   N   )   ,   date   ,   time   ,   timestamp   ,     interval   ,   postgresql 支持 数据类型 ， ： int ， smallint ， real ， boolean ， date ， time ， integer ， text ， char ( N ) ， varchar ( N )   json 。 慢慢 ， 更 细节 请 参看 官方 文档 第八章   Data   Types ， 这是   版本 9.3 网页 链接   。   整数 简单 integer ， 字符串 简单 text ， 小数 简单 real ， 布尔值 boolean ， 用途 数据类型 值得 ， uuid ， json ， arrays ， money ， bytea ， 日期 时间 date ， time ； 几何 类型 支持 point ， line   附录   配置文件   sudo   - u   postgres   psql   postgres   psql >   SELECT   , setting   FROM   pg _ settings   WHERE   category   =   ' File   Locations ' ;     |   setting   - - - - - - - - - - - - - - - - - - - + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   config _ file   |   / / postgresql / 9.3 / main / postgresql . conf   data _ directory   |   / var / lib / postgresql / 9.3 / main   external _ pid _ file   |   / var / run / postgresql / 9.3 - main . pid   hba _ file   |   / / postgresql / 9.3 / main / pg _ hba . conf   ident _ file   |   / / postgresql / 9.3 / main / pg _ ident . conf   ( 5   rows )   重启 postgresql 服务   linux 下 运行 命令行 目的 :   sudo   service   postgresql   restart     sudo   service   postgresql   reload   参考资料   PostgreSQL 官方 参考 文档   PostgreSQL   Up     Running ,   2nd   Edition",
            "tags":"数据库",
            "url":"articles/postgresql-database.html"
        },
        {
            "title":"heroku on fire",
            "text":"heroku 上 部署 项目 很 简单 ， 本文 简单 heroku 容器 作用 原理 简单 git 推送 额外 配置 ， 过程 不   heroku   命令行 工具 ， 网页 操作 ， 修改 文件 。   本文 面向 python ， 推荐 读者 参考   heroku   官方 github   上 项目 ， 比如说   项目   。 其是 基于 django1.11 ， 看着 模板 理解 东西 ， heroku 上 设置 好 自动 github 同步 。   runtime . txt   文件 用来 执行 python 版本 ， 简单 写 上 即可 ：   python - 3.6 . 3   ， 远程 heroku 会 帮 python 运行 环境 python - 3.6 . 3 。   requirements . txt   熟悉 python 开发 人 都 文件 ， heroku ， 填写 好 一个 文件 ， heroku 远程 调配 好 pip 环境 。   Procfile   文件 包含 进程 类型 声明 ， 进程 类 （ process   type ） 一行 ：   < process   type > :   < command >   写   web   启动 一个 web   server 。   执行 命令 启动 web   server 。 gunicron 官方 文档 写 django 项目 支持 语法 ：   $   gunicorn   myproject . wsgi   指定 django settings 位置   $   gunicorn   - - env   DJANGO _ SETTINGS _ MODULE   =   myproject . settings   myproject . wsgi   教程 中 一行 ：   web   :   gunicorn   myproject   .   wsgi   - -   log   -   file   -     - - log - file   -   gunicron 日志 输出 默认 stdout 。   git 推送 项目   设置 github 自动 同步 ， 推送 github 仓库 即可 。 讲 heroku 默认 git   url 。   git   remote   add   heroku   https : / / git . heroku . /   { {   heroku _ project _   } }   . git   提示 ： 添加 heroku remote   url heroku   命令行 工具 相关 。   （ 参阅   网页   ）   heroku 命令行 工具 windows 下 环境 不好 配 ， 很多 功能 都 略过 ，   heroku   run   功能 回避 ， 工作 django 数据库 初始化 手工 输入 命令 ：   heroku   run   python   manage . py   makemigrations   heroku   run   python   manage . py   migrate   django 静态 文件   heroku 日志 中 一行 ：   python   manage . py   collectstatic   - - noinput   自动 好 django 静态 文件 。   django 数据库   官 网上 管理 好 项目 addon ，   settings   有个   Config   Vars   字 段 ， 定义 一个   DATABASE _ URL   值 。     dj - database - url   pypi 包会 自动 刷   DATABASE _ URL   django settings 配置 ， 配置 ：   #   Update   database   configuration     $ DATABASE _ URL .   import   dj _ database _ url   db _ _ env   =   dj _ database _ url   .   config   (   conn _ max _ age   =   500   )   DATABASES   [   ' default '   ]   .   update   (   db _ _ env   )   heroku 命令行 工具   heroku   create   大体 类似 官 网上 操作 新建 一个 app ， 名字 随机 。   数据库   heroku   pg : psql   - - app   cheminfo   heroku   addons : add   heroku - postgresql : dev   - - app   cheminfo",
            "tags":"others",
            "url":"articles/heroku-on-fire.html"
        },
        {
            "title":"mindmaptree",
            "text":"思维 导图 ， 设计 一种 数据格式 便捷 后续 csv json 操作 ？   csv 格式 ：   奴隶社会 , 非洲 , 古埃及 文明 , 金字塔   , 亚洲 , 两河 流域 文明 , 汉谟拉 法典   , , 古印度 , 种姓 制度   , , , 佛教 创立   , 欧洲 , 希腊 , 希腊 城邦   , , , 雅典 民主   , , 罗马 , 城邦   , , , 帝国 征服 扩展   , , 希腊 罗马 古典 文化 , 建筑 艺术   , , , 公历   实际上 谈论 二叉 搜索 树 类似 ， 变种 ， 树形 结构 下 不可避免 用到 递归 思维 。 一个 很 粗糙 版本 ， 最 核心 一个点 Node 只 做好 分内 事情 就行了 ， 放到 整体 支持 功能 递归 展开 即可 。   类 设计   import   logging   logger   =   logging   .   getLogger   (   __ __   )   logging   .   basicConfig   (   level   =   logging   .   DEBUG   )   class   MindMapTree   (   object   ) :   def   __ init __   (     ,   data   =   None   ,   parent   =   None   ) :     .   data   =   data     .   parent   =   parent     .   children   =   [ ]   def   introspection   (     ) :   \" \" \"   核心 内省 函数 ， 返回 children 。   \" \" \"   stack   =   [ ]   tree   =       tree   .   data       None   :   logger   .   debug   (   ' intorspection   add   node : { 0 } '   .   format   (   tree   ) )   stack   .   append   (   tree   )     child     tree   :   stack   + =   child   .   introspection   ( )   return   stack   def   __ str __   (     ) :       .   children   :   return   ' < MindMapTree : { 0 } >     children :   { 1 } '   .   format   (     .   data   ,     .   children   )     :   return   ' < MindMapTree : { 0 } > '   .   format   (     .   data   )   def   __ repr __   (     ) :       .   children   :   return   ' < MindMapTree : { 0 } >     children :   { 1 } '   .   format   (     .   data   ,     .   children   )     :   return   ' < MindMapTree : { 0 } > '   .   format   (     .   data   )   def   append   (     ,   child _ data   ) :   child   =   MindMapTree   (   child _ data   ,   parent   =     )     .   children   .   append   (   child   )   def   remove   (     ,   child _ data   ) :   child   =   MindMapTree   (   child _ data   ,   parent   =     )     .   children   .   remove   (   child   )   def   insert   (     ,   parent _ data   ,   child _ data   ) :     target       .   introspection   ( ) :     target   .   data   = =   parent _ data   :   target   .   append   (   child _ data   )   def   find   (     ,   key   ) :     target       .   introspection   ( ) :     target   .   data   = =   key   :   return   target   raise   KeyError   def   set _ nodedata   (     ,   data   ) :     .   data   =   data   def   __ iter __   (     ) :       .   children       None   :     child       .   children   :   yield   child   def   _ json   (     ) :   return   {     .   data   :   [   i   .   _ json   ( )     i       .   children   ] }   def   _ path   (     ) :   res   =   [ ]     True   :   res   .   append   (     .   data   )       .   parent     None   :   break     :     =     .   parent   return   res   [ : :   -   1   ]     __ __   = =   \" __ main __ \"   :   tree   =   MindMapTree   (   \" 奴隶社会 \"   )   tree   .   append   (   \" 非洲 \"   )   tree   .   append   (   \" 亚洲 \"   )   tree   .   insert   (   \" 非洲 \"   ,   \" 古埃及 文明 \"   )   tree   .   insert   (   \" 古埃及 文明 \"   ,   \" 金字塔 \"   )   tree   .   insert   (   \" 亚洲 \"   ,   \" 两河 流域 文明 \"   )   tree   .   insert   (   \" 两河 流域 文明 \"   ,   \" 汉谟拉 法典 \"   )   tree   .   insert   (   \" 亚洲 \"   ,   \" 古印度 \"   )   print   (   tree   )   print   (   ' ###################### '   )   stack   =   tree   .   introspection   ( )   print   (   stack   )   yazhou   =   tree   .   find   (   \" 亚洲 \"   )   print   (   yazhou   .   introspection   ( ) )   print   (   yazhou   .   parent   )   print   (   yazhou   .   children   )   print   (   tree   .   _ json   ( ) )   print   (   tree   .   _ path   ( ) )   csv 读写   import   csv     collections   import   defaultdict   class   MindMapCSV   (   csv   .   Dialect   ) :   delimiter   =   ' , '   #   分隔符   quotechar   =   ' \" '   #   quote 符号   doublequote   =   True   #   双引号 字符 中 情况   skipinitialspace   =   True   #   分隔符 后 空白 忽略   lineterminator   =   '   \\ n   '   #   换行符   quoting   =   csv   .   QUOTE _ MINIMAL   #   最小 quote   csv   .   register _ dialect   (   \" MindMapCSV \"   ,   MindMapCSV   )   import   logging   logger   =   logging   .   getLogger   (   __ __   )   logging   .   basicConfig   (   level   =   logging   .   INFO   )     mindmaptree   import   MindMapTree   class   MindMapReader   ( ) :   def   __ init __   (     ,   f   ,   dialect   =   ' MindMapCSV '   ) :     .   data   =   MindMapTree   ( )   _ stack   =   { }     =   True   #   根 元素 ， 还 只 一个 根 元素 情况     line     csv   .   reader   (   f   ,   dialect   ) :   logger   .   debug   (   '   original   line   data :   { 0 } '   .   format   (   line   ) )     index   ,   item     enumerate   (   line   ) :     item   :       :   _ stack   [   index   ]   =   item     .   data   .   set _ nodedata   (   item   )     =   False     :     =   _ stack   [   index   -   1   ]   _ stack   [   index   ]   =   item     .   data   .   insert   (     ,   item   )     :   #   \" \"   continue   logger   .   debug   (   ' init   data :   { 0 } '   .   format   (     .   data   .   introspection   ( ) ) )   def   getdata   (     ) :   return     .   data   class   MindMapWriter   ( ) :   def   __ init __   (     ,   f   ,   dialect   =   ' MindMapCSV '   ) :     .   data   =   MindMapTree   ( )     .   writer   =   csv   .   writer   (   f   ,   dialect   )   def   setdata   (     ,   data   ) :     .   data   =   data   函数 接口   def   read _ csv   (   f   ) :     open   (   f   ,   newline   =   ' '   ,   encoding   =   ' utf8 '   )     f   :   reader   =   MindMapReader   (   f   )   data   =   reader   .   getdata   ( )   return   data   def   csv2json   (   f   ) :     open   (   f   ,   newline   =   ' '   ,   encoding   =   ' utf8 '   )     f   :   reader   =   MindMapReader   (   f   )   data   =   reader   .   getdata   ( )   res   =   data   .   _ json   ( )   import   json   res   =   json   .   dumps   (   res   ,   sort _ keys   =   True   ,   indent   =   2   ,   ensure _ ascii   =   False   )   return   res   def   find   (   mindmaptree   ,   key   ) :     :   target   =   mindmaptree   .   find   (   key   )   return   ' . '   .   join   (   target   .   _ path   ( ) )     KeyError   :   return   ' 找 不到 关键字 ： { 0 } '   .   format   (   key   )     __ __   = =   ' __ main __ '   :   data   =   read _ csv   (   ' history . csv '   )   print   (   data   )   json _ data   =   csv2json   (   ' history . csv '   )   print   (   json _ data   )   find _ res   =   find   (   data   ,   \" 汉谟拉 法典 \"   )   print   (   find _ res   )   find _ res   =   find   (   data   ,   \" 美洲 \"   )   print   (   find _ res   )",
            "tags":"算法",
            "url":"articles/mindmaptree.html"
        },
        {
            "title":"二分查找",
            "text":"二分 查找   二分 查找 接触 ， 不怎么 重视 ， 一种 快速 查找 方法 ， 参看   网页   ， python   index   方法 二分 查找 ， 大规模 查询 会 很 吃力 。 python sequence 对象 都 预 排序 ， 说法 可信度 很 高 。 利用 python   bisect   模块 ， 构建 出 一种 预 排序 支持 更 快 查询 接口 ， 内部 二分 查找 。   二分 查找 原理 不 啰嗦 ， 想 说 ， 看 MIT 视频 ， 第三课 讲到 利用 二分 查找 思想 求解 平方根 ， 启发 很大 。 一句 :   计算机 找 不到 好 方法 ， 实际上 都 穷举 ， 穷举 过程 ， 不 一个个 都 试一下 ， 只 集 排序 ， 二分 查找 快速 缩小 集 ， 更快 趋近 理想 。   ， 二分 查找 思想 可不 限于 查找 ， 更 ， 看作 一种 计算机 最 核心 最底层 那种 计算 思想 东西 。 小节 二分 查找 分为 两个 内容 ， 一是 查找 ， 讨论 python   bisect 模块 ； 一是 一种 抽象 思维 描述 二分 查找 思想 。   抽象 二分 查找 思想 讨论   集 函数 f ( x ) 输入 参数 ， 目标 参数 target ， 令 f ( x ) = target 说 找到 目标 x ， 或者说 目标 x 符合 函数 f ( x ) = target 关系 。 假设 考察 对象 f ( x ) 目标 集内 简单 增减 关系 ， 目标 集合 由此 排序 ， 二分 查找 找到 目标 x 。   查找 为例 ， f ( x ) 函数 f ( x ) = x ， 输入 输出 。 x = target ， 说 目标 x 复合 条件 f ( x ) = target ， x 找 目标 x 。   定义   f ( x ) = x * x   ， 找 x 符合条件   x * x = target   ， 求 平方根 过程 。   程序 主体   binary _ search   函数 大体 ， 参考   algorithms 模块   binary _ search . py   文件 ， 稍作 修改 。   def   binary _ search   (   f   ,   seq   ,   target   ) :   low   =   0   high   =   len   (   seq   )   -   1     high   > =   low   :   mid   =   low   +   (   high   -   low   )   / /   2   print   (   low   ,   high   ,   mid   )     f   (   seq   [   mid   ] )   <   target   :   ## higher   area   low   =   mid   +   1   elif   f   (   seq   [   mid   ] )   >   target   :   ## lower   area   high   =   mid   -   1     :   print   (   ' '   )   return   seq   [   mid   ]     :   print   (   ' '   )   return   seq   [   mid   ]   来看 最 简单 查找 匹配 操作 ， :   def   f   (   x   ) :   return   x   :   seq   =   list ( ' abcdefg ' )   res   =   binary _ search ( f , seq , ' e ' )   print ( res )   0   6   3   4   6   5   4   4   4     e   > > >   平方根 ，   x * x = target   过程 ， 定义 函数 简单 改 即可 :   def   f   (   x   ) :   return   x   *   x   利用 numpy   arange   函数 生成 一个 集 。   > > >   import   numpy     np   > > >   np   .   arange   (   0   ,   10   ,   0.1   )   array   ( [   0 .   ,   0.1   ,   0.2   ,   0.3   ,   0.4   ,   0.5   ,   0.6   ,   0.7   ,   0.8   ,   0.9   ,   1 .   ,   1.1   ,   1.2   ,   1.3   ,   1.4   ,   1.5   ,   1.6   ,   1.7   ,   1.8   ,   1.9   ,   2 .   ,   2.1   ,   2.2   ,   2.3   ,   2.4   ,   2.5   ,   2.6   ,   2.7   ,   2.8   ,   2.9   ,   3 .   ,   3.1   ,   3.2   ,   3.3   ,   3.4   ,   3.5   ,   3.6   ,   3.7   ,   3.8   ,   3.9   ,   4 .   ,   4.1   ,   4.2   ,   4.3   ,   4.4   ,   4.5   ,   4.6   ,   4.7   ,   4.8   ,   4.9   ,   5 .   ,   5.1   ,   5.2   ,   5.3   ,   5.4   ,   5.5   ,   5.6   ,   5.7   ,   5.8   ,   5.9   ,   6 .   ,   6.1   ,   6.2   ,   6.3   ,   6.4   ,   6.5   ,   6.6   ,   6.7   ,   6.8   ,   6.9   ,   7 .   ,   7.1   ,   7.2   ,   7.3   ,   7.4   ,   7.5   ,   7.6   ,   7.7   ,   7.8   ,   7.9   ,   8 .   ,   8.1   ,   8.2   ,   8.3   ,   8.4   ,   8.5   ,   8.6   ,   8.7   ,   8.8   ,   8.9   ,   9 .   ,   9.1   ,   9.2   ,   9.3   ,   9.4   ,   9.5   ,   9.6   ,   9.7   ,   9.8   ,   9.9   ] )   > > >   :   import   numpy     np   seq   =   np   .   arange   (   0   ,   10   ,   0.000001   )   res   =   binary _ search   (   f   ,   seq   ,   2   )   print   (   res   )     1.414214   讲个 题外话 ， 提到 集 ， 想到 多个 函数参数 ( a , b , c ) 形式 ， 多元 函数 ， 排序 ， 大小 ， 增减 性 ？ 只好 回滚 最 原始 穷举 过程 ， 讲 计算 思想 很 核心 一个 思想 穷举 思想 ， 二分 查找 方法 条件 符合 情况 下 加速 穷举 过程 。   比如说 孙子 算经 :   今有 雉 兔 同笼 ， 上 三十五 头 ， 下有 九 十四 足 ， 问雉 兔 几何 ？   穷举 函数 :   def   iter _ search   (   f   ,   seq   ,   target   ) :     item     seq   :     f   (   item   )   = =   target   :   yield   item   很 简单 一个 函数 ， 很 简单 逻辑 ， 实际上 先 迭代 对象 ， 找到 对象 复合 条件 ， 返回 对象 过程 程序 模式 常见 。   笛卡尔 积 生成 集 :   > > >     itertools   import   product   > > >   seq   =   list   (   product   (   range   (   35   ) ,   range   (   35   ) ) )   > > >   seq   [ (   0   ,   0   ) ,   (   0   ,   1   ) ,   (   0   ,   2   ) ,   (   0   ,   3   ) ,   (   0   ,   4   ) ,   (   0   ,   5   ) ,   ..............   .............   很 直观 化为 两个 满足条件 集 过滤 操作 :   def   f ( d ) :   x   =   d [ 0 ]   y   =   d [ 1 ]   head   =   x   +   y   return   head   def   g ( d ) :   x   =   d [ 0 ]   y   =   d [ 1 ]   foot   =   2 * x   +   4 * y   return   foot   :   res   =   list ( product ( range ( 35 ) , range ( 35 ) ) )   res   =   iter _ search ( f , res , 35 )   res   =   iter _ search ( g , res , 94 )   print ( list ( res ) )   [ ( 23 ,   12 ) ]   很 简单 函数 ， 过程 很感兴趣 一种 风格 。   bisect 模块   bisect 模块 提供 二分 查找 支持 ， bisect _ left 函数 ：   def   bisect _ left   (   a   ,   x   ,   lo   =   0   ,     =   None   ) :   \" \" \" Return     index       insert   item   x     list   a ,   assuming   a     sorted .   The   return     i           e     a [ : i ]     e   <   x ,       e     a [ i : ]     e   > =   x .   So     x     appears       list ,   a . insert ( x )     insert         leftmost   x     .   Optional   args   lo   ( default   0 )       ( default   len ( a ) )   bound     slice     a       searched .   \" \" \"     lo   <   0   :   raise   ValueError   (   ' lo       - negative '   )         None   :     =   len   (   a   )     lo   <     :   mid   =   (   lo   +     )   / /   2     a   [   mid   ]   <   x   :   lo   =   mid   +   1     :     =   mid   return   lo   底层 c 加速 ， 返回 一个 索引 值 ， 索引 值 ， 执行   a . insert ( x )   ， 目标值 插入 目标 位置 ， x a 中 ， 插入 最 左边 位置 。 ：   def   binary _ search   (   seq   ,   target   ) :   \" \" \"   seq 已 排序 ， 二分 查找   返回 找到 索引 值 找到 返回 - 1   : param   seq :   : param   target :   : return :   \" \" \"   pos   =   bisect _ left   (   seq   ,   target   )   return   (   pos     (   pos   ! =   len   (   seq   )     seq   [   pos   ]   = =   target   )     -   1   )   仔细 体会 python 官方 源码 ， 写 版本 版本 稍微 好 一点 ， 代码 更 精炼 ， 版本 改造 ， 效果 都 差不多 。",
            "tags":"算法",
            "url":"articles/binary-search.html"
        },
        {
            "title":"二叉搜索树",
            "text":"二叉 搜索 树   本文 很大 程度 上 参考   algorithms   项目 ， 谢谢 作者 。   二叉 搜索 树 （ Binary   Search   Tree ） 大概 图 所示 东西 :   一个 节点 都 至多 两个 子 节点 ， 节点 都 三个 条件   左 节点 值 小于 父 节点   右 节点 值 大于 父 节点   节点 值 均 不   二叉 搜索 树 插入 复杂度   O ( log   n )   ， 查找 复杂度 情况   O ( log   n )   ， 最坏 情况   O ( n )   。   图片 二叉树 ， 假设 插入 19 ， 8 ， 大 ， 右 ， 再 10 ， 大则 右 ， 再 14 ， 大则 右 ， 空 插入 。   假设 查找 19 ， 过程 大体 类似 8 ， 大则 右 ， 再 10 ， 大则 右 ， 再 14 ， 大则 右 ， 找到 。 查找 过程 ， 涉及 判断 操作 ， 假设 元素 两边 分 ， 树中 一半 元素 都 跳过去 。 利用 数据结构 加速 查找 存储 数据 好处 显而易见 。   二叉 搜索 树 python   python 二叉树 参考   参考资料 2   ， 有个 伙计 评论 说 不 合并 一个 类 ， 提议 实际上 好 。 这样的话 data ， 节点 存储 数据 ， 都 ， 设计 ， data 大小 采用   hash ( object )   调用   __ hash __   方法 ， 判断 采用   = =   ， 调用   __ eq __   方法 。   结构 插入 查找 操作   值得一提的是 key 大小 判断 采用   hash ( data )   形式 ， 键 唯一 id 一种 方法 ， 这是 。 data 不 sequence 。 大小 ， 不 某种 实际意义 。 :   > > >   hash ( 11 ) >   hash ( \" 22 \" )   True   含义 某种 大小 ， 确保 对象 同一个 类 ， 更 抽象 讨论 ， 同一个 概念 同一个 聚合 类 。   ###   ref   http : / / www . laurentluce . / posts / binary - search - tree - library - - python /   class   BSTree   (   object   ) :   ' ' '   hash ( data )   ,   notice     data         sequence ' ' '   def   __ init __   (     ,   data   =   None   ,   parent   =   None   ) :     .   left   =   None     .     =   None     .   data   =   data     .   parent   =   parent   def   __ repr __   (     ) :   return   ' < BSTree   { } > '   .   format   (     .   data   )   def   insert   (     ,   data   ) :   ' ' ' insert   data ' ' '     hash   (   data   )   <   hash   (     .   data   ) :       .   left     None   :     .   left   =   BSTree   (   data   ,   parent   =     )     :     .   left   .   insert   (   data   )   elif   hash   (   data   )   >   hash   (     .   data   ) :       .       None   :     .     =   BSTree   (   data   ,   parent   =     )     :     .     .   insert   (   data   )     :     .   data   =   data   def   find   (     ,   data   ) :     hash   (   data   )   <   hash   (     .   data   ) :       .   left     None   :   raise   KeyError     :   return     .   left   .   find   (   data   )   elif   hash   (   data   )   >   hash   (     .   data   ) :       .       None   :   raise   KeyError     :   return     .     .   find   (   data   )     :   return     绘制 图形   很感兴趣 ， 先弄 。 很大 程度 上 依赖 一种 遍历 树 机制 。   def   introspection   (     ) :   ' ' ' walk   a   round ,       information ' ' '   stack   =   [ ]   node   =       stack     node   :     node   :   stack   .   append   (   node   )   node   =   node   .   left     :   node   =   stack   .   pop   ( )   yield   node   node   =   node   .     函数 看 参考资料 ， 稍微 做 改动 ， 返回 data ， node 对象 ， 后续 很多 函数 支持 调用 。 堆 遍历 老实 说 估计 想 不 ， 看 跟着 程序 走 发现 确实 遍历 树 ， 很 巧妙 。   绘图 函数 所示 :   def   _ ymove   (     ) :       .   parent     None   :   return   0   return     .   parent   .   _ ymove   ( )   +   1   def   _ xmove   (     ) :       .   parent     None   :   return   0       = =     .   parent   .   left   :   return     .   parent   .   _ xmove   ( )   -   1   elif     = =     .   parent   .     :   return     .   parent   .   _ xmove   ( )   +   1   def   draw   (     ) :     PIL   import   Image   ,   ImageDraw   ,   ImageFont   font   =   ImageFont   .   truetype   (   \" arial . ttf \"   ,   15   )   w   =   800   h   =   600   image   =   Image   .     (   ' RGB '   , (   w   ,   h   ) , (   255   ,   255   ,   255   ) )   draw   =   ImageDraw   .   Draw   (   image   )   _ x   =   None   _ y   =   None     node       .   introspection   ( ) :   node _ point _ x   =   node   .   _ xmove   ( )   *   50   +   400   node _ point _ y   =   node   .   _ ymove   ( )   *   50   +   50     node   .   parent       None   :   node _ point _ x _ parent   =   node   .   parent   .   _ xmove   ( )   *   50   +   400   node _ point _ y _ parent   =   node   .   parent   .   _ ymove   ( )   *   50   +   50   draw   .   line   ( (   node _ point _ x _ parent   +   15   ,   node _ point _ y _ parent   ,   node _ point _ x   +   15   ,   node _ point _ y   ) ,   fill   =   (   0   ,   0   ,   0   ) )   # del   draw   draw   .   ellipse   ( [ (   node _ point _ x   ,   node _ point _ y   ) , (   node _ point _ x   +   30   ,   node _ point _ y   +   30   ) ] ,   outline   =   (   0   ,   0   ,   0   ) )   draw   .   text   ( (   node _ point _ x   +   15   ,   node _ point _ y   ) ,   str   (   node   .   data   ) ,   fill   =   (   0   ,   0   ,   0   ) ,   font   =   font   )   _ x   =   node _ point _ x   _ y   =   node _ point _ y   image   .   show   ( )   利用 pillow 一个 很 粗糙 绘图 过程 ， 这块 还 不 熟悉 ， 绘图 细节 优化 还 很 值得 商榷 。   删除 操作   删除 操作 稍微 点 ，   def   children _ count   (     ) :   \" \" \" Return     number     children   @ returns   number     children :   0 ,   1 ,   2   \" \" \"   cnt   =   0       .   left   :   cnt   + =   1       .     :   cnt   + =   1   return   cnt   def   delete   (     ,   data   ) :   \" \" \" Delete   node     data   @ param   data   node ' s   content     delete   \" \" \"   #     node     data   node   ,   parent   =     .   lookup   (   data   )     node       None   :   children _ count   =   node   .   children _ count   ( )     children _ count   = =   0   :   #     node       children ,     remove       parent   :     parent   .   left     node   :   parent   .   left   =   None     :   parent   .     =   None     :     .   data   =   None   elif   children _ count   = =   1   :   #     node     1   child   #   replace   node       child     node   .   left   :   n   =   node   .   left     :   n   =   node   .       parent   :     parent   .   left     node   :   parent   .   left   =   n     :   parent   .     =   n     :     .   left   =   n   .   left     .     =   n   .       .   data   =   n   .   data     :   #     node     2   children   #   find     successor   parent   =   node   successor   =   node   .       successor   .   left   :   parent   =   successor   successor   =   successor   .   left   #   replace   node   data       successor   data   node   .   data   =   successor   .   data   #   fix   successor ' s   parent   node   child     parent   .   left   = =   successor   :   parent   .   left   =   successor   .       :   parent   .     =   successor   .     二叉树   def   compare _ trees   (     ,   node   ) :   \" \" \" Compare   2   trees   @ param   node   tree     compare   @ returns   True       tree   passed     identical       tree   \" \" \"     node     None   :   return   False       .   data   ! =   node   .   data   :   return   False   res   =   True       .   left     None   :     node   .   left   :   return   False     :   res   =     .   left   .   compare _ trees   (   node   .   left   )     res     False   :   return   False       .       None   :     node   .     :   return   False     :   res   =     .     .   compare _ trees   (   node   .     )   return   res   小节 参考资料   https : / / github . / qiwsir / algorithm / blob / master / binary _ tree . md   http : / / www . laurentluce . / posts / binary - search - tree - library - - python /   https : / / zh . wikipedia . org / wiki / % E4% BA% 8C% E5% 85% 83% E6% 90% 9C% E5% B0% 8B% E6% A8% B9",
            "tags":"算法",
            "url":"articles/binary-search-tree.html"
        },
        {
            "title":"github pages",
            "text":"自定义 域名   简单 来说 写 一个   CNAME   文件 ， 实际上 github   settings 还 提供 功能 ， 做 工作 创建 一个   CNAME   文件 。   挂 上 gitbook 内容   内容 过时 ：     gitbook   build     _ book   内容 复制到 主目录 下 ， 引用 即可 ：   / html5 - learning - notes   指向 文件夹 工作 。   参考   网页     create - react - app   分支 管理 建议   ， 综合 更好 解决方案 ：   yarn   init   读者 yarn   npm 不太熟悉 ， 都   Enter   。   yarn   add   gh - pages     packages . json   加上   （ PS :   json 语法 object 一项 带 逗号 ） ：   \" scripts \"   :   {   \" predeploy \"   :   \" npm   run   build \"   ,   \" deploy \"   :   \" gh - pages   - d   _ book \"   ,   \" build \"   :   \" gitbook   build \"   }   运行   gitbook   deploy   好 ， gitbook 挂载   _ . github . io / project   。   自定义 域名 https 支持   小节 参考   篇文章   。 简单 来说 利用   cloudflare   提供 服务 。 提供 DNS 域名解析 服务 ， 还 做 很多 额外 工作 ， 缓存 ， 统计 ， https 支持 。   设置 很 详细 ， 很多 一键 式 设置 ， 东西 很 ，   SSL   模式 推荐 选择   Flexible     Full   支持 github   pages 不得而知 ， 设置 后 好 好几个 小时 才能 生效 。     Automatic   HTTPS   Rewrites     Always     HTTPS   推荐 选上 ， 篇文章 提到   page   rules   设置 下 ， 勾选   Always     HTTPS   总 选项 ， 不 重复 设置 。",
            "tags":"others",
            "url":"articles/github-pages.html"
        },
        {
            "title":"云服务器的一些知识",
            "text":"弹性 ip   参考   网页   。   简单 来说 弹性 ip 用户 绑定 外网 ip ， 云 主机 绑定 。 这是 一种 资源 ， 更换 云 主机 ， 再 弹性 ip 绑定 第二个 云 主机 上 即可 。",
            "tags":"others",
            "url":"articles/yun-fu-wu-qi-de-yi-xie-zhi-shi.html"
        },
        {
            "title":"numpy模块",
            "text":"前言   本文 numpy 模块 函数 细节 不 做 ， 请 参看 文档 。 本文 numpy 核心 概念 理清 。   numpy 模块 最 核心 概念   ndarray 对象 ， 请 参看     ， 疑问 ， numpy array 函数 ndarray 对象 区别 ， 答案 ： 推荐   numpy . array   创建   ndarray 对象 ，   zeros   ， empty 函数 ， 都 很 好 接口 去 创建 一个   numpy . ndarray   对象 ，   numpy . ndarray   创建 一个 ndarray 对象 ，   numpy 模块 开发人员 推荐 风格 。   numpy   ndarray 对象 python 列表 区别   numpy   ndarray 内部 item 固定 内存 size ， 改变 size 将会 创建 一个 ndarray 。   numpy   ndarray 内部 item data   type ， 固定 内存 size 。   numpy ndarray 有助于 大型 数据 高级 数学 运算 操作 ， python 序列 执行 会 更 有效率 。   很多 科学 数学计算 python 模块 都 基于 numpy ndarray ， 支持 python 序列 类型 输入 ， 都 numpy array 再 相关 计算 ， 输出 numpy ndarray 对象 。   ndarray 对象   numpy 模块 中 很 核心 一个 概念 ndarray 对象 。 ndarray 对象 numpy 官方 手册 绘图 一个 数据结构 ：   ndarray 一个头 header 控制 接下来 存储 数据类型 ( dtype ) ， 存储 数据 都 数据类型 ， 这是 一个 不同于 列表 限定 条件 ， 约定 大大提高 数据处理 效率 。   利用 array 函数 简单 一个 列表 ndarray 对象 ：   > > >   x   =   np   .   array   ( [   1   ,   2   ,   3   ,   4   ,   5   ] )   > > >   x   array   ( [   1   ,   2   ,   3   ,   4   ,   5   ] )   > > >   type   (   x   )   <   class   '   numpy   .   ndarray   ' >   > > >   x   .   dtype   dtype   (   ' int32 '   )   例子 中 ， 一个 ndarray 对象 都 一个 属性 (   dtype   ) ， 存储 讲 ndarray 对象 一连串 数据 数据类型 ， 数据类型 \" int32 \" 。   dtype   基本上 讨论 numpy 资料 都 会 清单 列出来 ， 列出来 。   bool _ :   True     False   int _ :   相当于 C语言 long ， int32 int64 。 整数型 其内 细分 :   intc :   等于 C语言 int ， int32 int64   intp :   整数 用于 索引 ， C语言 ssize _ t ， int32 int64 。   int8 :   Byte （ - 128   ~   127 ）   int16 :   Integer （ - 32769   ~   32767 ）   int32 :   Integer   int64 :   Integer   uint8 :   Unsigned   Integer （ 0   ~   255 ）   uint16 :   Unsigned   Integer （ 0   ~   65535 ）   uint32 :   Unsigned   Integer   uint64 :   Unsigned   Integer   float _ :   float64 。 浮点 型 细分 :   float16 :   半 精度 浮点 型   float32 :   单精度 浮点 型   float64 :   双 精度 浮点 型   complex _ :   complex128 。   复数 型 细分 :   complex64 :   复数 型 ， 32 位 浮点 型   complex128 :   复数形 ， 64 位 浮点 型   声明 :   > > >   t   =   np . array ( [ 1 , 2 , 3 ] , dtype = ' int32 ' )   > > >   type ( t )   < class   ' numpy . ndarray ' >   > > >   t . dtype   dtype ( ' int32 ' )   > > >   ， dtype 指定 int ，   np . int _   > > >   t   =   np . array ( [ 1 , 2 , 3 ] , dtype = ' int ' )   > > >   t . dtype   dtype ( ' int64 ' )   类似   float     np . float _   ;   bool     np . bool _   ;   complex     np . complex _   。   ndarray dtype 变换   还 调用 ndarray   astype   方法 。 方法   非 破坏型   方法 ， 例子 所示 ：   > > >   t   =   np . array ( [ 1 , 2 , 3 ] , dtype = ' int8 ' )   > > >   t . astype ( ' int32 ' )   array ( [ 1 ,   2 ,   3 ] ,   dtype = int32 )   > > >   t   array ( [ 1 ,   2 ,   3 ] ,   dtype = int8 )   dtype 对象 从属关系     np . issubdtype   函数 判断 ndarray dtype 对象 整型 子集 。   > > >   t   array ( [ 1 ,   2 ,   3 ] ,   dtype = int8 )   > > >   t . dtype   dtype ( ' int8 ' )   > > >   np . issubdtype ( t . dtype , ' int ' )   True   > > >   np . issubdtype ( t . dtype , ' float ' )   False   shape 属性   ， 一个 ndarray 对象 都   shape   属性 ， 用于 控制 跟着 数据 维度 。 请 看 例子 ：   > > >   x   array ( [ 1 ,   2 ,   3 ,   4 ,   5 ,   6 ] )   > > >   x . shape   ( 6 , )   > > >   x . shape   =   ( 2 , 3 )   > > >   x   array ( [ [ 1 ,   2 ,   3 ] ,   [ 4 ,   5 ,   6 ] ] )   shape   属性 用来 控制 数据 维度 理解 ， 一个 数字 一维 ， 二个 数字 二维 几行 几列 （ 数学 中 常见 概念 矩阵 ） ， 三个 数字 三维 。 修改 ndarray 对象 shape 属性 影响 程序 对象 数据 理解 ， 更 常用   reshape   方法 ， 不 原地 修改 ndarray 对象 shape ， 返回 一个 修改 shape 属性 新 ndarray 对象 。   reshape   ndarray 调用 reshape 改变 ndarray shape 属性 ， 不 原地 修改 ndarray 对象 shape ， 返回 一个 修改 shape 属性 新 ndarray 对象 。   只 指定 一个 维度 ， 一个 维度 填 上   - 1   ， 改 维度 shape 将会 自动 计算出来 。     4 * 5 矩阵 ， reshape   ( - 1 , 4 )   ， 矩阵 row = 5 。   创建 一个 ndarray 对象   python 数据结构 中 创建   接触   np . array   函数 ， 用来 接受 一个 python   list     tuple   ， 返回 一个 ndarray 对象 。   > > >   x   =   np . array ( [ [ 1 + 2j , 2 + 3j ] , [ 3 + 4j , 4 + 5j ] ] )   > > >   x   array ( [ [   1 .+ 2 . j ,   2 .+ 3 . j ] ,   [   3 .+ 4 . j ,   4 .+ 5 . j ] ] )   > > >   x . dtype   dtype ( ' complex128 ' )   > > >   生成 一系列 随机数   例子 中 ：   np . random . randn ( 2 , 3 )   array ( [ [ - 0.26670745 ,   1.09572856 ,   - 0.38875728 ] ,   [   1.04339429 ,   0.06330302 ,   1.35696512 ] ] )   填充 一个 2 行 3 列 随机数 ， randn n normal ， 正态分布 。   arrange 函数   arange ( start , end , step )   参数 类似 range 函数 。 生成 一个 数据 递增 （ 减 ） ndarray 对象 ：   > > >   x   =   np . arange ( 5 )   > > >   x   array ( [ 0 ,   1 ,   2 ,   3 ,   4 ] )   > > >   x   =   np . arange ( 1 , 10 , 0.5 )   > > >   type ( x )   < class   ' numpy . ndarray ' >   > > >   x   array ( [   1 .   ,   1.5 ,   2 .   ,   2.5 ,   3 .   ,   3.5 ,   4 .   ,   4.5 ,   5 .   ,   5.5 ,   6 .   ,   6.5 ,   7 .   ,   7.5 ,   8 .   ,   8.5 ,   9 .   ,   9.5 ] )   其是 一维 ， reshape 操作 生成 二维 ndarray 对象 ， 接受   dtype   对象 控制 dtype 属性 。   linspace 函数   linspace 函数 看作   arange 函数 补充 ， arange 函数 指定 start stop ， 数值 不 包含 ， 生成 item 不易 知 ， linspace 接受 三个 参数 :   start   end   number   ， start end ndarray 中 包含 ， number 给定 生成 item 。   > > >   np . linspace ( 1 , 10 , 6 )   array ( [   1 .   ,   2.8 ,   4.6 ,   6.4 ,   8.2 ,   10 .   ] )   结束 元素 包不 包含 倒 很 ， 关键 情况 下 控制 生成 item ，   linspace   函数 。   zeros 函数   zeros 函数 用于 快速 创建 一个 ndarray 对象 ， 其内 数据 都 填充   0 .   ， 默认 dtype   float64   。 接受 一个 参数 简单 看作 shape 属性 参数 ， 所示 ：   > > >   np . zeros ( ( 10 , ) )   array ( [   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ] )   > > >   np . zeros ( 10 )   array ( [   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ,   0 . ] )   > > >   np . zeros ( ( 5 , 5 ) )   array ( [ [   0 . ,   0 . ,   0 . ,   0 . ,   0 . ] ,   [   0 . ,   0 . ,   0 . ,   0 . ,   0 . ] ,   [   0 . ,   0 . ,   0 . ,   0 . ,   0 . ] ,   [   0 . ,   0 . ,   0 . ,   0 . ,   0 . ] ,   [   0 . ,   0 . ,   0 . ,   0 . ,   0 . ] ] )   函数   函数 类似 zeros 函数 ， 填充 数据 1 。 不 做 例子 演示 。   empty 函数   empty 函数 谈论   zeros     函数 类似 ， item 都 原 内存 随机 数值 ， 不 做 修改 。   > > >   np . empty ( ( 2 , 3 ) )   array ( [ [   0.00000000 e + 000 ,   4.99297208 e - 317 ,   4.94026911 e - 317 ] ,   [   6.94094003 e - 310 ,   1.03878549 e - 013 ,   0.00000000 e + 000 ] ] )   > > >   索引 值   ndarray 值 索引 操作 python 中 列表 索引 值 操作 ， 方括号 语法 索引   [ index ]   :   > > >   x   =   np . array ( [ [ 1 , 2 , 3 ] , [ 4 , 5 , 6 ] , [ 7 , 8 , 9 ] ] )   > > >   x   array ( [ [ 1 ,   2 ,   3 ] ,   [ 4 ,   5 ,   6 ] ,   [ 7 ,   8 ,   9 ] ] )   > > >   x [ 0 ]   array ( [ 1 ,   2 ,   3 ] )   > > >   x [ 0 ] [ 0 ]   1   > > >   y [ 1 ] [ 5 ]   5   还 语法 :   > > >   x   array ( [ [ 1 ,   2 ,   3 ] ,   [ 4 ,   5 ,   6 ] ,   [ 7 ,   8 ,   9 ] ] )   > > >   x [ 0 , 0 ]   1   > > >   x [ 1 , 1 ]   5   > > >   描述 索引 值 语法 修改 ndarray 对象 元素 值 。 numpy 还 提供 一种 语法 ：   [ a , b ]   ， ndarray 对象   [ a ] [ b ]   。 矩阵   不   支持   [ a ] [ b ]   索引 语法 ， 只 支持   [ a , b ]   语法 ， 推荐 矩阵 都 带 逗号 索引 方法 ， 矩阵 a 行 b 列 。   > > >   A   =   np . matrix ( [ [ 1 , 2 , 3 ] , [ 4 , 5 , 6 ] , [ 7 , 8 , 9 ] ] )   > > >   A [ 0 ]   matrix ( [ [ 1 ,   2 ,   3 ] ] )   > > >   A [ 0 ] [ 0 ] # 索引   matrix ( [ [ 1 ,   2 ,   3 ] ] )   > > >   A [ 0 , 0 ]   1   索引 多个 值 说 view   ndarray 对象 谈及 索引 规则 下   [ start : end : step ]   :   > > >   x   =   np   .   array   ( [ [   1   ,   2   ,   3   ] , [   4   ,   5   ,   6   ] , [   7   ,   8   ,   9   ] ] )   > > >   x   array   ( [ [   1   ,   2   ,   3   ] ,   [   4   ,   5   ,   6   ] ,   [   7   ,   8   ,   9   ] ] )   > > >   x   [   : : -   1   ]   array   ( [ [   7   ,   8   ,   9   ] ,   [   4   ,   5   ,   6   ] ,   [   1   ,   2   ,   3   ] ] )   > > >   y   =   np   .   arange   (   10   )   > > >   y   array   ( [   0   ,   1   ,   2   ,   3   ,   4   ,   5   ,   6   ,   7   ,   8   ,   9   ] )   > > >   y   [   0   : :   2   ]   array   ( [   0   ,   2   ,   4   ,   6   ,   8   ] )   支持 索引 多个 值 ， 说 切片 ，   view   视图 。 python list 索引 多个 值 ， 切片 ， 等于 制造 一个 新 列表 ， :   > > >   lst   =   [ 1 , 2 , 3 , 4 , 5 ]   > > >   lst [ 0 : 2 ]   [ 1 ,   2 ]   > > >   x   =   lst [ 0 : 2 ]   > > >   x [ 0 ]   =   12   > > >   x   [ 12 ,   2 ]   > > >   lst   [ 1 ,   2 ,   3 ,   4 ,   5 ]   调用   lst [ 0 : 2 ]   时 ， python 程序 制造 一个 新 子 列表 ， 赋值 x ， 看 ndarray 对象 :   > > >   array   =   np . array ( [ 1 , 2 , 3 , 4 , 5 ] )   > > >   array   array ( [ 1 ,   2 ,   3 ,   4 ,   5 ] )   > > >   x   =   array [ : 2 ]   > > >   x   array ( [ 1 ,   2 ] )   > > >   x [ 0 ]   =   12   > > >   x   array ( [ 12 ,   2 ] )   > > >   array   array ( [ 12 ,   2 ,   3 ,   4 ,   5 ] )   ndarray 对象 索引 多个 值 称之为   视图   原因 ， 返回 指向 原处 片段 ！   索引 多个 值 视图 赋值 操作 ， 元素 都 赋值 值 :   > > >   x [ : ]   =   99   > > >   array   array ( [ 99 ,   99 ,   3 ,   4 ,   5 ] )   多维 切片     [ start : end : step ]   语法 第一个 维度 上 切片 ， numpy 支持 语法 ， 灵活 多个 维度 切片   [ d1 ,   d2 ,   d3 ]   ， d1 第一个 维度 上 索引 值 ， 维度 都 进一步   [ start : end : step ]   进一步 切片 操作 。   import   numpy     np   arr   =   np   .   array   ( [ [ [   5   ,   10   ,   15   ] ,   [   20   ,   25   ,   30   ] ,   [   35   ,   40   ,   45   ] ] ,   [ [   1   ,   2   ,   4   ] ,   [   3   ,   4   ,   2   ] ,   [   1   ,   2   ,   4   ] ] ]   )   arr   Out   [   5   ] :   array   ( [ [ [   5   ,   10   ,   15   ] ,   [   20   ,   25   ,   30   ] ,   [   35   ,   40   ,   45   ] ] ,   [ [   1   ,   2   ,   4   ] ,   [   3   ,   4   ,   2   ] ,   [   1   ,   2   ,   4   ] ] ] )   arr   [   0   , : ]   Out   [   6   ] :   array   ( [ [   5   ,   10   ,   15   ] ,   [   20   ,   25   ,   30   ] ,   [   35   ,   40   ,   45   ] ] )   arr   [   0   ]   Out   [   7   ] :   array   ( [ [   5   ,   10   ,   15   ] ,   [   20   ,   25   ,   30   ] ,   [   35   ,   40   ,   45   ] ] )   arr   [ : ,   0   , : ]   Out   [   8   ] :   array   ( [ [   5   ,   10   ,   15   ] ,   [   1   ,   2   ,   4   ] ] )   看 一个 例子 ， 含义 第一 维度 元素 ， 第二 维度 选择 索引 值 0 ， 第三 维度 元素 。   copy 方法   希望 原 python 那种 索引 多个 值 效果 不 影响 原 ndarray 对象 ， 调用 ndarrary 对象   copy   方法 :   array [ : 2 ] . copy ( )   布尔值 索引   布尔值 索引 基于   ndarray 对象 布尔值 判断 操作 ，   = =   >   <   ， 输出 一个 原 维度 bool 值 ndarray 对象 。 ndarray 对象 送入 array 索引 输入框 中 ， 返回 bool 值为 True 值 。   > > >   array   array ( [ 0 ,   0 ,   3 ,   4 ,   5 ] )   > > >   array   = =   0   array ( [   True ,   True ,   False ,   False ,   False ] ,   dtype = bool )   > > >   array [ array   = =   0 ]   array ( [ 0 ,   0 ] )   > > >   array [ array   = =   0 ]   =   99   > > >   array   array ( [ 99 ,   99 ,   3 ,   4 ,   5 ] )   布尔值 索引 返回   视图   ， 对齐 操作 改变 原 ndarray 对象 。   还   &     |   组合 逻辑 ，         。   一大 用法 利用 item 属性 映射 关系 ， 利用 属性 过滤 data :   > > >   data   =   np . random . randn ( 7 , 3 )   > > >   data   array ( [ [ - 0.82117767 ,   1.02481308 ,   0.50908019 ] ,   [   0.79851282 ,   0.37692996 ,   - 1.0129145   ] ,   [ - 1.30120201 ,   1.71270027 ,   0.2113716   ] ,   [ - 1.33386207 ,   0.02978504 ,   - 0.58061781 ] ,   [   0.72466458 ,   1.94170572 ,   2.09521622 ] ,   [ - 1.24241997 ,   - 1.20557331 ,   - 0.66292731 ] ,   [ - 0.66145326 ,   0.28330579 ,   0.2803069   ] ] )   > > >   names   =   np . array ( [ ' a ' , ' b ' , ' c ' , ' a ' , ' b ' , ' d ' , ' a ' ] )   > > >   data [ names   = =   ' a ' ]   array ( [ [ - 0.82117767 ,   1.02481308 ,   0.50908019 ] ,   [ - 1.33386207 ,   0.02978504 ,   - 0.58061781 ] ,   [ - 0.66145326 ,   0.28330579 ,   0.2803069   ] ] )   索引 一行 ， 其行 ' a ' 值 。   运算   两个 ndarray 对象 之间 数学 运算 ， 两个 ndarray 维度 ， 称之为   vectorization   ， 矢量化 操作 。 大致   加减乘除 幂   具体操作 都   元素 元素 加减乘除 幂 操作   :   > > >   x   =   np . array ( [ [ 4 , 0 , 5 ] , [ - 1 , 3 , 2 ] ] )   > > >   x   array ( [ [   4 ,   0 ,   5 ] ,   [ - 1 ,   3 ,   2 ] ] )   > > >   y   =   np . array ( [ [ 1 , 1 , 1 ] , [ 3 , 5 , 7 ] ] )   > > >   y   array ( [ [ 1 ,   1 ,   1 ] ,   [ 3 ,   5 ,   7 ] ] )   > > >   x   +   y   array ( [ [ 5 ,   1 ,   6 ] ,   [ 2 ,   8 ,   9 ] ] )   > > >   x   -   y   array ( [ [   3 ,   - 1 ,   4 ] ,   [ - 4 ,   - 2 ,   - 5 ] ] )   > > >   x   *   2   array ( [ [   8 ,   0 ,   10 ] ,   [ - 2 ,   6 ,   4 ] ] )   > > >   x   * *   2   array ( [ [ 16 ,   0 ,   25 ] ,   [   1 ,   9 ,   4 ] ] )   两个 ndarray 对象 维度 （ 多维 情况 不 讨论 ） ，   列维 数目 ， ， 不 推荐 。 列维 数目 ， 会 抛出   ValueError   。   > > >   z   =   np . array ( [ 1 , 2 , 3 ] )   > > >   x + z   array ( [ [ 5 ,   2 ,   8 ] ,   [ 0 ,   5 ,   5 ] ] )   z 重复 x 一行 。   ndarray 对象 上 方法   flatten 方法   flatten ， 拉平 。 flatten ndarray 对象 （ 包括 矩阵 ） 一个 方法 ， 变为 一维 形式 ，   非 破坏型   方法 。   flatten 方法 矩阵 是因为 多维 数组 维度 含 元素 数目 （ 类似 矩阵 空间 矩形 排布 感 ） 才 意义 。 矩阵 返回 行 矢量 形式 。   > > >   x   =   np . array ( [ [ 1 , 2 , 3 ] , [ 4 , 5 , 6 ] , [ 7 , 8 , 9 ] ] )   > > >   x   array ( [ [ 1 ,   2 ,   3 ] ,   [ 4 ,   5 ,   6 ] ,   [ 7 ,   8 ,   9 ] ] )   > > >   x . flatten ( )   array ( [ 1 ,   2 ,   3 ,   4 ,   5 ,   6 ,   7 ,   8 ,   9 ] )   > > >   x   array ( [ [ 1 ,   2 ,   3 ] ,   [ 4 ,   5 ,   6 ] ,   [ 7 ,   8 ,   9 ] ] )   > > >   y   =   np . array ( [ [ 1 , 2 , 3 ] , [ 4 , 5 , 6 , 7 ] ] )   > > >   y   array ( [ [ 1 ,   2 ,   3 ] ,   [ 4 ,   5 ,   6 ,   7 ] ] ,   dtype = object )   > > >   y . flatten ( )   array ( [ [ 1 ,   2 ,   3 ] ,   [ 4 ,   5 ,   6 ,   7 ] ] ,   dtype = object )   > > >   z   matrix ( [ [ 1 ,   2 ,   3 ] ,   [ 4 ,   5 ,   6 ] ] )   > > >   z . flatten ( )   matrix ( [ [ 1 ,   2 ,   3 ,   4 ,   5 ,   6 ] ] )   sort 方法   sort 方法 作用 多维 ， 一维 更显 意义 些 ， 其是 一个   破坏型   方法 。   所示 ， 看 ， 一行 变动 ， 只 行内 一维 情况 下 排序 。   > > >   data   array ( [ [   0.68518059 ,   1.05271585 ,   1.00174264 ] ,   [ - 1.44506879 ,   1.45532422 ,   1.30856608 ] ,   [   0.1121552   ,   - 3.04487041 ,   - 0.03301996 ] ] )   > > >   data . sort ( )   > > >   data   array ( [ [   0.68518059 ,   1.00174264 ,   1.05271585 ] ,   [ - 1.44506879 ,   1.30856608 ,   1.45532422 ] ,   [ - 3.04487041 ,   - 0.03301996 ,   0.1121552   ] ] )   方法   计算 给定 维度 下 元素 值 均值 。   ndarray . ( axis = None ,   dtype = None ,   = None ,   keepdims = False )   难点 在于 理解 维度 扩展 概念 ， 矩阵 ， 竖向 列是 axis = 0 ， 横向 行是 axis = 1 。   numpy . ( axis = 0 )   理解 竖向 列 计算 均值 ， 更好 理解 行 记录 ， 列 特征 ， 第一 维度 样本 维 ， 第二 维度 特征 维 ， axis = 0 ， 官方 文档 axis 解释 维度 轴 计算 ， axis = 0 选择 实际上 样本 维 ， 样本 维 特征 计算 一个 均值 。   std 方法   计算 给定 维度 下 元素 值 标准差 ， 类似 方法 。   通用 函数   讲 通用 函数 ， 大多 numpy 自带 ， 接受 参数 ndarray 对象 ， 改变 目标 ndarray 对象 shape （ 会 稍微 做 改变 ） ， 元素 函数 操作 。   sqrt 函数   开个 平方根   x   =   np . arange ( 10 )   array ( [ 0 ,   1 ,   2 ,   3 ,   4 ,   5 ,   6 ,   7 ,   8 ,   9 ] )   np . sqrt ( x )   array ( [ 0 .   ,   1 .   ,   1.41421356 ,   1.73205081 ,   2 .   ,   2.23606798 ,   2.44948974 ,   2.64575131 ,   2.82842712 ,   3 .   ] )   exp 函数   算个 指数函数   \\ ( e &# 94 ; { x } \\ )   np . exp ( x )   maximum 函数   点对点 返回 最大值   【 会 自动 广播 操作 】   x   =   np . random . randn ( 8 )   y   =   np . random . randn ( 8 )   np . maximum ( x ,   y )   abs 函数   x   =   np . random . randn ( 2 , 3 )   array ( [ [ - 0.11653471 ,   0.72362219 ,   0.93142213 ] ,   [ - 2.03263166 ,   - 0.1941374   ,   1.23463108 ] ] )   np . abs ( x )   array ( [ [ 0.11653471 ,   0.72362219 ,   0.93142213 ] ,   [ 2.03263166 ,   0.1941374   ,   1.23463108 ] ] )   tile 函数   np . tile ( A ,   reps )   输入 一个 array ， reps 维度 重复 数据 ：   > > >   a   =   np . array ( [ 0 ,   1 ,   2 ] )   > > >   np . tile ( a ,   2 )   array ( [ 0 ,   1 ,   2 ,   0 ,   1 ,   2 ] )   > > >   np . tile ( a ,   ( 2 ,   2 ) )   array ( [ [ 0 ,   1 ,   2 ,   0 ,   1 ,   2 ] ,   [ 0 ,   1 ,   2 ,   0 ,   1 ,   2 ] ] )   > > >   np . tile ( a ,   ( 2 ,   1 ,   2 ) )   array ( [ [ [ 0 ,   1 ,   2 ,   0 ,   1 ,   2 ] ] ,   [ [ 0 ,   1 ,   2 ,   0 ,   1 ,   2 ] ] ] )   argsort 函数   ndarray 对象 调用 argsort 函数 返回 一个 大小 排序 索引 值 ：   > > >   x   =   np . array ( [ 3 ,   1 ,   2 ] )   > > >   np . argsort ( x )   array ( [ 1 ,   2 ,   0 ] )   含义 排序 后 第一个 值   x [ 1 ]   ， 以此类推 。   np . argpartition 函数   arg 开头 返回 索引 值 。   默认 调用 类似 快速 排序 中 选择 一个点 ， 左边 都 值 小 点 ， 右边 都 值大 点 。 情况 下 ， 指向 topk ， 调用 函数 ， 排序 操作 完 ， 会 很 高效 。   x   =   [ 9 , 8 , 7 , 5 , 4 , 6 , 1 ]   np . argpartition ( x ,   2 )   array ( [ 6 ,   4 ,   3 ,   2 ,   1 ,   5 ,   0 ] ,   dtype = int64 )   例子 ， 输出 分区 点   2   ， 2 内容 中 最小 两个 。 2 数字 5 ， 两个   1   4 ， 剩下 9   8   7   6   都 5 大 。 大概 样子 。   np . allclose   numpy . allclose ( a ,   b ,   rtol = 1e - 05 ,   atol = 1e - 08 ,   equal _ nan = False )   类似 isclose ， 返回 True False   np . isclose   numpy . isclose ( a ,   b ,   rtol = 1e - 05 ,   atol = 1e - 08 ,   equal _ nan = False )   点对点 两个 ndarray 值 ， rtol 容忍度 ， atol 容忍度 ， 这是 一种 近似 数值 相近 判断 操作 。   np . logical _   点对点 逻辑 操作 。   np .   轴 数值 执行 操作 。   ndarray 对象 转置   调用 ndarray 对象   T   属性 ， 更 接近 矩阵 中 转置 操作 （ 一维 ndarray 改变 ） 。 提及   data [ : : - 1 ]   ， 把行 翻转 ， 一维 倒 array 都 翻转 。   > > >   data   =   np   .   random   .   randn   (   4   ,   3   )   > > >   data   array   ( [ [   0.53700477   ,   -   1.30139712   ,   1.12184318   ] ,   [   -   0.91918847   ,   1.52850268   ,   0.73218978   ] ,   [   -   1.14840704   ,   -   0.0413753   ,   0.52820585   ] ,   [   1.84307255   ,   0.21356674   ,   0.23331023   ] ] )   > > >   data   .   T   array   ( [ [   0.53700477   ,   -   0.91918847   ,   -   1.14840704   ,   1.84307255   ] ,   [   -   1.30139712   ,   1.52850268   ,   -   0.0413753   ,   0.21356674   ] ,   [   1.12184318   ,   0.73218978   ,   0.52820585   ,   0.23331023   ] ] )   > > >   data   [   : : -   1   ]   array   ( [ [   1.84307255   ,   0.21356674   ,   0.23331023   ] ,   [   -   1.14840704   ,   -   0.0413753   ,   0.52820585   ] ,   [   -   0.91918847   ,   1.52850268   ,   0.73218978   ] ,   [   0.53700477   ,   -   1.30139712   ,   1.12184318   ] ] )   广播 ( broadcasting )   广播 一种 操作 ， shape 小 张量 shape 较大 张量 点对点 运算 时 ， shape 小 张量 广播 操作 ， 使 运算 上 shape 兼容 。   广播 具体操作 规则 ：   shape 小 张量 添加 新 维度 两个 张量 维度 数   shape 小 张量 新 维度 中 数据 重复 ， 相当于 原 维度 数据 ， ：   y [ 1 , j ]   =   y [ 2 , j ]   =   y [ 3 , j ]   = ...   y [ j ]   矩阵 对象   矩阵 对象 ndarray 对象 子类 ， 也就是说 ndarray 对象 属性 方法 都 。 行 矢量 列 矢量 矩阵 中 情况 。 矩阵 概念 数学 运算 中 较为 ， 概念 ， 转置 ， 点 ， 矩阵 数学 运算 相关 ， ndarray 对象 做 ， 推荐 矩阵 （ matrix ） 对象 再 ， 理清 概念 。   matrix 函数   numpy matrix 函数 创建 一个 矩阵 对象 :   > > >   data   =   np . random . randn ( 3 , 3 )   > > >   data   array ( [ [ - 0.79589206 ,   - 0.97535141 ,   1.05750453 ] ,   [   0.05051448 ,   0.19753523 ,   0.99618112 ] ,   [   2.09805081 ,   - 0.33623748 ,   0.26033154 ] ] )   > > >   x   =   np . matrix ( data )   > > >   type ( x )   < class   ' numpy . matrixlib . defmatrix . matrix ' >   > > >   x   matrix ( [ [ - 0.79589206 ,   - 0.97535141 ,   1.05750453 ] ,   [   0.05051448 ,   0.19753523 ,   0.99618112 ] ,   [   2.09805081 ,   - 0.33623748 ,   0.26033154 ] ] )   矩阵 转置   transpose   方法 ， 矩阵 转置 。 只 返回 ，   非 破坏型   方法 。   > > >   x   =   np . matrix ( [ [ 1 , 2 , 3 ] , [ 4 , 5 , 6 ] , [ 7 , 8 , 9 ] ] )   > > >   x   matrix ( [ [ 1 ,   2 ,   3 ] ,   [ 4 ,   5 ,   6 ] ,   [ 7 ,   8 ,   9 ] ] )   > > >   x . transpose ( )   matrix ( [ [ 1 ,   4 ,   7 ] ,   [ 2 ,   5 ,   8 ] ,   [ 3 ,   6 ,   9 ] ] )   行 矢量 列 矢量   行 矢量 列 矢量 矩阵 情况 ， matrix 函数 创建 。 行 矢量 转置 列 矢量 请 看 写法 。   > > >   x   =   np . matrix ( [ 1 , 2 , 3 , 4 , 5 ] )   > > >   x   matrix ( [ [ 1 ,   2 ,   3 ,   4 ,   5 ] ] )   > > >   x . transpose ( )   matrix ( [ [ 1 ] ,   [ 2 ] ,   [ 3 ] ,   [ 4 ] ,   [ 5 ] ] )   矩阵 点   学过 线性代数 印像 最深 矩阵 怪异 乘法 运算 。 numpy 模块 支持 ，   *   执行 两个 矩阵 乘法 ，   np . dot   函数 。   > > >   A   =   np . matrix ( [ [ 1 , 0 , 3 , - 1 ] , [ 2 , 1 , 0 , 2 ] ] )   > > >   B   =   np . matrix ( [ [ 4 , 1 , 0 ] , [ - 1 , 1 , 3 ] , [ 2 , 0 , 1 ] , [ 1 , 3 , 4 ] ] )   > > >   A   *   B   matrix ( [ [   9 ,   - 2 ,   - 1 ] ,   [   9 ,   9 ,   11 ] ] )   > > >   x   =   np . matrix ( [ 1 , 2 , 3 ] )   > > >   y   =   np . matrix ( [ 4 , 5 , 6 ] ) . transpose ( )   > > >   x   *   y   matrix ( [ [ 32 ] ] )   > > >   y   *   x   matrix ( [ [   4 ,   8 ,   12 ] ,   [   5 ,   10 ,   15 ] ,   [   6 ,   12 ,   18 ] ] )   > > >   np . dot ( x , y )   matrix ( [ [ 32 ] ] )   > > >   np . dot ( y , x )   matrix ( [ [   4 ,   8 ,   12 ] ,   [   5 ,   10 ,   15 ] ,   [   6 ,   12 ,   18 ] ] )   > > >     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"机器学习",
            "url":"articles/numpy-module.html"
        },
        {
            "title":"小分子网页显示第二版",
            "text":"第二 版     第一版 中   介绍 html 文件 中 绘制 数学 表达式 化学 分子式 ， 简单 来说 利用   mathjax   javascript 库 。 喜欢 markdown pelican ， pelican 下该 做 。   最 优雅 方法 引入   render _ math   插件 。   #     plugin   PLUGIN _ PATHS   =   [ ' myplugins ' ]   PLUGINS   =   [ extract _ toc ' ,   ' render _ math ' ]   MATH _ JAX   =   { ' tex _ extensions ' :   [ ' mhchem . js ' ] }   剩下 交给 pelican ， 检测 markdown 下 插入 数学公式 或者说 化学 分子式 ， 引入   mathjax   库 。   数学 环境 简要 介绍   行内 数学 环境   TeX     $   $   ， 单独 一行 数学 表达式   ：   $ $   ...   $ $   更 多用   Tex 写 数学 知识 请 参看   wikibook   。 值得一提的是   LaTeX 风格   \\ (   不 支持 。   \\ begin { equation }   支持 ， markdown 编辑器 不 支持 实时 预览 ， 推荐   $     $ $   。   ：   $ $   { \\ sigma   } &# 94 ; { 2   }   = \\ frac   {   1   } { n   }   \\ sum   _ {   i = 1   } &# 94 ; {   n   } { (   X _ i   -   \\ mu ) &# 94 ; 2 }   $ $   显示 效果 ：   $ $   { \\ sigma   } &# 94 ; { 2   }   = \\ frac   {   1   } { n   }   \\ sum   _ {   i = 1   } &# 94 ; {   n   } { (   X _ i   -   \\ mu ) &# 94 ; 2 }   $ $   显示 小 分子     $ \\ ce { H _ 2O } $   显示   \\ ( \\ ce { H _ 2O } \\ )   ，   $ \\ ce { AgCl _ 2 &# 94 ; - } $   显示   \\ ( \\ ce { AgCl _ 2 &# 94 ; - } \\ )   。   一种 简写 写法 ：   $ \\ ce { H2O } $   显示   \\ ( \\ ce { H2O } \\ )   ，   $ \\ ce { AgCl2 - } $   显示   \\ ( \\ ce { AgCl2 - } \\ )   。   看   ce   命令 包装 纯数学 环境 表达 显示 效果 ：   \\ ( H _ 2O \\ )     \\ ( AgCl _ 2 &# 94 ; - \\ )   。 区别 。   数字 上标 加减 号 自动 情况 见 两个 例子 ：   $ \\ ce { Y &# 94 ; { 99 } + } $   \\ ( \\ ce { Y &# 94 ; { 99 } + } \\ )     $ \\ ce { Y &# 94 ; { 99 + } } $   \\ ( \\ ce { Y &# 94 ; { 99 + } } \\ )   。   配位 化合物   数字 写 上 即可   $ \\ ce { 0.5 H2O } $   \\ ( \\ ce { 0.5 H2O } \\ )   ， 值得一提的是 ， 数字 分数 形式 会 自动 ：   $ \\ ce { 1 / 2   H2O } $   \\ ( \\ ce { 1 / 2   H2O } \\ )   。   会 带上 小数点 数字 显示 古怪 。 小数点 会 解释 配位 化合物 结晶水 分隔 点 。   $ \\ ce { KCr ( SO4 ) 2.12 H2O } $   \\ ( \\ ce { KCr ( SO4 ) 2.12 H2O } \\ )   。 正确 显示 例子 ， 0.5 放入 数学 环境 中 即可 ：   $ \\ ce { $ 0.5 $ H2O } $   $ $   \\ ce { $ 0.5 $ H2O }   $ $   上 所示 ， mathjax 支持 ce 命令 再 数学 环境   $   $   。   显示 化学键   -   =   #   单键 ， 双键 三键 。   \\ ( \\ ce { A - A   B = B   C# C } \\ )     \\ bond   命令 还 额外 键 ，   $ \\ ce { \\ bond { ~ } } $     \\ ( \\ ce { \\ bond { ~ } } \\ )     $ \\ ce { \\ bond { ~ - } } $     \\ ( \\ ce { \\ bond { ~ - } } \\ )   ， 类推 。   显示 化学反应 式   $ $   \\ ce   {   CO2   +   C   < -   2   CO   }   $ $   $ $   \\ ce { CO2   +   C   < -   2CO }   $ $   $ $   \\ ce { CO2   +   C   - > [ \\ text { text 命令 } ]   2CO }   \\ ce { CO2   +   C   - > T [ 支持 ] [ 中文 ]   2CO }   $ $   $ $   \\ ce { CO2   +   C   - > [ \\ text { text 命令 } ]   2CO }   $ $   $ $   \\ ce { CO2   +   C   - > T [ 支持 ] [ 中文 ]   2CO }   $ $   不 text 命令 ， 中文 显示 。 例子 第二个 text 命令 ， 是因为 加上 T ， 箭头 文字 都 不 。   显示 箭头   $ $   \\ ce { SO4 &# 94 ; 2 -   +   Ba &# 94 ; 2 +   - >   BaSO4   v   &# 94 ; }   $ $   $ $   \\ ce { SO4 &# 94 ; 2 -   +   Ba &# 94 ; 2 +   - >   BaSO4   v   &# 94 ; }   $ $   下降 箭头   v   ， 上 式 箭头   &# 94 ;   ， 内容 一个 空格 。   推荐 一个 markdown 编辑器   typora   markdown 编辑器 ， 实时 预览 修改 markdown ， 包括 化学 公式 数学公式 。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"chemistry",
            "url":"articles/how-to-show-small-molecule-on-web.html"
        },
        {
            "title":"gitbook工具",
            "text":"请 读者 阅读   http : / / www . chengweiyang . cn / gitbook / index . html   这篇 教程 。   做 补充 。   安装   推荐 安装   gitbook - cli   ， gitbook 安装 会 提示 安装   gitbook - cli   ， 推荐 全局 安装 。   安装 插件   运行   gitbook   serve   其会 本地 插件 ， 比如说 安装 插件   simple - page - toc   ， 其装 本地 。   npm   install   gitbook - plugin - simple - page - toc   gitbook   build   gitbook   serve 会 输出 内容 ， 更 正式 做法   gitbook   build   _ foler   编译 出 gitbook 内容 供   webserver 服务 。 输出   _ book   ， 挂 上   index . html   文件 即可 。   apache 推荐   Alias   语句 加载 。   gitbook github 同步   gitbook 配置 配置 好 ， github 新建 一个 仓库 。 github   settings   有个   Application   设置 ， 设置 好 gitbook 仓库 gitbook 开放 ， gitbook 找 不到 仓库 。   第一次 gitbook   sync   github force   ， 点 两个 大图标 左边 ， 还 不 force 情况 ， 包括 github 新建 一个 空白 仓库 不行 。   文件 含义   主目录 下   book . json   ， 插件 配置 写 。   assets   文件夹 放着 图片 ， 随意 ， 参考 前 gitbook 图形界面 输出 。   README . md   书 gitbook 上 显示 文件 。   SUMMARY . md   ， 控制 书 目录 ， 基本上 都 看作 gitbook 对书 主 入口 。   中文 文件名 到底 可不可以   gitbook 自动 生成 文件夹 文件名 都 不带 中文 ， github 同步 内容 ， 中文 文件名 到底 可不可以 。   测试 中文 文件夹 中文 文件名 都     ，   SUMMARY . md   写 好 路径 。",
            "tags":"others",
            "url":"articles/gitbook-tools.html"
        },
        {
            "title":"化学信息学研究中英文属性词对照",
            "text":"简介   早期 编程 中 文化 ， 化学物质 属性 都 英文 ， 网页 显示 才 文化 显示 。   详细 关键 属性 名词 ， 看作 这一 编程 领域 特定 领域 语言 ， 计算机 语言 角度 来说 ：   cheminfo - keyword 。   列表   标准 名字   id 类 ： 化学 数据库 化学物质 都 id 表达 ， id 属性 特别 含义 ， 化学物质 唯一性 标识 。   分子式   molecular _ formular   分子量   molecular _ weight   InChi   国际 化合物 标识   IUPAC 推荐 化合物 唯一性 标识   （ 开发 中将 InChi 判断 纯 物质 唯一性 标准 ）   inchi _ key   inchi 运行 SHA - 256 哈希 算法 哈希 值 。 （ 开发 时 检索 key ）   smiles   类似 InChi 标记 体系 ， 更 可读性 。 实际上 学过 有机化学 人 毫不费力 写出 化合物 smiles 式 ， 不 判断 纯 物质 唯一性   isomeric _ smiles   说   unique   SMILES   唯一 smiles 。 加上 同位素 手性 。   iupac _   IUPAC   系统 命名 法 名字   名字 转换   数据库 地方 化学物质 属性 ， 名字 形式 。   建议 写 一个 名字 转换 小 函数 。   模型 设计   substance   - >   mixture   substance 一个 type 属性 ： 指明 物质 单质 ， 原子 ， 离子 ， 分子 。 substance 都 纯 物质   讨论 都 基于 substance 类 。   substance 类 基础 上 建立 一种 - 属性 机制 。   化学物质 最 属性 写 substance 模型 外 ， 额外 属性 都 单独 写 模型 。 属性 模型 一个 字 段 ， 字 段 。 正式 基于 ， 额外 属性 。   ：   mixture   混合物 ， 混合物 物理 混合 化学反应 ， 描述 纯 物质 比例 ， 混合物 生成 混合物 。   化学反应 进一步 额外 属性 描述 引入 。   比如说 溶解度 属性 ， 溶解度     behave _ condition =   ' 20 度下 溶解 于水 '   propery = ' '   behave _ condition   behave _ condition   描述 一种 ， 约定 某种 behave _ condition   下 物质 测 property 唯一性 。   建立 一种 描述 方法 ， 描述 方法 一系列 条件 集   [ a1 , a2 , a3 , a4 , a5 ..... ]   由此 property 。   描述 系统 足够 表达 ， 比如说 做 实验 记录 测试 条件 ， 实验室 ， 测试 时间 ， 填入 property 。   设计 数据库 ， 会 条件 集 数值 单位 单位 描述 分开 。 数值 单位 才 完整 behave _ condition 描述 。",
            "tags":"chemistry",
            "url":"articles/cheminfo-keyword-refrence.html"
        },
        {
            "title":"数据绘图",
            "text":"jupyter   notebook   下 推荐 输入   % matplotlib   notebook   。   In   [ 1 ] :   %   matplotlib   notebook   In   [ 2 ] :   import   matplotlib . pyplot     plt   配置 中文字体 支持   In   [ 3 ] :     matplotlib   import   rcParams   rcParams   [   ' font . family '   ]   =   ' sans - serif '   rcParams   [   ' font . sans - serif '   ]   .   insert   (   0   ,   ' SimHei '   )   #   插入 中文字体   print   (   rcParams   [   ' font . sans - serif '   ] )   rcParams   [   ' axes . unicode _ minus '   ]   =   False   # 用来 显示 负号   [ ' SimHei ' ,   ' DejaVu   Sans ' ,   ' Bitstream   Vera   Sans ' ,   ' Computer   Modern   Sans   Serif ' ,   ' Lucida   Grande ' ,   ' Verdana ' ,   ' Geneva ' ,   ' Lucid ' ,   ' Arial ' ,   ' Helvetica ' ,   ' Avant   Garde ' ,   ' sans - serif ' ]   折线图   折线图 最 简单 图形 ， 调用 plot 函数 即可 ， 图形 显示 上 微调 。   In   [ 5 ] :   import   numpy     np   x   =   np   .   arange   (   6   )   y   =   [   2   ,   2.1   ,   2.2   ,   2.1   ,   2.3   ,   2.4   ]   plt   .   ylabel   (   \" 利润 \"   )   #   设置 y 标签   plt   .   xlabel   (   \" 月份 \"   )   #   设置 x 标签   plt   .   xticks   (   x   ,   [   ' 七月 '   ,   ' 八月 '   ,   ' 九月 '   ,   ' 十月 '   ,   ' 十一月 '   ,   ' 十二月 '   ] )   #   设置 x 标记   plt   .   ylim   (   0   ,   2.8   )   #   设置 y 轴   plt   .   plot   (   y   )   var   element   =   $ ( ' # f117ebf7 - 0a0d - 429e - aca9 - 8081fbf1bd4f ' ) ;   / *   Put     inside     global   mpl   namespace   * /   window . mpl   =   { } ;   mpl . _ websocket _ type   =   function ( )   {     ( typeof ( WebSocket )   ! = =   ' undefined ' )   {   return   WebSocket ;   }       ( typeof ( MozWebSocket )   ! = =   ' undefined ' )   {   return   MozWebSocket ;   }     {   alert ( ' Your   browser         WebSocket   support . '   +   ' Please     Chrome ,   Safari     Firefox   ≥   6 .   '   +   ' Firefox   4     5       supported       '   +   '     enable   WebSockets     : config . ' ) ;   } ;   }   mpl . figure   =   function ( figure _ id ,   websocket ,   ondownload ,   parent _ element )   {   . id   =   figure _ id ;   . ws   =   websocket ;   . supports _ binary   =   ( . ws . binaryType   ! =   undefined ) ;     ( ! . supports _ binary )   {   var   warnings   =   document . getElementById ( \" mpl - warnings \" ) ;     ( warnings )   {   warnings . style . display   =   ' block ' ;   warnings . textContent   =   (   \" This   browser       support   binary   websocket   messages .   \"   +   \" Performance       slow . \" ) ;   }   }   . imageObj   =     Image ( ) ;   . context   =   undefined ;   . message   =   undefined ;   . canvas   =   undefined ;   . rubberband _ canvas   =   undefined ;   . rubberband _ context   =   undefined ;   . format _ dropdown   =   undefined ;   . image _ mode   =   ' full ' ;   . root   =   $ ( ' < div / > ' ) ;   ._ root _ extra _ style ( . root )   . root . attr ( ' style ' ,   ' display :   inline - block ' ) ;   $ ( parent _ element ) . append ( . root ) ;   ._ init _ header ( ) ;   ._ init _ canvas ( ) ;   ._ init _ toolbar ( ) ;   var   fig   =   ;   . waiting   =   false ;   . ws . onopen   =   function   ( )   {   fig . send _ message ( \" supports _ binary \" ,   { :   fig . supports _ binary } ) ;   fig . send _ message ( \" send _ image _ mode \" ,   { } ) ;     ( mpl . ratio   ! =   1 )   {   fig . send _ message ( \" set _ dpi _ ratio \" ,   { ' dpi _ ratio ' :   mpl . ratio } ) ;   }   fig . send _ message ( \" refresh \" ,   { } ) ;   }   . imageObj . onload   =   function ( )   {     ( fig . image _ mode   = =   ' full ' )   {   / /   Full   images       transparency   (   diff   images   / /       ) ,           clear     canvas       / /         ghosting .   fig . context . clearRect ( 0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   }   fig . context . drawImage ( fig . imageObj ,   0 ,   0 ) ;   } ;   . imageObj . onunload   =   function ( )   {   fig . ws . close ( ) ;   }   . ws . onmessage   =   ._ make _ _ message _ function ( ) ;   . ondownload   =   ondownload ;   }   mpl . figure . prototype ._ init _ header   =   function ( )   {   var   titlebar   =   $ (   ' < div   class = \" ui - dialog - titlebar   ui - widget - header   ui - corner -   '   +   ' ui - helper - clearfix \" / > ' ) ;   var   titletext   =   $ (   ' < div   class = \" ui - dialog - title \"   style = \" width :   100% ;   '   +   ' text - align :   center ;   padding :   3px ; \" / > ' ) ;   titlebar . append ( titletext )   . root . append ( titlebar ) ;   . header   =   titletext [ 0 ] ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ init _ canvas   =   function ( )   {   var   fig   =   ;   var   canvas _ div   =   $ ( ' < div / > ' ) ;   canvas _ div . attr ( ' style ' ,   ' position :   relative ;   clear :   ;   outline :   0 ' ) ;   function   canvas _ keyboard _ event ( event )   {   return   fig . key _ event ( event ,   event [ ' data ' ] ) ;   }   canvas _ div . keydown ( ' key _ press ' ,   canvas _ keyboard _ event ) ;   canvas _ div . keyup ( ' key _ release ' ,   canvas _ keyboard _ event ) ;   . canvas _ div   =   canvas _ div   ._ canvas _ extra _ style ( canvas _ div )   . root . append ( canvas _ div ) ;   var   canvas   =   $ ( ' < canvas / > ' ) ;   canvas . addClass ( ' mpl - canvas ' ) ;   canvas . attr ( ' style ' ,   \" left :   0 ;   top :   0 ;   z - index :   0 ;   outline :   0 \" )   . canvas   =   canvas [ 0 ] ;   . context   =   canvas [ 0 ] . getContext ( \" 2d \" ) ;   var   backingStore   =   . context . backingStorePixelRatio   | |   . context . webkitBackingStorePixelRatio   | |   . context . mozBackingStorePixelRatio   | |   . context . msBackingStorePixelRatio   | |   . context . oBackingStorePixelRatio   | |   . context . backingStorePixelRatio   | |   1 ;   mpl . ratio   =   ( window . devicePixelRatio   | |   1 )   /   backingStore ;   var   rubberband   =   $ ( ' < canvas / > ' ) ;   rubberband . attr ( ' style ' ,   \" position :   absolute ;   left :   0 ;   top :   0 ;   z - index :   1 ; \" )   var   pass _ mouse _ events   =   true ;   canvas _ div . resizable ( {   start :   function ( event ,   ui )   {   pass _ mouse _ events   =   false ;   } ,   resize :   function ( event ,   ui )   {   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   stop :   function ( event ,   ui )   {   pass _ mouse _ events   =   true ;   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   } ) ;   function   mouse _ event _ fn ( event )   {     ( pass _ mouse _ events )   return   fig . mouse _ event ( event ,   event [ ' data ' ] ) ;   }   rubberband . mousedown ( ' button _ press ' ,   mouse _ event _ fn ) ;   rubberband . mouseup ( ' button _ release ' ,   mouse _ event _ fn ) ;   / /   Throttle   sequential   mouse   events     1     20ms .   rubberband . mousemove ( ' motion _ notify ' ,   mouse _ event _ fn ) ;   rubberband . mouseenter ( ' figure _ enter ' ,   mouse _ event _ fn ) ;   rubberband . mouseleave ( ' figure _ leave ' ,   mouse _ event _ fn ) ;   canvas _ div . ( \" wheel \" ,   function   ( event )   {   event   =   event . originalEvent ;   event [ ' data ' ]   =   ' scroll '     ( event . deltaY   <   0 )   {   event . step   =   1 ;   }     {   event . step   =   - 1 ;   }   mouse _ event _ fn ( event ) ;   } ) ;   canvas _ div . append ( canvas ) ;   canvas _ div . append ( rubberband ) ;   . rubberband   =   rubberband ;   . rubberband _ canvas   =   rubberband [ 0 ] ;   . rubberband _ context   =   rubberband [ 0 ] . getContext ( \" 2d \" ) ;   . rubberband _ context . strokeStyle   =   \" # 000000 \" ;   ._ resize _ canvas   =   function ( width ,   height )   {   / /   Keep     size       canvas ,   canvas   container ,     rubber   band   / /   canvas     synch .   canvas _ div . css ( ' width ' ,   width )   canvas _ div . css ( ' height ' ,   height )   canvas . attr ( ' width ' ,   width   *   mpl . ratio ) ;   canvas . attr ( ' height ' ,   height   *   mpl . ratio ) ;   canvas . attr ( ' style ' ,   ' width :   '   +   width   +   ' px ;   height :   '   +   height   +   ' px ; ' ) ;   rubberband . attr ( ' width ' ,   width ) ;   rubberband . attr ( ' height ' ,   height ) ;   }   / /   Set     figure       initial   600x600px ,       subsequently     updated   / /       draw .   ._ resize _ canvas ( 600 ,   600 ) ;   / /   Disable     mouse   context   menu .   $ ( . rubberband _ canvas ) . bind ( \" contextmenu \" , function ( e ) {   return   false ;   } ) ;   function   set _ focus   ( )   {   canvas . focus ( ) ;   canvas _ div . focus ( ) ;   }   window . setTimeout ( set _ focus ,   100 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items )   {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   / /   put   a   spacer     .   continue ;   }   var   button   =   $ ( ' < button / > ' ) ;   button . addClass ( ' ui - button   ui - widget   ui - state - default   ui - corner -   '   +   ' ui - button - icon - ' ) ;   button . attr ( ' role ' ,   ' button ' ) ;   button . attr ( ' aria - disabled ' ,   ' false ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   var   icon _ img   =   $ ( ' < span / > ' ) ;   icon _ img . addClass ( ' ui - button - icon - primary   ui - icon ' ) ;   icon _ img . addClass ( image ) ;   icon _ img . addClass ( ' ui - corner - ' ) ;   var   tooltip _ span   =   $ ( ' < span / > ' ) ;   tooltip _ span . addClass ( ' ui - button - text ' ) ;   tooltip _ span . html ( tooltip ) ;   button . append ( icon _ img ) ;   button . append ( tooltip _ span ) ;   nav _ element . append ( button ) ;   }   var   fmt _ picker _ span   =   $ ( ' < span / > ' ) ;   var   fmt _ picker   =   $ ( ' < select / > ' ) ;   fmt _ picker . addClass ( ' mpl - toolbar - option   ui - widget   ui - widget - content ' ) ;   fmt _ picker _ span . append ( fmt _ picker ) ;   nav _ element . append ( fmt _ picker _ span ) ;   . format _ dropdown   =   fmt _ picker [ 0 ] ;     ( var   ind     mpl . extensions )   {   var   fmt   =   mpl . extensions [ ind ] ;   var   option   =   $ (   ' < option / > ' ,   { selected :   fmt   = = =   mpl . default _ extension } ) . html ( fmt ) ;   fmt _ picker . append ( option )   }   / /   Add   hover   states       ui - buttons   $ (   \" . ui - button \"   ) . hover (   function ( )   {   $ ( ) . addClass ( \" ui - state - hover \" ) ; } ,   function ( )   {   $ ( ) . removeClass ( \" ui - state - hover \" ) ; }   ) ;   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   }   mpl . figure . prototype . request _ resize   =   function ( x _ pixels ,   y _ pixels )   {   / /   Request   matplotlib     resize     figure .   Matplotlib       trigger   a   resize       client ,   / /         turn   request   a   refresh       image .   . send _ message ( ' resize ' ,   { ' width ' :   x _ pixels ,   ' height ' :   y _ pixels } ) ;   }   mpl . figure . prototype . send _ message   =   function ( type ,   properties )   {   properties [ ' type ' ]   =   type ;   properties [ ' figure _ id ' ]   =   . id ;   . ws . send ( JSON . stringify ( properties ) ) ;   }   mpl . figure . prototype . send _ draw _ message   =   function ( )   {     ( ! . waiting )   {   . waiting   =   true ;   . ws . send ( JSON . stringify ( { type :   \" draw \" ,   figure _ id :   . id } ) ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   var   format _ dropdown   =   fig . format _ dropdown ;   var   format   =   format _ dropdown . options [ format _ dropdown . selectedIndex ] . ;   fig . ondownload ( fig ,   format ) ;   }   mpl . figure . prototype . handle _ resize   =   function ( fig ,   msg )   {   var   size   =   msg [ ' size ' ] ;     ( size [ 0 ]   ! =   fig . canvas . width   | |   size [ 1 ]   ! =   fig . canvas . height )   {   fig ._ resize _ canvas ( size [ 0 ] ,   size [ 1 ] ) ;   fig . send _ message ( \" refresh \" ,   { } ) ;   } ;   }   mpl . figure . prototype . handle _ rubberband   =   function ( fig ,   msg )   {   var   x0   =   msg [ ' x0 ' ]   /   mpl . ratio ;   var   y0   =   ( fig . canvas . height   -   msg [ ' y0 ' ] )   /   mpl . ratio ;   var   x1   =   msg [ ' x1 ' ]   /   mpl . ratio ;   var   y1   =   ( fig . canvas . height   -   msg [ ' y1 ' ] )   /   mpl . ratio ;   x0   =   Math . floor ( x0 )   +   0.5 ;   y0   =   Math . floor ( y0 )   +   0.5 ;   x1   =   Math . floor ( x1 )   +   0.5 ;   y1   =   Math . floor ( y1 )   +   0.5 ;   var   min _ x   =   Math . min ( x0 ,   x1 ) ;   var   min _ y   =   Math . min ( y0 ,   y1 ) ;   var   width   =   Math . abs ( x1   -   x0 ) ;   var   height   =   Math . abs ( y1   -   y0 ) ;   fig . rubberband _ context . clearRect (   0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   fig . rubberband _ context . strokeRect ( min _ x ,   min _ y ,   width ,   height ) ;   }   mpl . figure . prototype . handle _ figure _ label   =   function ( fig ,   msg )   {   / /   Updates     figure   title .   fig . header . textContent   =   msg [ ' label ' ] ;   }   mpl . figure . prototype . handle _ cursor   =   function ( fig ,   msg )   {   var   cursor   =   msg [ ' cursor ' ] ;   switch ( cursor )   {   case   0 :   cursor   =   ' pointer ' ;   break ;   case   1 :   cursor   =   ' default ' ;   break ;   case   2 :   cursor   =   ' crosshair ' ;   break ;   case   3 :   cursor   =   ' move ' ;   break ;   }   fig . rubberband _ canvas . style . cursor   =   cursor ;   }   mpl . figure . prototype . handle _ message   =   function ( fig ,   msg )   {   fig . message . textContent   =   msg [ ' message ' ] ;   }   mpl . figure . prototype . handle _ draw   =   function ( fig ,   msg )   {   / /   Request     server     send     a     figure .   fig . send _ draw _ message ( ) ;   }   mpl . figure . prototype . handle _ image _ mode   =   function ( fig ,   msg )   {   fig . image _ mode   =   msg [ ' mode ' ] ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Called       canvas     updated .   . send _ message ( \" ack \" ,   { } ) ;   }   / /   A   function     construct   a   web   socket   function     onmessage   handling .   / /   Called       figure   constructor .   mpl . figure . prototype ._ make _ _ message _ function   =   function ( fig )   {   return   function   socket _ _ message ( evt )   {     ( evt . data   instanceof   Blob )   {   / *   FIXME :   We     \" Resource   interpreted     Image     *   transferred     MIME   type   text / plain : \"   errors     *   Chrome .   But       set     MIME   type   It   doesn ' t     *       part       websocket   stream   * /   evt . data . type   =   \" image / png \" ;   / *   Free     memory       previous   frames   * /     ( fig . imageObj . src )   {   ( window . URL   | |   window . webkitURL ) . revokeObjectURL (   fig . imageObj . src ) ;   }   fig . imageObj . src   =   ( window . URL   | |   window . webkitURL ) . createObjectURL (   evt . data ) ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }       ( typeof   evt . data   = = =   ' string '   &&   evt . data . slice ( 0 ,   21 )   = =   \" data : image / png ; base64 \" )   {   fig . imageObj . src   =   evt . data ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }   var   msg   =   JSON . parse ( evt . data ) ;   var   msg _ type   =   msg [ ' type ' ] ;   / /   Call     \" handle _ { type } \"   callback ,     takes   / /     figure     JSON   message         arguments .     {   var   callback   =   fig [ \" handle _ \"   +   msg _ type ] ;   }   catch   ( e )   {   console . log ( \" No   handler       ' \"   +   msg _ type   +   \" '   message   type :   \" ,   msg ) ;   return ;   }     ( callback )   {     {   / /   console . log ( \" Handling   ' \"   +   msg _ type   +   \" '   message :   \" ,   msg ) ;   callback ( fig ,   msg ) ;   }   catch   ( e )   {   console . log ( \" Exception   inside     ' handler _ \"   +   msg _ type   +   \" '   callback : \" ,   e ,   e . stack ,   msg ) ;   }   }   } ;   }   / /     http : / / stackoverflow . / questions / 1114465 / - mouse - location - - canvas   mpl . findpos   =   function ( e )   {   / /   section       http : / / www . quirksmode . org / js / events _ properties . html   var   targ ;     ( ! e )   e   =   window . event ;     ( e . target )   targ   =   e . target ;       ( e . srcElement )   targ   =   e . srcElement ;     ( targ . nodeType   = =   3 )   / /   defeat   Safari   bug   targ   =   targ . parentNode ;   / /   jQuery   normalizes     pageX     pageY   / /   pageX , Y       mouse   positions   relative       document   / /   offset ( )   returns     position       element   relative       document   var   x   =   e . pageX   -   $ ( targ ) . offset ( ) . left ;   var   y   =   e . pageY   -   $ ( targ ) . offset ( ) . top ;   return   { \" x \" :   x ,   \" y \" :   y } ;   } ;   / *   *   return   a   copy       object       - object   keys   *           avoid   circular   references   *   http : / / stackoverflow . / a / 24161582 / 3208463   * /   function   simpleKeys   ( original )   {   return   Object . keys ( original ) . reduce ( function   ( obj ,   key )   {     ( typeof   original [ key ]   ! = =   ' object ' )   obj [ key ]   =   original [ key ]   return   obj ;   } ,   { } ) ;   }   mpl . figure . prototype . mouse _ event   =   function ( event ,   )   {   var   canvas _ pos   =   mpl . findpos ( event )     (   = = =   ' button _ press ' )   {   . canvas . focus ( ) ;   . canvas _ div . focus ( ) ;   }   var   x   =   canvas _ pos . x   *   mpl . ratio ;   var   y   =   canvas _ pos . y   *   mpl . ratio ;   . send _ message ( ,   { x :   x ,   y :   y ,   button :   event . button ,   step :   event . step ,   guiEvent :   simpleKeys ( event ) } ) ;   / *   This   prevents     web   browser     automatically   changing     *     text   insertion   cursor       button     pressed .   We     *     control         cursor   setting   manually       *   ' cursor '   event     matplotlib   * /   event . preventDefault ( ) ;   return   false ;   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   / /   Handle     extra   behaviour       a   key   event   }   mpl . figure . prototype . key _ event   =   function ( event ,   )   {   / /   Prevent   repeat   events     (   = =   ' key _ press ' )   {     ( event .   = = =   ._ key )   return ;     ._ key   =   event . ;   }     (   = =   ' key _ release ' )   ._ key   =   null ;   var     =   ' ' ;     ( event . ctrlKey   &&   event .   ! =   17 )     + =   \" ctrl + \" ;     ( event . altKey   &&   event .   ! =   18 )     + =   \" alt + \" ;     ( event . shiftKey   &&   event .   ! =   16 )     + =   \" shift + \" ;     + =   ' k ' ;     + =   event . . toString ( ) ;   ._ key _ event _ extra ( event ,   ) ;   . send _ message ( ,   { key :   ,   guiEvent :   simpleKeys ( event ) } ) ;   return   false ;   }   mpl . figure . prototype . toolbar _ button _ onclick   =   function ( )   {     (   = =   ' download ' )   {   . handle _ save ( ,   null ) ;   }     {   . send _ message ( \" toolbar _ button \" ,   { :   } ) ;   }   } ;   mpl . figure . prototype . toolbar _ button _ onmouseover   =   function ( tooltip )   {   . message . textContent   =   tooltip ;   } ;   mpl . toolbar _ items   =   [ [ \" Home \" ,   \" Reset   original   view \" ,   \" fa   fa - home   icon - home \" ,   \" home \" ] ,   [ \" Back \" ,   \" Back     previous   view \" ,   \" fa   fa - arrow - left   icon - arrow - left \" ,   \" back \" ] ,   [ \" Forward \" ,   \" Forward       view \" ,   \" fa   fa - arrow -   icon - arrow - \" ,   \" forward \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Pan \" ,   \" Pan   axes     left   mouse ,   zoom     \" ,   \" fa   fa - arrows   icon - move \" ,   \" pan \" ] ,   [ \" Zoom \" ,   \" Zoom     rectangle \" ,   \" fa   fa - square - o   icon - check - empty \" ,   \" zoom \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Download \" ,   \" Download   plot \" ,   \" fa   fa - floppy - o   icon - save \" ,   \" download \" ] ] ;   mpl . extensions   =   [ \" eps \" ,   \" jpeg \" ,   \" pdf \" ,   \" png \" ,   \" ps \" ,   \" raw \" ,   \" svg \" ,   \" tif \" ] ;   mpl . default _ extension   =   \" png \" ; var   comm _ websocket _ adapter   =   function ( comm )   {   / /   Create   a   \" websocket \" -   object     calls       IPython   comm   / /   object         methods .   Currently       a     binary   / /   socket ,             room     performance   tuning .   var   ws   =   { } ;   ws . close   =   function ( )   {   comm . close ( )   } ;   ws . send   =   function ( m )   {   / / console . log ( ' sending ' ,   m ) ;   comm . send ( m ) ;   } ;   / /   Register     callback     _ msg .   comm . _ msg ( function ( msg )   {   / / console . log ( ' receiving ' ,   msg [ ' content ' ] [ ' data ' ] ,   msg ) ;   / /   Pass     mpl   event       overridden   (   mpl )   onmessage   function .   ws . onmessage ( msg [ ' content ' ] [ ' data ' ] )   } ) ;   return   ws ;   }   mpl . mpl _ figure _ comm   =   function ( comm ,   msg )   {   / /   This       function       called       mpl   process   / /   starts -     IPython   Comm       \" matplotlib \"   channel .   var   id   =   msg . content . data . id ;   / /   Get   hold       div   created       display   call       Comm   / /   socket     opened     Python .   var   element   =   $ ( \" # \"   +   id ) ;   var   ws _ proxy   =   comm _ websocket _ adapter ( comm )   function   ondownload ( figure ,   format )   {   window . open ( figure . imageObj . src ) ;   }   var   fig   =     mpl . figure ( id ,   ws _ proxy ,   ondownload ,   element . ( 0 ) ) ;   / /   Call   onopen     -   mpl     ,         assuming   ' ve   passed     a   real   / /   web   socket       closed ,       websocket - > open   comm   proxy .   ws _ proxy . onopen ( ) ;   fig . parent _ element   =   element . ( 0 ) ;   fig . cell _ info   =   mpl . find _ output _ cell ( \" < div   id = ' \"   +   id   +   \" ' > < / div > \" ) ;     ( ! fig . cell _ info )   {   console . error ( \" Failed     find   cell     figure \" ,   id ,   fig ) ;   return ;   }   var   output _ index   =   fig . cell _ info [ 2 ]   var   cell   =   fig . cell _ info [ 0 ] ;   } ;   mpl . figure . prototype . handle _ close   =   function ( fig ,   msg )   {   var   width   =   fig . canvas . width / mpl . ratio   fig . root . unbind ( ' remove ' )   / /   Update     output   cell         data       current   canvas .   fig . push _ _ output ( ) ;   var   dataURL   =   fig . canvas . toDataURL ( ) ;   / /   Re - enable     keyboard   manager     IPython   -       line ,     FF ,   / /     notebook   keyboard   shortcuts   fail .   IPython . keyboard _ manager . enable ( )   $ ( fig . parent _ element ) . html ( ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ) ;   fig . close _ ws ( fig ,   msg ) ;   }   mpl . figure . prototype . close _ ws   =   function ( fig ,   msg ) {   fig . send _ message ( ' closing ' ,   msg ) ;   / /   fig . ws . close ( )   }   mpl . figure . prototype . push _ _ output   =   function ( remove _ interactive )   {   / /   Turn     data       canvas     data       output   cell .   var   width   =   . canvas . width / mpl . ratio   var   dataURL   =   . canvas . toDataURL ( ) ;   . cell _ info [ 1 ] [ ' text / html ' ]   =   ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Tell   IPython       notebook   contents     change .   IPython . notebook . set _ dirty ( true ) ;   . send _ message ( \" ack \" ,   { } ) ;   var   fig   =   ;   / /   Wait   a   ,     push       image       DOM     / /         saved   nicely   (     nice     debounce   ) .   setTimeout ( function   ( )   {   fig . push _ _ output ( )   } ,   1000 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items ) {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   continue ;   } ;   var   button   =   $ ( ' < button   class = \" btn   btn - default \"   href = \" # \"   title = \" '   +     +   ' \" > < i   class = \" fa   '   +   image   +   '   fa - lg \" > < / i > < / button > ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   nav _ element . append ( button ) ;   }   / /   Add     status   bar .   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \"   style = \" text - align : ;   float :   ; \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   / /   Add     close   button       window .   var   buttongrp   =   $ ( ' < div   class = \" btn - group   inline   pull - \" > < / div > ' ) ;   var   button   =   $ ( ' < button   class = \" btn   btn - mini   btn - primary \"   href = \" # \"   title = \" Stop   Interaction \" > < i   class = \" fa   fa - power -   icon - remove   icon - large \" > < / i > < / button > ' ) ;   button . click ( function   ( evt )   {   fig . handle _ close ( fig ,   { } ) ;   }   ) ;   button . mouseover ( ' Stop   Interaction ' ,   toolbar _ mouse _ event ) ;   buttongrp . append ( button ) ;   var   titlebar   =   . root . find ( $ ( ' . ui - dialog - titlebar ' ) ) ;   titlebar . prepend ( buttongrp ) ;   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( el ) {   var   fig   =     el . ( \" remove \" ,   function ( ) {   fig . close _ ws ( fig ,   { } ) ;   } ) ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( el ) {   / /       important     make     div   ' focusable   el . attr ( ' tabindex ' ,   0 )   / /   reach       IPython         keyboard   manager     turn   ' s     / /         div     focus   / /   location     version   3     ( IPython . notebook . keyboard _ manager )   {   IPython . notebook . keyboard _ manager . register _ events ( el ) ;   }     {   / /   location     version   2   IPython . keyboard _ manager . register _ events ( el ) ;   }   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   var   manager   =   IPython . notebook . keyboard _ manager ;     ( ! manager )   manager   =   IPython . keyboard _ manager ;   / /   Check     shift + enter     ( event . shiftKey   &&   event .   = =   13 )   {   . canvas _ div . blur ( ) ;   event . shiftKey   =   false ;   / /   Send   a   \" J \"           cell   event .   =   74 ;   event . keyCode   =   74 ;   manager . command _ mode ( ) ;   manager . handle _ keydown ( event ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   fig . ondownload ( fig ,   null ) ;   }   mpl . find _ output _ cell   =   function ( html _ output )   {   / /   Return     cell     output   element         found   * uniquely *       notebook .   / /   Note   -       a   bit   hacky ,               \" notebook _ saving . Notebook \"   / /   IPython   event     triggered         cells       serialised ,       / /     purposes   ( turning     active   figure     a   static   ) ,       late .   var   cells   =   IPython . notebook . _ cells ( ) ;   var   ncells   =   cells . length ;     ( var   i = 0 ;   i < ncells ;   i ++ )   {   var   cell   =   cells [ i ] ;     ( cell . cell _ type   = = =   ' code ' ) {     ( var   j = 0 ;   j < cell . output _ area . outputs . length ;   j ++ )   {   var   data   =   cell . output _ area . outputs [ j ] ;     ( data . data )   {   / /   IPython   > =   3   moved   mimebundle     data   attribute     output   data   =   data . data ;   }     ( data [ ' text / html ' ]   = =   html _ output )   {   return   [ cell ,   data ,   j ] ;   }   }   }   }   }   / /   Register     function     deals       matplotlib   target / channel .   / /   The   kernel       null       page       refreshed .     ( IPython . notebook . kernel   ! =   null )   {   IPython . notebook . kernel . comm _ manager . register _ target ( ' matplotlib ' ,   mpl . mpl _ figure _ comm ) ;   }   Out [ 5 ] :   [ < matplotlib . lines . Line2D     0x20cb5fbebe0 > ]   饼 图   pie 函数 ， 子 图 :   fig1 ,   ax1   =   plt . subplots ( )   autopct   格式   ' % 2.0 f% % '   含义   有效数字 位数 小数点 位数 。   In   [ 6 ] :   labels   =   [   ' '   ,   ' 射击 '   ,   ' 动作 '   ,   ' 策略 '   ,   ' 体育 '   ]   sizes   =   [   1500   ,   3500   ,   6000   ,   11500   ,   27500   ]   #   explode   =   ( 0 ,   0 ,   0 ,   0 ,   0.1 )   fig1   ,   ax1   =   plt   .   subplots   ( )   ax1   .   pie   (   sizes   ,   labels   =   labels   ,   autopct   =   '   % 2.0 f% %   '   ,   startangle   =   90   )   ax1   .   axis   (   ' equal '   )   #   确保 画成 一个 圆   plt   .   show   ( )   var   element   =   $ ( ' # 6bef2600 - ad30 - 4b67 - 9c72 - 31eaff034f21 ' ) ;   / *   Put     inside     global   mpl   namespace   * /   window . mpl   =   { } ;   mpl . _ websocket _ type   =   function ( )   {     ( typeof ( WebSocket )   ! = =   ' undefined ' )   {   return   WebSocket ;   }       ( typeof ( MozWebSocket )   ! = =   ' undefined ' )   {   return   MozWebSocket ;   }     {   alert ( ' Your   browser         WebSocket   support . '   +   ' Please     Chrome ,   Safari     Firefox   ≥   6 .   '   +   ' Firefox   4     5       supported       '   +   '     enable   WebSockets     : config . ' ) ;   } ;   }   mpl . figure   =   function ( figure _ id ,   websocket ,   ondownload ,   parent _ element )   {   . id   =   figure _ id ;   . ws   =   websocket ;   . supports _ binary   =   ( . ws . binaryType   ! =   undefined ) ;     ( ! . supports _ binary )   {   var   warnings   =   document . getElementById ( \" mpl - warnings \" ) ;     ( warnings )   {   warnings . style . display   =   ' block ' ;   warnings . textContent   =   (   \" This   browser       support   binary   websocket   messages .   \"   +   \" Performance       slow . \" ) ;   }   }   . imageObj   =     Image ( ) ;   . context   =   undefined ;   . message   =   undefined ;   . canvas   =   undefined ;   . rubberband _ canvas   =   undefined ;   . rubberband _ context   =   undefined ;   . format _ dropdown   =   undefined ;   . image _ mode   =   ' full ' ;   . root   =   $ ( ' < div / > ' ) ;   ._ root _ extra _ style ( . root )   . root . attr ( ' style ' ,   ' display :   inline - block ' ) ;   $ ( parent _ element ) . append ( . root ) ;   ._ init _ header ( ) ;   ._ init _ canvas ( ) ;   ._ init _ toolbar ( ) ;   var   fig   =   ;   . waiting   =   false ;   . ws . onopen   =   function   ( )   {   fig . send _ message ( \" supports _ binary \" ,   { :   fig . supports _ binary } ) ;   fig . send _ message ( \" send _ image _ mode \" ,   { } ) ;     ( mpl . ratio   ! =   1 )   {   fig . send _ message ( \" set _ dpi _ ratio \" ,   { ' dpi _ ratio ' :   mpl . ratio } ) ;   }   fig . send _ message ( \" refresh \" ,   { } ) ;   }   . imageObj . onload   =   function ( )   {     ( fig . image _ mode   = =   ' full ' )   {   / /   Full   images       transparency   (   diff   images   / /       ) ,           clear     canvas       / /         ghosting .   fig . context . clearRect ( 0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   }   fig . context . drawImage ( fig . imageObj ,   0 ,   0 ) ;   } ;   . imageObj . onunload   =   function ( )   {   fig . ws . close ( ) ;   }   . ws . onmessage   =   ._ make _ _ message _ function ( ) ;   . ondownload   =   ondownload ;   }   mpl . figure . prototype ._ init _ header   =   function ( )   {   var   titlebar   =   $ (   ' < div   class = \" ui - dialog - titlebar   ui - widget - header   ui - corner -   '   +   ' ui - helper - clearfix \" / > ' ) ;   var   titletext   =   $ (   ' < div   class = \" ui - dialog - title \"   style = \" width :   100% ;   '   +   ' text - align :   center ;   padding :   3px ; \" / > ' ) ;   titlebar . append ( titletext )   . root . append ( titlebar ) ;   . header   =   titletext [ 0 ] ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ init _ canvas   =   function ( )   {   var   fig   =   ;   var   canvas _ div   =   $ ( ' < div / > ' ) ;   canvas _ div . attr ( ' style ' ,   ' position :   relative ;   clear :   ;   outline :   0 ' ) ;   function   canvas _ keyboard _ event ( event )   {   return   fig . key _ event ( event ,   event [ ' data ' ] ) ;   }   canvas _ div . keydown ( ' key _ press ' ,   canvas _ keyboard _ event ) ;   canvas _ div . keyup ( ' key _ release ' ,   canvas _ keyboard _ event ) ;   . canvas _ div   =   canvas _ div   ._ canvas _ extra _ style ( canvas _ div )   . root . append ( canvas _ div ) ;   var   canvas   =   $ ( ' < canvas / > ' ) ;   canvas . addClass ( ' mpl - canvas ' ) ;   canvas . attr ( ' style ' ,   \" left :   0 ;   top :   0 ;   z - index :   0 ;   outline :   0 \" )   . canvas   =   canvas [ 0 ] ;   . context   =   canvas [ 0 ] . getContext ( \" 2d \" ) ;   var   backingStore   =   . context . backingStorePixelRatio   | |   . context . webkitBackingStorePixelRatio   | |   . context . mozBackingStorePixelRatio   | |   . context . msBackingStorePixelRatio   | |   . context . oBackingStorePixelRatio   | |   . context . backingStorePixelRatio   | |   1 ;   mpl . ratio   =   ( window . devicePixelRatio   | |   1 )   /   backingStore ;   var   rubberband   =   $ ( ' < canvas / > ' ) ;   rubberband . attr ( ' style ' ,   \" position :   absolute ;   left :   0 ;   top :   0 ;   z - index :   1 ; \" )   var   pass _ mouse _ events   =   true ;   canvas _ div . resizable ( {   start :   function ( event ,   ui )   {   pass _ mouse _ events   =   false ;   } ,   resize :   function ( event ,   ui )   {   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   stop :   function ( event ,   ui )   {   pass _ mouse _ events   =   true ;   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   } ) ;   function   mouse _ event _ fn ( event )   {     ( pass _ mouse _ events )   return   fig . mouse _ event ( event ,   event [ ' data ' ] ) ;   }   rubberband . mousedown ( ' button _ press ' ,   mouse _ event _ fn ) ;   rubberband . mouseup ( ' button _ release ' ,   mouse _ event _ fn ) ;   / /   Throttle   sequential   mouse   events     1     20ms .   rubberband . mousemove ( ' motion _ notify ' ,   mouse _ event _ fn ) ;   rubberband . mouseenter ( ' figure _ enter ' ,   mouse _ event _ fn ) ;   rubberband . mouseleave ( ' figure _ leave ' ,   mouse _ event _ fn ) ;   canvas _ div . ( \" wheel \" ,   function   ( event )   {   event   =   event . originalEvent ;   event [ ' data ' ]   =   ' scroll '     ( event . deltaY   <   0 )   {   event . step   =   1 ;   }     {   event . step   =   - 1 ;   }   mouse _ event _ fn ( event ) ;   } ) ;   canvas _ div . append ( canvas ) ;   canvas _ div . append ( rubberband ) ;   . rubberband   =   rubberband ;   . rubberband _ canvas   =   rubberband [ 0 ] ;   . rubberband _ context   =   rubberband [ 0 ] . getContext ( \" 2d \" ) ;   . rubberband _ context . strokeStyle   =   \" # 000000 \" ;   ._ resize _ canvas   =   function ( width ,   height )   {   / /   Keep     size       canvas ,   canvas   container ,     rubber   band   / /   canvas     synch .   canvas _ div . css ( ' width ' ,   width )   canvas _ div . css ( ' height ' ,   height )   canvas . attr ( ' width ' ,   width   *   mpl . ratio ) ;   canvas . attr ( ' height ' ,   height   *   mpl . ratio ) ;   canvas . attr ( ' style ' ,   ' width :   '   +   width   +   ' px ;   height :   '   +   height   +   ' px ; ' ) ;   rubberband . attr ( ' width ' ,   width ) ;   rubberband . attr ( ' height ' ,   height ) ;   }   / /   Set     figure       initial   600x600px ,       subsequently     updated   / /       draw .   ._ resize _ canvas ( 600 ,   600 ) ;   / /   Disable     mouse   context   menu .   $ ( . rubberband _ canvas ) . bind ( \" contextmenu \" , function ( e ) {   return   false ;   } ) ;   function   set _ focus   ( )   {   canvas . focus ( ) ;   canvas _ div . focus ( ) ;   }   window . setTimeout ( set _ focus ,   100 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items )   {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   / /   put   a   spacer     .   continue ;   }   var   button   =   $ ( ' < button / > ' ) ;   button . addClass ( ' ui - button   ui - widget   ui - state - default   ui - corner -   '   +   ' ui - button - icon - ' ) ;   button . attr ( ' role ' ,   ' button ' ) ;   button . attr ( ' aria - disabled ' ,   ' false ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   var   icon _ img   =   $ ( ' < span / > ' ) ;   icon _ img . addClass ( ' ui - button - icon - primary   ui - icon ' ) ;   icon _ img . addClass ( image ) ;   icon _ img . addClass ( ' ui - corner - ' ) ;   var   tooltip _ span   =   $ ( ' < span / > ' ) ;   tooltip _ span . addClass ( ' ui - button - text ' ) ;   tooltip _ span . html ( tooltip ) ;   button . append ( icon _ img ) ;   button . append ( tooltip _ span ) ;   nav _ element . append ( button ) ;   }   var   fmt _ picker _ span   =   $ ( ' < span / > ' ) ;   var   fmt _ picker   =   $ ( ' < select / > ' ) ;   fmt _ picker . addClass ( ' mpl - toolbar - option   ui - widget   ui - widget - content ' ) ;   fmt _ picker _ span . append ( fmt _ picker ) ;   nav _ element . append ( fmt _ picker _ span ) ;   . format _ dropdown   =   fmt _ picker [ 0 ] ;     ( var   ind     mpl . extensions )   {   var   fmt   =   mpl . extensions [ ind ] ;   var   option   =   $ (   ' < option / > ' ,   { selected :   fmt   = = =   mpl . default _ extension } ) . html ( fmt ) ;   fmt _ picker . append ( option )   }   / /   Add   hover   states       ui - buttons   $ (   \" . ui - button \"   ) . hover (   function ( )   {   $ ( ) . addClass ( \" ui - state - hover \" ) ; } ,   function ( )   {   $ ( ) . removeClass ( \" ui - state - hover \" ) ; }   ) ;   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   }   mpl . figure . prototype . request _ resize   =   function ( x _ pixels ,   y _ pixels )   {   / /   Request   matplotlib     resize     figure .   Matplotlib       trigger   a   resize       client ,   / /         turn   request   a   refresh       image .   . send _ message ( ' resize ' ,   { ' width ' :   x _ pixels ,   ' height ' :   y _ pixels } ) ;   }   mpl . figure . prototype . send _ message   =   function ( type ,   properties )   {   properties [ ' type ' ]   =   type ;   properties [ ' figure _ id ' ]   =   . id ;   . ws . send ( JSON . stringify ( properties ) ) ;   }   mpl . figure . prototype . send _ draw _ message   =   function ( )   {     ( ! . waiting )   {   . waiting   =   true ;   . ws . send ( JSON . stringify ( { type :   \" draw \" ,   figure _ id :   . id } ) ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   var   format _ dropdown   =   fig . format _ dropdown ;   var   format   =   format _ dropdown . options [ format _ dropdown . selectedIndex ] . ;   fig . ondownload ( fig ,   format ) ;   }   mpl . figure . prototype . handle _ resize   =   function ( fig ,   msg )   {   var   size   =   msg [ ' size ' ] ;     ( size [ 0 ]   ! =   fig . canvas . width   | |   size [ 1 ]   ! =   fig . canvas . height )   {   fig ._ resize _ canvas ( size [ 0 ] ,   size [ 1 ] ) ;   fig . send _ message ( \" refresh \" ,   { } ) ;   } ;   }   mpl . figure . prototype . handle _ rubberband   =   function ( fig ,   msg )   {   var   x0   =   msg [ ' x0 ' ]   /   mpl . ratio ;   var   y0   =   ( fig . canvas . height   -   msg [ ' y0 ' ] )   /   mpl . ratio ;   var   x1   =   msg [ ' x1 ' ]   /   mpl . ratio ;   var   y1   =   ( fig . canvas . height   -   msg [ ' y1 ' ] )   /   mpl . ratio ;   x0   =   Math . floor ( x0 )   +   0.5 ;   y0   =   Math . floor ( y0 )   +   0.5 ;   x1   =   Math . floor ( x1 )   +   0.5 ;   y1   =   Math . floor ( y1 )   +   0.5 ;   var   min _ x   =   Math . min ( x0 ,   x1 ) ;   var   min _ y   =   Math . min ( y0 ,   y1 ) ;   var   width   =   Math . abs ( x1   -   x0 ) ;   var   height   =   Math . abs ( y1   -   y0 ) ;   fig . rubberband _ context . clearRect (   0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   fig . rubberband _ context . strokeRect ( min _ x ,   min _ y ,   width ,   height ) ;   }   mpl . figure . prototype . handle _ figure _ label   =   function ( fig ,   msg )   {   / /   Updates     figure   title .   fig . header . textContent   =   msg [ ' label ' ] ;   }   mpl . figure . prototype . handle _ cursor   =   function ( fig ,   msg )   {   var   cursor   =   msg [ ' cursor ' ] ;   switch ( cursor )   {   case   0 :   cursor   =   ' pointer ' ;   break ;   case   1 :   cursor   =   ' default ' ;   break ;   case   2 :   cursor   =   ' crosshair ' ;   break ;   case   3 :   cursor   =   ' move ' ;   break ;   }   fig . rubberband _ canvas . style . cursor   =   cursor ;   }   mpl . figure . prototype . handle _ message   =   function ( fig ,   msg )   {   fig . message . textContent   =   msg [ ' message ' ] ;   }   mpl . figure . prototype . handle _ draw   =   function ( fig ,   msg )   {   / /   Request     server     send     a     figure .   fig . send _ draw _ message ( ) ;   }   mpl . figure . prototype . handle _ image _ mode   =   function ( fig ,   msg )   {   fig . image _ mode   =   msg [ ' mode ' ] ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Called       canvas     updated .   . send _ message ( \" ack \" ,   { } ) ;   }   / /   A   function     construct   a   web   socket   function     onmessage   handling .   / /   Called       figure   constructor .   mpl . figure . prototype ._ make _ _ message _ function   =   function ( fig )   {   return   function   socket _ _ message ( evt )   {     ( evt . data   instanceof   Blob )   {   / *   FIXME :   We     \" Resource   interpreted     Image     *   transferred     MIME   type   text / plain : \"   errors     *   Chrome .   But       set     MIME   type   It   doesn ' t     *       part       websocket   stream   * /   evt . data . type   =   \" image / png \" ;   / *   Free     memory       previous   frames   * /     ( fig . imageObj . src )   {   ( window . URL   | |   window . webkitURL ) . revokeObjectURL (   fig . imageObj . src ) ;   }   fig . imageObj . src   =   ( window . URL   | |   window . webkitURL ) . createObjectURL (   evt . data ) ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }       ( typeof   evt . data   = = =   ' string '   &&   evt . data . slice ( 0 ,   21 )   = =   \" data : image / png ; base64 \" )   {   fig . imageObj . src   =   evt . data ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }   var   msg   =   JSON . parse ( evt . data ) ;   var   msg _ type   =   msg [ ' type ' ] ;   / /   Call     \" handle _ { type } \"   callback ,     takes   / /     figure     JSON   message         arguments .     {   var   callback   =   fig [ \" handle _ \"   +   msg _ type ] ;   }   catch   ( e )   {   console . log ( \" No   handler       ' \"   +   msg _ type   +   \" '   message   type :   \" ,   msg ) ;   return ;   }     ( callback )   {     {   / /   console . log ( \" Handling   ' \"   +   msg _ type   +   \" '   message :   \" ,   msg ) ;   callback ( fig ,   msg ) ;   }   catch   ( e )   {   console . log ( \" Exception   inside     ' handler _ \"   +   msg _ type   +   \" '   callback : \" ,   e ,   e . stack ,   msg ) ;   }   }   } ;   }   / /     http : / / stackoverflow . / questions / 1114465 / - mouse - location - - canvas   mpl . findpos   =   function ( e )   {   / /   section       http : / / www . quirksmode . org / js / events _ properties . html   var   targ ;     ( ! e )   e   =   window . event ;     ( e . target )   targ   =   e . target ;       ( e . srcElement )   targ   =   e . srcElement ;     ( targ . nodeType   = =   3 )   / /   defeat   Safari   bug   targ   =   targ . parentNode ;   / /   jQuery   normalizes     pageX     pageY   / /   pageX , Y       mouse   positions   relative       document   / /   offset ( )   returns     position       element   relative       document   var   x   =   e . pageX   -   $ ( targ ) . offset ( ) . left ;   var   y   =   e . pageY   -   $ ( targ ) . offset ( ) . top ;   return   { \" x \" :   x ,   \" y \" :   y } ;   } ;   / *   *   return   a   copy       object       - object   keys   *           avoid   circular   references   *   http : / / stackoverflow . / a / 24161582 / 3208463   * /   function   simpleKeys   ( original )   {   return   Object . keys ( original ) . reduce ( function   ( obj ,   key )   {     ( typeof   original [ key ]   ! = =   ' object ' )   obj [ key ]   =   original [ key ]   return   obj ;   } ,   { } ) ;   }   mpl . figure . prototype . mouse _ event   =   function ( event ,   )   {   var   canvas _ pos   =   mpl . findpos ( event )     (   = = =   ' button _ press ' )   {   . canvas . focus ( ) ;   . canvas _ div . focus ( ) ;   }   var   x   =   canvas _ pos . x   *   mpl . ratio ;   var   y   =   canvas _ pos . y   *   mpl . ratio ;   . send _ message ( ,   { x :   x ,   y :   y ,   button :   event . button ,   step :   event . step ,   guiEvent :   simpleKeys ( event ) } ) ;   / *   This   prevents     web   browser     automatically   changing     *     text   insertion   cursor       button     pressed .   We     *     control         cursor   setting   manually       *   ' cursor '   event     matplotlib   * /   event . preventDefault ( ) ;   return   false ;   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   / /   Handle     extra   behaviour       a   key   event   }   mpl . figure . prototype . key _ event   =   function ( event ,   )   {   / /   Prevent   repeat   events     (   = =   ' key _ press ' )   {     ( event .   = = =   ._ key )   return ;     ._ key   =   event . ;   }     (   = =   ' key _ release ' )   ._ key   =   null ;   var     =   ' ' ;     ( event . ctrlKey   &&   event .   ! =   17 )     + =   \" ctrl + \" ;     ( event . altKey   &&   event .   ! =   18 )     + =   \" alt + \" ;     ( event . shiftKey   &&   event .   ! =   16 )     + =   \" shift + \" ;     + =   ' k ' ;     + =   event . . toString ( ) ;   ._ key _ event _ extra ( event ,   ) ;   . send _ message ( ,   { key :   ,   guiEvent :   simpleKeys ( event ) } ) ;   return   false ;   }   mpl . figure . prototype . toolbar _ button _ onclick   =   function ( )   {     (   = =   ' download ' )   {   . handle _ save ( ,   null ) ;   }     {   . send _ message ( \" toolbar _ button \" ,   { :   } ) ;   }   } ;   mpl . figure . prototype . toolbar _ button _ onmouseover   =   function ( tooltip )   {   . message . textContent   =   tooltip ;   } ;   mpl . toolbar _ items   =   [ [ \" Home \" ,   \" Reset   original   view \" ,   \" fa   fa - home   icon - home \" ,   \" home \" ] ,   [ \" Back \" ,   \" Back     previous   view \" ,   \" fa   fa - arrow - left   icon - arrow - left \" ,   \" back \" ] ,   [ \" Forward \" ,   \" Forward       view \" ,   \" fa   fa - arrow -   icon - arrow - \" ,   \" forward \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Pan \" ,   \" Pan   axes     left   mouse ,   zoom     \" ,   \" fa   fa - arrows   icon - move \" ,   \" pan \" ] ,   [ \" Zoom \" ,   \" Zoom     rectangle \" ,   \" fa   fa - square - o   icon - check - empty \" ,   \" zoom \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Download \" ,   \" Download   plot \" ,   \" fa   fa - floppy - o   icon - save \" ,   \" download \" ] ] ;   mpl . extensions   =   [ \" eps \" ,   \" jpeg \" ,   \" pdf \" ,   \" png \" ,   \" ps \" ,   \" raw \" ,   \" svg \" ,   \" tif \" ] ;   mpl . default _ extension   =   \" png \" ; var   comm _ websocket _ adapter   =   function ( comm )   {   / /   Create   a   \" websocket \" -   object     calls       IPython   comm   / /   object         methods .   Currently       a     binary   / /   socket ,             room     performance   tuning .   var   ws   =   { } ;   ws . close   =   function ( )   {   comm . close ( )   } ;   ws . send   =   function ( m )   {   / / console . log ( ' sending ' ,   m ) ;   comm . send ( m ) ;   } ;   / /   Register     callback     _ msg .   comm . _ msg ( function ( msg )   {   / / console . log ( ' receiving ' ,   msg [ ' content ' ] [ ' data ' ] ,   msg ) ;   / /   Pass     mpl   event       overridden   (   mpl )   onmessage   function .   ws . onmessage ( msg [ ' content ' ] [ ' data ' ] )   } ) ;   return   ws ;   }   mpl . mpl _ figure _ comm   =   function ( comm ,   msg )   {   / /   This       function       called       mpl   process   / /   starts -     IPython   Comm       \" matplotlib \"   channel .   var   id   =   msg . content . data . id ;   / /   Get   hold       div   created       display   call       Comm   / /   socket     opened     Python .   var   element   =   $ ( \" # \"   +   id ) ;   var   ws _ proxy   =   comm _ websocket _ adapter ( comm )   function   ondownload ( figure ,   format )   {   window . open ( figure . imageObj . src ) ;   }   var   fig   =     mpl . figure ( id ,   ws _ proxy ,   ondownload ,   element . ( 0 ) ) ;   / /   Call   onopen     -   mpl     ,         assuming   ' ve   passed     a   real   / /   web   socket       closed ,       websocket - > open   comm   proxy .   ws _ proxy . onopen ( ) ;   fig . parent _ element   =   element . ( 0 ) ;   fig . cell _ info   =   mpl . find _ output _ cell ( \" < div   id = ' \"   +   id   +   \" ' > < / div > \" ) ;     ( ! fig . cell _ info )   {   console . error ( \" Failed     find   cell     figure \" ,   id ,   fig ) ;   return ;   }   var   output _ index   =   fig . cell _ info [ 2 ]   var   cell   =   fig . cell _ info [ 0 ] ;   } ;   mpl . figure . prototype . handle _ close   =   function ( fig ,   msg )   {   var   width   =   fig . canvas . width / mpl . ratio   fig . root . unbind ( ' remove ' )   / /   Update     output   cell         data       current   canvas .   fig . push _ _ output ( ) ;   var   dataURL   =   fig . canvas . toDataURL ( ) ;   / /   Re - enable     keyboard   manager     IPython   -       line ,     FF ,   / /     notebook   keyboard   shortcuts   fail .   IPython . keyboard _ manager . enable ( )   $ ( fig . parent _ element ) . html ( ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ) ;   fig . close _ ws ( fig ,   msg ) ;   }   mpl . figure . prototype . close _ ws   =   function ( fig ,   msg ) {   fig . send _ message ( ' closing ' ,   msg ) ;   / /   fig . ws . close ( )   }   mpl . figure . prototype . push _ _ output   =   function ( remove _ interactive )   {   / /   Turn     data       canvas     data       output   cell .   var   width   =   . canvas . width / mpl . ratio   var   dataURL   =   . canvas . toDataURL ( ) ;   . cell _ info [ 1 ] [ ' text / html ' ]   =   ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Tell   IPython       notebook   contents     change .   IPython . notebook . set _ dirty ( true ) ;   . send _ message ( \" ack \" ,   { } ) ;   var   fig   =   ;   / /   Wait   a   ,     push       image       DOM     / /         saved   nicely   (     nice     debounce   ) .   setTimeout ( function   ( )   {   fig . push _ _ output ( )   } ,   1000 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items ) {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   continue ;   } ;   var   button   =   $ ( ' < button   class = \" btn   btn - default \"   href = \" # \"   title = \" '   +     +   ' \" > < i   class = \" fa   '   +   image   +   '   fa - lg \" > < / i > < / button > ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   nav _ element . append ( button ) ;   }   / /   Add     status   bar .   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \"   style = \" text - align : ;   float :   ; \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   / /   Add     close   button       window .   var   buttongrp   =   $ ( ' < div   class = \" btn - group   inline   pull - \" > < / div > ' ) ;   var   button   =   $ ( ' < button   class = \" btn   btn - mini   btn - primary \"   href = \" # \"   title = \" Stop   Interaction \" > < i   class = \" fa   fa - power -   icon - remove   icon - large \" > < / i > < / button > ' ) ;   button . click ( function   ( evt )   {   fig . handle _ close ( fig ,   { } ) ;   }   ) ;   button . mouseover ( ' Stop   Interaction ' ,   toolbar _ mouse _ event ) ;   buttongrp . append ( button ) ;   var   titlebar   =   . root . find ( $ ( ' . ui - dialog - titlebar ' ) ) ;   titlebar . prepend ( buttongrp ) ;   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( el ) {   var   fig   =     el . ( \" remove \" ,   function ( ) {   fig . close _ ws ( fig ,   { } ) ;   } ) ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( el ) {   / /       important     make     div   ' focusable   el . attr ( ' tabindex ' ,   0 )   / /   reach       IPython         keyboard   manager     turn   ' s     / /         div     focus   / /   location     version   3     ( IPython . notebook . keyboard _ manager )   {   IPython . notebook . keyboard _ manager . register _ events ( el ) ;   }     {   / /   location     version   2   IPython . keyboard _ manager . register _ events ( el ) ;   }   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   var   manager   =   IPython . notebook . keyboard _ manager ;     ( ! manager )   manager   =   IPython . keyboard _ manager ;   / /   Check     shift + enter     ( event . shiftKey   &&   event .   = =   13 )   {   . canvas _ div . blur ( ) ;   event . shiftKey   =   false ;   / /   Send   a   \" J \"           cell   event .   =   74 ;   event . keyCode   =   74 ;   manager . command _ mode ( ) ;   manager . handle _ keydown ( event ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   fig . ondownload ( fig ,   null ) ;   }   mpl . find _ output _ cell   =   function ( html _ output )   {   / /   Return     cell     output   element         found   * uniquely *       notebook .   / /   Note   -       a   bit   hacky ,               \" notebook _ saving . Notebook \"   / /   IPython   event     triggered         cells       serialised ,       / /     purposes   ( turning     active   figure     a   static   ) ,       late .   var   cells   =   IPython . notebook . _ cells ( ) ;   var   ncells   =   cells . length ;     ( var   i = 0 ;   i < ncells ;   i ++ )   {   var   cell   =   cells [ i ] ;     ( cell . cell _ type   = = =   ' code ' ) {     ( var   j = 0 ;   j < cell . output _ area . outputs . length ;   j ++ )   {   var   data   =   cell . output _ area . outputs [ j ] ;     ( data . data )   {   / /   IPython   > =   3   moved   mimebundle     data   attribute     output   data   =   data . data ;   }     ( data [ ' text / html ' ]   = =   html _ output )   {   return   [ cell ,   data ,   j ] ;   }   }   }   }   }   / /   Register     function     deals       matplotlib   target / channel .   / /   The   kernel       null       page       refreshed .     ( IPython . notebook . kernel   ! =   null )   {   IPython . notebook . kernel . comm _ manager . register _ target ( ' matplotlib ' ,   mpl . mpl _ figure _ comm ) ;   }   条形图   垂直 条形图 ， 类别 很多 水平 条形图 。 条形图 用于 定性 数据 。   垂直 条形图   barh 函数 绘制 垂直 条形图 。   In   [ 7 ] :   import   numpy     np   fig   ,   ax   =   plt   .   subplots   ( )   x   =   [   ' 北美洲 '   ,   ' 南美洲 '   ,   ' 欧洲 '   ,   ' 亚洲 '   ,   ' 大洋洲 '   ,   ' 非洲 '   ,   ' 南极洲 '   ]   y   =   np   .   arange   (   len   (   x   ) )   y _   =   [   1500   ,   500   ,   1500   ,   2000   ,   1000   ,   500   ,   1   ]   ax   .   barh   (   y   ,   y _   ,   align   =   ' center '   )   ax   .   set _ yticks   (   y   )   ax   .   set _ yticklabels   (   x   )   ax   .   set _ xlabel   (   ' 销量 '   )   var   element   =   $ ( ' # 8a9ae32c - a782 - 4287 - 8240 - e08e0058d7df ' ) ;   / *   Put     inside     global   mpl   namespace   * /   window . mpl   =   { } ;   mpl . _ websocket _ type   =   function ( )   {     ( typeof ( WebSocket )   ! = =   ' undefined ' )   {   return   WebSocket ;   }       ( typeof ( MozWebSocket )   ! = =   ' undefined ' )   {   return   MozWebSocket ;   }     {   alert ( ' Your   browser         WebSocket   support . '   +   ' Please     Chrome ,   Safari     Firefox   ≥   6 .   '   +   ' Firefox   4     5       supported       '   +   '     enable   WebSockets     : config . ' ) ;   } ;   }   mpl . figure   =   function ( figure _ id ,   websocket ,   ondownload ,   parent _ element )   {   . id   =   figure _ id ;   . ws   =   websocket ;   . supports _ binary   =   ( . ws . binaryType   ! =   undefined ) ;     ( ! . supports _ binary )   {   var   warnings   =   document . getElementById ( \" mpl - warnings \" ) ;     ( warnings )   {   warnings . style . display   =   ' block ' ;   warnings . textContent   =   (   \" This   browser       support   binary   websocket   messages .   \"   +   \" Performance       slow . \" ) ;   }   }   . imageObj   =     Image ( ) ;   . context   =   undefined ;   . message   =   undefined ;   . canvas   =   undefined ;   . rubberband _ canvas   =   undefined ;   . rubberband _ context   =   undefined ;   . format _ dropdown   =   undefined ;   . image _ mode   =   ' full ' ;   . root   =   $ ( ' < div / > ' ) ;   ._ root _ extra _ style ( . root )   . root . attr ( ' style ' ,   ' display :   inline - block ' ) ;   $ ( parent _ element ) . append ( . root ) ;   ._ init _ header ( ) ;   ._ init _ canvas ( ) ;   ._ init _ toolbar ( ) ;   var   fig   =   ;   . waiting   =   false ;   . ws . onopen   =   function   ( )   {   fig . send _ message ( \" supports _ binary \" ,   { :   fig . supports _ binary } ) ;   fig . send _ message ( \" send _ image _ mode \" ,   { } ) ;     ( mpl . ratio   ! =   1 )   {   fig . send _ message ( \" set _ dpi _ ratio \" ,   { ' dpi _ ratio ' :   mpl . ratio } ) ;   }   fig . send _ message ( \" refresh \" ,   { } ) ;   }   . imageObj . onload   =   function ( )   {     ( fig . image _ mode   = =   ' full ' )   {   / /   Full   images       transparency   (   diff   images   / /       ) ,           clear     canvas       / /         ghosting .   fig . context . clearRect ( 0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   }   fig . context . drawImage ( fig . imageObj ,   0 ,   0 ) ;   } ;   . imageObj . onunload   =   function ( )   {   fig . ws . close ( ) ;   }   . ws . onmessage   =   ._ make _ _ message _ function ( ) ;   . ondownload   =   ondownload ;   }   mpl . figure . prototype ._ init _ header   =   function ( )   {   var   titlebar   =   $ (   ' < div   class = \" ui - dialog - titlebar   ui - widget - header   ui - corner -   '   +   ' ui - helper - clearfix \" / > ' ) ;   var   titletext   =   $ (   ' < div   class = \" ui - dialog - title \"   style = \" width :   100% ;   '   +   ' text - align :   center ;   padding :   3px ; \" / > ' ) ;   titlebar . append ( titletext )   . root . append ( titlebar ) ;   . header   =   titletext [ 0 ] ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ init _ canvas   =   function ( )   {   var   fig   =   ;   var   canvas _ div   =   $ ( ' < div / > ' ) ;   canvas _ div . attr ( ' style ' ,   ' position :   relative ;   clear :   ;   outline :   0 ' ) ;   function   canvas _ keyboard _ event ( event )   {   return   fig . key _ event ( event ,   event [ ' data ' ] ) ;   }   canvas _ div . keydown ( ' key _ press ' ,   canvas _ keyboard _ event ) ;   canvas _ div . keyup ( ' key _ release ' ,   canvas _ keyboard _ event ) ;   . canvas _ div   =   canvas _ div   ._ canvas _ extra _ style ( canvas _ div )   . root . append ( canvas _ div ) ;   var   canvas   =   $ ( ' < canvas / > ' ) ;   canvas . addClass ( ' mpl - canvas ' ) ;   canvas . attr ( ' style ' ,   \" left :   0 ;   top :   0 ;   z - index :   0 ;   outline :   0 \" )   . canvas   =   canvas [ 0 ] ;   . context   =   canvas [ 0 ] . getContext ( \" 2d \" ) ;   var   backingStore   =   . context . backingStorePixelRatio   | |   . context . webkitBackingStorePixelRatio   | |   . context . mozBackingStorePixelRatio   | |   . context . msBackingStorePixelRatio   | |   . context . oBackingStorePixelRatio   | |   . context . backingStorePixelRatio   | |   1 ;   mpl . ratio   =   ( window . devicePixelRatio   | |   1 )   /   backingStore ;   var   rubberband   =   $ ( ' < canvas / > ' ) ;   rubberband . attr ( ' style ' ,   \" position :   absolute ;   left :   0 ;   top :   0 ;   z - index :   1 ; \" )   var   pass _ mouse _ events   =   true ;   canvas _ div . resizable ( {   start :   function ( event ,   ui )   {   pass _ mouse _ events   =   false ;   } ,   resize :   function ( event ,   ui )   {   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   stop :   function ( event ,   ui )   {   pass _ mouse _ events   =   true ;   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   } ) ;   function   mouse _ event _ fn ( event )   {     ( pass _ mouse _ events )   return   fig . mouse _ event ( event ,   event [ ' data ' ] ) ;   }   rubberband . mousedown ( ' button _ press ' ,   mouse _ event _ fn ) ;   rubberband . mouseup ( ' button _ release ' ,   mouse _ event _ fn ) ;   / /   Throttle   sequential   mouse   events     1     20ms .   rubberband . mousemove ( ' motion _ notify ' ,   mouse _ event _ fn ) ;   rubberband . mouseenter ( ' figure _ enter ' ,   mouse _ event _ fn ) ;   rubberband . mouseleave ( ' figure _ leave ' ,   mouse _ event _ fn ) ;   canvas _ div . ( \" wheel \" ,   function   ( event )   {   event   =   event . originalEvent ;   event [ ' data ' ]   =   ' scroll '     ( event . deltaY   <   0 )   {   event . step   =   1 ;   }     {   event . step   =   - 1 ;   }   mouse _ event _ fn ( event ) ;   } ) ;   canvas _ div . append ( canvas ) ;   canvas _ div . append ( rubberband ) ;   . rubberband   =   rubberband ;   . rubberband _ canvas   =   rubberband [ 0 ] ;   . rubberband _ context   =   rubberband [ 0 ] . getContext ( \" 2d \" ) ;   . rubberband _ context . strokeStyle   =   \" # 000000 \" ;   ._ resize _ canvas   =   function ( width ,   height )   {   / /   Keep     size       canvas ,   canvas   container ,     rubber   band   / /   canvas     synch .   canvas _ div . css ( ' width ' ,   width )   canvas _ div . css ( ' height ' ,   height )   canvas . attr ( ' width ' ,   width   *   mpl . ratio ) ;   canvas . attr ( ' height ' ,   height   *   mpl . ratio ) ;   canvas . attr ( ' style ' ,   ' width :   '   +   width   +   ' px ;   height :   '   +   height   +   ' px ; ' ) ;   rubberband . attr ( ' width ' ,   width ) ;   rubberband . attr ( ' height ' ,   height ) ;   }   / /   Set     figure       initial   600x600px ,       subsequently     updated   / /       draw .   ._ resize _ canvas ( 600 ,   600 ) ;   / /   Disable     mouse   context   menu .   $ ( . rubberband _ canvas ) . bind ( \" contextmenu \" , function ( e ) {   return   false ;   } ) ;   function   set _ focus   ( )   {   canvas . focus ( ) ;   canvas _ div . focus ( ) ;   }   window . setTimeout ( set _ focus ,   100 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items )   {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   / /   put   a   spacer     .   continue ;   }   var   button   =   $ ( ' < button / > ' ) ;   button . addClass ( ' ui - button   ui - widget   ui - state - default   ui - corner -   '   +   ' ui - button - icon - ' ) ;   button . attr ( ' role ' ,   ' button ' ) ;   button . attr ( ' aria - disabled ' ,   ' false ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   var   icon _ img   =   $ ( ' < span / > ' ) ;   icon _ img . addClass ( ' ui - button - icon - primary   ui - icon ' ) ;   icon _ img . addClass ( image ) ;   icon _ img . addClass ( ' ui - corner - ' ) ;   var   tooltip _ span   =   $ ( ' < span / > ' ) ;   tooltip _ span . addClass ( ' ui - button - text ' ) ;   tooltip _ span . html ( tooltip ) ;   button . append ( icon _ img ) ;   button . append ( tooltip _ span ) ;   nav _ element . append ( button ) ;   }   var   fmt _ picker _ span   =   $ ( ' < span / > ' ) ;   var   fmt _ picker   =   $ ( ' < select / > ' ) ;   fmt _ picker . addClass ( ' mpl - toolbar - option   ui - widget   ui - widget - content ' ) ;   fmt _ picker _ span . append ( fmt _ picker ) ;   nav _ element . append ( fmt _ picker _ span ) ;   . format _ dropdown   =   fmt _ picker [ 0 ] ;     ( var   ind     mpl . extensions )   {   var   fmt   =   mpl . extensions [ ind ] ;   var   option   =   $ (   ' < option / > ' ,   { selected :   fmt   = = =   mpl . default _ extension } ) . html ( fmt ) ;   fmt _ picker . append ( option )   }   / /   Add   hover   states       ui - buttons   $ (   \" . ui - button \"   ) . hover (   function ( )   {   $ ( ) . addClass ( \" ui - state - hover \" ) ; } ,   function ( )   {   $ ( ) . removeClass ( \" ui - state - hover \" ) ; }   ) ;   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   }   mpl . figure . prototype . request _ resize   =   function ( x _ pixels ,   y _ pixels )   {   / /   Request   matplotlib     resize     figure .   Matplotlib       trigger   a   resize       client ,   / /         turn   request   a   refresh       image .   . send _ message ( ' resize ' ,   { ' width ' :   x _ pixels ,   ' height ' :   y _ pixels } ) ;   }   mpl . figure . prototype . send _ message   =   function ( type ,   properties )   {   properties [ ' type ' ]   =   type ;   properties [ ' figure _ id ' ]   =   . id ;   . ws . send ( JSON . stringify ( properties ) ) ;   }   mpl . figure . prototype . send _ draw _ message   =   function ( )   {     ( ! . waiting )   {   . waiting   =   true ;   . ws . send ( JSON . stringify ( { type :   \" draw \" ,   figure _ id :   . id } ) ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   var   format _ dropdown   =   fig . format _ dropdown ;   var   format   =   format _ dropdown . options [ format _ dropdown . selectedIndex ] . ;   fig . ondownload ( fig ,   format ) ;   }   mpl . figure . prototype . handle _ resize   =   function ( fig ,   msg )   {   var   size   =   msg [ ' size ' ] ;     ( size [ 0 ]   ! =   fig . canvas . width   | |   size [ 1 ]   ! =   fig . canvas . height )   {   fig ._ resize _ canvas ( size [ 0 ] ,   size [ 1 ] ) ;   fig . send _ message ( \" refresh \" ,   { } ) ;   } ;   }   mpl . figure . prototype . handle _ rubberband   =   function ( fig ,   msg )   {   var   x0   =   msg [ ' x0 ' ]   /   mpl . ratio ;   var   y0   =   ( fig . canvas . height   -   msg [ ' y0 ' ] )   /   mpl . ratio ;   var   x1   =   msg [ ' x1 ' ]   /   mpl . ratio ;   var   y1   =   ( fig . canvas . height   -   msg [ ' y1 ' ] )   /   mpl . ratio ;   x0   =   Math . floor ( x0 )   +   0.5 ;   y0   =   Math . floor ( y0 )   +   0.5 ;   x1   =   Math . floor ( x1 )   +   0.5 ;   y1   =   Math . floor ( y1 )   +   0.5 ;   var   min _ x   =   Math . min ( x0 ,   x1 ) ;   var   min _ y   =   Math . min ( y0 ,   y1 ) ;   var   width   =   Math . abs ( x1   -   x0 ) ;   var   height   =   Math . abs ( y1   -   y0 ) ;   fig . rubberband _ context . clearRect (   0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   fig . rubberband _ context . strokeRect ( min _ x ,   min _ y ,   width ,   height ) ;   }   mpl . figure . prototype . handle _ figure _ label   =   function ( fig ,   msg )   {   / /   Updates     figure   title .   fig . header . textContent   =   msg [ ' label ' ] ;   }   mpl . figure . prototype . handle _ cursor   =   function ( fig ,   msg )   {   var   cursor   =   msg [ ' cursor ' ] ;   switch ( cursor )   {   case   0 :   cursor   =   ' pointer ' ;   break ;   case   1 :   cursor   =   ' default ' ;   break ;   case   2 :   cursor   =   ' crosshair ' ;   break ;   case   3 :   cursor   =   ' move ' ;   break ;   }   fig . rubberband _ canvas . style . cursor   =   cursor ;   }   mpl . figure . prototype . handle _ message   =   function ( fig ,   msg )   {   fig . message . textContent   =   msg [ ' message ' ] ;   }   mpl . figure . prototype . handle _ draw   =   function ( fig ,   msg )   {   / /   Request     server     send     a     figure .   fig . send _ draw _ message ( ) ;   }   mpl . figure . prototype . handle _ image _ mode   =   function ( fig ,   msg )   {   fig . image _ mode   =   msg [ ' mode ' ] ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Called       canvas     updated .   . send _ message ( \" ack \" ,   { } ) ;   }   / /   A   function     construct   a   web   socket   function     onmessage   handling .   / /   Called       figure   constructor .   mpl . figure . prototype ._ make _ _ message _ function   =   function ( fig )   {   return   function   socket _ _ message ( evt )   {     ( evt . data   instanceof   Blob )   {   / *   FIXME :   We     \" Resource   interpreted     Image     *   transferred     MIME   type   text / plain : \"   errors     *   Chrome .   But       set     MIME   type   It   doesn ' t     *       part       websocket   stream   * /   evt . data . type   =   \" image / png \" ;   / *   Free     memory       previous   frames   * /     ( fig . imageObj . src )   {   ( window . URL   | |   window . webkitURL ) . revokeObjectURL (   fig . imageObj . src ) ;   }   fig . imageObj . src   =   ( window . URL   | |   window . webkitURL ) . createObjectURL (   evt . data ) ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }       ( typeof   evt . data   = = =   ' string '   &&   evt . data . slice ( 0 ,   21 )   = =   \" data : image / png ; base64 \" )   {   fig . imageObj . src   =   evt . data ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }   var   msg   =   JSON . parse ( evt . data ) ;   var   msg _ type   =   msg [ ' type ' ] ;   / /   Call     \" handle _ { type } \"   callback ,     takes   / /     figure     JSON   message         arguments .     {   var   callback   =   fig [ \" handle _ \"   +   msg _ type ] ;   }   catch   ( e )   {   console . log ( \" No   handler       ' \"   +   msg _ type   +   \" '   message   type :   \" ,   msg ) ;   return ;   }     ( callback )   {     {   / /   console . log ( \" Handling   ' \"   +   msg _ type   +   \" '   message :   \" ,   msg ) ;   callback ( fig ,   msg ) ;   }   catch   ( e )   {   console . log ( \" Exception   inside     ' handler _ \"   +   msg _ type   +   \" '   callback : \" ,   e ,   e . stack ,   msg ) ;   }   }   } ;   }   / /     http : / / stackoverflow . / questions / 1114465 / - mouse - location - - canvas   mpl . findpos   =   function ( e )   {   / /   section       http : / / www . quirksmode . org / js / events _ properties . html   var   targ ;     ( ! e )   e   =   window . event ;     ( e . target )   targ   =   e . target ;       ( e . srcElement )   targ   =   e . srcElement ;     ( targ . nodeType   = =   3 )   / /   defeat   Safari   bug   targ   =   targ . parentNode ;   / /   jQuery   normalizes     pageX     pageY   / /   pageX , Y       mouse   positions   relative       document   / /   offset ( )   returns     position       element   relative       document   var   x   =   e . pageX   -   $ ( targ ) . offset ( ) . left ;   var   y   =   e . pageY   -   $ ( targ ) . offset ( ) . top ;   return   { \" x \" :   x ,   \" y \" :   y } ;   } ;   / *   *   return   a   copy       object       - object   keys   *           avoid   circular   references   *   http : / / stackoverflow . / a / 24161582 / 3208463   * /   function   simpleKeys   ( original )   {   return   Object . keys ( original ) . reduce ( function   ( obj ,   key )   {     ( typeof   original [ key ]   ! = =   ' object ' )   obj [ key ]   =   original [ key ]   return   obj ;   } ,   { } ) ;   }   mpl . figure . prototype . mouse _ event   =   function ( event ,   )   {   var   canvas _ pos   =   mpl . findpos ( event )     (   = = =   ' button _ press ' )   {   . canvas . focus ( ) ;   . canvas _ div . focus ( ) ;   }   var   x   =   canvas _ pos . x   *   mpl . ratio ;   var   y   =   canvas _ pos . y   *   mpl . ratio ;   . send _ message ( ,   { x :   x ,   y :   y ,   button :   event . button ,   step :   event . step ,   guiEvent :   simpleKeys ( event ) } ) ;   / *   This   prevents     web   browser     automatically   changing     *     text   insertion   cursor       button     pressed .   We     *     control         cursor   setting   manually       *   ' cursor '   event     matplotlib   * /   event . preventDefault ( ) ;   return   false ;   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   / /   Handle     extra   behaviour       a   key   event   }   mpl . figure . prototype . key _ event   =   function ( event ,   )   {   / /   Prevent   repeat   events     (   = =   ' key _ press ' )   {     ( event .   = = =   ._ key )   return ;     ._ key   =   event . ;   }     (   = =   ' key _ release ' )   ._ key   =   null ;   var     =   ' ' ;     ( event . ctrlKey   &&   event .   ! =   17 )     + =   \" ctrl + \" ;     ( event . altKey   &&   event .   ! =   18 )     + =   \" alt + \" ;     ( event . shiftKey   &&   event .   ! =   16 )     + =   \" shift + \" ;     + =   ' k ' ;     + =   event . . toString ( ) ;   ._ key _ event _ extra ( event ,   ) ;   . send _ message ( ,   { key :   ,   guiEvent :   simpleKeys ( event ) } ) ;   return   false ;   }   mpl . figure . prototype . toolbar _ button _ onclick   =   function ( )   {     (   = =   ' download ' )   {   . handle _ save ( ,   null ) ;   }     {   . send _ message ( \" toolbar _ button \" ,   { :   } ) ;   }   } ;   mpl . figure . prototype . toolbar _ button _ onmouseover   =   function ( tooltip )   {   . message . textContent   =   tooltip ;   } ;   mpl . toolbar _ items   =   [ [ \" Home \" ,   \" Reset   original   view \" ,   \" fa   fa - home   icon - home \" ,   \" home \" ] ,   [ \" Back \" ,   \" Back     previous   view \" ,   \" fa   fa - arrow - left   icon - arrow - left \" ,   \" back \" ] ,   [ \" Forward \" ,   \" Forward       view \" ,   \" fa   fa - arrow -   icon - arrow - \" ,   \" forward \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Pan \" ,   \" Pan   axes     left   mouse ,   zoom     \" ,   \" fa   fa - arrows   icon - move \" ,   \" pan \" ] ,   [ \" Zoom \" ,   \" Zoom     rectangle \" ,   \" fa   fa - square - o   icon - check - empty \" ,   \" zoom \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Download \" ,   \" Download   plot \" ,   \" fa   fa - floppy - o   icon - save \" ,   \" download \" ] ] ;   mpl . extensions   =   [ \" eps \" ,   \" jpeg \" ,   \" pdf \" ,   \" png \" ,   \" ps \" ,   \" raw \" ,   \" svg \" ,   \" tif \" ] ;   mpl . default _ extension   =   \" png \" ; var   comm _ websocket _ adapter   =   function ( comm )   {   / /   Create   a   \" websocket \" -   object     calls       IPython   comm   / /   object         methods .   Currently       a     binary   / /   socket ,             room     performance   tuning .   var   ws   =   { } ;   ws . close   =   function ( )   {   comm . close ( )   } ;   ws . send   =   function ( m )   {   / / console . log ( ' sending ' ,   m ) ;   comm . send ( m ) ;   } ;   / /   Register     callback     _ msg .   comm . _ msg ( function ( msg )   {   / / console . log ( ' receiving ' ,   msg [ ' content ' ] [ ' data ' ] ,   msg ) ;   / /   Pass     mpl   event       overridden   (   mpl )   onmessage   function .   ws . onmessage ( msg [ ' content ' ] [ ' data ' ] )   } ) ;   return   ws ;   }   mpl . mpl _ figure _ comm   =   function ( comm ,   msg )   {   / /   This       function       called       mpl   process   / /   starts -     IPython   Comm       \" matplotlib \"   channel .   var   id   =   msg . content . data . id ;   / /   Get   hold       div   created       display   call       Comm   / /   socket     opened     Python .   var   element   =   $ ( \" # \"   +   id ) ;   var   ws _ proxy   =   comm _ websocket _ adapter ( comm )   function   ondownload ( figure ,   format )   {   window . open ( figure . imageObj . src ) ;   }   var   fig   =     mpl . figure ( id ,   ws _ proxy ,   ondownload ,   element . ( 0 ) ) ;   / /   Call   onopen     -   mpl     ,         assuming   ' ve   passed     a   real   / /   web   socket       closed ,       websocket - > open   comm   proxy .   ws _ proxy . onopen ( ) ;   fig . parent _ element   =   element . ( 0 ) ;   fig . cell _ info   =   mpl . find _ output _ cell ( \" < div   id = ' \"   +   id   +   \" ' > < / div > \" ) ;     ( ! fig . cell _ info )   {   console . error ( \" Failed     find   cell     figure \" ,   id ,   fig ) ;   return ;   }   var   output _ index   =   fig . cell _ info [ 2 ]   var   cell   =   fig . cell _ info [ 0 ] ;   } ;   mpl . figure . prototype . handle _ close   =   function ( fig ,   msg )   {   var   width   =   fig . canvas . width / mpl . ratio   fig . root . unbind ( ' remove ' )   / /   Update     output   cell         data       current   canvas .   fig . push _ _ output ( ) ;   var   dataURL   =   fig . canvas . toDataURL ( ) ;   / /   Re - enable     keyboard   manager     IPython   -       line ,     FF ,   / /     notebook   keyboard   shortcuts   fail .   IPython . keyboard _ manager . enable ( )   $ ( fig . parent _ element ) . html ( ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ) ;   fig . close _ ws ( fig ,   msg ) ;   }   mpl . figure . prototype . close _ ws   =   function ( fig ,   msg ) {   fig . send _ message ( ' closing ' ,   msg ) ;   / /   fig . ws . close ( )   }   mpl . figure . prototype . push _ _ output   =   function ( remove _ interactive )   {   / /   Turn     data       canvas     data       output   cell .   var   width   =   . canvas . width / mpl . ratio   var   dataURL   =   . canvas . toDataURL ( ) ;   . cell _ info [ 1 ] [ ' text / html ' ]   =   ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Tell   IPython       notebook   contents     change .   IPython . notebook . set _ dirty ( true ) ;   . send _ message ( \" ack \" ,   { } ) ;   var   fig   =   ;   / /   Wait   a   ,     push       image       DOM     / /         saved   nicely   (     nice     debounce   ) .   setTimeout ( function   ( )   {   fig . push _ _ output ( )   } ,   1000 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items ) {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   continue ;   } ;   var   button   =   $ ( ' < button   class = \" btn   btn - default \"   href = \" # \"   title = \" '   +     +   ' \" > < i   class = \" fa   '   +   image   +   '   fa - lg \" > < / i > < / button > ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   nav _ element . append ( button ) ;   }   / /   Add     status   bar .   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \"   style = \" text - align : ;   float :   ; \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   / /   Add     close   button       window .   var   buttongrp   =   $ ( ' < div   class = \" btn - group   inline   pull - \" > < / div > ' ) ;   var   button   =   $ ( ' < button   class = \" btn   btn - mini   btn - primary \"   href = \" # \"   title = \" Stop   Interaction \" > < i   class = \" fa   fa - power -   icon - remove   icon - large \" > < / i > < / button > ' ) ;   button . click ( function   ( evt )   {   fig . handle _ close ( fig ,   { } ) ;   }   ) ;   button . mouseover ( ' Stop   Interaction ' ,   toolbar _ mouse _ event ) ;   buttongrp . append ( button ) ;   var   titlebar   =   . root . find ( $ ( ' . ui - dialog - titlebar ' ) ) ;   titlebar . prepend ( buttongrp ) ;   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( el ) {   var   fig   =     el . ( \" remove \" ,   function ( ) {   fig . close _ ws ( fig ,   { } ) ;   } ) ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( el ) {   / /       important     make     div   ' focusable   el . attr ( ' tabindex ' ,   0 )   / /   reach       IPython         keyboard   manager     turn   ' s     / /         div     focus   / /   location     version   3     ( IPython . notebook . keyboard _ manager )   {   IPython . notebook . keyboard _ manager . register _ events ( el ) ;   }     {   / /   location     version   2   IPython . keyboard _ manager . register _ events ( el ) ;   }   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   var   manager   =   IPython . notebook . keyboard _ manager ;     ( ! manager )   manager   =   IPython . keyboard _ manager ;   / /   Check     shift + enter     ( event . shiftKey   &&   event .   = =   13 )   {   . canvas _ div . blur ( ) ;   event . shiftKey   =   false ;   / /   Send   a   \" J \"           cell   event .   =   74 ;   event . keyCode   =   74 ;   manager . command _ mode ( ) ;   manager . handle _ keydown ( event ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   fig . ondownload ( fig ,   null ) ;   }   mpl . find _ output _ cell   =   function ( html _ output )   {   / /   Return     cell     output   element         found   * uniquely *       notebook .   / /   Note   -       a   bit   hacky ,               \" notebook _ saving . Notebook \"   / /   IPython   event     triggered         cells       serialised ,       / /     purposes   ( turning     active   figure     a   static   ) ,       late .   var   cells   =   IPython . notebook . _ cells ( ) ;   var   ncells   =   cells . length ;     ( var   i = 0 ;   i < ncells ;   i ++ )   {   var   cell   =   cells [ i ] ;     ( cell . cell _ type   = = =   ' code ' ) {     ( var   j = 0 ;   j < cell . output _ area . outputs . length ;   j ++ )   {   var   data   =   cell . output _ area . outputs [ j ] ;     ( data . data )   {   / /   IPython   > =   3   moved   mimebundle     data   attribute     output   data   =   data . data ;   }     ( data [ ' text / html ' ]   = =   html _ output )   {   return   [ cell ,   data ,   j ] ;   }   }   }   }   }   / /   Register     function     deals       matplotlib   target / channel .   / /   The   kernel       null       page       refreshed .     ( IPython . notebook . kernel   ! =   null )   {   IPython . notebook . kernel . comm _ manager . register _ target ( ' matplotlib ' ,   mpl . mpl _ figure _ comm ) ;   }   Out [ 7 ] :   Text ( 0.5 , 0 , ' 销量 ' )   In   [ 62 ] :   import   pandas     pd   import   numpy     np   fig   ,   ax   =   plt   .   subplots   ( )   x   =   [   ' 北美洲 '   ,   ' 南美洲 '   ,   ' 欧洲 '   ,   ' 亚洲 '   ,   ' 大洋洲 '   ,   ' 非洲 '   ,   ' 南极洲 '   ]   y _   =   [   1500   ,   500   ,   1500   ,   2000   ,   1000   ,   500   ,   1   ]   data   =   pd   .   Series   (   y _   ,   index   =   x   )   data   .   plot   .   barh   (   ax   =   ax   )   var   element   =   $ ( ' # 71470a0c - a86f - 4b8b - abbd - ace171957c75 ' ) ;   / *   Put     inside     global   mpl   namespace   * /   window . mpl   =   { } ;   mpl . _ websocket _ type   =   function ( )   {     ( typeof ( WebSocket )   ! = =   ' undefined ' )   {   return   WebSocket ;   }       ( typeof ( MozWebSocket )   ! = =   ' undefined ' )   {   return   MozWebSocket ;   }     {   alert ( ' Your   browser         WebSocket   support . '   +   ' Please     Chrome ,   Safari     Firefox   ≥   6 .   '   +   ' Firefox   4     5       supported       '   +   '     enable   WebSockets     : config . ' ) ;   } ;   }   mpl . figure   =   function ( figure _ id ,   websocket ,   ondownload ,   parent _ element )   {   . id   =   figure _ id ;   . ws   =   websocket ;   . supports _ binary   =   ( . ws . binaryType   ! =   undefined ) ;     ( ! . supports _ binary )   {   var   warnings   =   document . getElementById ( \" mpl - warnings \" ) ;     ( warnings )   {   warnings . style . display   =   ' block ' ;   warnings . textContent   =   (   \" This   browser       support   binary   websocket   messages .   \"   +   \" Performance       slow . \" ) ;   }   }   . imageObj   =     Image ( ) ;   . context   =   undefined ;   . message   =   undefined ;   . canvas   =   undefined ;   . rubberband _ canvas   =   undefined ;   . rubberband _ context   =   undefined ;   . format _ dropdown   =   undefined ;   . image _ mode   =   ' full ' ;   . root   =   $ ( ' < div / > ' ) ;   ._ root _ extra _ style ( . root )   . root . attr ( ' style ' ,   ' display :   inline - block ' ) ;   $ ( parent _ element ) . append ( . root ) ;   ._ init _ header ( ) ;   ._ init _ canvas ( ) ;   ._ init _ toolbar ( ) ;   var   fig   =   ;   . waiting   =   false ;   . ws . onopen   =   function   ( )   {   fig . send _ message ( \" supports _ binary \" ,   { :   fig . supports _ binary } ) ;   fig . send _ message ( \" send _ image _ mode \" ,   { } ) ;     ( mpl . ratio   ! =   1 )   {   fig . send _ message ( \" set _ dpi _ ratio \" ,   { ' dpi _ ratio ' :   mpl . ratio } ) ;   }   fig . send _ message ( \" refresh \" ,   { } ) ;   }   . imageObj . onload   =   function ( )   {     ( fig . image _ mode   = =   ' full ' )   {   / /   Full   images       transparency   (   diff   images   / /       ) ,           clear     canvas       / /         ghosting .   fig . context . clearRect ( 0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   }   fig . context . drawImage ( fig . imageObj ,   0 ,   0 ) ;   } ;   . imageObj . onunload   =   function ( )   {   fig . ws . close ( ) ;   }   . ws . onmessage   =   ._ make _ _ message _ function ( ) ;   . ondownload   =   ondownload ;   }   mpl . figure . prototype ._ init _ header   =   function ( )   {   var   titlebar   =   $ (   ' < div   class = \" ui - dialog - titlebar   ui - widget - header   ui - corner -   '   +   ' ui - helper - clearfix \" / > ' ) ;   var   titletext   =   $ (   ' < div   class = \" ui - dialog - title \"   style = \" width :   100% ;   '   +   ' text - align :   center ;   padding :   3px ; \" / > ' ) ;   titlebar . append ( titletext )   . root . append ( titlebar ) ;   . header   =   titletext [ 0 ] ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ init _ canvas   =   function ( )   {   var   fig   =   ;   var   canvas _ div   =   $ ( ' < div / > ' ) ;   canvas _ div . attr ( ' style ' ,   ' position :   relative ;   clear :   ;   outline :   0 ' ) ;   function   canvas _ keyboard _ event ( event )   {   return   fig . key _ event ( event ,   event [ ' data ' ] ) ;   }   canvas _ div . keydown ( ' key _ press ' ,   canvas _ keyboard _ event ) ;   canvas _ div . keyup ( ' key _ release ' ,   canvas _ keyboard _ event ) ;   . canvas _ div   =   canvas _ div   ._ canvas _ extra _ style ( canvas _ div )   . root . append ( canvas _ div ) ;   var   canvas   =   $ ( ' < canvas / > ' ) ;   canvas . addClass ( ' mpl - canvas ' ) ;   canvas . attr ( ' style ' ,   \" left :   0 ;   top :   0 ;   z - index :   0 ;   outline :   0 \" )   . canvas   =   canvas [ 0 ] ;   . context   =   canvas [ 0 ] . getContext ( \" 2d \" ) ;   var   backingStore   =   . context . backingStorePixelRatio   | |   . context . webkitBackingStorePixelRatio   | |   . context . mozBackingStorePixelRatio   | |   . context . msBackingStorePixelRatio   | |   . context . oBackingStorePixelRatio   | |   . context . backingStorePixelRatio   | |   1 ;   mpl . ratio   =   ( window . devicePixelRatio   | |   1 )   /   backingStore ;   var   rubberband   =   $ ( ' < canvas / > ' ) ;   rubberband . attr ( ' style ' ,   \" position :   absolute ;   left :   0 ;   top :   0 ;   z - index :   1 ; \" )   var   pass _ mouse _ events   =   true ;   canvas _ div . resizable ( {   start :   function ( event ,   ui )   {   pass _ mouse _ events   =   false ;   } ,   resize :   function ( event ,   ui )   {   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   stop :   function ( event ,   ui )   {   pass _ mouse _ events   =   true ;   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   } ) ;   function   mouse _ event _ fn ( event )   {     ( pass _ mouse _ events )   return   fig . mouse _ event ( event ,   event [ ' data ' ] ) ;   }   rubberband . mousedown ( ' button _ press ' ,   mouse _ event _ fn ) ;   rubberband . mouseup ( ' button _ release ' ,   mouse _ event _ fn ) ;   / /   Throttle   sequential   mouse   events     1     20ms .   rubberband . mousemove ( ' motion _ notify ' ,   mouse _ event _ fn ) ;   rubberband . mouseenter ( ' figure _ enter ' ,   mouse _ event _ fn ) ;   rubberband . mouseleave ( ' figure _ leave ' ,   mouse _ event _ fn ) ;   canvas _ div . ( \" wheel \" ,   function   ( event )   {   event   =   event . originalEvent ;   event [ ' data ' ]   =   ' scroll '     ( event . deltaY   <   0 )   {   event . step   =   1 ;   }     {   event . step   =   - 1 ;   }   mouse _ event _ fn ( event ) ;   } ) ;   canvas _ div . append ( canvas ) ;   canvas _ div . append ( rubberband ) ;   . rubberband   =   rubberband ;   . rubberband _ canvas   =   rubberband [ 0 ] ;   . rubberband _ context   =   rubberband [ 0 ] . getContext ( \" 2d \" ) ;   . rubberband _ context . strokeStyle   =   \" # 000000 \" ;   ._ resize _ canvas   =   function ( width ,   height )   {   / /   Keep     size       canvas ,   canvas   container ,     rubber   band   / /   canvas     synch .   canvas _ div . css ( ' width ' ,   width )   canvas _ div . css ( ' height ' ,   height )   canvas . attr ( ' width ' ,   width   *   mpl . ratio ) ;   canvas . attr ( ' height ' ,   height   *   mpl . ratio ) ;   canvas . attr ( ' style ' ,   ' width :   '   +   width   +   ' px ;   height :   '   +   height   +   ' px ; ' ) ;   rubberband . attr ( ' width ' ,   width ) ;   rubberband . attr ( ' height ' ,   height ) ;   }   / /   Set     figure       initial   600x600px ,       subsequently     updated   / /       draw .   ._ resize _ canvas ( 600 ,   600 ) ;   / /   Disable     mouse   context   menu .   $ ( . rubberband _ canvas ) . bind ( \" contextmenu \" , function ( e ) {   return   false ;   } ) ;   function   set _ focus   ( )   {   canvas . focus ( ) ;   canvas _ div . focus ( ) ;   }   window . setTimeout ( set _ focus ,   100 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items )   {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   / /   put   a   spacer     .   continue ;   }   var   button   =   $ ( ' < button / > ' ) ;   button . addClass ( ' ui - button   ui - widget   ui - state - default   ui - corner -   '   +   ' ui - button - icon - ' ) ;   button . attr ( ' role ' ,   ' button ' ) ;   button . attr ( ' aria - disabled ' ,   ' false ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   var   icon _ img   =   $ ( ' < span / > ' ) ;   icon _ img . addClass ( ' ui - button - icon - primary   ui - icon ' ) ;   icon _ img . addClass ( image ) ;   icon _ img . addClass ( ' ui - corner - ' ) ;   var   tooltip _ span   =   $ ( ' < span / > ' ) ;   tooltip _ span . addClass ( ' ui - button - text ' ) ;   tooltip _ span . html ( tooltip ) ;   button . append ( icon _ img ) ;   button . append ( tooltip _ span ) ;   nav _ element . append ( button ) ;   }   var   fmt _ picker _ span   =   $ ( ' < span / > ' ) ;   var   fmt _ picker   =   $ ( ' < select / > ' ) ;   fmt _ picker . addClass ( ' mpl - toolbar - option   ui - widget   ui - widget - content ' ) ;   fmt _ picker _ span . append ( fmt _ picker ) ;   nav _ element . append ( fmt _ picker _ span ) ;   . format _ dropdown   =   fmt _ picker [ 0 ] ;     ( var   ind     mpl . extensions )   {   var   fmt   =   mpl . extensions [ ind ] ;   var   option   =   $ (   ' < option / > ' ,   { selected :   fmt   = = =   mpl . default _ extension } ) . html ( fmt ) ;   fmt _ picker . append ( option )   }   / /   Add   hover   states       ui - buttons   $ (   \" . ui - button \"   ) . hover (   function ( )   {   $ ( ) . addClass ( \" ui - state - hover \" ) ; } ,   function ( )   {   $ ( ) . removeClass ( \" ui - state - hover \" ) ; }   ) ;   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   }   mpl . figure . prototype . request _ resize   =   function ( x _ pixels ,   y _ pixels )   {   / /   Request   matplotlib     resize     figure .   Matplotlib       trigger   a   resize       client ,   / /         turn   request   a   refresh       image .   . send _ message ( ' resize ' ,   { ' width ' :   x _ pixels ,   ' height ' :   y _ pixels } ) ;   }   mpl . figure . prototype . send _ message   =   function ( type ,   properties )   {   properties [ ' type ' ]   =   type ;   properties [ ' figure _ id ' ]   =   . id ;   . ws . send ( JSON . stringify ( properties ) ) ;   }   mpl . figure . prototype . send _ draw _ message   =   function ( )   {     ( ! . waiting )   {   . waiting   =   true ;   . ws . send ( JSON . stringify ( { type :   \" draw \" ,   figure _ id :   . id } ) ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   var   format _ dropdown   =   fig . format _ dropdown ;   var   format   =   format _ dropdown . options [ format _ dropdown . selectedIndex ] . ;   fig . ondownload ( fig ,   format ) ;   }   mpl . figure . prototype . handle _ resize   =   function ( fig ,   msg )   {   var   size   =   msg [ ' size ' ] ;     ( size [ 0 ]   ! =   fig . canvas . width   | |   size [ 1 ]   ! =   fig . canvas . height )   {   fig ._ resize _ canvas ( size [ 0 ] ,   size [ 1 ] ) ;   fig . send _ message ( \" refresh \" ,   { } ) ;   } ;   }   mpl . figure . prototype . handle _ rubberband   =   function ( fig ,   msg )   {   var   x0   =   msg [ ' x0 ' ]   /   mpl . ratio ;   var   y0   =   ( fig . canvas . height   -   msg [ ' y0 ' ] )   /   mpl . ratio ;   var   x1   =   msg [ ' x1 ' ]   /   mpl . ratio ;   var   y1   =   ( fig . canvas . height   -   msg [ ' y1 ' ] )   /   mpl . ratio ;   x0   =   Math . floor ( x0 )   +   0.5 ;   y0   =   Math . floor ( y0 )   +   0.5 ;   x1   =   Math . floor ( x1 )   +   0.5 ;   y1   =   Math . floor ( y1 )   +   0.5 ;   var   min _ x   =   Math . min ( x0 ,   x1 ) ;   var   min _ y   =   Math . min ( y0 ,   y1 ) ;   var   width   =   Math . abs ( x1   -   x0 ) ;   var   height   =   Math . abs ( y1   -   y0 ) ;   fig . rubberband _ context . clearRect (   0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   fig . rubberband _ context . strokeRect ( min _ x ,   min _ y ,   width ,   height ) ;   }   mpl . figure . prototype . handle _ figure _ label   =   function ( fig ,   msg )   {   / /   Updates     figure   title .   fig . header . textContent   =   msg [ ' label ' ] ;   }   mpl . figure . prototype . handle _ cursor   =   function ( fig ,   msg )   {   var   cursor   =   msg [ ' cursor ' ] ;   switch ( cursor )   {   case   0 :   cursor   =   ' pointer ' ;   break ;   case   1 :   cursor   =   ' default ' ;   break ;   case   2 :   cursor   =   ' crosshair ' ;   break ;   case   3 :   cursor   =   ' move ' ;   break ;   }   fig . rubberband _ canvas . style . cursor   =   cursor ;   }   mpl . figure . prototype . handle _ message   =   function ( fig ,   msg )   {   fig . message . textContent   =   msg [ ' message ' ] ;   }   mpl . figure . prototype . handle _ draw   =   function ( fig ,   msg )   {   / /   Request     server     send     a     figure .   fig . send _ draw _ message ( ) ;   }   mpl . figure . prototype . handle _ image _ mode   =   function ( fig ,   msg )   {   fig . image _ mode   =   msg [ ' mode ' ] ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Called       canvas     updated .   . send _ message ( \" ack \" ,   { } ) ;   }   / /   A   function     construct   a   web   socket   function     onmessage   handling .   / /   Called       figure   constructor .   mpl . figure . prototype ._ make _ _ message _ function   =   function ( fig )   {   return   function   socket _ _ message ( evt )   {     ( evt . data   instanceof   Blob )   {   / *   FIXME :   We     \" Resource   interpreted     Image     *   transferred     MIME   type   text / plain : \"   errors     *   Chrome .   But       set     MIME   type   It   doesn ' t     *       part       websocket   stream   * /   evt . data . type   =   \" image / png \" ;   / *   Free     memory       previous   frames   * /     ( fig . imageObj . src )   {   ( window . URL   | |   window . webkitURL ) . revokeObjectURL (   fig . imageObj . src ) ;   }   fig . imageObj . src   =   ( window . URL   | |   window . webkitURL ) . createObjectURL (   evt . data ) ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }       ( typeof   evt . data   = = =   ' string '   &&   evt . data . slice ( 0 ,   21 )   = =   \" data : image / png ; base64 \" )   {   fig . imageObj . src   =   evt . data ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }   var   msg   =   JSON . parse ( evt . data ) ;   var   msg _ type   =   msg [ ' type ' ] ;   / /   Call     \" handle _ { type } \"   callback ,     takes   / /     figure     JSON   message         arguments .     {   var   callback   =   fig [ \" handle _ \"   +   msg _ type ] ;   }   catch   ( e )   {   console . log ( \" No   handler       ' \"   +   msg _ type   +   \" '   message   type :   \" ,   msg ) ;   return ;   }     ( callback )   {     {   / /   console . log ( \" Handling   ' \"   +   msg _ type   +   \" '   message :   \" ,   msg ) ;   callback ( fig ,   msg ) ;   }   catch   ( e )   {   console . log ( \" Exception   inside     ' handler _ \"   +   msg _ type   +   \" '   callback : \" ,   e ,   e . stack ,   msg ) ;   }   }   } ;   }   / /     http : / / stackoverflow . / questions / 1114465 / - mouse - location - - canvas   mpl . findpos   =   function ( e )   {   / /   section       http : / / www . quirksmode . org / js / events _ properties . html   var   targ ;     ( ! e )   e   =   window . event ;     ( e . target )   targ   =   e . target ;       ( e . srcElement )   targ   =   e . srcElement ;     ( targ . nodeType   = =   3 )   / /   defeat   Safari   bug   targ   =   targ . parentNode ;   / /   jQuery   normalizes     pageX     pageY   / /   pageX , Y       mouse   positions   relative       document   / /   offset ( )   returns     position       element   relative       document   var   x   =   e . pageX   -   $ ( targ ) . offset ( ) . left ;   var   y   =   e . pageY   -   $ ( targ ) . offset ( ) . top ;   return   { \" x \" :   x ,   \" y \" :   y } ;   } ;   / *   *   return   a   copy       object       - object   keys   *           avoid   circular   references   *   http : / / stackoverflow . / a / 24161582 / 3208463   * /   function   simpleKeys   ( original )   {   return   Object . keys ( original ) . reduce ( function   ( obj ,   key )   {     ( typeof   original [ key ]   ! = =   ' object ' )   obj [ key ]   =   original [ key ]   return   obj ;   } ,   { } ) ;   }   mpl . figure . prototype . mouse _ event   =   function ( event ,   )   {   var   canvas _ pos   =   mpl . findpos ( event )     (   = = =   ' button _ press ' )   {   . canvas . focus ( ) ;   . canvas _ div . focus ( ) ;   }   var   x   =   canvas _ pos . x   *   mpl . ratio ;   var   y   =   canvas _ pos . y   *   mpl . ratio ;   . send _ message ( ,   { x :   x ,   y :   y ,   button :   event . button ,   step :   event . step ,   guiEvent :   simpleKeys ( event ) } ) ;   / *   This   prevents     web   browser     automatically   changing     *     text   insertion   cursor       button     pressed .   We     *     control         cursor   setting   manually       *   ' cursor '   event     matplotlib   * /   event . preventDefault ( ) ;   return   false ;   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   / /   Handle     extra   behaviour       a   key   event   }   mpl . figure . prototype . key _ event   =   function ( event ,   )   {   / /   Prevent   repeat   events     (   = =   ' key _ press ' )   {     ( event .   = = =   ._ key )   return ;     ._ key   =   event . ;   }     (   = =   ' key _ release ' )   ._ key   =   null ;   var     =   ' ' ;     ( event . ctrlKey   &&   event .   ! =   17 )     + =   \" ctrl + \" ;     ( event . altKey   &&   event .   ! =   18 )     + =   \" alt + \" ;     ( event . shiftKey   &&   event .   ! =   16 )     + =   \" shift + \" ;     + =   ' k ' ;     + =   event . . toString ( ) ;   ._ key _ event _ extra ( event ,   ) ;   . send _ message ( ,   { key :   ,   guiEvent :   simpleKeys ( event ) } ) ;   return   false ;   }   mpl . figure . prototype . toolbar _ button _ onclick   =   function ( )   {     (   = =   ' download ' )   {   . handle _ save ( ,   null ) ;   }     {   . send _ message ( \" toolbar _ button \" ,   { :   } ) ;   }   } ;   mpl . figure . prototype . toolbar _ button _ onmouseover   =   function ( tooltip )   {   . message . textContent   =   tooltip ;   } ;   mpl . toolbar _ items   =   [ [ \" Home \" ,   \" Reset   original   view \" ,   \" fa   fa - home   icon - home \" ,   \" home \" ] ,   [ \" Back \" ,   \" Back     previous   view \" ,   \" fa   fa - arrow - left   icon - arrow - left \" ,   \" back \" ] ,   [ \" Forward \" ,   \" Forward       view \" ,   \" fa   fa - arrow -   icon - arrow - \" ,   \" forward \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Pan \" ,   \" Pan   axes     left   mouse ,   zoom     \" ,   \" fa   fa - arrows   icon - move \" ,   \" pan \" ] ,   [ \" Zoom \" ,   \" Zoom     rectangle \" ,   \" fa   fa - square - o   icon - check - empty \" ,   \" zoom \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Download \" ,   \" Download   plot \" ,   \" fa   fa - floppy - o   icon - save \" ,   \" download \" ] ] ;   mpl . extensions   =   [ \" eps \" ,   \" jpeg \" ,   \" pdf \" ,   \" png \" ,   \" ps \" ,   \" raw \" ,   \" svg \" ,   \" tif \" ] ;   mpl . default _ extension   =   \" png \" ; var   comm _ websocket _ adapter   =   function ( comm )   {   / /   Create   a   \" websocket \" -   object     calls       IPython   comm   / /   object         methods .   Currently       a     binary   / /   socket ,             room     performance   tuning .   var   ws   =   { } ;   ws . close   =   function ( )   {   comm . close ( )   } ;   ws . send   =   function ( m )   {   / / console . log ( ' sending ' ,   m ) ;   comm . send ( m ) ;   } ;   / /   Register     callback     _ msg .   comm . _ msg ( function ( msg )   {   / / console . log ( ' receiving ' ,   msg [ ' content ' ] [ ' data ' ] ,   msg ) ;   / /   Pass     mpl   event       overriden   (   mpl )   onmessage   function .   ws . onmessage ( msg [ ' content ' ] [ ' data ' ] )   } ) ;   return   ws ;   }   mpl . mpl _ figure _ comm   =   function ( comm ,   msg )   {   / /   This       function       called       mpl   process   / /   starts -     IPython   Comm       \" matplotlib \"   channel .   var   id   =   msg . content . data . id ;   / /   Get   hold       div   created       display   call       Comm   / /   socket     opened     Python .   var   element   =   $ ( \" # \"   +   id ) ;   var   ws _ proxy   =   comm _ websocket _ adapter ( comm )   function   ondownload ( figure ,   format )   {   window . open ( figure . imageObj . src ) ;   }   var   fig   =     mpl . figure ( id ,   ws _ proxy ,   ondownload ,   element . ( 0 ) ) ;   / /   Call   onopen     -   mpl     ,         assuming   ' ve   passed     a   real   / /   web   socket       closed ,       websocket - > open   comm   proxy .   ws _ proxy . onopen ( ) ;   fig . parent _ element   =   element . ( 0 ) ;   fig . cell _ info   =   mpl . find _ output _ cell ( \" < div   id = ' \"   +   id   +   \" ' > < / div > \" ) ;     ( ! fig . cell _ info )   {   console . error ( \" Failed     find   cell     figure \" ,   id ,   fig ) ;   return ;   }   var   output _ index   =   fig . cell _ info [ 2 ]   var   cell   =   fig . cell _ info [ 0 ] ;   } ;   mpl . figure . prototype . handle _ close   =   function ( fig ,   msg )   {   var   width   =   fig . canvas . width / mpl . ratio   fig . root . unbind ( ' remove ' )   / /   Update     output   cell         data       current   canvas .   fig . push _ _ output ( ) ;   var   dataURL   =   fig . canvas . toDataURL ( ) ;   / /   Re - enable     keyboard   manager     IPython   -       line ,     FF ,   / /     notebook   keyboard   shortcuts   fail .   IPython . keyboard _ manager . enable ( )   $ ( fig . parent _ element ) . html ( ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ) ;   fig . close _ ws ( fig ,   msg ) ;   }   mpl . figure . prototype . close _ ws   =   function ( fig ,   msg ) {   fig . send _ message ( ' closing ' ,   msg ) ;   / /   fig . ws . close ( )   }   mpl . figure . prototype . push _ _ output   =   function ( remove _ interactive )   {   / /   Turn     data       canvas     data       output   cell .   var   width   =   . canvas . width / mpl . ratio   var   dataURL   =   . canvas . toDataURL ( ) ;   . cell _ info [ 1 ] [ ' text / html ' ]   =   ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Tell   IPython       notebook   contents     change .   IPython . notebook . set _ dirty ( true ) ;   . send _ message ( \" ack \" ,   { } ) ;   var   fig   =   ;   / /   Wait   a   ,     push       image       DOM     / /         saved   nicely   (     nice     debounce   ) .   setTimeout ( function   ( )   {   fig . push _ _ output ( )   } ,   1000 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items ) {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   continue ;   } ;   var   button   =   $ ( ' < button   class = \" btn   btn - default \"   href = \" # \"   title = \" '   +     +   ' \" > < i   class = \" fa   '   +   image   +   '   fa - lg \" > < / i > < / button > ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   nav _ element . append ( button ) ;   }   / /   Add     status   bar .   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \"   style = \" text - align : ;   float :   ; \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   / /   Add     close   button       window .   var   buttongrp   =   $ ( ' < div   class = \" btn - group   inline   pull - \" > < / div > ' ) ;   var   button   =   $ ( ' < button   class = \" btn   btn - mini   btn - primary \"   href = \" # \"   title = \" Stop   Interaction \" > < i   class = \" fa   fa - power -   icon - remove   icon - large \" > < / i > < / button > ' ) ;   button . click ( function   ( evt )   {   fig . handle _ close ( fig ,   { } ) ;   }   ) ;   button . mouseover ( ' Stop   Interaction ' ,   toolbar _ mouse _ event ) ;   buttongrp . append ( button ) ;   var   titlebar   =   . root . find ( $ ( ' . ui - dialog - titlebar ' ) ) ;   titlebar . prepend ( buttongrp ) ;   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( el ) {   var   fig   =     el . ( \" remove \" ,   function ( ) {   fig . close _ ws ( fig ,   { } ) ;   } ) ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( el ) {   / /       important     make     div   ' focusable   el . attr ( ' tabindex ' ,   0 )   / /   reach       IPython         keyboard   manager     turn   ' s     / /         div     focus   / /   location     version   3     ( IPython . notebook . keyboard _ manager )   {   IPython . notebook . keyboard _ manager . register _ events ( el ) ;   }     {   / /   location     version   2   IPython . keyboard _ manager . register _ events ( el ) ;   }   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   var   manager   =   IPython . notebook . keyboard _ manager ;     ( ! manager )   manager   =   IPython . keyboard _ manager ;   / /   Check     shift + enter     ( event . shiftKey   &&   event .   = =   13 )   {   . canvas _ div . blur ( ) ;   event . shiftKey   =   false ;   / /   Send   a   \" J \"           cell   event .   =   74 ;   event . keyCode   =   74 ;   manager . command _ mode ( ) ;   manager . handle _ keydown ( event ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   fig . ondownload ( fig ,   null ) ;   }   mpl . find _ output _ cell   =   function ( html _ output )   {   / /   Return     cell     output   element         found   * uniquely *       notebook .   / /   Note   -       a   bit   hacky ,               \" notebook _ saving . Notebook \"   / /   IPython   event     triggered         cells       serialised ,       / /     purposes   ( turning     active   figure     a   static   ) ,       late .   var   cells   =   IPython . notebook . _ cells ( ) ;   var   ncells   =   cells . length ;     ( var   i = 0 ;   i < ncells ;   i ++ )   {   var   cell   =   cells [ i ] ;     ( cell . cell _ type   = = =   ' code ' ) {     ( var   j = 0 ;   j < cell . output _ area . outputs . length ;   j ++ )   {   var   data   =   cell . output _ area . outputs [ j ] ;     ( data . data )   {   / /   IPython   > =   3   moved   mimebundle     data   attribute     output   data   =   data . data ;   }     ( data [ ' text / html ' ]   = =   html _ output )   {   return   [ cell ,   data ,   j ] ;   }   }   }   }   }   / /   Register     function     deals       matplotlib   target / channel .   / /   The   kernel       null       page       refreshed .     ( IPython . notebook . kernel   ! =   null )   {   IPython . notebook . kernel . comm _ manager . register _ target ( ' matplotlib ' ,   mpl . mpl _ figure _ comm ) ;   }   Out [ 62 ] :   < matplotlib . axes ._ subplots . AxesSubplot     0x237ffb46048 >   直方图   直方图 用于 定量 数据 分组 显示 需求 。 直方图 长方形 之间 间隔 。   In   [ 8 ] :   x   =   [   5   ,   29   ,   56   ,   17   ,   3   ]   fig   ,   ax   =   plt   .   subplots   ( )   bins   =   [   0   ,   200   ,   400   ,   600   ,   800   ,   1000   ]   n   ,   bins   ,   patches   =   ax   .   hist   (   bins   [ :   -   1   ] ,   bins   =   bins   ,   weights   =   x   )   ax   .   set _ xlabel   (   ' 得分 '   )   ax   .   set _ ylabel   (   ' 频数 '   )   plt   .   title   (   ' 游戏 得分 '   )   plt   .   show   ( )   var   element   =   $ ( ' # 8c83aafe - 71d8 - 4048 - 8aaf - 9a2f96ba94a0 ' ) ;   / *   Put     inside     global   mpl   namespace   * /   window . mpl   =   { } ;   mpl . _ websocket _ type   =   function ( )   {     ( typeof ( WebSocket )   ! = =   ' undefined ' )   {   return   WebSocket ;   }       ( typeof ( MozWebSocket )   ! = =   ' undefined ' )   {   return   MozWebSocket ;   }     {   alert ( ' Your   browser         WebSocket   support . '   +   ' Please     Chrome ,   Safari     Firefox   ≥   6 .   '   +   ' Firefox   4     5       supported       '   +   '     enable   WebSockets     : config . ' ) ;   } ;   }   mpl . figure   =   function ( figure _ id ,   websocket ,   ondownload ,   parent _ element )   {   . id   =   figure _ id ;   . ws   =   websocket ;   . supports _ binary   =   ( . ws . binaryType   ! =   undefined ) ;     ( ! . supports _ binary )   {   var   warnings   =   document . getElementById ( \" mpl - warnings \" ) ;     ( warnings )   {   warnings . style . display   =   ' block ' ;   warnings . textContent   =   (   \" This   browser       support   binary   websocket   messages .   \"   +   \" Performance       slow . \" ) ;   }   }   . imageObj   =     Image ( ) ;   . context   =   undefined ;   . message   =   undefined ;   . canvas   =   undefined ;   . rubberband _ canvas   =   undefined ;   . rubberband _ context   =   undefined ;   . format _ dropdown   =   undefined ;   . image _ mode   =   ' full ' ;   . root   =   $ ( ' < div / > ' ) ;   ._ root _ extra _ style ( . root )   . root . attr ( ' style ' ,   ' display :   inline - block ' ) ;   $ ( parent _ element ) . append ( . root ) ;   ._ init _ header ( ) ;   ._ init _ canvas ( ) ;   ._ init _ toolbar ( ) ;   var   fig   =   ;   . waiting   =   false ;   . ws . onopen   =   function   ( )   {   fig . send _ message ( \" supports _ binary \" ,   { :   fig . supports _ binary } ) ;   fig . send _ message ( \" send _ image _ mode \" ,   { } ) ;     ( mpl . ratio   ! =   1 )   {   fig . send _ message ( \" set _ dpi _ ratio \" ,   { ' dpi _ ratio ' :   mpl . ratio } ) ;   }   fig . send _ message ( \" refresh \" ,   { } ) ;   }   . imageObj . onload   =   function ( )   {     ( fig . image _ mode   = =   ' full ' )   {   / /   Full   images       transparency   (   diff   images   / /       ) ,           clear     canvas       / /         ghosting .   fig . context . clearRect ( 0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   }   fig . context . drawImage ( fig . imageObj ,   0 ,   0 ) ;   } ;   . imageObj . onunload   =   function ( )   {   fig . ws . close ( ) ;   }   . ws . onmessage   =   ._ make _ _ message _ function ( ) ;   . ondownload   =   ondownload ;   }   mpl . figure . prototype ._ init _ header   =   function ( )   {   var   titlebar   =   $ (   ' < div   class = \" ui - dialog - titlebar   ui - widget - header   ui - corner -   '   +   ' ui - helper - clearfix \" / > ' ) ;   var   titletext   =   $ (   ' < div   class = \" ui - dialog - title \"   style = \" width :   100% ;   '   +   ' text - align :   center ;   padding :   3px ; \" / > ' ) ;   titlebar . append ( titletext )   . root . append ( titlebar ) ;   . header   =   titletext [ 0 ] ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ init _ canvas   =   function ( )   {   var   fig   =   ;   var   canvas _ div   =   $ ( ' < div / > ' ) ;   canvas _ div . attr ( ' style ' ,   ' position :   relative ;   clear :   ;   outline :   0 ' ) ;   function   canvas _ keyboard _ event ( event )   {   return   fig . key _ event ( event ,   event [ ' data ' ] ) ;   }   canvas _ div . keydown ( ' key _ press ' ,   canvas _ keyboard _ event ) ;   canvas _ div . keyup ( ' key _ release ' ,   canvas _ keyboard _ event ) ;   . canvas _ div   =   canvas _ div   ._ canvas _ extra _ style ( canvas _ div )   . root . append ( canvas _ div ) ;   var   canvas   =   $ ( ' < canvas / > ' ) ;   canvas . addClass ( ' mpl - canvas ' ) ;   canvas . attr ( ' style ' ,   \" left :   0 ;   top :   0 ;   z - index :   0 ;   outline :   0 \" )   . canvas   =   canvas [ 0 ] ;   . context   =   canvas [ 0 ] . getContext ( \" 2d \" ) ;   var   backingStore   =   . context . backingStorePixelRatio   | |   . context . webkitBackingStorePixelRatio   | |   . context . mozBackingStorePixelRatio   | |   . context . msBackingStorePixelRatio   | |   . context . oBackingStorePixelRatio   | |   . context . backingStorePixelRatio   | |   1 ;   mpl . ratio   =   ( window . devicePixelRatio   | |   1 )   /   backingStore ;   var   rubberband   =   $ ( ' < canvas / > ' ) ;   rubberband . attr ( ' style ' ,   \" position :   absolute ;   left :   0 ;   top :   0 ;   z - index :   1 ; \" )   var   pass _ mouse _ events   =   true ;   canvas _ div . resizable ( {   start :   function ( event ,   ui )   {   pass _ mouse _ events   =   false ;   } ,   resize :   function ( event ,   ui )   {   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   stop :   function ( event ,   ui )   {   pass _ mouse _ events   =   true ;   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   } ) ;   function   mouse _ event _ fn ( event )   {     ( pass _ mouse _ events )   return   fig . mouse _ event ( event ,   event [ ' data ' ] ) ;   }   rubberband . mousedown ( ' button _ press ' ,   mouse _ event _ fn ) ;   rubberband . mouseup ( ' button _ release ' ,   mouse _ event _ fn ) ;   / /   Throttle   sequential   mouse   events     1     20ms .   rubberband . mousemove ( ' motion _ notify ' ,   mouse _ event _ fn ) ;   rubberband . mouseenter ( ' figure _ enter ' ,   mouse _ event _ fn ) ;   rubberband . mouseleave ( ' figure _ leave ' ,   mouse _ event _ fn ) ;   canvas _ div . ( \" wheel \" ,   function   ( event )   {   event   =   event . originalEvent ;   event [ ' data ' ]   =   ' scroll '     ( event . deltaY   <   0 )   {   event . step   =   1 ;   }     {   event . step   =   - 1 ;   }   mouse _ event _ fn ( event ) ;   } ) ;   canvas _ div . append ( canvas ) ;   canvas _ div . append ( rubberband ) ;   . rubberband   =   rubberband ;   . rubberband _ canvas   =   rubberband [ 0 ] ;   . rubberband _ context   =   rubberband [ 0 ] . getContext ( \" 2d \" ) ;   . rubberband _ context . strokeStyle   =   \" # 000000 \" ;   ._ resize _ canvas   =   function ( width ,   height )   {   / /   Keep     size       canvas ,   canvas   container ,     rubber   band   / /   canvas     synch .   canvas _ div . css ( ' width ' ,   width )   canvas _ div . css ( ' height ' ,   height )   canvas . attr ( ' width ' ,   width   *   mpl . ratio ) ;   canvas . attr ( ' height ' ,   height   *   mpl . ratio ) ;   canvas . attr ( ' style ' ,   ' width :   '   +   width   +   ' px ;   height :   '   +   height   +   ' px ; ' ) ;   rubberband . attr ( ' width ' ,   width ) ;   rubberband . attr ( ' height ' ,   height ) ;   }   / /   Set     figure       initial   600x600px ,       subsequently     updated   / /       draw .   ._ resize _ canvas ( 600 ,   600 ) ;   / /   Disable     mouse   context   menu .   $ ( . rubberband _ canvas ) . bind ( \" contextmenu \" , function ( e ) {   return   false ;   } ) ;   function   set _ focus   ( )   {   canvas . focus ( ) ;   canvas _ div . focus ( ) ;   }   window . setTimeout ( set _ focus ,   100 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items )   {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   / /   put   a   spacer     .   continue ;   }   var   button   =   $ ( ' < button / > ' ) ;   button . addClass ( ' ui - button   ui - widget   ui - state - default   ui - corner -   '   +   ' ui - button - icon - ' ) ;   button . attr ( ' role ' ,   ' button ' ) ;   button . attr ( ' aria - disabled ' ,   ' false ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   var   icon _ img   =   $ ( ' < span / > ' ) ;   icon _ img . addClass ( ' ui - button - icon - primary   ui - icon ' ) ;   icon _ img . addClass ( image ) ;   icon _ img . addClass ( ' ui - corner - ' ) ;   var   tooltip _ span   =   $ ( ' < span / > ' ) ;   tooltip _ span . addClass ( ' ui - button - text ' ) ;   tooltip _ span . html ( tooltip ) ;   button . append ( icon _ img ) ;   button . append ( tooltip _ span ) ;   nav _ element . append ( button ) ;   }   var   fmt _ picker _ span   =   $ ( ' < span / > ' ) ;   var   fmt _ picker   =   $ ( ' < select / > ' ) ;   fmt _ picker . addClass ( ' mpl - toolbar - option   ui - widget   ui - widget - content ' ) ;   fmt _ picker _ span . append ( fmt _ picker ) ;   nav _ element . append ( fmt _ picker _ span ) ;   . format _ dropdown   =   fmt _ picker [ 0 ] ;     ( var   ind     mpl . extensions )   {   var   fmt   =   mpl . extensions [ ind ] ;   var   option   =   $ (   ' < option / > ' ,   { selected :   fmt   = = =   mpl . default _ extension } ) . html ( fmt ) ;   fmt _ picker . append ( option )   }   / /   Add   hover   states       ui - buttons   $ (   \" . ui - button \"   ) . hover (   function ( )   {   $ ( ) . addClass ( \" ui - state - hover \" ) ; } ,   function ( )   {   $ ( ) . removeClass ( \" ui - state - hover \" ) ; }   ) ;   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   }   mpl . figure . prototype . request _ resize   =   function ( x _ pixels ,   y _ pixels )   {   / /   Request   matplotlib     resize     figure .   Matplotlib       trigger   a   resize       client ,   / /         turn   request   a   refresh       image .   . send _ message ( ' resize ' ,   { ' width ' :   x _ pixels ,   ' height ' :   y _ pixels } ) ;   }   mpl . figure . prototype . send _ message   =   function ( type ,   properties )   {   properties [ ' type ' ]   =   type ;   properties [ ' figure _ id ' ]   =   . id ;   . ws . send ( JSON . stringify ( properties ) ) ;   }   mpl . figure . prototype . send _ draw _ message   =   function ( )   {     ( ! . waiting )   {   . waiting   =   true ;   . ws . send ( JSON . stringify ( { type :   \" draw \" ,   figure _ id :   . id } ) ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   var   format _ dropdown   =   fig . format _ dropdown ;   var   format   =   format _ dropdown . options [ format _ dropdown . selectedIndex ] . ;   fig . ondownload ( fig ,   format ) ;   }   mpl . figure . prototype . handle _ resize   =   function ( fig ,   msg )   {   var   size   =   msg [ ' size ' ] ;     ( size [ 0 ]   ! =   fig . canvas . width   | |   size [ 1 ]   ! =   fig . canvas . height )   {   fig ._ resize _ canvas ( size [ 0 ] ,   size [ 1 ] ) ;   fig . send _ message ( \" refresh \" ,   { } ) ;   } ;   }   mpl . figure . prototype . handle _ rubberband   =   function ( fig ,   msg )   {   var   x0   =   msg [ ' x0 ' ]   /   mpl . ratio ;   var   y0   =   ( fig . canvas . height   -   msg [ ' y0 ' ] )   /   mpl . ratio ;   var   x1   =   msg [ ' x1 ' ]   /   mpl . ratio ;   var   y1   =   ( fig . canvas . height   -   msg [ ' y1 ' ] )   /   mpl . ratio ;   x0   =   Math . floor ( x0 )   +   0.5 ;   y0   =   Math . floor ( y0 )   +   0.5 ;   x1   =   Math . floor ( x1 )   +   0.5 ;   y1   =   Math . floor ( y1 )   +   0.5 ;   var   min _ x   =   Math . min ( x0 ,   x1 ) ;   var   min _ y   =   Math . min ( y0 ,   y1 ) ;   var   width   =   Math . abs ( x1   -   x0 ) ;   var   height   =   Math . abs ( y1   -   y0 ) ;   fig . rubberband _ context . clearRect (   0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   fig . rubberband _ context . strokeRect ( min _ x ,   min _ y ,   width ,   height ) ;   }   mpl . figure . prototype . handle _ figure _ label   =   function ( fig ,   msg )   {   / /   Updates     figure   title .   fig . header . textContent   =   msg [ ' label ' ] ;   }   mpl . figure . prototype . handle _ cursor   =   function ( fig ,   msg )   {   var   cursor   =   msg [ ' cursor ' ] ;   switch ( cursor )   {   case   0 :   cursor   =   ' pointer ' ;   break ;   case   1 :   cursor   =   ' default ' ;   break ;   case   2 :   cursor   =   ' crosshair ' ;   break ;   case   3 :   cursor   =   ' move ' ;   break ;   }   fig . rubberband _ canvas . style . cursor   =   cursor ;   }   mpl . figure . prototype . handle _ message   =   function ( fig ,   msg )   {   fig . message . textContent   =   msg [ ' message ' ] ;   }   mpl . figure . prototype . handle _ draw   =   function ( fig ,   msg )   {   / /   Request     server     send     a     figure .   fig . send _ draw _ message ( ) ;   }   mpl . figure . prototype . handle _ image _ mode   =   function ( fig ,   msg )   {   fig . image _ mode   =   msg [ ' mode ' ] ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Called       canvas     updated .   . send _ message ( \" ack \" ,   { } ) ;   }   / /   A   function     construct   a   web   socket   function     onmessage   handling .   / /   Called       figure   constructor .   mpl . figure . prototype ._ make _ _ message _ function   =   function ( fig )   {   return   function   socket _ _ message ( evt )   {     ( evt . data   instanceof   Blob )   {   / *   FIXME :   We     \" Resource   interpreted     Image     *   transferred     MIME   type   text / plain : \"   errors     *   Chrome .   But       set     MIME   type   It   doesn ' t     *       part       websocket   stream   * /   evt . data . type   =   \" image / png \" ;   / *   Free     memory       previous   frames   * /     ( fig . imageObj . src )   {   ( window . URL   | |   window . webkitURL ) . revokeObjectURL (   fig . imageObj . src ) ;   }   fig . imageObj . src   =   ( window . URL   | |   window . webkitURL ) . createObjectURL (   evt . data ) ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }       ( typeof   evt . data   = = =   ' string '   &&   evt . data . slice ( 0 ,   21 )   = =   \" data : image / png ; base64 \" )   {   fig . imageObj . src   =   evt . data ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }   var   msg   =   JSON . parse ( evt . data ) ;   var   msg _ type   =   msg [ ' type ' ] ;   / /   Call     \" handle _ { type } \"   callback ,     takes   / /     figure     JSON   message         arguments .     {   var   callback   =   fig [ \" handle _ \"   +   msg _ type ] ;   }   catch   ( e )   {   console . log ( \" No   handler       ' \"   +   msg _ type   +   \" '   message   type :   \" ,   msg ) ;   return ;   }     ( callback )   {     {   / /   console . log ( \" Handling   ' \"   +   msg _ type   +   \" '   message :   \" ,   msg ) ;   callback ( fig ,   msg ) ;   }   catch   ( e )   {   console . log ( \" Exception   inside     ' handler _ \"   +   msg _ type   +   \" '   callback : \" ,   e ,   e . stack ,   msg ) ;   }   }   } ;   }   / /     http : / / stackoverflow . / questions / 1114465 / - mouse - location - - canvas   mpl . findpos   =   function ( e )   {   / /   section       http : / / www . quirksmode . org / js / events _ properties . html   var   targ ;     ( ! e )   e   =   window . event ;     ( e . target )   targ   =   e . target ;       ( e . srcElement )   targ   =   e . srcElement ;     ( targ . nodeType   = =   3 )   / /   defeat   Safari   bug   targ   =   targ . parentNode ;   / /   jQuery   normalizes     pageX     pageY   / /   pageX , Y       mouse   positions   relative       document   / /   offset ( )   returns     position       element   relative       document   var   x   =   e . pageX   -   $ ( targ ) . offset ( ) . left ;   var   y   =   e . pageY   -   $ ( targ ) . offset ( ) . top ;   return   { \" x \" :   x ,   \" y \" :   y } ;   } ;   / *   *   return   a   copy       object       - object   keys   *           avoid   circular   references   *   http : / / stackoverflow . / a / 24161582 / 3208463   * /   function   simpleKeys   ( original )   {   return   Object . keys ( original ) . reduce ( function   ( obj ,   key )   {     ( typeof   original [ key ]   ! = =   ' object ' )   obj [ key ]   =   original [ key ]   return   obj ;   } ,   { } ) ;   }   mpl . figure . prototype . mouse _ event   =   function ( event ,   )   {   var   canvas _ pos   =   mpl . findpos ( event )     (   = = =   ' button _ press ' )   {   . canvas . focus ( ) ;   . canvas _ div . focus ( ) ;   }   var   x   =   canvas _ pos . x   *   mpl . ratio ;   var   y   =   canvas _ pos . y   *   mpl . ratio ;   . send _ message ( ,   { x :   x ,   y :   y ,   button :   event . button ,   step :   event . step ,   guiEvent :   simpleKeys ( event ) } ) ;   / *   This   prevents     web   browser     automatically   changing     *     text   insertion   cursor       button     pressed .   We     *     control         cursor   setting   manually       *   ' cursor '   event     matplotlib   * /   event . preventDefault ( ) ;   return   false ;   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   / /   Handle     extra   behaviour       a   key   event   }   mpl . figure . prototype . key _ event   =   function ( event ,   )   {   / /   Prevent   repeat   events     (   = =   ' key _ press ' )   {     ( event .   = = =   ._ key )   return ;     ._ key   =   event . ;   }     (   = =   ' key _ release ' )   ._ key   =   null ;   var     =   ' ' ;     ( event . ctrlKey   &&   event .   ! =   17 )     + =   \" ctrl + \" ;     ( event . altKey   &&   event .   ! =   18 )     + =   \" alt + \" ;     ( event . shiftKey   &&   event .   ! =   16 )     + =   \" shift + \" ;     + =   ' k ' ;     + =   event . . toString ( ) ;   ._ key _ event _ extra ( event ,   ) ;   . send _ message ( ,   { key :   ,   guiEvent :   simpleKeys ( event ) } ) ;   return   false ;   }   mpl . figure . prototype . toolbar _ button _ onclick   =   function ( )   {     (   = =   ' download ' )   {   . handle _ save ( ,   null ) ;   }     {   . send _ message ( \" toolbar _ button \" ,   { :   } ) ;   }   } ;   mpl . figure . prototype . toolbar _ button _ onmouseover   =   function ( tooltip )   {   . message . textContent   =   tooltip ;   } ;   mpl . toolbar _ items   =   [ [ \" Home \" ,   \" Reset   original   view \" ,   \" fa   fa - home   icon - home \" ,   \" home \" ] ,   [ \" Back \" ,   \" Back     previous   view \" ,   \" fa   fa - arrow - left   icon - arrow - left \" ,   \" back \" ] ,   [ \" Forward \" ,   \" Forward       view \" ,   \" fa   fa - arrow -   icon - arrow - \" ,   \" forward \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Pan \" ,   \" Pan   axes     left   mouse ,   zoom     \" ,   \" fa   fa - arrows   icon - move \" ,   \" pan \" ] ,   [ \" Zoom \" ,   \" Zoom     rectangle \" ,   \" fa   fa - square - o   icon - check - empty \" ,   \" zoom \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Download \" ,   \" Download   plot \" ,   \" fa   fa - floppy - o   icon - save \" ,   \" download \" ] ] ;   mpl . extensions   =   [ \" eps \" ,   \" jpeg \" ,   \" pdf \" ,   \" png \" ,   \" ps \" ,   \" raw \" ,   \" svg \" ,   \" tif \" ] ;   mpl . default _ extension   =   \" png \" ; var   comm _ websocket _ adapter   =   function ( comm )   {   / /   Create   a   \" websocket \" -   object     calls       IPython   comm   / /   object         methods .   Currently       a     binary   / /   socket ,             room     performance   tuning .   var   ws   =   { } ;   ws . close   =   function ( )   {   comm . close ( )   } ;   ws . send   =   function ( m )   {   / / console . log ( ' sending ' ,   m ) ;   comm . send ( m ) ;   } ;   / /   Register     callback     _ msg .   comm . _ msg ( function ( msg )   {   / / console . log ( ' receiving ' ,   msg [ ' content ' ] [ ' data ' ] ,   msg ) ;   / /   Pass     mpl   event       overridden   (   mpl )   onmessage   function .   ws . onmessage ( msg [ ' content ' ] [ ' data ' ] )   } ) ;   return   ws ;   }   mpl . mpl _ figure _ comm   =   function ( comm ,   msg )   {   / /   This       function       called       mpl   process   / /   starts -     IPython   Comm       \" matplotlib \"   channel .   var   id   =   msg . content . data . id ;   / /   Get   hold       div   created       display   call       Comm   / /   socket     opened     Python .   var   element   =   $ ( \" # \"   +   id ) ;   var   ws _ proxy   =   comm _ websocket _ adapter ( comm )   function   ondownload ( figure ,   format )   {   window . open ( figure . imageObj . src ) ;   }   var   fig   =     mpl . figure ( id ,   ws _ proxy ,   ondownload ,   element . ( 0 ) ) ;   / /   Call   onopen     -   mpl     ,         assuming   ' ve   passed     a   real   / /   web   socket       closed ,       websocket - > open   comm   proxy .   ws _ proxy . onopen ( ) ;   fig . parent _ element   =   element . ( 0 ) ;   fig . cell _ info   =   mpl . find _ output _ cell ( \" < div   id = ' \"   +   id   +   \" ' > < / div > \" ) ;     ( ! fig . cell _ info )   {   console . error ( \" Failed     find   cell     figure \" ,   id ,   fig ) ;   return ;   }   var   output _ index   =   fig . cell _ info [ 2 ]   var   cell   =   fig . cell _ info [ 0 ] ;   } ;   mpl . figure . prototype . handle _ close   =   function ( fig ,   msg )   {   var   width   =   fig . canvas . width / mpl . ratio   fig . root . unbind ( ' remove ' )   / /   Update     output   cell         data       current   canvas .   fig . push _ _ output ( ) ;   var   dataURL   =   fig . canvas . toDataURL ( ) ;   / /   Re - enable     keyboard   manager     IPython   -       line ,     FF ,   / /     notebook   keyboard   shortcuts   fail .   IPython . keyboard _ manager . enable ( )   $ ( fig . parent _ element ) . html ( ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ) ;   fig . close _ ws ( fig ,   msg ) ;   }   mpl . figure . prototype . close _ ws   =   function ( fig ,   msg ) {   fig . send _ message ( ' closing ' ,   msg ) ;   / /   fig . ws . close ( )   }   mpl . figure . prototype . push _ _ output   =   function ( remove _ interactive )   {   / /   Turn     data       canvas     data       output   cell .   var   width   =   . canvas . width / mpl . ratio   var   dataURL   =   . canvas . toDataURL ( ) ;   . cell _ info [ 1 ] [ ' text / html ' ]   =   ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Tell   IPython       notebook   contents     change .   IPython . notebook . set _ dirty ( true ) ;   . send _ message ( \" ack \" ,   { } ) ;   var   fig   =   ;   / /   Wait   a   ,     push       image       DOM     / /         saved   nicely   (     nice     debounce   ) .   setTimeout ( function   ( )   {   fig . push _ _ output ( )   } ,   1000 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items ) {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   continue ;   } ;   var   button   =   $ ( ' < button   class = \" btn   btn - default \"   href = \" # \"   title = \" '   +     +   ' \" > < i   class = \" fa   '   +   image   +   '   fa - lg \" > < / i > < / button > ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   nav _ element . append ( button ) ;   }   / /   Add     status   bar .   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \"   style = \" text - align : ;   float :   ; \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   / /   Add     close   button       window .   var   buttongrp   =   $ ( ' < div   class = \" btn - group   inline   pull - \" > < / div > ' ) ;   var   button   =   $ ( ' < button   class = \" btn   btn - mini   btn - primary \"   href = \" # \"   title = \" Stop   Interaction \" > < i   class = \" fa   fa - power -   icon - remove   icon - large \" > < / i > < / button > ' ) ;   button . click ( function   ( evt )   {   fig . handle _ close ( fig ,   { } ) ;   }   ) ;   button . mouseover ( ' Stop   Interaction ' ,   toolbar _ mouse _ event ) ;   buttongrp . append ( button ) ;   var   titlebar   =   . root . find ( $ ( ' . ui - dialog - titlebar ' ) ) ;   titlebar . prepend ( buttongrp ) ;   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( el ) {   var   fig   =     el . ( \" remove \" ,   function ( ) {   fig . close _ ws ( fig ,   { } ) ;   } ) ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( el ) {   / /       important     make     div   ' focusable   el . attr ( ' tabindex ' ,   0 )   / /   reach       IPython         keyboard   manager     turn   ' s     / /         div     focus   / /   location     version   3     ( IPython . notebook . keyboard _ manager )   {   IPython . notebook . keyboard _ manager . register _ events ( el ) ;   }     {   / /   location     version   2   IPython . keyboard _ manager . register _ events ( el ) ;   }   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   var   manager   =   IPython . notebook . keyboard _ manager ;     ( ! manager )   manager   =   IPython . keyboard _ manager ;   / /   Check     shift + enter     ( event . shiftKey   &&   event .   = =   13 )   {   . canvas _ div . blur ( ) ;   event . shiftKey   =   false ;   / /   Send   a   \" J \"           cell   event .   =   74 ;   event . keyCode   =   74 ;   manager . command _ mode ( ) ;   manager . handle _ keydown ( event ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   fig . ondownload ( fig ,   null ) ;   }   mpl . find _ output _ cell   =   function ( html _ output )   {   / /   Return     cell     output   element         found   * uniquely *       notebook .   / /   Note   -       a   bit   hacky ,               \" notebook _ saving . Notebook \"   / /   IPython   event     triggered         cells       serialised ,       / /     purposes   ( turning     active   figure     a   static   ) ,       late .   var   cells   =   IPython . notebook . _ cells ( ) ;   var   ncells   =   cells . length ;     ( var   i = 0 ;   i < ncells ;   i ++ )   {   var   cell   =   cells [ i ] ;     ( cell . cell _ type   = = =   ' code ' ) {     ( var   j = 0 ;   j < cell . output _ area . outputs . length ;   j ++ )   {   var   data   =   cell . output _ area . outputs [ j ] ;     ( data . data )   {   / /   IPython   > =   3   moved   mimebundle     data   attribute     output   data   =   data . data ;   }     ( data [ ' text / html ' ]   = =   html _ output )   {   return   [ cell ,   data ,   j ] ;   }   }   }   }   }   / /   Register     function     deals       matplotlib   target / channel .   / /   The   kernel       null       page       refreshed .     ( IPython . notebook . kernel   ! =   null )   {   IPython . notebook . kernel . comm _ manager . register _ target ( ' matplotlib ' ,   mpl . mpl _ figure _ comm ) ;   }   散点图   机器学习 中 ， 散点图 一种 很 常见 图形 ， 表现 数据 点 分布 。   In   [ 10 ] :   import   numpy     np   import   matplotlib . pyplot     plt   group   =   np   .   array   ( [ [   1.0   ,   1.1   ] ,   [   1.0   ,   1.0   ] ,   [   0   ,   0   ] ,   [   0   ,   0.1   ] ] )   x _ group   =   [ ]   y _ group   =   [ ]     x   ,   y     group   :   x _ group   .   append   (   x   )   y _ group   .   append   (   y   )   fig   ,   ax   =   plt   .   subplots   ( )   ax   .   set _ xlabel   (   ' x '   )   ax   .   set _ ylabel   (   ' y '   )   ax   .   scatter   (   x _ group   ,   y _ group   )   ax   .   set _ title   (   ' 散点图 '   )   plt   .   show   ( )   var   element   =   $ ( ' # 148172eb - fd4b - 496b - b5b5 - 1359c8b1db03 ' ) ;   / *   Put     inside     global   mpl   namespace   * /   window . mpl   =   { } ;   mpl . _ websocket _ type   =   function ( )   {     ( typeof ( WebSocket )   ! = =   ' undefined ' )   {   return   WebSocket ;   }       ( typeof ( MozWebSocket )   ! = =   ' undefined ' )   {   return   MozWebSocket ;   }     {   alert ( ' Your   browser         WebSocket   support . '   +   ' Please     Chrome ,   Safari     Firefox   ≥   6 .   '   +   ' Firefox   4     5       supported       '   +   '     enable   WebSockets     : config . ' ) ;   } ;   }   mpl . figure   =   function ( figure _ id ,   websocket ,   ondownload ,   parent _ element )   {   . id   =   figure _ id ;   . ws   =   websocket ;   . supports _ binary   =   ( . ws . binaryType   ! =   undefined ) ;     ( ! . supports _ binary )   {   var   warnings   =   document . getElementById ( \" mpl - warnings \" ) ;     ( warnings )   {   warnings . style . display   =   ' block ' ;   warnings . textContent   =   (   \" This   browser       support   binary   websocket   messages .   \"   +   \" Performance       slow . \" ) ;   }   }   . imageObj   =     Image ( ) ;   . context   =   undefined ;   . message   =   undefined ;   . canvas   =   undefined ;   . rubberband _ canvas   =   undefined ;   . rubberband _ context   =   undefined ;   . format _ dropdown   =   undefined ;   . image _ mode   =   ' full ' ;   . root   =   $ ( ' < div / > ' ) ;   ._ root _ extra _ style ( . root )   . root . attr ( ' style ' ,   ' display :   inline - block ' ) ;   $ ( parent _ element ) . append ( . root ) ;   ._ init _ header ( ) ;   ._ init _ canvas ( ) ;   ._ init _ toolbar ( ) ;   var   fig   =   ;   . waiting   =   false ;   . ws . onopen   =   function   ( )   {   fig . send _ message ( \" supports _ binary \" ,   { :   fig . supports _ binary } ) ;   fig . send _ message ( \" send _ image _ mode \" ,   { } ) ;     ( mpl . ratio   ! =   1 )   {   fig . send _ message ( \" set _ dpi _ ratio \" ,   { ' dpi _ ratio ' :   mpl . ratio } ) ;   }   fig . send _ message ( \" refresh \" ,   { } ) ;   }   . imageObj . onload   =   function ( )   {     ( fig . image _ mode   = =   ' full ' )   {   / /   Full   images       transparency   (   diff   images   / /       ) ,           clear     canvas       / /         ghosting .   fig . context . clearRect ( 0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   }   fig . context . drawImage ( fig . imageObj ,   0 ,   0 ) ;   } ;   . imageObj . onunload   =   function ( )   {   fig . ws . close ( ) ;   }   . ws . onmessage   =   ._ make _ _ message _ function ( ) ;   . ondownload   =   ondownload ;   }   mpl . figure . prototype ._ init _ header   =   function ( )   {   var   titlebar   =   $ (   ' < div   class = \" ui - dialog - titlebar   ui - widget - header   ui - corner -   '   +   ' ui - helper - clearfix \" / > ' ) ;   var   titletext   =   $ (   ' < div   class = \" ui - dialog - title \"   style = \" width :   100% ;   '   +   ' text - align :   center ;   padding :   3px ; \" / > ' ) ;   titlebar . append ( titletext )   . root . append ( titlebar ) ;   . header   =   titletext [ 0 ] ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ init _ canvas   =   function ( )   {   var   fig   =   ;   var   canvas _ div   =   $ ( ' < div / > ' ) ;   canvas _ div . attr ( ' style ' ,   ' position :   relative ;   clear :   ;   outline :   0 ' ) ;   function   canvas _ keyboard _ event ( event )   {   return   fig . key _ event ( event ,   event [ ' data ' ] ) ;   }   canvas _ div . keydown ( ' key _ press ' ,   canvas _ keyboard _ event ) ;   canvas _ div . keyup ( ' key _ release ' ,   canvas _ keyboard _ event ) ;   . canvas _ div   =   canvas _ div   ._ canvas _ extra _ style ( canvas _ div )   . root . append ( canvas _ div ) ;   var   canvas   =   $ ( ' < canvas / > ' ) ;   canvas . addClass ( ' mpl - canvas ' ) ;   canvas . attr ( ' style ' ,   \" left :   0 ;   top :   0 ;   z - index :   0 ;   outline :   0 \" )   . canvas   =   canvas [ 0 ] ;   . context   =   canvas [ 0 ] . getContext ( \" 2d \" ) ;   var   backingStore   =   . context . backingStorePixelRatio   | |   . context . webkitBackingStorePixelRatio   | |   . context . mozBackingStorePixelRatio   | |   . context . msBackingStorePixelRatio   | |   . context . oBackingStorePixelRatio   | |   . context . backingStorePixelRatio   | |   1 ;   mpl . ratio   =   ( window . devicePixelRatio   | |   1 )   /   backingStore ;   var   rubberband   =   $ ( ' < canvas / > ' ) ;   rubberband . attr ( ' style ' ,   \" position :   absolute ;   left :   0 ;   top :   0 ;   z - index :   1 ; \" )   var   pass _ mouse _ events   =   true ;   canvas _ div . resizable ( {   start :   function ( event ,   ui )   {   pass _ mouse _ events   =   false ;   } ,   resize :   function ( event ,   ui )   {   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   stop :   function ( event ,   ui )   {   pass _ mouse _ events   =   true ;   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   } ) ;   function   mouse _ event _ fn ( event )   {     ( pass _ mouse _ events )   return   fig . mouse _ event ( event ,   event [ ' data ' ] ) ;   }   rubberband . mousedown ( ' button _ press ' ,   mouse _ event _ fn ) ;   rubberband . mouseup ( ' button _ release ' ,   mouse _ event _ fn ) ;   / /   Throttle   sequential   mouse   events     1     20ms .   rubberband . mousemove ( ' motion _ notify ' ,   mouse _ event _ fn ) ;   rubberband . mouseenter ( ' figure _ enter ' ,   mouse _ event _ fn ) ;   rubberband . mouseleave ( ' figure _ leave ' ,   mouse _ event _ fn ) ;   canvas _ div . ( \" wheel \" ,   function   ( event )   {   event   =   event . originalEvent ;   event [ ' data ' ]   =   ' scroll '     ( event . deltaY   <   0 )   {   event . step   =   1 ;   }     {   event . step   =   - 1 ;   }   mouse _ event _ fn ( event ) ;   } ) ;   canvas _ div . append ( canvas ) ;   canvas _ div . append ( rubberband ) ;   . rubberband   =   rubberband ;   . rubberband _ canvas   =   rubberband [ 0 ] ;   . rubberband _ context   =   rubberband [ 0 ] . getContext ( \" 2d \" ) ;   . rubberband _ context . strokeStyle   =   \" # 000000 \" ;   ._ resize _ canvas   =   function ( width ,   height )   {   / /   Keep     size       canvas ,   canvas   container ,     rubber   band   / /   canvas     synch .   canvas _ div . css ( ' width ' ,   width )   canvas _ div . css ( ' height ' ,   height )   canvas . attr ( ' width ' ,   width   *   mpl . ratio ) ;   canvas . attr ( ' height ' ,   height   *   mpl . ratio ) ;   canvas . attr ( ' style ' ,   ' width :   '   +   width   +   ' px ;   height :   '   +   height   +   ' px ; ' ) ;   rubberband . attr ( ' width ' ,   width ) ;   rubberband . attr ( ' height ' ,   height ) ;   }   / /   Set     figure       initial   600x600px ,       subsequently     updated   / /       draw .   ._ resize _ canvas ( 600 ,   600 ) ;   / /   Disable     mouse   context   menu .   $ ( . rubberband _ canvas ) . bind ( \" contextmenu \" , function ( e ) {   return   false ;   } ) ;   function   set _ focus   ( )   {   canvas . focus ( ) ;   canvas _ div . focus ( ) ;   }   window . setTimeout ( set _ focus ,   100 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items )   {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   / /   put   a   spacer     .   continue ;   }   var   button   =   $ ( ' < button / > ' ) ;   button . addClass ( ' ui - button   ui - widget   ui - state - default   ui - corner -   '   +   ' ui - button - icon - ' ) ;   button . attr ( ' role ' ,   ' button ' ) ;   button . attr ( ' aria - disabled ' ,   ' false ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   var   icon _ img   =   $ ( ' < span / > ' ) ;   icon _ img . addClass ( ' ui - button - icon - primary   ui - icon ' ) ;   icon _ img . addClass ( image ) ;   icon _ img . addClass ( ' ui - corner - ' ) ;   var   tooltip _ span   =   $ ( ' < span / > ' ) ;   tooltip _ span . addClass ( ' ui - button - text ' ) ;   tooltip _ span . html ( tooltip ) ;   button . append ( icon _ img ) ;   button . append ( tooltip _ span ) ;   nav _ element . append ( button ) ;   }   var   fmt _ picker _ span   =   $ ( ' < span / > ' ) ;   var   fmt _ picker   =   $ ( ' < select / > ' ) ;   fmt _ picker . addClass ( ' mpl - toolbar - option   ui - widget   ui - widget - content ' ) ;   fmt _ picker _ span . append ( fmt _ picker ) ;   nav _ element . append ( fmt _ picker _ span ) ;   . format _ dropdown   =   fmt _ picker [ 0 ] ;     ( var   ind     mpl . extensions )   {   var   fmt   =   mpl . extensions [ ind ] ;   var   option   =   $ (   ' < option / > ' ,   { selected :   fmt   = = =   mpl . default _ extension } ) . html ( fmt ) ;   fmt _ picker . append ( option )   }   / /   Add   hover   states       ui - buttons   $ (   \" . ui - button \"   ) . hover (   function ( )   {   $ ( ) . addClass ( \" ui - state - hover \" ) ; } ,   function ( )   {   $ ( ) . removeClass ( \" ui - state - hover \" ) ; }   ) ;   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   }   mpl . figure . prototype . request _ resize   =   function ( x _ pixels ,   y _ pixels )   {   / /   Request   matplotlib     resize     figure .   Matplotlib       trigger   a   resize       client ,   / /         turn   request   a   refresh       image .   . send _ message ( ' resize ' ,   { ' width ' :   x _ pixels ,   ' height ' :   y _ pixels } ) ;   }   mpl . figure . prototype . send _ message   =   function ( type ,   properties )   {   properties [ ' type ' ]   =   type ;   properties [ ' figure _ id ' ]   =   . id ;   . ws . send ( JSON . stringify ( properties ) ) ;   }   mpl . figure . prototype . send _ draw _ message   =   function ( )   {     ( ! . waiting )   {   . waiting   =   true ;   . ws . send ( JSON . stringify ( { type :   \" draw \" ,   figure _ id :   . id } ) ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   var   format _ dropdown   =   fig . format _ dropdown ;   var   format   =   format _ dropdown . options [ format _ dropdown . selectedIndex ] . ;   fig . ondownload ( fig ,   format ) ;   }   mpl . figure . prototype . handle _ resize   =   function ( fig ,   msg )   {   var   size   =   msg [ ' size ' ] ;     ( size [ 0 ]   ! =   fig . canvas . width   | |   size [ 1 ]   ! =   fig . canvas . height )   {   fig ._ resize _ canvas ( size [ 0 ] ,   size [ 1 ] ) ;   fig . send _ message ( \" refresh \" ,   { } ) ;   } ;   }   mpl . figure . prototype . handle _ rubberband   =   function ( fig ,   msg )   {   var   x0   =   msg [ ' x0 ' ]   /   mpl . ratio ;   var   y0   =   ( fig . canvas . height   -   msg [ ' y0 ' ] )   /   mpl . ratio ;   var   x1   =   msg [ ' x1 ' ]   /   mpl . ratio ;   var   y1   =   ( fig . canvas . height   -   msg [ ' y1 ' ] )   /   mpl . ratio ;   x0   =   Math . floor ( x0 )   +   0.5 ;   y0   =   Math . floor ( y0 )   +   0.5 ;   x1   =   Math . floor ( x1 )   +   0.5 ;   y1   =   Math . floor ( y1 )   +   0.5 ;   var   min _ x   =   Math . min ( x0 ,   x1 ) ;   var   min _ y   =   Math . min ( y0 ,   y1 ) ;   var   width   =   Math . abs ( x1   -   x0 ) ;   var   height   =   Math . abs ( y1   -   y0 ) ;   fig . rubberband _ context . clearRect (   0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   fig . rubberband _ context . strokeRect ( min _ x ,   min _ y ,   width ,   height ) ;   }   mpl . figure . prototype . handle _ figure _ label   =   function ( fig ,   msg )   {   / /   Updates     figure   title .   fig . header . textContent   =   msg [ ' label ' ] ;   }   mpl . figure . prototype . handle _ cursor   =   function ( fig ,   msg )   {   var   cursor   =   msg [ ' cursor ' ] ;   switch ( cursor )   {   case   0 :   cursor   =   ' pointer ' ;   break ;   case   1 :   cursor   =   ' default ' ;   break ;   case   2 :   cursor   =   ' crosshair ' ;   break ;   case   3 :   cursor   =   ' move ' ;   break ;   }   fig . rubberband _ canvas . style . cursor   =   cursor ;   }   mpl . figure . prototype . handle _ message   =   function ( fig ,   msg )   {   fig . message . textContent   =   msg [ ' message ' ] ;   }   mpl . figure . prototype . handle _ draw   =   function ( fig ,   msg )   {   / /   Request     server     send     a     figure .   fig . send _ draw _ message ( ) ;   }   mpl . figure . prototype . handle _ image _ mode   =   function ( fig ,   msg )   {   fig . image _ mode   =   msg [ ' mode ' ] ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Called       canvas     updated .   . send _ message ( \" ack \" ,   { } ) ;   }   / /   A   function     construct   a   web   socket   function     onmessage   handling .   / /   Called       figure   constructor .   mpl . figure . prototype ._ make _ _ message _ function   =   function ( fig )   {   return   function   socket _ _ message ( evt )   {     ( evt . data   instanceof   Blob )   {   / *   FIXME :   We     \" Resource   interpreted     Image     *   transferred     MIME   type   text / plain : \"   errors     *   Chrome .   But       set     MIME   type   It   doesn ' t     *       part       websocket   stream   * /   evt . data . type   =   \" image / png \" ;   / *   Free     memory       previous   frames   * /     ( fig . imageObj . src )   {   ( window . URL   | |   window . webkitURL ) . revokeObjectURL (   fig . imageObj . src ) ;   }   fig . imageObj . src   =   ( window . URL   | |   window . webkitURL ) . createObjectURL (   evt . data ) ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }       ( typeof   evt . data   = = =   ' string '   &&   evt . data . slice ( 0 ,   21 )   = =   \" data : image / png ; base64 \" )   {   fig . imageObj . src   =   evt . data ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }   var   msg   =   JSON . parse ( evt . data ) ;   var   msg _ type   =   msg [ ' type ' ] ;   / /   Call     \" handle _ { type } \"   callback ,     takes   / /     figure     JSON   message         arguments .     {   var   callback   =   fig [ \" handle _ \"   +   msg _ type ] ;   }   catch   ( e )   {   console . log ( \" No   handler       ' \"   +   msg _ type   +   \" '   message   type :   \" ,   msg ) ;   return ;   }     ( callback )   {     {   / /   console . log ( \" Handling   ' \"   +   msg _ type   +   \" '   message :   \" ,   msg ) ;   callback ( fig ,   msg ) ;   }   catch   ( e )   {   console . log ( \" Exception   inside     ' handler _ \"   +   msg _ type   +   \" '   callback : \" ,   e ,   e . stack ,   msg ) ;   }   }   } ;   }   / /     http : / / stackoverflow . / questions / 1114465 / - mouse - location - - canvas   mpl . findpos   =   function ( e )   {   / /   section       http : / / www . quirksmode . org / js / events _ properties . html   var   targ ;     ( ! e )   e   =   window . event ;     ( e . target )   targ   =   e . target ;       ( e . srcElement )   targ   =   e . srcElement ;     ( targ . nodeType   = =   3 )   / /   defeat   Safari   bug   targ   =   targ . parentNode ;   / /   jQuery   normalizes     pageX     pageY   / /   pageX , Y       mouse   positions   relative       document   / /   offset ( )   returns     position       element   relative       document   var   x   =   e . pageX   -   $ ( targ ) . offset ( ) . left ;   var   y   =   e . pageY   -   $ ( targ ) . offset ( ) . top ;   return   { \" x \" :   x ,   \" y \" :   y } ;   } ;   / *   *   return   a   copy       object       - object   keys   *           avoid   circular   references   *   http : / / stackoverflow . / a / 24161582 / 3208463   * /   function   simpleKeys   ( original )   {   return   Object . keys ( original ) . reduce ( function   ( obj ,   key )   {     ( typeof   original [ key ]   ! = =   ' object ' )   obj [ key ]   =   original [ key ]   return   obj ;   } ,   { } ) ;   }   mpl . figure . prototype . mouse _ event   =   function ( event ,   )   {   var   canvas _ pos   =   mpl . findpos ( event )     (   = = =   ' button _ press ' )   {   . canvas . focus ( ) ;   . canvas _ div . focus ( ) ;   }   var   x   =   canvas _ pos . x   *   mpl . ratio ;   var   y   =   canvas _ pos . y   *   mpl . ratio ;   . send _ message ( ,   { x :   x ,   y :   y ,   button :   event . button ,   step :   event . step ,   guiEvent :   simpleKeys ( event ) } ) ;   / *   This   prevents     web   browser     automatically   changing     *     text   insertion   cursor       button     pressed .   We     *     control         cursor   setting   manually       *   ' cursor '   event     matplotlib   * /   event . preventDefault ( ) ;   return   false ;   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   / /   Handle     extra   behaviour       a   key   event   }   mpl . figure . prototype . key _ event   =   function ( event ,   )   {   / /   Prevent   repeat   events     (   = =   ' key _ press ' )   {     ( event .   = = =   ._ key )   return ;     ._ key   =   event . ;   }     (   = =   ' key _ release ' )   ._ key   =   null ;   var     =   ' ' ;     ( event . ctrlKey   &&   event .   ! =   17 )     + =   \" ctrl + \" ;     ( event . altKey   &&   event .   ! =   18 )     + =   \" alt + \" ;     ( event . shiftKey   &&   event .   ! =   16 )     + =   \" shift + \" ;     + =   ' k ' ;     + =   event . . toString ( ) ;   ._ key _ event _ extra ( event ,   ) ;   . send _ message ( ,   { key :   ,   guiEvent :   simpleKeys ( event ) } ) ;   return   false ;   }   mpl . figure . prototype . toolbar _ button _ onclick   =   function ( )   {     (   = =   ' download ' )   {   . handle _ save ( ,   null ) ;   }     {   . send _ message ( \" toolbar _ button \" ,   { :   } ) ;   }   } ;   mpl . figure . prototype . toolbar _ button _ onmouseover   =   function ( tooltip )   {   . message . textContent   =   tooltip ;   } ;   mpl . toolbar _ items   =   [ [ \" Home \" ,   \" Reset   original   view \" ,   \" fa   fa - home   icon - home \" ,   \" home \" ] ,   [ \" Back \" ,   \" Back     previous   view \" ,   \" fa   fa - arrow - left   icon - arrow - left \" ,   \" back \" ] ,   [ \" Forward \" ,   \" Forward       view \" ,   \" fa   fa - arrow -   icon - arrow - \" ,   \" forward \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Pan \" ,   \" Pan   axes     left   mouse ,   zoom     \" ,   \" fa   fa - arrows   icon - move \" ,   \" pan \" ] ,   [ \" Zoom \" ,   \" Zoom     rectangle \" ,   \" fa   fa - square - o   icon - check - empty \" ,   \" zoom \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Download \" ,   \" Download   plot \" ,   \" fa   fa - floppy - o   icon - save \" ,   \" download \" ] ] ;   mpl . extensions   =   [ \" eps \" ,   \" jpeg \" ,   \" pdf \" ,   \" png \" ,   \" ps \" ,   \" raw \" ,   \" svg \" ,   \" tif \" ] ;   mpl . default _ extension   =   \" png \" ; var   comm _ websocket _ adapter   =   function ( comm )   {   / /   Create   a   \" websocket \" -   object     calls       IPython   comm   / /   object         methods .   Currently       a     binary   / /   socket ,             room     performance   tuning .   var   ws   =   { } ;   ws . close   =   function ( )   {   comm . close ( )   } ;   ws . send   =   function ( m )   {   / / console . log ( ' sending ' ,   m ) ;   comm . send ( m ) ;   } ;   / /   Register     callback     _ msg .   comm . _ msg ( function ( msg )   {   / / console . log ( ' receiving ' ,   msg [ ' content ' ] [ ' data ' ] ,   msg ) ;   / /   Pass     mpl   event       overridden   (   mpl )   onmessage   function .   ws . onmessage ( msg [ ' content ' ] [ ' data ' ] )   } ) ;   return   ws ;   }   mpl . mpl _ figure _ comm   =   function ( comm ,   msg )   {   / /   This       function       called       mpl   process   / /   starts -     IPython   Comm       \" matplotlib \"   channel .   var   id   =   msg . content . data . id ;   / /   Get   hold       div   created       display   call       Comm   / /   socket     opened     Python .   var   element   =   $ ( \" # \"   +   id ) ;   var   ws _ proxy   =   comm _ websocket _ adapter ( comm )   function   ondownload ( figure ,   format )   {   window . open ( figure . imageObj . src ) ;   }   var   fig   =     mpl . figure ( id ,   ws _ proxy ,   ondownload ,   element . ( 0 ) ) ;   / /   Call   onopen     -   mpl     ,         assuming   ' ve   passed     a   real   / /   web   socket       closed ,       websocket - > open   comm   proxy .   ws _ proxy . onopen ( ) ;   fig . parent _ element   =   element . ( 0 ) ;   fig . cell _ info   =   mpl . find _ output _ cell ( \" < div   id = ' \"   +   id   +   \" ' > < / div > \" ) ;     ( ! fig . cell _ info )   {   console . error ( \" Failed     find   cell     figure \" ,   id ,   fig ) ;   return ;   }   var   output _ index   =   fig . cell _ info [ 2 ]   var   cell   =   fig . cell _ info [ 0 ] ;   } ;   mpl . figure . prototype . handle _ close   =   function ( fig ,   msg )   {   var   width   =   fig . canvas . width / mpl . ratio   fig . root . unbind ( ' remove ' )   / /   Update     output   cell         data       current   canvas .   fig . push _ _ output ( ) ;   var   dataURL   =   fig . canvas . toDataURL ( ) ;   / /   Re - enable     keyboard   manager     IPython   -       line ,     FF ,   / /     notebook   keyboard   shortcuts   fail .   IPython . keyboard _ manager . enable ( )   $ ( fig . parent _ element ) . html ( ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ) ;   fig . close _ ws ( fig ,   msg ) ;   }   mpl . figure . prototype . close _ ws   =   function ( fig ,   msg ) {   fig . send _ message ( ' closing ' ,   msg ) ;   / /   fig . ws . close ( )   }   mpl . figure . prototype . push _ _ output   =   function ( remove _ interactive )   {   / /   Turn     data       canvas     data       output   cell .   var   width   =   . canvas . width / mpl . ratio   var   dataURL   =   . canvas . toDataURL ( ) ;   . cell _ info [ 1 ] [ ' text / html ' ]   =   ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Tell   IPython       notebook   contents     change .   IPython . notebook . set _ dirty ( true ) ;   . send _ message ( \" ack \" ,   { } ) ;   var   fig   =   ;   / /   Wait   a   ,     push       image       DOM     / /         saved   nicely   (     nice     debounce   ) .   setTimeout ( function   ( )   {   fig . push _ _ output ( )   } ,   1000 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items ) {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   continue ;   } ;   var   button   =   $ ( ' < button   class = \" btn   btn - default \"   href = \" # \"   title = \" '   +     +   ' \" > < i   class = \" fa   '   +   image   +   '   fa - lg \" > < / i > < / button > ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   nav _ element . append ( button ) ;   }   / /   Add     status   bar .   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \"   style = \" text - align : ;   float :   ; \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   / /   Add     close   button       window .   var   buttongrp   =   $ ( ' < div   class = \" btn - group   inline   pull - \" > < / div > ' ) ;   var   button   =   $ ( ' < button   class = \" btn   btn - mini   btn - primary \"   href = \" # \"   title = \" Stop   Interaction \" > < i   class = \" fa   fa - power -   icon - remove   icon - large \" > < / i > < / button > ' ) ;   button . click ( function   ( evt )   {   fig . handle _ close ( fig ,   { } ) ;   }   ) ;   button . mouseover ( ' Stop   Interaction ' ,   toolbar _ mouse _ event ) ;   buttongrp . append ( button ) ;   var   titlebar   =   . root . find ( $ ( ' . ui - dialog - titlebar ' ) ) ;   titlebar . prepend ( buttongrp ) ;   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( el ) {   var   fig   =     el . ( \" remove \" ,   function ( ) {   fig . close _ ws ( fig ,   { } ) ;   } ) ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( el ) {   / /       important     make     div   ' focusable   el . attr ( ' tabindex ' ,   0 )   / /   reach       IPython         keyboard   manager     turn   ' s     / /         div     focus   / /   location     version   3     ( IPython . notebook . keyboard _ manager )   {   IPython . notebook . keyboard _ manager . register _ events ( el ) ;   }     {   / /   location     version   2   IPython . keyboard _ manager . register _ events ( el ) ;   }   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   var   manager   =   IPython . notebook . keyboard _ manager ;     ( ! manager )   manager   =   IPython . keyboard _ manager ;   / /   Check     shift + enter     ( event . shiftKey   &&   event .   = =   13 )   {   . canvas _ div . blur ( ) ;   event . shiftKey   =   false ;   / /   Send   a   \" J \"           cell   event .   =   74 ;   event . keyCode   =   74 ;   manager . command _ mode ( ) ;   manager . handle _ keydown ( event ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   fig . ondownload ( fig ,   null ) ;   }   mpl . find _ output _ cell   =   function ( html _ output )   {   / /   Return     cell     output   element         found   * uniquely *       notebook .   / /   Note   -       a   bit   hacky ,               \" notebook _ saving . Notebook \"   / /   IPython   event     triggered         cells       serialised ,       / /     purposes   ( turning     active   figure     a   static   ) ,       late .   var   cells   =   IPython . notebook . _ cells ( ) ;   var   ncells   =   cells . length ;     ( var   i = 0 ;   i < ncells ;   i ++ )   {   var   cell   =   cells [ i ] ;     ( cell . cell _ type   = = =   ' code ' ) {     ( var   j = 0 ;   j < cell . output _ area . outputs . length ;   j ++ )   {   var   data   =   cell . output _ area . outputs [ j ] ;     ( data . data )   {   / /   IPython   > =   3   moved   mimebundle     data   attribute     output   data   =   data . data ;   }     ( data [ ' text / html ' ]   = =   html _ output )   {   return   [ cell ,   data ,   j ] ;   }   }   }   }   }   / /   Register     function     deals       matplotlib   target / channel .   / /   The   kernel       null       page       refreshed .     ( IPython . notebook . kernel   ! =   null )   {   IPython . notebook . kernel . comm _ manager . register _ target ( ' matplotlib ' ,   mpl . mpl _ figure _ comm ) ;   }   In   [ 19 ] :   import   pandas     pd   import   numpy     np   import   matplotlib . pyplot     plt   fig   ,   (   ax1   ,   ax2   )   =   plt   .   subplots   (   ncols   =   2   )   group   =   np   .   array   ( [ [   1.0   ,   1.1   ] ,   [   1.0   ,   1.0   ] ,   [   0   ,   0   ] ,   [   0   ,   0.1   ] ] )   ###   ax1   x _ group   =   [ ]   y _ group   =   [ ]     x   ,   y     group   :   x _ group   .   append   (   x   )   y _ group   .   append   (   y   )   ax1   .   set _ xlabel   (   ' x '   )   ax1   .   set _ ylabel   (   ' y '   )   ax1   .   scatter   (   x _ group   ,   y _ group   )   ax1   .   set _ title   (   ' 散点图 - matplotlib '   )   ###   ax2   看得出来 pandas 好用 ， 数据处理 标配 数据 中转 层 。   data   =   pd   .   DataFrame   (   group   ,   columns   =   [   ' x '   ,   ' y '   ] )   ax2   .   set _ title   (   ' 散点图 - pandas '   )   data   .   plot   .   scatter   (   x   =   ' x '   ,   y   =   ' y '   ,   ax   =   ax2   )   var   element   =   $ ( ' # 065973eb - 548b - 4218 - 98de - 20b127206873 ' ) ;   / *   Put     inside     global   mpl   namespace   * /   window . mpl   =   { } ;   mpl . _ websocket _ type   =   function ( )   {     ( typeof ( WebSocket )   ! = =   ' undefined ' )   {   return   WebSocket ;   }       ( typeof ( MozWebSocket )   ! = =   ' undefined ' )   {   return   MozWebSocket ;   }     {   alert ( ' Your   browser         WebSocket   support . '   +   ' Please     Chrome ,   Safari     Firefox   ≥   6 .   '   +   ' Firefox   4     5       supported       '   +   '     enable   WebSockets     : config . ' ) ;   } ;   }   mpl . figure   =   function ( figure _ id ,   websocket ,   ondownload ,   parent _ element )   {   . id   =   figure _ id ;   . ws   =   websocket ;   . supports _ binary   =   ( . ws . binaryType   ! =   undefined ) ;     ( ! . supports _ binary )   {   var   warnings   =   document . getElementById ( \" mpl - warnings \" ) ;     ( warnings )   {   warnings . style . display   =   ' block ' ;   warnings . textContent   =   (   \" This   browser       support   binary   websocket   messages .   \"   +   \" Performance       slow . \" ) ;   }   }   . imageObj   =     Image ( ) ;   . context   =   undefined ;   . message   =   undefined ;   . canvas   =   undefined ;   . rubberband _ canvas   =   undefined ;   . rubberband _ context   =   undefined ;   . format _ dropdown   =   undefined ;   . image _ mode   =   ' full ' ;   . root   =   $ ( ' < div / > ' ) ;   ._ root _ extra _ style ( . root )   . root . attr ( ' style ' ,   ' display :   inline - block ' ) ;   $ ( parent _ element ) . append ( . root ) ;   ._ init _ header ( ) ;   ._ init _ canvas ( ) ;   ._ init _ toolbar ( ) ;   var   fig   =   ;   . waiting   =   false ;   . ws . onopen   =   function   ( )   {   fig . send _ message ( \" supports _ binary \" ,   { :   fig . supports _ binary } ) ;   fig . send _ message ( \" send _ image _ mode \" ,   { } ) ;     ( mpl . ratio   ! =   1 )   {   fig . send _ message ( \" set _ dpi _ ratio \" ,   { ' dpi _ ratio ' :   mpl . ratio } ) ;   }   fig . send _ message ( \" refresh \" ,   { } ) ;   }   . imageObj . onload   =   function ( )   {     ( fig . image _ mode   = =   ' full ' )   {   / /   Full   images       transparency   (   diff   images   / /       ) ,           clear     canvas       / /         ghosting .   fig . context . clearRect ( 0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   }   fig . context . drawImage ( fig . imageObj ,   0 ,   0 ) ;   } ;   . imageObj . onunload   =   function ( )   {   fig . ws . close ( ) ;   }   . ws . onmessage   =   ._ make _ _ message _ function ( ) ;   . ondownload   =   ondownload ;   }   mpl . figure . prototype ._ init _ header   =   function ( )   {   var   titlebar   =   $ (   ' < div   class = \" ui - dialog - titlebar   ui - widget - header   ui - corner -   '   +   ' ui - helper - clearfix \" / > ' ) ;   var   titletext   =   $ (   ' < div   class = \" ui - dialog - title \"   style = \" width :   100% ;   '   +   ' text - align :   center ;   padding :   3px ; \" / > ' ) ;   titlebar . append ( titletext )   . root . append ( titlebar ) ;   . header   =   titletext [ 0 ] ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( canvas _ div )   {   }   mpl . figure . prototype ._ init _ canvas   =   function ( )   {   var   fig   =   ;   var   canvas _ div   =   $ ( ' < div / > ' ) ;   canvas _ div . attr ( ' style ' ,   ' position :   relative ;   clear :   ;   outline :   0 ' ) ;   function   canvas _ keyboard _ event ( event )   {   return   fig . key _ event ( event ,   event [ ' data ' ] ) ;   }   canvas _ div . keydown ( ' key _ press ' ,   canvas _ keyboard _ event ) ;   canvas _ div . keyup ( ' key _ release ' ,   canvas _ keyboard _ event ) ;   . canvas _ div   =   canvas _ div   ._ canvas _ extra _ style ( canvas _ div )   . root . append ( canvas _ div ) ;   var   canvas   =   $ ( ' < canvas / > ' ) ;   canvas . addClass ( ' mpl - canvas ' ) ;   canvas . attr ( ' style ' ,   \" left :   0 ;   top :   0 ;   z - index :   0 ;   outline :   0 \" )   . canvas   =   canvas [ 0 ] ;   . context   =   canvas [ 0 ] . getContext ( \" 2d \" ) ;   var   backingStore   =   . context . backingStorePixelRatio   | |   . context . webkitBackingStorePixelRatio   | |   . context . mozBackingStorePixelRatio   | |   . context . msBackingStorePixelRatio   | |   . context . oBackingStorePixelRatio   | |   . context . backingStorePixelRatio   | |   1 ;   mpl . ratio   =   ( window . devicePixelRatio   | |   1 )   /   backingStore ;   var   rubberband   =   $ ( ' < canvas / > ' ) ;   rubberband . attr ( ' style ' ,   \" position :   absolute ;   left :   0 ;   top :   0 ;   z - index :   1 ; \" )   var   pass _ mouse _ events   =   true ;   canvas _ div . resizable ( {   start :   function ( event ,   ui )   {   pass _ mouse _ events   =   false ;   } ,   resize :   function ( event ,   ui )   {   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   stop :   function ( event ,   ui )   {   pass _ mouse _ events   =   true ;   fig . request _ resize ( ui . size . width ,   ui . size . height ) ;   } ,   } ) ;   function   mouse _ event _ fn ( event )   {     ( pass _ mouse _ events )   return   fig . mouse _ event ( event ,   event [ ' data ' ] ) ;   }   rubberband . mousedown ( ' button _ press ' ,   mouse _ event _ fn ) ;   rubberband . mouseup ( ' button _ release ' ,   mouse _ event _ fn ) ;   / /   Throttle   sequential   mouse   events     1     20ms .   rubberband . mousemove ( ' motion _ notify ' ,   mouse _ event _ fn ) ;   rubberband . mouseenter ( ' figure _ enter ' ,   mouse _ event _ fn ) ;   rubberband . mouseleave ( ' figure _ leave ' ,   mouse _ event _ fn ) ;   canvas _ div . ( \" wheel \" ,   function   ( event )   {   event   =   event . originalEvent ;   event [ ' data ' ]   =   ' scroll '     ( event . deltaY   <   0 )   {   event . step   =   1 ;   }     {   event . step   =   - 1 ;   }   mouse _ event _ fn ( event ) ;   } ) ;   canvas _ div . append ( canvas ) ;   canvas _ div . append ( rubberband ) ;   . rubberband   =   rubberband ;   . rubberband _ canvas   =   rubberband [ 0 ] ;   . rubberband _ context   =   rubberband [ 0 ] . getContext ( \" 2d \" ) ;   . rubberband _ context . strokeStyle   =   \" # 000000 \" ;   ._ resize _ canvas   =   function ( width ,   height )   {   / /   Keep     size       canvas ,   canvas   container ,     rubber   band   / /   canvas     synch .   canvas _ div . css ( ' width ' ,   width )   canvas _ div . css ( ' height ' ,   height )   canvas . attr ( ' width ' ,   width   *   mpl . ratio ) ;   canvas . attr ( ' height ' ,   height   *   mpl . ratio ) ;   canvas . attr ( ' style ' ,   ' width :   '   +   width   +   ' px ;   height :   '   +   height   +   ' px ; ' ) ;   rubberband . attr ( ' width ' ,   width ) ;   rubberband . attr ( ' height ' ,   height ) ;   }   / /   Set     figure       initial   600x600px ,       subsequently     updated   / /       draw .   ._ resize _ canvas ( 600 ,   600 ) ;   / /   Disable     mouse   context   menu .   $ ( . rubberband _ canvas ) . bind ( \" contextmenu \" , function ( e ) {   return   false ;   } ) ;   function   set _ focus   ( )   {   canvas . focus ( ) ;   canvas _ div . focus ( ) ;   }   window . setTimeout ( set _ focus ,   100 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items )   {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   / /   put   a   spacer     .   continue ;   }   var   button   =   $ ( ' < button / > ' ) ;   button . addClass ( ' ui - button   ui - widget   ui - state - default   ui - corner -   '   +   ' ui - button - icon - ' ) ;   button . attr ( ' role ' ,   ' button ' ) ;   button . attr ( ' aria - disabled ' ,   ' false ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   var   icon _ img   =   $ ( ' < span / > ' ) ;   icon _ img . addClass ( ' ui - button - icon - primary   ui - icon ' ) ;   icon _ img . addClass ( image ) ;   icon _ img . addClass ( ' ui - corner - ' ) ;   var   tooltip _ span   =   $ ( ' < span / > ' ) ;   tooltip _ span . addClass ( ' ui - button - text ' ) ;   tooltip _ span . html ( tooltip ) ;   button . append ( icon _ img ) ;   button . append ( tooltip _ span ) ;   nav _ element . append ( button ) ;   }   var   fmt _ picker _ span   =   $ ( ' < span / > ' ) ;   var   fmt _ picker   =   $ ( ' < select / > ' ) ;   fmt _ picker . addClass ( ' mpl - toolbar - option   ui - widget   ui - widget - content ' ) ;   fmt _ picker _ span . append ( fmt _ picker ) ;   nav _ element . append ( fmt _ picker _ span ) ;   . format _ dropdown   =   fmt _ picker [ 0 ] ;     ( var   ind     mpl . extensions )   {   var   fmt   =   mpl . extensions [ ind ] ;   var   option   =   $ (   ' < option / > ' ,   { selected :   fmt   = = =   mpl . default _ extension } ) . html ( fmt ) ;   fmt _ picker . append ( option )   }   / /   Add   hover   states       ui - buttons   $ (   \" . ui - button \"   ) . hover (   function ( )   {   $ ( ) . addClass ( \" ui - state - hover \" ) ; } ,   function ( )   {   $ ( ) . removeClass ( \" ui - state - hover \" ) ; }   ) ;   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   }   mpl . figure . prototype . request _ resize   =   function ( x _ pixels ,   y _ pixels )   {   / /   Request   matplotlib     resize     figure .   Matplotlib       trigger   a   resize       client ,   / /         turn   request   a   refresh       image .   . send _ message ( ' resize ' ,   { ' width ' :   x _ pixels ,   ' height ' :   y _ pixels } ) ;   }   mpl . figure . prototype . send _ message   =   function ( type ,   properties )   {   properties [ ' type ' ]   =   type ;   properties [ ' figure _ id ' ]   =   . id ;   . ws . send ( JSON . stringify ( properties ) ) ;   }   mpl . figure . prototype . send _ draw _ message   =   function ( )   {     ( ! . waiting )   {   . waiting   =   true ;   . ws . send ( JSON . stringify ( { type :   \" draw \" ,   figure _ id :   . id } ) ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   var   format _ dropdown   =   fig . format _ dropdown ;   var   format   =   format _ dropdown . options [ format _ dropdown . selectedIndex ] . ;   fig . ondownload ( fig ,   format ) ;   }   mpl . figure . prototype . handle _ resize   =   function ( fig ,   msg )   {   var   size   =   msg [ ' size ' ] ;     ( size [ 0 ]   ! =   fig . canvas . width   | |   size [ 1 ]   ! =   fig . canvas . height )   {   fig ._ resize _ canvas ( size [ 0 ] ,   size [ 1 ] ) ;   fig . send _ message ( \" refresh \" ,   { } ) ;   } ;   }   mpl . figure . prototype . handle _ rubberband   =   function ( fig ,   msg )   {   var   x0   =   msg [ ' x0 ' ]   /   mpl . ratio ;   var   y0   =   ( fig . canvas . height   -   msg [ ' y0 ' ] )   /   mpl . ratio ;   var   x1   =   msg [ ' x1 ' ]   /   mpl . ratio ;   var   y1   =   ( fig . canvas . height   -   msg [ ' y1 ' ] )   /   mpl . ratio ;   x0   =   Math . floor ( x0 )   +   0.5 ;   y0   =   Math . floor ( y0 )   +   0.5 ;   x1   =   Math . floor ( x1 )   +   0.5 ;   y1   =   Math . floor ( y1 )   +   0.5 ;   var   min _ x   =   Math . min ( x0 ,   x1 ) ;   var   min _ y   =   Math . min ( y0 ,   y1 ) ;   var   width   =   Math . abs ( x1   -   x0 ) ;   var   height   =   Math . abs ( y1   -   y0 ) ;   fig . rubberband _ context . clearRect (   0 ,   0 ,   fig . canvas . width ,   fig . canvas . height ) ;   fig . rubberband _ context . strokeRect ( min _ x ,   min _ y ,   width ,   height ) ;   }   mpl . figure . prototype . handle _ figure _ label   =   function ( fig ,   msg )   {   / /   Updates     figure   title .   fig . header . textContent   =   msg [ ' label ' ] ;   }   mpl . figure . prototype . handle _ cursor   =   function ( fig ,   msg )   {   var   cursor   =   msg [ ' cursor ' ] ;   switch ( cursor )   {   case   0 :   cursor   =   ' pointer ' ;   break ;   case   1 :   cursor   =   ' default ' ;   break ;   case   2 :   cursor   =   ' crosshair ' ;   break ;   case   3 :   cursor   =   ' move ' ;   break ;   }   fig . rubberband _ canvas . style . cursor   =   cursor ;   }   mpl . figure . prototype . handle _ message   =   function ( fig ,   msg )   {   fig . message . textContent   =   msg [ ' message ' ] ;   }   mpl . figure . prototype . handle _ draw   =   function ( fig ,   msg )   {   / /   Request     server     send     a     figure .   fig . send _ draw _ message ( ) ;   }   mpl . figure . prototype . handle _ image _ mode   =   function ( fig ,   msg )   {   fig . image _ mode   =   msg [ ' mode ' ] ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Called       canvas     updated .   . send _ message ( \" ack \" ,   { } ) ;   }   / /   A   function     construct   a   web   socket   function     onmessage   handling .   / /   Called       figure   constructor .   mpl . figure . prototype ._ make _ _ message _ function   =   function ( fig )   {   return   function   socket _ _ message ( evt )   {     ( evt . data   instanceof   Blob )   {   / *   FIXME :   We     \" Resource   interpreted     Image     *   transferred     MIME   type   text / plain : \"   errors     *   Chrome .   But       set     MIME   type   It   doesn ' t     *       part       websocket   stream   * /   evt . data . type   =   \" image / png \" ;   / *   Free     memory       previous   frames   * /     ( fig . imageObj . src )   {   ( window . URL   | |   window . webkitURL ) . revokeObjectURL (   fig . imageObj . src ) ;   }   fig . imageObj . src   =   ( window . URL   | |   window . webkitURL ) . createObjectURL (   evt . data ) ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }       ( typeof   evt . data   = = =   ' string '   &&   evt . data . slice ( 0 ,   21 )   = =   \" data : image / png ; base64 \" )   {   fig . imageObj . src   =   evt . data ;   fig . updated _ canvas _ event ( ) ;   fig . waiting   =   false ;   return ;   }   var   msg   =   JSON . parse ( evt . data ) ;   var   msg _ type   =   msg [ ' type ' ] ;   / /   Call     \" handle _ { type } \"   callback ,     takes   / /     figure     JSON   message         arguments .     {   var   callback   =   fig [ \" handle _ \"   +   msg _ type ] ;   }   catch   ( e )   {   console . log ( \" No   handler       ' \"   +   msg _ type   +   \" '   message   type :   \" ,   msg ) ;   return ;   }     ( callback )   {     {   / /   console . log ( \" Handling   ' \"   +   msg _ type   +   \" '   message :   \" ,   msg ) ;   callback ( fig ,   msg ) ;   }   catch   ( e )   {   console . log ( \" Exception   inside     ' handler _ \"   +   msg _ type   +   \" '   callback : \" ,   e ,   e . stack ,   msg ) ;   }   }   } ;   }   / /     http : / / stackoverflow . / questions / 1114465 / - mouse - location - - canvas   mpl . findpos   =   function ( e )   {   / /   section       http : / / www . quirksmode . org / js / events _ properties . html   var   targ ;     ( ! e )   e   =   window . event ;     ( e . target )   targ   =   e . target ;       ( e . srcElement )   targ   =   e . srcElement ;     ( targ . nodeType   = =   3 )   / /   defeat   Safari   bug   targ   =   targ . parentNode ;   / /   jQuery   normalizes     pageX     pageY   / /   pageX , Y       mouse   positions   relative       document   / /   offset ( )   returns     position       element   relative       document   var   x   =   e . pageX   -   $ ( targ ) . offset ( ) . left ;   var   y   =   e . pageY   -   $ ( targ ) . offset ( ) . top ;   return   { \" x \" :   x ,   \" y \" :   y } ;   } ;   / *   *   return   a   copy       object       - object   keys   *           avoid   circular   references   *   http : / / stackoverflow . / a / 24161582 / 3208463   * /   function   simpleKeys   ( original )   {   return   Object . keys ( original ) . reduce ( function   ( obj ,   key )   {     ( typeof   original [ key ]   ! = =   ' object ' )   obj [ key ]   =   original [ key ]   return   obj ;   } ,   { } ) ;   }   mpl . figure . prototype . mouse _ event   =   function ( event ,   )   {   var   canvas _ pos   =   mpl . findpos ( event )     (   = = =   ' button _ press ' )   {   . canvas . focus ( ) ;   . canvas _ div . focus ( ) ;   }   var   x   =   canvas _ pos . x   *   mpl . ratio ;   var   y   =   canvas _ pos . y   *   mpl . ratio ;   . send _ message ( ,   { x :   x ,   y :   y ,   button :   event . button ,   step :   event . step ,   guiEvent :   simpleKeys ( event ) } ) ;   / *   This   prevents     web   browser     automatically   changing     *     text   insertion   cursor       button     pressed .   We     *     control         cursor   setting   manually       *   ' cursor '   event     matplotlib   * /   event . preventDefault ( ) ;   return   false ;   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   / /   Handle     extra   behaviour       a   key   event   }   mpl . figure . prototype . key _ event   =   function ( event ,   )   {   / /   Prevent   repeat   events     (   = =   ' key _ press ' )   {     ( event .   = = =   ._ key )   return ;     ._ key   =   event . ;   }     (   = =   ' key _ release ' )   ._ key   =   null ;   var     =   ' ' ;     ( event . ctrlKey   &&   event .   ! =   17 )     + =   \" ctrl + \" ;     ( event . altKey   &&   event .   ! =   18 )     + =   \" alt + \" ;     ( event . shiftKey   &&   event .   ! =   16 )     + =   \" shift + \" ;     + =   ' k ' ;     + =   event . . toString ( ) ;   ._ key _ event _ extra ( event ,   ) ;   . send _ message ( ,   { key :   ,   guiEvent :   simpleKeys ( event ) } ) ;   return   false ;   }   mpl . figure . prototype . toolbar _ button _ onclick   =   function ( )   {     (   = =   ' download ' )   {   . handle _ save ( ,   null ) ;   }     {   . send _ message ( \" toolbar _ button \" ,   { :   } ) ;   }   } ;   mpl . figure . prototype . toolbar _ button _ onmouseover   =   function ( tooltip )   {   . message . textContent   =   tooltip ;   } ;   mpl . toolbar _ items   =   [ [ \" Home \" ,   \" Reset   original   view \" ,   \" fa   fa - home   icon - home \" ,   \" home \" ] ,   [ \" Back \" ,   \" Back     previous   view \" ,   \" fa   fa - arrow - left   icon - arrow - left \" ,   \" back \" ] ,   [ \" Forward \" ,   \" Forward       view \" ,   \" fa   fa - arrow -   icon - arrow - \" ,   \" forward \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Pan \" ,   \" Pan   axes     left   mouse ,   zoom     \" ,   \" fa   fa - arrows   icon - move \" ,   \" pan \" ] ,   [ \" Zoom \" ,   \" Zoom     rectangle \" ,   \" fa   fa - square - o   icon - check - empty \" ,   \" zoom \" ] ,   [ \" \" ,   \" \" ,   \" \" ,   \" \" ] ,   [ \" Download \" ,   \" Download   plot \" ,   \" fa   fa - floppy - o   icon - save \" ,   \" download \" ] ] ;   mpl . extensions   =   [ \" eps \" ,   \" jpeg \" ,   \" pdf \" ,   \" png \" ,   \" ps \" ,   \" raw \" ,   \" svg \" ,   \" tif \" ] ;   mpl . default _ extension   =   \" png \" ; var   comm _ websocket _ adapter   =   function ( comm )   {   / /   Create   a   \" websocket \" -   object     calls       IPython   comm   / /   object         methods .   Currently       a     binary   / /   socket ,             room     performance   tuning .   var   ws   =   { } ;   ws . close   =   function ( )   {   comm . close ( )   } ;   ws . send   =   function ( m )   {   / / console . log ( ' sending ' ,   m ) ;   comm . send ( m ) ;   } ;   / /   Register     callback     _ msg .   comm . _ msg ( function ( msg )   {   / / console . log ( ' receiving ' ,   msg [ ' content ' ] [ ' data ' ] ,   msg ) ;   / /   Pass     mpl   event       overridden   (   mpl )   onmessage   function .   ws . onmessage ( msg [ ' content ' ] [ ' data ' ] )   } ) ;   return   ws ;   }   mpl . mpl _ figure _ comm   =   function ( comm ,   msg )   {   / /   This       function       called       mpl   process   / /   starts -     IPython   Comm       \" matplotlib \"   channel .   var   id   =   msg . content . data . id ;   / /   Get   hold       div   created       display   call       Comm   / /   socket     opened     Python .   var   element   =   $ ( \" # \"   +   id ) ;   var   ws _ proxy   =   comm _ websocket _ adapter ( comm )   function   ondownload ( figure ,   format )   {   window . open ( figure . imageObj . src ) ;   }   var   fig   =     mpl . figure ( id ,   ws _ proxy ,   ondownload ,   element . ( 0 ) ) ;   / /   Call   onopen     -   mpl     ,         assuming   ' ve   passed     a   real   / /   web   socket       closed ,       websocket - > open   comm   proxy .   ws _ proxy . onopen ( ) ;   fig . parent _ element   =   element . ( 0 ) ;   fig . cell _ info   =   mpl . find _ output _ cell ( \" < div   id = ' \"   +   id   +   \" ' > < / div > \" ) ;     ( ! fig . cell _ info )   {   console . error ( \" Failed     find   cell     figure \" ,   id ,   fig ) ;   return ;   }   var   output _ index   =   fig . cell _ info [ 2 ]   var   cell   =   fig . cell _ info [ 0 ] ;   } ;   mpl . figure . prototype . handle _ close   =   function ( fig ,   msg )   {   var   width   =   fig . canvas . width / mpl . ratio   fig . root . unbind ( ' remove ' )   / /   Update     output   cell         data       current   canvas .   fig . push _ _ output ( ) ;   var   dataURL   =   fig . canvas . toDataURL ( ) ;   / /   Re - enable     keyboard   manager     IPython   -       line ,     FF ,   / /     notebook   keyboard   shortcuts   fail .   IPython . keyboard _ manager . enable ( )   $ ( fig . parent _ element ) . html ( ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ) ;   fig . close _ ws ( fig ,   msg ) ;   }   mpl . figure . prototype . close _ ws   =   function ( fig ,   msg ) {   fig . send _ message ( ' closing ' ,   msg ) ;   / /   fig . ws . close ( )   }   mpl . figure . prototype . push _ _ output   =   function ( remove _ interactive )   {   / /   Turn     data       canvas     data       output   cell .   var   width   =   . canvas . width / mpl . ratio   var   dataURL   =   . canvas . toDataURL ( ) ;   . cell _ info [ 1 ] [ ' text / html ' ]   =   ' < img   src = \" '   +   dataURL   +   ' \"   width = \" '   +   width   +   ' \" > ' ;   }   mpl . figure . prototype . updated _ canvas _ event   =   function ( )   {   / /   Tell   IPython       notebook   contents     change .   IPython . notebook . set _ dirty ( true ) ;   . send _ message ( \" ack \" ,   { } ) ;   var   fig   =   ;   / /   Wait   a   ,     push       image       DOM     / /         saved   nicely   (     nice     debounce   ) .   setTimeout ( function   ( )   {   fig . push _ _ output ( )   } ,   1000 ) ;   }   mpl . figure . prototype ._ init _ toolbar   =   function ( )   {   var   fig   =   ;   var   nav _ element   =   $ ( ' < div / > ' )   nav _ element . attr ( ' style ' ,   ' width :   100% ' ) ;   . root . append ( nav _ element ) ;   / /   Define   a   callback   function       .   function   toolbar _ event ( event )   {   return   fig . toolbar _ button _ onclick ( event [ ' data ' ] ) ;   }   function   toolbar _ mouse _ event ( event )   {   return   fig . toolbar _ button _ onmouseover ( event [ ' data ' ] ) ;   }   ( var   toolbar _ ind     mpl . toolbar _ items ) {   var     =   mpl . toolbar _ items [ toolbar _ ind ] [ 0 ] ;   var   tooltip   =   mpl . toolbar _ items [ toolbar _ ind ] [ 1 ] ;   var   image   =   mpl . toolbar _ items [ toolbar _ ind ] [ 2 ] ;   var   method _   =   mpl . toolbar _ items [ toolbar _ ind ] [ 3 ] ;     ( ! )   {   continue ;   } ;   var   button   =   $ ( ' < button   class = \" btn   btn - default \"   href = \" # \"   title = \" '   +     +   ' \" > < i   class = \" fa   '   +   image   +   '   fa - lg \" > < / i > < / button > ' ) ;   button . click ( method _ ,   toolbar _ event ) ;   button . mouseover ( tooltip ,   toolbar _ mouse _ event ) ;   nav _ element . append ( button ) ;   }   / /   Add     status   bar .   var   status _ bar   =   $ ( ' < span   class = \" mpl - message \"   style = \" text - align : ;   float :   ; \" / > ' ) ;   nav _ element . append ( status _ bar ) ;   . message   =   status _ bar [ 0 ] ;   / /   Add     close   button       window .   var   buttongrp   =   $ ( ' < div   class = \" btn - group   inline   pull - \" > < / div > ' ) ;   var   button   =   $ ( ' < button   class = \" btn   btn - mini   btn - primary \"   href = \" # \"   title = \" Stop   Interaction \" > < i   class = \" fa   fa - power -   icon - remove   icon - large \" > < / i > < / button > ' ) ;   button . click ( function   ( evt )   {   fig . handle _ close ( fig ,   { } ) ;   }   ) ;   button . mouseover ( ' Stop   Interaction ' ,   toolbar _ mouse _ event ) ;   buttongrp . append ( button ) ;   var   titlebar   =   . root . find ( $ ( ' . ui - dialog - titlebar ' ) ) ;   titlebar . prepend ( buttongrp ) ;   }   mpl . figure . prototype ._ root _ extra _ style   =   function ( el ) {   var   fig   =     el . ( \" remove \" ,   function ( ) {   fig . close _ ws ( fig ,   { } ) ;   } ) ;   }   mpl . figure . prototype ._ canvas _ extra _ style   =   function ( el ) {   / /       important     make     div   ' focusable   el . attr ( ' tabindex ' ,   0 )   / /   reach       IPython         keyboard   manager     turn   ' s     / /         div     focus   / /   location     version   3     ( IPython . notebook . keyboard _ manager )   {   IPython . notebook . keyboard _ manager . register _ events ( el ) ;   }     {   / /   location     version   2   IPython . keyboard _ manager . register _ events ( el ) ;   }   }   mpl . figure . prototype ._ key _ event _ extra   =   function ( event ,   )   {   var   manager   =   IPython . notebook . keyboard _ manager ;     ( ! manager )   manager   =   IPython . keyboard _ manager ;   / /   Check     shift + enter     ( event . shiftKey   &&   event .   = =   13 )   {   . canvas _ div . blur ( ) ;   event . shiftKey   =   false ;   / /   Send   a   \" J \"           cell   event .   =   74 ;   event . keyCode   =   74 ;   manager . command _ mode ( ) ;   manager . handle _ keydown ( event ) ;   }   }   mpl . figure . prototype . handle _ save   =   function ( fig ,   msg )   {   fig . ondownload ( fig ,   null ) ;   }   mpl . find _ output _ cell   =   function ( html _ output )   {   / /   Return     cell     output   element         found   * uniquely *       notebook .   / /   Note   -       a   bit   hacky ,               \" notebook _ saving . Notebook \"   / /   IPython   event     triggered         cells       serialised ,       / /     purposes   ( turning     active   figure     a   static   ) ,       late .   var   cells   =   IPython . notebook . _ cells ( ) ;   var   ncells   =   cells . length ;     ( var   i = 0 ;   i < ncells ;   i ++ )   {   var   cell   =   cells [ i ] ;     ( cell . cell _ type   = = =   ' code ' ) {     ( var   j = 0 ;   j < cell . output _ area . outputs . length ;   j ++ )   {   var   data   =   cell . output _ area . outputs [ j ] ;     ( data . data )   {   / /   IPython   > =   3   moved   mimebundle     data   attribute     output   data   =   data . data ;   }     ( data [ ' text / html ' ]   = =   html _ output )   {   return   [ cell ,   data ,   j ] ;   }   }   }   }   }   / /   Register     function     deals       matplotlib   target / channel .   / /   The   kernel       null       page       refreshed .     ( IPython . notebook . kernel   ! =   null )   {   IPython . notebook . kernel . comm _ manager . register _ target ( ' matplotlib ' ,   mpl . mpl _ figure _ comm ) ;   }   Out [ 19 ] :   < matplotlib . axes ._ subplots . AxesSubplot     0x20cbadc0828 >   In   [   ] :",
            "tags":"机器学习",
            "url":"articles/shu-ju-hui-tu.html"
        },
        {
            "title":"读取数据",
            "text":"In   [ 1 ] :   import   numpy     np   import   pandas     pd   文本 读取数据     linux     ! cat   . txt     windows     ! type   . txt   In   [ 5 ] :   test _ csv   =   ' . / examples / test . csv '   print   (   *   open   (   test _ csv   ) )   a , b , c , d , message   1 , 2 , 3 , 4 ,   5 , 6 , 7 , 8 , world   9 , 10 , 11 , 12 , foo   In   [ 6 ] :   df   =   pd   .   read _ csv   (   test _ csv   )   In   [ 7 ] :   df   Out [ 7 ] :   . dataframe   tbody   tr   : - - type   {   vertical - align :   middle ;   }   . dataframe   tbody   tr     {   vertical - align :   top ;   }   . dataframe   thead     {   text - align :   ;   }   a   b   c   d   message   0   1   2   3   4     1   5   6   7   8   world   2   9   10   11   12   foo   header 情况   指定   header = None   ， 将会 自动 分配 0 ,   1 ,   2 header ，   names = [ ' a ' , ' b ' ]   指定 , csv 数据源 header ，   skiprows   跳 不 想要 header 。   In   [ 10 ] :   df2   =   pd   .   read _ csv   (   test _ csv   ,   names   =   [   ' d '   ,   ' c '   ,   ' b '   ,   ' a '   ,   ' info '   ] ,   skiprows   =   [   0   ] )   df2   Out [ 10 ] :   . dataframe   tbody   tr   : - - type   {   vertical - align :   middle ;   }   . dataframe   tbody   tr     {   vertical - align :   top ;   }   . dataframe   thead     {   text - align :   ;   }   d   c   b   a   info   0   1   2   3   4     1   5   6   7   8   world   2   9   10   11   12   foo   In   [ 15 ] :     open   (   ' examples / test . json '   ,   ' w '   )     f   :   print   (   df2   .   _ json   ( ) ,   file   =   f   )   读入 excel   读入 微软 excel 文件 , 安装   xlrd   模块 。   In   [ 20 ] :   pd3   =   pd   .   read _ excel   (   ' examples / test . xlsx '   )   pd3   Out [ 20 ] :   . dataframe   tbody   tr   : - - type   {   vertical - align :   middle ;   }   . dataframe   tbody   tr     {   vertical - align :   top ;   }   . dataframe   thead     {   text - align :   ;   }   a   b   c   d   message   0   1   2   3   4     1   5   6   7   8   world   2   9   10   11   12   foo   读取 html 文件   ， pandas 还 读取 分析 html 文件   In   [ 56 ] :   pd4   =   pd   .   read _ html   (   ' examples / benzene . html '   )     index   ,   i     enumerate   (   pd4   [   2   ] [   0   ] ) :     i   = =   ' 化学式 '   :   print   (   pd4   [   2   ] [   1   ] [   index   ] )   C6H6   In   [   ] :",
            "tags":"机器学习",
            "url":"articles/du-qu-shu-ju.html"
        },
        {
            "title":"nginx web服务器",
            "text":"前言   nginx 官方 文档     ， 参看 官方 文档 。   安装   debian 系 安装 :   sudo   apt -   install   nginx   rpm 系统 安装 :   sudo   yum   install   nginx   nginx 配置 基础   nginx 配置   / / nginx / sites -   新建 一个 配置文件 ， 创建 一个 符号 链接   sites - enabled   。   sudo   ln   - s   / / nginx / sites - / cdwanze . work   / / nginx / sites - enabled / cdwanze . work   重启 nginx 即可 。   sudo   service   nginx   restart   nginx 配置文件 格式 :   < section >   {   < directive >   < parameters > ;   }   nginx 命令行   nginx   - t   测试   nginx   - s   stop   快速 停用 nginx   nginx   - s   quit   温和 退出 nginx   nginx   - s   reload   重载 配置文件   ​   通用 配置   通用 配置   global   section   ， 配置 影响 server ， 常在   nginx . conf   中 配置 。   user   当前工作 进程 下 user 用户名 。   worker _ processes   工作 进程 数 ，   server - configs - nginx   项目 中 推荐 设置 :   #   Sets     worker   threads       number     CPU   cores         system       performance .   #   Should     >     number     CPU   cores .   #   Maximum   number     connections   =   worker _ processes   *   worker _ connections   worker _ processes   auto ;   error _ log   地方 没 设置 ， 默认 错误 日志 输出 路径 。   推荐   / / nginx / logs     / var / log / nginx   ln 命令 统一 ：   ln   - s   / var / log / nginx   / / nginx / logs   http 配置   http   http   section 配置 ， 其是 基于 http   module 。 http   section 一句 :   include   sites - enabled / * ;   }   额外 站点 配置 放在   sites - enabled   文件夹 下 管理 ， 提到 server   放入 http   中 ， 在实践中 会 创建 一个   sites -   文件夹 ， 创建 站点 配置 ， 启用 ln   命令 创建 一个 符号 链接 。   keepalive _ timeout   设置 响应 头   KeepAlive   时间 。   server _ tokens   默认   推荐 。 nginx 版本信息 隐藏 。   需求 配置 。 比如说   client _ max _ body _ size   ， nginx 请求 实体 过大 错误信息 :   Nginx   413   Request   Entity   Too   Large   参考   网页   ， http   section 配置 :   #   set   client   body   size     2M   #   client _ max _ body _ size   2M ;   server 配置   listen server _   配置 很 关键 ， 请 参看 附录 介绍 nginx 分配 请求 逻辑 。   location 配置   location 配置 放在   server 。   location 描述   url   做 动作 。   url 匹配 ， nginx 正则表达式 最长 匹配 最佳 匹配 ， 再 正则表达式 匹配 。   静态 文件 服务 ：   location   / static   {   root   / whrer / / static ;   }   反向 代理服务 ：   location   /   {   proxy _ pass   http   :   / /   127.0 . 0.1   :   5000   ;   }   反向 代理 ， 一个 很 知识点 uri 改写 规则 。 东西 很多 ， :   location   /   socket   .   io   {   proxy _ pass   http   :   / /   127.0 . 0.1   :   5000   /   socket   .   io   ;   }   匹配 会 改写   http : / / 127.0 . 0.1 : 5000 / socket . io   例外 情况 ， 再 详细 讨论 。   root alias 区别   比如说 想要 服务 静态 文件 ：   location   / static /   {   root   / home / cdwanze / project / tinyblog ;   autoindex   ;   }   root ， root 找 ，   / static /     url   传过来   full   path 。 root ， 再 指定 static 文件夹 名 。     alias ：   location   / static /   {   alias   / home / cdwanze / project / tinyblog / static ;   autoindex   ;   }   / static /   替换   / home / cdwanze / project / tinyblog / static /   去 找 文件 。   小节 参考   网页   。   附录   nginx 分配 请求 逻辑   这部分 内容 很 关键 ， 慢慢 看下 。   请求 ip 端口号 核对   listen   信息 。   请求 Host 字段 核对   server _   信息 。   核对 分为   通配符 前   核对   通配符 后   核对   正则表达式   核对   listen server _ 核对 都 匹配 都 会 回滚 默认   default _ server   中 。 ( 实践 中 推荐 default _ server   return   444 ， 提升 服务器 访问 级别 。 )   server   {   listen   80   default _ server ;   return   444 ;   }   核对 匹配 进一步 配置 请求 。   403 权限 访问 错误   用户 主 文件夹 下 随便 文件夹 写 网页 ， nginx server   root   配置 好后 会   403 错误 ， 很   nginx . conf   文件   user   配置 ， 设置 为本 用户 ， 才 无 权限 操作 。 ubuntu 下 user 好像 默认 var - www 。 改为 用户名 即可 。 参看   网页   。   参考资料   mastering   nginx   nginx   官方 手册",
            "tags":"linux",
            "url":"articles/nginx-web-server.html"
        },
        {
            "title":"jinja2模板",
            "text":"前言   jinja2 模板 flask pelican 中 都 ， django 框架 中 ， 模版 语法 大体 类似 ， jinja2 模板 很 值得 一学 。   注释   内容 模板 文件 注释 内容 。   { #   ...   # }   变量   所示 ， 包含 变量 ， jinja2 渲染 模板 会 解析 变量 。   { {   ...   } }     object . a   dot 法 引用 ，   object [ ' a ' ]   写法 ， 调用 实例 方法   object . func ( )   都 支持 。   过滤器 filters   变量 进一步 加上 过滤器 进一步 。 过滤器 类似 linux 系统 管道 作业 风格 ， 多个 过滤器 叠加 ， ：   { {   var   |   striptags   |   title   } }   。   jinja2 中 内置 过滤器 ：   safe   渲染 值 不 转义   capitalize   值 首字母 大写   字母 小写   lower   字母 都 小写   upper   字母 都 大写   title   值 单词 首字母 大写   trim   值 首尾 空格 去除   striptags   渲染 HTML 标签 去掉   safe 过滤器 请 参看 讨论 特殊符号 。   html 特殊符号   变量 html 特殊符号 :   <   >   &   \"   jinja2 模板 系统 默认 不 做 ， 配置 全局 自动 escape 。 ：     jinja2   import   Template   t   =   Template   (   ' test   { {   x   } } '   )   t   .   render   (   x   =   ' < h1 > abc < / h1 > '   )   ' test   < h1 > abc < / h1 > '   上 输出 html 中是 html 效果 ，   escape   过滤器 转义 特殊符号 :   t   =   Template   (   ' test   { {   x | escape   } } '   )   t   .   render   (   x   =   ' < h1 > abc < / h1 > '   )   ' test   & lt ; h1 & gt ; abc & lt ; / h1 & gt ; '   转义 输出 html 中 单纯 显示   <   >   符号 ， 不 html 效果 。   flask 设置 全局 auto   escape ， 这是 正确 。 确实 html 标签 希望 html 标签 形式 显示 ， 不 escape ， 采用   safe   过滤器   1   。   { {   \" < b > test < / b > \"   |   safe   } }   语句   条件 分支 用于 条件 显示 内容 。   { %     user   % }   Hello ,   { {   user   } }   !   { %     % }   Hello   ,   stranger !   { %   endif   % }   语句   语句 结构 所示 :   < ul >   { %     user     users   % }   < li >   { {   user . username   } }   < / li >   { %   endfor   % }   < / ul >   移除 块 空白   空白 指   空格 ， 制表符 ， 换行符 ， jinja2 这块 全局 配置 选项 。 手工 配置 ， 大体 加上   -   跟上 一个   trim _ blocks   操作 。   { %     item     seq   -   % }   { {   item   } }   { %   -   endfor   % }   模板 文件 继承 机制   jinja2 模板 文件 一种 继承 机制 ， 基于 模板 文件 建构 出 一个 模板 文件 。 父 模板 （ 模板 文件 模板 文件 ） 构建 block 区块 ， 所示 :   < title >   { %   block   title   % }   { %   endblock   % }   < / title >   构建 一个 title 区块 。   子 模板 继承 父 模板 内容 :   { %   extends   \" base . html \"   % }   定制 ， 比如说 title ， 做成 block ， 子 模板 文件 定义 title   block :   { %   extends   \" base . html \"   % }   { %   block   title   % }     awesome   title   { %   endblock   % }   子 模块 block 重载 ， 还   { {   super   ( )   } }   加载 父 模块 block 中 定义 。   title   block 内容 引用 :   { {   . title   ( )   } }   宏   宏   python 函数 类似 ， 即将 展开 。   { %   macro   render _ comment   (   comment   )   % }   < li >   { {   comment   } }   < / li >   { %   endmacro   % }   < ul >   { %     comment     comments   % }   { {   render _ comment   (   comment   )   } }   { %   endfor   % }   < / ul >   外部 宏 文件   引入   {   %   import   ' macros . html '     macros   %   }   <   ul   >   {   %     comment     comments   %   }   { {   macros   .   render _ comment   (   comment   )   } }   {   %   endfor   %   }   < /   ul   >   import   模板 传递 上下文 ， 上下文 传递 引入 进来 模板 ：   {   %     ' forms . html '   import   input     context   %   }   include   宏 文件 推荐 import ， 模板 文件 继承 机制 ， include 语句 ？   模板 代码 片段 反复 推荐 include 语句 。   { %   include   ' common . html '   % }   include 语句 传递 上下文 ：   { %   include   ' header . html '     context   % }   Footnotes :   1   参考   [ 网页 ] ( http : / / stackoverflow . / questions / 3206344 / passing - html - - template - - flask - jinja2 )   。",
            "tags":"python好伙伴",
            "url":"articles/jinja2-template.html"
        },
        {
            "title":"beautifulsoup模块",
            "text":"简介   BeautifulSoup 模块 python 网页 分析 一块 很 有名 一个 模块 ， 确实 网页 分析 变得 轻松 easy 。 本文 bs4 模块 简单 介绍 ， 更 细节 请 参看   官方 文档   。   安装   安装 简单 pip 命令 安装 :   sudo   pip   install   beautifulsoup   第一个 例子   上 python2 python3 urllib 相关 改动 很大 ， 加上 urllib 上 很 友好 ， 强烈推荐 requests 模块 相关 操作 。 beautifulsoup 引入 语句 所示 :     bs4   import   BeautifulSoup   最 简单 requests 组合 所示 :   import   requests     bs4   import   BeautifulSoup   res   =   requests   .     (   \" http : / / www . pythonscraping . / exercises / exercise1 . html \"   )   soup   =   BeautifulSoup   (   res   .   text   )   print   (   soup   .   title   )   soup . title 返回 一个 标签 对象 。 标签 对象 标签 点 号 索引 标签 :   > > >   soup . body . h1   < h1 >   An   Interesting   Title   < / h1 >   读者 想 ， 文档 p 标签 很多 ， soup 会 返回 ？   import   requests     bs4   import   BeautifulSoup   res   =   requests   .     (   \" http : / / www . crummy . / software / BeautifulSoup / bs4 / doc / \"   )   soup   =   BeautifulSoup   (   res   .   text   )   print   (   soup   .   p   )   soup 返回 第一个 p 标签 ， 看作 讲 find 方法 简化 css 索引 形式 。   find 方法   所示 最 简单 find 定位 实际上 类似   soup . p   用法 。 find 方法 更 内容 。   > > >   soup . find ( ' p ' )   < p > < a   class =   \" reference   external \"   href =   \" http : / / www . crummy . / software / BeautifulSoup / \"   >   Beautiful   Soup   < / a >     a   Python   library     pulling   data       HTML     XML   files .   It   works       favorite   parser     provide   idiomatic   ways     navigating ,   searching ,     modifying     parse   tree .   It   commonly   saves   programmers   hours     days     work .   < / p >   find 方法 找 不到 返回 None ， 找到 返回 目标 标签 元素 。   > > >   soup . test     None   True   过滤器   find 方法 最 常用 形式 接受 一个 参数 ， 参数 过滤器 参数 。 过滤器 字符串 正则表达式 列表 ， 列表 元素 基于 谈及 字符串 正则表达式 ， 逻辑 ， 符合 一个 匹配 条件 匹配 。   第一个 参量 参量 针对 tag 操作 ， 简单 字符串 够用 ， 正则表达式 ，   . compile ( \" &# 94 ; b \" )   形式 ， 其内 正则表达式   match   方法 （ 稍作 测试 ， . search 。 ） 。   额外 一提 过滤器   True   ， 其会 匹配 值 ， 比如说   id = True   ， 将会 匹配 id 属性 标签 。   class _ 参量     class _ =   过滤 标签 class 属性 ， python class 关键词 区分 ， 加上 一个 下划线 ， 接受 一个 过滤器 。   id 参量     id =   定位 网页 中 id ， 接受 一个 过滤器 。   text 参量   网页 标签 内 字符串 过滤 操作 ， 提及 过滤器 都 ， 字符串 精确 匹配 估计 用得会 少 。 尽可能 地用 正则表达式 。 单独 text 参量   soup . find _ ( text = . compile ( ' ' ) )   标签 字符串 会 搜索 ， 返回 不 标准 标签 元素 对象 ， 很 不好 。 推荐 采用 形式 :   soup . find _ ( True , text = . compile ( ' ' ) )   返回 必定 标签 元素 ， text 必定 只 搜索 标签 text 字符串 内容 ， 更 易于 理解 。   搜索 完 定位 小 标签 ，   < b >   ， 目标 标签 元素   . parent   ， 返回 更高 一级 标签 元素 ， 会 很 有用 :   soup . find _ ( True , text = . compile ( ' ' ) ) [ - 1 ] . parent   keywords   标签 属性 都 类似 关键词 加上 过滤器 搜索 。   oup . find _ ( href = . compile ( \" elsie \" ) )   recursive 参量   recursive 默认 True ， 检索 tag 子孙 节点 ， 只想 搜索 tag 第一级 子 节点 ，   recursive = False   。   limit 参量   只 find _ 才 意义 ， 返回 几个 元素 。   find _ 方法   find _ find 方法 API 类似 ， find _ 返回 一系列 匹配 标签 元素 列表 。 顺便 提 ， find 方法 find _ 方法 接受 多个 参数 限定 ， 限定 条件 看作 逻辑 关系 。   标签 元素 对象   标签 元素 见 例子 :   > > >   import     > > >   soup   .   find   (   True   ,   text   =     .   compile   (   \" sister \"   ) )   <   span   class   =   \" s \"   > <   p   class   =   \" story \"   >   Once     a   time           sisters   ;       names     < /   span   >   > > >   thetag   =   soup   .   find   (   True   ,   text   =     .   compile   (   \" sister \"   ) )   > > >   thetag   .     ' span '   > > >   thetag   .   text   ' < p   class = \" story \" > Once     a   time           sisters ;       names   '   > > >   thetag   .   string   ' < p   class = \" story \" > Once     a   time           sisters ;       names   '   > > >   type   (   thetag   .   string   )   <   class   '   bs4   .   element   .   NavigableString   ' >   > > >   type   (   thetag   .   text   )   <   class   '   str   ' >   > > >   thetag   [   ' class '   ]   [   ' s '   ]   :   标签 对象 标签 名字   string :   返回 NavigableString 对象 ， 暂时 先 略过 讨论 。   text :   返回 标签 包含 文本 对象 。   _ text ( ) :   最新 bs4 文档 来看 ， 官方 文档 推荐 tag 获取 其内 文本 内容 都   _ text   方法 ，   thetag . text   形式 。   [ ' class ' ] :   属性 值 索引 ， \" class \" 属性 返回 一个 列表 ， 多值 属性 。   基于 标签 附加 查找     find     find _   找到 标签 对象 ， bs4 还给 标签 对象 加上 辅助 查找 方法 ， 基于 标签 对象 进一步 查找 ， 返回 标签 对象 。   平行 级别 标签   平行 级别 标签 指如 例子 :   < html >   < body >   < a >   < b >   text1   < / b >   < c >   text2   < / c >   < / a >   < d >   test3   < / d >   < / body >   < / html >   标签   标签 一个 html 文档 缩进 深度 ， 一个 层次 平行 标签 。     平行 标签 ，     。   平行 级别 下 标签   find _ _ sibling ( ,   attrs ,   string ,   * * kwargs )   才 外 返回 标签 对象 （ find _ 方法 ） 方法 :   find _ _ siblings ( ,   attrs ,   string ,   limit ,   * * kwargs )   例子 :   > > >   [   i     i     soup . a . _ siblings ]   [ ' \\ n ' ,   < d >   test3   < / d >   ,   ' \\ n ' ]   > > >   [   i     i     soup . b . _ siblings ]   [ ' \\ n ' ,   < c >   text2   < / c >   ,   ' \\ n ' ]   > > >   方法 用法 谈及   find     find _   类似 ， 令人 沮丧 ， beautifulsoup 换行符 干扰 ，   这篇 网页   中 提到 预处理 网页 换行符 都 换成 空格 ， 标签 之间 空格符 号 都 删除 解决方案 ， 很 完美 ， 解决 接受 ， 网络 抓取 实际上 进来 网页 简化 预处理 做 一步 工作 。   平行 级别 上 标签   平行 级别 上 标签 类似 描述 ， 往上走 ， 不 赘述 。   find _ previous _ sibling ( ,   attrs ,   string ,   * * kwargs )   返回 标签 对象 （ find _ 方法 ） 方法 :   find _ previous _ siblings ( ,   attrs ,   string ,   limit ,   * * kwargs )   非 平行 级别 标签   find _ parents ( ,   attrs ,   string ,   limit ,   * * kwargs )   find _ parent ( ,   attrs ,   string ,   * * kwargs )   find _ _ ( ,   attrs ,   string ,   limit ,   * * kwargs )   find _ ( ,   attrs ,   string ,   * * kwargs )   find _ _ previous ( ,   attrs ,   string ,   limit ,   * * kwargs )   find _ previous ( ,   attrs ,   string ,   * * kwargs )   . contents     . children   select 方法   select 方法 CSS 选择器 标签 元素 选择 。 原则上 谈论 方法 大部分 需求 ， 再 加上 针对 网站 网页 css 布局 抓取 ， 抓取 方法 很 不 灵活 很 局限性 ， select 方法 用户 备选 方案 。   移除 标签   s   =   soup . find ( ' ' )   s . extract ( )   解析 文档 提升 效率   请 函数 ， 用途 webpage a 连接 href 属性 链接 收集 。   def   _ webpage _ links   (   html   ,   baseurl   ) :   ' ' '   刷 本网页   a 标签     href   属性   links   绝对化 路径   去除 fragment   返回 字典 值去 重   ' ' '   soup   =   BeautifulSoup   (   html   ,   ' lxml '   ,   parse _   =   SoupStrainer   (   ' a '   ) )   links   =   [   link   .     (   ' href '   )     link     soup   .   find _   (   ' a '   ,   href   =   True   ) ]   links   =   [   _ absolute _ url   (   baseurl   ,   link   )     link     links   ]   links   =   [   remove _ url _ fragment   (   link   )     link     links   ]   return   set   (   links   )   :   soup   =   BeautifulSoup ( html ,   ' lxml ' ,   parse _ = SoupStrainer ( ' a ' ) )   parse _   参数 用于 控制 BeautifulSoup 刷 文档 时 创建 标签 元素 对象 ， 只 刷 标签 过滤 操作 ， 节省 工作量 。 参数 创建 一个   SoupStrainer   对象 ， 接受 过滤器 语法 叙述 。",
            "tags":"python爬虫",
            "url":"articles/beautifulsoup-module.html"
        },
        {
            "title":"scrapy模块",
            "text":"简介   老实 说 Scrapy 模块 Django 模块 实用 上 包括 内容 目录 结构 上 都 很 ， 两个 项目 干 两个 事情 ， 想 相似性 更 描述 类似 GUI 界面 那种 类似 。   尝试 写 一个 小 Spider 网络 爬虫 程序 ， 网络 爬取 大体 过程 都 类似 ， 学习 Scrapy 项目 大体 配置 ， 内部 原理 很 熟悉 ， 本文 地方 赘述 。   scrapy 一个 python 模块 ，   pip   安装 ， 安装 这块 不 说 。   新建 一个 项目   scrapy   startproject   project _   [ path ]   喜欢 创建 python venv 虚拟环境 ， path 设置   .   当前目录 下 。   接下来 编写 爬虫 Spider 脚本 配置 。   第一个 例子   一个 简单 例子 ：   class   MySpider   (   scrapy   .   Spider   ) :   user _ agent   =   _ random _ user _ agent   ( )     =   \" 7yrt \"   start _ urls   =   [   ' http : / / 7yrt . / html / rhrt / '   ]   allowed _ domains   =   [   ' http : / / 7yrt . / '   ]   def   parse   (     ,   response   ) :   url   =   response   .   url   html   =   response   .   text   ##           .   match   (   ' http : / / 7yrt . / html / rhrt / [ \\ d ] + / [ \\ d ] + / [ \\ d _ ] +. html '   ,   url   ) :   images   =   parse _ webpage _ images   (   url   ,   html   ,     =   ' div '   ,   class _   =   ' imgview '   )   title   =   response   .   xpath   (   ' / / h1 / text ( ) '   )   .   extract _   ( )     index   ,   image     enumerate   (   images   ) :   yield   MyItem   (   uuid   =   _ item _ uuid   (   url   ,   str   (   index   ) ) ,   image _ url   =   [   image   ] ,     =   title   )   #####       page   links   =   parse _ webpage _ links   (   url   ,   html   )     _ page     links   :   yield   scrapy   .   Request   (   _ page   ,   callback   =     .   parse   )   user _ agent   属性 改变 爬虫 情况 USER _ AGENT   HTTP 头 ， 设置 ， 爬虫 ban 。     爬虫 名字 ， 下 运行 爬虫 名字   scrapy   crawl   spider _   ， 定义 名字 。   scrapy   list   显示 爬虫 名字 。   start _ urls   爬虫 起始 开爬点 ， 官方 教程 提到   start _ requests   方法 ， 定义   start _ urls   很 简便 。   allowed _ domains     parse   方法 获取   _ page   定义 过滤 ， 更 简单 定义 站点 内 ， 熟悉 点 网络 爬虫 编写 原理 都 会 概念 ， 记得 还   settings . py   设置 ：   SPIDER _ MIDDLEWARES   =   {   ' scrapy . spidermiddlewares . offsite . OffsiteMiddleware ' :   None ,   }   parse 方法   parse 方法 类似 Django request 请求 response 概念 ， 简单 来说 一个 URL （ 网络 爬虫 模型 ） 都 会 送入 方法 ， 其要 工作 ：   针对 特定 url 获取数据   添加   page （ 其内 暗含 去 重 ， 舍弃 ， 过滤 ）   response 对象   response 对象 获取   response . text   送给 beautifulsoup ，   parse _ webpage _ images     parse _ webpage _ links   做 ， 两个 写 函数 很 简便 ， 没 效率 ， 真的 不在乎 一点 ， 还会 讨论 减缓 爬虫 爬取 速度 。   官方 教程 提到 response 对象 调用   css     xpath   方法 信息提取 工作 ， 简单 下 xpath 语法 ， 很 便捷 。   MyItem 对象   MyItem 对象   items . py   定义 ， 很 简单 ， 没 好 说 ， 一个 简单 python 对象 ， 存储 数据 。 不 喜欢 ， 临时 定义 一个 字典 值 。   settings . py 配置   减缓 访问速度   网络 爬取 中 ， ban （ 403 错误 由此而来 ） 大 。 开 代理 换 IP 挺 高 ， 手段 ， 都 settings . py ， 只 去 注释 。 大体 ：   DOWNLOAD _ DELAY   =   3   CONCURRENT _ REQUESTS _ PER _ DOMAIN   =   16   # CONCURRENT _ REQUESTS _ PER _ IP   =   16   #   Disable   cookies   ( enabled     default )   COOKIES _ ENABLED   =   False   设置 下载 访问 停顿 时间 并行 请求 数 禁用 cookies 。 禁用 cookies 之外 ， 几个 设置 不用 ， 请 官方 文档     。     settings . py   文件 些 ， 这是 一种 自动 节流 机制 ， 利用 下载 延迟 并行 数来 自动 调节 DELAY 时间 ，   AUTOTHROTTLE _ ENABLED   =   True   #   The   initial   download   delay   AUTOTHROTTLE _ START _ DELAY   =   5   #   The   maximum   download   delay       set     case     high   latencies   AUTOTHROTTLE _ MAX _ DELAY   =   60   #   The   average   number     requests   Scrapy       sending     parallel     #     remote   server   AUTOTHROTTLE _ TARGET _ CONCURRENCY   =   1.0   要说 自动 节流   DOWNLOAD _ DELAY     CONCURRENT _ REQUESTS _ PER _ DOMAIN   协作关系 。 自动 节流 最小 小过   DOWNLOAD _ DELAY   ， 大过   AUTOTHROTTLE _ MAX _ DELAY   。     AUTOTHROTTLE _ TARGET _ CONCURRENCY   一个 节流 建议 ， 极限 ， 单个 域名 并行 请求 数是   CONCURRENT _ REQUESTS _ PER _ DOMAIN   定义 。   JsonPipeline   pipelines . py   文件 定义 写 Pipeline 类 ， JsonPipeline 类 ：   class   JsonPipeline   (   object   ) :   def   __ init __   (     ) :     .   file   =   codecs   .   open   (   ' test . json '   ,   ' w '   ,   encoding   =   ' utf - 8 '   )   def   process _ item   (     ,   item   ,   spider   ) :   line   =   json   .   dumps   (   dict   (   item   ) ,   ensure _ ascii   =   False   ,   indent   =   4   )   +   \"   \\ n   \"     .   file   .   write   (   line   )   return   item   def   spider _ closed   (     ,   spider   ) :     .   file   .   close   ( )   大体 一个 简单 类 ， 特别 方法 特别 用处 。 jsonpipelie 不 实用价值 ， 简单 下 即可 。   ImagesPipeline   想要 自动 下载 图片 ， 没 ， scrapy 内置 功能 ！ 做 收集 好 图片 连接 。 设置 里 加上 一行 ：   ITEM _ PIPELINES   =   {   ' scrapy . pipelines . images . ImagesPipeline ' :   1 ,   }   设置 里 相关 配置 :   IMAGES _ STORE   =   ' / path / / download _ images '   IMAGES _ URLS _ FIELD   =   ' image _ url '   IMAGES _ RESULT _ FIELD   =   ' image '     IMAGES _ URLS _ FIELD   默认值   image _ urls   ， items 对象 加上 这一 属性 ， 其是 一个 列表 值 。   IMAGES _ RESULT _ FIELD   默认值   images   ，   值 ImagesPipeline 会 自动 填充 ， 不 。 改名字 是因为 不 喜欢 很多 图片 混在 ， 做 分开 。   MongoDBPipeline   想要 数据 实时 填入 mongodb 去 ？   MongoDBPipeline   即可 ，   pip   install   scrapy - mongodb   配置 加上   ITEM _ PIPELINES   =   {   ' scrapy _ mongodb . MongoDBPipeline ' :   400 ,   }   数字 执行 优先级 ， 没什么 特别 含义 。   配置 ：   MONGODB _ URI   =   ' mongodb : / / localhost : 27017 '   MONGODB _ DATABASE   =   ' myscrapy '   MONGODB _ UNIQUE _ KEY   =   ' uuid '   插件   MONGODB _ COLLECTION   值 默认   items   死 ， 还 很 满意 。   MONGODB _ UNIQUE _ KEY   还 不 ， 时间 。   测试 抓取   scrapy   shell   url   shell ， 有个   response   对象 ， 写 爬虫   parse 函数 response 对象 。 进一步 做 前期 测试 抓取 工作 。   settings 传递   爬虫 初始化 后 ，   . settings   ， 调用   settings . py   文件 配置 变量 。 写 pipeline ， ：   def   open _ spider   (     ,   spider   ) :     .   client   =   MongoClient   (     .   mongo _ uri   )     .   mongodb   =     .   client   [     .   mongo _ dbname   ]   spider   .   mongodb   =     .   mongodb   open _ spider   打开 爬虫 后 动作 ， 定义   . mongodb   目标 mongodb   数据库 对象 挂载   pipeline 上 ，   spider . mongodb   变量 挂 爬虫 上 ， 爬虫类 都   . mongodb   调用 目标 变量 ， 说 爬虫类   __ init __   方法 还 不大 。 写 pipeline   crawler . settings   配置 变量 ：   @ classmethod   def   _ crawler   (   cls   ,   crawler   ) :   return   cls   (   mongo _ uri   =   crawler   .   settings   .     (   ' MONGODB _ URI '   ) ,   mongo _ dbname   =   crawler   .   settings   .     (   ' MONGODB _ DATABASE '   )   )   xpath 语法   例子 简要 介绍 xpath 语法 ， 参考   阮 一峰 篇文章   菜鸟 教程 xpath 教程 。   选择 title   / / title   这是 选择 文档 中 任意 位置   title   标签 ，   /   开头 会 选择 根 节点 ， 不太好 。   选择 title 包含 文本   / / title / text ( )   id 选择   / / div [ @ id = ' post - date ' ] / text ( )   例子 选择 一个 div 标签 ， 其有 id 属性   post - date   ， div 改为   *   随便 标签 名字 。   往下选   / / * [ @ id = ' js _ profile _ qrcode ' ] / div / p [ 1 ] / span / text ( )   选择 目标 标签 属性   / / / / * [ @ id = ' js _ profile _ qrcode ' ] / / a / @ href   user   agent   设置   设置 middlesware 设置 useragent ：   class   MyUserAgentMiddleware   (   UserAgentMiddleware   ) :   def   __ init __   (     ,   user _ agent   =   ' Scrapy '   ) :   super   (   MyUserAgentMiddleware   ,     )   .   __ init __   ( )     .   user _ agent   =   _ random _ user _ agent   ( )   def   process _ request   (     ,   request   ,   spider   ) :       .   user _ agent   :   request   .   headers   .   setdefault   (   ' User - Agent '   ,     .   user _ agent   )   logger   .   debug   (   ' Using   User - Agent : { 0 } '   .   format   (   request   .   headers   [   ' User - Agent '   ] ) )   middleware 爬虫 运行 ， 爬虫 一个   user _ agent   属性 。   需求 ， 临时 改变 user   agent ， 爬虫类 属性 设置 设置 ：   user _ agent   =     覆写 middleware 指定 . user _ agent ， 实际上 middleware settings 还 设置 user _ agent ， 最先 scrapy 默认 useragentMiddleware ， 小节 讨论 参考   网页   eLRuLL   回答 一点 小小的 print 。   模拟 用户 登录   import   scrapy   class   LoginSpider   (   scrapy   .   Spider   ) :     =   ' . '   start _ urls   =   [   ' http : / / www . . / users / login . php '   ]   def   parse   (     ,   response   ) :   return   scrapy   .   FormRequest   .   _ response   (   response   ,   formdata   =   {   ' username '   :   ' john '   ,   ' password '   :   ' secret '   } ,   callback   =     .   _ login   )   def   _ login   (     ,   response   ) :   #   check   login   succeed           \" authentication   failed \"     response   .   body   :     .   logger   .   error   (   \" Login   failed \"   )   return   #   continue   scraping     authenticated   session ...   封 策略   设置 随机 user   agent 策略   禁用 cookie   COOKIES _ ENABLED   =   True   设置 下载 停顿   DOWNLOAD _ DELAY   =   n   代理 池",
            "tags":"python爬虫",
            "url":"articles/scrapy-module.html"
        },
        {
            "title":"python语言学习之-编码风格推荐",
            "text":"PEP8 代码 风格 规范 python 程序员 都 内容 ， 具体内容 官方 文档     。   空白 格式 编辑器 加上 插件 都 自动 pep8 格式 调整 ，   autopep8   模块 ， 一块 不 说 。   简单 地说 变量名 命名 规范   【 高质量 python 代码 】 ：   字母 都 大写 变量 ， 模块 文件 级别 常量 ， 单词 下划线 隔开 。   首字母 大写 类 异常 名字 ， 多个 单词 驼峰 写法 。   一律 小写字母 ， 下划线 隔开 。   开发者 不 命名 下划线 开头 变量 ， 写 干什么 。   编码 风格 推荐   带 两个 语句 列表 解析 。   生成器 表达式 改写 数据量 较大 列表 解析 。     =   ( len ( x )     x     open ( ' / tmp / myfile . txt ' ) )   循环 写 上 语句 。 建议 有利于 程序 简洁 直观 ， 接受 。   函数 返回值 返回值 才 意义 ， ， 情况 ， 抛出 异常 。   python 哲学   参考   网页 翻译   。   美 优于 丑 。   直白 优于 隐晦 。   简单 优于 。   优于 纠结 。   扁平 优于 嵌套 。   稀疏 优于 稠密 。   可读性 价值 。   特例 ， 特例 打破 规则 。   纯粹 性 实用性 之间 倾向 实用性 。   出错 决不能 无声无息 忽略 。   无声无息 。   面对 二义性 情况 时 ， 拒绝 猜 诱惑 。   一件 事 一种 做法   — —   一种 做法   — —   一种 显而易见 做法 。   刚 做法 显而易见 ， 毕竟 荷兰人 。   『 』 优于 『 决不 』 。   『 决不 』 优于 『   马上   』 。   一个 难于 解释 ， 差 想法 。   一个 很 解释 ， 好 想法 。   命名 空间 拍案叫绝 想法   —   放手 多用 ！",
            "tags":"python语言",
            "url":"articles/python-style-guide.html"
        },
        {
            "title":"python语言学习之-测试开发",
            "text":"测试 开发 风格 ， 进一步 讨论 之来 提高 测试 驱动 型 开发 。 推荐 pytest 。   pytest 简介   pytest 模块 站 unittest 基础 上 ， 简单 ， pip 安装 pytest ，   unittest   写 测试 案例 ， 都 不用 更改 照样 有用 ， 接下来 写 一个 新 测试 ， 不 再 新建 一个   unittest . TestCase   类 （ 希望 多个 测试 一个 类 ， 新建 一个 类 即可 ， 类 不 继承 类 。 ） ， 写 测试函数 ， 不 确认 最 简单   assert   确认 返回   True   即可 。   def   test _ prime ( ) :   assert   prime ( 4 )   = =   7   确认 抛出 异常   官方 例子 copy ， 看 懂 。   import   pytest   def   f   ( ) :   raise   SystemExit   (   1   )   def   test _ mytest   ( ) :     pytest   .   raises   (   SystemExit   ) :   f   ( )   完 ， 赶时间 ， 足够 。 说 优雅 测试 工作 技巧 。   实时 修改 代码 实时 测试   推荐 安装 ：   pytest     pytest - runner   。 新建   setup . cfg   文件 ， 内容 ：   [ aliases ]   test   =   pytest   输入   python   setup . py   test   等于 输入   python   setup . py   pytest   。   测试 输入 ：   python   setup . py   test   做 好处 ， 其是 利用 本地 修改 源码 ， 修改 源码 实时 测试 。   写 记得 pytest 传递 参数 加上   - - addopts =   选项 ， 打印 更 信息 ：   python   setup . py   test   - - addopts = \" - v \"   每次 写   - - addopts = \" - v \"   麻烦 ，   setup . cfg   上 加上 一句 ：   [ tool : pytest ]   addopts   =   - - verbose   好 ， ：   python   setup . py   test   专心 测试 写 代码 。   只 单独 测试 文件   跟着   - - addopts =   选项 ， 测试 py 文件 相对路径 写 上 即可 。   自动 发现 测试 文件   pytest 支持 自动 发现 测试 文件 ，   test _ * . py     * _ test . py   文件 都 测试 文件 。   推荐 统一 管理 测试 文件 ， 设置 ： 新建 一个   pytest . ini   文件 ， 内容 ：   [ pytest ]   testpaths   =   tests   pytest 只 tests 文件夹 下 测试 文件 。   情况 希望 测试 文件 代码 文件 （ 请 做 ， 毕竟 测试代码 模块 源码 放在 很 不美观 ） ， 没 ， 写 上 ， pytest 会 自动 发现 。 记得   pytest . ini   文件   testpaths   配置 删除 掉 算了 。   fixture 功能   pytest 高级 一点 功能 大概 fixture 功能 ， 下 再 讲 。 TODO 。   测试 下次 不 测试   函数 上 加上 装饰器 。   @ pytest . mark . skip ( reason = \" i     test   \" )   mock 模块   大型 框架 中写 单元测试 ， 涉及 网络 ， 套 接字 编程 ， 需求 ， 希望 伪造 数据 ， 拦截 函数 或类 返回值 ， 测试 大型软件 框架 中 抽离 ， mock 模块 。 python3 自带 mock 模块 ， ：     unittest   import   mock   mock 模块 最 关键性 理解 mock 做 。 mock 模块 最 核心 概念   Mock   类   ， 官方 文档 例子 ：     unittest   import   mock   class   Test   ( ) :   pass   t   =   Test   ( )   t   .   method   =   Mock   (   return _   =   3   )   t   .   method   =   mock   .   Mock   (   return _   =   3   )   t   .   method   ( )   3   t   .   method   (   1   ,   2   ,   3   )   3     MagicMock   东西 ， 暂时   Mock 够用 。 Mock   side _ effect   定制 抛出 异常 。   定制 函数 返回 例子 ：   test   =   mock . Mock ( return _ = '   world . ' )   test ( )   '   world . '     patch     编码 中 更 现有 代码 现有 第三方 库 代码 交互 ， 凭空 创造 Mock 对象 测试 。 看 例子 ：   @ mock . patch ( ' users . views . WXAPPAPI . jscode2session ' ,   \\   return _ = { \" openid \" :   \" o1ZL90Blemh5ylei7sBfQotG7PLM \" ,   \" session _ key \" :   \" 4XXDVTc0e4nuDVp20CIcOg = = \" ,   \" expires _ \" :   7200 } )   def   test _ login ( ,   mock _ jscode2session ) :   data   =   { ' js _ code ' :   ' 003xXUd30hnknF1gLeg30ua5e30xXUdr ' }   response   =   . client . ( reverse ( ' mini - login ' ) ,   data )   #       testcase   . _ session _ key   =   response . data . ( ' _ session _ key ' )   . assertEqual ( response . status _ code ,   status . HTTP _ 200 _ OK )   理解 代码 ？ 这段 测试代码 运行 ， 变量 名字 空间 patch 污染 ，   users . views . WXAPPAPI . jscode2session   函数 ， 污染 一个   Mock   对象 ， Mock 对象 传递 函数 第二个 参数 （ 额外 参数 不用 写 上 ）   mock _ jscode2session   。   代码 运行   jscode2session   总会 返回 给出 值 ， 不用 数据库 ， 网络 情况 。 小 技巧 django 框架 相关 ，   . client . ( reverse ( ' mini - login ' ) ,   data )   利用 django ， 请求 url 响应 ， django 相关 ， 不 说 。",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-xue-xi-zhi-ce-shi-kai-fa.html"
        },
        {
            "title":"python语言学习之-官方模块第三谈",
            "text":"模块   模块 提供 python 正则表达式 支持 ， 字符串 操作 ， 介绍 字符串 类型 方法 （ split ， replace ） ， 解决问题 ， 更快 更 简单 。 实在 动用 正则表达式 理念 才 模块 ， 克制 写 很多 很 （ 情况 ） 正则表达式 冲动 ， 正则表达式 引入 将会 程序 都 难懂 不可捉摸 。   更 内容 请 参见   官方 文档   。   模块 中 元 字符集   .   一行 内 任意 字符 ， . compile 指定   . DOTALL   ， 多行 内 任意 字符 ， 包括 换行符 。 还 字符串 模板 加上   ( s )   效果 。   *   字符 匹配 。   +   字符 匹配 。     字符 匹配 。   { m }   字符 匹配 ( ) m 次 。   { m , n }   字符 匹配 m 次到 n 次 ， n 次 省略 ， 视作 默认值 无穷大 。   \\ &# 94 ;   字符串 ， 加上   . MULTILINE   选项 ， 行首 。 字符串 模板 加上   ( m )   效果 。   \\ $   字符串 结束 ， \\ &# 94 ; 类似 ， 加上   . MULTILINE   选项 ， 行尾 ， 简单 理解   \\ n   换行符 。 字符串 模板 加上   ( m )   效果 。   \\   \\ ( 符号 . 函数 中 替换 一个 字符串 ， 效果 原 字符串 尾 加上 字符串 ， 类似 \\ &# 94 ; 替换成 字符串 ， 效果 原 字符串 头 加上 字符串 。 \\ &# 94 ; \\ \\ )   字符串 中 都 真实 字符 ， 标记 ， 替换 总给 人 怪怪的 感觉 。   [ ]   [ abc ] 字符 组 匹配 一个 字符 ， 字符 a b c 。 类似 [ a - z ] 匹配 小写字母 ，   [ \\ w ]   匹配 任意 字母 数字 ， 请 看 特殊字符 类 。   |   相当于 正则表达式 内 匹配 逻辑 。   ( )   圆括号 包围 将会 记忆 ， 调用 。 谈及 。   模块 中 特殊字符 类   \\ w   任意 字母 数字   [ a - zA - Z0 - 9 _ ]   ( meaning   word )   \\ W   匹配 非 字母 非 数字   [ &# 94 ; a - zA - Z0 - 9 _ ]   \\ d   [ 0 - 9 ]   ( digit )   数字   \\ D   [ &# 94 ; 0 - 9 ]   非 数字   \\ s   匹配 空白 字符   [   \\ t \\ n \\ r \\ f \\ v ]   。   \\ S   匹配 非 空白 字符   匹配 中文 : [ \\ u4e00 - \\ u9fa5 ]   \\ b   文档 说 定义 \\ w   \\ W   之间 边界 ， 反之亦然 。 粗略 理解 看作 英文单词 头 尾 。   \\ &# 94 ; 方括号 [ ] ， 最 ， 才 排除 型 字符 组 。   转义   正则表达式 转义 会 纠结 。 一个 简单 原则 谈及 特殊作用 字符 转义 ， python 中 字符 都 写成   r ' '   形式 ， raw   string 形式 ，   \\ n   写成   \\ n   ，   \\ section   简单 写为   \\ \\ section   即可 ，   \\   字符 转义 。   字符 组 方括号 内 [ ] 字符 不 转义 ， 实在 不 转义 ， 不 正则表达式 工具 测试 。   模块   compile 方法 生成 regular   expression   object 一条线 略过 ， 接下来 讨论 基于 （ 原始 ） 字符串 模板 。   字符串 模板 提及 ( m ) ( s ) 用法 ，   ( i )   忽略 大小写 。   匹配 查找   search ， match 方法 简单 用法 ：   . search ( 字符串 模板 ,   匹配 字符串 )   . match ( pattern ,   string )   将会 返回 一个 match   object ， match   object 逻辑 上 真值 。 match 字符串 匹配 精确 匹配 ， 正则表达式 0 突兀 。 推荐 search 方法 ， 限定 行首 ， 字符串 讨论 正则表达式 符号 表达 。 请 看 例子 。   import     string   =   ' ' '     test   line .           line .   today     sunday . ' ' '   match   =     .   search   (   ' ( m ) &# 94 ; today '   ,   string   )     match   :   print   (   ' 正则表达式 ： '   ,   match   .     )   print   (   ' 输入 字符串 ： '   ,   match   .   string   )   print   (   ' 匹配 ： '   ,   match   .   group   (   0   ) )   print   (   ' 匹配 字符串 index '   ,   match   .   span   ( ) )     :   print   (   ' return       '   )   说道 圆括号 将会 记忆 ， 匹配 ， 默认 正则表达式 匹配 group 中 0 元素 ， 从左到右 ， 子 group 编号 依次 1 ， 2 ， 3 ...... 。   正则表达式 ：   . compile ( ' ( m ) &# 94 ; today ' ,   . MULTILINE )   输入 字符串 ：       test   line .           line .   today     sunday .   匹配 ：   today   匹配 字符串 index   ( 44 ,   49 )   信息 情况 ， 最 简单 情况 判断 真值 ， 字符串 模板 匹配 即可 。   分割 操作   模块 split 函数 看作 字符串 split 方法 升级 版本 ， 描述 正则表达式 ， 匹配 成功 都 一个 分隔符 ， 原 输入 字符串 分割 开来 。   写 zwc 小 脚本 最 核心 ， 用途 统计 中英文 文档 英文单词 中文 字符 个数 。 最 核心 split 函数 正则表达式 分割 ， 不用 圆括号 ， 分隔符 包含 进去 ， 匹配 中 文字 标点符号 。 圆括号 ， 圆括号 匹配 内容 会 进去 列表 。 分隔符 。   import     def   zwc   (   string   ) :   # 中英文 常用 标点符号   lst   =     .   split   (   ' ( [   \\ u4e00   -   \\ u9fa5   \\ s ， 。 ； ] ) '   ,   string   )   # 去除   空白   # 去除 \\ s   中英文 常用 标点符号   lst   =   [   i     i     lst       i     [   \" \"   ,   \"   \"   ,   \"   \\ n   \"   ,   \"   \\ t   \"   ,   \"   \\ r   \"   ,   \"   \\ f   \"   ,   \"   \\ v   \"   ,   \" ； \"   ,   \" ， \"   ,   \" 。 \"   ] ]   print   (   lst   )     __ __   = =   ' __ main __ '   :   string   =   ' ' ' 道 可道 ， 道 。 名可名 ， 名 。 無名 天地 之始 ， 有名 萬物 之母 。   故常 無欲 ， 以觀 其妙 ； 常有 欲 ， 以觀 徼 。 兩者 同出 異名 ，   同謂 玄 ， 玄之又玄 ， 眾妙 之門 。   ' ' '   zwc   (   string   )   字符 分割 做 一个 小 修正 ， 匹配 空白 字符 中英文 标点符号 都 删除 ， 不 统计 入 字数 。   github 项目 链接 ：   zwc 项目   。   替换 操作   基于 正则表达式 替换 操作 有用 ， search 方法 ， 再 加上 匹配 字符串 索引 值 ， 修改 原 字符串 ， 再 search 循环 操作 ， 一个 替换 操作 。 模块 方法 解决 。   非 最长 匹配   小节 参考   python   cookbook     2.7   小节 ， 比如说 ：   . compile ( r ' \" ( . * ) \" ' )   匹配 两个 双引号 之间 内容 ， 默认 最长 匹配 ， 多个 双引号 句子 都 会 匹配 进去 ， 最短 匹配 ：   . compile ( r ' \" ( . * ) \" ' )   非 捕获 组   看 正则表达式 ，   ( : ... )   括号 组 是非 捕获 组 ，   . group   去 。   . search ( r ' ( ( : . | \\ n ) * ) ' , text2 )   默认   .   匹配 换行符 号 ， 引入 换行符 上 所示 加上 。   abc 模块   abc 模块 抽象 基类 ， 类似 java 中 抽象类 概念 。   所示 ：     abc   import   abstractmethod     abc   import   ABC   class   Graph   (   ABC   ) :   \" \" \"   图   \" \" \"   DIRECTED   =   None   @ abstractmethod   def   nodes   (     ) :   \" \" \"   : return :   \" \" \"   raise   NotImplementedError   (   \" Not   Implement   nodes   methods \"   )   抽象类 实例 化 ， 实例 化将会 报错 。 继承 类 ， 上 定义 抽象 方法 ， 继承 类 定义 好 方法 ， 将会 报错 。   抽象类 定义 抽象 方法 动作 方法 。   抽象类 还 定义 抽象 属性 。   argparse 模块   简要 介绍 python3 官方 文档 argparse 模块 用法 ， 用于 快速 制作 一个 刷 参数 python 脚本 。   看 简单 情况 :   import   argparse   usage   =   ' ' '       a       show   argparse   usage   ' ' '   parser   =   argparse   .   ArgumentParser   (   usage   =   usage   )   args   =   parser   .   parse _ args   ( )   这是 简单 一个 例子 ， 脚本 还 不 接受 参数 ， 只   - h     - -   查看 信息 ， 所示 。   wanze @ wanze - ubuntu64 : ~ / 桌面 $   python3   . py   - h   usage :       a       show   argparse   usage   [ - h ]   optional   arguments :   - h ,   - -   show       message     exit   新建 一个 parser ， ArgumentParser usage 可选 参数 ， 命令行 描述 信息 。 调用 parser   parse _ args   方法 ， 命令行 接受 参数 刷 进去 。   简单 添加 一个 参数   例子 太 简单 ， 简单 添加 一个 参数 。   import   argparse   usage   =   ' ' '       a       show   argparse   usage   ' ' '   parser   =   argparse   .   ArgumentParser   (   usage   =   usage   )   parser   .   add _ argument   (   ' - - config '   ,     =   \"   config   file   path \"   )   args   =   parser   .   parse _ args   ( )   print   (   args   )   命令行 信息 所示 :   wanze @ wanze - ubuntu64 : ~ / 桌面 $   python3   . py   - h   usage :       a       show   argparse   usage   optional   arguments :   - h ,   - -   show       message     exit   - - config   CONFIG     config   file   path   输入 :   wanze @ wanze   -   ubuntu64   :   ~   /   桌面 $   python3     .   py   - -   config   =   ' config . cfg '   Namespace   (   config   =   ' config . cfg ' )     parse _ args   方法 返回 Namespace 对象 ， 推荐   vars   函数 字典 值 ， 会 更好 地方 便 。   import   argparse   usage   =   ' ' '       a       show   argparse   usage   ' ' '   parser   =   argparse   .   ArgumentParser   (   usage   =   usage   )   parser   .   add _ argument   (   ' - c '   ,   ' - - config '   ,     =   \"   config   file   path \"   )   args   =   vars   (   parser   .   parse _ args   ( ) )   print   (   args   )   wanze   @ wanze   -   ubuntu64   :   ~ /   桌面 $   python3     .   py   -   h   usage   :       a       show   argparse   usage   python3     .   py   optional   arguments   :   -   h   ,   - -     show       message     exit   -   c   CONFIG   ,   - -   config   CONFIG     config   file   path   wanze   @ wanze   -   ubuntu64   :   ~ /   桌面 $   python3     .   py   - -   config   =   ' config . cfg '   {   ' config '   :   ' config . cfg '   }   代码 稍作 修改 ， 长 名字 选 参数 还 加上 短 名字 选 参数 支持 ，   parse _ args   方法   vars   返回 字典 值 。 字典 key 默认 长 名字 选 参数 。 还 设置 目标 参数 名 :   添加 参数 选项 设置   演示 设置 目标 参数 脚本 中 变量名 :   import   argparse   usage   =   ' ' '       a       show   argparse   usage   ' ' '   parser   =   argparse   .   ArgumentParser   (   usage   =   usage   )   parser   .   add _ argument   (   ' - c '   ,   ' - - config '   ,   dest   =   \" configpath \"   ,     =   \"   config   file   path \"   )   args   =   vars   (   parser   .   parse _ args   ( ) )   print   (   args   )   字典 输入 :   wanze @ wanze - ubuntu64 : ~ / 桌面 $   python3   . py   - - config = ' config . cfg '   { ' configpath ' :   ' config . cfg ' }   默认设置 长 名字 选 参数 ， 没 折腾 。 类似 还   add _ argument   方法 添加 可选 参数 ，   add _ argument   选项 配置 :   required = True   参数 输入 值 ， 报错     描述 信息 ， 。   default   参数 默认值 ， 默认 None ， 选择 设置 成 一个 值 。   type   目标 参数 数据类型 ， 默认 字符串 ， 设置 int float 。 设置 格式 ， 字符串 那种 设置 形式 :   ​   parser . add _ argument ( ' - - delay ' , type = int )   必填 参数 添加 所示 ， \\ \" target \\ \" 名字   - -   之外 ， 可选 参数 用法 大致 类似 ， 其刷入 args 字典 key \\ \" target \\ \" 名字 。   parser . add _ argument ( ' target ' , = \" 必填 参数 \" )   必填 参数 可选 参数 细节 上 差异 ， 会 提及 。   nargs 选项 设置   nargs 设置 参数 脚本 中 变量 一个 列表 。 nargs 设置 一个 数字 ，   nargs = 4   ， 脚本 参数 接受 4 输入 值 ， 收集 进 一个 列表 。   :   nargs = ' * '   可选 参数 设置 ， 作用 必填 参数 ， 必填 参数 意义 。 收集 任意 输入 参数值 ， 多个 选 参数 之间 星号 ， 请 参看 官方 文档 。   nargs = ' + '   作用 必填 参数 ， 意义 类似 正则表达式 ' + ' 号 ， ' * ' 号 一个 输入 值 ， 报错 。   nargs = ' '   ' ' 号 情况 挺 ， 不 太 喜欢 ， nargs 设置 显得 格格不入 。 变量值 列表 单个 值 ！ 改变 默认值 。 参数 不 输入 ，   ​   - - foo   ​   东西 不 输入 命令行 ， foo 默认 取 default 值 ，   ​   - - foo   东西 不 值 ， foo 取   const   ​   选项 赋 值 。 不太 喜欢 东西 。   一个 完整 例子   给出 一个 完整 例子 :   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   argparse   usage   =   ' ' '   resize     image   ' ' '   def   main   ( ) :   parser   =   argparse   .   ArgumentParser   (   usage   =   usage   )   parser   .   add _ argument   (   ' - c '   ,   ' - - config '   ,   dest   =   \" configpath \"   ,     =   \"   config   file   path \"   )   parser   .   add _ argument   (   ' inputimg '   ,     =   \"   input   image \"   ,   nargs   =   ' + '   )   parser   .   add _ argument   (   ' - - width '   ,     =   \"   input   image \"   ,   type   =   int   )   args   =   vars   (   parser   .   parse _ args   ( ) )   configpath   =   args   [   ' configpath '   ]   width   =   args   [   ' width '   ]   inputimg   =   args   [   ' inputimg '   ]     inputimg     args   [   ' inputimg '   ] :   print   (   ' resize   image '   )   print   (   '   input   image     { }   '   .   format   (   inputimg   ) )   print   (   '   target   width     { }   '   .   format   (   width   ) )     __ __   = =   ' __ main __ '   :   main   ( )   运行 情况 所示 :   wanze @ wanze - ubuntu64 : ~ / 图片 $   python3   resizeimg . py   - -   usage :   resize     image   positional   arguments :   inputimg     input   image   optional   arguments :   - h ,   - -   show       message     exit   - c   CONFIGPATH ,   - - config   CONFIGPATH     config   file   path   - - width   WIDTH     input   image   wanze @ wanze - ubuntu64 : ~ / 图片 $   python3   resizeimg . py   - - width = 300   * . png   resize   image     input   image     2015 - 01 - 27   13 : 16 : 46   屏幕 截图 . png     target   width     300   resize   image     input   image     2015 - 05 - 03   18 : 17 : 19 屏幕 截图 . png     target   width     300   resize   image     input   image     2015 - 05 - 03   18 : 20 : 45 屏幕 截图 . png     target   width     300   ....   命令行 选项 关联 动作   parser   add _ argument   方法   action   参数 用来 控制 命令行 选项 关联 动作 ， 都 不 设置 ， 默认   store   ， 存储 值 。 类似   store _ const   ,   store _ true     store _ false   。   store _ const   默认 store ， 指明 值 ， 设置 action   store _ const   :   parser . add _ argument ( ' - - foo ' ,   action = ' store _ const ' ,   const = 42 )   会 自动 设置 该值 ， default 默认值 区别 选项 值 常量 值 。   > >   python3   test2   .   py   - -   foo   Namespace   (   foo   =   42   )   store _ true     store _ false   写为 :   parser . add _ argument ( ' - - foo ' ,   action = ' store _ true ' )   存储   True   值 :   > >   python3   test2   .   py   - -   foo   Namespace   (   foo   =   True   )   讲 定义 动作 ， 类似   - - version   用法 ， 一种 影响 程序 工作 流 选项 ， 官方 文档 推荐 子 类化   argparse . Action   方法 ， 麻烦 。 发现   click   模块 好 （ 一个 解决 创建 命令行 脚本 工具 推荐 第三方 模块 ） ， 很 :   import   click   def   print _ version   (   ctx   ,   param   ,     ) :           ctx   .   resilient _ parsing   :   return   click   .   echo   (   ' Version   1.0 '   )   ctx   .   exit   ( )   def   quick   (   ctx   ,   param   ,     ) :   print   (   ctx   ,   param   ,     )   ctx   .   exit   ( )   @ click . command   ( )   @ click . option   (   ' - - version '   ,   _ flag   =   True   ,   callback   =   print _ version   ,   expose _   =   False   ,   _ eager   =   True   )   @ click . option   (   ' - - quick '   ,   callback   =   quick   ,   _ flag   =   True   )   def     ( ) :     True   :   userinput   =   input   (   ' input : '   )   click   .   echo   (   userinput   )     userinput   = =   ' exit '   :   break     __ __   = =   ' __ main __ '   :     ( )   ctx param click 模块 再细 讲 ， 过程 argparse 美观 。   ast 模块   更 信息 请 参看   官方 文档   。   literal _ eval 函数   literal _ eval   函数 一个 有用 函数 ， 用于 短小 python 字符串 转化成 python   object 。 所示 :   import   ast   def   str2pyobj   (   val   ) :   ' ' ' str     python   obj       changed ' ' '     :   val   =   ast   .   literal _ eval   (   val   )     Exception   :   ###   pass   return   val   支持 python   object :   strings ,   bytes ,   numbers ,   tuples ,   lists ,   dicts ,   sets ,   booleans ,     None .   字符串   \\ \" 1 \\ \"   \\ \" 3.14 \\ \"   \\ \" [ 1 , 2 , 3 ] \\ \"   转化 integer   float   list 小菜一碟 。 建立 异常 捕捉 ， 转化 失败 ， 原样 返回 字符串 即可 。   collections 模块   更 内容 请 参见   官方 文档   。   namedtuple 函数   collections 模块 namedtuple 函数 将会 一个 名字 数组 类 （ 有名 数组 ） ， 类 新建 类似 实例 。 ：     collections   import   namedtuple   Point3d   =   namedtuple   (   ' Point3d '   , [   ' x '   ,   ' y '   ,   ' z '   ] )   p1   =   Point3d   (   0   ,   1   ,   2   )   print   (   p1   )   print   (   p1   [   0   ] ,   p1   .   z   )   Point3d   (   x   =   0   ,   y   =   1   ,   z   =   2   )   0   2   Counter 计数 类   简单 输入 数据 统计 频数 计算 。   OrderedDict 对象   python 中 字典 对象 默认 key 顺序 ， OrderdDict 对象 概念 字典 概念 基础 上 key 顺序 。   一个 例子 所示 （ 来自 官方 文档 ） 。 简单 理解 一个 字典 对象 记住 key 插入 顺序 。   > > >   d   =   { ' banana ' :   3 ,   ' apple ' : 4 ,   ' pear ' :   1 ,   ' orange ' :   2 }   > > >   #   dictionary   sorted     key   > > >   OrderedDict ( sorted ( d . items ( ) ,   key = lambda   t :   t [ 0 ] ) )   OrderedDict ( [ ( ' apple ' ,   4 ) ,   ( ' banana ' ,   3 ) ,   ( ' orange ' ,   2 ) ,   ( ' pear ' ,   1 ) ] )   > > >   #   dictionary   sorted       > > >   OrderedDict ( sorted ( d . items ( ) ,   key = lambda   t :   t [ 1 ] ) )   OrderedDict ( [ ( ' pear ' ,   1 ) ,   ( ' orange ' ,   2 ) ,   ( ' banana ' ,   3 ) ,   ( ' apple ' ,   4 ) ] )   > > >   #   dictionary   sorted     length       key   string   > > >   OrderedDict ( sorted ( d . items ( ) ,   key = lambda   t :   len ( t [ 0 ] ) ) )   OrderedDict ( [ ( ' pear ' ,   1 ) ,   ( ' apple ' ,   4 ) ,   ( ' orange ' ,   2 ) ,   ( ' banana ' ,   3 ) ] )   configparser 模块   简单 配置文件 管理 python 内置 模块 configparser 。 python2 模块 名字   ConfigParser   。   python3 configparser 简单 ， 分为 几步 :   新建 一个 configparser 对象   import   configparser   config   =   configparser   .   ConfigParser   ( )   读取 config 文件   调用 read 方法 读取 config 文件 。   config . read ( ' test . cfg ' )   如同 字典 操作 configparser 对象   接下来 如同 字典 操作 configparser 对象 。   ' DEFAULT '   section ， 大致 表达 :   config [ ' DEFAULT ' ]   =   { ' ServerAliveInterval ' :   ' 45 ' ,   ' Compression ' :   ' ' ,   ' CompressionLevel ' :   ' 9 ' }   config [ ' bitbucket . org ' ]   =   { }   config [ ' bitbucket . org ' ] [ ' User ' ]   =   ' hg '   config [ ' topsecret . server . ' ]   =   { }   调用 write 方法 写入     open ( ' . ini ' ,   ' w ' )     configfile :   config . write ( configfile )   不 默认 更改 大小写   请 参看   网页   ， configparser 模块 默认   option     section key   改成 小写 ， 不 太 喜欢 风格 ， configparser 刷成 字典 值时 ， 字典 key 大小写 区分 ， 改动 ， 不 自动 小写 操作 :   . cfg   =   configparser . ConfigParser ( )   . cfg . optionxform   =   str ##     auto   make     lowercase   csv 模块   介绍 自定义 csv 方言 情况 ， 简单 txt 文本 样式 ， pandas 会 很 ， 简单 定义 逗号 分隔 ， 一行行 附加 打印 入 文本 即可 ， 并不需要 特别 。   自定义 csv 方言   最 通用 excel 格式 csv 方言 写法 ：   class   excel   (   Dialect   ) :   \" \" \" Describe     usual   properties     Excel - generated   CSV   files . \" \" \"   delimiter   =   ' , '   quotechar   =   ' \" '   doublequote   =   True   skipinitialspace   =   False   lineterminator   =   '   \\ r \\ n   '   quoting   =   QUOTE _ MINIMAL   register _ dialect   (   \" excel \"   ,   excel   )   字段 含义 作出 ：   delimiter   分隔符 ， 意义 很 。   lineterminator   换行符 ， 意义 很 ， 两种 ：   \\ r \\ n     \\ n   。   skipinitialspace   默认 False ， 空格 设置 分隔符 时有 意义 ， 字符 空格 将会 忽略 ， 情况 设置 True False 区别 不 大 。   quoting   设置 quote 规则   csv . QUOTE _ MINIMAL   情况 下才 加上 双引号 ， 逗号 字符串 ， 双引号 字符串 ， 换行符 号 字符串 。   csv . QUOTE _ ALL   都 加上 双引号 ， 数字 。   csv . QUOTE _ NONNUMERIC   数字 不 加 ， 字符串 都 加上 双引号 。 （ 情况 下 csv 模块 才 会 正确 数字 解析 float 类型 ）   csv . QUOTE _ NONE   都 不加 （ 设置 好 escapechar 选项 ）   quotechar   设置 quote 字符 ， 设置 双引号 。   doublequote   用来 双引号 字符串 中 情况 ， 默认 True ， 字符串 将会 双引号 之外 再 加上 双引号 ， 设置 False ， 会 加上 一个   escapechar   。   定义 csv 方言 类似 写 上 一个 方言 类 ， 注册 好 即可 ：   import   csv   class   MindMapCSV   (   csv   .   Dialect   ) :   delimiter   =   ' , '   #   分隔符   quotechar   =   ' \" '   #   quote 符号   doublequote   =   True   #   双引号 字符 中 情况   skipinitialspace   =   True   #   分隔符 后 空白 忽略   lineterminator   =   '   \\ n   '   #   换行符   quoting   =   csv   .   QUOTE _ MINIMAL   #   最小 quote   csv   .   register _ dialect   (   \" MindMapCSV \"   ,   MindMapCSV   )   Reader 编写   贴 出 一个样 例 ， 看 设计 csv 方言 。   class   Reader   ( ) :   def   __ init __   (     ,   f   ,   dialect   =   ' sv '   ) :     .   lines   =   [ ]     line     csv   .   reader   (   f   ,   dialect   ) :   line   =   [     .   _ float   (   e   )     e     line   ]     .   lines   .   append   (   line   )   def   getrow   (     ,   num   ) :   return     .   lines   [   num   -   1   ]   def   getcol   (     ,   head   ) :   index   =     .   getrow   (   1   )   .   index   (   head   )   lst   =   [ ]     line       .   lines   :   lst   .   append   (   line   [   index   ] )   return   lst   def   getdata   (     ) :   return     .   lines   @ staticmethod   def   _ float   (   e   ) :     :   return   float   (   e   )     ValueError   :   return   e   ：   getrow   取某 一行 值   getcol   取某 一列 值   getdata   取 表格 数据 值   Writer 编写   csv 方言 设计 ， 贴 出 一个样 例 ：   class   Writer   ( ) :   def   __ init __   (     ,   f   ,   dialect   =   ' sv '   ) :     .   lines   =   [ ]     .   writer   =   csv   .   writer   (   f   ,   dialect   )   def   addrow   (     ,   row   ) :     .   lines   .   append   (   row   )   def   addcol   (     ,   col   ) :     index     range   (   len   (     .   lines   ) ) :     .   lines   [   index   ]   .   append   (   col   [   index   ] )   def   setrow   (     ,   num   ,   row   ) :     .   lines   [   num   -   1   ]   =   row   def   setcol   (     ,   num   ,   col   ) :     index     range   (   len   (     .   lines   ) ) :     .   lines   [   index   ] [   num   -   1   ]   =   col   [   index   ]   def   set   (     ,   row   ,   col   ,   e   ) :     .   lines   [   row   -   1   ] [   col   -   1   ]   =   e   def   setdata   (     ,   data   ) :     .   lines   =   data   def   write   (     ) :     line       .   lines   :     .   writer   .   writerow   (   line   )   提供 方法 ：   addrow   添加 一行 值   addcol   添加 一列 值   set   设置 某行 某列 值   setdata   设置 数据   write   写入 文件 中 去 。   tempfile 模块   tempfile 模块 用于 创建 临时文件 临时 文件夹 ， 模块 系统 平台 上 都 工作 ， 很 有用 。   windows 系统 下 临时 文件夹 所在 ：   > > >   import   os   > > >   os   .     ' nt '   > > >   import   tempfile   > > >   tempfile   .   gettempdir   ( )   ' C :   \\ \\   Users   \\ \\   a3580   \\ \\   AppData   \\ \\   Local   \\ \\   Temp '   最 核心 两个 函数   mkstemp     mkdtemp   。   mkstemp   mkstemp 函数 用于 新建 一个 临时文件   fd   ,   fpath   =   tempfile   .   mkstemp   (   dir   =   tmpdir   )     os   .   fdopen   (   fd   ,   ' wb '   )     temp _ cache _ file   :   marshal   .   dump   ( (     .   FREQ   ,     .   total   ) ,   temp _ cache _ file   )   返回 第二个 参数 目标 临时文件 路径名 ， 第一个 文件 参数 ， 操作系统 级别 文件 句柄 （ C语言 文件 句柄 ） ， 转成 python 文件 对象 上 所示 ，   os . fdopen   打开 。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"python语言",
            "url":"articles/python-modules-three.html"
        },
        {
            "title":"python语言学习之-官方模块第二谈",
            "text":"shelve 模块   shelve 模块 基于 pickle 模块 ， pickle 模块 支持 对象 才 支持 。   提及 pickle 模块 只能 针对 一个 对象 ， 多个 对象 ， shelve 模块 ， shelve 模块 好像 自动 对象 字典 形式 包装 。 shelve 模块 简便 。   存入 多个 对象   类 操作 第三版 中 定义 类 （   12.5   { reference - type = \" ref \"   reference = \" sec : 类 操作 第三版 \" } ） 建立 一个 Hero . py 文件 ， 类 定义 复制 进去 。 新建 几个 实例 存入 test . db 文件 中 。   import   shelve     Hero   import   Garen     __ __   = =   ' __ main __ '   :   garen1   =   Garen   ( )   garen2   =   Garen   (   ' red '   )   garen3   =   Garen   (   ' yellow '   )   db   =   shelve   .   open   (   ' test . db '   )     (   key   ,   item   )     [ (   ' garen1 '   ,   garen1   ) , (   ' garen2 '   ,   garen2   ) , (   ' garen3 '   ,   garen3   ) ] :   db   [   key   ]   =   item   db   .   close   ( )   过程 代码 变得 简洁 ， 一个个 对象 字典 形式 存入 进去 。   读取 对象   读取 对象 代码 很 简洁 ， shelve 模块 open 函数 打开 数据库 文件 ， open 函数 会 自动 返回 一个 字典 对象 ， 字典 对象 数据 存入 键值 对象 。   例子 发现 ， 定义 类 ， 提取 放入 一个 文件 ， shelve 模块 读取 文件 不 再 引入 定义 。 一点 值得 ， shelve 模块 内部 采用 pickle 机制 ， 猜测 pickle 例子 类 定义 写 写入 文件 代码 ， 载入 数据库 ； 类 定义 放入 一个 文件 ， 类以 模块 说 模块 载入 形式 引入 ， 读取 对象 一种 更 优雅 形式 。 所示 ：   import   shelve     __ __   = =   ' __ main __ '   :   db   =   shelve   .   open   (   ' test . db '   )     key     sorted   (   db   ) :   print   (   db   [   key   ] )   db   .   close   ( )   简单 程序 原型 程序 数据库 ， shelve 模块 很 好 够用 。   更 内容 请 参见   官方 文档   。   pickle 模块   pickle 模块 对象 永久 存入 文件 中 ， 再 导入 文件 ， 自动 对象 导入 进来 。   对象 存入 文件   import   pickle   class   Test   :   def   __ init __   (     ) :     .   a   =   0     .   b   =   0     .   c   =   1     .   d   =   1   def   __ str __   (     ) :   return   str   (     .   __ dict __   )     __ __   = =   ' __ main __ '   :   test001   =   Test   ( )   print   (   test001   )   testfile   =   open   (   ' data . pkl '   ,   ' wb '   )   pickle   .   dump   (   test001   ,   testfile   )   testfile   .   close   ( )   从文件 中 取出 对象   值得一提的是 从文件 中 取出 对象 ， 类 定义 ， 声明 内存 中 ， 会 出错 。   import   pickle   class   Test   :   def   __ init __   (     ) :     .   a   =   0     .   b   =   0     .   c   =   1     .   d   =   1   def   __ str __   (     ) :   return   str   (     .   __ dict __   )     __ __   = =   ' __ main __ '   :   testfile   =   open   (   ' data . pkl '   ,   ' rb '   )   test001   =   pickle   .   load   (   testfile   )   print   (   test001   )   testfile   .   close   ( )   pickle 模块 dump 函数 对象 存入 文件 中 ， 文件 load 函数 加载 ， 对象 会 自动 返回 。   更 内容 请 参见   官方 文档   。   pathlib 模块   python3.4 ， python3 内置 pathlib 模块 。 python 版本 ， pip 安装 pathlib ， 差 不了 太多 。 讨论 参考 python3.4 pathlib 模块 官方 文档 ， 为准 。   模块 对系统 路径 灵活 操作 ， python 取代 bash 系统 运维 ， 文件名 ， 路径 操作 ， pathlib 大大简化 一块 工作量 。 来看 一个 例子 ：     pathlib   import   Path   import   os   p1   =   Path   (   os   .   path   .   expanduser   (   ' ~ '   ) )   p2   =   Path   (   ' . '   )   print   ( [   x     x     p1   .   glob   (   \" * . pdf \"   )     x   .   _ file   ( ) ] )   print   ( [   x     x     p2   .   iterdir   ( )     x   .   _ dir   ( ) ] )   Path 接受 相对路径 语法 ， \\ \" . \\ \" \\ \" .. \\ \" 都 可用 。 Path 对象 方法 glob iterdir 方法 ， glob 类似 linux glob 命令 ； iterdir 遍历 当前目录 。 遍历 返回 一个 迭代 对象 （ 读者 看 ， 一个 生成器 对象 ） ， 展开 一个 Path 对象 。 Path 对象   _ file   方法   _ dir   方法 判断 Path 对象 文件夹 文件 路径 。   Path 对象 很多 便捷 方法 ， 很 好 ， ：   iterdir   ，   exists   ，   _ file   ，   _ dir   ，   parents   ，   cwd   。 更 信息 请 参看 官方 文档 。   marshal 模块 python 变量 二进制 形式 读写 入 文件 中 ， jieba 分词 词典 缓存 做 。   官方 文档 推荐 确实 类似 简单 存储 需求 ， 推荐 pickle shelve 模块 ， 不管怎么 说 ， 模块 简单 下 。   支持 对象 类型 ：   The     types     supported :   booleans ,   integers ,   floating   point   numbers ,   complex   numbers ,   strings ,   bytes ,   bytearrays ,   tuples ,   lists ,   sets ,   frozensets ,   dictionaries   简单 ：     open   (   cache _ file   ,   ' rb '   )     cf   :     .   FREQ   ,     .   total   =   marshal   .   load   (   cf   )     open   (   cache _ file   ,   ' wb '   )     temp _ cache _ file   :   marshal   .   dump   ( (     .   FREQ   ,     .   total   ) ,   temp _ cache _ file   )   load 方法 加载 目标 文件 对象 ， 返回值 送入 对象 。   dump 方法 想要 送进去 对象 ， 送入 文件 中 去 。   logging 模块   软件开发 中 ， 两个 东西 最易 初学者 忽视 ， 实际上 却是 最 有用 工具 :   一个 单元测试 ； 一个 日志 输出 管理 。 python 官方 内置 模块 logging 更好 管理 日志 汇报 系统 。 一个 好 日志 汇报 系统 程序员 调试 debug ， 用户 专业 人员 汇报 发生 错误 信息 ， 还 理解 程序 运行 运行 ， 干些 ， 都 有用 。   logging   简单 函数 调试 print 函数 输出 信息 ， 编程 早期 有用 。 后续 调试 编程 都 推荐 单元测试 方法 。 大型软件 项目 中 ， print 函数 更 少 ， 程序员 希望 用户 信息 才能 print 函数 （ io 重定向 print 函数 不 讨论 之内 ） 。   程序员 想要 大型软件 内部 运作 ， 丑陋 做法 print ， 注释 掉 。 不 ， 程序员 做 工作 都 保存起来 拿到 台 面上 ， 毕竟 都 劳动 。 logging 模块 第一个 用途 :     logging . info ( )   函数 ， 输出 信息 ， 信息 调低 logging 等级 （ 默认   WARNING   ） ， 才 会 显示 。 低于   WARNING   等级 一个 函数   logging . debug ( )   。 info 函数 信息 程序员 用来 确认 程序 预期 运行 ， debug 函数 信息 bug ， 程序员 希望 有助于 debug 输出 信息 。   logging . warn ( )   函数 用来 发出 警告 信息 ， 程序员 修改 程序 信息 ；   logging . warning   函数 用来 发出 警告 信息 ， 情况 程序员 预料之中 ， 用户 不 做 ， 程序 不 修改 ， 信息 记录 。   特别 错误 异常 捕捉 ， python   ...   ...   语句 ， raise 抛出 异常 ， 这自 不必 说 。 情况 ， 程序员 不愿 抛出 异常 ， 希望 压抑 错误 ， logging 模块   error ( )   函数   exception ( )   函数   critical ( )   函数 。   函数 等级 :   最 简单 一个 例子 所示 :   import   logging   logging   .   basicConfig   (   level   =   logging   .   DEBUG   )   logging   .   debug   (   ' debug '   )   logging   .   info   (   ' info '   )   logging   .   warning   (   ' warning '   )   basicConfig 函数 日志 系统 配置 。 设置 日志 报告 等级   level = logging . DEBUG   ， 将会   DEBUG     DEBUG   等级 日志 信息 ； 设置   logging . INFO   ， 只   INFO     INFO   等级 信息 。   日志 信息 输出 文件   更 专业 做法 日志 输出 文件 中 去 ， 调试 ， 大型软件 项目 来说 ， 日志 信息 很多 ， 保存 文件 ， 编辑器 shell 工具 工具 查看 会 更 便捷 。 日志 信息 都 输出 文件 中 很 简单 ，   basicConfig   设置   filename   参数 即可 :   import   logging   logging   .   basicConfig   (   filename   =   ' test . log '   ,   level   =   logging   .   DEBUG   )   logging   .   debug   (   ' debug '   )   logging   .   info   (   ' info '   )   logging   .   warning   (   ' warning '   )   默认   filemode     \\ \" a \\ \"   ， 日志 信息 累积 。 运行 几次 小 py 脚本 ， 效果 。   filemode   设置   \\ \" w \\ \"   ， 只 保存 那次 运行 日志 信息 。   logging 模块 中级 教程   logging 模块 中级 几个 词汇 ： loggers ,   handlers ,   filters ,     formatters 。   loggers   记录器   运行 logging . info ， 调用 默认 记录器 ， 会 针对 python 模块 文件创建 一个 记录器 。   logger   =   logging . getLogger ( __ __ )     __ __   一种 简便 命名 方法 ， 勤快 某种 情况 下 需要的话 手工 记录器 取个 名字 。     getLogger   函数 指定 名字 定义 （ 指 第三方 模块 下定义 ） ，   getLogger   指定 目标 名字 会 记录器 。 DIY 第三方 模块 日志 记录器 有用 。   记录器 挂载 卸载 处理器 对象 过滤器 对象 ：   logger . addHandler ( )   logger . removeHandler ( )   logger . addFilter ( )   logger . removeFilter ( )   记录器   setLevel ( )   方法 设置 最小 记录 级别 ， Handler 级别 协作关系 。   记录器 propagate 参数 值得 详细 说 下 ， 记录器 名字 定义 ，   __ __   python 自带 模块 结构 语法 ， 其有 上层 下层 关系 ， 比如说   main . test   记录器   main   记录器 。 讨论   propagate   参数 ， 默认 True ， 发送给   main . test   记录器 信息 会 传递 上层   main   记录器 。 设置 False 上 传递 。   handlers   处理器   负责 分发 日志 信息 目标 地去 。 介绍 几个 Handler 类 ：   StreamHandler   信息 以流 形式 输出 ， 指 输出 终端   FileHandler   信息 写入 文件 中 去   RotatingFileHandler   信息 写入 文件 ， 文件大小 超过 值 ， 新建 一个 文件 写 。   TimeRotatingFileHandler   信息 写入 文件 ， 每隔 一段时间 ， 比如说 ， 会 自动 再 新建 一个 文件 再 往里面 写 。   处理器 对象   setLevel   方法 ， 提及 ， 记录器   setLevel   协作关系 ， 更 详细 描述 ， 信息 先 记录器 并分 发给 处理器 对象 ， 再 处理器 再 分发 目的地 。   处理器 挂载   格式 器   对象   过滤器   对象 。   handler . setFormatter ( )   handler . addFilter ( )   handler . removeFilter ( )   filters   过滤器   formatters   格式 器   ， 信息 格式 定义 。   format 涉及 参数设置 所示 :   -   % ( levelname ) s   类似 ' DEBUG ' logging   level   -   % ( message ) s   输出 信息   -   % ( asctime ) s   时间 ， 默认 ' 2003 - 07 - 08   16 : 49 : 45 , 896 ' ，   * * datefmt * *   选项 进一步 设置 格式 ， 格式 设置 strftime 命令 类似 。   -   % ( filename ) s   文件名 ， 更 简洁 表达 模块 名 。   -   % ( module ) s   模块 名   -   % ( funcName ) s   函数 名   -   % ( lineno ) d   logging 代码 几行   -   % ( ) s   logger 名字 ， 默认 ' root ' 。   -   % ( process ) d   进程 号   -   % ( processName ) s   进程 名   -   % ( thread ) d   线程 号   -   % ( threadName ) s   线程 名   字典 统一 配置   django setting . py 会 配置 ， 含义 很 ， 定义 处理器 ， 格式 器 ， 记录器 。   LOGGING   =   {   ' version ' :   1 ,   ' disable _ existing _ loggers ' :   False ,   ' formatters ' :   {   ' simple ' :   {   ' format ' :   \" % ( asctime ) s   % ( ) s   [ % ( levelname ) s ]   % ( thread ) d   % ( module ) s   % ( funcName ) s   % ( lineno ) s :   % ( message ) s \"   }   } ,   ' handlers ' :   {   ' log _ file ' :   {   ' class ' :   ' sdsom . common . log . DedupeRotatingAndTimedRotatingFileHandler ' ,   ' filename ' :   config . ( ' web ' ,   ' log _ path ' ) ,   ' ' :   ' midnight ' ,   ' maxBytes ' :   int ( config . ( ' web ' ,   ' log _ max _ bytes ' ) ) ,   ' interval ' :   1 ,   ' backupDay ' :   int ( config . ( ' web ' ,   ' log _ backup _ days ' ) ) ,   ' dedupetime ' :   int ( config . ( ' web ' ,   ' log _ dedupe _ time ' ) ) ,   ' formatter ' :   ' simple '   } ,   } ,   ' loggers ' :   {   ' django . request ' :   {   ' handlers ' :   [ ' log _ file ' ] ,   ' level ' :   config . ( ' web ' ,   ' log _ level ' ) ,   ' propagate ' :   True ,   } ,   }   }   json 模块   json   json 全称 JavaScript   Object   Notation ， JavaScript 对象 表示法 。 json 一种 基于 文本 ， 人类 易读 数据 存储 交互 格式 。 json 文件 保存 后缀   . json   。 json 是从 javascript 语言 衍生 ， 数据 存储 交互 独立 语言 。 json xml 数据 存储 交互 方案 相比 更 易读 读写 速度 更快 。   json 存储 格式 语法   json 存储 格式 语法 很 简单 ， 最 数字 ， 支持 两种 数字 类型 ， 整数型 浮点 型 ， python int float ； 字符串 双引号 ， python 字符串 概念 ； 布尔值 true false ， python True False ， 一个 null python None ； json 数据   [ ]   ， 元素 逗号 分隔 ， 正是 python 列表 概念 ； json object 对象   { }   包围 ， 其内 key : 形式 ， 其正 python 字典 概念 。   python 语言 内置 json 模块 ， 读写 json 文件 只 简单   import   json   即可 。   小试牛刀 ，   [ 1 , 2 , 3 , 4 , 5 ]   这组 数存 (   dump   ) 进 test . json 文件 去 。   import   json   lst   =   [   1   ,   2   ,   3   ,   4   ,   5   ]     open   (   ' test . json '   ,   mode   =   ' w '   ,   encoding   =   ' utf - 8 '   )     f   :   json   .   dump   (   lst   ,   f   )   json 不 支持 元组 ( tuple ) 字节 ( bytes ) 类型 ， bytes 类型 去 惊扰 ， tuple 元组 存储 ， 转换成 列表 即可 。   简单 读取 json   load   函数 ， 所示 ：     open   (   ' test . json '   ,   mode   =   ' r '   ,   encoding   =   ' utf - 8 '   )     f   :   lst2   =   json   .   load   (   f   )   lst2 赋值   [ 1 , 2 , 3 , 4 , 5 ]   ， 运算 。   存储 字典 值   例子 稍作 修改 存储 字典 值 ：   import   json   dict01   =   {   ' a '   :   1   ,   ' b '   :   2   ,   ' c '   : [   1   ,   2   ,   3   ] }     open   (   ' test . json '   ,   mode   =   ' w '   ,   encoding   =   ' utf - 8 '   )     f   :   json   .   dump   (   dict01   ,   f   )     open   (   ' test . json '   ,   mode   =   ' r '   ,   encoding   =   ' utf - 8 '   )     f   :   dict02   =   json   .   load   (   f   )   print   (   dict02   )   存储 文件 美化   dump 函数 那句 读者   indent   选项 ：   json   .   dump   (   dict01   ,   f   ,   indent   =   4   )   test . json 文件 数据 会 缩进 ， 会 更好 看 。     sort _ keys   选项 会 很 有用 ， 默认 False ， 设置 True ， 输出 文件 key 排序   。     ensure _ ascii   选项 默认 True ， 中文 字符 保存 会 变为   \\ uabcd   东西 ， 设置 False ， 显示 中文 字符 。   dumps loads 函数   dumps loads 函数 是非 文件 接口 版 ， 简单 下 即可 。   itertools 模块   repeat 函数   定义 函数 ：   def   repeat ( object ,   times = None ) :   #   repeat ( 10 ,   3 )   - - >   10   10   10     times     None :     True :   yield   object   :     i     range ( times ) :   yield   object   返回 一个 迭代 对象 ， 封装 一个 用处 用于 填充 map 函数 zip 函数 常 数值 。 填写 repeat ( 5 ) 一个 返回 一个 迭代 对象 ， 不停 返回 数字 5 不 长度 。   starmap 函数   starmap 函数 定义 所示 ：   def   starmap ( function ,   iterable ) :   #   starmap ( pow ,   [ ( 2 , 5 ) ,   ( 3 , 2 ) ,   ( 10 , 3 ) ] )   - - >   32   9   1000     args     iterable :   yield   function ( * args )   接受 一个 迭代 对象 ， 逐个 迭代 对象 中 元素 解包 送入 函数 参数 （ 函数 执行 ） 。   inspect 模块   更 信息 请 参看   官方 文档 ] (   。   getfile 函数   传入 python   object ， 返回 定义 object 文件 中 。 获取 文件 系统 绝对路径 地址 :   os . path . abspath ( inspect . getfile ( func ) )   值得一提的是 ， 模块 安装 系统 ， 文件 地址 类似 形式 :   / usr / local / lib / python3.4 / dist - packages / infome - 15.10 . 30 - py3.4 . egg / infome / web / youdao . py   。   getcallargs 函数   所示 :   params   =   inspect . getcallargs ( func , * args , * * kargs )   相当于 模拟 执行 func 函数 ， 返回 执行 func 函数 时其 接受 参数 字典 值 （ 包括 必填 参数 可选 参数 ） 。   functools 模块   partial 类   functools 模块 定义 一个 partial 类 ， 输入 参数 所示 :   functools . partial ( func ,   * args ,   * * keywords )   返回 一个 partial 对象 ， 其有   __ call __   方法 ， 类似 函数 调用 。 其有   func   属性 ， 未来 函数 调用 ；   args   属性 ， 未来 函数 参数 ；   keywords   属性 ， 未来 函数 可选 参数 。   简单 来说 partial 原函数 对象 func 封装 （ 特别 适合 做 装饰器 ） ，   newfun = partial ( func , args , keywords )   ， 调用 newfun 对象 好像 调用 原 func ， 加上 额外 参数 ， args 非可选 参数 类似 列表 append 形式 ， keywords 可选 参数 说 关键字 参数 类似 字典 update 形式 。   一个 简单 演示 例子 :   import   functools   def   fun1   (   a   ,   b   =   2   ) :   print   (   ' called   fun1   '   ,   a   ,   b   )   def   show _ details   (     ,   f   ,   _ partial   =   False   ) :   print   (     )   print   (   f   )     _ partial   :   print   (   f   .   func   )   print   (   f   .   args   )   print   (   f   .   keywords   )     :   print   (   f   .   __ __   )   show _ details   (   ' fun1 '   ,   fun1   )   fun1   (   ' fun1   a '   )   p1   =   functools   .   partial   (   fun1   ,   ' p1   a '   ,   b   =   99   )   show _ details   (   ' p1 '   ,   p1   ,   True   )   p1   ( )   输出 :   fun1   < function   fun1     0xb705880c >   fun1   called   fun1     fun1   a   2   p1   functools . partial ( < function   fun1     0xb705880c > ,   ' p1   a ' ,   b = 99 )   < function   fun1     0xb705880c >   ( ' p1   a ' , )   { ' b ' :   99 }   called   fun1     p1   a   99   逻辑 执行 fun1 ， fun partial 封装 成 p1 ， 新增 参数 字符串 ' p1   a ' b = 4 ， p1 参数 都 加进去 。 执行 p1 参数 变化 。   datetime 模块   简单 日期 时间 操作 time 模块 函数 即可 ， datetime 模块 用类 方式 ， 适合 日期 时间 。 值得一提的是 mongodb python 接口   pymongo   （ 连接 mongodb python 第三方 模块 ） ， 日期 时间 输入输出 都   datetime   对象 ， 很 。   简要 介绍 ， 更 内容 请 参看   官方 文档   。   timedelta 对象   timedelta 函数 返回 一个 timedelta 对象 ， 一个 时间 间隔 对象 。 函数参数 情况 所示 :   class   datetime   .   timedelta   ( [   days   [ ,   seconds   [ ,   microseconds   [ ,   milliseconds   [ ,   minutes   [ ,   hours   [ ,   weeks   ] ] ] ] ] ] ] )   必填 参数 ， 简单 控制 第一个 整数 天 间隔 :   datetime . timedelta ( 10 )   两个 时间 间隔 对象 彼此之间 相加 相减 ， 返回 仍 一个 时间 间隔 对象 。 更 一个 datetime 对象 减去 一个 时间 间隔 对象 ， 返回 减去 datetime 对象 ， 两个 datetime 对象 相减 返回 一个 时间 间隔 对象 。 很 。   datetime 对象   datetime 函数 创建 一个 datetime 对象 :   class   datetime   .   datetime   (   year   ,   month   ,   day   [ ,   hour   [ ,   minute   [ ,     [ ,   microsecond   [ ,   tzinfo   ] ] ] ] ] )   year ， month day 必填 参数 。 一个 简单 例子 :   > > >   db _ t   =   {   ...   \" date \" :   datetime . datetime ( 1777 , 07 , 07 )   ...   }   > > >   db _ t   { ' date ' :   datetime . datetime ( 1777 ,   7 ,   7 ,   0 ,   0 ) }   pymongo 存入 mongodb 形式 :   ISODate ( \" 1777 - 07 - 07T00 : 00 : 00.000 Z \" )   utcnow 方法   datetime 对象       utcnow   两个   类 方法   （ classmethod ） 返回 日期 时间 datetime 对象 。 utcnow 不 接受 参数 ， 方法 接受 一个 tz 指定 时区 参数 ，   pytz   模块 （ 一个 时 区 推荐 第三方 模块 ） 指明 时 区 。   查看 pytz 时 区   参看   网页   。   > > >   pytz . _ timezones   [ ' Africa / Abidjan ' ,   ' Africa / Accra ' ,   ' Africa / Addis _ Ababa ' ,   ' Africa / Algiers ' ,   ......   方法 指定 一个 时 区   参看   网页   。   import   pytz   datetime   .   datetime   .     (   tz   =   pytz   .   timezone   (   \" Asia / Hong _ Kong \"   ) )   方法 utcnow 方法 区别   看 例子 :   > > >   datetime . ( tz   =   pytz . timezone ( \" UTC \" ) ) , datetime . utcnow ( )   ( datetime . datetime ( 2015 ,   7 ,   11 ,   9 ,   25 ,   20 ,   266863 ,   tzinfo = < UTC > ) ,   datetime . datetime ( 2015 ,   7 ,   11 ,   9 ,   25 ,   20 ,   266888 ) )   方法 指定 默认 时区 \\ \" UTC \\ \" ， 返回 datetime 对象 utcnow 返回 datetime 对象 基本上 没什么 区别 ， 微秒 （   \\ ( 10 &# 94 ; { - 6 } \\ )   秒 ） 区别 理解 。 再 看 方法 不 加 参数 会 :   > > >     datetime . datetime ( 2015 ,   7 ,   11 ,   16 ,   34 ,   43 ,   144018 )   > > >   utcnow   datetime . datetime ( 2015 ,   7 ,   11 ,   8 ,   34 ,   56 ,   319108 )   显示 时间 本地 时间 ， 默认 时区 本地 时区 参数 。 谈到 明白 ， 后台 数据库 日期 时间 输入 需求 ， 时间 戳 一致性 ， 推荐 都 utcnow 方法 生成 时间 戳 ， 实际上 都 UTC 格林威治 时 区 为准 。 前端 显示 用户 日期 时间 ， 引用 前端 数据库 日期 时间 ， 才 引入 时区 转换 。 前端 python 生成 实时 时间 ， 方法 再 引入 pytz 时区 控制 。   datetime 对象 属性   > > >     datetime   import   datetime   > > >   d   =   datetime   .     ( )   > > >   d   .   year   2015   > > >   d   .   month   11   > > >   d   .   day   3   > > >   d   .   hour   18   > > >   d   .   minute   42   > > >   d   .     57   > > >   d   .   tzinfo   > > >   d   datetime   .   datetime   (   2015   ,   11   ,   3   ,   18   ,   42   ,   57   ,   919613   )   含义 所示 :   year   年   month   月   day   日   hour   时   minute   分     秒   microsecond   微秒   strftime 方法   datetime 对象 调用   strftime   方法   __ format __   方法 一个 好看 想要 日期 时间 字符串 格式 :   > > >     datetime   import   datetime   > > >   d   =   datetime   .     ( )   > > >   d   .   strftime   (   ' % T '   )   ' 18 : 52 : 39 '   > > >   d   .   __ format __   (   '   % F   '   )   ' 2015 - 11 - 03 '   格式 符号 python 官方 文档 述及 ， 更 实际上 linux 系统 下   date   命令 格式 符 ， 读者   date   - -   来看 ， 信息 :   %%   一个 文字   %   % a     locale   星期 名 缩写   (   ：   日 ， 代表 星期日   )   %   A     locale   星期 名 全称   (   ： 星期日   )   % b     locale   月 名 缩写   (   ： ， 代表 一月   )   %   B     locale   月 名 全称   (   ： 一月   )   % c     locale   日期 时间   (   ：   2005   年   3   月   3   日   星期四   23   :   05   :   25   )   %   C   世纪 ；   %   Y   ， 省略 年份 后 两位 数字   (   ：   20   )   % d   按月计 日期   (   ：   01   )   %   D   按月计 日期 ； 等于   % m   /   % d   /   % y   % e   按月计 日期 ， 添加 空格 ， 等于   %_ d   %   F   完整 日期 格式 ， 等价   %   Y   -   % m   -   % d   % g   ISO   -   8601   格式 年份 两位   (   参见   %   G   )   %   G   ISO   -   8601   格式 年份   (   参见   %   V   )   ， 只   %   V     % h   等于   % b   %   H   小时   (   00   -   23   )   %   I   小时   (   00   -   12   )   % j   按年计 日期   (   001   -   366   )   % k   hour   ,   space   padded   (   0 .. 23   ) ;       %_   H   % l   hour   ,   space   padded   (   1 .. 12   ) ;       %_   I   % m   month   (   01 .. 12   )   %   M   minute   (   00 .. 59   )   % n   换行   %   N   纳秒   (   000000000   -   999999999   )   % p     locale   下   \" 上午 \"     \" 下午 \"   ， 未知 时 输出 为空   %   P     % p   类似 ， 输出 小写字母   % r     locale   下   12   小时 时钟 时间   (   ：   11   :   11   :   04   下午   )   %   R   24   小时 时间 时 分 ， 等价   %   H   :   %   M   % s     UTC   时间   1970   -   01   -   01   00   :   00   :   00   秒数   %   S   秒   (   00   -   60   )   % t   输出 制表符   Tab   %   T   时间 ， 等于   %   H   :   %   M   :   %   S   % u   星期 ，   1   代表 星期一   %   U   一年 中 几周 ， 周日 每星期 第一天   (   00   -   53   )   %   V   ISO   -   8601   格式 规范 下 一年 中 几周 ， 周一 每星期 第一天   (   01   -   53   )   % w   星期 中 几日   (   0   -   6   )   ，   0   代表 周一   %   W   一年 中 几周 ， 周一 每星期 第一天   (   00   -   53   )   % x     locale   下 日期 描述   (   ：   12   /   31   /   99   )   %   X     locale   下 时间 描述   (   ：   23   :   13   :   48   )   % y   年份 两位 数位   (   00   -   99   )   %   Y   年份   % z   +   hhmm   数字 时 区   (   ，   -   0400   )   % :   z   +   hh   :   mm   数字 时 区   (   ，   -   04   :   00   )   % : :   z   +   hh   :   mm   :   ss   数字 时 区   (   ，   -   04   :   00   :   00   )   % : : :   z   数字 时 区 带有 精度   (   ，   -   04   ，   +   05   :   30   )   %   Z   字母表 排序 时区 缩写   (   ，   EDT   )     % F     % T   python 官方 文档 中 无 ， 内部 API   date   命令 。   支持 时间 间隔 运算   提到 一个 datetime 对象 减去 一个 timedelta 对象 返回 一个 datetime 对象 ， 一个 datetime 对象 减去 一个 datetime 对象 返回 一个 时间 间隔 对象 。 一年 时间 表达   datetime . datetime . utcnow ( )   -   datetime . timedelta ( 365 )   。 爱因斯坦 生日 时间 间隔 表达 :   datetime . datetime . utcnow ( )   -   datetime . datetime ( 1879 , 03 , 14 )   利用 时间 间隔 操作 判断 。   > > >   delta   =   datetime . datetime . utcnow ( )   -   datetime . datetime ( 1879 , 03 , 14 )   > > >   delta   datetime . timedelta ( 49792 ,   35970 ,   903285 )   > > >   delta   >   datetime . timedelta ( 120 * 365 )   True   > > >   delta . days   / /   365   136   struct _ time   对象 转化   datetime   对象   参看   网页     time   import   mktime   mktime 函数 接受 time 模块   struct _ time   object ， 来自 time 模块   gmtime   、   localtime   、   strptime   函数 ， mktime 函数 返回 一个 时间 戳 ， datetime 模块   fromtimestamp   函数 接受 时间 戳 。   总 过程 :     time   import   mktime     datetime   import   datetime   dt   =   datetime   .   fromtimestamp   (   mktime   (   struct   ) )   datetime   对象 转化   time _ struct   对象   参考   网页   > > >   t   =   datetime . datetime . ( )   > > >   t   datetime . datetime ( 2011 ,   11 ,   5 ,   11 ,   26 ,   15 ,   37496 )   > > >   time . mktime ( t . timetuple ( ) )   +   t . microsecond   /   1E6   1320517575.037496     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"python语言",
            "url":"articles/python-modules-two.html"
        },
        {
            "title":"mysql数据库",
            "text":"简介   本文 假设 读者 sql 一个 初步 ， 讨论 mysql 相关 细节 。 安装 ubuntu 下 简单 apt - 安装 ， 所示 ， 不 赘述 。   sudo   apt -   install   mysql - server   mysql - client   mysql 入门   小节 代码 依次 演示 第一个 例子 ， 好 读者 mysql 有个 初步 。   登录   root 用户 登录   mysql   - u   root   - p   密码 安装 mysql 时 情况 ， 设置 密码 Enter 。   mysql 数据库 配置   mysql   /     . conf   配置 外 ， 很多 相关 配置 一个 名叫 mysql 数据库 。   列出 数据库   show   databases   ;   切换 数据库   先 切换 mysql 数据库 看 。     mysql   ;   列出 表格   show   tables   ;   描述 过程 GUI 程序 （   emma   ） 来点 开看 。 先 user 表格 ， 表格 存储 mysql 用户 信息 。   简单 检索 表格   select   *     user   ;   内容 ， 显示 效果 不太好 。   创建 用户   user 表格 插入 一条 记录 实际上 新建 一个 新 mysql 用户 ， 所示 :   insert     user   (   host   ,   user   ,   password   ,   select _ priv   ,   insert _ priv   )   values   (   ' localhost '   ,   ' wanze '   ,   password   (   ' 123456 '   ) ,   ' Y '   ,   ' Y '   ) ;   删除 用户   user 表格 删除 一条 记录 删除 mysql 用户 ， 创建 用户 删除 :   delete     user     user   =   ' wanze '   ;   好 ， 再 用户 加进去 ， 只 用户 select insert 权限 ， 再 几个 权限 。   更新 记录   mysql   >   update   user   - >   set   update _ priv   =   ' Y '   ,   - >   delete _ priv   =   ' Y '   ,   - >   create _ priv   =   ' Y '   ,   - >   drop _ priv   =   ' Y '   - >     user   =   ' wanze '   ;   用户 新 加上 update ， delete ， create drop 权限 。 用户 很多 权限 设置 ，   用户 访问 权限 管理   修改 mysql user 数据库 方法 之外 ， 推荐 用户 访问 权限 管理 语句 ：   GRANT   ALL   PRIVILEGES   ON   test   .   *     ' username '   @   ' localhost '   ;   test database   ， 带个   *   表格 ， 想要 用户 访问 database ， 写   * . *   。   第二个 username 用户名 ， localhost 本地连接 。 再 来看 例子 ：   GRANT   ALL   PRIVILEGES   ON   * . *     wanze @ ' % '   IDENTIFIED   BY   ' 123455 ' ;     %   远程 连接 ， 写 host 。 跟上   IDENTIFIED   BY   设置 用户 登录 密码 。   ​   创建 数据库   先 创建 一个 新 数据库 :   create   database   test   ;   创建 数据库 指定 字符集   create   database   database _   character   set   utf8   collate   utf8 _ unicode _ ci ;   创建表格   mysql   >   create   table   test   (   x   int   ,   y   integer   ,   z   integer   ) ;   简单 创建 一个 名叫 test 表格 ， 定义 表头 三个 整数 ， integer int 一个 。   插入 数据   插入 数据 sql 数据库 insert   语句 格式 。   mysql   &   gt   ;   insert     test   (   x   ,   y   ,   z   )   values   (   1   ,   2   ,   3   )   ;   第一个 例子 ， 简单 mysql 情况 ， 详细 讨论 。   删除 table   drop   table   test   ;   删除 database   drop   database   test   ;   至此 新建 数据库 信息 都 删除 ， 第二个 例子 ， 建立 更 现实意义 数据库 。   mysql 进阶   创建 learning _   database 。 创建 一个 student 用户 ， learning _   database 拥有 权限 。   mysql   -   u   root   mysql   >   create   database   learning _   ;   mysql   >   grant     privileges     learning _   .   *     ' student '   @   ' localhost '   ;   创建表格   写 好 sql 语句 文件 刷 进去 ， 所示 :   mysql   - u   student   learning _   <   mysql _ learning _ . sql     - u   接 用户名 ， 操作 database 名字 。   文件 简单 写 上 一句 :   create   table   department   (   dept _ id   smallint   unsigned     null   auto _ increment   ,     varchar   (   20   )     null   ,   constraint   pk _ department   primary   key   (   dept _ id   )   ) ;   很 ， 新建 department table ， 定义 一列 dept _ id   ， 其为   smallint   ，   unsigned   （ 是从 0 65535 ） ，     null   说 这列 为空 ，   auto _ increment   说 这列 数值 自动 增加 （ 主键 id ） ； 一列   varchar ( 20 )   ， 变长 字符串 ， 长度 20 ， 类似   char ( 20 )   ， 其为 定长 字符串 ， 都 会   自动 填充 空格   ，   null 限定 非空 。 约束 语句 额外 说 。   constraint   约束 ， pk _ department （ 名字 貌似 随意 ） 指 约束 department table primary   key ， 跟上 primary   key   ( dept _ id )   ， 约束 table   department 主 键值   dept _ id   一列 。   create   table       exists   department   (   dept _ id   smallint   unsigned     null   auto _ increment   ,     varchar   (   20   )     null   ,   constraint   pk _ department   primary   key   (   dept _ id   )   ) ;   create   table       exists   branch   (   branch _ id   smallint   unsigned     null   auto _ increment   ,     varchar   (   20   )     null   ,   address   varchar   (   30   ) ,   city   varchar   (   20   ) ,   state   varchar   (   2   ) ,   zip   varchar   (   12   ) ,   constraint   pk _ branch   primary   key   (   branch _ id   )   ) ;   创建 department 表格 语句 加上       exists   ， 表格 不 才 会 新建 table ， sql 文件 重复 刷 出错 。 新建 branch 表格 sql 语句 增加 新 东西 ， 往下 看 。   值得一提的是 mysql date 类型 只能 存储 公元前 1000 年 公元 9999 年 之间 date 。   接下来 重点 讲   foreign   key   约束 写法 。   constraint   fk _ e _ emp _ id   foreign   key   ( superior _ emp _ id )   references   employee   ( emp _ id ) ,   fk _ e _ emp _ id 名字 带有 随意性 ， 大致 表达 出 fk _ table 下 一列 即可 。   foreign   key   外 键值   ( superior _ emp _ id )   一列 外 键值 ， references   引用   employee   表格 ( emp _ id )   一列 。 总 superiro _ emp _ id 一列 一个 外 键值 约束 列 ， 其值 只 取自 employee 表格 emp _ id 一列 ， 逻辑 含义 其值 引用 自它 。 比如说 雇员 张三在 id 3 ， 张三 上司 张三丰 ， id 4 。 张三 修改 上司 值 ， 雇员 列表 id 号 雇员 。 （ 外键 引用 用于 SQL 表格 中               情况 ， 用内 连接 查询 ， 该外 键值 约束 列 取值 一个 表格 很多 列 ， 再 详细 讨论 。 ）   刷下去 ， 强烈推荐 读者 emma GUI 程序 实时 查看 :   create   table       exists   customer   (   cust _ id   integer   unsigned     null   auto _ increment   ,   fed _ id   varchar   (   12   )     null   ,   cust _ type _ cd   enum   (   ' I '   ,   ' B '   )     null   ,   address   varchar   (   30   ) ,   city   varchar   (   20   ) ,   state   varchar   (   20   ) ,   postal _ code   varchar   (   10   ) ,   constraint   pk _ customer   primary   key   (   cust _ id   )   ) ;   值得 一讲 :   cust _ type _ cd   enum ( ' I ' , ' B ' )     null ,   mysql 枚举 类型 ， cust _ type _ cd 一列 只能 取 ' I ' ' B ' 两个 值 。   插入 数据   代码 :   insert     department   (   dept _ id   ,     )   values   (   null   ,   ' Operations '   ) ;   insert     department   (   dept _ id   ,     )   values   (   null   ,   ' Loans '   ) ;   insert     department   (   dept _ id   ,     )   values   (   null   ,   ' Administration '   ) ;   department dept _ id 打开 auto _ increment 特性 ， 简单 一列 赋值   null   即可 ， 其会 自动 添加 一个 主键 数字 。   创建表格     exists 逻辑 ， sql 脚本 重复 刷 都 ， 插入 数据     exists 逻辑 ？ 请 参看   网页   。   insert   ignore   语句 重复 插入 ， 这是 插入 语句 改成 样子 :   insert   ignore     department   (   dept _ id   ,     )   values   (   1   ,   ' Operations '   ) ;   insert   ignore     department   (   dept _ id   ,     )   values   (   2   ,   ' Loans '   ) ;   insert   ignore     department   (   dept _ id   ,     )   values   (   3   ,   ' Administration '   ) ;   id 赋值 ， 其为 primarykey ， 设置 null 语句 会 重复 插入 ， primarykey 重复 ， insert 语句 才 插入 。   这句 :   insert   ignore     employee   (   emp _ id   ,   fname   ,   lname   ,   start _ date   ,   dept _ id   ,   title   ,   assigned _ branch _ id   )   values   (   1   ,   ' Michael '   ,   ' Smith '   ,   ' 2001 - 06 - 22 '   ,   (   select   dept _ id     department       =   ' Administration '   ) ,   ' President '   ,   (   select   branch _ id     branch       =   ' Headquarters '   ) ) ;   子 查询   SQL 三种 类型 表 :   一种 常见 存储 那种 SQL 表格 ； 第二种 临时 表格 ， 子 查询 返回 表格 ； 一种 虚拟 表 ， 视图 。   子 查询 实际上 一个 select 语句 返回 一个 临时 SQL 表格 ， 最 简单 一个 select 语句 语句 ， 一种 用法 常用 表格 多列 值 复制 转移 操作 ，   insert   select   语句 ， 一个 insert 语句 一个 select 语句 组合而成 。 所示   1   :   INSERT   INTO   Customers   ( CustomerName ,   Country )   SELECT   SupplierName ,   Country   FROM   Suppliers ;   SQL 语句 Suppliers 表格 SupplierName Country 两列 值 都 复制到 Customers 表格 中 去 ， CustomerName Country 两列 。   例子 第三种 用法 ， 其是 一个 select 语句   括号 ( ) 括   。 返回 一列 值 ， 情况 一个 值 ， 值 提取 insert   语句 ， 返回 多个 值 情况 ， 过滤 条件       ( select   … )   ， 子 查询 返回 多个 值 。   往下 看 :   create   temporary   table   emp _ tmp     select   emp _ id   ,   fname   ,   lname     employee   ;   update   employee   set   superior _ emp _ id   =   (   select   emp _ id     emp _ tmp     lname   =   ' Smith '     fname   =   ' Michael '   )     ( (   lname   =   ' Barker '     fname   =   ' Susan '   )     (   lname   =   ' Tyler '     fname   =   ' Robert '   ) ) ;     create   temporary   table   语句 select 语句 创建 一个 临时 表格 ， 临时 表格 session 看 ， 退出 session 临时 表格 会 自动 drop 掉 。   update 语句 格式 熟悉 ， 关键 理解 字句 过滤 条件 。 SQL 语句 : employee 表格 中 Barker   Susan Tyler   Robert 两个 伙计 上司 设置 Michael   Smith emp _ id 。 过滤 条件 逻辑 逻辑 想 熟悉 编程 都 很 ， 不 赘述 。   交叉 连接   接下来 语句 显得 :   insert   ignore     account   (   account _ id   ,   product _ cd   ,   cust _ id   ,   open _ date   ,   _ activity _ date   ,   status   ,   open _ branch _ id   ,   open _ emp _ id   ,   avail _ balance   ,   pending _ balance   )   select   1   ,   a   .   prod _ cd   ,   c   .   cust _ id   ,   a   .   open _ date   ,   a   .   _ date   ,   ' ACTIVE '   ,   e   .   branch _ id   ,   e   .   emp _ id   ,   a   .   avail   ,   a   .   pend     customer   c   cross   join   (   select   b   .   branch _ id   ,   e   .   emp _ id     branch   b     join   employee   e     e   .   assigned _ branch _ id   =   b   .   branch _ id     b   .   city   =   ' Woburn '   limit   1   )   e   cross   join   (   select   ' CHK '   prod _ cd   ,   ' 2000 - 01 - 15 '   open _ date   ,   ' 2005 - 01 - 04 '   _ date   ,   1057   .   75   avail   ,   1057   .   75   pend   union     select   ' SAV '   prod _ cd   ,   ' 2000 - 01 - 15 '   open _ date   ,   ' 2004 - 12 - 19 '   _ date   ,   500   .   00   avail   ,   500   .   00   pend   union     select   ' CD '   prod _ cd   ,   ' 2004 - 06 - 30 '   open _ date   ,   ' 2004 - 06 - 30 '   _ date   ,   3000   .   00   avail   ,   3000   .   00   pend   )   a     c   .   fed _ id   =   ' 111 - 11 - 1111 '   ;   SQL 语句 主体 insert   select 语句 ， 显得 select 语句 customer （ 别名 c ） 一个 子 查询 语句 生成 表格 （ 别名 e ） 一个 子 查询 语句 生成 表格 （ 别名 a ）   cross   join   而成 一个 表格 。   理解 cross   join 概念 ， 不 读者 接触   join ， 内 连接 概念 ， 接触 SQL 表格 join 不 加 过滤 条件 生成 表格 两个 SQL 表格 笛卡尔 积 。 笛卡尔 积 ， 假设 一个 表格 三行 ， a 行 b 行 c 行 ， 假设 一个 表格 两行 ， 1 行 2 行 ， 两个 表格 笛卡尔 积 生成 一个 大 表格 ， ( a1 行 a2 行 b1 行 b2 行 c1 行 c2 行 ) ， 一共 3 * 2 = 6 行 。   cross   join 交叉 连接 实际上 多个 表格 之间 笛卡尔 积 运算 组合 一个 更大 表格 。   内 连接   例子 中 第一个 子 查询 语句     join   关键词 ， 其是 内 连接 。 内 连接 看作 交叉 连接 生成 表格 基础 上 进一步 加上 过滤 条件 行给 删除 掉 。   来看 :   select   b . branch _ id ,   e . emp _ id ,   e . assigned _ branch _ id     branch   b   cross   join   employee   e   ;   branch 表格 4 条 记录 ， branch 18 条 记录 ， cross   join 组合 出 72 条 记录 。   再 来看 查询 :   select   b . branch _ id ,   e . emp _ id     branch   b     join   employee   e     e . assigned _ branch _ id   =   b . branch _ id ;   两个 SQL 表格 cross   join 大S QL 表格 数据 组合 不 ，   join 关键词 过滤 生成 大S QL 表格 更 现实意义 。 一个 雇员 只 一个 分公司 ， cross   join 雇员 都 四个 分公司 ，   join 加上 控制 雇员 分配 分公司 正是 连接 分公司 号 。 更 现实意义 连接 。 理解 ， 雇员 分公司 属性 id 1 ， 连接 分公司 表格 ， ， 才能 保证 分公司 表格 属性 雇员 。   :   mysql >   select   b . branch _ id ,   e . emp _ id , b . city     branch   b     join   employee   e     e . assigned _ branch _ id   =   b . branch _ id ;   + - - - - - - - - - - - + - - - - - - - - + - - - - - - - - - +   |   branch _ id   |   emp _ id   |   city   |   + - - - - - - - - - - - + - - - - - - - - + - - - - - - - - - +   |   1   |   1   |   Waltham   |   |   1   |   2   |   Waltham   |   |   1   |   3   |   Waltham   |   |   1   |   4   |   Waltham   |   |   1   |   5   |   Waltham   |   |   1   |   6   |   Waltham   |   |   1   |   7   |   Waltham   |   |   1   |   8   |   Waltham   |   |   1   |   9   |   Waltham   |   |   2   |   10   |   Woburn   |   |   2   |   11   |   Woburn   |   |   2   |   12   |   Woburn   |   |   3   |   13   |   Quincy   |   |   3   |   14   |   Quincy   |   |   3   |   15   |   Quincy   |   |   4   |   16   |   Salem   |   |   4   |   17   |   Salem   |   |   4   |   18   |   Salem   |   + - - - - - - - - - - - + - - - - - - - - + - - - - - - - - - +   18   rows     set   ( 0.00   sec )       b . city   =   ' Woburn '   实际上 限定 一个 分公司 。   mysql >   select   b . branch _ id ,   e . emp _ id , b . city     branch   b     join   employee   e     e . assigned _ branch _ id   =   b . branch _ id     b . city = ' Woburn ' ;   + - - - - - - - - - - - + - - - - - - - - + - - - - - - - - +   |   branch _ id   |   emp _ id   |   city   |   + - - - - - - - - - - - + - - - - - - - - + - - - - - - - - +   |   2   |   10   |   Woburn   |   |   2   |   11   |   Woburn   |   |   2   |   12   |   Woburn   |   + - - - - - - - - - - - + - - - - - - - - + - - - - - - - - +   3   rows     set   ( 0.00   sec )     limit   1   只 返回 一条 记录 。 最终 cross   join 生成 大 表格 还 加上 过滤 条件     c . fed _ id   =   ' 111 - 11 - 1111 ' ;   一个 顾客 fed _ id 都 唯一 ， 实际上 custom 表格 交叉 连接 一条 记录 ， 三个 表格 cross   join 情况 等同于 两个 表格 一条 记录 属性 都 加上 ， 再 cross   第三个 表格 ， 第三个 表格 三条 记录 ， 最终 大 表格 三条 记录 。   union     union     多个 数据 集 合并 。 一种   union   用法 ，   union   会 删除 重复 项 ， union   单纯 合并 。 所示 :   mysql >   select   ' CHK '   prod _ cd ,   ' 2000 - 01 - 15 '   open _ date ,   ' 2005 - 01 - 04 '   _ date ,   - >   1057.75   avail ,   1057.75   pend   union     - >   select   ' SAV '   prod _ cd ,   ' 2000 - 01 - 15 '   open _ date ,   ' 2004 - 12 - 19 '   _ date ,   - >   500.00   avail ,   500.00   pend   union     - >   select   ' CD '   prod _ cd ,   ' 2004 - 06 - 30 '   open _ date ,   ' 2004 - 06 - 30 '   _ date ,   - >   3000.00   avail ,   3000.00   pend ;   + - - - - - - - - - + - - - - - - - - - - - - + - - - - - - - - - - - - + - - - - - - - - - + - - - - - - - - - +   |   prod _ cd   |   open _ date   |   _ date   |   avail   |   pend   |   + - - - - - - - - - + - - - - - - - - - - - - + - - - - - - - - - - - - + - - - - - - - - - + - - - - - - - - - +   |   CHK   |   2000 - 01 - 15   |   2005 - 01 - 04   |   1057.75   |   1057.75   |   |   SAV   |   2000 - 01 - 15   |   2004 - 12 - 19   |   500.00   |   500.00   |   |   CD   |   2004 - 06 - 30   |   2004 - 06 - 30   |   3000.00   |   3000.00   |   + - - - - - - - - - + - - - - - - - - - - - - + - - - - - - - - - - - - + - - - - - - - - - + - - - - - - - - - +   3   rows     set   ( 0.01   sec )   别名   说 select 字句 运算 列 ， 还 构建 一个 列 ， 列 mysql 会 自动 创建 默认 名字 ， 指定 名字 ，     关键词 ， 所示 :   select   emp _ id ,   ' ACTIVE '     status ,   emp _ id   *   3.1415926     empid _ x _ pi ,   upper ( lname )     _ _ upper     employee ;     关键词 省略 ， 表达 ， 推荐 加上     关键词 ， SQL 语句 可读性 更高 。   去除 重复 行   所示   distinct   关键词 select 字句 过滤 掉 重复 行 。   select   distinct   cust _ id     account ;   备份 还原   mysql 备份 操作   mysqldump   命令 ， 生成 一个 sql 文件 ， 还原 实际上 加载 sql 文件 即可 。   还原   过程 所示 :   mysql   - u   root   - p   newdatabase   <   dump . sql   备份     mysqldump   命令 ：   mysqldump   - u   user   - h   127.0 . 0.1   - P   8888   - p   - v   olddatabase   >   dump . sql   - u   :   设置 登录 用户名   - h   :   连接 数据库 服务器 地址   - P   :   连接 数据库 服务器端 口   - v   :   显示 聒噪 信息   - p   :   mysql 命令 类似 ， 下 输入 密码   其后 必填 参数 想要 dump database 名字 。   备份 还 加上 查询 语句   mysqldump   - - tables   article   - - = \" created _   >   ' 2017 - 11 - 19 ' ; \"   - - databases   wxarticles   - u   root   - p123456   重命名 数据库   备份 还原 过程 组合 重命名 数据库 。   hendrasaputra   介绍 ， 做 降低 I / O 。   mysqladmin   - u   username   - p   create   newdatabase   mysqldump   - u   username   - v   olddatabase   - p   |   mysql   - u   username   - p   - D   newdatabase   推荐 扩展 略读 篇文章 ， mysqlworkbench 相关 备份 还原 重命名 操作 ：   mysqlworkbench 数据库 重命名   python 连接   django 连接 mysql 默认   mysql - python ， 更 喜欢 pymysql ，   manage . py   加上 两句 ：   import   pymysql   pymysql   .   install _ _ MySQLdb   ( )   参考   网页   。   附录   server       错误   错误 原因 很多 ， 情况 mysql 包 大小 设定 太小 ：   max _ allowed _ packet   =   16M   参考资料   本网页 参考 《 SQL 学习指南 一书 ， 第二 版 ， Alan   Beaulieu 著 ， 张伟超 ， 林 青松 译 。   Footnotes :   1   参考 [ 网页 ] ( http : / / www . w3schools . / sql / sql _ insert _ _ select . asp ) 。",
            "tags":"数据库",
            "url":"articles/mysql-database.html"
        },
        {
            "title":"python语言学习之-官方模块第一谈",
            "text":"unittest 模块   编程 中有 一个 概念 TDD ， 编程语言 无关 ， 全称 test - driven   development 。 常说 测试 驱动 型 开发 。 不说 大 概念 ， python 编程 开发 中有 一块 内容 ， 单元测试 开发 。 python 中 内置 模块 unittest 做 工作 。   简单 例子 ：   import   unittest   import   math   class   TooBigError   (   Exception   ) :   pass   def     (   n   ) :     n   >   2   :   raise   TooBigError   (   '   big   input   error '   )     :   print   (   ' '   *   n   )   class   FirstTest   (   unittest   .   TestCase   ) :   def   setUp   (     ) :   ' ' ' setUp 函数 测试 单元 执行 前 执行 ， 用于 预先 配置   测试 单元 会 用到 参数 ' ' '   pass   def   tearDown   (     ) :   ' ' ' tearDown 函数 测试 单元 执行 再 执行 。 ' ' '   pass   def   test _ bool   (     ) :   ' ' ' 测试 单元 ， 名字 test 字符 ' ' '     .   assertTrue   (   True   )     .   assertFalse   (   False   )   def   test _ equal   (     ) :     .   assertEqual   (   1   ,   1   )     .   assertNotEqual   (   1   ,   2   )     .   assertAlmostEqual   (   math   .   pi   ,   3.1416   ,   4   )     .   assertNotAlmostEqual   (   math   .   pi   ,   3.1415   ,   4   )   def   test _ raises   (     ) :     .   assertRaises   (   TooBigError   ,     ,   3   )     __ __   = =   ' __ main __ '   :   unittest   .   main   ( )   unittest 模块 main 函数 执行 测试 单元 类 ， 测试 单元 类 继承 unittest TestCase 类 。 继承 TestCase 类 中 ， setUp 函数 tearDown 函数 用途 ， 见 代码 。 定义 函数 test 字符串 开头 都 测试 单元 ， 逐个 执行 。   TestCase 很多 方法 ， assertTrue ， assertFalse 用于 断言 bool 值 真 假 ， assertEqual 用来 断言 两个 值 ( = = ) ， 类似 assertNotEqual 用来 断言 两个 值 不 。 值得一提 assertAlmostEqual 方法 用来 断言 两个 float 值 小数位 上 大致 ， 例子 ，   \\ ( \\ pi \\ )   值 小数点 4 位是 3.1416 。 方法 还 额外 接受 一个 提示 字符串 参数 （ Msg 参数 ） ， 用来 断言 成功 时 补充 信息 。   assertRaises 方法 用来 断言 函数 接受 参数 返回 异常 。 方法 第一个 参数 期望 捕捉到 异常 ， 第二个 参数 调用 函数 ， 参数 送给 函数 ， 谈及 Msg 参数 。   更 信息 请 参看 模块 官方 文档 。   time 模块   time 模块 提供 时间 相关 函数 ， 底层 ， 函数 平台 不 。 类似 模块 datetime 模块 ， datetime 以类 框架 解决 时间 。 简单 调用 时间 ， time 模块 ， 时间 相关 ， 推荐 datetime 模块 。   time 函数   > > >   import   time   > > >   time   .   time   ( )   1404348227.07554   time 函数 返回 一个 数值 ， 数值 1970 年 1 月 1 号 0 时 0 分 0 秒 时间 秒 。   gmtime 函数   函数 接受 一个 参数 ， 参数 秒 ， 返回 一个 特定 格式 时间 数组   struct _ time   。 不 接受 参数 ， 默认 接受 秒数 time 函数 返回 ， 是从 特定 时间 秒 ， 特定 格式 时间 数组 时间 。   > > >   time . gmtime ( )   time . struct _ time ( tm _ year = 2014 ,   tm _ mon = 7 ,   tm _ mday = 3 ,   tm _ hour = 0 ,   tm _ min = 53 ,   tm _ sec = 0 ,   tm _ wday = 3 ,   tm _ yday = 184 ,   tm _ isdst = 0 )   > > >   time . gmtime ( 0 )   time . struct _ time ( tm _ year = 1970 ,   tm _ mon = 1 ,   tm _ mday = 1 ,   tm _ hour = 0 ,   tm _ min = 0 ,   tm _ sec = 0 ,   tm _ wday = 3 ,   tm _ yday = 1 ,   tm _ isdst = 0 )   localtime 函数   类似   localtime   函数 ， gmtime 用法 返回 一模一样 ， 唯一 区别 返回 当地 时间 。   > > >   time . strftime ( ' % Y - % m - % d   % H : % M : % S ' , time . localtime ( ) )   ' 2014 - 07 - 03   09 : 19 : 40 '   > > >   time . strftime ( ' % Y - % m - % d   % H : % M : % S ' , time . gmtime ( ) )   ' 2014 - 07 - 03   01 : 19 : 49 '   ctime 函数   > > >   time . ctime ( )   ' Thu   Jul   3   08 : 54 : 54   2014 '   > > >   time . ctime ( 0 )   ' Thu   Jan   1   07 : 00 : 00   1970 '   gmtime 类似 ， 返回 字符串 格式 时间 。 ctime 默认设置 时间 localtime 函数 。   strftime 函数   接受 特定 格式 时间 数组   struct _ time   参数 ， 返回 字符串 格式 时间 。 例子 请 参看 例子 。   最 常用 格式 符有 ：   % Y ， 年 ； % m ， 月 ； % d ， 日 ；   % H ， 小时 ； % M ， 分 ； % S ， 秒 。   \\ % X 输出 09 : 27 : 19 格式 ， 小时 分 秒 一个 % X 即可 。   ， ： % I 小时 ， [ 0 - 12 ] 形式 ； % y 年 ， [ 00 - 99 ] 格式 ， 2014 年 输出 14 ； % p ， 本地 AM PM 文字 。 。   sleep 函数   sleep 函数 用到 ， 程序 休眠 几秒 。 接受 一个 数值 参数 ， 单位 秒 ， 零点 几秒 。 sleep 函数 大概 休眠 几秒 ， 不去 用来 计时 ， 不大 精确 。   更 内容 请 参见   官方 文档   。   sys 模块   sys 模块 功能 很 常用 ， 。   sys . argv   刚 python 执行 脚本 参数传递 时 讲 sys . argv 变量 。 这是 一个 字符串 列表 。   import   sys   print   (   sys   .   argv   )     i     range   (   len   (   sys   .   argv   ) ) :   print   (   sys   .   argv   [   i   ] )   新建 一个 test . py 文件 ， 执行 ：   python3   test . py   test1   test2   [ ' test . py ' ,   ' test1 ' ,   ' test2 ' ]   test . py   test1   test2   sys . argv [ 0 ] 脚本 文件名 ， 依次 参数 。   exit 函数   编写 GUI 程序 ， 脚本 程序 中 很 常用 。 不带 参数 退出 程序 ， 还 带 一个 字符串 参数 ， 返回 错误 提示信息 ， 带 一个 数字 ， 详细 讨论 略过 。   > > >   import   sys   > > >   sys   .   exit   (   ' 出错 '   )   出错   wanze   @ wanze   -   ubuntu   :   ~   $   sys . platform   返回 脚本 执行 操作系统 环境 。   Linux   返回 字符串 值 ： linux ； Windows 返回 win32 ； Mac   OS   X   返回 darwin 。   sys . path   一连串 字符串 列表 ， python 脚本 模块 搜索 路径 ， 自定义 python 模块 ， 只 sys . path 列表 上新加 一个 字符串 路径 即可 。   标准 输入输出 错误 输出 文件   sys . stdin ， sys . stdout ， sys . stderr 三个 文件 对象 linux 系统 标准 输入 标准 输出 错误 输出 文件 流 对象 。   sys . version   sys . version 输出 python 版本信息 编译 环境 详细信息 。   sys . version _ info [ 0 ]   返回 python 主 版本 标识 ， python3 返回 数字 3 。   sys . maxsize   返回 计算环境 下 整数 ( int ) 类型 最大值 ， 32 位 系统   \\ ( 2 * * 31 - 1 \\ )   。   > > >   2   * *   31   -   1   2147483647   > > >   import   sys   > > >   sys   .   maxsize   2147483647   sys . stdin . isatty ( )   测试 输入 流 终端 。 终端 ， 返回 True 。   更 内容 请 参见   官方 文档   。   subprocess 模块   想 都 计算机 都 多任务 ， 多任务 机制 多个 进程 运行 ， 计算机 一个 CPU （ 多核 越来越 普及 。 ） 计算机 只能 一个 进程 ， 进程 类似 人脑 （ 不 排除 极 个别现象 ） ， 看 电影 写 作业 ， 写 一会 作业 再 看 一会 电影 （ 不 推荐 做 、 ） ， 计算机 进程 机制 类似 ， 一会 干 进程 ， 一会儿 做 进程 。   计算机 一个 进程 还 分为 很多 线程 ， 较为 ， 不谈 。 编写 一个 脚本 程序 ， 系统 会 分配 一个 进程 号 ， cpu 会 转过 头来 执行 （ 计算机 进程 之间 切换 很快 ， 才 会 一种 多任务 错觉 。 ） 脚本 程序 还 再 开出 子 进程 ，   python subprocess 模块 负责 这方面 工作 。   call 函数   import   subprocess   #   Command     shell   expansion   subprocess   .   call   ( [   \" echo \"   ,   \"   world \"   ] )   subprocess   .   call   ( [   \" echo \"   ,   \" $ HOME \"   ] )   subprocess   .   call   (   ' echo   $ HOME '   ,   shell   =   True   )     world   $   HOME   /   home   /   wanze   shell = True 选项 后 用法 简单 直观 ， 网上 提及 安全性 兼容性 ， 推荐 不 shell = True 选项 。   不 shell = True 选项 ，   $ HOME   系统 变量 正确 翻译 ， 实在 home 路径 ， os . path expanduser 函数 。   getoutput 函数   取出 进程 命令 输出 ， 返回 字符串 形式 。   import   subprocess     =   subprocess   .   getoutput   (   ' whoami '   )   print   (     )   getstatusoutput 函数   进程 执行 状态 。   Popen 类   Popen 类 创建 一个 进程 管理 实例 ， 进程 沟通 ， 暂停 ， 关闭 操作 。 函数 基于 Popen 类 ， 这是 较高级 课题 ， 暂时 略过 。   更 内容 请 参见   官方 文档   。   shutil 模块   相当于 os 模块 补充 ， shutil 模块 进一步 提供 系统 级别 文件 文件夹 复制 ， 删除 ， 操作 。   复制 文件   shutil . copyfile ( src ,   dst )   shutil . copy ( src ,   dst )   shutil . copy2 ( src ,   dst )     copyfile   src dst 两个 参量 都 完整 文件 路径名 ， 第一个 参量 复制 文件 ， 第二个 参量 复制 后 文件名 ；   copy   函数 第一个 参量 复制 文件 ， 第二个 参量 目标 文件夹 路径 ；   copy2   函数 copy 函数 类似 ， 尝试 保留 文件 元 信息 metadata （ 模块 开头 理论 上 不尽然 ） 。   复制 文件夹   shutil . copytree ( src ,   dst )   copytree   函数 第一个 参量 复制 文件夹 路径名 ， 第二个 参量 目标 文件夹 路径名 ， 创建 不 。   删除 目录   shutil . rmtree ( path )   rmtree   函数 用于 删除 文件夹 ， path 目标 文件夹 路径名 。   文件夹   shutil . move ( src , dst )   move   函数 一个 文件 一个 文件夹 一个 文件夹 内 。   chown 函数   shutil . chown ( path ,   user = None ,   group = None )   chown   函数 类似 linux 系统 下 chown 函数 ， 函数 基于 os . chown 函数 ， 接口 更 友好 。   函数   shutil . ( cmd )     函数 类似 linux 系统 下 函数 。   更 shutil 模块 内容 请 参见   官方 文档   。   os 模块   getcwd 函数   终端 运行 python 运行 python 脚本 ， 总有 一个 变量 存储 当前工作 目录 位置 。 getcwd 命令 查看 当前工作 目录 。   import   os   print   (   os   .   getcwd   ( ) )   LaTeX 文件 运行 python 小 脚本 ， python 命令 运行 脚本 ， 调用 python 命令 地方 工作 目录 。 加载 模块 py 文件 运行 时 当前工作 目录 主 py 文件 脚本 当前目录 ， 都 运行 python 命令 地方 。   终端 调用 python 终端 当前工作 目录 所在 ， pwd 命令 查看 。 所示 ：   = >   pwd   /   home   /   wanze   = >   python3   > > >   import   os   > > >   print   (   os   .   getcwd   ( ) )   /   home   /   wanze   mkdir 函数   新建 一个 文件夹 。   os . mkdir ( str )   chdir 函数   os 模块 里 一个 chdir 函数 更改 当前工作 目录 所在地 。     .     ..   语法 ， 简单 \\ \" test \\ \" 调转 test 文件夹 。   > > >   os . chdir ( ' / home / wanze / pymf ' )   > > >   print ( os . getcwd ( ) )   / home / wanze / pymf   删除 文件   os . remove ( path )   支持 相对路径 表达 。 路径 目录 将会 抛出 一个 OSError 异常 。   os . rename   os . rename ( src ,   dst )   第一个 参数 目标 文件 目录 ， 第二个 参数 替换 名字 。 命令 重命名 文件 ， 文件 。   支持 相对路径 语法 表达 ， rename windows 下 不 替换 原文件 ， repalce 替换 文件 。   os . repalce   os . replace ( src ,   dst )   rename windows 下 不 替换 原文件 ， repalce 替换 文件 。   支持 相对路径 语法 表达 。   删除 空目录   os . rmdir ( path )   支持 相对路径 语法 表达 ， 只能 删除 空目录 。 删除 目录 ， 请 shutil . rmtree ( path ) 。   listdir 命令   os . listdir ( path = ' . ' )   相当于 简单 ls 命令 ， 返回 一个 字符串 列表 ， 其内 包含 path 下 文件 文件夹 名 （ 包括 链接 文件 ） 。   介绍 os . path 模块 isfile 函数 新建 一个 函数 listdir _ file ， listdir _ dir listdir _ link ， 文件 ， 目录 链接 文件 区分 开来 。   import   os   def   listdir _ dir   (   path   =   ' . '   ) :   ' ' ' os listdir 函数 ， 只 返回 文件夹 。 ' ' '   return   [   dir     dir     os   .   listdir   (   path   )     os   .   path   .   isdir   (   dir   )   ]   def   listdir _ file   (   path   =   ' . '   ) :   ' ' ' os listdir 函数 ， 只 返回 文件 ' ' '   return   [   file     file     os   .   listdir   (   path   )     os   .   path   .   isfile   (   file   )       os   .   path   .   islink   (   file   ) ]   def   listdir _ link   (   path   =   ' . '   ) :   ' ' ' os listdir 函数 ， 只 返回 链接 文件 ' ' '   return   [   link     link     os   .   listdir   (   path   )     os   .   path   .   islink   (   link   )   ]   遍历 目录 树   os . walk ( ' . ' )   一个 生成器 对象 ， 数值 含义 ： （ dirpath ,   dirnames ,   filenames ） ， dirpath filenames 合并 出本 目录 下 文件 文件名 路径 ， dirpath dirnames 合并 出本 目录 下 目录 路径名 。   os . walk 函数 写 一个   gen _ file   函数 ， 其是 一个 生成器 函数 ， 会 遍历 目录 树 ， 返回 目录 下 文件 信息 。 代码 所示 :   def   gen _ file ( startpath = ' . ' , filetype = \" \" ) :   ' ' ' 利用 os . walk   遍历 目录 ， 收集 其内 文件 ， 返回   ( 文件 路径 列表 ,   路径 下 文件 列表 )   :   ( [ ' shortly ' ] ,   [ ' shortly . py ' ] )   ( [ ' shortly ' ,   ' templates ' ] ,   [ ' shortly . py ' ] )   ( [ ' shortly ' ,   ' static ' ] ,   [ ' shortly . py ' ] )   第一个 选 参数   startpath   默认值   ' . '   第二个 参数   filetype   正则表达式 模板   默认值 \" \"   作用 只 选择 文件   空值 ， 文件 都 选中 。   \" html $ | pdf $ \"   只 选中   html pdf 文件 。   ' ' '     root ,   dirs ,   files     os . walk ( startpath ) :   filelist   =   [ ]     f     files :   fileName , fileExt   =   os . path . splitext ( f )     filetype :     . search ( filetype , fileExt ) :   filelist . append ( f )   :   filelist   =   files     filelist : # 空 文件夹 不   dirlist   =   root . split ( os . path . sep )   dirlist   =   dirlist [ 1 : ]     dirlist :   yield   ( dirlist ,   filelist )   :   yield   ( [ ' . ' ] ,   filelist )   函数 管理 目录 下 （ 正则表达式 过滤 ） 感兴趣 文件 ， 都 刷 。 操作 ， 查找 。   environ 函数   os . environ ， 返回 一个 字典 值 ， 字典 值 存储 shell 变量 值 。 系统 中 \" HOME \" 路径名 ：   import   os   print   (   os   .   environ   [   ' HOME '   ] )   /   home   /   wanze   > > >   getpid 函数   os . getpid 函数 ， 返回 运行 进程 pid 。   stat 函数   返回 文件 信息 。 st _ size 文件 大小 ， 单位 字节 。   st _ size 属性   import   os   import   glob   print   ( [   os   .   path   .   abspath   (   f   )     f     glob   .   glob   (   ' * . py '   ) ] )   print   ( [   f     f     glob   .   glob   (   ' * . py '   )     os   .   stat   (   f   )   .   st _ size   >   400   ] )   [   ' / home / wanze / 桌面 / test . py '   ,   ' / home / wanze / 桌面 / flatten . py '   ]   [   ' flatten . py '   ]   例子 文件大小 输出 单位 优化 :   import   os   import   sys   filename   =   sys   .   argv   [   1   ]   filesize   =   os   .   stat   (   filename   )   .   st _ size     unit     [   ' 字节 '   ,   ' KB '   ,   ' MB '   ,   ' GB '   ,   ' TB '   ] :     filesize   >   1024   :   filesize   =   filesize   /   1024     :   break   print   (   filename   +   ' 大小 '   +   str   (   int   (   filesize   ) )   +   unit   )   python 小 脚本 自动 输出 合适 单位 ， 程序逻辑 很 简单 。   st _ mtime 属性   文件 修改 时间 。   st _ ctime 属性   文件创建 时间 ， windows 下 最初 文件创建 时间 ， unix 下 文件 metadata 改变 时间 。   进程 发送 信号   os 模块 kill 函数 进程 发送 信号 。   os . kill ( pid ,   sig )   函数 第一个 参数 进程 pid ， 第二个 参数 发送 信号 。 :   os . kill ( pid ,   signal . SIGSTOP )   暂停 进程 ，   os . kill ( pid ,   signal . SIGCONT )   进程 。     killpg   函数 进程 包括 其子 进程 发送 信号 ， 参考   网页   。     SIGINT   （ 终止 进程 信号 ）   SIGKILL   （ 强制 终止 进程 信号 ）   ， 更 信号 请 参看 unix 信号 块 ，   wiki 页面   。   更 os 模块 内容 请 参见   官方 文档   。   os . path 模块   提到 sys . argv 只能 返回 python 脚本 文件名 ， python 脚本 系统 中 具体位置 。 os . getcwd python 脚本 所在 目录 ， os . path 模块 一个 优点 跨平台 特性 支持 很 好 ， 方式 path 路径 都 会 模块 函数 辅助 。   来看 例子 ：   import   os   print   (   os   .   path   .   abspath   (   __ file __   ) )   print   (   os   .   path   .   dirname   (   os   .   path   .   abspath   (   __ file __   ) ) )   print   (   os   .   path   .   basename   (   __ file __   ) )   print   (   os   .   path   .   basename   (   os   .   environ   [   ' HOME '   ] ) )   /   home   /   wanze   /   桌面   /   test   .   py   /   home   /   wanze   /   桌面   test   .   py   wanze     __ file __   脚本 文件 所在 路径 。   abspath 函数   abspath 函数 接受 一个 path 路径 值 返回 一个 正规 普适 路径 地址 。 效果 类似 执行 :   normpath ( join ( os . getcwd ( ) ,   path ) )   。   再 看 例子 演示 空 字符串 默认 当前工作 目录 ， 接受 绝对路径 。   > > >   import   os   > > >   os   .   path   .   abspath   (   ' '   )   ' / home / wanze '   > > >   os   .   path   .   abspath   (   ' test '   )   ' / home / wanze / test '   > > >   os   .   path   .   abspath   (   ' / test '   )   ' / test '   > > >   os   .   path   .   abspath   (   ' test / '   )   ' / home / wanze / test '   abspath 接收 空 字符串 ， 定位 脚本 工作 目录 ， 引用 模块   os . path . abspath ( ' ' )   ， 脚本 工作 目录 。 os . path . abspath ( \\ \" . \\ \" ) 返回 脚本 工作 目录 。   dirname 函数   dirname 函数 接受 一个 路径 值 返回 路径 除开 一个 元素 路径 值 。 例子 ， 路径 指向 文件 ， dirname 函数 返回 除开 文件名 路径 ； 接受 路径 指向 目录 ， 返回 除开 一个 文件夹 名 路径 值 。   basename 函数   例子 所示 ， basename 函数 接受 一个 路径 值 返回 路径 一个 元素 ， 路径 指向 文件 ， 返回 文件名 ； 路径 指向 目录 ， 返回 目录 文件夹 名 。 绝对路径 提取 出 文件名 功能 。   > > >   import   os . path   > > >   string   =   ' / home / wanze / test . txt '   > > >   fileName   ,   fileExtension   =   os   .   path   .   splitext   (   os   .   path   .   basename   (   string   ) )   > > >   fileName   ' test '   split 函数   路径 path 字符串 分割 ， 视作 dirname basename 组合 。   > > >   os . path . split ( ' / usr / local / bin / test . txt ' )   ( ' / usr / local / bin ' ,   ' test . txt ' )   > > >   os . path . dirname ( ' / usr / local / bin / test . txt ' )   ' / usr / local / bin '   > > >   os . path . basename ( ' / usr / local / bin / test . txt ' )   ' test . txt '   splitext 函数   路径 path 后缀 分开 ， 针对 文件名 输入 ， 第一个 文件 名字 ， 输出 数组 第二个 值 文件 后缀 。 函数 提取 文件名 后缀 名字 很 有用 ， 组合 出新 文件名 。   > > >   import   os   > > >   fileName   ,   fileExtension   =   os   .   path   .   splitext   (   ' / path / / somefile . ext '   )   > > >   fileName   ' / path / / somefile '   > > >   fileExtension   ' . ext '   join 函数   用于 连接 多个 路径 值 合并 成 一个 新 路径 值 ， 简单 字符串 拼接 ， 函数 路径 组合 操作系统 普适性 灵活性 。   > > >   os . path . join ( os . path . expanduser ( ' ~ ' ) , ' test ' , ' lib ' )   ' / home / wanze / test / lib '   join 函数 多个 参数 生成 新 path windows 下 输出 。   expanduser 函数   > > >   import   os   > > >   os   .   path   .   expanduser   (   ' ~ '   )   ' / home / wanze '   > > >   os   .   path   .   expanduser   (   ' ~ / pymf '   )   ' / home / wanze / pymf '   > > >   os   .   path   .   join   (   os   .   path   .   expanduser   (   ' ~ '   ) ,   ' pymf '   ,   ' mymodule '   )   ' / home / wanze / pymf / mymodule '   ~   符号 ， 展开 / home / wanze 基础 绝对路径 ， 兼容 大部分 系统 （ windows 下 。 ）   join 函数 接受 很多 不定量 参数 ， 组合 一个 新 路径 ， 不用 费心   /     \\   ， 不 写 ， join 函数 自然 料理 好 。   exists 函数   os . path . exists ( path ) ： 测试 路径 文件 。 返回 True ， 返回 False 。   isfile isdir islink   os . path . isfile ( path ) ： 接受 一个 字符串 路径 变量 ， 文件 返回 True ， 返回 False （ 文件 不 文件 文件夹 情况 都 会 返回 False ） 。   类似 isdir islink 函数 。   samefile 函数   os . path . samefile ( path1 , path2 ) ： 两个 文件 路径 返回 True \\   ， 返回 False 。   getmtime 函数   os . path . getmtime ( path )   返回 文件 修改 时间 ， 返回值 秒 ， 可用 time 模块 ctime localtime 函数 转换成 time . struct _ time   对象 ， strftime 更好 格式 输出 。   getctime 函数   类似 getmtime ， 返回 文件 创建 时间 。 unix 系统 中是 指 文件 元 信息 更改 时间 。   更 内容 请 参见   官方 文档   。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"python语言",
            "url":"articles/python-modules.html"
        },
        {
            "title":"faker模块",
            "text":"简介   faker 模块 一个 很 特色 模块 ， github 上 star 。 用来 生成 伪 数据 ， 用来 做 测试 用途 。 github 项目 地址     。   项目 支持 pip 安装 :   sudo   pip   install   fake - factory   很 简单 ， 大概 所示 :     faker   import   Factory   faker   =   Factory   .   create   ( )     i     range   (   50   ) :   print   (   faker   .     ( ) )   中文 名字 例子 ， Factory create 方法 指定 语言 locale （ 默认 \" en _ EN \" ） :     faker   import   Factory   faker   =   Factory   .   create   (   ' zh _ CN '   )     i     range   (   100   ) :   print   (   faker   .     ( ) )   faker 所含 方法 清单   address ( ) :   地址   text ( ) :   显示 一段 随机 文本 ， 中 文化 。   mime _ type ( ) :   model / x3d + xml   chrome ( ) :   随机 user _ agent   ,   很 有用 。   firefox ( ) :   火狐 随机 user _ agent   internet _ explorer ( ) :   随意 user _ agent   opera ( ) :   opera   safari ( ) :   safari   user _ agent ( ) :   浏览器 随意 user _ agent   phone _ number ( ) :   随意 电话号码   boolean ( ) :   随意 bool 值   country _ code ( ) :   城市 代码   language _ code ( ) :   en   locale ( ) :   zh _ CN   md5 ( ) :   随意 md5 值   null _ boolean ( ) :   None     True     False   sha1 ( ) :   sha1 值   sha256 ( ) :   随意 sha256 值   :   fake . linux _ platform _ token ( )   #   X11 ;   Linux   x86 _ 64   fake . linux _ processor ( )   #   x86 _ 64   fake . mac _ platform _ token ( )   #   Macintosh ;   U ;   PPC   Mac   OS   X   10 _ 7 _ 6   fake . mac _ processor ( )   #   U ;   PPC   fake . windows _ platform _ token ( )   #   Windows   98 ;   Win   9x   4.90   fake . company _ email ( )   #   ggreenfelder @ ortizmedhurst .   fake . domain _ ( )   #   mayer .   fake . domain _ word ( )   #   gusikowski   fake . email ( )   #   gbrakus @ johns . net   fake . free _ email ( )   #   abbey60 @ yahoo .   fake . free _ email _ domain ( )   #   hotmail .   fake . ipv4 ( )   #   81.132 . 249.71   fake . ipv6 ( )   #   4c55 : 8c8b : 54b5 : 746d : 44ed : c7ab : 486a : a50e   fake . safe _ email ( )   #   amalia49 @ .   fake . slug ( )   #   TypeError   fake . tld ( )   #   net   fake . uri ( )   #   http : / / www . parker . /   fake . uri _ extension ( )   #   . asp   fake . uri _ page ( )   #   terms   fake . uri _ path ( )   #   explore / list / app   fake . url ( )   #   http : / / dubuque . info /   fake . user _ ( )   #   goodwin . edwin   fake . bs ( )   #   maximize   end - - end   infrastructures   fake . catch _ phrase ( )   #   Multi - tiered   analyzing   instructionset   fake . company ( )   #   Stanton - Luettgen   fake . company _ suffix ( )   #   Group   fake . _ pm ( )   #   AM   fake . century ( )   #   IX   fake . date ( )   #   1985 - 02 - 17   fake . date _ time ( )   #   1995 - 06 - 08   14 : 46 : 50   fake . date _ time _ ad ( )   #   1927 - 12 - 17   23 : 08 : 46   fake . date _ time _ ( )   #   1999 - 08 - 22   22 : 49 : 52   fake . date _ time _ _ century ( )   #   1999 - 07 - 24   23 : 35 : 49   fake . date _ time _ _ decade ( )   #   2008 - 01 - 27   01 : 08 : 37   fake . date _ time _ _ month ( )   #   2012 - 11 - 12   14 : 13 : 04   fake . date _ time _ _ year ( )   #   2012 - 05 - 19   00 : 40 : 00   fake . day _ _ month ( )   #   23   fake . day _ _ week ( )   #   Friday   fake . iso8601 ( )   #   2009 - 04 - 09T21 : 30 : 02   fake . month ( )   #   03   fake . month _ ( )   #   April   fake . time ( )   #   06 : 16 : 50   fake . timezone ( )   #   America / Noronha   fake . unix _ time ( )   #   275630166   fake . year ( )   #   2002   fake . _ ( )   #   Elton   fake . _ ( )   #   Schowalter   fake . ( )   #   Susan   Pagac   III   fake . prefix ( )   #   Ms .   fake . suffix ( )   #   V   fake . address ( )   #   044   Watsica   Brooks   West   Cedrickfort ,   SC   35023 - 5157   fake . building _ number ( )   #   319   fake . city ( )   #   Kovacekfort   fake . city _ prefix ( )   #   New   fake . city _ suffix ( )   #   ville   fake . country ( )   #   Monaco   fake . geo _ coordinate ( )   #   148.031951   fake . latitude ( )   #   154.248666   fake . longitude ( )   #   109.920335   fake . postcode ( )   #   82402 - 3206   fake . secondary _ address ( )   #   Apt .   230   fake . state ( )   #   Nevada   fake . state _ abbr ( )   #   NC   fake . street _ address ( )   #   793   Haskell   Stravenue   fake . street _ ( )   #   Arvilla   Valley   fake . street _ suffix ( )   #   Crescent   fake . paragraph ( )   #   Itaque   quia   harum   est   autem   inventore   quisquam   eaque .   Facere   mollitia   repudiandae   qui     voluptas .   Consequatur   sunt   ullam   blanditiis   aliquam   veniam   illum   voluptatem .   fake . paragraphs ( )   #   [ ' Alias   porro   soluta   eum   voluptate .   Iste   consequatur   qui     nam . ' ,   ' Id   eum   sint   eius   earum   veniam   fugiat   ipsum   .   Et     occaecati     labore   amet   .   Rem   velit   inventore   consequatur   facilis .   Eum   consequatur   consequatur   quis   nobis . ' ,   ' Harum   autem   autem   totam     rerum   adipisci   magnam   adipisci .   Qui   modi   eos   eum   vel   quisquam .   Tempora   quas   eos   dolorum   sint   voluptatem   tenetur   cum .   Recusandae   ducimus   deleniti   magnam   ullam   adipisci   ipsa . ' ]   fake . sentence ( )   #   Eum   magni   soluta   unde   minus   nobis .   fake . sentences ( )   #   [ ' Ipsam   eius   aut   veritatis   iusto . ' ,   ' Occaecati   libero   a   aut   debitis   sunt   quas   deserunt   aut . ' ,   ' Culpa   dolor   voluptatum   laborum       enim . ' ]   fake . text ( )   #   Dicta   quo   eius   possimus   quae   eveniet   cum   nihil .   Saepe   sint     nostrum .   Sequi   est   sit   voluptate     eos   eum   .   Pariatur     sunt   distinctio   magnam .   fake . word ( )   #   voluptas   fake . words ( )   #   [ ' optio ' ,   ' ' ,   ' voluptatem ' ]   设置 随机 种子     faker   import   Faker   fake   =   Faker   ( )   fake   .   seed   (   4321   )   print   fake   .     ( )   #   Margaret   Boehm   语言 locale 代码   bg _ BG   -   Bulgarian   cs _ CZ   -   Czech   de _ DE   -   German   dk _ DK   -   Danish   el _ GR   -   Greek   en _ CA   -   English   ( Canada )   en _ GB   -   English   ( Great   Britain )   en _ US   -   English   ( United   States )   es _ ES   -   Spanish   ( Spain )   es _ MX   -   Spanish   ( Mexico )   fa _ IR   -   Persian   ( Iran )   fi _ FI   -   Finnish   fr _ FR   -   French   _ IN   -   Hindi   _ IT   -   Italian   ja _ JP   -   Japanese   ko _ KR   -   Korean   lt _ LT   -   Lithuanian   lv _ LV   -   Latvian   ne _ NP   -   Nepali   nl _ NL   -   Dutch   ( Netherlands )   _ NO   -   Norwegian   pl _ PL   -   Polish   pt _ BR   -   Portuguese   ( Brazil )   pt _ PT   -   Portuguese   ( Portugal )   ru _ RU   -   Russian   sl _ SI   -   Slovene   sv _ SE   -   Swedish   tr _ TR   -   Turkish   zh _ CN   -   Chinese   ( China )   zh _ TW   -   Chinese   ( Taiwan )",
            "tags":"python好伙伴",
            "url":"articles/faker-module.html"
        },
        {
            "title":"python语言学习之-网络编程",
            "text":"只 讨论 TCP 套 接字 编程 ， UDP 协议 暂 不 讨论 。 TCP 套 接字 编程 过程 所述 :   套 接字 编程   客户机 负责 发起 连接 ， 新建 一个套 接字 对象 （ python 中是   socket   函数 创建 ） ， 好比 一个 封闭 黑箱子 里 开 一个 门 ， 创建 套 接字 对象 过程 中 ， 指定 连接 服务器 IP地址 端口号 （   connect   方法 ） 。   接下来 TCP 三路 握手 过程 ， 传输层 最底层 东西 ， 客户机 应用程序 服务器应用程序 都 不用 操心 ， 操作系统 程序 负责 。 服务器程序 关心 三路 握手 期间 ， 类似 听到 敲门声 ， 开出 一个 门 。 服务器程序 听到 敲门声 ， 处于 监听 端口 状态 。 服务器程序 创建 一个套 接字 对象 ，   bind   端口号 ， 调用   listen   方法 监听 端口 。   服务器 监听 套 接字 调用   accept   方法 ， 阻塞 ， 接下来 听到 敲门声 ， 敲门声 TCP 三路 握手 第一路 信号 发送 ， TCP 三路 握手 两路 ， 暂时 不 太 关心 。 等到 TCP 三路 握手 ， 服务器 accept 方法 创建 一个套 接字 对象 。 套 接字 对象 称之为   连接 套 接字   。 服务器 连接 套 接字 调用 accept 方法 理解 接受 客户机 敲门 ， 一切顺利 ， 客户机 新开 一个套 接字 ， 一个 新门 。   客户机 一个套 接字 ， 情况 稍微 简单 点 ， 其往 套 接字 塞 信息 （   sendall   方法 ） 发送信息 ， 从套 接字 读 （   recv   方法 ） ， 读 信息 。 服务器 ， 实际上 客户机 来看 ， 第二个 新建 连接 套 接字 看作 看作 类似 客户机 第一个 套 接字 ， 往里面 读 读 信息 ， 往里面 写 发送信息 。 服务器 新开 一个套 接字 ， 猜 ， 是因为 服务器 多个 客户机 请求 ， 第一个 监听 套 接字 理解 总 大门 ， 开启 连接 套 接字 理解 小门 ， 其才 客户机 一对一 管道 连接 。   简要 描述 太 过于 抽象 ， 再 来看 一个 最 简单 代码 ， python 官方 文档 socket 模块 第一个 例子 ， 地方 稍作 改动 。   服务器端   server . py   代码 :   import   socket   HOST   =   ' localhost '   PORT   =   50007   s   =   socket   .   socket   (   socket   .   AF _ INET   ,   socket   .   SOCK _ STREAM   )   s   .   bind   ( (   HOST   ,   PORT   ) )   s   .   listen   (   1   )   conn   ,   addr   =   s   .   accept   ( )   print   (   ' Connected   '   ,   addr   )     True   :   data   =   conn   .   recv   (   1024   )       data   :   break   conn   .   sendall   (   data   )   conn   .   close   ( )   运行 server . py ， 如前所述 ， socket 函数 创建 一个 监听 套 接字 ， 套 接字 监听 端口 bind 方法 指定 ， 监听 套 接字 监听 （ 调用 listen 方法 ） 。 调用 监听 套 接字 accept 方法 ， 收到 TCP 连接 请求 ， 返回 一个 连接 套 接字 ， conn 。 程序 主 循环 ， 连接 套 接字 recv 方法 来读 ， sendall 方法 写 。 close 方法 关闭 连接 套 接字 。   客户机 端   client . py   代码 :   import   socket   HOST   =   ' localhost '   PORT   =   50007   s   =   socket   .   socket   (   socket   .   AF _ INET   ,   socket   .   SOCK _ STREAM   )   s   .   connect   ( (   HOST   ,   PORT   ) )   s   .   sendall   (   b   ' Hello ,   world '   )   data   =   s   .   recv   (   1024   )   s   .   close   ( )   print   (   ' Received '   ,   repr   (   data   ) )   客户机 新建 一个套 接字 ， 套 接字 connect 方法 拨号 服务器 ， sendall 方法 写 ， recv 方法 来读 。 过程 大抵 。   一副 图画 加深 对本 小节 印象 。   tao - jie - zi - bian - cheng   更 讨论 套 接字 编程 ， 并用 python socket 模块 介绍 编码 细节 。   socket 模块   host 主机名   host 最 简单 熟知 IP地址 ， 本地 hosts 文件 解析 网络 DNS 系统 解析 名字 。   localhost     python . org   。 socket 模块   gethostbyname   函数 ， 获取 hostname IP地址 。   > > >   socket . gethostbyname ( ' python . org ' )   ' 104.130 . 43.121 '   gethostbyname 函数 只 支持 IPv4 地址 ， 推荐   getaddrinfo   函数 ， 支持 IPv4 IPv6 地址 。 参数设置 :   socket . getaddrinfo ( host ,   port ,   family = 0 ,   type = 0 ,   proto = 0 ,   flags = 0 )   port 填写 80 ' http ' 形式 ， 设置 None 。 family 地址 族 ， type 套 接字 类型 ， 先 暂时 略过 讨论 。   函数 返回值 一个 列表 ， 其内 元素 结构 :   ( family ,   type ,   proto ,   canonname ,   sockaddr )   所示 :   > > >   socket . getaddrinfo ( ' www . github . ' , ' https ' )   [ ( < AddressFamily . AF _ INET :   2 > ,   < SocketType . SOCK _ STREAM :   1 > ,   6 ,   ' ' ,   ( ' 192.30 . 252.131 ' ,   443 ) ) ,   ( < AddressFamily . AF _ INET :   2 > ,   < SocketType . SOCK _ DGRAM :   2 > ,   17 ,   ' ' ,   ( ' 192.30 . 252.131 ' ,   443 ) ) ,   ( < AddressFamily . AF _ INET :   2 > ,   < SocketType . SOCK _ STREAM :   1 > ,   6 ,   ' ' ,   ( ' 192.30 . 252.128 ' ,   443 ) ) ,   ( < AddressFamily . AF _ INET :   2 > ,   < SocketType . SOCK _ DGRAM :   2 > ,   17 ,   ' ' ,   ( ' 192.30 . 252.128 ' ,   443 ) ) ]     AF _ INET   地址 族 创建 socket 套 接字 对象 时 默认 地址 族 ， IPv4 地址 。 套 接字 类型   SOCK _ STREAM   创建 套 接字 对象 默认值 ， 其是 字节 流套 接字 。   getaddrinfo 函数 返回   family , type , proto   三个 参数 传递 socket 函数 用于 创建 一个套 接字 对象 。 canonname 冷门 ，   sockaddr   传递 套 接字 对象   connect   方法 套 接字 连接 操作 。   脚本 试一下 :   import   socket   socket   .   setdefaulttimeout   (   10   )   addrinfos   =   socket   .   getaddrinfo   (   ' www . baidu . '   ,   ' http '   )     addrinfo     addrinfos   :   socket _ parameter   =   addrinfo   [ :   3   ]   print   (   socket _ parameter   )   addr   =   addrinfo   [   -   1   ]   print   (   addr   )   s   =   socket   .   socket   (   *   socket _ parameter   )     :   s   .   connect   (   addr   )   print   (   ' connected '   )   print   (   ' peername '   ,   s   .   getpeername   ( ) )   print   (   ' hostname '   ,   s   .   getsockname   ( ) )   #   socket . timeout :   # print ( ' socket   timeout ' )     Exception     e   :   print   (   e   )   读者 还 域名 试一下 。   地址 族   AF _ INET   IPv4 地址   AF _ INET6   IPv6 地址   冷门 地址 族 :   AF _ UNIX   ，   AF _ NETLINK   ，   AF _ TIPC   套 接字 类型   SOCK _ STREAM   字节 流套 接字   SOCK _ DGRAM   数据 报套 接字   两个 套 接字 类型 全 平台 。 冷门 套 接字 类型 :   SOCK _ RAW   ，   SOCK _ RDM   ，   SOCK _ SEQPACKET   传输 协议   传输 协议   proto   设置 0 。 指定 传输 协议 :   IPPROTO _ CP   TCP 传输 协议   IPPROTO _ UDP   UDP 传输 协议   IPPROTO _ SCTP   SCTP 传输 协议   timeout   socket . settimeout ( None )   socket . settimeout ( 0 )   socket . settimeout ( sec )   设置 None ， 套 接字 阻塞 模式   设置 0 ， 套 接字 非 阻塞 模式   设置 sec 秒 ， 套 接字 会 等待 sec 秒 ， 抛出   socket . timeout   异常 。     setdefaulttimeout   函数 全局 设置 创建 socket 对象 timeout 。   socket . setdefaulttimeout ( 10 )   阻塞 模式 还 设置 ：   socket . setblocking ( True )   socket . setblocking ( False )   listen 方法   服务器端 套 接字 监听 。   socket . listen ( [ backlog ] )   python3.5 ， backlog 参数 可选 参数 。 backlog 等待 连接数 （ 超过 数 ， 新 连接 拒绝 ） 。 数 设置 5 ， 系统 才 5 ， 再 提高 一点 ， python3.5 ， 数 选 参数 ， 文档 上 说 会 自动 设置 一个 合适 数 ， 不 操心 。   更 细节 请 参看 官方 文档 。   异步 编程   常规 同步 ( synchronous ) 编程 平时 编程 模型 ， 顺序 结构 ， 阻塞 式 ， 多个 函数 逐个 执行 ， 一个 执行 完 才能 执行 下 一个 ， 图 所示 :   tong - bu - bian - cheng - mo - xing   一种 线程 并发 模型 :   xian - cheng - bing - fa - mo - xing   python GIL 概念 ， 很多 人 指责 ， 实际上 支持 多线程 并发 语言 ， 怕 便利 带来 更 困扰 。 想一想 人脑 思考问题 同一时间 只能 做 一件 事 ， 也许 python GIL 一种 。 实际上 多线程 并发 ， 建立 好 模型 ， 最终 多个 分支 线路 互不 干扰 ， 平行 放入 一个 列表 中 约束 ， 才能 放心 多线程 并发 。 约束 模型 下 ， python   multiprocess   模块 很 好 胜任 类型 工作 。   讨论 异步 编程 模型 :   yi - bu - bian - cheng - mo - xing   异步 编程   一个 名字   非 阻塞 编程   ， 主程序 建立 事件 循环 ， 主 事件 循环 过程 阻塞 程序 过程 ， 插入 执行 。 实际上 类似 GUI 程序 主 设计 理念 - - - - - - 事件驱动 循环 机制 ， 异步 编程 一个 名字   事件驱动 编程   。   例子 学习 。   低效 诗歌 服务器   例子 来自 参考资料   [ @ twisted 异步 编程 入门 ]   ， 改成 python3 版本   slowpoetry . py   。   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81   82   83   84   85   86   87   88   89   90   91   92   93   94   95   96   97   98   99   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   argparse   ,   os   ,   socket   ,   time   def   parse _ args   ( ) :   usage   =   \" \" \" usage :   % prog   [ options ]   poetry - file   This       Slow   Poetry   Server ,   blocking   edition .   Run       :   python3   slowpoetry . py   ecstasy . txt   \" \" \"   parser   =   argparse   .   ArgumentParser   (   usage   )     =   \" The   port     listen   .   Default     a   random     port . \"   parser   .   add _ argument   (   ' - p '   ,   ' - - port '   ,   type   =   int   ,     =     )     =   \" The   interface     listen   .   Default     localhost . \"   parser   .   add _ argument   (   ' - - iface '   ,     =     ,   default   =   ' localhost '   )     =   \" The   number     seconds     sending   bytes . \"   parser   .   add _ argument   (   ' - - delay '   ,   type   =   float   ,     =     ,   default   = .   1   )     =   \" The   number     bytes     send     a   time . \"   parser   .   add _ argument   (   ' - - num - bytes '   ,   type   =   int   ,     =     ,   default   =   20   )   parser   .   add _ argument   (   ' poetry _ file '   )   args   =   vars   (   parser   .   parse _ args   ( ) )   poetry _ file   =   args   [   ' poetry _ file '   ]       poetry _ file   :   parser   .   error   (   ' No     file :   % s   '   %   poetry _ file   )   return   args   def   send _ poetry   (   sock   ,   poetry _ file   ,   num _ bytes   ,   delay   ) :   \" \" \" Send     poetry   slowly       socket . \" \" \"   inputf   =   open   (   poetry _ file   )     True   :   bytes   =   inputf   .   read   (   num _ bytes   )   .   encode   ( )       bytes   :   sock   .   close   ( )   inputf   .   close   ( )   return   ' end '   print   (   ' Sending   % d   bytes '   %   len   (   bytes   ) )     :   sock   .   sendall   (   bytes   )     socket   .   error   :   sock   .   close   ( )   inputf   .   close   ( )   return   ' error '   time   .   sleep   (   delay   )   def   serve   (   listen _ socket   ,   poetry _ file   ,   num _ bytes   ,   delay   ) :     True   :   sock   ,   addr   =   listen _ socket   .   accept   ( )   print   (   ' Somebody     % s     poetry ! '   %   (   addr   , ) )   result   =   send _ poetry   (   sock   ,   poetry _ file   ,   num _ bytes   ,   delay   )     result   = =   ' end '   :   print   (   ' sending   complete '   )   elif   result   = =   ' error '   :   print   (   ' error ,   sending   stopped '   )   def   main   ( ) :   args   =   parse _ args   ( )   poetry _ file   =   args   [   ' poetry _ file '   ]   port   =   args   [   ' port '   ]   iface   =   args   [   ' iface '   ]   num _ bytes   =   args   [   ' num _ bytes '   ]   delay   =   args   [   ' delay '   ]   sock   =   socket   .   socket   ( )   sock   .   bind   ( (   iface   ,   port     0   ) )   sock   .   listen   (   5   )   print   (   ' Serving   % s     port   % s   . '   %   (   poetry _ file   ,   sock   .   getsockname   ( ) [   1   ] ) )   serve   (   sock   ,   poetry _ file   ,   num _ bytes   ,   delay   )   sock   .   close   ( )     __ __   = =   ' __ main __ '   :   main   ( )   获取 诗歌 client 端 程序   _ poetry . py   。   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81   82   83   84   85   86   87   88   89   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   datetime   ,   argparse   ,   socket   def   parse _ args   ( ) :   usage   =   \" \" \" usage :   % prog   [ options ]   [ hostname ] : port   ...   This       Get   Poetry   Now !   client ,   blocking   edition .   Run       :   python3   _ poetry . py   port1   port2   port3   ...   \" \" \"   parser   =   argparse   .   ArgumentParser   (   usage   )   parser   .   add _ argument   (   ' port '   ,   nargs   =   ' + '   )   args   =   vars   (   parser   .   parse _ args   ( ) )   addresses   =   args   [   ' port '   ]       addresses   :   print   (   parser   .   format _   ( ) )   parser   .   exit   ( )   def   parse _ address   (   addr   ) :     ' : '       addr   :   host   =   ' 127.0 . 0.1 '   port   =   addr     :   host   ,   port   =   addr   .   split   (   ' : '   ,   1   )       port   .   isdigit   ( ) :   parser   .   error   (   ' Ports       integers . '   )   return   host   ,   int   (   port   )   return   map   (   parse _ address   ,   addresses   )   def   _ poetry   (   address   ) :   \" \" \" Download   a   piece     poetry         address . \" \" \"   sock   =   socket   .   socket   (   socket   .   AF _ INET   ,   socket   .   SOCK _ STREAM   )   sock   .   connect   (   address   )   poem   =   b   ' '     True   :   data   =   sock   .   recv   (   1024   )       data   :   sock   .   close   ( )   break     :   print   (   data   .   decode   (   ' utf - 8 '   ) ,   end   =   ' '   )   poem   + =   data   return   poem   def   format _ address   (   address   ) :   host   ,   port   =   address   return   '   % s   :   % s   '   %   (   host     ' 127.0 . 0.1 '   ,   port   )   def   main   ( ) :   addresses   =   parse _ args   ( )   elapsed   =   datetime   .   timedelta   ( )     i   ,   address     enumerate   (   addresses   ) :   addr _ fmt   =   format _ address   (   address   )   print   (   ' Task   % d   :     poetry   :   % s   '   %   (   i   +   1   ,   addr _ fmt   ) )   start   =   datetime   .   datetime   .     ( )   poem   =   _ poetry   (   address   )   time   =   datetime   .   datetime   .     ( )   -   start   msg   =   ' Task   % d   :     % d   bytes     poetry     % s     % s   '   print   (   msg   %   (   i   +   1   ,   len   (   poem   ) ,   addr _ fmt   ,   time   ) )   elapsed   + =   time   print   (   ' Got   % d   poems     % s   '   %   (   len   (   list   (   addresses   ) ) ,   elapsed   ) )     __ __   = =   ' __ main __ '   :   main   ( )   读者 利用 两个 脚本 测试 效果 。 两个 脚本 ， 客户端 服务器端 都 阻塞 式 。 先开 一个 服务器端 :   python3   slowpoetry . py   - p   10000   ecstasy . txt   开 两个 终端 ， 刷 命令 ， 后 执行 终端 获取 文本 阻塞 - - - - - - 这是 服务器 阻塞 。   python3   slowpoetry . py   - p   10000   ecstasy . txt   开 一个 服务器端 :   python3   slowpoetry . py   - p   10001   fascination . txt   一个 客户端 运行 :   python3   _ poetry . py   10000   10001   客户端 获取 文本 一个个 ， 这是 客户端 阻塞 。   一个个 ， 一个 做 完 才能 下 一个 模式 很 好 理解 ， 进程 间 通信 ， 请 看 select 风格 I / O 复用 讨论 。   Select 风格 诗歌 服务器   Unix 五种 I / O 模型   讨论一下 Unix 五种 I / O 模型 ：   阻塞 式 I / O   ， 默认 阻塞 式 I / O 。   非 阻塞 式 I / O ， 应用程序 持续 轮询 内核 操作 准备就绪 。   I / O 复用 ， select poll 文件 描述符 管理 I / O 。   信号 驱动 式 I / O   异步 I / O   这五种 I / O 模型 中 ， 最 阻塞 式 I / O 模型 ， 非 阻塞 I / O 轮询 机制 太 过于 浪费资源 ， 信号 驱动 I / O 异步 I / O 很少 ， 最   I / O 复用 模型   。 python 中 twisted 模块 python3.4 新   asyncio   模块 事件 循环 都 基于   再 建立 类 异步 I / O 概念 。   重点 python selectors 模块 分析 I / O 复用 模型 。 selectors 模块 python3.4 才 ， 建构 select 模块 之上 。 其有 五种 内置 Selector :   -   SelectSelector   -   PollSelector   -   EpollSelector   -   DevpollSelector   -   KqueueSelector     DefaultSelector   即可 ， python 会 自动 选择 平台 Selector 。   创建 一个 Selector 对象 所示 :   sel   =   selectors . DefaultSelector ( )   监控 文件 读写 事件   Selector 对象 有个 register 方法 ， 所示 ：   register ( fileobj ,   events ,   data = None )   fileobj 文件 对象 （ Linux 中 皆 文件 ， 套 接字 视为 一个 文件 。 ） 。   监控 事件 :   EVENT _ READ   读 事件 ， 可读 定义 参考资料   [ @ Unix 网络 编程 卷 1 ]   描述 :   该套 接字 接受 缓冲区 中 数据 字节数 大于 等于 套 接字 接受 缓冲区 低水平 标记 大小 。 套 接字 读 阻塞 ， 返回 一个 大于 0 值 （ 读入 字节数 ） 。   SO _ RCVLOWAT   套 接字 选项 设置 该套 接字 低水平 标记 ， TCP UDP 套 接字 默认值 1 。 【 很 好 理解 ， 1 字节 ， 接受 1 字节 更 字节 可读 事件 。 】   连接 读 半部 关闭 ， 套 接字 读 操作 不 阻塞 返回 0 （ 返回 EOF ） 。 【 套 接字 对面 关闭 ， 可读 ，   '   read '   判断 读 结束 后续 。 】   该套 接字 一个 监听 套 接字 已 连接数 不为 0 。 【 指 服务器端 创建 监听 套 接字 ， accept 阻塞 ，   conn ,   addr   =   s . accept ( )   ， 客户端 敲门 ， 会 一个 读 事件 ， 会 批准 自动 创建 一个 监听 套 接字 ， 已 连接数 0 - - - - - - 已 连接数 含义 还 不 。 】   情况 中 ， 一个套 接字 错误 待处理 ， 套 接字 读 操作 不 阻塞 返回 - 1 。 【 细节 暂时 还 不 。 】   EVENT _ WRITE   写 事件 ， 可写 定义 参考资料   [ @ Unix 网络 编程 卷 1 ]   描述 :   该套 接字 发送缓冲区 中 可用 空间 字节数 大于 等于 套 接字 发送缓冲区 低水平 标记 大小 ， 该套 接字 已 连接 （ 该套 接字 不 连接 ， UDP 套 接字 ） 。 套 接字 设置 非 阻塞 ， 写 操作 返回 一个 正值 （ 传输层 接受 字节数 ） 。   SO _ SNDLOWAT   套 接字 选项 设置 该套 接字 写 低水平 标记 ， TCP UDP 套 接字 默认值 2048 。 【 套 接字 阻塞 ， 写 操作 会 套 接字 另一端 recv 阻塞 阻塞 ， 一个 猜测 。 读 实际上 反 ， 可读 相当于 数据量 超过 标记 ， 往里面 送 一点点 数据 不行 ， 还 送到 量 ， 才 可读 ； 写 送 一点点 数据 都 写 ， 送 数据量 很大 ，   可用   缓冲区 空间   小于   标记 ， 写 。 】   连接 写 半部 关闭 。 套 接字 写 操作 SIGPIPE 信息 。 【 我试 ， 后续 程序 会 出错 。 服务器 主动 发动 数据 模式 ， 都 情况 捕捉 好 异常 。 】   非 阻塞 连接 套 接字 已 连接 连接 已 失败 。 【 非 阻塞 连接 初次 连接 成功 可写 很 好 理解 ， 连接 失败 写 ？ 非 阻塞 初次 连接 失败 连接 半部 关闭 情况 ， 哪一条 。 】   情况 中 ， 一个套 接字 错误 待处理 ， 套 接字 写 操作 不 阻塞 返回 - 1 。   更 内容 请 参看   selectors   模块 官方 文档 。   例子 诗歌 服务器 写成 Select 风格 异步 版本   select _ slowpoetry . py   :   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81   82   83   84   85   86   87   88   89   90   91   92   93   94   95   96   97   98   99   100   101   102   103   104   105   106   107   108   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   argparse   import   os   import   socket   import   time   import   selectors   sel   =   selectors   .   DefaultSelector   ( )   def   parse _ args   ( ) :   usage   =   \" \" \" usage :   % prog   [ options ]   poetry - file   python3   select _ slowpoetry . py   ecstasy . txt   \" \" \"   parser   =   argparse   .   ArgumentParser   (   usage   )     =   \" The   port     listen   .   Default     a   random     port . \"   parser   .   add _ argument   (   ' - p '   ,   ' - - port '   ,   type   =   int   ,     =     )     =   \" The   interface     listen   .   Default     localhost . \"   parser   .   add _ argument   (   ' - - iface '   ,     =     ,   default   =   ' localhost '   )     =   \" The   number     seconds     sending   bytes . \"   parser   .   add _ argument   (   ' - - delay '   ,   type   =   float   ,     =     ,   default   = .   1   )     =   \" The   number     bytes     send     a   time . \"   parser   .   add _ argument   (   ' - - num - bytes '   ,   type   =   int   ,     =     ,   default   =   20   )   parser   .   add _ argument   (   ' poetry _ file '   )   args   =   vars   (   parser   .   parse _ args   ( ) )   poetry _ file   =   args   [   ' poetry _ file '   ]       poetry _ file   :   parser   .   error   (   ' No     file :   % s   '   %   poetry _ file   )   return   args   def   send _ poetry   (   sock   ,   poetry _ file   ,   num _ bytes   ,   delay   ,   inputf   ) :   \" \" \" Send     poetry   slowly       socket . \" \" \"   bytes   =   inputf   .   read   (   num _ bytes   )       bytes   :   sel   .   unregister   (   sock   )   sock   .   close   ( )   inputf   .   close   ( )   print   (   ' sending   complete '   )   return   True     :   sock   .   sendall   (   bytes   )     socket   .   error   :   sel   .   unregister   (   sock   )   sock   .   close   ( )   inputf   .   close   ( )   print   (   '   error ,   sending   stoped '   )   return   False   time   .   sleep   (   delay   )   def   serve   (   listen _ socket   ,   poetry _ file   ,   num _ bytes   ,   delay   ) :   sock   ,   addr   =   listen _ socket   .   accept   ( )   print   (   ' Somebody     % s     poetry ! '   %   (   addr   , ) )   sock   .   setblocking   (   False   )   inputf   =   open   (   poetry _ file   ,   ' rb '   )   sel   .   register   (   sock   ,   selectors   .   EVENT _ WRITE   ,   data   =   {   ' callback '   :   send _ poetry   ,   ' args '   :   [   poetry _ file   ,   num _ bytes   ,   delay   ,   inputf   ] } )   def   main   ( ) :   args   =   parse _ args   ( )   poetry _ file   =   args   [   ' poetry _ file '   ]   port   =   args   [   ' port '   ]   iface   =   args   [   ' iface '   ]   num _ bytes   =   args   [   ' num _ bytes '   ]   delay   =   args   [   ' delay '   ]   sock   =   socket   .   socket   ( )   sock   .   bind   ( (   iface   ,   port     0   ) )   sock   .   listen   (   100   )   sock   .   setblocking   (   False   )   print   (   ' Serving   % s     port   % s   . '   %   (   poetry _ file   ,   sock   .   getsockname   ( ) [   1   ] ) )   sel   .   register   (   sock   ,   selectors   .   EVENT _ READ   ,   data   =   {   ' callback '   :   serve   ,   ' args '   :   [   poetry _ file   ,   num _ bytes   ,   delay   ] } )     True   :   events   =   sel   .   select   ( )     key   ,   mask     events   :   callback   =   key   .   data   [   ' callback '   ]   callback   (   key   .   fileobj   ,   *   key   .   data   [   ' args '   ] )   sock   .   close   ( )     __ __   = =   ' __ main __ '   :   main   ( )   客户端 编写 简单 一点 ， 代码 所示   select _ _ poetry . py   :   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81   82   83   84   85   86   87   88   89   90   91   92   93   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   datetime   import   argparse   import   socket   import   selectors   sel   =   selectors   .   DefaultSelector   ( )   def   parse _ args   ( ) :   usage   =   \" \" \" usage :   % prog   [ options ]   [ hostname ] : port   ...   python3   select _ _ poetry . py   port1   port2   port3   ...   select   I / O 复 用来 建立 一个 异步 诗歌 下载 客户端 ， 面向 多个 诗歌 服务器 下载 。   \" \" \"   parser   =   argparse   .   ArgumentParser   (   usage   )   parser   .   add _ argument   (   ' port '   ,   nargs   =   ' + '   )   args   =   vars   (   parser   .   parse _ args   ( ) )   addresses   =   args   [   ' port '   ]       addresses   :   print   (   parser   .   format _   ( ) )   parser   .   exit   ( )   def   parse _ address   (   addr   ) :     ' : '       addr   :   host   =   ' 127.0 . 0.1 '   port   =   addr     :   host   ,   port   =   addr   .   split   (   ' : '   ,   1   )       port   .   isdigit   ( ) :   parser   .   error   (   ' Ports       integers . '   )   return   host   ,   int   (   port   )   return   map   (   parse _ address   ,   addresses   )   def   download _ poetry   (   sock   ,   infile   ) :   \" \" \" Download   a   piece     poetry         address . \" \" \"   bstring   =   sock   .   recv   (   1024   )       bstring   :   #   end   fo   reading   sel   .   unregister   (   sock   )   infile   .   close   ( )   print   (   ' end     reading '   )   return   True     :   print   (   ' writing     { }   '   .   format   (   infile   .     ) )   infile   .   write   (   bstring   )   def   connect   (   address   ) :   \" \" \" Connect         server     return   a   - blocking   socket . \" \" \"   sock   =   socket   .   socket   ( )   sock   .   connect   (   address   )   sock   .   setblocking   (   False   )   return   sock   def   format _ address   (   address   ) :   host   ,   port   =   address   return   '   % s   :   % s   '   %   (   host     ' 127.0 . 0.1 '   ,   port   )   def   main   ( ) :   addresses   =   parse _ args   ( )   elapsed   =   datetime   .   timedelta   ( )   sockets   =   map   (   connect   ,   addresses   )     sock     sockets   :   filename   =   str   (   sock   .   getpeername   ( ) [   1   ] )   +   ' . txt '   infile   =   open   (   filename   ,   ' wb '   )   sel   .   register   (   sock   ,   selectors   .   EVENT _ READ   ,   data   =   {   ' callback '   :   download _ poetry   ,   ' args '   :   [   infile   ] } )     True   :   events   =   sel   .   select   ( )     key   ,   mask     events   :   callback   =   key   .   data   [   ' callback '   ]   callback   (   key   .   fileobj   ,   *   key   .   data   [   ' args '   ] )     __ __   = =   ' __ main __ '   :   main   ( )   改动 两点 :   1 .   客户端 开启 几个 sock ， sock 可读 时间 绑定 download _ poetry 方法 ， 数据 可读 ， 会 执行 操作 。   2 .   下载 目标 fileobj write ， 接受 字节 流给 写进去 即可 。   Asyncio 风格 诗歌 服务器   Selectors 模块 ， 程序 高效 异步 模式 ， 代码 中 几个 丑陋     True   压缩 一个 ， 追求 代码 美观 程序员 来说 会 会 感到 很 满意 。 程序 刚     True   看 不 习惯 。 慢慢 构建 出 \\ \"   reactor   \\ \" 术语 取代 主 循环 ， 图 所示 :   reactor   twisted 模块 中 实际上 一个 reactor 变量 ， 主 Selector 事件驱动 。 asyncio 模块 类似 eventloop 概念 :   import   asyncio   eventloop   =   asyncio   .   _ event _ loop   ( )   事件驱动 编程 还 一点 ， 上 图   事件 循环   概念 事件驱动 编程 核心 概念 ， 实际上 select 风格 异步 编程 中 ， 影子 ， 开启 事件 循环 ， 剩下 工作 挂载 函数 ， 函数 会 涉及 函数 挂载 取消 挂载 操作 ， 脑海中 想象 一个 事件 循环 大 圈 ， 四周 八围 挂载 函数 操作 ， 事件驱动 编程 风格 。 实际上 事件驱动 编程 会 很多 工作 变得 简单 ， 事情 变得复杂 ， 关键 头脑 习惯 编程 风格 ， 脑海 里 还 熟悉 事件驱动 模型 。   常规 eventloop 版   Asyncio 风格 诗歌 服务器 第一版 ， asyncio 模块 不 懂 读者 请 参看 模块 官方 文档 。   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81   82   83   84   85   86   87   88   89   90   91   92   93   94   95   96   97   98   99   100   101   102   103   104   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   argparse   import   os   import   socket   import   time   import   asyncio   def   parse _ args   ( ) :   usage   =   \" \" \" usage :   % prog   [ options ]   poetry - file   python3   asyncio _ slowpoetry . py   ecstasy . txt   \" \" \"   parser   =   argparse   .   ArgumentParser   (   usage   )     =   \" The   port     listen   .   Default     a   random     port . \"   parser   .   add _ argument   (   ' - p '   ,   ' - - port '   ,   type   =   int   ,     =     )     =   \" The   interface     listen   .   Default     localhost . \"   parser   .   add _ argument   (   ' - - iface '   ,     =     ,   default   =   ' localhost '   )     =   \" The   number     seconds     sending   bytes . \"   parser   .   add _ argument   (   ' - - delay '   ,   type   =   float   ,     =     ,   default   = .   1   )     =   \" The   number     bytes     send     a   time . \"   parser   .   add _ argument   (   ' - - num - bytes '   ,   type   =   int   ,     =     ,   default   =   20   )   parser   .   add _ argument   (   ' poetry _ file '   )   args   =   vars   (   parser   .   parse _ args   ( ) )   poetry _ file   =   args   [   ' poetry _ file '   ]       poetry _ file   :   parser   .   error   (   ' No     file :   % s   '   %   poetry _ file   )   return   args   def   send _ poetry   (   eventloop   ,   sock   ,   poetry _ file   ,   num _ bytes   ,   delay   ,   inputf   ) :   \" \" \" Send     poetry   slowly       socket . \" \" \"   bytes   =   inputf   .   read   (   num _ bytes   )       bytes   :   eventloop   .   remove _ writer   (   sock   )   sock   .   close   ( )   inputf   .   close   ( )   print   (   ' sending   complete '   )   return   True     :   sock   .   sendall   (   bytes   )     socket   .   error   :   eventloop   .   remove _ writer   (   sock   )   sock   .   close   ( )   inputf   .   close   ( )   print   (   '   error ,   sending   stoped '   )   return   False   time   .   sleep   (   delay   )   def   serve   (   eventloop   ,   listen _ socket   ,   poetry _ file   ,   num _ bytes   ,   delay   ) :   sock   ,   addr   =   listen _ socket   .   accept   ( )   print   (   ' Somebody     % s     poetry ! '   %   (   addr   , ) )   sock   .   setblocking   (   False   )   inputf   =   open   (   poetry _ file   ,   ' rb '   )   eventloop   .   add _ writer   (   sock   ,   send _ poetry   ,   eventloop   ,   sock   ,   poetry _ file   ,   num _ bytes   ,   delay   ,   inputf   )   def   main   ( ) :   args   =   parse _ args   ( )   poetry _ file   =   args   [   ' poetry _ file '   ]   port   =   args   [   ' port '   ]   iface   =   args   [   ' iface '   ]   num _ bytes   =   args   [   ' num _ bytes '   ]   delay   =   args   [   ' delay '   ]   sock   =   socket   .   socket   ( )   sock   .   bind   ( (   iface   ,   port     0   ) )   sock   .   listen   (   100   )   sock   .   setblocking   (   False   )   print   (   ' Serving   % s     port   % s   . '   %   (   poetry _ file   ,   sock   .   getsockname   ( ) [   1   ] ) )   eventloop   =   asyncio   .   _ event _ loop   ( )   eventloop   .   add _ reader   (   sock   ,   serve   ,   eventloop   ,   sock   ,   poetry _ file   ,   num _ bytes   ,   delay   )     :   eventloop   .   run _ forever   ( )   finally   :   eventloop   .   close   ( )   sock   .   close   ( )     __ __   = =   ' __ main __ '   :   main   ( )   诗歌 获取 客户端 写成 asyncio 版本 。 代码 所示 ， 改动 很大 。   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81   82   83   84   85   86   87   88   89   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   datetime   import   argparse   import   socket   import   asyncio   def   parse _ args   ( ) :   usage   =   \" \" \" usage :   % prog   [ options ]   [ hostname ] : port   ...   python3   select _ _ poetry3 . py   port1   port2   port3   ...   \" \" \"   parser   =   argparse   .   ArgumentParser   (   usage   )   parser   .   add _ argument   (   ' port '   ,   nargs   =   ' + '   )   args   =   vars   (   parser   .   parse _ args   ( ) )   addresses   =   args   [   ' port '   ]       addresses   :   print   (   parser   .   format _   ( ) )   parser   .   exit   ( )   def   parse _ address   (   addr   ) :     ' : '       addr   :   host   =   ' 127.0 . 0.1 '   port   =   addr     :   host   ,   port   =   addr   .   split   (   ' : '   ,   1   )       port   .   isdigit   ( ) :   parser   .   error   (   ' Ports       integers . '   )   return   host   ,   int   (   port   )   return   map   (   parse _ address   ,   addresses   )   def   download _ poetry   (   eventloop   ,   sock   ,   infile   ) :   \" \" \" Download   a   piece     poetry         address . \" \" \"   bstring   =   sock   .   recv   (   1024   )       bstring   :   #   end   fo   reading   eventloop   .   remove _ reader   (   sock   )   sock   .   close   ( )   infile   .   close   ( )   print   (   ' end     reading '   )   return   True     :   print   (   ' writing     { }   '   .   format   (   infile   .     ) )   infile   .   write   (   bstring   )   def   connect   (   address   ) :   \" \" \" Connect         server     return   a   - blocking   socket . \" \" \"   sock   =   socket   .   socket   ( )   sock   .   connect   (   address   )   sock   .   setblocking   (   False   )   return   sock   def   format _ address   (   address   ) :   host   ,   port   =   address   return   '   % s   :   % s   '   %   (   host     ' 127.0 . 0.1 '   ,   port   )   def   main   ( ) :   addresses   =   parse _ args   ( )   sockets   =   map   (   connect   ,   addresses   )   eventloop   =   asyncio   .   _ event _ loop   ( )     sock     sockets   :   filename   =   str   (   sock   .   getpeername   ( ) [   1   ] )   +   ' . txt '   infile   =   open   (   filename   ,   ' wb '   )   eventloop   .   add _ reader   (   sock   ,   download _ poetry   ,   eventloop   ,   sock   ,   infile   )     :   eventloop   .   run _ forever   ( )   finally   :   eventloop   .   close   ( )     __ __   = =   ' __ main __ '   :   main   ( )   值得一提的是 读 完毕 判断 逻辑 :       bstring : ## end   fo   reading   eventloop . remove _ reader ( sock )   sock . close ( )   infile . close ( )   print ( ' end     reading ' )   return   True   读 半部 关闭 ， 返回 0 ， 判断 读 操作 完毕 。   自定义 协议 版   asyncio 模块 还 提供 很多 功能 读者 不用 socket 模块 ， 更 高层 基于 协议 编写 网络 程序 。   诗歌 服务器 第二 版 ， 例子 参考   网页   修改 而成 。   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81   82   83   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   argparse   import   os   import   time   import   asyncio   def   parse _ args   ( ) :   usage   =   \" \" \" usage :   % prog   [ options ]   poetry - file   python3   asyncio _ slowpoetry3 . py   ecstasy . txt   \" \" \"   parser   =   argparse   .   ArgumentParser   (   usage   )     =   \" The   port     listen   .   Default     a   random     port . \"   parser   .   add _ argument   (   ' - p '   ,   ' - - port '   ,   type   =   int   ,     =     )     =   \" The   interface     listen   .   Default     localhost . \"   parser   .   add _ argument   (   ' - - iface '   ,     =     ,   default   =   ' 127.0 . 0.1 '   )     =   \" The   number     bytes     send     a   time . \"   parser   .   add _ argument   (   ' - - num - bytes '   ,   type   =   int   ,     =     ,   default   =   20   )   parser   .   add _ argument   (   ' poetry _ file '   )   args   =   vars   (   parser   .   parse _ args   ( ) )   poetry _ file   =   args   [   ' poetry _ file '   ]       poetry _ file   :   parser   .   error   (   ' No     file :   % s   '   %   poetry _ file   )   return   args   class   PoetryServeProtocol   (   asyncio   .   Protocol   ) :   def   __ init __   (     ,   inputf   ,   num _ bytes   ) :     .   inputf   =   inputf     .   num _ bytes   =   num _ bytes   def   connection _ made   (     ,   transport   ) :     .   transport   =   transport   print   (     .   transport   )   def   data _ received   (     ,   data   ) :     data   = =   b   ' poems '   :   poem   =     .   inputf   .   read   (     .   num _ bytes   )     poem   :     .   transport   .   write   (   poem   )     :     .   transport   .   write _ eof   ( )   def   main   ( ) :   args   =   parse _ args   ( )   poetry _ file   =   args   [   ' poetry _ file '   ]   num _ bytes   =   args   [   ' num _ bytes '   ]   port   =   args   [   ' port '   ]   iface   =   args   [   ' iface '   ]   inputf   =   open   (   poetry _ file   ,   ' rb '   )   eventloop   =   asyncio   .   _ event _ loop   ( )   print   (   iface   ,   port   )   coro   =   eventloop   .   create _ server   (   lambda   :   PoetryServeProtocol   (   inputf   ,   num _ bytes   ) ,   iface   ,   port   )   server   =   eventloop   .   run _ _ complete   (   coro   )   print   (   server   )     :   eventloop   .   run _ forever   ( )   finally   :   eventloop   .   close   ( )     __ __   = =   ' __ main __ '   :   main   ( )   代码 变得 简单 可怕 。   create _ server   方法 。 方法 ， 基于 定义 协议 创建 一个 TCP   server （ 返回 协程 对象 ） 。 创建 协议 对象 。   自定义 协议 继承 Protocol 类 ， 定义 方法 :   connection _ made   callback 继承 Protocol 类 ， 逻辑 一个 连接 建好 ， 执行 函数 。 接受 一个 参数 transport 。 协议 传输层 。   data _ received   callback 继承 Protocol 类 ， 数据 传 进来 ， 函数 执行 。 接受 一个 参数 传 进来 data 。   eof _ received   数据 结束 完毕 调用 。 一端 transport 发送 写入 结束 信号   write _ eof ( )   。   配套 获取 诗歌 客户端 所示 :   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81   82   83   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   datetime   import   argparse   import   asyncio   def   parse _ args   ( ) :   usage   =   \" \" \" usage :   % prog   [ options ]   [ hostname ] : port   ...   python3   select _ _ poetry3 . py   port1   port2   port3   ...   \" \" \"   parser   =   argparse   .   ArgumentParser   (   usage   )   parser   .   add _ argument   (   ' port '   ,   nargs   =   ' + '   )   args   =   vars   (   parser   .   parse _ args   ( ) )   addresses   =   args   [   ' port '   ]       addresses   :   print   (   parser   .   format _   ( ) )   parser   .   exit   ( )   def   parse _ address   (   addr   ) :     ' : '       addr   :   host   =   ' 127.0 . 0.1 '   port   =   addr     :   host   ,   port   =   addr   .   split   (   ' : '   ,   1   )       port   .   isdigit   ( ) :   parser   .   error   (   ' Ports       integers . '   )   return   host   ,   int   (   port   )   return   map   (   parse _ address   ,   addresses   )   class   PoetryClientProtocol   (   asyncio   .   Protocol   ) :   def   __ init __   (     ,   infile   ) :     .   infile   =   infile   def   connection _ made   (     ,   transport   ) :   print   (   transport   .   _ extra _ info   (   ' peername '   ) )     .   transport   =   transport     .   transport   .   write   (   b   ' poems '   )   def   data _ received   (     ,   data   ) :     data   :   print   (   data   )   print   (   ' writing     { }   '   .   format   (     .   infile   .     ) )     .   infile   .   write   (   data   )     .   transport   .   write   (   b   ' poems '   )   def   eof _ received   (     ) :   print   (   ' end     writing '   )     .   infile   .   close   ( )   def   main   ( ) :   addresses   =   parse _ args   ( )   eventloop   =   asyncio   .   _ event _ loop   ( )     address     addresses   :   host   ,   port   =   address   filename   =   str   (   port   )   +   ' . txt '   infile   =   open   (   filename   ,   ' wb '   )   coro   =   eventloop   .   create _ connection   (   lambda   :   PoetryClientProtocol   (   infile   ) ,   host   ,   port   )   t   ,   p   =   eventloop   .   run _ _ complete   (   coro   )   print   (   t   ,   p   )     :   eventloop   .   run _ forever   ( )   finally   :   eventloop   .   close   ( )     __ __   = =   ' __ main __ '   :   main   ( )",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-xue-xi-zhi-wang-luo-bian-cheng.html"
        },
        {
            "title":"python语言学习之-多进程多线程",
            "text":"进程 定义 :   一个 执行 程序 实例 。 进程 都 一个 唯一 进程 ID ，   PID   。   ps   命令 第一个 列 进程 PID 属性 。 python 中   os . getpid ( )   查看 进程 PID 。   一个 CPU 机器 上 ， 多任务 操作系统 实际上 只能 运行 一个 进程 ， 操作系统 切换 进程 一种 多任务 运行 多个 程序 感觉 。 CPU 机器 上 真的 运行 多个 进程 。   进程 fork   进程 fork 简单 来说 类似 git 项目 fork ， 代码 信息 配置 相关 信息 复制 注册 。 相当于 代码 环境 下 ， 两个 单独 运行 程序 实例 。   一个 非常简单 小 例子 ， os . fork ( ) 语句 移到 print ( '   fork ' ) 变化 。   import   os   ,   time   print   (   '   fork   '   )   os   .   fork   ( )   print   (   '     '   ,   os   .   getpid   ( ) )   time   .   sleep   (   1   )   print   (   '   fork '   )   程序 简单 理解 ， py 文件 编译成 字节 码 内存 一个 程序 实例 （ 还 包含 信息 ） ， 程序 运行 会 os . fork 调用 系统 fork 函数 ， 复制本 程序 实例 （ 以本 程序 实例 所处 状态 ） ， print ( '   fork ' ) 执行 ， 子 进程 执行 一行 代码 ， os . fork ( ) 代码 继续执行 。 相当于 两个 程序 运行 ， 打印 顺序 说 不准 。   操作系统 fork 暂时 不 ， 两个 程序 实例 变量 运行 环境 基本上 一模一样 ， 运行 状态 有所不同 之外 。 fork 做出 一种 程序 多任务处理 方案 ， os 模块 fork 方法 只 支持 unix 环境 。   子 进程 父 进程 分开   请 看 代码 :   import   os   ,   time   print   (   '   fork   '   )   pid   =   os   .   fork   ( )     pid   :   print   (   pid   )   print   (   '       parent '   ,   os   .   getpid   ( ) )     :   print   (   pid   )   print   (   '       child '   ,   os   .   getpid   ( ) )   time   .   sleep   (   1   )   print   (   '   fork '   )   运行 大致 :     fork   13762         parent   13761   0         child   13762     fork     fork   父 进程 ， pid 本父 进程 子 进程 PID ， 子 进程 ， os . fork ( ) 返回 0 。 利用 将父 进程 操作 和子 进程 操作 分开 。 代码   pid   一块 父 进程 ， 一块 是子 进程 。   线程 入门   线程 内部 实施 细节 进程 ， 通俗 说法 线程 轻量级 进程 ， 不 讨论 线程 细节 。   python 操作 线程 模块   threading   模块 ， 简单 新建 一个 线程 对象 ( Thread ) ， 调用   start   方法 启动 ， 线程 做些 由本 线程 对象   run   ， 重 定义 ， 默认 调用 线程 Thread 类 新建 输入   target   参数 ， target 参数 指向 函数 。 一个 简单 例子 :   import   random   ,   threading   result   =   [ ]   def   randchar _ number   (   i   ) :   number _ list   =   list   (   range   (   48   ,   58   ) )   coden   =   random   .   choice   (   number _ list   )   result   .   append   (   chr   (   coden   ) )   print   (   ' thread : '   ,   i   )     i     range   (   8   ) :   t   =   threading   .   Thread   (   target   =   randchar _ number   ,   args   =   (   i   , ) )   t   .   start   ( )   print   (   ' '   .   join   (   result   ) )   thread   :   0   thread   :   1   thread   :   2   thread   :   3   thread   :   4   thread   :   5   thread   :   6   thread   :   7   22972371   :   控制参数 逗号 加上 。   不 太 喜欢 风格 ， 线程 对接 函数 实际上 return   值 ， 保存 值 依赖于 定义 ， 称之为 意义 上 函数 （ 一个 定义 很 好 函数 复用 特性 很强 ） 。 线程 类 风格 编写 。 代码 参考   网页   。   import   random   ,   threading   threads   =   [ ]   class   MyThread   (   threading   .   Thread   ) :   def   __ init __   (     ) :   threading   .   Thread   .   __ init __   (     )     .   result   =   ' '   def   run   (     ) :   number _ list   =   list   (   range   (   48   ,   58   ) )   coden   =   random   .   choice   (   number _ list   )     .   result   =   chr   (   coden   )   def   getvalue   (     ) :   return     .   result     i     range   (   8   ) :   t   =   MyThread   ( )   t   .   start   ( )   t   .   join   ( )   threads   .   append   (   t   )   result   =   ' '     t     threads   :   result   + =   t   .   getvalue   ( )   print   (   result   )   0564   9040   > > >   调用 线程 对象   join   方法 确保 线程 执行 完 ， 返回 异常 。 做法 不太 标准 ， 更 标准 做法 单独 写 一行 t . join 代码 :     t     threads :   t . join ( )   确保 线程 都 执行 完 ， 形式 多任务 并行处理 效果 。   例子 线程 执行 顺序 特殊要求 ， 推荐 python queue 模块 ， 略过 。   后台 线程   函数 一个 后台 警报 线程 ， 阻塞 主程序 。   def   beep   (   a   ,   b   ) :   ' ' ' make   a   sound   ,   ref :   http : / / stackoverflow . / questions / 16573051 /   python - sound - alarm - - code - finishes       install   ` ` apt -   install   sox ` `   : param   a :   frenquency   : param   b :   duration   create   a   background   thread ,     function       block   ' ' '   def   _ beep   (   a   ,   b   ) :   import   os   os   .   system   (   ' play   - - - show - progress   - - null   - - channels   1   \\   synth   % s   sine   % f   '   %   (   b   ,   a   ) )     threading   import   Thread   thread   =   Thread   (   target   =   _ beep   ,   args   =   (   a   ,   b   ) )   thread   .   daemon   =   True   thread   .   start   ( )   上 所示 ， 原 beep 函数调用 系统 play 命令 制造 一个 声音 ， b 声音 持续 时间 ， 其是 阻塞 。 一个 线程 调用 ， 阻塞 主程序 。   daemon   线程 一个 后台 线程 ， 请 参看   网页   ， 说道 后台 线程 不用 ， 会 主程序 自动 关闭 。   多线程 :   一个 定时器   例子 参考   网页   。   1   2   3   4   5   6   7   8   9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   # ! / usr / bin / env   python3   #   - * -   coding :   utf - 8   - * -   import   time   import   threading   class   Timer   (   threading   .   Thread   ) :   def   __ init __   (     ,   interval   ,   action   =   lambda   :   print   (   '   \\ a   '   ) ) :   threading   .   Thread   .   __ init __   (     )     .   interval   =   interval     .   action   =   action   def   run   (     ) :   time   .   sleep   (     .   interval   )     .   action   ( )   def   set _ interval   (     ,   interval   ) :     .   interval   =   interval   # timer   =   Timer ( 5 )   # timer . start ( )   class   CountDownTimer   (   Timer   ) :   def   run   (     ) :   counter   =     .   interval     sec     range   (     .   interval   ) :   print   (   counter   )   time   .   sleep   (   1.0   )   counter   - =   1   ##     .   action   ( )   # timer   =   CountDownTimer ( 5 )   # timer . start ( )   def     ( ) :   print   (   '   \\ a   '   )   timer   =   CountDownTimer   (   5   ,   action   =     )   timer   .   start   ( )   很 简单 ， 线程 timer . sleep 函数 不 冻结 主程序 。   多线程 下载 大 文件   小节 参考   网页     网页   。     _ content _ tofile   函数 目标 内容 大小 大于 1M 启动 多线程 下载 方法 。   guess _ url _ filename   函数 url 猜测 目标 下载 文件 名字 ， 还 一个 尝试 版本 。   requests . 函数 加上   stream = True   参数 ， 连接 目标 url 头文件 信息 进一步 下载 content 内容 。 早期 headers 信息 做出 判断 。   接下来 HTTP 头文件   content - length   判断 下载 内容 大小 ， 属性 ， 目标 url content 内容 ， 函数 情况 做出 ， 单 网页 url ， requests 方法 获取 网页 文本 内容 即可 。   目标 长度 小于 1M ， 打开 文件 ， requests 模块 里 response 对象   iter _ content   方法 迭代 完 content 内容 。   目标 长度 大于 1M ， 采用 一种 多线程 下载 方法 。   _ content _ partly   函数 ， 接受 url index ， index 一个 简单 索引 ， bytes 还 计算 。 多线程 操作 bytes 计算 细节 略过 讨论 。 唯一 值得一提 HTTP 协议 Range 属性 ， begin - end ， 0 - 1024 ， 还 包括 1024 位 ， 实际上 1025 bytes ， python 中 体验 ， end begin + 1024 - 1 。 1024 bytes 位 ， 定位 ( 0 ,   1024 ) ， python 中 ， 不 包括 1024 位 。   一个 小 信息 ， HTTP 协议 返回 头文件 中   content - range   属性 ， 请求 Range 越界 ， 属性 。 begin 越界 ， end 越界 请求 ？ HTTP 协议 很 好 ， 跨界 情况 都 只 返回 那点 content 内容 。   写 文件 降低 内存 消耗 ， 语句 强制 文件 流 写入 文件 中 ， 好 释放 内存 ， 下载 程序 内存 使用率 剧增 。   f   .   flush   ( )   os   .   fsync   (   f   .   fileno   ( ) )   import     def   guess _ url _ filename   (   url   ) :   ' ' ' url 猜测 目标 文件名 ， ' ' '   response   =   requests   .     (   url   ,   stream   =   True   )   ## 一个 content - type 信息 利用   s   =   urlsplit   (   url   )   guess _ element   =   s   .   path   .   split   (   ' / '   ) [   -   1   ]   guess _ pattern   =     .   compile   (   r   ' ' '   ( . png | . flv )   $   #   end     string   ' ' '   ,     .   VERBOSE   |     .   IGNORECASE   )       .   search   (   guess _ pattern   ,   guess _ element   ) :   filename   =   guess _ element     :   filename   =   guess _ element   +   ' . html '   return   filename   import   threading   import   os   class   DownloadThread   (   threading   .   Thread   ) :   def   __ init __   (     ,   url   ,   begin   ,   chunk _ size   =   1024   *   300   ) :   threading   .   Thread   .   __ init __   (     )     .   url   =   url     .   begin   =   begin     .   chunk _ size   =   chunk _ size     .   result   =   b   ' '   def   run   (     ) :   headers   =   {   ' Range '   :   ' bytes = { begin } - { end } '   .   format   (   begin   =   str   (     .   begin   ) ,   end   =   str   (     .   begin   +     .   chunk _ size   -   1   ) ) }   response   =   requests   .     (   url   ,   stream   =   True   ,   headers   =   headers   )     response   .   headers   .     (   ' content - range '   )     None   :     .   result   =   0   ## 越界     :     .   result   =   response   .   content   print   (   ' start   download ... '   ,     .   begin   /   1024   ,   ' KB '   )   def   getvalue   (     ) :   return     .   result   def   _ content _ partly   (   url   ,   index   ) :   threads   =   [ ]   content   =   b   ' '   chunk _ size   =   1024   *   300   #   设置 太大 设置 太小   block _ size   =   10   *   chunk _ size   #   线程 数     i     range   (   10   ) :   t   =   DownloadThread   (   url   ,   index   *   block _ size   +   i   *   chunk _ size   )   t   .   start   ( )   threads   .   append   (   t   )     i   ,   t     enumerate   (   threads   ) :   t   .   join   ( )     t     threads   :     t   .   getvalue   ( ) :   content   + =   t   .   getvalue   ( )   return   content   import   os   def   _ content _ tofile   (   url   ,   filename   =   ' '   ) :   ' ' ' 简单 url 获取 content ， 存入 内容 存入 文件 中 。   内容 size   小于 1M   1000000   byte   ， 采用 多线程 下载 法 ' ' '       filename   :   filename   =   guess _ url _ filename   (   url   )   #   NOTE     stream = True   parameter   response   =   requests   .     (   url   ,   stream   =   True   )       response   .   headers   .     (   ' content - length '   ) :   print   (   '   url         a   content   . '   )   return   0   elif   response   .   headers   .     (   ' content - length '   )   <   ' 1000000 '   :     open   (   filename   ,   ' wb '   )     f   :     chunk     response   .   iter _ content   (   chunk _ size   =   1024   ) :     chunk   :   #   filter     - alive     chunks   f   .   write   (   chunk   )   f   .   flush   ( )   os   .   fsync   (   f   .   fileno   ( ) )     :     open   (   filename   ,   ' wb '   )     f   :     i     range   (   1000000   ) :   ##   huge   content   =   _ content _ partly   (   url   ,   i   )     content   :   f   .   write   (   content   )   f   .   flush   ( )   os   .   fsync   (   f   .   fileno   ( ) )     :   print   (   ' end ... '   )   break   线程 锁   python 两种 类型 线程 锁   Lock     RLock   ， 都   acquire   获取 锁   release   释放 锁 。 一个 线程 试着 访问 unlocked 锁 ，   acquire   返回 ； 访问 locked 锁 ， 线程 阻塞 ， 一个   release   释放 锁 。   RLock Lock 区别 RLock 线程 acquire ， RLock 称之为 递归 锁 ， （ 递归 ） 函数 线程 中 访问 资源 ， ， RLock 。   RLock 常 语句 ：   lock   =   threading . RLock ( )     lock :     ...",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-xue-xi-zhi-duo-jin-cheng-duo-xian-cheng.html"
        },
        {
            "title":"python语言学习之-文件处理",
            "text":"一行行 操作   文件 对象 本身 迭代 ， 简单 迭代 文件 对象 文件 一行行 内容 操作 。 ：   f   =   open ( ' removeduplicate . py ' )     line     f :   print ( line , end = ' ' )   代码 打印 文件 ， end = \" 取消   \\ n   ， 行   \\ n   。   代码 稍作 修改 一行 加上   > > >   符号 。   f   =   open ( ' removeduplicate . py ' )     line     f :   print ( ' > > > ' , line , end = ' ' )   ？ 输出 终端 ， 文件 去 ， 行 ， 加上 file 参数 。 代码 ：   import   sys   f   =   open   (   ' removeduplicate . py '   )   pyout   =   open   (   sys   .   argv   [   1   ]   ,   \" w \"   )     line     f   :   print   (   ' > > > '   ,   line   ,   end   =   ' '   ,   file   =   pyout   )   pyout   .   close   ( )   f   .   close   ( )   制作 一个 小 python 脚本 ， 接受 一个 文件名 输出 文件 ， 文件 内容 终端 中 。   文件 列表 解析   python 列表 解析 （ 迭代 ） 效率 很 高 ， 多用 列表 解析 模式 。   readlines 方法   文件 对象 一个 readlines 方法 ， 一次性 文件 行 字符串 装入 一个 列表 中 。 再 列表 解析 操作 文件 内容 做出 修改 。 不 推荐 readlines 方法 ， 文件 装入 内存 方法 内存 爆炸 风险 ， 迭代 版本 更好 一点 。   文本 单词 替换   举 一个 例子 ， removeduplicate . py 文件 接受 进来 ， 列表 解析 ， 文本 中 newlist 都 替换 list2 。   import   sys   pyout   =   open   (   sys   .   argv   [   1   ]   ,   \" w \"   )   print   (   ' '   .   join   ( [   line   .   replace   (   ' newlist '   ,   ' list2 '   )     line     open   (   ' removeduplicate . py '   ) ] ) ,   file   =   pyout   )   pyout   .   close   ( )   列表 解析 风格 代码 python 风格 简洁 功能 异常 强大 。   文本处理 技巧 学习 正则表达式 模块 。",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-xue-xi-zhi-wen-jian-chu-li.html"
        },
        {
            "title":"python语言学习之-模块",
            "text":"模块 基础知识 学习 ， 建立 编写 模块 ， 积累 知识 ， 变得 更强 。   实际上 接触 很多 python 标准 模块 作者 写 第三方 模块 ， import 语句 加载 模块 。   语句 import 语句 内部 作用 机制 很 类似 ， 变量名 方式 上 差异 （ 会 变量名 复制 ） 。 重点 import 工作 方式 ：   找到 模块 文件 。   模块 文件 编译成 位码 （ 时 ， 文件 时间 戳 。 ） ， 会 新多 一个   __ pycache __   文件夹 。   执行 编译 位码 ， 创建 py 文件 定义 对象 。   三个 步骤 第一次 import 会 执行 ， 第二次 import 会 跳过去 ， 引用 内存 中 已 加载 对象 。   import 语句   import 语句 方法 已有 接触 ， import   math ， math 模块 函数 类 带点 变量名 结构 ： math . pi 。   import 语句 一个 常见 缩写 名 技巧 ， import   numpy     np ， 写 ，   np . array ， numpy . array 。   语句   语句 两种 情况 ：       import         import   *   第一种 形式 点名 只 导入 变量 ， 第二种 形式 都 导入 进来 。 想 读者 肯定 ， 第二种 导入 形式 小心 变量名 覆盖 ， 心里有数 即可 。   reload 函数   reload 函数 载入 模块 ， reload 函数 优点 不 重新启动 应用程序 ， 动态 重载 模块 。 reload 只能 用于 python 编写 模块 ， python3 中 ， reload 函数 移到 imp 模块 去 ， import   imp 才能 。 比如说 ：     imp   import   reload   reload   (   somemodule   )",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-xue-xi-zhi-mo-kuai.html"
        },
        {
            "title":"python语言学习之-一切皆对象",
            "text":"说 下 python2 python3 兼容性 ， 读者 python2.7 环境 下 ， 推荐 定义 class 都 跟上 object ：   class   Test   (   object   )   :   pass   章节 围绕 内容 展开 ， python 类 深度 定制 。   内省 属性 ：   __ dict __   ，   __ class __   某种 运算符 操作 调用 常见 方法 时 重载 。   函数 装饰器 ：   函数调用 定制   属性 访问 定制   特定 属性 访问 时 定制   类 实例 创建 时 定制 - - - - - - 类 装饰器   类 对象 创建 时 定制 - - - - - - metaclass   __ dict __   参考   网页   。   读者 记住 class 类似 def 语句 ， 管理 一个 名字 空间 ， 区块 语句 执行 。 看 例子 ：   class   A   ( ) :   def   __ init __   (     ,   a   ) :     .   a   =   a   def   fun2   (     ,     ) :   print   (   ' fun '   ,     )   @ property   def   x   (     ) :   return   1   class   B   (   A   ) :   def   __ init __   (     ) :     .   d   =   5   b   =   2   def   fun3   (     ) :   print   (   ' fun3 '   )   b   =   B   ( )   b   .   __ class __   = >   <   class   '   B   ' >   B   .   __ class __   = >   <   class   '   type   ' >   b   .   __ dict __   = >   {   ' d '   :   5   }   B   .   __ dict __   = >   mappingproxy   ( {   ' __ module __ '   :   ' builtins '   ,   ' __ init __ '   :   <   function   B   .   __ init __     0x7f13586057b8   >   ,   ' b '   :   2   ,   ' fun3 '   :   <   function   B   .   fun3     0x7f1358605840   >   ,   ' __ doc __ '   :   None   } )   A   .   __ dict __   = >   mappingproxy   ( {   ' __ module __ '   :   ' builtins '   ,   ' __ init __ '   :   <   function   A   .   __ init __     0x7f1358605620   >   ,   ' fun2 '   :   <   function   A   .   fun2     0x7f13586056a8   >   ,   ' x '   :   <   property   object     0x7f1358604188   >   ,   ' __ dict __ '   :   <   attribute   ' __ dict __ '     ' A '   objects   >   ,   ' __ weakref __ '   :   <   attribute   ' __ weakref __ '     ' A '   objects   >   ,   ' __ doc __ '   :   None   } )   例子 很 东西 ，   b .__ class __   查看 实例 b 类型 ， 大体 输出 接近   type ( b )   ， 类 B 类型 type 。 metaclass 会 讲 ， 记住 实例 类 创建 ， 而类 元类 type 创建 。   实例 b 类 B 类 A 都 记忆 属性 ， 继承 属性 不 重复 记忆 。   类   __ dict __     mappingproxy 对象 ， 其是 只读 ， 实例 b   __ dict __     dict 类型 ， 读写 （ 参考   篇文章   ） 。     @ property   装饰器 修饰 函数 ， 会 一个   property   object ， 会谈 ， 特定 属性 访问 定制 ， 描述符 对象 。   __ getitem __   __ getitem __ ( ,   key )   方法 定义 实例 形式   Class [ ' key ' ]   。   class   Test   ( ) :   a   =   1   def   __ getitem __   (     ,   key   ) :   print   (   ' i   accpeted :   { 0 } '   .   format   (   key   ) )   return     .   a   t   =   Test   ( )   > >   t   [   ' a '   ]   i   accpeted   :   a   = >   1   类 初步 测试 不 支持   Test [ ' x ' ]   写法 。     __ setitem __ ( ,   key ,   )   方法     t [ ' x ' ] = 3   赋值 形式 ；   __ delitem ( ,   key ) __   方法 运算 符号 ：   del   t [ ' x ' ]   。   数学 运算 符号 重载   层面 很少 需求 去 重载 数学 运算 符号 操作 。 稍微 下 即可 。   加法   X   +     ,   __ add __ ( , )   右侧 加法   加法 X + ， 右侧 加法 ， radd ， 公式 ： + X 。 不 区分 加法 。   +   ​   X   ,   __ radd __ ( , )   增强 加法   X   + =   ，   __ iadd __ ( . )   减法   X   -     ,   __ __ ( , )   ​   。 情况 类似 rsub isub 。   *   乘法 ，   __ mul __ ( , )   ， 类似 都 右侧 运算 增强 运算 ， 不再 赘述 。   / /   整除 ，   __ floordiv __   ， 类似 参数 都 ， 不再 赘述 。   /   除法   ，   __ div __   %   取余 ，   __ mod __   * *   开方 ，   __ pow __   \\ < \\ <   左移 运算 ，   __ lshift __   > >   右移 运算 ，   __ rshift __   &   位 ，   __ __   |   位 ，   __ __   \\ &# 94 ;   位 异或 [ &# 94 ; 12 ] ，   __ xor __   类似 右侧 运算 名字 加上 r ， 增强 运算 名字 加上 i ， 不 赘述 。   逻辑运算   bool 函数   bool ( X )   __ bool __ ( )   __ eq __   __ eq __   方法 定义 两个 对象 之间 A   = =   B 。   ：   def   __ eq __   (     ,     ) :       .   __ dict __   .   keys   ( )   = =     .   __ dict __   .   keys   ( ) :     key       .   __ dict __   .   keys   ( ) :         .   __ dict __   .     (   key   )   = =     .   __ dict __   .     (   key   ) :   return   False   return   True     :   return   False   定义   __ eq __   方法 ， 运行 = = 语句 ， 两个 对象 之间 内置 字典 键和值 都 ， 返回 True 。   > > >   test = GClass ( )   > > >   test . a = 1   > > >   test2 = GClass ( )   > > >   test2 . a = 1   > > >   test   = =   test2   True   > > >   test     test2   False   不 重 定义   __ eq __   方法 ， test test2 会 原始 object 类 继承   __ eq __   方法 ， 返回 False ， 想 两个 实例 内部 值 差异 ， 基于 id 。   判断 操作   类似 = = 操作 ， 判断 操作 内置 方法 重 定义 。   X   ! =   Y   ，   __ ne __ ( , )   定义 。   X   > =   Y   ，   __ ge __ ( , )   定义 。   X   \\ < =   Y   ，   __ le __ ( , )   定义 。   X   >   Y   ，   __ gt __ ( , )   定义 。   X   \\ <   Y   ，   __ lt __ ( , )   定义 。   语句   所示 ：   def   __ __   (     ,     ) :     key       .   __ dict __   .   keys   ( ) :         .   __ dict __   .     (   key   )   = =     .   __ dict __   .     (   key   ) :   return   False   return   True   提供       X   语句 支持 ， 例子 基于 类 其内 字典 内容 做出 判断 。   类 之间 判断   参考 网站   。   先 下 语句 = = 判断 isinstance id type 函数 ， 再 提及 python 类 内置 方法   __ eq __   。   python 一个 彻头彻尾 面向对象 语言 ， python 内部 数据 都 对象 ， 对象 类型 type 区别 。 内置 对象 类型 ：   > > >   type ( ' abc ' )   < class   ' str ' >   > > >   type ( 123 )   < class   ' int ' >   > > >   type ( [ 1 , 2 , 3 ] )   < class   ' list ' >   对象 type 类型 之外 ， id 属性 ， id 对象 内存 中 存储 位置 。   说 lst = [ 1 , 2 , 3 ] ， 程序 内存 中 创建 对象 [ 1 , 2 , 3 ] ， lst 变量名 一个 引用 。 看 例子 ：   > > >   x = [ 1 , 2 , 3 ]   > > >   y = [ 1 , 2 , 3 ]   > > >   type ( x )   < class   ' list ' >   > > >   type ( y )   < class   ' list ' >   > > >   id ( x )   3069975884   > > >   id ( y )   3062209708   > > >   x = = y   True   > > >   x     y   False   type 函数 返回 对象 类型 ， id 函数 返回 对象 内存 中 存储 位置 ， = = 判断 确保 值 ， 语句 返回 True ， 对象 内存 上 （ id ） 同一个 东西 。   对象 之间 类型 语句 ：   > > >   x = 10   > > >   type ( x )   = =   int   True   > > >   type ( x )   = =   type ( 0 )   True   特别 好用 ， 假设 fun 定义 一个 函数 ， type ( fun )   = =   function 会 出错 ， type 还要 小心 NoneType 空 列表 类型 ， type 将类 继承 进去 。   推荐 isinstance 函数 类型 ， 请 参考   网站   。 推荐 types 模块 特定 名字 判断 类型 ， ：   types . NoneType   None 值 类型   types . TypeType   type 对象 。   types . BooleanType   还   bool   。   types . IntType   还   int   ， 类似   long   ，   float   。   types . ComplexType   复数 类型   types . StringType   字符串 类型 ， 还   str   。   types . TupleType   元组 ， 还   tuple   ， 类似   list   ，   dict   。   types . FunctionType   定义 函数 类型 ，   types . LambdaType   。   值得一提的是 print 内置 函数 FunctionType BuiltinFunctionType 。   > > >   import   types   > > >   isinstance   (   print   ,   types   .   FunctionType   )   False   > > >   isinstance   (   print   ,   types   .   BuiltinFunctionType   )   True   更 内容 请 参见   types 模块 官方 文档   。   强制 类型 变换   包含 内置 方法 ：   __ int __ ( )   返回 整型   __ long __ ( )   长 整型   __ float __ ( )   浮点 型   __ complex __ ( )   复数 型   __ str __ ( )   字符 型   __ oct __ ( )   八进制   __ hex __ ( )   十六进制   __ index __ ( )   切片 操作   len ( )   len ( )     __ len __ ( )   提供 支持 。   copy 方法 deepcopy 方法   X . copy ( )     ___ copy __ ( )   提供 。   X . deepcopy ( )     __ deepcopy __ ( )   提供 。   就要 提 python copy 模块 ， 很少 有人 去 针对 类 单独 编写   __ deepcopy __   方法 ， 会 情况 ， 很多 情况   copy . deepcopy ( )   够用 。   语句 支持   PEP343 说法 ：     VAR   =   EXPR :   #     EXPR   一个 语法 糖   BLOCK   实际上 ：   VAR   =   EXPR   VAR .__ enter __ ( )   :   BLOCK   finally :   VAR .__ exit __ ( )   执行     open ( ... )     f   这类 语句 ， 最终 离开 调用 文件 对象   __ exit __   方法 。   __ call __   请 看 例子 ：   class   Position   ( ) :   def   __ init __   (     ,   x   =   0   ,   y   =   0   ) :     .   x   =   x     .   y   =   y   def   __ call __   (     ,   x   ,   y   ) :     .   x   =   x     .   y   =   y   def   __ repr __   (     ) :   return   ' ( '   +   str   (     .   x   )   +   ' , '   +   str   (     .   y   )   +   ' ) '   > > >   p1   =   Position   ( )   > > >   print   (   p1   )   (   0   ,   0   )   > > >   p1   (   4   ,   5   )   > > >   print   (   p1   )   (   4   ,   5   )   > > >     __ call __ ( , args )   方法 ， 实例 好像 函数 调用 。   __ __   一个 类 创造 出 一个 实例 调用   __ __   方法 ， 才 调用   __ init __   方法 。 一个 单例 模式 ， 一个 类 只能 创造 一个 实例 ， 请 参看   篇文章   。   class   Singleton   (   object   ) :   _ instance   =   None   def   __ __   (   cls   ,   *   args   ,   * *   kw   ) :       cls   .   _ instance   :   cls   .   _ instance   =   super   (   Singleton   ,   cls   )   .   __ __   (   cls   ,   *   args   ,   * *   kw   )   return   cls   .   _ instance   class   MyClass   (   Singleton   ) :   a   =   1   > > >     =   MyClass   ( )   > > >     =   MyClass   ( )   > > >     = =     True   > > >         True   > > >   id   (     ) ,   id   (     )   (   4303862608   ,   4303862608   )   一个点 ，   _ instance   两个 类 初始化 过程 中 指向 同一个 对象 。   _ instance   类 ， 实例 基于 类   __ __     __ init __   方法 生成 ， 假设 python 程序 ， 类 （ class def 一种 东西 ） 不 内存 里 编译 好 ， 都 引用 类 就行了 。 内存 编译 好 类   _ instance   变量 封装 好 。 理解 过程 有助于 进一步 理解 类 变量 作用 。   __ del __   对象 内存 存储 回收 时 ， python 执行 一个 内置 方法   __ del __   。 定义 管理 额外 资源 ， 定制 函数 确保 python 程序 关闭 时 目标 资源 自动 关闭 回收 。   __ getattr __   属性 不 对象   __ dict __   ， python 会 调用   __ getattr __ ( , )   方法 （ 参考   篇文章   ） 。 没 定义 方法 抛出   AttributeError   。     __ setattr __ ( , , )     __ delattr __ ( , )   ， 两个 方法 原 属性 不 都 会 操作 ， 谨慎 ！   迭代 器 生成器   推荐   篇文章   ， 对本 小节 概念 理清 很大 。 慢慢 来说 。   Iterable 迭代 对象 ， Iterator 迭代 器 。 collections 两个 类 ， 做出 判断 ：     collections   import   Iterable   ,   Iterator   isinstance   (   obj   ,   Iterable   )   isinstance   (   obj   ,   Iterator   )   再 来看 官方 文档 词语 解释 ：   iterable   - -   迭代 对象   逐一 返回 成员 项 对象 。 迭代 对象 例子 包括 序列 类型 （   list   、   str     tuple   ） 非 序列 类型   dict   、   文件 对象   定义   __ iter __ ( )   方法   Sequence   语义   __ getitem __ ( )   方法 任意 自定义 类 对象 。   迭代 对象 用于     循环 一个 序列 地方 （   zip ( )   、   map ( )   ... ） 。 一个 迭代 对象 参数 传给 内置 函数   iter ( )   时 ， 它会 返回 对象 迭代 器 。 迭代 器 对值 集合 一次性 遍历 。 迭代 对象 时 ， 不 调用   iter ( )   迭代 器 对象 。     语句 会为 自动 操作 ， 创建 一个 临时 未命名 变量 用来 循环 期间 保存 迭代 器 。 参见   iterator   、   sequence     generator   。   iterator   - -   迭代 器   用来 一连串 数据流 对象 。 重复 调用 迭代 器   __ __ ( )   方法 （ 传给 内置 函数   ( )   ） 逐个 返回 流中 项 。 数据 可用 时则 引发   StopIteration   异常 。 迭代 器 对象 中 数据项 已 耗尽 ， 调用   __ __ ( )   方法 只会 再次 引发   StopIteration   异常 。 迭代 器   __ iter __ ( )   方法 用来 返回 迭代 器 对象 ， 迭代 器 必定 迭代 对象 ， 用于 迭代 对象 大部分 场合 。 一个 例外 会 多次重复 访问 迭代 项 代码 。 容器 对象 （   list   ） 每次 传入   iter ( )   函数     循环 中 时 都 会 一个 新 迭代 器 。 情况 下 尝试 迭代 器则 会 返回 迭代 过程 中 耗尽 迭代 器 对象 ， 使 看起来 像是 一个 空 容器 。   生成器 函数 区别 函数 yield 语句 返回 ， 这块 python 异步 相关 ， 。 生成器 表达式 ：   test1   =   ( i + 1     i     range ( 5 ) )   isinstance ( test1 ,   Iterator )   > > >   True   isinstance ( test1 ,   Iterable )   > > >   True   都 生成器 ， 生成器 某种 简化版 迭代 器 ， 迭代 器 迭代 对象 。 迭代 对象   iter   函数 成   迭代 器 。 一般而言 简单 理解 ， 对象   __ iter __   方法 ， 一个 迭代 对象 ， 对象   __ __   方法 ， 一个 迭代 器 。   常见 遍历 过程 所示 ：   > > >   list   =   [   1   ,   2   ,   3   ]   > > >   iter   =   iter   (   list   )   > > >     True   :   ...     :   ...   x   =     (   iter   )   ...     StopIteration   :   ...   break   ...   print   (   x   )   ...   1   2   3   iter 函数 调用 目标 对象   __ iter __   方法 （ 对象 迭代 对象 方法 ） ， 一般而言 简单 情况 ，   __ iter __   方法 返回 目标 对象 ， 目标 对象 定义   __ __   方法 。   迭代 器 来说 ， 迭代 过程 调用   __ __   方法 获取 下 一个 值 ，   StopIteration   异常 停止 获取 。   提到 语句 ， map   zip   函数 过程 自动 做 。 包括 iter 函数 捕获 终止 异常 。   文件 对象 本身 迭代 ， 调用   __ __   方法 返回 文件 中 下 一行 内容 ， 到达 文件 尾 迭代 越界 返回 ：   StopIteration   异常 。   函数 ( f ) 等价   f .__ __ ( )   。   > > >     line     open ( ' removeduplicate . py ' ) :   ...   print ( line , end = ' ' )   ...   # ! / usr / bin / env   python3   # - * - coding : utf - 8 - * -   # 此处 内容 省略 。   > > >   f = open ( ' removeduplicate . py ' )   > > >   ( f )   ' # ! / usr / bin / env   python3 \\ n '   定义 类   __ __   方法 类 函数 时 。   序列 （ 列表 ， 元组 ， 字典 ， ranges 对象 ） 迭代 对象 ， 迭代 器 。 iter 函数 成 迭代 器 。   提及 常规 操作 ，   __ iter __   返回 ， 构建   __ __   方法 定制 迭代 器 外 ：   class   Test   (   object   ) :   def   __ init __   (     ) :     .   count   =   0   def   __ iter __   (     ) :   return     def   __ __   (     ) :     .   count   + =   1       .   count   > =   3   :   raise   StopIteration   return     .   count   isinstance ( t ,   Iterator )   > > >   True   list ( t )   > > >   [ 1 ,   2 ]   定义   __ iter __   方法 返回 一个 生成器 对象 （ generator   object ） ， 生成器 迭代 器 。   例子 定义 字典 类   __ iter __   方法 一个 新类 ， 类用 iter 函数 迭代 器 返回 排序 字典 键 。   class   SortedDict   (   dict   ) :   def   __ init __   (     ,   dict   =   { } ) :   super   ( )   .   __ init __   (   dict   )   def   __ iter __   (     ) :     .   _ keys   =   sorted   (     .   keys   ( ) )     i       .   _ keys   :   yield   i   dict02   =   SortedDict   ( )   dict02   [   ' a '   ]   =   1   dict02   [   ' b '   ]   =   1   dict02   [   ' d '   ]   =   1   dict02   [   ' c '   ]   =   1     i     dict02 :   print ( i )   a   b   c   d   例子 ， 只 语句 迭代 目标 对象 时才 会 调用   __ iter __   方法 。   理解 python 迭代 操作   python 中 代码 运算 效率 会 低 一点 ， 类似 工作 更 简单 语句 运算 效率 会 高 一点 。 python 一个 设计 理念 ， 不尽然 ， 确实 很 有意思 。   程序结构 中 最 有用 多个 操作 重复 ， 迭代 递归 循环 语句 。 递归 函式 感觉 很 有用 ， 基于 数据结构 特别 操作 重复 迭代 语句 即可 ， 才 循环 语句 。   迭代 语句 中 语句 运算 效率 最低 ， map 函数 （ 不尽然 ） ， 列表 解析 。 最 pythonic 风格 ， 运算 效率 列表 解析 ， 一个 列表 解析 解决 列表 解析 解决 ， python 设计者 很多 优化 工作 都 针对 迭代 操作 ， python3 进一步 深化 迭代 思想 ， python 中 迭代 c 语言 。   反思 列表 解析 通用 ？ 比如说 range 函数 文件 对象 列表 字符串 ， 都 称之为 迭代 对象 。 迭代 对象 内置 方法   __ __   谈及 ， 迭代 对象 特色 一系列 元素 ， 一系列 元素 内置 方法 逐个 调 ， 列表 解析 调 元素 表达式 操作 ， 收集 。 这是 ？ 看 这张 图片 ：   这张 图片 告诉 列表 解析 数学 上 集合 函数 定义 类似 ， 迭代 对象 好像 一个 集合 （ 顺序 没 顺序 都行 ） ， 集合 中 元素 操作 ， 操作 数学 中 定义 函数 ， 加上 过滤 条件 ， 元素 不 参加 运算 ， 生成 第二个 迭代 对象 （ 列表 字典 。 ）   一个 哲学 上 假定 ， 世界 都 数学 描述 ， 数学 都 函数 上 信息 操作 过滤 流 描述 。 不尽然 ， 列表 解析 上 很 通用 思想 。   有限 元素 集合 适合 迭代 ， 无限 元素 集合 也许 递归 循环 更 适合 。 想到 集合 描述 分为 列举 描述 （ 有限 元素 列举 ） 定义 描述 。 比如说   1 < x < 10   ， x 整数 ， 定义 一个 集合 。 想到 python 描述 列举 （ 列表 ） 集合 ？ range 函数 目的 而生 ， 比如说   range ( 10 )   定义   [ 0 , 10 )   一系列 整数 集合 ， range 函数 生成 一个 range 对象 ， range 对象 一个 迭代 对象 ， 看作 迭代 对象 中 描述 集合 类型 。 问 ，   0 < = x < 10   整数 集合 描述 ， 函数 描述 可不可以 ？ 可不可以 建立 类似 range 对象 描述性 迭代 对象 ？   map filter 函数   迭代 模式 描述 ， 常见 列表 解析 格式 ( 语句 ) 集合 中 元素 操作 过滤 ， python 中 两个 函数 类似 功能 ， map 集合 中 元素 函数 操作 （ 接受 lambda 函式 ） ， filter 过滤 功能 。 值得一提的是 python3 map 函数 filter 函数 返回 都 一个 迭代 对象 列表 ， range 函数 迭代 对象 用于 列表 解析 结构 。   map 函数   列出 例子 ：   > > >   map ( abs ,   [ - 2 , - 1 , 0 , 1 , 2 ] )   < map   object     0xb707dccc >   > > >   [ x     x     map ( abs ,   [ - 2 , - 1 , 0 , 1 , 2 ] ) ]   [ 2 ,   1 ,   0 ,   1 ,   2 ]   > > >   [ x     x     map ( lambda   x   :   x + 2 ,   [ - 2 , - 1 , 0 , 1 , 2 ] ) ]   [ 0 ,   1 ,   2 ,   3 ,   4 ]   map 函数 还 接受 两个 迭代 对象 协作 参数 模式 ， 学过 lisp 语言 会 很 眼熟 ， 理解 很 便捷 。 第一个 迭代 对象 取出 一个 元素 map 函数 第一个 参数 ， 第二个 迭代 对象 取出 第二个 参数 ， 函数 运算 ， 一个 ， 不 列表 解析 一个 map 对象 （ 迭代 对象 ） ， 展开 以此类推 。 值得一提的是 两个 迭代 对象   深度 最 短   ， 请 看 例子 ：   > > >   [ x     x     map ( lambda   x , y   :   x + y ,   [ - 2 , - 1 , 0 , 1 , 2 ] , [ - 2 , - 1 , 0 , 1 , 2 ] ) ]   [ - 4 ,   - 2 ,   0 ,   2 ,   4 ]   > > >   [ x     x     map ( lambda   x , y   :   x + y ,   [ - 2 , - 1 , 0 , 1 , 2 ] , [ - 2 , - 1 , 0 , 1 ] ) ]   [ - 4 ,   - 2 ,   0 ,   2 ]   filter 函数   谈及 类似 ， filter 函数 过滤 一个 迭代 对象 一个 迭代 对象 。 类似 功能 列表 解析 后 语句 。 谈到 map 函数 提及 优先 列表 解析 模式 ， filter 函数 ， 列表 解析 跟个 会 人 困惑 ， 推荐 filter 函数 迭代 对象 过滤 操作 。   filter 函数 逻辑   return   True   （ lambda 表达式 表达式 值 真 )   元素 才 收集 ， 或者说 过滤出来 。   请 参看 例子 理解 ：   > > >   [ x     x     filter ( lambda   x : x & 1 , [ 1 , 2 , 3 , 5 , 9 , 10 , 155 , - 20 , - 25 ] ) ]   [ 1 ,   3 ,   5 ,   9 ,   155 ,   - 25 ]   > > >   [ x     x     filter ( lambda   x :   x & 1 , [ 1 , 2 , 3 , 5 , 9 , 10 , 155 , - 20 , - 25 ] ) ]   [ 2 ,   10 ,   - 20 ]   传统 编写 函数 ：   > > >   def   ( n ) :   ...     n   %   2   = = 0 :   ...   return   True   > > >   [ x     x     filter ( , [ 1 , 2 , 3 , 5 , 9 , 10 , 155 , - 25 ] ) ]   [ 2 ,   10 ]   zip 函数   顺便 zip 函数 提了 ， zip 函数 返回 一个 迭代 对象 ， 接受 任意 数目 迭代 对象 ， 逐个 取出 迭代 对象 元素 一个 元 一个 元素 。 map 函数 类似   迭代 深度 最 短 迭代 对象   。   > > >   zip ( [ ' a ' , ' b ' , ' c ' ] , [ 1 , 2 , 3 , 4 ] )   < zip   object     0xb7055e6c >   > > >   [ x     x     zip ( [ ' a ' , ' b ' , ' c ' ] , [ 1 , 2 , 3 , 4 ] ) ]   [ ( ' a ' ,   1 ) ,   ( ' b ' ,   2 ) ,   ( ' c ' ,   3 ) ]   > > >   list ( zip ( [ ' a ' , ' b ' , ' c ' ] , [ 1 , 2 , 3 , 4 ] ) )   [ ( ' a ' ,   1 ) ,   ( ' b ' ,   2 ) ,   ( ' c ' ,   3 ) ]   > > >   dict ( zip ( [ ' a ' , ' b ' , ' c ' ] , [ 1 , 2 , 3 , 4 ] ) )   { ' c ' :   3 ,   ' b ' :   2 ,   ' a ' :   1 }   字典 列表   例子 价值 不 大 ， zip 函数 接受 任意 数目 参数 情况 。 y . items ( ) 解包 4 参数传递 zip 函数 ， zip 函数 封装 逻辑 有人 问 ， 迭代 对象 取出 一个 元素 ， 元组 包装 返回 。   x1   =   [ ' a ' , ' b ' , ' c ' , ' e ' ]   x2   =   [ 1 , 2 , 3 , 4 ]   y   =   dict ( zip ( x1 , x2 ) )   print ( ' 列表 字典 ： ' , y )   _ x1 , _ x2   =   zip ( * y . items ( ) )   print ( _ x1 , _ x2 )   列表 字典 ：   { ' b ' :   2 ,   ' c ' :   3 ,   ' a ' :   1 ,   ' e ' :   4 }   ( ' b ' ,   ' c ' ,   ' a ' ,   ' e ' )   ( 2 ,   3 ,   1 ,   4 )   例子 情况 ， 跳过 字典 形式 ， 来个 数据 映射 ：   > > >   x1   =   [ ' a ' , ' b ' , ' c ' , ' e ' ]   > > >   x2   =   [ ' red ' , ' yellow ' , ' red ' , ' blue ' ]   > > >   x3   =   [ 1 , 2 , 3 , 4 ]   > > >   list ( zip ( x1 , x2 , x3 ) )   [ ( ' a ' ,   ' red ' ,   1 ) ,   ( ' b ' ,   ' yellow ' ,   2 ) ,   ( ' c ' ,   ' red ' ,   3 ) ,   ( ' e ' ,   ' blue ' ,   4 ) ]   > > >   _ x1 , _ x2 , _ x3   =   zip ( * list ( zip ( x1 , x2 , x3 ) ) )   > > >   _ x1   ( ' a ' ,   ' b ' ,   ' c ' ,   ' e ' )   > > >   _ x2   ( ' red ' ,   ' yellow ' ,   ' red ' ,   ' blue ' )   > > >   _ x3   ( 1 ,   2 ,   3 ,   4 )   属性数据 推荐 类来 ， 情况 下 不 类 ， 简单 。   值得一提的是 数据 存储 形式 sql 存储 ， 不 ， 矩阵 转置 功能 。   装饰器   装饰器 作用 机制 接下来 函数 （ 类 class 声明 类似 函数 声明 ， 会 提到 类 装饰器 概念 ） 进一步 封装 ， ：   @ staticmethod   def   ( ) :   pass   #   等价 类 声明 语句 里 写 上 一句 。     =   staticmethod ( )   装饰器 一个 神秘 难懂 概念 ， 定义 函数 ， 函数 函数 对象 ， 某种 封装 。   自定义 装饰器   def   print1 ( f ) :   print ( ' 1 ' , f )   return   f   @ print1   def   print3 ( c ) :   print ( c )   print3 ( ' c ' )   #   print1 ( print3 ) ( ' c ' )   print1 函数 做成 一个 装饰器 函数 ， print3 函数 理解   print3 = print1 ( print3 )   。   多个 装饰器   def   print1 ( f ) :   print ( ' 1 ' , f )   return   f   def   print2 ( f ) :   print ( ' 2 ' , f )   return   f   @ print2   @ print1   def   print4 ( c ) :   print ( c )   print4 ( ' c ' )   #   print2 ( print1 ( print4 ) ) ( c )   类似 多个 装饰器 简单 理解 :   print4   =   print2 ( print1 ( print4 ) )   装饰器 带上 参数   例子 中 ， 简单 装饰器 函数 理解 一个 接受 函数 对象 返回 返回 函数 对象 函数 ， 很 直观 简单 。 实际上 装饰器 带上 参数 ， 函数 闭包 结构 才能 ， 例子 所示 :   def   print1 ( f ) :   print ( ' 1 ' , f )   return   f   def   print2 ( b ) :   def   test ( f ) :   print ( ' 2 ' , f , b )   return   f   return   test   @ print2 ( ' b ' )   @ print1   def   print4 ( c ) :   print ( c )   print4 ( ' c ' )   #   print2 ( print1 ( print4 ) ) ( ' b ' ) ( c )   闭包 结构 简单 来说 函数 套 函数 结构 。 介绍 nolocal 关键词 说道 ， 函数 嵌套 函数 变量 加上 声明 关键词 nolocal ， （ 嵌套 函数 内 定义 本地 变量 ） ， 变量名 嵌套 函数 外面 自由 变量 （ 自由 变量 函数 生存期 记忆 能力 ） 。   例子 理解   print2 ( print1 ( print4 ) ) ( ' b ' ) ( c )   一个 过程 。 执行 print1 ( print4 ) ， 返回 print4 ， 很 直观 。 表达式 变为   print2 ( print4 ) ( ' b ' ) ( c )   ， print2 返回 test ， 消费 掉 一个 参数 ， 自由 变量   b = ' b '   ， 表达式 变为   test ( print4 ) ( c )   ， 表达式 规约   print4 ( c )   。   装饰器 装饰器 衍生 装饰器   写 一个 装饰器 很 很 简单 通用 ， 写法 ：     functools   import   wraps   def   test _ decorator   (   word   ) :   def   decorator   (   f   ) :   @ wraps   (   f   )   def   _ decorator   (   *   args   ,   * *   kwargs   ) :   print   (   word   )   return   f   (   *   args   ,   * *   kwargs   )   return   _ decorator   return   decorator   处于 编程 便捷 ， 参数 默认值 再 单独 开出 一个 装饰器 ：   bbb _ decorator   =   test _ decorator   (   ' bbb '   )   这是 可行 ， 种 写法 ， 实际上 ：   def   aaa _ decorator   (   f   ) :   return   test _ decorator   (   ' aaa '   ) (   f   )   理解 装饰器 关键 理解 ：   @ aaa _ decorator   def   hello2   ( ) :   print   (   ' '   )   装饰器 不仅仅 函数 第一个 函数 简单 ， 更 函数 命名 重 定义 。   hello2   =   aaa _ decorator ( hello2 )   传 参数 装饰器 消化 掉 参数 ， decorator ， 装饰 函数 内部 decorator 函数 ，   wraps   保留 原函数 头 doc 优化 。   静态方法 装饰器   class   Test   :   #   @ staticmethod   def     ( )   :   print   (   ' aaa '   )   test   =   Test   ( )   test   .     ( )   例子 中 ， 希望 创造 一个 函数 ， 函数 实例 关系 （ 指 函数 不 接受 默认 参数 ） 。 上 所示 ， 函数 希望 简单 打印 一小 段 字符 ，   代码 错误   ， 函数 加上   \\ @ staticmethod   ， 段 代码 报错 ，   class   Test   :   @ staticmethod   def     ( )   :   print   (   ' aaa '   )   test   =   Test   ( )   test   .     ( )   类 定义 函数 类 静态方法 ， 静态方法 继承 ， 静态方法 特色 不 建立 实例 ， 从类 调用 ， 所示 ：   class   Test   :   @ staticmethod   def     ( )   :   print   (   ' aaa '   )   Test   .     ( )   静态方法 pyqt 中   QtGui . QFileDialog . getOpenFileName ( ...... )   一个 静态方法 ， 调用 方法 来弹 出 询问 打开 文件 窗口 ， 并不需要 先 实例 化 一个 对象 ， . 类似 形式 调用 。   类 方法 装饰器   一个 装饰器 会 用到 ，   @ classmethod   ， 类 方法 装饰器 。 静态方法 不 新建 实例 ， 类来 调用 。 静态方法 区别 静态方法 调用 默认 第一 参数 ， 而类 方法 调用 默认 第一 参数 调用 类 [ &# 94 ; 14 ] 。   class   Test   :   @ classmethod   def     (   cls   )   :   print   (   '   class : '   ,   cls   ,   '   '   )   Test   .     ( )     class   :   <   class   ' __ main __. Test '   >       classmethod 装饰器 实际上 东西 ， 传 进去 第一个 参数 cls 看 ，   cls ( ... )   类来 生成 一个 实例 。   属性 饰器   编程语言 开发者 会 类里 定义 针对 属性 set 方法 ， Pythonic 风格 ， 特定 名字 属性 ， 利用 属性 装饰器 构建 ， 所示 ：   class   Apple   ( )   :   def   __ init __   (     )   :     .   _ color   =   ' red '   @ property   def   color   (     )   :   return     .   _ color   apple   =   Apple   ( )   类 定义 属性 ， 调用 属性 点 号 引用 即可 ， 执行   @ property   装饰 函数 。   color 属性 只 可读 ， 更改 。   > > >   apple . color   ' red '   > > >   apple . color   =   ' yellow '   Traceback   (   recent   call   ) :   File   \" < stdin > \" ,   line   1 ,     < module >   AttributeError :   ' t   set   attribute   请 参看   网页   ， 讲到   @ color . setter   装饰器 ， 装饰 函数 ， 函数 修改 color 属性 。   @ color . deleter   装饰 函数 ， 函数 删除 属性 。 deleter 少 ，   @ property   大部分 需求 ， 修改 属性 定义 setter 。   一个 简单 setter 例子 所示 ：   class   Apple   ( )   :   def   __ init __   (     )   :     .   _ color   =   ' red '   @ property   def   color   (     )   :   return     .   _ color   @ color   .   setter   def   color   (     ,   color   )   :     .   _ color   =   color   apple   =   Apple   ( )   print   (   apple   .   color   )   apple   .   color   =   ' yellow '   print   (   apple   .   color   )   函数 装饰器   小节 参考   网页   。   简单 介绍 python 装饰器 概念 ， 接触 带 参数 函数 装饰器 概念 ， 例子 直白 ， 再 写个 例子 函数 通用 形式 ：   def   mydecorator ( arg1 ,   arg2 ) :   def   _ mydecorator ( func ) :   print ( ' i       pass     decorator   parameters : ' ,   arg1 ,   arg2 )   return   func   return   _ mydecorator   @ mydecorator ( ' a ' ,   ' b ' )   def   test ( * args ,   * * kwargs ) :   print ( args ,   kwargs )   test ( ' test ' ,   a = 1 )   ( ' i       pass     decorator   parameters : ' ,   ' a ' ,   ' b ' )   ( ( ' test ' , ) ,   { ' a ' :   1 } )   函数 装饰器 写法 理解 装饰器 原理 写 形式 ， 网上 写法 有所区别 ， 简洁明了 一点 ， 推荐 风格 写法 ：   def   mydecorator ( arg1 ,   arg2 ) :   def   _ mydecorator ( func ) :   def   wraper _ func ( * args ,   * * kwargs ) :   print ( ' i       pass     decorator   parameters : ' ,   arg1 ,   arg2 )   return   func ( * args ,   * * kwargs )   return   wraper _ func   return   _ mydecorator   @ mydecorator ( ' a ' ,   ' b ' )   def   test ( * args ,   * * kwargs ) :   print ( args ,   kwargs )   test ( ' test ' ,   a = 1 )   运行 效果 都 ， 用到 函数 套 函数 结构 ， 装饰器 上 参数 都 变为 自由 变量 ， 理解 一点 关键 。   更进一步 做法 利用 functools 模块   wraps   函数 装饰 最终 执行   wraper _ func   函数 。     functools   import   wraps   def   mydecorator ( arg1 ,   arg2 ) :   def   _ mydecorator ( func ) :   @ wraps ( func )   def   wraper _ func ( * args ,   * * kwargs ) :   print ( ' i       pass     decorator   parameters : ' ,   arg1 ,   arg2 )   return   func ( * args ,   * * kwargs )   return   wraper _ func   return   _ mydecorator   @ mydecorator ( ' a ' ,   ' b ' )   def   test ( * args ,   * * kwargs ) :   \" \" \"       test   function   \" \" \"   print ( args ,   kwargs )   test ( ' test ' ,   a = 1 )   print ( test .__ doc __ )   做 好处 目标 函数 文档 还 保留 ， 目标 函数 名字 保留 ， 目标 函数 动作 保留 ， 装饰器 额外 程序流程 操作 。   类 装饰器   类 装饰器 利用 类   __ call __   内置 方法 ， 这段 代码 粘贴 ， 看 别人 源码 有用 ， 装饰器 这部分 到此为止 ， 没 弄 。   class   MyDecorator   (   object   )   :   \" \" \" Decorator     mixing   class     function   definitions . \" \" \"   def   __ init __   (     ,   func   ,   param1   ,   param2   )   :     .   func   =   func     .   param1   ,     .   param2   =   param1   ,   param2   def   __ call __   (     ,   *   args   ,   * *   kwargs   )   :   ...   #       .   param1   result   =     .   func   (   *   args   ,   * *   kwargs   )   #       .   param2   return   result   def   _ dec _ factory   (   param1   ,   param2   )   :   def   decorator   (   func   )   :   return   MyDecorator   (   func   ,   param1   ,   param2   )   return   decorator   讲到 class 声明 语句 def 语句 很 类似 ， def 语句 利用 缩进 区块 内 代码 （ 简单 理解 执行 编译 一遍 ， ） 构建 出 一个 函数 对象 ， 函数 对象 名字 绑定 。 class 语句 利用 缩进 区块 内 代码 构建 出 一个 类 对象 ， 类 对象 名字 绑定 。   类 装饰器 ， 类 挂个 装饰器 ， 所示 ：   def   decorator   (   C   )   :   return   ProcessedC   @ decorator   class   C   :   ....   C ：   C   =   decorator ( C )   函数 装饰器 相当于 函数 对象 创建 过程 深度 定制 DIY ， 而类 装饰器 相当于 类 对象 创建 过程 深度 DIY 。   多重 继承 顺序   来看 例子 ：   class   B1   ( )   :   x   =   ' B1 '   class   B2   ( )   :   x   =   ' B2 '   class   B3   ( )   :   x   =   ' B3 '   class   B   (   B1   ,   B2   ,   B3   )   :   x   =   ' B '   class   A1   ( )   :   x   =   ' A1 '   class   A2   ( )   :   x   =   ' A2 '   class   A   (   A1   ,   A2   )   :   x   =   ' A '   class   D   (   B   ,   A   )   :   x   =   ' D '   test   =   D   ( )   print   (   test   .   x   )   duo - chong - ji - cheng   测试 例子 ， D x 先 查找 ， 返回   ' D '   ， 类 D x 定义 语句 换成 pass ，   ' B '   。 程序 逻辑 test 实例 找 不到 x ， 再 找 D ， D 找 不到 再 接下来 找 D 继承 父类 ， B ， 目前为止 ， 没什么 新鲜事 发生 。   再 B x 赋值 语句 换成 pass ，   ' B1 '   ， 没什么 好 惊讶 。 类似 操作 ， 会 发现 python 值 查找 顺序 ： D ， B ， B1 ， B2 ， B3 ， A ， A1 ， A2 。   道 ： 恩 ， 类 多重 继承 深度 优先 法则 ， 先 把子 类 子类 子类 都 查找 完 ， 确认 值 再 从左到右 查找 。   情况 来说 理解 ， 编程 界 多重 继承 中有 有名 - - - - - - 菱形 难题 。   菱形 难题   参考资料 ：   维基百科 菱形 难题   ling - xing - nan - ti   菱形 难题 上 类 继承 中 ， C A 都 同名 属性 x ， D 会 调用 ？ 读者 测试 例子 ：   class   E   ( )   :   x   =   ' E '   class   F   ( )   :   x   =   ' F '   class   G   ( )   :   x   =   ' G '   class   A   (   F   ,   G   )   :   x   =   ' A '   class   B   (   E   ,   F   )   :   x   =   ' B '   class   D   (   B   ,   A   )   :   pass   test   =   D   ( )   print   (   test   .   x   )   运行 DBE 都 出奇 ，   接下来 DBEF [ &# 94 ; 15 ] ， DBEA ， 程序   ' A '   。 情况 确实 纠结 ， F 菱形 难题 交叉点 ， 似 层次分明 ， 简单 理解 深度 优先 即可 ， python3 选择   ' A '   ， 不 选择 。   再 来看 例子 ：   class   E   ( )   :   x   =   ' E '   class   F   ( )   :   x   =   ' F '   class   G   ( )   :   x   =   ' G '   class   A   (   F   ,   G   )   :   x   =   ' A '   class   B   (   F   ,   E   )   :   pass   class   D   (   B   ,   A   )   :   pass   test   =   D   ( )   print   (   test   .   x   )     ' A '   ， E 都 跳过去 ， 横向 优先 原则 。   程序 菱形 难题 ， 情况 变得 琢磨 。 三个 情况   D ( B ( B1   B2   B3 )   A ( A1   A2 ) )   →   D   B   B1   B2   B3   A   A1   A2   D ( B ( E   F )   A ( F   G ) )   →   D   B   E   A   F   G   D ( B ( F   E )   A ( F   G ) )   →   D   B   A   F   E   G   ， 很 冷门 领域 。 。 简单 理解 深度 搜索 ， 类似 flatten 函数 ， 子元 下 一个 平行 级别 子元 中 含有 ， 本子 元会 略过 ， 做个 记号 ， 分叉 跳过去 跑 A ， 执行 完 子元 ， 会 调 操作 点上 。 python 怎么弄 古怪 逻辑 。 。   super 面对 菱形 难题   第一种 情况 单 继承 类 系统 ， super ( ) 形式 父类 。 super ( ) . 引用 父类 变量 方法 。   第二种 情况 多重 继承 ， 搜索 顺序 多重 继承 搜索 顺序 ， 从左到右 。 请 调试 例子 ， 调用 c . d 会 返回 错误 ， 调用 类 A 构造函数 。   class   A   ( )   :   def   __ init __   (     ,   a   )   :     .   a   =   a   def   fun   (     )   :   print   (   ' fun '   )   def   fun2   (     ,     )   :   print   (   ' fun '   ,     )   class   B   ( )   :   def   __ init __   (     )   :     .   d   =   5   b   =   2   def   fun3   (     )   :   print   (   ' fun3 '   )   class   C   (   A   ,   B   )   :   def   __ init __   (     )   :   super   ( ) .   __ init __   (   3   )   super   ( ) .   fun   ( )   super   ( ) .   fun2   (   ' '   )   super   ( ) .   fun3   ( )   print   (   super   ( ) .   b   )   c   =   C   ( )   print   (   c   .   a   ,   c   .   b   )   fun   fun     fun3   2   3   2   A 类 定义 fun 函数 写 函数 上 有个 参数 ，   super ( )   调用 形式 意义 上 父类 ， 默认 第一个 参数 。 super ( ) 类 编写 中 引用 本类 父类 属性 方法 很 便捷 ，   。 例子 中 fun3 调用 是因为 多重 继承 机制 ， 它会 逐个 找 父类 。 c . d 会 出错 ， 初始化 A 类 构造函数 。   描述 器   小节 参考   网页   。   谈及 属性 装饰器 ， 实际上 调用 property 函数 ，   property ( fget ,   fset ,   fdel ,   descrition )   函数 返回 一个 描述 器 对象 （ Desriptor ） 。 一个 描述 器 对象 ， 简单 来说 对象 定义 三个 方法 （ 最   __ __   方法 定义 ） 。   思路 再理 ， instance . a 表达 ， python 视图   __ dict __   去 找 属性 ， 找   instance [ ' a ' ]   表达 值 （ 类 属性 继承 先 不 涉及 ） ，   __ dict __   属性 ， python 会 去 找   __ getattr __ ( , )   方法 ， 找 不到 会 报错 。   找 属性 过程 中 ， 查找 描述 器 很 前 。 找到 属性 一个 描述 器 ， python 会 描述 器 对象 提取 属性 ， 修改 属性 。   理解 property 函数 返回 一个 描述 器 ， 看 python 代码 等价 最 直观 ：   class   Property   (   object   )   :   \" Emulate   PyProperty _ Type ( )     Objects / descrobject . c \"   def   __ init __   (     ,   fget   =   None   ,   fset   =   None   ,   fdel   =   None   ,   doc   =   None   )   :     .   fget   =   fget     .   fset   =   fset     .   fdel   =   fdel     .   __ doc __   =   doc   def   __ __   (     ,   obj   ,   objtype   =   None   )   :     obj     None   :   return         .   fget     None   :   raise   AttributeError   ,   \" unreadable   attribute \"   return     .   fget   (   obj   )   def   __ set __   (     ,   obj   ,     )   :       .   fset     None   :   raise   AttributeError   ,   \" ' t   set   attribute \"     .   fset   (   obj   ,     )   def   __ delete __   (     ,   obj   )   :       .   fdel     None   :   raise   AttributeError   ,   \" ' t   delete   attribute \"     .   fdel   (   obj   )   def   getter   (     ,   fget   )   :   return   type   (     ) (   fget   ,     .   fset   ,     .   fdel   ,     .   __ doc __   )   def   setter   (     ,   fset   )   :   return   type   (     ) (     .   fget   ,   fset   ,     .   fdel   ,     .   __ doc __   )   def   deleter   (     ,   fdel   )   :   return   type   (     ) (     .   fget   ,     .   fset   ,   fdel   ,     .   __ doc __   )   缓存 属性   例子 灵感 来自 python 官方 装饰器   @ property   源码 ， 稍作 修改 对象 属性 记忆 特性 。   import   time   import   logging   class   memorized _ property   (   property   ) :   def   __ init __   (     ,   *   args   ,   * *   kwargs   ) :   super   (   memorized _ property   ,     )   .   __ init __   (   *   args   ,   * *   kwargs   )     .     =   ' _ { } '   .   format   (     .   fget   .   __ __   )   def   __ __   (     ,   obj   ,   objtype   =   None   ) :     obj     None   :   return         .   fget     None   :   raise   AttributeError   (   \" unreadable   attribute \"   )       .       obj   .   __ dict __   :   logging   .   debug   (   '   memory - - - - - - - - - - - - - - - - - - - - '   )   return   obj   .   __ dict __   [     .     ]     :   logging   .   debug   (   '   computing ########## '   )     =   obj   .   __ dict __   [     .     ]   =     .   fget   (   obj   )   return     def   __ set __   (     ,   obj   ,     ) :       .   fset     None   :   raise   AttributeError   (   \" ' t   set   attribute \"   )   obj   .   __ dict __   [     .     ]   =     def   __ delete __   (     ,   obj   ) :       .   fdel     None   :   raise   AttributeError   (   \" ' t   delete   attribute \"   )   del   obj   .   __ dict __   [     .     ]   class   Test   (   object   ) :   def   __ init __   (     ) :   pass   @ memorized _ property   def   x   (     ) :   return   time   .   time   ( )   @ x . setter   def   x   (     ,     ) :   pass   @ x . deleter   def   x   (     ) :   pass     __ __   = =   ' __ main __ '   :   logging   .   basicConfig   (   level   =   logging   .   DEBUG   )   t   =   Test   ( )   print   (   t   .   x   )   print   (   t   .   x   )   metaclass   类 都 由元类 （ type 类 ） 创建 ， 语句 ：   class   =   type   (   classname   ,   superclasses   ,   attributedict   )   type 调用   __ call __   方法 ， 方法 运行 type 两个 方法 ：   __ __   ，   __ call __   。   创造 一个 类 ， 提到 ：   类 还要 调用   __ __   ，   __ call __   ， 创造 出 一个 实例 。   提到 type type type ， type 大体 看作 python 中 类型 最底层 原子结构 。 元类 创造 类 ， 类 创造 实例 。   定义 一个 元类   class   Meta   (   type   )   :   def   __ __   (   meta   ,   classname   ,   supers   ,   classdict   )   :   #       return   type   .   __ __   (   meta   ,   classname   ,   supers   ,   classdict   )   一个 元类   class   Test   (   Super   ,   metaclass   =   Meta   )   :   pass   元类 理解 不难 ， 关键 把握 合适 合适 。",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-xue-xi-zhi-yi-qie-jie-dui-xiang.html"
        },
        {
            "title":"python语言学习之-类",
            "text":"python 中 皆 对象 。 学 操作 对象 都 python 程序语言 内部 定义 对象 （ Object ） ， 接下来 介绍 类 语法 更好 理解 对象 之外 ， 再就是 创造 操作 对象 。 面向对象 ( OOP ) 编程 基本概念 不 重复 ， 不明 请 读者 随便 搜索 一篇 网页 阅读 下 即可 。   python 中类 结构   python 中 类 好像 树叶 ， 类 一棵树 ， python 中超类 ， 子类 ， 实例 重载 继承 关系 一种 搜索 机制 ：   python 搜索 有没有 属性 方法 ， ， 向上 搜索 。 比如说 实例 l1 ， 向上 搜索 C1 ， C1 向上 搜索 C2 C3 。   实例 继承 创造 类 属性 ， 创造 类 更 上层 超类 ， 类似 概念 子类 ，   类 树形 层次 中 低 。   ， 简单 来说 类 结构 搜索 机制 ， 很 好 模拟 真实世界 知识 树形 层次结构 。   副 图 编写 代码 ：   class   C2   :   ...   class   C3   :   ...   class   C1   (   C2   ,   C3   )   :   ...   l1   =   C1   ( )   l2   =   C1   ( )   class 语句 创造 类 ， C1 继承 C2 C3 ， 这是 多重 继承 ， 从左到右 内部 搜索 顺序 （ 会 影响 重载 ） 。 l1 l2 类 C1 创造 两个 实例 。   初次 接触 类 概念 读者 不 指望 马上 弄懂 类 概念 ， 概念 倒 涉及 很多 哲学 纯 思考 东西 ， 看作 一种 编程 经验 技术 。 接触 也许 对类 学习 更 ， 纯 哲学 抽象概念 讨论 ， 毕竟 类 东西 创造 更好 描述 现实 世界 。   别人 编写 很多 模块 一堆 类 ， 类来 情况 情况 编写 子类 ， 更好 利用 前人 成果 ， 成果 更好 别人 快速 上 手 ， 好好 类 工具 。   类 最 基础知识   类 创建   class   MyClass   :     类 创建 语法 上 所示 ， 想 一个 好 一点 类名 。 类名 规范 写法 首字母 大写 ， 好 变量 区分 。   类 创建 实例   语句 格式 MyClass 类 创建 一个 实例 myclass001 。   myclass001 = MyClass ( )   类 属性   > > >   class   MyClass :   ...   = ' myclass '   ...   > > >   myclass001 = MyClass ( )   > > >   myclass001 .   ' myclass '   > > >   MyClass .   ' myclass '   > > >   myclass001 . = ' myclass001 '   > > >   myclass001 .   ' myclass001 '   > > >   MyClass .   ' myclass '   上 代码 所示 ， 创建 一个 类 ， 类 加上 一个 属性 ， 创建 一个 实例 myclass001 ， 实例 类 都 属性 。 实例 加上 点 加上 格式 引用 实例 属性 ， 其值 做 修改 。   例子 简单 演示 类 创建 ， 属性 添加 ， 实例 创建 ， 多态 核心 概念 。 类 继承 概念 都 大同小异 。   类 方法   类 方法 类似 类 属性 加上 def 语句 定义 一个 函数 ， 函数 类 称之为 方法 。 演示 一个 例子 ， 读者 看 明白 。   > > >   class   MyClass :   ...   = ' myclass '   ...   def   double ( ) :   ...   . = . * 2   ...   print ( . )   ...   > > >   myclass001 = MyClass ( )   > > >   myclass001 .   ' myclass '   > > >   myclass001 . double ( )   myclassmyclass   > > >   myclass001 .   ' myclassmyclass '   类 定义 结构 ， 代表 类 （ 更 意义 细节 请 参看   12.4 . 2   { reference - type = \" ref \"   reference = \" sec : 含义 \" } ） ， . 代表 属性 引用 。 实例 调用 方法 时用 myclass001 . double ( ) 结构 ， double 函数 实际上 接受 第一个 参数 ， myclass001 ， 无 参数 函数 。 类 方法 一个 参数 。   类 继承   实例 说 类 创建 ， 实际上 实例 类 一种 继承 关系 ， 实例 继承 自类 ， 而类 类 继承 关系 类似 ， 语法 稍 。 来看 例子 ：   class   Hero   ( )   :   def   addlevel   (     )   :     .   level   =     .   level   +   1     .   hp   =     .   hp   +     .   addhp   class   Garen   (   Hero   )   :   level   =   1   hp   =   455   addhp   =   96   garen001   =   Garen   ( )     i     range   (   6   )   :   print   (   ' 级别 : '   ,   garen001   .   level   ,   ' 生命 值 ： '   ,   garen001   .   hp   )   garen001   .   addlevel   ( )   级别   :   1   生命 值 ：   455   级别   :   2   生命 值 ：   551   级别   :   3   生命 值 ：   647   级别   :   4   生命 值 ：   743   级别   :   5   生命 值 ：   839   级别   :   6   生命 值 ：   935   lei - de - ji - cheng - shi - li   简单 两个 类 ， 盖伦 Garen 类 继承 Hero 类 ， 实例 garen001 继承 Garen 类 ， garen001 addlevel 方法 ， level 属性 加一 ， hp 生命 值 加上 值 ， 过程 很 直观 。   类 内置 方法   构建 一个 类 ， 简单 加上 pass 语句 ， 都 不 做 ， python 会为 类 自动 创建 属性 方法 。   > > >   class   TestClass :   ...   pass   ...   > > >   dir ( TestClass )   [ ' __ class __ ' ,   ' __ delattr __ ' ,   ' __ dict __ ' ,   ' __ dir __ ' ,   ' __ doc __ ' ,   ' __ eq __ ' ,   ' __ format __ ' ,   ' __ ge __ ' ,   ' __ getattribute __ ' ,   ' __ gt __ ' ,   ' __ hash __ ' ,   ' __ init __ ' ,   ' __ le __ ' ,   ' __ lt __ ' ,   ' __ module __ ' ,   ' __ ne __ ' ,   ' __ __ ' ,   ' __ reduce __ ' ,   ' __ reduce _ __ ' ,   ' __ repr __ ' ,   ' __ setattr __ ' ,   ' __ sizeof __ ' ,   ' __ str __ ' ,   ' __ subclasshook __ ' ,   ' __ weakref __ ' ]   变量 名字 都 加上 双 下划线 python 语言 设计者 ， 开发者 命名 变量 。   内置 方法 用户 重 定义 从来 覆盖 掉 定义 ， 特别 值得 一讲   __ init __   方法 称之为 构造函数 。   __ init __ 方法   __ init __   方法 该类 创建 实例 构造函数 。 ：   > > >   class   Point :   ...   def   __ init __ ( , x , y ) :   ...   . x = x   ...   . y = y   ...   > > >   point001 = Point ( 5 , 4 )   > > >   point001 . x   5   > > >   point001 . y   4   例子 重载   __ init __   函数 ， 接受 三个 参数 ， 下 创建 实例 ， x ， y 语句 创建 实例 属性 x y 赋 值 。   意味着   类 中 一个 很 概念 ， 当类 结构 层次 简单 时 还 看 ，   当类 层次结构 很 ， 会 弄 糊涂 。 。 调用 实例 方法 ， 方法 一个 远在天边 类 给出 定义 ， 就算 ， 定义 指 调用 方法 实例 ， 一点 牢记于心 。   例子 ：   class   Test   ( )   :   x   =   5   def   __ init __   (     )   :     .   x   =   10   test   =   Test   ( )   > > >   test   .   x   10   > > >   Test   .   x   5   . x 创建 实例 属性 x ， 定义 x 类 Test 属性 x 。   类 操作 第二 版   写出 版本 相比 专业 类 版本 。   class   Hero   ( )   :   def   addlevel   (     )   :     .   level   =     .   level   +   1     .   hp   =     .   hp   +     .   addhp   class   Garen   (   Hero   )   :   def   __ init __   (     )   :     .   level   =   1     .   hp   =   455     .   addhp   =   96     .   skill   =   [   ' 不屈 '   ,   ' 致命 打击 '   ,   ' 勇气 '   ,   ' 审判 '   ,   ' 德玛 西亚 正义 '   ]   garen001   =   Garen   ( )     i     range   (   6   )   :   print   (   ' 级别 : '   ,   garen001   .   level   ,   ' 生命 值 ： '   ,   garen001   .   hp   )   garen001   .   addlevel   ( )   print   (   ' 盖伦 技能 ： '   ,   \" \"   .   join   ( [   x   +   '   '     x     garen001   .   skill   ] ) )   级别   :   1   生命 值 ：   455   级别   :   2   生命 值 ：   551   级别   :   3   生命 值 ：   647   级别   :   4   生命 值 ：   743   级别   :   5   生命 值 ：   839   级别   :   6   生命 值 ：   935   盖伦 技能 ：   不屈   致命 打击   勇气   审判   德玛 西亚 正义   专业 做法 类 多放点 方法 ， 放 属性 ， 不太 。 确实 写给 人 感觉 更 干净 点 ， 方法 方法 ， 调用 代码 放在 不用 管它 ， 构造函数 去 查看 相关 类 构造方法 ， 很省 精力 。   类 操作 第三版   class   Unit   ( )   :   def   __ init __   (     ,   hp   ,   atk   ,   color   )   :     .   hp   =   hp     .   atk   =   atk     .   color   =   color   def   __ str __   (     )   :   return   ' 生命 值 ： { 0 } ， 攻击力 ： { 1 } ， 颜色 ： \\   { 2 } '   .   format   (     .   hp   ,     .   atk   ,     .   color   )   class   Hero   (   Unit   )   :   def   __ init __   (     ,   level   ,   hp   ,   atk   ,   color   )   :   Unit   .   __ init __   (     ,   hp   ,   atk   ,   color   )     .   level   =   level   def   __ str __   (     )   :   return   ' 级别 ： { 0 } , 生命 值 ： { 1 } ， 攻击力 ： { 2 } ， \\   颜色 ： { 3 } '   .   format   (     .   level   ,     .   hp   ,     .   atk   ,     .   color   )   def   addlevel   (     )   :     .   level   =     .   level   +   1     .   hp   =     .   hp   +     .   addhp     .   atk   =     .   atk   +     .   addatk   class   Garen   (   Hero   )   :   def   __ init __   (     ,   color   =   ' blue '   )   :   Hero   .   __ init __   (     ,   1   ,   455   ,   56   ,   color   )     .     =   ' 盖伦 '     .   addhp   =   96     .   addatk   =   3.5     .   skill   =   [   ' 不屈 '   ,   ' 致命 打击 '   ,   ' 勇气 '   ,   ' 审判 '   ,   ' 德玛 西亚 正义 '   ]     __ __   = =   ' __ main __ '   :   garen001   =   Garen   (   ' red '   )   garen002   =   Garen   ( )   print   (   garen001   )   unit001   =   Unit   (   1000   ,   1000   ,   ' gray '   )   print   (   unit001   )     i     range   (   6   )   :   print   (   garen001   )   garen001   .   addlevel   ( )   print   (   ' 盖伦 技能 ： '   ,   \" \"   .   join   ( [   x   +   '   '     x     garen001   .   skill   ] ) )   级别 ：   1   ,   生命 值 ：   455   ， 攻击力 ：   56   ，   颜色 ：   red   生命 值 ：   1000   ， 攻击力 ：   1000   ， 颜色 ：   gray   级别 ：   1   ,   生命 值 ：   455   ， 攻击力 ：   56   ，   颜色 ：   red   级别 ：   2   ,   生命 值 ：   551   ， 攻击力 ：   59.5   ，   颜色 ：   red   级别 ：   3   ,   生命 值 ：   647   ， 攻击力 ：   63.0   ，   颜色 ：   red   级别 ：   4   ,   生命 值 ：   743   ， 攻击力 ：   66.5   ，   颜色 ：   red   级别 ：   5   ,   生命 值 ：   839   ， 攻击力 ：   70.0   ，   颜色 ：   red   级别 ：   6   ,   生命 值 ：   935   ， 攻击力 ：   73.5   ，   颜色 ：   red   盖伦 技能 ：   不屈   致命 打击   勇气   审判   德玛 西亚 正义   例子 第二 版所作 改动 ， 核心 知识点 。 函数 参量 列表 中 表述   color = ' blue '   blue color 变量 备选 值 ， color 成 可选 参量 。   构造函数 继承 重载   例子 很 核心 一个 概念   __ init __   构造函数 继承 重载 。 garen001 实例 创建 ， 引用 Hero 构造函数 ， 特别强调 ，   \\   Hero .__ init __ ( , 1 , 455 , 56 , color )   调用 Hero 类 构造函数 ， 写 上 ， 最终 创建 实例 garen001 ， Hero ， 调用 Hero 类 构造函数 参量 列表 形式 。 概念 弄清楚 ！   理解 一点 ， 类 继承 关系 中 构造函数 继承 重载 好看 。 Hero 类 构造函数 继承 Unit 类 构造函数 ， Hero 类 额外 一个 参量 level 接下来 开辟 存储空间 配置 好 。   __ str __ 函数 继承 重载   第二个 修改 重 定义 类   __ str __   函数 ， 定义 改变 默认 print 类 对象 输出 。 默认 一段 类 无 具体内容 信息 。 return 一段 想要 字符串 样式 即可 。",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-xue-xi-zhi-lei.html"
        },
        {
            "title":"click模块",
            "text":"简介   click 模块 一个 类似 getopt argparse python 第三方 模块 ， 简单 ， 简直 python 快速 创建 命令行 工具 类似 requests 之于 urllib ， writed   human - friendly 。 click 官方 文档     ， 就让 学习 好 一个 模块 。   官方 文档 第一个 例子 :   import   click   @ click . command   ( )   @ click . option   (   ' - - count '   ,   default   =   1   ,     =   ' Number     . '   )   @ click . option   (   ' - - '   ,   prompt   =   ' Your   '   ,     =   ' The   person     greet . '   )   def     (   count   ,     ) :   \" \" \" Simple   program     greets   NAME     a   total     COUNT   times . \" \" \"     x     range   (   count   ) :   click   .   echo   (   ' Hello   % s   ! '   %     )     __ __   = =   ' __ main __ '   :     ( )   一切都是 很 直观 明 ，   @ click . command ( )   用来 装饰 一个 函数 ，   @ click . option   添加 命令行 选项 。 第一个 命令行 选项 名字 ，     ，   default   意义 （ 类似   type   控制 数据类型 ） 。 选项 请求 输入 值 。   click . echo   打印 操作 （ print 函数 更好 python2 3 兼容性 ， 随意 ， print 函数 ） 。   脚本 运行 情况 所示 :   wanze @ wanze - ubuntu : ~ / 桌面 $   python3   test2 . py   - -   Usage :   test2 . py   [ OPTIONS ]   Simple   program     greets   NAME     a   total     COUNT   times .   Options :   - - count   INTEGER   Number     .   - -   TEXT   The   person     greet .   - -   Show     message     exit .   函数   __ doc __   文档 成 命令行 描述性 文档 。   更棒   prompt   机制 命令行 输入 参数 兼容 :   wanze @ wanze - ubuntu : ~ / 桌面 $   python3   test2 . py   - - count = 3   - - = wanze   Hello   wanze !   Hello   wanze !   Hello   wanze !   必填 参数 ， 文件 操作 测试   必填 参数   @ click . argument ( )   装饰 添加 ， 所示 :   import   click   @ click . command   ( )   @ click . argument   (   ' input '   ,   type   =   click   .   File   (   ' rb '   ) )   @ click . argument   (   ' output '   ,   type   =   click   .   File   (   ' wb '   ) )   def   inout   (   input   ,   output   ) :     True   :   chunk   =   input   .   read   (   1024   )       chunk   :   break   output   .   write   (   chunk   )     __ __   = =   ' __ main __ '   :   inout   ( )     click . File ( )   接受 一个 文件名 ， 打开 ， 函数 一个 文件 对象 。 文件 推荐 click 模块 类型 ， Unicode bytes 好 ， 优化 。   click . Path   类型 ， 函数 相当于 一个 优化 Path 文件名 ， 提供 Unicode bytes 兼容 支持 。   @ click . command   ( )   @ click . argument   (   ' f '   ,   type   =   click   .   Path   (   exists   =   True   ) )   def   touch   (   f   ) :   click   .   echo   (   click   .   format _ filename   (   f   ) )   例子 中 脚本 写 上 :     __ __   = =   ' __ main __ ' :   inout ( )   脚本 测试 :   bash > > >   python3   test5 . py   test . py   output . txt   更好 做法 测试 式 开发 风格 :   import   click     click . testing   import   CliRunner   def   test _ inout   ( ) :   @ click . command   ( )   @ click . argument   (   ' input '   ,   type   =   click   .   File   (   ' rb '   ) )   @ click . argument   (   ' output '   ,   type   =   click   .   File   (   ' wb '   ) )   def   inout   (   input   ,   output   ) :     True   :   chunk   =   input   .   read   (   1024   )       chunk   :   break   output   .   write   (   chunk   )   runner   =   CliRunner   ( )     runner   .   isolated _ filesystem   ( ) :   string   =   ' Hello   World ! '     open   (   ' . txt '   ,   ' w '   )     f   :   f   .   write   (   string   )   result   =   runner   .   invoke   (   inout   ,   [   ' . txt '   ,   ' hello2 . txt '   ] )   assert   result   .   exit _ code   = =   0     open   (   ' hello2 . txt '   ,   ' r '   )     f   :   s   =   f   .   read   ( )   assert   s   = =   string     __ __   = =   ' __ main __ '   :   test _ inout   ( )   新建 一个   CliRunner   对象 ， 调用   invoke   方法 执行 命令 ，   Result   对象   exit _ code     output   属性 。   result . output   屏幕 回显 文字 。   runner 调用   isolated _ filesystem ( )   方法 ， 暂停 程序 会 发现   / tmp   文件夹 会 一个 临时 文件夹 ， 文件 操作 都 ， 完 会 删除 。   标准 输入 标准 输出   值得一提的是 标准 输入 标准 输出   ' - '   简单 。 例子 :   bash > > >   python3   test4 . py   -   output . txt   test   test   bash > > >   python3   test4 . py   test . py   -   标准 输入 例子 按下   Ctrl - D   结束 文件 流 。   分组 多个 子 命令   click 模块 分组 建立 多个 子 命令 功能 上 设计 很 简洁 :   import   click   @ click . group   ( )   def   cli   ( ) :   pass   @ cli . command   ( )   def   initdb   ( ) :   click   .   echo   (   ' Initialized     database '   )   @ cli . command   ( )   def   dropdb   ( ) :   click   .   echo   (   ' Dropped     database '   )     __ __   = =   ' __ main __ '   :   cli   ( )     @ click . group   定义 命令 组 ， 命令 组 函数 command 方法   @ cli . command ( )   添加 子 命令 。   命令行 选项 详解   click 模块 必填 参数   argument ( )   引入 ， 选 参数   option ( )   引入 ， 值得一提的是 两个 函数 参数 不 ， 比如说 option   prompt   当该 可选 参数 输入 ， 请求 输入 ； argument 无此 概念 。 更 细节 请 参看 请求 输入 小节 。   default   设置 默认值 ， argument 必填 参数 无此 概念 。   type   控制 数据类型 ， 都 。   接受 多个 输入   nargs   设置 大于 等于 1 值 ， 命令行 中要 刷入 多值 ， argparse 模块 类似 ， 不定量 多个 值 情况   nargs = - 1   ， 相当于 内置 模块 argparse   *   。 argparse   +   一个 值 情况 ， 额外 加上   required = True   控制 。   count   option ， 某种 情景 下 很 有用 。   @ click . command ( )   @ click . option ( ' - v ' ,   ' - - verbose ' ,   count = True )   def   log ( verbose ) :   click . echo ( ' Verbosity :   % s '   %   verbose )   $   log   - vvv   Verbosity :   3   布尔值   默认   default = True   设置 ， 默认 存储 布尔值 ， 实际上 暗含 加上   _ flag = True   。 设置 default ，   _ flag   控制 存储 布尔值 。   短名 选项 长名 选项 布尔值   import   sys   @ click . command   ( )   @ click . option   (   ' - - shout / - - - shout '   ,   '   / - S '   ,   default   =   False   )   def   info   (   shout   ) :   rv   =   sys   .   platform     shout   :   rv   =   rv   .   upper   ( )   +   ' ! ! ! ! 111 '   click   .   echo   (   rv   )   bash   > > >   python3   test   .   py   linux   bash   > > >   python3   test   .   py   - -   shout   LINUX   ! ! ! !   111   bash   > > >   python3   test   .   py   -   S   linux     /   分割 语句 创建 多个 flag 布尔值 控制 ，   /   左边 True ， 右边 False ， 短名 选项 跟着 写入 。     例子 短名 情况 空格 少 。   多个 choice 选项 用法   @ click . command   ( )   @ click . option   (   ' - - hash - type '   ,   type   =   click   .   Choice   ( [   ' md5 '   ,   ' sha1 '   ] ) )   def   digest   (   hash _ type   ) :   click   .   echo   (   hash _ type   )   请求 输入 prompt 控制   option 才 概念 。 最 简单 情况 所示 :   @ click . command   ( )   @ click . option   (   ' - - '   ,   prompt   =   ' Your     '   )   def     (     ) :   click   .   echo   (   ' Hello   % s   ! '   %     )   弹 出 提示 输入   - - =   给出 值时 才 会 。   请求 输入 密码   所示 :   @ click . command   ( )   @ click . option   (   ' - - password '   ,   prompt   =   True   ,   hide _ input   =   True   ,   confirmation _ prompt   =   True   )   def   encrypt   (   password   ) :   click   .   echo   (   ' Encrypting   password     % s   '   %   password   .   encode   (   ' rot13 '   ) )   额外 加上 两个 选项 控制 :   hide _ input = True     confirmation _ prompt = True   。 组合 简单 写为 :   @ click . command   ( )   @ click . password _ option   ( )   def   encrypt   (   password   ) :   click   .   echo   (   ' Encrypting   password     % s   '   %   password   .   encode   (   ' rot13 '   ) )   请求 默认值 控制   请求 prompt   default   设置 默认值 ， 那种 情况 下 按下 Enter 相当于 输入 默认值 。 还 获取 系统 环境 下 值 默认值 。   @ click . command   ( )   @ click . option   (   ' - - username '   ,   prompt   =   True   ,   default   =   lambda   :   os   .   environ   .     (   ' USER '   ,   ' '   ) )   def     (   username   ) :   print   (   \" Hello , \"   ,   username   )   click 模块 还 提供 prompt 快捷 请求 输入 命令 。     =   click . prompt ( ' Please   enter   a   valid   integer ' ,   type = int )     confirm   函数 很 有用 :     click . confirm ( ' Do         continue ' ) :   click . echo ( ' Well   ! ' )   全局 环境变量 控制   命令行 选项 控制 动作   所示 ，   _ eager = True   选项 优先级 高于 选项 。   expose _ = False   输入 选项 ， 不 影响 原 命令 执行 流 。   callback   跳转 函数 上 。   def   print _ version   (   ctx   ,   param   ,     ) :           ctx   .   resilient _ parsing   :   return   click   .   echo   (   ' Version   1.0 '   )   ctx   .   exit   ( )   @ click . command   ( )   @ click . option   (   ' - - version '   ,   _ flag   =   True   ,   callback   =   print _ version   ,   expose _   =   False   ,   _ eager   =   True   )   def     ( ) :   click   .   echo   (   ' Hello   World ! '   )   最 关键性 理解   ctx   param       几个 参数 。   带 颜色 终端 回显   click 借助 python 模块   colorama   力量 终端 显示 带 颜色 字体 功能 ， 确认   colorama   :   pip   install   colorama   简单 :   import   click   click   .   secho   (   ' Hello   World ! '   ,   fg   =   ' green '   )   click   .   secho   (   ' Some     text '   ,   bg   =   ' white '   ,   fg   =   ' black '   )   click   .   secho   (   ' ATTENTION '   ,   blink   =   True   ,   bold   =   True   )   fg 前景 颜色 ， 说 字体 颜色 ， 颜色 选项 :   Fore :   BLACK ,   RED ,   GREEN ,   YELLOW ,   BLUE ,   MAGENTA ,   CYAN ,   WHITE .   bg 背景 颜色 :   Back :   BLACK ,   RED ,   GREEN ,   YELLOW ,   BLUE ,   MAGENTA ,   CYAN ,   WHITE .   style :   dim = True   bold = True   blink = True   underline = True   reverse = True   dim 淡化 ， bold 加粗 ， blink 闪烁 ， 没 效果 。 underline 下划线 ， reverse 前景色 背景色 翻转 。",
            "tags":"python好伙伴",
            "url":"articles/click-module.html"
        },
        {
            "title":"emacs学习笔记",
            "text":"打开 emacs 输入 文本 一刻起 ， 入门 。 emacs 说到底 一个 功能 特别 强大 文本编辑 器 ， 角色 文本编辑 器 ， 一切都是 围绕 展开 。   最 快捷键 操作   快捷键 最 C M 两个 字母 ， C Control 键 ， M Alt 键 。   C - w   按下 Control 键 w 字母 。   C - x   C - c   有个 空格 ， 先 Ctrl + 字母 x ， 再 停顿 ， 再 Ctrl + 字母 c — — 这是 退出 emacs 命令 。   S Shift 键 ， 小写 s Super 键 下 ，   C - x   0   关闭 窗口 ，   C - x   1   只留 一个 窗口 ，   C - x   2   新开 一个 窗口 ，   C - x   3   右边 新开 一个 窗口 ，   M + x   执行 emacs   lisp 内部 命令 ，   C - g   取消 minibuff 中 输入 ， 都 很 ， 读者 请 记住 。   查找 替换   查找 替换 操作 用到 ， 快捷键 记住 。 后 查找 按键   C - s   ， 看 快捷键 简短 ， 这是 一个 很 快捷键 。 向前 查找   C - r   。 向前 后 查找   C - s     C - r   。   替换 操作 按键   M - %   , 先 输入 匹配 字符串 ， 输入 替换成 ， 接下来   按键   y   替换 ， 按键   n   不 替换 ， 按键   !   替换 。   lisp 语法 简介   接下来 讨论 ， 先 简单 介绍 下 lisp 语法 ， 读者 学会 lisp 语言 ， 接下来 接触 最 emacs   lisp 语法 感到恐惧 。   例子 读者 兴趣 elisp 交互 环境 试验 ， 按键 ：   M - x   ielm   lisp 语言 一大 特色 程序 数据 都 列表 ，   ' ( 1 ,   2 ,   3 )   形式 。   引号 很 关键 ， 输入 lisp 字符串 都 会 eval ， 加个 引号 ， 东西 eval 成 ( 1 ,   2 ,   3 ) 形式 （ 去掉 引号 ） ， 列表 数据 。   ？   x   ' x   x 送入 eval ， 将会 发生 寻址 操作 ， 成 变量 ； 第二个 x 加上 引号 ， eval ， 去掉 引号 ， x 形式 ， x 看作 字符串 ， 送入 eval ， x 字符串 变量 。   lisp 中 程序 结构 一系列 数学 结构 类似 括号 ， 学过 数学 括号 结构 都 ， 先算 再 算 外面 … … . ， 最终 算成 形式   ( +   1   1 )   lisp 实际上 类似 运算 ， ( +   1   1 ) 送入 lisp 运算 会 2 。 lisp 结构 一个 原则 ， 总 括号 第一个 元素 一个 函数 ， ， 将会 发生 错误 。 东西 都 一系列 管他什么 参数 。   再 讲讲 设置 变量 定义 函数 。   设置 变量   设置 变量 两个 方法 ， 方便使用 setq 。   ( set   ' x   1 )   ( setq   x   1 )   set setq 区别 引号 ， setq 不 加上 引号 ， 第一个 元素 字符 形式 总 视作 变量 。   定义 函数   最 简单 形式 所示 ：   ( defun   add   ( x   y )   ( +   x   y ) )   定义 一个 add 函数 ， ( add   x   y ) 实际上 执行 ( +   x   y   ) 。   最 简单 lisp 语法 简介 ， 还会 接触 ， 内容 还 很 ， 够 探索 。   最 配置   利用 emacs 菜单 选择 主题 相关 配置 ， 设置 保存 好 。 吐槽 ， emacs24 都 还 一个 汉化 方案 ， 几个 菜单 汉化 工作 难 ？ 照顾 新手 。   好 主 文件夹 . emacs 文件   1   ， 不出意外 读者 会 一个   custom - set - variables   配置 ， 读者 Enter 键 推到 最 ， 配置 放在 ， 其内 记录 刚才 主题 配置 打开 向导 界面 ， 留着 。   smex 插件   文档 讨论 插件 ， smex 插件 真的 有用 ， emacs 插件 安装 例子 。 编写 插件 一个 el 文件 ， 其内 elisp 语言 代码 ， 熟悉 elisp 语法 ， 编写 插件 很 简单 事 。   smex 官方 github 站     , 看 介绍 大致 差不多 。   git   clone ， 很小 一个 文件 ， 单独 下载 smex . el 文件 ， 文件 放在 一个 喜欢 地方 上 ， 放在 \" ~ / 工作 空间 / emacs / \" 。   . emacs 文件 中 代码 ：   ; smex 插件 设置   ; 新 搜索 路径   (   add - - list   ' load - path   \" ~ / 工作 空间 / emacs / smex \"   )   (   require   ' smex   )   ; 加载 模块   (   global - set - key   (   kbd   \" M - x \"   )   ' smex   )   (   global - set - key   (   kbd   \" M - X \"   )   ' smex - major - mode - commands   )   ; ;   This         M - x .   (   global - set - key   (   kbd   \" C - c   C - c   M - x \"   )   ' execute - extended - command   )   详细 讲解 。   add - - list   一个 函数 ， 接受 一个 列表 变量 ， 一个 元素 列表 中 。   请 看 例子 ，   nil   一个 空 列表 ：   ELISP >   ( set   ' x   nil )   nil   ELISP >   x   nil   ELISP >   ( add - - list   ' x   1 )   ( 1 )   ELISP >   ( add - - list   ' x   2 )   ( 2   1 )   ELISP >   ( add - - list   ' x   3 )   ( 3   2   1 )     load - path   变量 放着 emacs 加载 插件 时 搜索 路径 ， 一个 新 smex 插件 所在 路径 加进来 ， 路径 放着 目标 el 文件 。   加载 新 插件 \" \" ， 大致 类似 配置 语句 ：   ( add - - list   ' load - path   \" ~ / 工作 空间 / emacs / \" )   . el 放入 emacs 文件夹 里 文件夹 即可 。   接下来 加载 插件 ：   ( require   ' smex ) ; 加载 模块   require   函数 跟着 插件 名字 ， smex . el 文件 。   自定义 按键 配置   接下来 进一步 按键 配置 ：   ( global - set - key   ( kbd   \" M - x \" )   ' smex )   ( global - set - key   ( kbd   \" M - X \" )   ' smex - major - mode - commands )   ; ;   This         M - x .   ( global - set - key   ( kbd   \" C - c   C - c   M - x \" )   ' execute - extended - command )   自定义 按键 配置 方式 用来 随意 配置 学到 命令 。   global - set - key   函数 跟着   kbd   函数 按键 字符 封装 ， 第一个 元素 看作 按键 ， 第二个 元素 看作 调用 命令 。   第一个 命令 ， 下 Alt + x 按键 ， 将会 触发 smex 命令 。 谈及 Alt + x 命令 实际上   execute - extended - command   ， 配置 ， 按键 才能 激活 ， 等于 打入冷宫 。     smex 插件 用处 ， 打开 emacs ， 按下 M - x ， 会 很多 选项 ， 正是 smex 插件 功能 ， 输入法 ， 很 有用 。   输入 想要 命令 几个 字母 ， smex 会 给出 提示 ， 下 Tab 键 即可 自动 补全 ， smex 输入法 会 记录 操作 习惯 。 enter 输入 第一个 候选 项 ， 方向键 右 第二个 候选 项 变为 第一个 候选 项 ， 方向键 左 ， 方向键 切换 历史记录 。   ， smex 久 ， 会 输入法 输入 命令 速度 会 快 ， 选择 自定义 按键 配置 绑定 新 按键 。   命令 一览   set - default - font :   设置 默认 字体   set - frame - attribute :   设置 默认 字体大小   两个 命令 放入 . emacs 文件 中 ， 配置 全局 配置 。   ( set - default - font   \" DejaVu   Sans   Mono \" ) ; 设置 默认 字体   ( set - frame - attribute   ' default   nil   : height   110 ) ; 设置 默认 字体大小 11pt   toggle - frame - maximized :   窗口 最大化   . emacs 文件 emacs 打开 窗口 最大化 。   命令 只 emacs24.4 + 版本 。   ( toggle - frame - maximized )   emacs24.4 版本 想 启动 窗口 最大化 ， 参考   网站   ， emacs 初始化 脚本 上 加上 一句 即可 ：   (   add - - list   ' default - frame - alist   '   (   fullscreen   .   maximized   ) )   global - linum - mode :   左侧 显示 行号   . emacs 文件 中 emacs 左侧 永远 显示 行号 ， 参考   网页   。   ( global - linum - mode   t )   global - visual - line - mode :   显示 段落 自动 换行   . emacs 文件 中 emacs 显示 文件 段落 会 自动 换行 。   ( global - visual - line - mode   t )   - - tutorial :   默认 按键 \" C - h   t \" ， 打开 新手 教程   describe - key :   默认 按键 \" C - h   k \" ， 描述 按键   describe - function :   默认 按键 \" C - h   f \" ，   描述 函数   describe - variable :   默认 按键 \" C - h   v \" ， 描述 变量   三个 函数 学习 emacs   lisp 很多 内部 知识 ， 一条 不错 获取信息 来源   2   。   \" C - x   1 \" 按键 命令 ：   delete - - windows :   默认 按键 \" C - x   1 \" ， 关闭 窗口   split - window - :   默认 按键 \" C - x   2 \" ， 新开 一个 窗口   split - window - :   默认 按键 \" C - x   3 \" ， 右边 新开 一个 窗口   delete - window :   默认 按键 \" C - x   0 \" ， 删除 窗口   emacs   lisp 很多很多 内容 ， 学习 参看 手册 。   DIY 之门   几个 命令 很 常用 ， 定义 简短 一点 命令   kill - buffer :   默认 按键 \" C - x   k \" ， 关闭 buffer 。   switch - - buffer :   默认 按键 \" C - x   b \" ， 切换 buffer 。   find - file :   默认 按键 \" C - x   C - f \" ， 打开 文件   save - buffer :   默认 按键 \" C - x   C - s \" ， 保存 buffer ， 或者说 意义 上 保存 文件 。   save - - buffers :   默认 按键 \" C - x   s \" ， 保存 buffer ， 或者说 保存 文件 。   save - buffers - kill - terminal :   默认 按键 \" C - x   C - c \" ， 退出 emacs 。   defun 定义新 函数 ， 采用 一种 简单 机制 defalias 原函数 取 一个 新 名字 ：   ( defalias   ' open   ' find - file )   ( defalias   ' save   ' save - buffer )   ( defalias   ' saveall   ' save - - buffers )   ( defalias   ' kill   ' kill - buffer )   ( defalias   ' buffer   ' switch - - buffer )   再 emacs ， 发现 smex 一个 open 命令 ， ， 原有 find - file 命令 还 。   初步 试验 一点 ， 接下来 DIY 之门 ， 编写 插件 ， 很大 一部分 编写 函数 。 elisp 语言 很多 内容 ， 章节 就此结束 。   术语   术语   frame :   emacs 图形界面 终端 界面   menu :   frame 上方 菜单栏   tool :   菜单栏 工具栏   echo :   主 编辑 窗口 响应 信息 ， minibuffer 显示 。   window :   tool echo 主 区域 window 区域 ， emacs 分出 很多 window ， 指 window 选中 window ， emacs 很多 buffer ， 选中 window buffer current   buffer 。   buffer :   一个 window 编辑 一个 buffer   scroll   bar :   window 一个 scroll   bar   mode   line :   window 一行 mode   line   格式 :   cs : ch - fr   buf   pos   line   ( major   minor )   point :   window 下 cursor 位置 point ， emacs 光标 覆盖 frob o 上 ， point 位置 r o 之间 。   按键 术语   按键   a   B   SPC （ 空格 ）   RET （ 回车 ）   TAB   DEL   ESC   F1   HOME   LEFT   组合 按键   Control   (   labeled   Ctrl ) ,     META   (   labeled   Alt )   C - a   按下 Control a   ， M - a   按下 Alt a 。   多个 按键 组合   C - x   C - f   key   sequence   ， 顺序 按下 键 组合 。   光标     C - n   下 一列 ， 执行命令   ( - line )   C - f   ( forward - char )   M - f   ( forward - word )   C - b   ( backward - char )   M - b   ( backward - word )   C - p   ( previous - line )   C - a   ( move - beginning - - line )   C - e   ( move - end - - line )   C - x   C - s   ( save - buffer )   C - x   C - f   ( find - file )   C - x   u   undo     F10   执行 menu - bar - open 命令 ， 图形界面 键盘 方向键 选定 ， 终端 界面 辅以 文字 选定 。     C - g   退出 minibuffer     C - x   C - c   退出 Emacs   ( save - buffers - kill - terminal )     C - k   ( kill - line )   删除 本行   tab 都 自动 换成 space   参考 网页 ：   NoTabs   . emacs 文件 里 代码 ：   ( setq - default   indent - tabs - mode   nil )   80 列 规则   控制 代码 不 超过 80 列是 一个 好 习惯 ， 起到 控制 写出 缩进 过于 代码 冲动 ， 写 代码 复制粘贴 很 好 网页 pdf 文档 上 显示 。   配置文件 ：   (   add - - list   ' load - path   \" ~ / 工作 空间 / myemacs / fill - column - indicator \"   )   (   require   ' fill - column - indicator   )   (   define - globalized - minor - mode   global - fci - mode   fci - mode   (   lambda   ( )   (   fci - mode   1   ) ) )   (   global - fci - mode   t   )   (   setq   fci - rule - column   80   )   (   setq   fci - rule - color   \" light   green \"   )   该宏包 github 地址     ， 该宏包 emacswiki 地址     。 代码 第五 行是 设置 列宽 80 ， 第六 行是 设置 竖线 颜色 。   第三行 第四行 配置 模式 下 都 会 显示 竖线 ， 看 作业 文档 ， python 脚本 编程语言 ， 设置 没什么 不妥 。 作业 文档 是非 编程语言 org 模式 ， 推荐 单独 设置 。   (   add - hook   ' c - mode - hook   ' fci - mode   )   (   add - hook   ' c++ - mode - hook   ' fci - mode   )   (   add - hook   ' python - mode - hook   ' fci - mode   )   (   add - hook   ' emacs - lisp - mode - hook   ' fci - mode   )   python 模式   python 模式 推荐   python - mode   宏包 内置   python . el   。 宏包 下载     ， 简单 设置   C - c   C - c   运行 python 文件 交互 模式 ， 很 。 这次 默认 python3 ， 很 满意 。 不 python 文件 第一行   # ! / usr / bin / env   python3   python - mode . el 猜到 ， 简单 默认 调用 python3 。 设置 设置 python2 ， 该宏包 github 地址     ， 再 网络 搜索 找寻 答案 。   (   add - - list   ' load - path   \" ~ / 工作 空间 / myemacs / python - mode \"   )   ; 新 搜索 路径   (   require   ' python - mode   )   分 窗口 控制   参考   网页   ， 希望 运行   C - c   C - c   ， 弹出 窗口 平行 模式 ， 模式 ， 设置 :   (   setq - default   py - split - windows - - execute - function   ' split - window - horizontally   )   效果 图 所示 :   快速 删除 一行   快捷键   C - k   ， 命令   org - kill - line   。 emacs 中 kill 概念 还 不太熟悉 ， 表面 来看 效果 是从 光标 位置 行尾 字符 都 删除 ， 很 有用 。     kill   字符串     C - y   召回 。   快速 启动 emacs   先   emacs   - - daemon   命令 启动 一个 后台 服务器 ， 命令 . bashrc 文件 中 每次 启动 自动 运行 。   系统 desktop 文件 （   / usr / share / applications   找到 ， 用户 主 文件夹   . local / share / applications   再 新建 一个 。   ） 修改 :   Exec = / usr / bin / emacsclient   - c   - a   \" \"   % F   本来   emacs   % F   ， 改为 emacsclient ，   - c   参数 启动 图形界面 。 - a 参数设置 为空 字符串 ， 建立 一个 emacs 后台 服务器 ， 会 自动 创建 一个 。 双击 emacs 关联 文件 自动 快速 emacsclient 打开 。 读者 尝试 ， emacs 打开 文件 确实 很快 ， 带来 。   关闭 frame   emacs   daemon 一个 后台 进程 ，   ps   aux   | grep   emacs   查看 ， emacsclient 建立 frame 窗口 都 关闭 ， emacs 后台 daemon 。   emacsclient 编辑 一个 文件 ， 保存 提示 关闭 ， 没什么 ， emacsclient 打开 buffer 都 ， 编辑 内容 丢失 ， 很 不 符合 用户 习惯 。   查看 进程 号 kill emacs   daemon 进程 做法 ， emacs 输入 命令   kill - emacs   关闭 emacs 后台 服务 进程 ， 方法 。 手工 kill   emacs 后台 服务 进程 操作 ， 调试 ，   emacs   test . org   方式 启动 一个 meacs 进程 调试 。   接下来 不 emacs ， 正确 关闭 emacs 做法 快捷键   C - x   C - c   ， 函数   save - buffers - kill - terminal   ， 快捷键 接触 ， 一个 完整 emacs 进程 中 ， 退出 emacs 命令 ， 确保 buffer 都 保存 ， 退出 。 值得一提的是 函数 关闭 emacs 后台 服务 进程 ， 实际上 熟悉 emacsclient 操作 ， 去 emacs   daemon 概念 ，   C - x   C - c   退出 emacs 命令 即可 。   关闭 buffer 操作 ， 简单 点击 窗口 关闭 图标 ， 关闭 frame ， buffer 。 编辑 完 想要 关闭 buffer ， 执行   kill - buffer   即可 ， 文档 保存 其会 提示 ， 还会 提示 关闭 frame 。   字体   emacs   daemon 启动 图形界面 ， 字体 设置 失效 ， 设置   3   :   ; ;   解决 client 模式 下 字体   (   defun   myfontset   ( )   (   interactive   )   (   set - default - font   \" DejaVu   Sans   Mono \"   )   ; 设置 默认 字体   (   set - face - attribute   ' default   nil   : height   110   )   ; 设置 默认 字体大小 11pt   )   (   add - hook   ' - make - frame - functions   (   lambda   (   frame   )   (   select - frame   frame   )   ;   (   myfontset   ) ) )   思路 frame 加载 再 加载 字体 配置 。   左侧 文件 树 面板   IDE 一个 特色 左侧 一个 文件 树 面板 ， 快速 切换 文件 ， emacs 下 neotree 宏包 类似 功能 。 该项 目的 github 地址     。   很 简单 ， 常规 加载 :   ( add - - list   ' load - path   \" / / path / neotree \" )   ( require   ' neotree )   ( global - set - key   [ f8 ]   ' neotree - toggle )   按下 F8 快速 切换 文件 树 面板 。   pdf 文件 打开 卡住   emacs docview 功能 看 pdf 文件 ， 会 带来 很大 便利 ， 打开 pdf 文件 卡 ，   doc - view - continuous   设置 nil 稍微 缓和 。   ( custom - set - variables   ' ( doc - view - continuous   nil )   )     neotree 项目 看得出来 很多 地方 进一步 完善 ， 比如说 emacsclient 模式 下 根目录 读取 。   多个 窗口 之间 编号 切换   window - numbering 宏包 不错 ， github 项目 地址     。 该宏包 窗口 编号 ，   M - 1   快速 切换 窗口 焦点 。   官方 推荐 一个 配置 所示 :   ( setq   window - numbering - assign - func   ( lambda   ( )   (   ( equal   ( buffer - )   \" * Calculator * \" )   9 ) ) )   还 加上 一句 :   ( window - numbering - mode )   开启 编号 模式 ， 效果 图 所示 :   更 多窗口 操作 知识 请 参看   网页   ， 介绍 挺 好 。   markdown 模式   markdown - mode 宏包 emacs markdown 渲染 ， 类似 org 模式 折叠 功能 。 github 项目 地址     。   简单 配置 即可 :   ( add - - list   ' load - path   \" ~ / 工作 空间 / myemacs / markdown - mode \" )   ( autoload   ' markdown - mode   \" markdown - mode \"   \" Major   mode     editing   Markdown   files \"   t )   ( add - - list   ' auto - mode - alist   ' ( \" \\ \\ . text \\ \\ ' \"   .   markdown - mode ) )   ( add - - list   ' auto - mode - alist   ' ( \" \\ \\ . markdown \\ \\ ' \"   .   markdown - mode ) )   ( add - - list   ' auto - mode - alist   ' ( \" \\ \\ . md \\ \\ ' \"   .   markdown - mode ) )   用法 Tab 折叠 功能 外 ， 再 慢慢 ， 会 不到 ， 介绍 重头戏 ， markdowon 实时 预览 功能 。   markdown 实时 预览   emacs - livedown 宏包 利用 nodejs livedown 模块 功能 ， markdown 文档 实时 显示 网页 端 。 github 项目 地址     。   安装 npm ， npm 安装 livedown 。   sudo   npm   install   livedown   做 配置 :   (   custom - set - variables   ' ( livedown : autostart   t )   ;   automatically   open   preview     opening   markdown   files   '   (   livedown   :   port   1337   ) )   ;   port     livedown   server   ;   nodejs 服务 端口   (   add - - list   ' load - path   \" ~ / 工作 空间 / myemacs / emacs - livedown \" )   ( require   '   livedown   )   emacs 双击 一个 md 文件 ， 网页 端 显示 渲染 好 网页 ， livedown 本身 支持 实时 md 文件 实时 更新 。 上 图片吧 :   emacsclient 下 开启 一个 frame 还 执行 命令   livedown : preview   网页 才 会 切换 md 预览 。   文字 模式 下 emacs 操作   ssh 远程 主机 上用 emacs 编辑 文件 ， 文字 模块 下 操作 emacs ， 带来 新 。   光标   参考   网页   。   键盘 上 方向键 辅助 搜索 跳转 很快 ， 不知 方向键 会 出 。 这是 只好 借助 快捷键 。   C - f   一个 字符   C - b   后退 一个 字符   C - p   上移 一行   C - n   下移 一行   M - f   一个 单词   M - b   后退 一个 单词   C - a   行首   C - e   行尾   切换 窗口 焦点   提过 ， 一个 ， 再次 。   C - x   o   切换 窗口 操作 。   Footnotes :   1   一个 隐藏 配置文件 ， 每次 运行 emacs 都 会 先 加载 。   2   参考 [ mastering - emacs - - - year - guide ] ( https : / / github . / redguardtoo / mastering - emacs - - - year - guide / blob / master / guide - zh . org )   3   参考 [   网页 ] ( http : / / floss . zoomquiet . io / data / 20120229104733 / index . html )   。",
            "tags":"others",
            "url":"articles/emacs-learning-notes.html"
        },
        {
            "title":"requests模块",
            "text":"urllib . request 内置 模块   urllib . request 模块 稍微 ， 介绍   requests   模块 。   urlopen 函数   urlopen 函数 urllib 模块 request 子 模块 ， 提供 简单 获取 目标 url 网页内容 接口 。 一个 简单 例子 所示 ：     urllib . request   import   urlopen   import   socket   socket   .   setdefaulttimeout   (   10   )   urls   =   [   ' https : / / www . google . . cn '   ,   ' https : / / www . google . '   ,   ' http : / / www . google . . cn '   ]     url     urls   :     :   response   =   urlopen   (   url   )   html   =   response   .   read   ( )   .   decode   (   ' utf - 8 '   )   print   (   html   )     socket   .   timeout     error   :   print   (   error   )     OSError     error   :   print   (   error   )   刚 一个 稍显 例子 演示 ， ， 天朝 网络 特色 。 百度 url   http : / / www . baidu .   ， 大部分 情况 下 都 不用 操心 ， 处在 天朝 网络 大 背景 下 ， 早点 介绍 。 例子 返回 error 种类 间接 GFW 工作 原理 。   google . . cn https 连接 还 工作 （ 暂时 。 。 ） ， 会 慢 ， http 连接 会 返回 404 错误 ， 这是 天朝 网络 常见 网络 错误 ， 分析 GFW dns 投毒 。 google . 连接 http https 连接 都 会 返回 OSError 错误 ， 说 ： Network     unreachable ， GFW 后缀 google . url 硬件 级别 网络 掐断 。   urlopen 函数 第一个 参数 url 连接 不用 说 ， 很多 可选项 ， 很 参数   timeout   参数 ， socket 套 接字 工作 模式 相关 。 不 加上 timeout 参数 ， 墙 网站 会 尝试 程序 陷入 卡死 状态 。 会 介绍   urlretrieve   函数 ， urllib . request 模块 ， 函数 用于 网络 下载 东西 ， 内置 timeout 参数 ， 设置 全局 网络 socket timeout （ socket 模块 setdefaulttimeout 函数 ） ， 全局 timeout 设置 稍微 大 一点 。   套 接字 socket timeout 参数 控制 阻塞 时间 ， 网络 数据 不 传递 完 ， 好比 下载 过程 时间 ， timeout 控制 下载 时间 ， 超过 时间 返回 错误 。 有个 ， 程序 默认 全局 socket timeout 都 设置 10 秒 ， 会 urlretrieve 函数 下载 东西 ， 本身 超过 10 秒 ？ 参看 requests 文档     ， timeout 很 好 解释 ， 说 timeout 仅 连接 过程 ， 响应 体 下载 无关 。   网络 上 情况 比较复杂 ， 网络 异常 回避 话题 。 一个 简单 读取 网页 程序 跟上 异常 捕捉 ， 偏执 追求 程序 健壮 ， 做 工作 。   返回   urlopen 函数 返回 urllib . response 模块 Response 对象 ， 提供 简单 文件 风格 操作 接口 ，   read ( )   方法 ，   readline ( )   方法 ， 记住 read 返回   bytes 流   。   Response 对象   geturl ( )   方法 ， 返回 url 字符串 ，   info ( )   方法 ， 返回 一个 字典 值 ， 网页 信息 。 请 读者 试验 。   HTTPError URLError 异常     urllib . error   import   HTTPError   HTTPError URLError 子类 ， URLError OSError 子类 ， OSError 加载 模块 引用 ， 简单 OSError 捕捉 。   ContentTooShortError 异常     urllib . error   import   ContentTooShortError     urlretrieve   函数 下载 数据量 少于 预期 数据量 时 返回 错误 。   访问 网页 401   error   路由器 为例   192.168 . 1.1     192.168 . 0.1   ， 小 脚本 稍作 修改 ：     urllib . request   import   urlopen     urllib . error   import   HTTPError   import   socket   socket   .   setdefaulttimeout   (   10   )   url   =   ' http : / / 192.168 . 1.1 '     :   response   =   urlopen   (   url   )   html   =   response   .   read   ( )   .   decode   (   ' utf - 8 '   )   print   (   html   )     socket   .   timeout     error   :   print   (   url   ,   error   )     HTTPError     error   :     error   .   code   = =   401   :   print   (   url   ,   '     password ,     401   error '   )     :   print   (   url   ,   error   )     OSError     error   :   print   (   url   ,   error   )   运行 会 返回 ：   http : / / 192.168 . 1.1     password ,     401   error   返回 401 异常 ， 网页 网页 认证 才能 访问 。 一个 简单 小 脚本 附带 网页 认证 功能 ：     urllib . request   import   build _ opener   ,   HTTPBasicAuthHandler   ,   urlopen   import   urllib     urllib . error   import   HTTPError   import   getpass   import   socket   socket   .   setdefaulttimeout   (   10   )   url   =   ' http : / / 192.168 . 1.1 '     True   :   username   =   input   (   \" Username : \"   )   .   rstrip   ( )   password   =   getpass   .   getpass   ( )   .   rstrip   ( )   print   (   ' ... '   ,   username   ,   password   )   auth _ handler   =   HTTPBasicAuthHandler   ( )   auth _ handler   .   add _ password   (   realm   =   ' '   ,   uri   =   ' '   ,   user   =   username   ,   passwd   =   password   )     :   opener   =   build _ opener   (   auth _ handler   )   urllib   .   request   .   install _ opener   (   opener   )   ### install     gloably     urlopen         response   =   urlopen   (   url   )   print   (   ' I   found   '   ,   username   ,   password   )   break     socket   .   timeout     error   :   print   (   url   ,   error   )     HTTPError     error   :     error   .   code   = =   401   :   print   (   url   ,   '     password ,     401   error '   )     :   print   (   url   ,   error   )     OSError     error   :   print   (   url   ,   error   )   getpass 内置 模块 getpass 函数 提供 终端 输入 密码 不 显示 功能 。   build _ opener ( )   函数 ， 接受 一系列 handler ，   HTTPBasicAuthHandler   创建 一个 handler 实例 ，   add _ password   方法 用户名 密码 属性 ， realm uri 还 不 。 认证 网页 head 。   调用 urllib 子 模块 request   install _ opener   函数 ， 全局性 安装 openr ， urlopen 函数 会 opener 。 不 做 ， opener . open 单独 打开 一个 response ， 不 推荐 。   加上 代理 功能 翻墙   修改 最初 第一个 例子 ， 代理 功能 ， 理论 上 写 ， 效果 ， GFW 很 强大 。 。     urllib . request   import   urlopen   ,   build _ opener   import   urllib   import   socket   socket   .   setdefaulttimeout   (   10   )   urls   =   [   ' https : / / www . google . . cn '   ,   ' https : / / www . google . '   ,   ' http : / / www . google . . cn '   ]   proxy _ handler   =   urllib   .   request   .   ProxyHandler   ( {   ' http '   :   ' http : / / 127.0 . 0.1 : 8580 / '   } )   opener   =   urllib   .   request   .   build _ opener   (   proxy _ handler   )   urllib   .   request   .   install _ opener   (   opener   )     url     urls   :     :   response   =   urlopen   (   url   )   html   =   response   .   read   ( )   .   decode   (   ' utf - 8 '   )   print   (   html   )     socket   .   timeout     error   :   print   (   error   )     OSError     error   :   print   (   error   )   修改 url GET 数据   对接 搜索引擎 。     urllib . request   import   urlopen   import   urllib   import   socket   socket   .   setdefaulttimeout   (   10   )   # search _ engine   =   ' http : / / www . baidu . / '   # search _ engine   =   ' http : / / www . zhihu . / '   search _ engine   =   ' http : / / stackoverflow . / '   def   addGETdata   (   url   ,   string   ) :   p   =   urllib   .   parse   .   urlparse   (   url   )     p   .   netloc   = =   ' www . baidu . '   :   return   url   +   ' s '   +   urllib   .   parse   .   urlencode   ( {   ' wd '   :   string   } )   elif   p   .   netloc     [   ' www . zhihu . '   ,   ' stackoverflow . '   ] :   return   url   +   ' search '   +   urllib   .   parse   .   urlencode   ( {   ' q '   :   string   } )   url   =   addGETdata   (   search _ engine   ,   ' python   urllib '   )   print   (   url   )   pyout   =   open   (   ' test . html '   ,   ' w '   )     :   response   =   urlopen   (   url   )   html   =   response   .   read   ( )   .   decode   (   ' utf - 8 '   )   print   (   html   ,   file   =   pyout   )     socket   .   timeout     error   :   print   (   error   )     OSError     error   :   print   (   error   )   讲 addGETdata 函数 ， 修改 url 目标 形式 ， 都 ， 目标 搜索引擎 网站 。   POST 方法 获取数据   不太 灵活 ， baidu zhihu 两个 并不相同 ， 采用 POST 方法 ， 默认 中缀 search ， 不太 适合 ， 采用 POST 方法 伪装 头部 ， 网站 会 禁止 。 方法 略过 。 修改 url GET 很 简单 。   requests 模块 基础   网络 编程 推荐 requests 模块 ， 这是 requests   官网   ， 这是 中文 文档   链接   。 更 信息 请 参看 官方 文档 。   安装   安装 推荐 pip pip3 命令 简便 安装 。   HTTP 协议 支持   几个 函数 一看 名字 HTTP GET ， POST ， PUT DELETE 方法 ， HTTP 冷门 方法 HEAD OPTIONS   requests 模块 类似 head 函数 options 函数 。   函数   这是 第一个 例子 改写 ：   import   requests   urls   =   [   ' https : / / www . google . . cn '   ,   ' https : / / www . google . '   ,   ' http : / / www . google . . cn '   ]     url     urls   :     :   response   =   requests   .     (   url   ,   timeout   =   10   )   html   =   response   .   text   print   (   html   )     requests   .   exceptions   .   Timeout     error   :   print   (   url   ,   error   )     requests   .   exceptions   .   RequestException     error   :   print   (   url   ,   error   )   函数 HTTP GET 方法 获取 网页 内容 ，   socket 全局 设置 timeout   ， 设置 一个 timeout 参数 。 提取 文本 内容 简单 调用 text 属性 即可 ， 错误 捕捉 ， 不 赘述 。   params 参数   params 参数 url 关键词 值 ， 带点 提及 urlencode 函数 功能 ， 语句 简洁 。 类似 例子 演示 ：   import   requests   import   urllib   ###     urlparse   search _ engines   =   (   ' http : / / www . baidu . / s '   ,   ' http : / / www . zhihu . / search '   ,   ' http : / / stackoverflow . / search '   ,   ' http : / / www . . / web '   ,   ' http : / / search . yahoo . / search '   ,   ' http : / / cn . bing . / search '   ,   ' https : / / www . google . / # '   ,   ' https : / / zh . wikipedia . org / w / index . php '   ,   ' https : / / en . wikipedia . org / wiki / '   ,   )   def   addGETparams   (   url   ,   search _ string   ) :   p   =   urllib   .   parse   .   urlparse   (   url   )     p   .   netloc   = =   ' www . baidu . '   :   return   {   ' wd '   :   search _ string   }   elif   p   .   netloc     [   ' www . zhihu . '   ,   ' stackoverflow . '   ,   ' cn . bing . '   ,   ' www . . '   ,   ' www . google . '   ] :   return   {   ' q '   :   search _ string   }   elif   p   .   netloc     [   ' search . yahoo . '   ] :   return   {   ' p '   :   search _ string   }   elif   p   .   netloc     [   ' zh . wikipedia . org '   ,   ' en . wikipedia . org '   ] :   return   {   ' search '   :   search _ string   }   search _ engine   =   search _ engines   [   2   ]   params   =   addGETparams   (   search _ engine   ,   ' python '   )   pyout   =   open   (   ' test . html '   ,   ' w '   )     :   response   =   requests   .     (   search _ engine   ,   timeout   =   10   ,   params   =   params   )   print   (   response   .   url   )   html   =   response   .   text   print   (   html   ,   file   =   pyout   )     requests   .   exceptions   .   Timeout     error   :   print   (   url   ,   error   )     requests   .   exceptions   .   RequestException     error   :   print   (   url   ,   error   )   pyout   .   close   ( )   search _ engin 原始 url 做 修改 ， 语法 简洁 。   post 函数   函数 ：   response   =   requests . put ( \" http : / / httpbin . org / put \" )   data 参数   data 参数 ， POST 方法 传输 数据 ， 字符串 ， 字典 值 ， json 数据 （ json 模块 dumps 函数 ） 。   > > >   payload   =   { ' key1 ' :   ' value1 ' ,   ' key2 ' :   ' value2 ' }   > > >   r   =   requests . post ( \" http : / / httpbin . org / post \" ,   data = payload )   headers 属性   接受 一个 字典 值 ， 用于 定制 POST 方法 HTTP 请求 头 。   put 函数   暂时 略过 。   delete 函数   暂时 略过 。   返回 reponse 响应 对象   函数 返回 reponse 对象   url 属性   返回 响应 url   text 属性   返回 响应 文本 内容   encoding 属性   返回 响应 encoding 。   content 属性   返回 响应 二进制 形式 。 利用 属性 下载 文件 。   download _ file   函数 参考   网页   。     stream   =   True   参数设置 ，   def   download _ file   (   url   ,   filefold   =   ' download '   ) :   ' ' ' 简单 url 下载 文件 函数 ， filefold 下载 文件 存放 下 一级 文件夹 名 ' ' '     :   os   .   mkdir   (   filefold   )     FileExistsError   :   pass   filename   =   ' . / '   +   filefold   +   ' / '   +   url   .   split   (   ' / '   ) [   -   1   ]   #   NOTE     stream = True   parameter   response   =   requests   .     (   url   ,   stream   =   True   )     open   (   filename   ,   ' wb '   )     f   :     chunk     response   .   iter _ content   (   chunk _ size   =   1024   ) :     chunk   :   #   filter     - alive     chunks   f   .   write   (   chunk   )   f   .   flush   ( )   return   filename   json 方法   响应 json 文件 ， 调用 方法 自动 json 文件 解码 （ 相当于 json 模块 loads ） 。   status _ code 属性   响应 状态 码 ， 404 。   headers 方法   服务器 响应 HTTP 头 信息 。   _ redirects   GET   OPTIONS   POST   PUT   PATCH   DELETE   方法 重定向 默认 打开   True   HEAD 方法 默认 重定向 关闭 。   timeout 参数   timeout 参数 控制 ， 超时 抛出   requests . exceptions . Timeout   异常 。   异常   异常 下 ：   网络 （ ： DNS 查询 失败 、 拒绝 连接 ） 时 ， Requests 会 抛出 一个   ConnectionError   异常 。   罕见 无效 HTTP 响应 时 ， Requests 会 抛出 一个   HTTPError   异常 。   请求 超时 ， 抛出 一个   Timeout   异常 。   请求 超过 设定 重定向 次数 ， 会 抛出 一个   TooManyRedirects   异常 。   Requests 显式 抛出 异常 都 继承   requests . exceptions . RequestException   。   requests 模块 高级 篇   会话   会话 对象 跨 多个 requests 请求 对象 参数设置 ， cookies 。   Session 对象 requests   API 方法 ， ， post 。 会话 对象 设置 参数 都 会 保留 ， 调用 方法 还 加上 额外 参数设置 ， 所示 :   s   =   requests . Session ( )   s . auth   =   ( ' user ' ,   ' pass ' )   s . headers . update ( { ' x - test ' :   ' true ' } )   #     ' x - test '     ' x - test2 '       s . ( ' http : / / httpbin . org / headers ' ,   headers = { ' x - test2 ' :   ' true ' } )   SSL 验证   加上   verify = True   目标 主机 SSL 验证 。   响应 体 content   响应 体 含有 content 却 内容 情况 ，   Stream = True   推迟 content 下载 ， 只 获取 header 信息 。   response . content   才 下载 content 。     Response . iter _ content     Response . iter _ lines   方法 控制 工作 流 ，   Response . raw   底层 urllib3 读取 响应 对象 。   response . iter _ content   iter _ content ( chunk _ size = 1 ,   decode _ unicode = False )   迭代 读取 响应 体 content 内容 ， 设置 读取   chunk _ size   。   response . iter _ lines   iter _ lines ( chunk _ size = 512 ,   decode _ unicode = None )   迭代 读取 响应 体 content 内容 ， 读 一行 。 行 内容 小于 chunk _ size ， 不 设置 即可 。   身份验证   > > >     requests . auth   import   HTTPBasicAuth   > > >   requests   .     (   ' https : / / api . github . / user '   ,   auth   =   HTTPBasicAuth   (   ' user '   ,   ' pass '   ) )   <   Response   [   200   ]   >   > > >   requests   .     (   ' https : / / api . github . / user '   ,   auth   =   (   ' user '   ,   ' pass '   ) )   <   Response   [   200   ]   >   代理   import   requests   proxies   =   {   \" http \" :   \" http : / / 10.10 . 1.10 : 3128 \" ,   \" https \" :   \" http : / / 10.10 . 1.10 : 1080 \" ,   }   requests . ( \" http : / / . org \" ,   proxies = proxies )   附录   HTTP 补充 理论知识   HTTP 协议 支持 四种 方法 ：   GET :   web   service   提取 信息   POST :   web   service   发送信息   PUT :   web   service   更新 信息   DELETE :   web   service   删除 信息   GET POST 区别   参考   网页   。 谈及 修改 网页 url 获取 资源 ， 实质 HTTP GET 方法 ， GET 方法 信息 放在 url 上 ， web   service 服务器 会 分析 url ， 客户机 回应 方式 。 POST 方法 不 修改 url ， web   service 服务器 接受 url 上 额外 信息 ， POST 方法 会 传输 一个 信息 包 。 GET 方法 服务器 互动 采用 GET 方法 ， url 局限性 ， GET 方法 不 ， 服务器 支持 POST 方法 互动 。 PUT DELETE 方法 少用 ， 服务器 不 支持 冷门 方法 。   HTTP 返回 错误码 含义   100   :   (   ' Continue '   ,   ' Request   received ,     continue '   ) ,   101   :   (   ' Switching   Protocols '   ,   ' Switching       protocol ;   obey   Upgrade   header '   ) ,   200   :   (   ' OK '   ,   ' Request   fulfilled ,   document   '   ) ,   201   :   (   ' Created '   ,   ' Document   created ,   URL   '   ) ,   202   :   (   ' Accepted '   ,   ' Request   accepted ,   processing   continues   - line '   ) ,   203   :   (   ' Non - Authoritative   Information '   ,   ' Request   fulfilled     cache '   ) ,   204   :   (   ' No   Content '   ,   ' Request   fulfilled ,     '   ) ,   205   :   (   ' Reset   Content '   ,   ' Clear   input   form       input . '   ) ,   206   :   (   ' Partial   Content '   ,   ' Partial   content   . '   ) ,   300   :   (   ' Multiple   Choices '   ,   ' Object       resources   - -     URI   list '   ) ,   301   :   (   ' Moved   Permanently '   ,   ' Object   moved   permanently   - -     URI   list '   ) ,   302   :   (   ' Found '   ,   ' Object   moved   temporarily   - -     URI   list '   ) ,   303   :   (   ' See   Other '   ,   ' Object   moved   - -     Method     URL   list '   ) ,   304   :   (   ' Not   Modified '   ,   ' Document       changed       time '   ) ,   305   :   (   ' Use   Proxy '   ,   ' You       proxy       Location     access     '   ' resource . '   ) ,   307   :   (   ' Temporary   Redirect '   ,   ' Object   moved   temporarily   - -     URI   list '   ) ,   400   :   (   ' Bad   Request '   ,   ' Bad   request   syntax     unsupported   method '   ) ,   401   :   (   ' Unauthorized '   ,   ' No   permission   - -     authorization   schemes '   ) ,   402   :   (   ' Payment   Required '   ,   ' No   payment   - -     charging   schemes '   ) ,   403   :   (   ' Forbidden '   ,   ' Request   forbidden   - -   authorization       '   ) ,   404   :   (   ' Not   Found '   ,   ' Nothing   matches       URI '   ) ,   405   :   (   ' Method   Not   Allowed '   ,   ' Specified   method     invalid       server . '   ) ,   406   :   (   ' Not   Acceptable '   ,   ' URI         preferred   format . '   ) ,   407   :   (   ' Proxy   Authentication   Required '   ,   ' You     authenticate     '   '   proxy     proceeding . '   ) ,   408   :   (   ' Request   Timeout '   ,   ' Request   timed   ;       . '   ) ,   409   :   (   ' Conflict '   ,   ' Request   conflict . '   ) ,   410   :   (   ' Gone '   ,   ' URI     longer   exists         permanently   removed . '   ) ,   411   :   (   ' Length   Required '   ,   ' Client       Content - Length . '   ) ,   412   :   (   ' Precondition   Failed '   ,   ' Precondition     headers     false . '   ) ,   413   :   (   ' Request   Entity   Too   Large '   ,   ' Entity       large . '   ) ,   414   :   (   ' Request - URI   Too   Long '   ,   ' URI       long . '   ) ,   415   :   (   ' Unsupported   Media   Type '   ,   ' Entity   body     unsupported   format . '   ) ,   416   :   (   ' Requested   Range   Not   Satisfiable '   ,   ' Cannot   satisfy   request   range . '   ) ,   417   :   (   ' Expectation   Failed '   ,   ' Expect   condition         satisfied . '   ) ,   500   :   (   ' Internal   Server   Error '   ,   ' Server         trouble '   ) ,   501   :   (   ' Not   Implemented '   ,   ' Server       support     operation '   ) ,   502   :   (   ' Bad   Gateway '   ,   ' Invalid   responses       server / proxy . '   ) ,   503   :   (   ' Service   Unavailable '   ,   ' The   server     process     request   due     a   high   load '   ) ,   504   :   (   ' Gateway   Timeout '   ,   ' The   gateway   server       receive   a   timely   response '   ) ,   505   :   (   ' HTTP   Version   Not   Supported '   ,   ' Cannot   fulfill   request . '   ) ,   参考资料   Foundations     Python   Network   Programming   ， python 网络 编程 基础 ， [ 美 ]   John   Goerzen   著 ， 莫迟 译   。   计算机网络   [ 美 ]   特南 鲍姆   diveintopython3   web   services   一章   这是   中文 网页   。",
            "tags":"python爬虫",
            "url":"articles/requests-module.html"
        },
        {
            "title":"Tornado模块",
            "text":"简介   tornado python 异步 网络 框架 模块 ， tornado 应对 高 并发 请求 上 性能 很 好 。   安装   第一个 例子   import   tornado . ioloop   import   tornado . web   class   MainHandler   (   tornado   .   web   .   RequestHandler   ) :   def     (     ) :     .   write   (   \" Hello ,   world \"   )   def   make _ app   ( ) :   return   tornado   .   web   .   Application   ( [   (   r   \" / \"   ,   MainHandler   ) ,   ] )     __ __   = =   \" __ main __ \"   :   app   =   make _ app   ( )   app   .   listen   (   8888   )   tornado   .   ioloop   .   IOLoop   .   current   ( )   .   start   ( )   这是 一个 同步 webapp 框架 ， 会用 少 ， tornado 编写 webapp 结构 :   开启 tornado 事件驱动 循环 :   tornado . ioloop . IOLoop . current ( ) . start ( )   大体 类似 asyncio :   asyncio . _ event _ loop ( ) . run _ forever ( )   tornado5.0 ， tornado 自动 asyncio 集成 ， 集成 指 ： tornado 事件驱动 自动 挂载 asyncio 主 事件驱动 循环 之上 。   make   a   app   创建 一个 Application 对象 ， Application 对象 再 详细 讨论 :   def   make _ app   ( ) :   return   tornado   .   web   .   Application   ( [   (   r   \" / \"   ,   MainHandler   ) ,   ] )   代码 ， URL 分发 Handler ， 类似 flask URL 视图函数 分发 过程 。   MainHandler   看作 一个 视图 类 。   编写 视图 类 :   class   MainHandler   (   tornado   .   web   .   RequestHandler   ) :   def     (     ) :     .   write   (   \" Hello ,   world \"   )   视图 类 很多 细节 再 详细 讨论 。   一个 简单 异步 例子   import   tornado . ioloop   import   tornado . web   class   MainHandler   (   tornado   .   web   .   RequestHandler   ) :   async   def     (     ) :     .   write   (   \" Hello ,   world \"   )   def   make _ app   ( ) :   return   tornado   .   web   .   Application   ( [   (   r   \" / \"   ,   MainHandler   ) ,   ] )     __ __   = =   \" __ main __ \"   :   app   =   make _ app   ( )   app   .   listen   (   8888   )   tornado   .   ioloop   .   IOLoop   .   current   ( )   .   start   ( )   实际上 异步 函数 写成 asyncio 协程 形式 即可 ， 接触 tornado 老 版本 ， 不得不 承认 tornado 很大 ， asyncio 集成 代码 简洁 。   tornado . gen . coroutine     asyncio . coroutine   请 参看 官方 文档     ， 实际上 我试 ，   @ gen . coroutine   替换   @ asyncio . coroutine   webapp 运行 。   官方 文档 所说 ， 兼容性 ， Tornado coroutine   runner 更 通用 ， 框架 ， asyncio coroutine   runner 不 接受 框架 corotine 。 推荐 tornado 提供 装饰器   @ gen . coroutine   。   tornado 全局变量   tornado 代码 只 希望 运行 ， 目标 对象 全局变量 ， Handler 级别 全局变量 ， 全局变量 申请 放在 Handler 类 。   想 变量 多个 Handler 之间 共用 ， 全局变量 Application 级别 ，   网页   提供 解决方案 。   大致 Hanlder 接收 字典 参数 ，   initialize   方法 初始化 时 变量 赋值 ：   class   PageTwoHandler   (   tornado   .   web   .   RequestHandler   ) :   def   initialize   (     ,   configs   ) :     .   configs   =   configs   def     (     ) :     .   write   (   str   (     .   configs   )   +   \"   \\ n   \"   )   class   Application   (   tornado   .   web   .   Application   ) :   def   __ init __   (     ) :   handlers   =   [ (   ' / pageone '   ,   PageOneHandler   ,   {   ' configs '   :   configs   } ) ,   (   ' / pagetwo '   ,   PageTwoHandler   ,   {   ' configs '   :   configs   } ) ]   settings   =   dict   (   template _ path   =   ' / templates '   ,   static _ path   =   ' / static '   ,   debug   =   False   )   tornado   .   web   .   Application   .   __ init __   (     ,   handlers   ,   * *   settings   )   正确 关闭 tornado 进程   定制 tornado 关闭 动作 ， supervisor 配合 会 端口 释放 ， 加上 希望 tornado 温和 关闭 重启 不 杀死 动作 保证数据 完整 ， 网上 很多 人 提及 ， 一番 搜索 ， 感觉 github 仓库 下   issue   【 20190606 还 open 】 描述 更 值得 细看 。   一个 背景 知识 ， server . stop ( )   只 停止 接收 新 请求 ， keepalive 请求 无效 。   supervisor 默认 发送 信号   signal . SIGTERM   ， 关闭 信号   signal . SIGINT   。   async   def   shutdown   ( ) :   periodic _ task   .   stop   ( )   http _ server   .   stop   ( )     client     ws _ clients   .   values   ( ) :   client   [   ' handler '   ]   .   close   ( )   await   gen   .   sleep   (   1   )   ioloop   .   IOLoop   .   current   ( )   .   stop   ( )   def   exit _ handler   (   sig   ,   frame   ) :   ioloop   .   IOLoop   .   instance   ( )   .   add _ callback _ _ signal   (   shutdown   )   ...     __ __   = =   ' __ main __ '   :   signal   .   signal   (   signal   .   SIGTERM   ,   exit _ handler   )   signal   .   signal   (   signal   .   SIGINT   ,   exit _ handler   )   也许 关闭 动作 休眠 时间   gen . sleep   。 有待 进一步 观察 。   Application 对象   tornado . web . Application ( handlers = None ,   default _ host = ' ' ,   transforms = None ,   * * settings )   url 分发   handlers 参数 url 分发 工作 ， 其是 一个 列表 ，   URLSpec   对象 :   tornado . web . URLSpec ( pattern ,   handler ,   kwargs = None ,   = None )   pattern 一个 匹配 url 分发 正则表达式   handler   RequestHandler   子类 ， 定义 url 分发 做些 。   kwargs ， 字典 值 ， 值 传递 handler   initialize   方法 ， 。   ， 确切 来说 url 分发 规则 取个 名字 ， 下   Application . reverse _ url ( , * args )   解析 出 url ， 大体 类似 flask   url _     endpoint 概念 。   pattern 正则表达式 圆括号 包围起来 group 概念 ， :   r \" / story / ( [ 0 - 9 ] + ) \"   group 匹配 参数 ， 入口 参数传递   RequestHandler   对象   HTTP   method ，     post   。     Application . reverse _ url ( , * args )   其后 接受 参数 正则表达式 匹配 ， 反向 解析 url 匹配 子 group 替换 操作 。   kwargs 字典 值 ， 传递   initialize   方法 大致 所示 :   class   StoryHandler   (   RequestHandler   ) :   def   initialize   (     ,   db   ) :     .   db   =   db   def     (     ,   story _ id   ) :     .   write   (   \"     story   % s   \"   %   story _ id   )   app   =   Application   ( [   url   (   r   \" / story / ( [ 0 - 9 ] + ) \"   ,   StoryHandler   ,   dict   (   db   =   db   ) ,     =   \" story \"   )   ] )   配置   settings   收集 一系列 Application 配置 信息 ， 很多 ， 不一而足 ， 列出 :   debug :   开启 debug 模式   template _ path :   定义 模板 文件夹 所在位置   static _ path :   定义 静态 文件夹 所在位置   listen 方法   application 开启 一个 HTTP   Server ， 指定 监听 端口 。   RequestHandler 对象   一个 请求 都 创建 一个   RequestHandler   对象 ， 执行   initialize   方法 ； 执行   prepare   方法 ， prepare 方法 HTTP 协议 具体方法 无关 ； 执行 HTTP 协议 方法 ，     post   put   ， url 正则表达式 匹配 子 group 参数 传 进去 ， 提及 ； 执行   _ finish   方法 。   单元测试   tornado 单元测试 样 下 :   这是   api . py   文件 :   import   tornado   import   logging     tornado . web   import   RequestHandler   import   time   class   AnalyticsBWSpecificHour   (   RequestHandler   ) :   def     (     ) :   return     .   write   ( {   ' message '   :   '     method '   } )   class   Application   (   tornado   .   web   .   Application   ) :   def   __ init __   (     ,   * *   kwargs   ) :   api _ handlers   =   [   (   r   \" / \"   ,   AnalyticsBWSpecificHour   ) ,   ]   logging   .   debug   (   api _ handlers   )   super   (   Application   ,     )   .   __ init __   (   api _ handlers   ,   * *   kwargs   )   这是   test _ api . py   文件 :     api   import   Application     tornado . testing   import   AsyncHTTPTestCase   import   tornado   import   logging   logging   .   basicConfig   (   level   =   logging   .   DEBUG   )   import   unittest   class   ApiTestCase   (   AsyncHTTPTestCase   ) :   def   _ app   (     ) :     .   app   =   Application   ( )   return     .   app   def   test _ status   (     ) :   response   =     .   fetch   (   ' / '   ,   method   =   ' GET '   )     .   assertEqual   (   response   .   code   ,   200   )     __ __   = =   ' __ main __ '   :   unittest   .   main   ( )   请 参看   网页   ， 讲   . fetch   方法 默认 会   . _ url   操作 。   tornado 异常 输出 json 风格化   tornado   app   发生 异常 ， 其会 调用   RequestHandler     write _ error   方法 ， 自定义 方法 ， 使 返回   json   格式 信息 。 更 信息 请 参看   网页   。   附录   参考资料   官方 文档   ， 中文翻译 版本 过时 。   tornado 简介 一书",
            "tags":"python好伙伴",
            "url":"articles/tornado-module.html"
        },
        {
            "title":"周易入门之摇卦",
            "text":"摇卦   摇卦 先 静心 ， 问 所求 疑问 事 。   测一卦   原文   解卦   变卦 原文   变卦 解卦   测一卦 ...   测一卦 ...   ​   测一卦 ...   测一卦 ...     看主卦 ， 主卦 变卦 比对 可得 变爻 。 一个 卦 一个 事件 ， 初 爻 上 爻 ， 变爻 变数 环节 ， 君子 需 参照 《 周易 64 卦 详解 行为准则 。",
            "tags":"周易",
            "url":"articles/zhou-yi-yao-gua.html"
        },
        {
            "title":"pelican模块",
            "text":"简介   pelican 一个 静态 网站 生成 工具 ， python 编写 ， pythoner 来说 显得 格外 亲切 。   官方 quickstart 简单 刷 一遍 ， 作出 讨论 。   项目   python 虚拟环境 控制 不 说 ， 讨论   pelicanconf . py     publishconf . py     Makefile   文件 作出 ， 项目 文档 结构 相关 作出 。   下   publishconf . py     pelicanconf . py   区别 ，   publishconf . py   文件 一句 话 ：   import   os   import   sys   sys   .   path   .   append   (   os   .   curdir   )     pelicanconf   import   *   继承 来自   pelicanconf . py   配置 参量 ，   publishconf . py   对阵 发布 服务器 上 ，   pelicanconf . py   配置 用于 机 调试 。     pelicanconf . py     SITEURL   变量 空值 ，   publishconf . py   赋 一个 值 ， 该值 模板 用法 ，   { {   SITEURL   } }   调用 。   发布 远程 机器 pulish 还会 额外 东西 ，   DISQUS _ SITENAME   值 ， 很多 模板 会 值来 开启 disqus javascript 引用 ， DISQUS 系统 本机 调试 意义 ， 会 不 设置 值 自动 关闭 。   publishconf . py   也许 ， 略过 ，   pelicanconf . py   配置 。     Makefile   文件 ， 脚本 很 好 ， 命令 很 用到 ：   make   html   make   serve   make   github   ...   make   github 会 output 内容 刷到 github   pages 项目 ， 依赖于 生成 目标   publish   ， make   publish make   html 惟一 区别 讨论 调用 配置文件 。   Makefile 文件 做 精简 ， 都 无关紧要 ， 惟一 值得一提 github 目标 生成 命令 参考 官方 文档 做 更改 （ 请   参看   ） ：   github   :   publish   ghp - import   - m   \" Generate   Pelican   site \"   $ (   OUTPUTDIR   )   git   push   develop   $ (   GITHUB _ PAGES _ BRANCH   )   : master   git remote 我加 一个 develop 指向 目标 ， 是因为 项目 venv 大 环境 一个 项目 github 上 一个 项目 ， origin 目标 ， github   pages 默认 目标 只好 develop 名字 。     ghp - import   命令行 工具 ， ubuntu 下   apt   安装 ，   老实 说 工具 干嘛 还 不 太 。   content output 文件夹   content   文件夹 放着 静态 网站 生成 源文件 ， 接下来 讨论 纯粹 设置 偏好 ， 都 统一 一并 讲解 ， DIY 看 读者 喜好 。   articles 放着 markdown html 源文件 ， articles 文件夹 下 一层 子 文件夹 ， 文件夹 名字 会   Category   。 设置 ：   USE _ FOLDER _ AS _ CATEGORY   =   True   html 文件 额外 说 ， 原 网页 body 内容 都 会 完整 传 ， 原 html 网页 head meta 标签 title 标签 之外 ， 多余 内容 传 不 。 css js 设置 怎么弄 ， 请 参看 相关 讨论 ， 到时候 设置 好 相关 meta 标签 即可 。   images pdfs data extra 文件夹 名字 都 随意 ， 写 ， pdfs 放 pdf ， images 放 图片 。 几个 文件夹 都 静态 资源 文件夹 ， 下 生成 output 文件夹 ， 内容 都 放 送入 output 文件夹 去 。 设置 ：   STATIC _ PATHS   =   [ ' images ' ,   ' pdfs ' ,   ' data ' ,   ' extra ' , ]   引用 静态 资源   markdown 引入 图片 所示 ：   ! [   img   ] (   { static } / images / chemistry / Naphthalene . png   )     { static }   引用 文件 路径 。 content 文件夹 images 文件夹 ， 文件夹 默认 copy 输出 文件夹 根目录 去 。 extra 文件夹 做 ， 其是 网页 favicon . ico 静态 文件 ， 还 设置 ：   EXTRA _ PATH _ METADATA   =   {   ' extra / favicon . ico ' :   { ' path ' :   ' favicon . ico ' }   }   参考   网页   。   引用 js css   js css 静态 资源 ， 有所不同 ， 提及 html 源文件 head css 引用 语句 ， 都 会 丢失 。 加上 meta 标签 语句 ：   < meta   = \" javascripts \"   content = \" 周易 之摇卦 . js \"   / >   还 安装 pelican - plugins   pelican _ javascript   所示 ：   PLUGIN _ PATHS   =   [ ' pelican - plugins ' ]   PLUGINS   =   [ ' pelican _ javascript ' ,   ' tipue _ search ' ,   ' extract _ toc ' ]   更 信息 请 参看 项目   github 地址   。   output 输出 控制   ARTICLE _ URL   =   ' { category } / { slug } . html '   ARTICLE _ SAVE _ AS   =   ARTICLE _ URL   PAGE _ URL   =   ' { slug } . html '   PAGE _ SAVE _ AS   =   PAGE _ URL   CATEGORY _ URL   =   ' { slug } / index . html '   CATEGORY _ SAVE _ AS   =   CATEGORY _ URL   TAG _ URL   =   ' tag / { slug } . html '   TAG _ SAVE _ AS   =   TAG _ URL   ARTICLE _ URL   定义 文章 URL 显示 ， slug 文件 头 属性 自定义 。   ARTICLE _ SAVE _ AS   定义 文件 output 文件夹 存储 路径   类似 控制   CATEGORY   TAG   PAGE   页面 URL 网页 output 文件夹 存储 路径 。   技巧   THEME 设置 自定义 THEME   THEME   =   ' mytheme '   自定义 THEME copy 别人 THEME ， jinja2 知识 做 修改 。   目录 自动 生成   安装   extract _ toc   插件 ， virtuaenv 环境 安装 beautifulsoup4 ,   python - markdown 设置 好   toc   插件 开启 。   MARKDOWN   =   [ ' toc ' ]   markdown 加上 一行 即可 ：   [ TOC ]   github   markdown 语法 支持   python - markdown 开启   fenced _ code   插件 。   MARKDOWN   =   [ ' toc ' ,   ' fenced _ code ' , ' codehilite ( css _ class = highlight ,   linenums = True ) ' ]   还 设置 语法 高亮 类 显示 行 数 。",
            "tags":"python好伙伴",
            "url":"articles/pelican-module.html"
        },
        {
            "title":"小分子网页显示第一版",
            "text":"mhchem 宏包   latex 基于 tikz chemfig 宏包来 小 分子结构 显示 ， 包括 大型 有机 分子 结构 显示 ， 简单 小 分子 显示 推荐   mhchem   宏包 。   mhchem 看得出来 latex 数学 环境 显示 小 分子结构 ， 马上 html 上 mathjax 支持 ， chemfig tikz 机制 ， 永远 都 mathjax 支持 （ svg 途径 ？ ） 。 加载 宏包 ：   \\ usepackage   [ version = 3 ]   {   mhchem   }   来说 ， 假定 读者 latex 数学 环境 内 语法 都 很 熟悉 ， 简单 理解 mhchem 宏包 数学 环境 下 ， 一个 新 命令   \\ ce {   }   ， ce 命令 上标 下 标语 法是 类似 数学 环境 内 语法 ， 化学 表达式 显示 会 美观 。     $ \\ ce { H _ 2O } $   显示   \\ ( \\ ce { H _ 2O } \\ )   ，   $ \\ ce { AgCl _ 2 &# 94 ; - } $   显示   \\ ( \\ ce { AgCl _ 2 &# 94 ; - } \\ )   。   一种 简写 写法 ：   $ \\ ce { H2O } $   显示   \\ ( \\ ce { H2O } \\ )   ，   $ \\ ce { AgCl2 - } $   显示   \\ ( \\ ce { AgCl2 - } \\ )   。   看 ce 命令 包装 纯数学 环境 表达 显示 效果 ：   \\ ( H _ 2O \\ )     \\ ( AgCl _ 2 &# 94 ; - \\ )   。 区别 。   数字   数字 写 上 即可   $ \\ ce { 0.5 H2O } $   \\ ( \\ ce { 0.5 H2O } \\ )   ， 值得一提的是 ， 数字 分数 形式 会 自动 ：   $ \\ ce { 1 / 2   H2O } $   \\ ( \\ ce { 1 / 2   H2O } \\ )   。   会 带上 小数点 数字 显示 古怪 。 小数点 会 解释 配位 化合物 结晶水 分隔 点 。   $ \\ ce { KCr ( SO4 ) 2.12 H2O } $   \\ ( \\ ce { KCr ( SO4 ) 2.12 H2O } \\ )   。 正确 显示 例子 ， 0.5 放入 数学 环境 中 即可 ：   $ \\ ce { $ 0.5 $ H2O } $   $ $   \\ ce { $ 0.5 $ H2O }   $ $   数学 环境   ， 上 所示 ， mathjax 支持 ce 命令 再 数学 环境   $   $   。   键   -   =   #   单键 ， 双键 三键 。   \\ ( \\ ce { A - A   B = B   C# C } \\ )     \\ bond 命令 还 额外 键 ，   $ \\ ce { \\ bond { ~ } } $     \\ ( \\ ce { \\ bond { ~ } } \\ )   ，   $ \\ ce { \\ bond { ~ - } } $     \\ ( \\ ce { \\ bond { ~ - } } \\ )   ， 类推 。   化学反应 式   $ $   \\ ce   {   CO2   +   C   < -   2   CO   }   $ $   $ $   \\ ce { CO2   +   C   < -   2CO }   $ $   $ $   \\ ce { CO2   +   C   - > [ \\ text { text 命令 } ]   2CO }   \\ ce { CO2   +   C   - > T [ 支持 ] [ 中文 ]   2CO }   $ $   $ $   \\ ce { CO2   +   C   - > [ \\ text { text 命令 } ]   2CO }   $ $   $ $   \\ ce { CO2   +   C   - > T [ 支持 ] [ 中文 ]   2CO }   $ $   不 text 命令 ， 中文 latex 显示 。 例子 第二个 text 命令 ， 是因为 加上 T ， 箭头 文字 都 不 。   箭头   $ $   \\ ce { SO4 &# 94 ; 2 -   +   Ba &# 94 ; 2 +   - >   BaSO4   v   &# 94 ; }   $ $   $ $   \\ ce { SO4 &# 94 ; 2 -   +   Ba &# 94 ; 2 +   - >   BaSO4   v   &# 94 ; }   $ $   下降 箭头 v ， 上 式 箭头 &# 94 ; ， 内容 一个 空格 。   mathjax 简介   网页 显示 数学公式 利用 mathjax javascript 库 ， 显示 简单 化学 是因为 mathjax 还 引入 mhchem . js 插件 。   简单 引入 代码 所示 ：   <   script   type   =   \" text / javascript \"   >   window   .   MathJax   =   {   tex2jax   :   {   inlineMath   :   [   [   ' $ '   ,   ' $ '   ] ,   [   \" \\ \\ ( \"   ,   \" \\ \\ ) \"   ]   ] ,   processEscapes   :   true   } ,   TeX   :   {   extensions   :   [   \" AMSmath . js \"   ,   \" AMSsymbols . js \"   ,   \" noErrors . js \"   ,   \" noUndefined . js \"   ,   \" mhchem . js \"   ]   }   } ;   <   / script >   <   script   type   =   \" text / javascript \"   src   =   \" https : / / cdn . bootcss . / mathjax / 2.6 . 0 / MathJax . js config = TeX - MML - AM _ CHTML \"   > <   / script >   最 关键 配置   TeX     extensions   引入   mhchem . js   。   参考资料   网站   一块 内容 讲解 很 详细 。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"chemistry",
            "url":"articles/xiao-fen-zi-wang-ye-xian-shi-di-yi-ban.html"
        },
        {
            "title":"GFW带来的一些问题",
            "text":"pypi 下载 国内 源   pip   install   - - trusted - host   pypi . douban .   - i   http : / / pypi . douban . / simple   carbon   修改 本机 pypi 配置 ， 用户 主 文件夹 下   . pip / pip . conf   下 内容 :   [ global ]   index - url   =   http : / / pypi . douban . / simple   windows 下   % HOMEPATH% \\ pip \\ pip . ini   。   提示 说 参数   - - trusted - host   pypi . douban .   ， 加上 选项 ， pypi 配置 加上 ：   [ install ]   trusted - host   =   pypi . douban .   js   国内 cdn 源   推荐   网站   。   ubuntu 更新 源   ubuntu 更新 源 换成 国内 源 。   android   studio   sdk 更新 太慢   请 参考   https : / / github . / inferjay / AndroidDevTools   。 网站 很多 android 开发 相关 资料 。",
            "tags":"others",
            "url":"articles/gfwdai-lai-de-yi-xie-wen-ti.html"
        },
        {
            "title":"化学信息学简介",
            "text":"化学 信息学 定义   化学 信息学 ( cheminformatics ) ， 计算机 学科 化学 学科 ， 研究 化学物质 信息 存储 检索 这一 过程 。   化学 信息学 解决 四个 ：   存储 分子   精确 找到 分子   分子结构 中子 结构 查找   分子 相似性 搜索   MDL   3D 坐标 表示法 ， 原子 ， x ， y ， z 坐标 信息 都 列入 。   线性 标记 法   WLN   Wiswesser   Line   Notation ， 魏氏 线性 标记 法 。 William   J .   Wisswesser 十九世纪 50 年代 早期 发明 。   SMILES   Simplified   molecular   input   line   entry   specification ， 简化 分子 线性 输入 规范 。 最广 最为 熟知 线性 标记 法 。 详细 介绍 线性 标记 法 规则 ， 更 细节 请 参看   网页   。   原子 ： [ Na ] [ Cl ]   ， 原子 同位素 [ 2H ] ， [ 13C ] 。   离子 ： [ Na + ]   [ Cl - ]   [ Cu + 2 ]     [ Cu ++ ] 。   离子 化合物 ：   点 符号   \" . \"   两个 原子 之间 不 成键 ， 氯化钠   [ Na + ] . [ Cl - ]   。   单质 ： 氢气   [ H ] [ H ]   ,   氧气   [ O ] = [ O ]   ， 氮气   [ N ] # [ N ]   ， 原子 外面 默认 单键 连接 ，   =   双键 ，   #   三键 。   氧气 氮气 简写   O = O     N # N   ， 氢气 不行 。 氢原子 ， 会 自动 加上 ， 这是 符合 日常 有机化学 结构式 表达 风格 ， 双氧水   表达   OO   即可 。 加氢 规则 不用 说 ， 学过 有机化学 。 值得一提 方括号 不 自动 加氢 ， [ H ] 一个 氢原子 ， [ OH2 ] 两个 氢原子 ， 这是 水分子 。   有机 化合物 ： 讨论 ， 有机 化合物 表达式 猜出 ， ： CCCC   丁烷 ，   CCO   乙醇 。 分支 ： 一是 有机 化合物 顺序 链 有机化学 中 学习 IUPAC 命名 法来 ； 二是 圆括号 分支 子 基团 ( )   。 异丁烷   CC ( C ) C   ， 新 戊烷   CC ( C ) ( C ) C   ， 醋酸   CC ( = O ) O   ， 双键 。   环 ：   环己烷   C1CCCCC1   , 核心理念 编号 原子 连键 。 化合物 萘 ：   SMILES 表达 ：   c1ccc2ccccc2c1   涉及 萘 IUPAC 编号 ， 顺时针 从右 上 1 ， 4 跳到 5 ， 再 678 ， 两个 碳 跳 ， 知识 冷门 。 数字 1 2 互换 ， 任意 。   例子 还 涉及 一个 知识点 ， 芳香性 原子 （ 苯环 上 C ， 杂环 原子 ONS ） 都 小写 。 苯 写 ：   c1ccccc1   。   立体化学   双键 两端   / C = C /     \\ C = C \\   反 ( trans ) 双键 ，     / C = C \\     \\ C = C /   ( cis ) 。   手性 还 很 熟悉 ， 暂时 略过 。   InChI   SMARTS     IUPAC     学习 有机化学 都 IUPAC 命名 法 。   Trade     商用 名   Common     常用 名 ， 醋酸 ， 俗名 。   子结构 搜索   预先 建立 索引   参考资料   An   introduction       computer   science     chemistry     chemical   information   systems   ，   2009     Craig   A .   James   维基百科 SMILES   open   smiles   官方 文档",
            "tags":"chemistry",
            "url":"articles/cheminformatics-talk-one.html"
        },
        {
            "title":"markdown 简介",
            "text":"markdown 中 脚注   显示 插入 脚注 [ &# 94 ; 1 ]   [ &# 94 ; 1 ] :   这是 一个 脚注 。   效果 所示 ：   显示 插入 脚注   1   markdown 中 插入 描述 列表   sqrt   :   开 平方根 函数 ，   sqrt   (   x   )   。   sin   :   正弦 函数 ， 类似   cos   ，   tan   ，   sin   (   x   )   。   sqrt   开 平方根 函数 ， sqrt ( x ) 。   sin   正弦 函数 ， 类似 cos ， tan ， sin ( x ) 。   github   flavored   markdown   gfm 官方 文档     。 本文 大体 简要 。   github   flavored   markdown   github markdown 方言 ， 区别 :   下划线 下划线 。   URL   输入 ，   http : / / www . google .   ， 转化 链接 。 一个 新 功能 支持 ， 实际上 链接 插入方式 。   删除 线   :   ~ ~ 删除 线 ~ ~   添加 新 特性 。   最 有名 代码 块 染色 支持 。   ` ` ` elisp   ( +   1   1 )   语言 列表 参看   [ ] ( https : / / github . / github / linguist / blob / master / lib / linguist / languages . yml )   。   这是 一个 脚注 。   ↩",
            "tags":"others",
            "url":"articles/markdown-talk.html"
        },
        {
            "title":"python语言学习之-程序中的逻辑",
            "text":"布尔值   boolean 类型 ， 语言 ， 两个 值 ：   True   ，   False   。 强制 类型转换 函数   bool   。   逻辑 小 知识   python 中 ， 逻辑 真假 上 小 知识 ， 简单 下 。   数 0 、 空 对象 对象 None 值 都 假   非零 数字 或非 空 对象 都 真   两条 bool 函数 强制 类型转换   测试 会 递归 作用 数据结构 中   测试 会 返回 True False   两条 说 东西 ， 读者 请 看 这一 小节 。   元组 列表 大小   元组 列表 判断 很 好 理解 ， 东西 :   > > >   ( 1 , - 1 )   <   ( 2 , - 2 )   确实 古怪 。 请 读者 参考   网页   ) ， 官方 文档 ：   Tuples     lists     compared   lexicographically     comparison       elements .   This   means       compare   equal ,     element     compare   equal         sequences             type           length .   官方 文档 大于 小于 情况 说 很 ， 字里行间 大体 领会 精神 :   迭代 对象 大小 ， 逐个 。   迭代 对象 测试 返回 True False 。   逐个 ， 跳 元素 ， 两个 不 元素 ， 返回 两个 元素 。   快 完 （ 最小 迭代 对象 长度 为准 ） ， 判断 操作 ， 长度 ； 大小 判断 操作 ， 长度 更长 对象 更大 。   例子 :   > > >   ( 1 , - 1 )   <   ( 2 , - 2 )   True   > > >   ( 1 , - 1 )   <   ( - 1 , - 2 )   False   > > >   ( 1 , - 1 , - 3 )   <   ( 1 , - 1 )   False   > > >   ( 1 , - 1 , )   <   ( 1 , - 1 , 0 )   True   None   函数 return 值 会 返回 None 值 ， None 值 NoneType 对象 中 一个 值 ， 列表 空值 ， 值 都 不 。 . search 找到 匹配 会 返回 None 值 。 None 值 逻辑 上 逻辑 假 ，   None 逻辑 真 。   > > >   def   f ( ) :   ...   pass   ...   > > >   y   =   f ( )   > > >   y   > > >   type ( y )   < class   ' NoneType ' >   条件 判断   python 中 条件 语句 格式 ：     test :   条件 判断 执行 区块   命令 跟个 条件 判断 语句 ， 记住 加个 冒号 ， 缩进 区块 都 条件 判断 真的 执行 语句 。     test :     something001     :     something002   逻辑 条件 判断 ， 真 ，   something001 ； 假 ，   something002 。     test001 :     something001   elif   test002 :     something002   看 明白 ， elif 。   逻辑 或否   逻辑 ， 逻辑 ， 逻辑 否 。   编写 一个 逻辑 ， 判断 一个 字符串 ， 字符串 开头 a b ， 结尾 s ， 倒数 第二个 字符 单引号 ' 。 演示 逻辑 。 。   x = ' agais '     ( ( x [ 0 ]   = =   ' a '     x [ 0 ]   = =   ' b ' )     x [ - 1 ]   = = ' s '     (   x [ - 2 ]   = = \" ' \" ) ) :   print ( '     .. ' )       ..   稍 条件 判断   ， elif 语句 ， 还 逻辑 或非 组合 判断 。 编程 中 条件逻辑 ？   逻辑 语句 \" 或非 \" 组合 组合 ， 过分 嵌套 。 代码 所示 ， 一个 情况 分成 两 ， ... ... 语句 ，   x = - 2     x > 0 :   print ( ' x 大于 0 ' )   :   print ( ' x 小于 0 ' )   一个 情况 分成 三 ， ... elif ... 语句 。 深度 平行 语句 \" \" 逻辑 ， 或者说 类似 编程语言 switch 语句 。   x = 2     x > 0 :   print ( ' x 大于 0 ' )   elif   x < 0 :   print ( ' x 小于 0 ' )   :   print ( ' x 等于 0 ' )   再 看一看 代码 ， 代码   错误   ， 两个 语句 不 逻辑 分析 关系 。 [ &# 94 ; 7 ]   x = 2     x > 0 :   print ( ' x 大于 0 ' )     x < 0 :   print ( ' x 小于 0 ' )   :   print ( ' x 等于 0 ' )   代码 ， 例子 演示 加深 一个 深度 条件 判断 语句 处于 逻辑 判断 情况 ， 语句 条件 判断 逻辑 语句 判断 逻辑 再 左边 （ ） 判断 逻辑 \" \" 逻辑 ， 或者说 成是 \" 交集 \" 。 比如说   print ( ' 0 \\ < x \\ < 2 ' )   语句 语句 判断 逻辑   x \\ < 2   上 一层 判断 逻辑   x > 0   \" 交集 \" ，   0 \\ < x \\ < 2   。   x = - 2     x > 0 :   print ( ' x 大于 0 ' )     x > 2 :   print ( ' x > 2 ' )   elif   x < 2 :   print ( ' 0 < x < 2 ' )   :   print ( ' x = 2 ' )   elif   x < 0 :   print ( ' x 小于 0 ' )   :   print ( ' x 等于 0 ' )   过程 情况 图 所示 ：   编程 处于 何种 判断 逻辑 之下 一个 清晰 ， 强烈建议 读者 好好 思考 。 毕竟 磨刀 不 误 砍柴 功 。   语句 捕捉 错误   语句 编程 中 用来 错误 不 打算 应付 错误 最 通用 方式 。 一个 变量 预先 想 接受 一个 数值 ， 用户 却 输入 一个 字符 ， 这段 语句 包围 ； 编程 发现 情况 ， 懒得 理会 ， 简单 这块 出错 语句 包围 ， 跟个 语句 ， 打印 出 一个 信息 \" 出错 \" ， 即可 。 用法 所示 ：     True :   x = input ( ' 请 输入 一个 数 ， 返回 除以 2 数值 \\ n 输入 \" quit \" 退出 \\ n ' )     x = = ' quit ' :   break     :   num = float ( x )   print ( num / 2 )   :   print ( ' 出错 ' )   异常 完整 语句     :   yourCode     yourError   :         yourError2   :     something2   ......     :     somethingN   finally   :       funallystuff   语句 逻辑 试着 执行 区块 下 语句 ， 出现异常 ， 看 异常 yourError ， 执行   ， yourError2 ， 执行   something2   ...... ， 异常 ， 执行 字句 :     somethingN ， 异常 ， 异常 将会 返回 （ 更 控制程序 ） 。   finally 语句 作用 ， finally 语句 实际上 语句 中 异常 判断 情况 关系 ， 有没有 异常 发生 ， 都 执行 。 简单 不 缩进 写 语句 ， finally 语句 就算 程序 发生 异常 ， 会 先 执行 ， 异常 上 传给 控制程序 。   语句 finally 语句 可选 ， 具体情况 来看 。   放 语句 情况   语句 放上 语句 还 细讲 。   语句 相关 逻辑 说 ， 语句 继续执行 。 第一个 情况 ， 字句 return ， 函数 会 跳出 语句 ， 执行 成功 会 跳出 。 错误 捕捉 ， 错误 捕捉 再 放入 一个 raise 语句 ， 再 抛出 一个 错误 ， 语句 会 中止 。 抛出 异常 。 字句 ， 逻辑 错误 ， 将会 执行 字句 ， ， 语句 break 命令 ， 会 跳出 语句 。   情况 稍微 ， 接触 两种 :   这是 一个 mongodb 调用 函数 装饰器 。 试图 调用 mongodb ， 发生 AutoReconnect 异常 ， 将会 sleep 一秒 再 去   调用函数 。 成功 ， return ， 自然 跳出 语句 。   def   safe _ mongocall   (   call   ) :   ' ' ' mongodb   replica   set   assistant ' ' '   def   _ safe _ mongocall   (   *   args   ,   * *   kwargs   ) :     i     xrange   (   100   ) :   #     :   return   call   (   *   args   ,   * *   kwargs   )     pymongo   .   AutoReconnect   :   import   time   time   .   sleep   (   1   )   print   (   \"     connect   mongodb   ... \"   )   return   _ safe _ mongocall   第二个 例子 较为 常用 ， 重复 做 某件事 会 发生 错误 ， 捕捉 错误 ， 继续执行 。 捕捉 计了 数 。   def   test ( ) :   failcount   =   0     i     range ( src _ count ) :   :         Exception     :   failcount   + =   1   sucess _ count   =   src _ count   -   failcount   return   sucess _ count   还 想到 一种 程序结构 ， 语句 逻辑 分支 。 试 做 某件事 ， ， 执行 字句 break ， 发生 异常 执行 异常 中 字句 ， 内容 不 执行 。 反常规 ， 联系实际 生活 ， 确实 逻辑 ， 假想 ， 发生 错误 不行 执行 字句 ， 假想 内容 不 执行 。   语句   语句 迭代 对象 都 做出 元素 包含 对象 之中 判断 。   > > >   ' a '     [ ' a ' , 1 , 2 ]   True   > > >   dict   { ' a ' :   1 ,   ' c ' :   2 ,   ' b ' :   3 ,   ' d ' :   4 }   > > >   ' e '     dict   False   > > >   ' 2 '     dict   False   例子 ， 列表 判断 元素 预料 ， 字典 说 语句 ， 不 判断 值 。   迭代 语句   内部 重复 操作 程序 先 迭代 结构 ， 实在 不行 才 循环 结构 ， 毕竟 简单 更美 更 。   python 迭代 语句 类似 lisp 语言 dolist dotimes 函数 ， 例子 ：     x     ' abc ' :   print ( x )   a   b   c     序列   类型 ， 字符串 ， 列表 ， 数组 都 。 语句 看作 先 执行 x = ' a ' 类似 匹配 赋值 操作 ， 执行 缩进 区块 ， 依次 类推 。 （ 语句 支持 序列 解包 赋值 ， 请 参看 ：   11.5 . 1   { reference - type = \" ref \"   reference = \" sec : 序列 解包 赋值 \" } ）   分句     x     ' abc ' :     x   = =   ' b ' :   print ( x )   break   :   print ( ' test ' )   语句 加上 分句 形式 ， 迭代 完 会 执行 分句 。 语句 还 迭代 过程 中 ， break return ， 分句 执行 。   range 函数   range 函数 常 迭代 语句 ， 返回 一个 迭代 对象 。   range ( 1 , 10 , 2 )   range 函数 用法 上 ， 1 10 ， 步长 2 ， list 函数 包裹 ， 将会 输出 [ 1 , 3 , 5 , 7 , 9 ] 。 不 步长 ， range 函数 类似 序列 调出 多个 值 小节   9.3 . 3   { reference - type = \" ref \"   reference = \" sec : 调出 多个 值 \" } 谈论 区间 情况 。 range ( 10 ) 看作 [ 0 , 10 ) ， range ( 1 , 10 ) 看作 [ 1 , 10 ) 。 再 加上 步长 概念 区间 概念 有所不同 。     x     range ( - 10 , - 20 , - 3 ) :   print ( x )   - 10   - 13   - 16   - 19   例子 还 演示 range 负数 概念 ， 区间 概念 考察 ， 理解 ， 行得通 ， 是因为 步长 负数 ， 负数 ， 情况 会 讨论 类似 ， 一个 空值 。   迭代 加上 操作   迭代 信息流 操作 生成 目标 序列 ， 更 内容 请 参见 列表 解析 一节   9.5 . 11   { reference - type = \" ref \"   reference = \" sec : 列表 解析 \" } 。   > > >   squares = [ x * * 2     x     [ 1 , 2 , 3 , 4 , 5 ] ]   > > >   squares   [ 1 ,   4 ,   9 ,   16 ,   25 ]   enumerate 函数   enumerate 函数 返回 一个 enumerate 对象 ， 对象 偏移 值 元素 组合 ， 一个 迭代 对象 。   > > >   enu   =   enumerate ( ' abcd ' )   > > >   [ i     i     enu ]   [ ( 0 ,   ' a ' ) ,   ( 1 ,   ' b ' ) ,   ( 2 ,   ' c ' ) ,   ( 3 ,   ' d ' ) ]   循环   语句 用法 编程语言 类似 ， 条件 控制 ， 循环 结构 。     test :         :       值得一提的是 语句 语句 一个 整体 ， 情况 下 执行 完 执行 语句 不 加上 控制 [ &# 94 ; 8 ] 。 语句 一个 功用 循环 break 语句 执行 跳过去 ， 见 。   break 命令   break 跳出 循环 结构 。 谈到 语句 一个 整体 ， break 跳过 语句 。   continue 命令   continue 命令 接下来 循环 结构 执行 区块 不 执行 ， 跳 条件 判断 循环 。 ， 循环 。 语句 中 continue 命令 。   pass 命令   pass 命令 都 不 做 。 pass 命令 即可 用于 循环 语句 用于 条件 语句 。   pass 命令 都 不 做 意义 ， 一个 空 占位 符 很 有用 。 编写 一个 大型 GUI 程序 ， 信号 － 槽 机制 都 构思 好 ， 函数 暂时 还 没 写 好 ， 函数 ， 空 函数 名 加上 pass 语句 写 上 ， 程序 编写 调试 。",
            "tags":"python语言",
            "url":"articles/pythonyu-yan-xue-xi-zhi-cheng-xu-zhong-de-luo-ji.html"
        },
        {
            "title":"python语言学习之-操作或者函数",
            "text":"函数 一个 对象 ， 函数 对象 。 函数 名 变量名 都 引用 ， 函数 名 带个 括号 才 执行 。 不带 括号 返回 函数 对象 引用 地址 。   > > >   print   < built -   function   print >   理解 函数 一个 对象 ， 例子 中 ， fun 刚 一个 函数 列表 ， 迭代 语句 里 ， multiply 函数 对象 ， 接下来 函数 对象 。 过程 x * a 再 加上 b 。   \\ ( a * x   + b \\ )   x   =   3   def   multiply ( x , a ) :   return   x * a   def   ( x , b ) :   return   x + b   fun   =   [ multiply   ,   ]   para   =   [ 3 , 2 ]     fun , para     zip ( fun , para ) :   x   =   fun ( x , para )   print ( x )   自定义 函数   定义 函数 def 命令 ， 语句 结构 ：   def   yourfunctionname ( para001 , para002 ... ) :     something001     something002   参数传递   函数 参数 值 赋值 形式 [ &# 94 ; 9 ] 传递 ， 有助于 理解 不定 变量 函数 。 函数 参数 名是 意义 ， lambda 函式 理解 ， def 定义 有名 函数 ， 引用 地址 ， 内部 作用 原理 lambda 无名 函式 ， 形式参数 名是 x y 都 无所谓 。 ， 给出 一个 古怪 例子 ：   y = 1   def   test ( x , y = y ) :   return   x + y   print ( test ( 4 ) )   输出 5 。 函数 形式参数 y 外面 y 一个 东西 ， 参数 传递 赋值 形式 ， ？ 解释 函数 形式参数 y 函数 内部   本地 变量   y ， 外面 y 不 ， 理解 请 看 下 一节 （ 变量 作用域 ） 。   ：   > > >   x = [ 1 , 2 , 3 ]   > > >     x     x :   ...   print ( x )   ...   1   2   3   语句 迭代 赋值 操作 ， 语句 刚 定义 x 外面 x 一个 东西 ， 刚 定义 x 语句 内部   本地 变量   。   想到 想起 编写 removeduplicate 函数 一个 ， 语句 针对 列表 可变 迭代 对象 工作 原理 ？ 请 看 例子 ：   > > >   lst = [ 1 , 2 , 3 , 4 ]   > > >     x     lst :   ...   print ( x , lst )   ...   del   lst [ - 1 ]   ...   1   [ 1 ,   2 ,   3 ,   4 ]   2   [ 1 ,   2 ,   3 ]   迭代 对象 惰性 求值 内部 机制 在我看来 很 神奇 ， 还 不 太 ， 例子 列表 惰性 求值 记忆 内部 数值 ， 记忆 （ 合情合理 ） ， 迭代 StopIteration 异常 终止 。   变量 作用域   python 变量 作用域 大部分 语言 c 语言 lisp 语言 概念 都 类似 ， 函数 局部变量 ， 一层 套 一层 ， 引用 外面 ， 外面 不 引用 。   机制 函数 都 命名 空间 ， （ 模块 类似 ） 好像 一个 盒子 封装 内部 变量 。 本地 变量 函数 ， 类似 语句 ； 全局变量 模块 ， 更 确切 表述 文件 ， 比如说 文件 里 ， 导入 模块 变量名 ， 实际上 模块 导入 变量名 都 引入 文件 。   类 继承 类似 一种 搜索 机制 ， 先 搜索 本地 作用域 ， 上 一层 ( def ， lambda ， ) 本地 作用域 ， 全局 作用域 ， 内置 作用域 。 直观 图 所示 ：   简单 来说 python 变量 作用域 ： 盒子 套 盒子 ， 搜索 是从 盒子 最 往外面 寻找 ， 外面 变量 ， 外面 不 。   内置 作用域   内置 作用域 一个   __ builtin __   模块 ， python 作用 机制 会 自动 搜索 内置 模块 变量 。 内置 模块 学习 函数 名 ， print ， range ， 内置 异常 名 。   想到 python 内置 函数 覆盖 定义 ， 事实 确实 ：   > > >   abs ( - 3 )   3   > > >   def   abs ( x ) :   ...   print ( x )   ...   > > >   abs ( 3 )   3   > > >   abs ( - 3 )   - 3   学习 单元测试 会 接触 mock 概念 ， 作用 机制 大体 类似 覆盖 掉 定义 对象 。   global 命令   希望 函数 定义 变量 全局变量 ， 变量 声明 加上   global   命令 即可 。   不 建议 做 ， 做 ， 写 两行 代码 才能 ， 不 推荐 做 。   def   test ( ) :   global   var   var =   ' '   test ( )   print ( var )     就算 做 ， 变量 只能 py 文件 中 引用 ， 文件 不了 。 推荐 做法 写 一个 用于 配置 参数 config . py 文件 ， 全局变量 都 放在 ， 文件 ， import 进来 。 config . py 文件 修改 会 影响 py 文件 配置 ， 全局变量 可管 可控 通用 ， 才 正确 编程 方式 。   nonlocal 命令   nonlocal 命令 python3 才 ， 概念 类似 lisp 语言 闭包 ( closure 技术 ) ， ， 函数 记忆 一点 状态 ， 不想 状态 信息 全局变量 ， 不 希望 用类 方式 ， nonlocal 命令 简单 。   global 意味着 命名 只 一个 嵌套 模块 中 ， nonlocal 查找 只 限于 嵌套 def 中 。 理解 nonlocal 理解 函数 嵌套 函数 情况 - - - - - - 工厂 函数 ， 一个 函数 返回 一个 函数 对象 。 比如说   def   add ( x ) :   x = x   def   action ( y ) :   return   x + y   return   action   > > >   add1 = add ( 1 )   > > >   add1 ( 5 )   6   > > >   add2 = add ( 2 )   > > >   add2 ( 5 )   7   return   action 返回 一个 函数 对象 ， add1 接口 def   action 。 熟悉 lisp 语言 明白 ， action 外面 函数 变量 自由 变量 ， 嵌套 函数 引用 自由 变量 [ &# 94 ; 10 ] 自由 变量 。 声明 nonlocal   x ， 修改 嵌套 函数 外面 声明 变量 。   def   add ( x ) :   x = x   def   action ( y ) :   nonlocal   x   x = x + 1   return   x + y   return   action   > > >   add2 = add ( 2 )   > > >   add2 ( 5 )   8   > > >   add2 ( 5 )   9   > > >   add2 ( 5 )   10   生产 函数 运行 上 状态 性 ， 实际上 类 构建 出 类似 效果 ， 闭包 方式 显得 更 适合 。   给出 一个 稍微 点 例子 ：   def   myrange ( n ) :   i = n   def   action ( ) :   nonlocal   i     i > 0 :   i = i - 1   return   i   return   action   > > >   myrange5 = myrange ( 5 )   > > >   myrange5 ( )   4   > > >   myrange5 ( )   3   > > >   myrange5 ( )   2   > > >   myrange5 ( )   1   > > >   myrange5 ( )   0   > > >   myrange5 ( )   > > >   给出 类似 类 方法 ：   class   myrange   :   def   __ init __   (     ,   n   )   :     .   i   =   n   def   action   (     )   :       .   i   >   0   :   . i   - =   1   return     .   i   > > >   myrange5   =   myrange   (   5   )   > > >   > > >   myrange5   .   action   ( )   4   > > >   myrange5   .   action   ( )   3   > > >   myrange5   .   action   ( )   2   > > >   myrange5   .   action   ( )   1   > > >   myrange5   .   action   ( )   0   > > >   myrange5   .   action   ( )   > > >   编码 思路 上 基本上 没什么 差异 ， 说 稍作 修改 换成 类 版本 。 推荐 类 方法 。 用类 不伦不类 大材小用 。 不 做 进一步 讨论 ， 闭包 思想 函数 编程 中 很 一个 思想 ， 学习 。   参数 默认 参数   定义 函数 圆括号 接受 参数 ， 参数 跟个 号 ， 来个 赋值 语句 ， 赋 值 参数 默认值 。 随便 写个 演示 程序 ：   def   test ( x = ' ' ) :   print ( x )   test ( )   test ( ' world ' )     world   不定 参量 函数   谈到 sum 函数 只 接受 一个 列表 ， 不 支持 形式 ： sum ( 1 , 2 , 3 , 4 , 5 ) 。 设计 一个 接受 不定 任意 数目 参量 函数 。 一种 奇怪 赋值 方式 。   序列 解包 赋值   NOTICE :   python2 不 支持 小节 讨论 序列 解包 赋值 。 python2 函数 定义 中是 支持   * args   写法 。   > > >   a , b , * c = 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9   > > >   print ( a , b , c , sep = '   |   ' )   1   |   2   |   [ 3 ,   4 ,   5 ,   6 ,   7 ,   8 ,   9 ]   > > >   a , * b , c = 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9   > > >   print ( a , b , c , sep = '   |   ' )   1   |   [ 2 ,   3 ,   4 ,   5 ,   6 ,   7 ,   8 ]   |   9   > > >   * a , b , c = 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9   > > >   print ( a , b , c , sep = '   |   ' )   [ 1 ,   2 ,   3 ,   4 ,   5 ,   6 ,   7 ]   |   8   |   9   带上 一个 星号 * 变量 变得 类似 通配符 味道 ， 针对 序列 （ 数组 ， 列表 ， 字符串 ） ， 都 会 元素 收集 一个 列表 ， 说 。   语句 支持 序列 解包 赋值 ， 通配 元素 收集 一个 列表 ， ：     ( a , * b , c )     [ ( 1 , 2 , 3 , 4 , 5 , 6 ) , ( 1 , 2 , 3 , 4 , 5 ) , ( 1 , 2 , 3 , 4 ) ] :   print ( b )   [ 2 ,   3 ,   4 ,   5 ]   [ 2 ,   3 ,   4 ]   [ 2 ,   3 ]   函数 中 通配符   > > >   def   test ( * args ) :   ...   print ( args )   ...   > > >   test ( 1 , 2 , 3 , ' a ' )   ( 1 ,   2 ,   3 ,   ' a ' )   类似 序列 解包 赋值 中 带 星号 表通配 概念 ， 定义 函数 写 上 一个 带 星号 参量 （ 想象 函数 传递 参数 一个 类似 序列 解包 赋值 过程 ） ， 函数 定义 ， args 接受 参量   元组   。   mysum 函数   def   mysum ( * args ) :   return   sum ( args [ : ] )   print ( mysum ( 1 , 2 , 3 , 4 , 5 , 6 ) )   21   定义 接受 任意 参数 mysum 函数 ， 上 所示 。 过程 接受 args （ 已成 一个 元组 ） ， sum 函数 即可 。   任意 数目 可选 参数   函数 定义 写 上 带上 两个 星号 变量 * * args ， args 函数 接受 可选 参数 一个 字典 值 。   > > >   def   test ( * * args ) :   ...   return   args   ...   > > >   test ( a = 1 , b = 2 )   { ' b ' :   2 ,   ' a ' :   1 }   利用 构建 出 一个 简单 词典 对象 生成器 。   解包 迭代 对象 传递 参数   * args 函数 定义 中 ， 通配 参数 放入 元组 中 。 函数调用 中 ， 针对 迭代 对象 ， 一个 * 星号 包含 元素 迭代 ， 参数 一一对应 赋值 。   > > >   map   =   map ( lambda   x : x + 2 , [ 1 , 2 , 3 ] )   > > >   print ( * map )   3   4   5   > > >   print ( * [ 1 , 2 , 3 ] )   1   2   3   最 简单 打印文件 命令   说 文件 一个 迭代 对象 ， 解包 文件 对象 一个 最 简单 打印文件 命令 ， 简单 惊天地泣鬼神 ...   print ( * open ( ' test . py ' ) )   解包 字典 关键字 参数   类似 ， * * args 语法 字典 对象 解包 函数 关键字 参数 。 函数 f 例子 ：   > > >   def   f ( a , b , c = 3 ) :   ...   print ( a , b , c )   > > >   f ( * * { ' c ' : 6 , ' b ' : 4 , ' a ' : 2 } )   2   4   6   > > >   f ( 1 , 2 , 5 )   1   2   5   例子 告诉 选 参数 a b 字典 形式 复制 。   参数 顺序   老实 说 参数 ， 选 参数 （ 关键字 参数 ） ， 任意 （ 通配 ） 参数 ， 任意 （ 通配 ） 关键字 参数 概念 混在 人 困惑 。 顺序 ：   参数 ，   ， 位置 一一对应 分配 参数 。   关键字 参数 ， 匹配 关键字 参数 。   通配 参数 ， 额外 非 关键字 参数 分配 * args 元组 。   通配 关键字 参数 ， 额外 关键字 参数 分配 * * kwargs 字典 ，   。   所示 ：   def   test ( x ,   y ,   c = 1 ,   d = 1 ,   * args ,   * * kwargs ) :   print ( x ,   y ,   c ,   d ,   args ,   kwargs )   写法 python2 python3 兼容 。 python3 新 一个 keyword - 参数 （ 读者 记住 关键字 参数 就行了 ） ， 所示 ：   def   test ( x ,   y ,   c = 1 ,   d = 1 ,   * args ,   z = None   , * * kwargs ) :   print ( x ,   y ,   c ,   d , args ,   kwargs , z )   一点 ， python2 东西 ， python2 python3 兼容性 不用 太 关注 东西 。 看 例子 ， keyword - 参数 极容易 keyword 参数 常说 关键字 参数 混淆 东西 ， keyword - 参数 确实 类似 关键字 参数 ， 常规 关键字 参数 位置 赋值 ， 指定 名字 赋值 。   keyword - 参数 标志 星号 。 所示 ， z 参数 ， 一个 还 赋予 默认值 keyword - 参数 。   def   test ( x ,   y ,   c = 1 ,   d = 1 ,   * args ,   z   , * * kwargs ) :   print ( x ,   y ,   c ,   d , args ,   kwargs , z )   人 只 想 keyword - 参数 ， 通配 参数 不感兴趣 ， 会 写 ：   def   test ( x ,   y ,   c = 1 ,   d = 1 ,   * ,   z   , * * kwargs ) :   print ( x ,   y ,   c ,   d , args ,   kwargs , z )   写 通配 参数 ， 函数 最 只能 接受 4 不 指定 名字 参数 ， x ， y 两个 ， c d 两个 关键字 参数 匹配 两个 。   keyword - 参数 用处   keyword - 参数 用处 其是 一个 不 指定 名字 赋值 关键字 参数 ， 或者说 关键字 参数 中 给出 名字 ， keyword - 参数 。   一点 ， python2 不 支持 东西 ， python2 类似 效果   * * kwargs   写 上 很多 行 代码 才行 ， 所示 ：   def   test ( x ,   y ,   * * kwargs ) :   a   =   kwargs . pop ( ' a ' )   b   =   kwargs . pop ( ' b ' ,   False )   #   第二个 参数 默认 参数 效果     kwargs :   raise   TypeError ( Unexpected   kwargs :   { 0 } ' . format ( kwargs ) )   异常 信息 随便 写 ， 重点 。   生成器 函数   函数 定义 return 语句 ， yield 语句 ， 构建 出 一个 生成器 函数 ，   > > >   def   test ( x ) :   ...     i     range ( x ) :   ...   yield   2 * i +   1   ...   > > >   test ( 3 )   < generator   object   test     0xb704348c >   > > >   [ x     x     test ( 3 ) ]   [ 1 ,   3 ,   5 ]   > > >   [ x     x     test ( 5 ) ]   [ 1 ,   3 ,   5 ,   7 ,   9 ]   生成器 函数 返回 生成器 对象 （ generator   object ） ， yield 形式 定义 生成器 函数 返回 一个 生成器 对象 range 对象 类似 ， 都 描述性 迭代 对象 ， 元素 不 展开 ， 请求 运算 ， 编程 风格 内存 压力 很小 ， 适合 迭代 元素 特别 情况 。   test 函数 简单 理解 2x + 1 ， 0 \\ < = x \\ < n （ 赋 值 ） 。   给出 一个 ： 描述 素数 生成器 函数 。   这是 网上 流行 素数 检验函数 ， 效率 高 。   def   isprime ( n ) :     n   = = 2 :   return   True   # 按位 1 ， 都 0 个位数 1   # 奇数 返回 1 真则 假 ， 偶数 返回   # 0 假则 真   elif   n < 2       n   &   1 :   return   False   # 埃拉托 斯特尼 筛法 ...   # 查 一个 正整数 N 素数 ， 最 简单 方法 试 除法 ，   # 该数 N 小于 等于 N * * 0.5 素数 去 试除 ，   # 若均 整除 ， N 素数     x     range ( 3 , int ( n * * 0.5 ) + 1 , 2 ) :     n   %   x   = =   0 :   return   False   return   True   给出 两种 形式 素数 生成器 函数 ， prime2 （ ） 。 prime ( n ) 第几个 素数 。 生成器 函数 一种 惰性 求值 运算 ， yield 迭代 一次函数 运算 （ yield ） ， 机制 好 神奇 。   def   prime2 ( n ) :     x     range ( n ) :     isprime ( x ) :   yield   x   def   prime ( n ) :   i = 0   x = 1     i < n :     isprime ( x ) :   i   + = 1   yield   x   x   + = 1   加载 函数 做 检验 ：   > > >   isprime ( 479 )   True   > > >   [ x     x     prime2 ( 100 ) ]   [ 2 ,   3 ,   5 ,   7 ,   11 ,   13 ,   17 ,   19 ,   23 ,   29 ,   31 ,   37 ,   41 ,   43 ,   47 ,   53 ,   ........ ]   > > >   [ x     x     prime2 ( 1000 )     100 <   x   <   200 ]   [ 101 ,   103 ,   107 ,   109 ,   113 ,   127 ,   131 ,   137 ,   139 ,   149 ,   ....... ]   > > >   len ( [ x     x     prime2 ( 10000 )     - 1   <   x   <   3572 ] )   500   > > >   [ x     x     prime ( 1 ) ]   [ 2 ]   > > >   [ x     x     prime ( 2 ) ]   [ 2 ,   3 ]   递归 函式   递归 函式 某种程度 上 取代 循环 迭代 程序结构 ， 不 推荐 做 。 谈及 递归 函式 归结为 数学 函数 ， 递归 算法 直观 （ 不 高效 ） 。 菲波 奇函数 ：   def   fib ( n ) :     n = = 0 :   return   1     n = = 1 :   return   1   :   return   fib ( n - 1 ) + fib ( n - 2 )     x     range ( 5 ) :   print ( fib ( x ) )   1   1   2   3   5   ， 数学 来说 ， 递归 算法 表述 简洁 易懂 。 内部 细节 ， 定义 fib 称之为 函式 ， 函式 一种 操作 模式 ， 具体操作 复制出 函式 （ 函数 操作 都 数据 ） ， 函式 扩展 生成 函数 操作 。   看 递归 函式 写 阶乘 函数 ， 简洁 ， 最美 方法 。   def   fact ( n ) :     n   = =   0 :   return   1   :   return   n * fact ( n - 1 )   print ( fact ( 0 ) , fact ( 10 ) )   1   3628800   递归 ？   最 推荐 递归 情况 情况 ， 一份 工作 （ 函数 ） 执行 一遍 感觉 工作 做 完 ， 做 一小部分 ， 进展 ， 好比 蚂蚁 吞 大象 ， 递归 思想 。 一种 情况 表面 上 看 进展 ， 事情 发展 ， 感受 一个 条件 最终 将会 终止 程序 一个 输出 ， 递归 。   递归 思想 最 核心 两个 概念 一做 一小部分 工作 ， 感觉 做 做 事情 会 做 完 ； 二有 一个 终止 判断 最终 将会 作用 。   递归 函式 类似 迭代 结构 ， 递归 函式 不 滥用 。 递归 函式 生成 一种 执行 操作 n 次 结构 ：   def   dosomething ( n ) :     n = = 0 :   pass   elif   n = = 1 :   print ( ' ! ' )   :   print ( ' ! ' )   return   dosomething ( n - 1 )   print ( dosomething ( 5 ) )   !   !   !   !   !   None   ， print 语句 换成 操作 ， 机器人 向前走 一步 ， dosomething 换个 名字 向前走 ( 5 ) 成 向前走 5 步 。   lisp car - cdr 递归 技术   lisp 语言 中 ，   car - cdr 递归 技术 很 一门 技术 ， 特长 遍历 随意 嵌套 列表 结构 列表 中 一个 元素 执行 某种 操作 。   来看 例子 ， 一个 任意 嵌套 列表 元素 放入 一个 列表 中 函数 ：   lst   =   [ [ 1 , 2 , [ 3 ] ] , [ 4 , [ 5 , [ [ [ [ 10 ] , 11 ] ] ] ] , ( 1 , 2 , 3 ) ] , [ { ' a ' , ' b ' , ' c ' } , 8 , 9 ] ]   def   _ list ( thing ) :   return   isinstance ( thing ,   list )   def   flatten ( iter ) :   templst   =   [ ]     x     iter :       _ list ( x ) :   templst . append ( x )   :   templst   + =   flatten ( x )   return   templst   print ( flatten ( lst ) )   [ 1 ,   2 ,   3 ,   4 ,   5 ,   10 ,   11 ,   ( 1 ,   2 ,   3 ) ,   { ' c ' ,   ' b ' ,   ' a ' } ,   8 ,   9 ]   函数 逻辑 最小 元素 对象 列表 ， 收集 进 列表 ； ， 展开 ， 调用 原函数 展开 函式 。   例子 意义 上 来讲 还 不算 lisp 经典 car - cdr 递归 技术 ， 给出 一个 典型 例子 ， 复制 任意 嵌套 结构 列表 。 列表 copy 方法 做 工作 ， 例子 进一步 car - cdr 技术 。   def   _ list ( thing ) :   return   isinstance ( thing ,   list )   def   copy _ list ( lst ) :       _ list ( lst ) :   return   lst   elif   lst   = =   [ ] :   return   [ ]   :   return   [ copy _ list ( lst [ 0 ] ) ]   +   copy _ list ( lst [ 1 : ] )   print ( copy _ list ( [ 1 , [ 2 , 6 ] , 3 ] ) )   嵌套 列表 复制 修改 操作 ， 最合适 lisp car - cdr 技术 ， 不得不 承认 ， 递归 写法 递归 函式 最 难懂 。   不管怎么 ， 基础 之上 ， 第一个   语句 中 传递 lst 实际上 是非 列表 元素 ， 修改 操作 ， 原 列表 嵌套 基础 上 ， 等于 遍历 列表 中 元素 某种 操作 。   元素 都 平方 ：   def   square ( x ) :   return   x * * 2   def   square _ list ( lst ) :       _ list ( lst ) :   return   square ( lst )   elif   lst   = =   [ ] :   return   [ ]   :   return   [ square _ list ( lst [ 0 ] ) ]   +   square _ list ( lst [ 1 : ] )   print ( square _ list ( [ 1 , [ 2 , 6 ] , 3 ] ) )   想像 功能 函数 作用 列表 中 元素 不 原 列表 嵌套 结构 ， lisp car - cdr 技术 ， 嵌套 结构 ？ 也许 。 。   lambda 函式   lambda   λ 表达式 刚 介绍 lisp 语言 已 ， 简单 来说 函数 一个 映射 规则 ， 变量名 ， 函数 名 都 无所谓 。 名字 函数 。   样子 所示 ：   f = lambda   x , y , z : x + y + z   print ( f ( 1 , 2 , 3 ) )   6   lanmbda 函式 情况 下要 用到 ， pyqt 信号 － 槽 机制 connect 方法 ， 槽 函数 名 无参 函数 ， 用户 想 参量 ， lamba 函式 引入 。   读者 lambda 函式 表达 不太熟悉 强烈建议 先 简单 学一学   scheme   语言 。   print 函数   print 函数 很 常用 基础 ， 放在 。   print 函数 接受 任意 参量 ， 逐个 打印 。 关键字 参数 ，   sep   ： 默认值 '   ' ， 一个 空格 ， 修改 为空 字符串 ， 逐个 打印 字符 之间 间隔 。   end   ： 默认值 ' \\ n ' ，   file   默认值 sys . stdout ， 终端 显示 ， 修改 文件 变量 ， 文件 输出 内容 。     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"python语言",
            "url":"articles/python-talk-three.html"
        },
        {
            "title":"python语言学习之-程序中的操作对象",
            "text":"python c 语言 ， c     int   x   =   3   ， 变量 整数 ， 字符 都 指定 ， python 不 做 ， 只 声明   x   ＝   3   即可 。 程序语言 一个 变量 （ 包括 结构 对象 ） 内存 分配 ， python 语言 帮 工作 做 ， 就让 省下 这份 心 。   ' ' '   这是 一个 多行 注释   写 上 很多 废话   ' ' '   x   =   10   print ( x , type ( x ) )   python 程序 模块 （ modules ） ， 模块 文件 。 模块 声明 （ statements ） ， 声明 表达式 （ expressions ） ， 表达式 负责 创造 操作 对象 （ objects ） 。 python 中 皆 对象 。 python 语言 内置 对象 （ 数值 、 字符串 、 列表 、 数组 、 字典 、 文件 、 集合 、 内置 对象 。 ） 会 详细 。   赋值   python 中 赋值 语法 简单 ， x = 1 ， 一个 赋值 语句 。 c 语言 ， c 先 声明 int   x ， 开辟 一个 内存空间 ， 才能 x 赋值 。 python x = 1 语句 实际上 至少 三个 工作 ： ， 判断 1 类型 （ 动态 类型 语言 这步 ） ； 二 ， 类型 对象 存储 内存 ； 三 ， 创建 x 名字 名字 指向 内存 ， x 称之为 c 语言 指针 对象 。   序列 赋值   x , y = 1 , ' a '   [ z , w ] = [ ' b ' , 10 ]   print ( x , y , z , w )   1   a   b   10   > > >   记得 python 中 表达式 加上 圆括号 ，   x , y   一个 数组   ( x , y )   ， 数组 平行 赋值 ， 第二行 列表 平行 赋值 。 这是 一个 很 有用 技巧 。   语言 会 介绍 swap 函数 ， 接受 两个 参数 两个 参数 值 交换 ， 交换 过程 用到 临时 变量 。 python 中 不 再 创建 一个 临时 变量 ， 序列 赋值 会 自动 生成 一个 临时 右边 序列 （ 变量 都 原始 值 ） ， 再 赋值 （ 一一对应 指 两边 序列 长度 。 ）   交换 两个 元素   python 中 交换 两个 元素 序列 赋值 形式 很 便捷 ：   > > >   x   =   1   > > >   y   =   2   > > >   x , y   =   y , x   > > >   print ( x , y )   2   1   过程 先 执行 x = y 执行 y = x ， ， 程序 右边 创建 一个 临时 序列 ， 变量 都 值 ，   x , y = ( 2 , 1 )   ， 再 序列 赋值 。   赋 值   x = y = ' a '   z = w = 2   print ( x , y , z , w )   a   a   2   2   > > >   语句 形式 c 语言 ， 内部 机制 不 。 python 声明 x = y ， x y 指针 值 ， 指针 值 都 指向 ' a ' 字符串 对象 ， 说 x y 一个 东西 ， 取 名字 。   语句   1   测试 ， 显示 x y 一个 东西 。   > > >   x = y = ' a '   > > >   x     y   True   > > >   x   = =   y   True   写成 形式 ：   > > >   x   =   ' a '   > > >   y   =   ' a '   > > >   x     y   True   x y 指向 同一个 对象 ， python 内部 还 不 太 （ 神奇 ） 。 语句 功能 再 举个 例子 ：   > > >   x   =   [ 1 , 2 , 3 ]   > > >   y   =   [ 1 , 2 , 3 ]   > > >   x   = =   y   True   > > >   x     y   False   两个 列表 对象 。   增强 赋值 语句   x = x + y 写作 x   + =   y 。 类似 ：   + =   & =   > > =   - =   | =   \\ < \\ < =   * =   \\ &# 94 ; =   * * =   / =   \\ % =   / / =   序列 解包 赋值   迭代 对象 迭代 赋值   python 语言 ， 发现 python 中 迭代 思想 深入骨髓 。 接触 序列 赋值 模式 ， 发现 赋值 临时 创建 右边 序列 之外 ， 还 迭代 操作 ， 推测 python 平行 赋值 模式 扩展 迭代 对象 ， 发现 确实 ！   > > >   x , y , z =   map ( lambda   x   :   x + 2 , [ - 1 , 0 , 1 ] )   > > >   print ( x , y , z )   1   2   3   一点 确保 左边 变量 数目 迭代 对象 输出 元素 数目 ， 进一步 扩展 序列 解包 赋值 支持 ：   > > >   x , y , * z =   map ( lambda   x   :   x + 2 , [ - 1 , 0 , 1 , 2 ] )   > > >   print ( x , y , z )   1   2   [ 3 ,   4 ]   通配 赋值 ， 喜欢 称呼 ， 通配 收集 元素 列表 ； 函数参数 通配 传递 ， 收集 元素 元组 。   ， 迭代 对象 赋值 迭代 操作 加上 元素 一对一 赋值 操作 。   数值   python 数值 内置 类型 ： int ， float ， complex   2   。 \\   python 算术 运算 操作 加减乘除 （ +   -   *   / ） 。 ' = ' 赋值 ， 类似 数学 书上 中缀 表达式 优先级 括号 法则 ， 都 编程语言 说 烂 东西 。   print ( ( 1 + 2 ) * ( 10 - 5 ) / 2 )   print ( 2 * * 100 )   二进制 八进制 十六进制   二进制 数字 0b （ 零比 ） 开头 ， 八进制 数字 0o （ 零 ） 开头 ， 十六进制 数字 0x （ 零 艾克斯 ） 开头 。   0b101010 ,   0o177 ,   0x9ff   二进制 格式 查看 数字 bin 命令 ， 十六进制 查看 数字 hex 命令 。   > > >   bin ( 42 )   ' 0b101010 '   > > >   hex ( 42 )   ' 0x2a '   进制 转换 小 程序   number = input ( \" 请 输入 一个 数字 ： \" )   number =   eval ( number )   #   radix =   input ( ' ' ' 请 输入 想 转换 进制 系统   2     二进制   8     八进制   16     十六进制   ' ' ' )   radix   = eval ( radix )     True :     radix   = =   2 :   print ( bin ( number ) )   break   elif   radix   = =   8 :   print ( oct ( number ) )   break   elif   radix   = =   16 :   print ( hex ( number ) )   break   :   print ( \"     input     wrong   radix \" )   程序运行 情况 所示 ：   请 输入 一个 数字 ： 20   请 输入 想 转换 进制 系统   2     二进制   8     八进制   16     十六进制   8   0o24   基于 字符串 进制 转换 字符串 format 方法 。   数学 幂方 运算   \\ ( x &# 94 ; y \\ )   ， x y 次方 第二行 所述   x * * y   形式 即可 。 pow 函数 作用 ，   pow ( x , y )   。   数值   数值 提及 > ， \\ < ， = = 之外 ， > = ， \\ < = ， ! = （ 大于 等于 ， 小于 等于 ， 不 等于 ） 。 python 还 支持 连续 ， 数学 格式   \\ ( a < x < b \\ )   ， x 区间   \\ ( ( a , b ) \\ )   判断 。 python 中 写成 形式 ：   a < x < b   。 过程 两个 操作 进一步 操作 。   相除 取商 余   正整数 相除   x / / y   值 意义 很   商   。 带上 负号 感觉 怪 ， 先 略过 。 相关   取余   数 ，   x% y   ， x 除以 y 余数 ， 带上 负号 情况有变 ， 先 略过 。   复数   python 支持 复数 ，   复数 写法 类似   1 + 2j   形式 ， z 赋值 一个 复数 ， 一个 复数 类型 ， 类 两个 属性 量 ，   real     imag   。   z . real   给出 复数 实数 部 。 imag imaginary   number 缩写 ， 虚数 ， 想像出来 数 。   abs 函数   都 abs 函数 绝对值 函数 ， python 自带 ， 不 加载 模块 。 作用 复数 ：   z = 3 + 4j   print ( z . real , z . imag )   print ( abs ( z ) )   数学 中 复数 绝对值 定义 完全一致 ， 复数的模 ：   \\ ( \\ left |   z   \\ |   = \\ sqrt   {   a &# 94 ; {   2   } + b &# 94 ; {   2   }   } \\ )   round 函数   简单 理解 函数 数值 功能 。   > > >   round ( 3.1415926 )   3   > > >   round ( 3.1415926 , 0 )   3.0   > > >   round ( 3.1415926 , 1 )   3.1   > > >   round ( 3.1415926 , 2 )   3.14   > > >   round ( 3.1415926 , 4 )   3.1416   第二个 参数 接受 0 负数 没 意义 ， 取 1 大于 1 数 ， 保留 几位 小数 。   min ， max sum 函数   min ， max 函数 用法 sum 用法 稍微 差异 ， 简单 见 min ， max ， sum 都 接受 一个 元组 列表 （ ？ ） ， 返回 元组 列表 最小值 ， 最大值 相加 总和 。 min max 还 支持 min ( 1 , 2 , 3 ) 形式 ， sum 不 支持 。   > > >   min ( ( 1 , 6 , 8 , 3 , 4 ) )   1   > > >   max ( [ 1 , 6 , 8 , 3 , 4 ] )   8   > > >   sum ( [ 1 , 6 , 8 , 3 , 4 ] )   22   > > >   min ( 1 , 6 , 8 , 3 , 4 )   1   位操作   python 支持 位操作 ， 简单 说 ： 位 左移 操作 \\ < \\ < ， 位 操作 & ， 位 操作 | ， 位 异或 操作 \\ &# 94 ; 。   > > >   x = 0b0001   > > >   bin ( x   < <   2 )   ' 0b100 '   > > >   bin ( x   |   0b010 )   ' 0b11 '   > > >   bin ( x   &   0b1 )   ' 0b1 '   > > >   bin ( x   &# 94 ;   0b101 )   ' 0b100 '   math 模块       math   import   *   ， 符号 pi e 引用 圆周率 自然 常数 。 math 模块 还 提供 很多 数学 函数 ， ：   sqrt   开 平方根 函数 ， sqrt ( x ) 。   sin   正弦 函数 ， 类似 cos ， tan ， sin ( x ) 。   degrees   弧度 转化 角度 ， 三角函数 默认 输入 弧度 值 。   radians   角度 转化 位 弧度 ， radians ( 30 ) 。   log   开 对数 ， log ( x , y ) ，   \\ ( \\ log _ y   x \\ )   ， y 默认 e 。   exp   指数函数 ， exp ( x ) 。   pow   扩展 内置 方法 ， 支持 float 。 pow ( x , y )   简单 写个 例子 ：   > > >     math   import   *   > > >   print   (   pi   )   3.141592653589793   > > >   print   (   sqrt   (   85   ) )   9.219544457292887   > > >   print   (   round   (   sin   (   radians   (   30   ) ) ,   1   ) )   # sin ( 30 ° )   0.5   更 内容 请 参见   官方 文档   。   random 模块   random 模块 提供 函数 解决 随机数 。   random   random 函数 0 1 之间 随机 实数 （ 包括 0 ） 。 \\   ​   random ( ) - > [ 0.0 ,   1.0 ) 。   uniform   uniform 函数 a b 之间 随机 实数 （ a ， b 值 指定 ， 包括 a 。 ） 。 \\   ​   uniform ( a , b ) - > [ a.0 ,   b.0 ) 。   randint   randint 函数 a b 之间 随机 整数 ， 包含 a b 。 \\   ​   randint ( a , b ) - > [ a , b ]   choice   choice 随机 一个 列表 字符串 中 取出 一个 元素 。   randrange   randrange 函数 a b 之间 随机 整数 ， 步长 c （ a ， b ， c 值 指定 ， 相当于 choice ( range ( a , b , c ) ) 。 整数 之间 randint 函数 ， 函数 针对 range 函数 步长 生成 整数 序列 情况 。   sample ( p , k )   sample 函数 p 中 随机 选取 唯一 元素 （ p range ( n ) 集合 ， 唯一 不放回 抽样 ， p 样品 重复 元素 ， 生成 列表 会 重复 元素 。 ） k 长度 列表 返回 。   一个 简单 例子 ：   > > >     random   import   *   > > >   print   (   random   ( ) )   0.36882919781549717   > > >   print   (   uniform   (   1   ,   10   ) )   2.771065174892699   > > >   print   (   randrange   (   1   ,   6   ) )   1   > > >   print   (   randint   (   1   ,   10   ) )   3   > > >   print   (   choice   (   ' abcdefghij '   ) )   j   > > >   print   (   choice   ( [   ' 1 '   ,   ' 2 '   ,   ' 3 '   ] ) )   2   随机 实数 ， 包含 临界值 数学 意义 大于 价值 ， 写 一个 类似 小 脚本 看 ， 随机 实数 很 难 随机 数 。     random   import   *   i   =   0     True   :   x   =   uniform   (   0   ,   2   )     x   = =   0   :   print   (   i   )   break     :   print   (   x   )   i   + =   1   上 一个 例子 ， 不 随机 实数 概率 永远 ， 肯定 很小 很小 。 解决 ， 概率 随机 整数 好 。   更 内容 请 参见   官方 文档   。   statistics 模块   模块 python3.4 才 进来 。   例子 稍作 修改 ， 使 一个 骰子 模拟器 。   i _ list   列表 收集 实验 中掷 次 骰子 才 6 次数 。     random   import   *   i _ list   =   [ ]     len   (   i _ list   )   <   100   :   i   =   1     True   :   # 实验   x   =   randint   (   1   ,   6   )     x   = =   6   :   print   (   ' times : '   ,   i   )   break     :   print   (   x   )   i   + =   1   i _ list   .   append   (   i   )   print   (   i _ list   )     statistics   import   *   print   (     (   i _ list   ) )   # 平均值   print   (   median   (   i _ list   ) )   # 中位数 ， 去掉 最低 ...   statistics 模块 中     函数 接受 一组 数值 列表 ， 返回 这组 数值 平均值 。   median   函数 返回 统计学 上 中位数 ， 简单 看作 一组 数字 去掉 一个 最低 ， 剩下 一个 两个 （ 两个 要取 平均值 ） 数值 值 。   更 内容 请 参见   官方 文档   。   序列   字符串 ， 列表 ， 元组 （ tuple ， 翻译成 元组 ， 内容 不 数值 。 ） 都 序列 （ sequence ） 子类 ， 序列 性质 都 ， 讲 理解 记忆 。   len 函数   len 函数 返回 序列 含 元素 个数 ：   string001 = ' string '   list001 = [ ' a ' , ' b ' , ' c ' ]   tuple001 = ( 1 , 2 , 3 , 4 )     x     [ string001 , list001 , tuple001 ] :   print ( len ( x ) )   6   3   4   > > >   调出 值   序列 来说 跟个 方括号 ， 加上 序号 （ 程序 界 老规矩 ， 0 计数 。 ） ， 调出 位置 值 。 还 例子 。   string001 = ' string '   list001 = [ ' a ' , ' b ' , ' c ' ]   tuple001 = ( 1 , 2 , 3 , 4 )     x     [ string001 , list001 , tuple001 ] :   print ( x [ 2 ] )   r   c   3   > > >   倒   倒 计数 - 1 倒数 第一个 ， - 2 倒数 第二个 。 依次 类推 。   string001 = ' string '   list001 = [ ' a ' , ' b ' , ' c ' ]   tuple001 = ( 1 , 2 , 3 , 4 )     x     [ string001 , list001 , tuple001 ] :   print ( x [ - 1 ] , x [ - 2 ] )   g   n   c   b   4   3   调出 多个 值   不写 从头开始 ， 不写 到达 尾部 。 加个 冒号 形式 。     元素 进来 ， python 区间 默认 含义 都 包头 不 包尾 。 想要 一个 元素 进去 ， 默认 不 写 形式 。   string001 = ' string '   list001   =   [   ' a '   ,   ' b '   ,   ' c '   ]   tuple001 =   (   1   ,   2   ,   3   ,   4   )     x     [   string001   ,   list001   ,   tuple001   ]   :   print   (   x   [   1   :   3   ] ,   x   [   -   2   : -   1   ] ,   x   [ : -   1   ] ,   x   [   1   :   ] ,   x   [   1   : -   1   ] )   tr   n   strin   tring   trin   [   ' b '   ,   ' c '   ]   [   ' b '   ]   [   ' a '   ,   ' b '   ]   [   ' b '   ,   ' c '   ]   [   ' b '   ]   (   2   ,   3   )   (   3   , )   (   1   ,   2   ,   3   )   (   2   ,   3   ,   4   )   (   2   ,   3   )   数学 半开 半闭 区间 定义 理解 包含 关系 很 便捷 。   数学 半开 半闭 区间 ， 左 元素 右 元素 都 叙述 定位点 。 左 元素 包含 右 元素 不 包含 。   方向 从左到右 ， 定义 区间 从右到左 ， 空值 。   区间 超过 ， 从左到右 包含 元素 ， 。   元素 定位点 ， 空值 ， ： \\   string001 [ 2 : - 4 ]   ， 2 - 4 实际上 定位 同一个 元素 之上 。 额外 值得一提 列表 插入 操作 ， 请 参看 列表 插入 操作 这一 小节 。   序列 反转   这是 python 最 令人 叹为观止 地方 ， 语言 列表 反转 编写 一个 函数 ， python 一种 令人感动 方法 。   string001 = ' string '   list001   =   [   ' a '   ,   ' b '   ,   ' c '   ]   tuple001 =   (   1   ,   2   ,   3   ,   4   )     x     [   string001   ,   list001   ,   tuple001   ]   :   print   (   x   [   : : -   1   ] )   gnirts   [   ' c '   ,   ' b '   ,   ' a '   ]   (   4   ,   3   ,   2   ,   1   )   range 函数 介绍 时 提及 序列 索引 range 函数 参数设置 很 类似 ， 这是 参考 理解 ， 序列 （ 列表 ， 字符串 ） 索引 参数   [ start : end : step ]   range 函数 参数设置 ， 第一个 参数 起步 值 ， 第二个 参数 结束 值 ， 第三个 参数 步长 。 end 不 填 都 好 理解 ， 迭代 完 即可 ， step 负数 ， 起点 不填 默认 - 1 。   range 函数 生成 迭代 器 对象 接受 索引 参数 语法 ， 看上去 怪异 ：   > > >   range   (   1   ,   10   ,   2   )   range   (   1   ,   10   ,   2   )   > > >   range   (   1   ,   10   ,   2   ) [   : : -   2   ]   range   (   9   ,   -   1   ,   -   4   )   > > >   list   (   range   (   1   ,   10   ,   2   ) )   [   1   ,   3   ,   5   ,   7   ,   9   ]   > > >   list   (   range   (   1   ,   10   ,   2   ) [   : : -   2   ] )   [   9   ,   5   ,   1   ]   range 函数 切片 操作 返回 一个 range 对象 ， 修正 。 切片 操作 类 方法 ， python slice 对象 。   序列 可更改 性   字符串 不 更改 ， 组合 新 字符串 ； 列表 更改 ； 元组 不 更改 。   序列 加法 减法   两个 字符串 相加 字符串 拼接 。 乘法 加法 重复 ， 一个 字符串 乘以 一个 数字 拼接 几次 。 列表 元组 字符串 大致 情况 类似 。   print ( ' abc ' + ' def ' )   print ( ' abc ' * 3 )   print ( [ 1 , 2 , 3 ] + [ 4 , 5 , 6 ] )   print ( ( 0 , ' a ' ) * 2 )   abcdef   abcabcabc   [ 1 ,   2 ,   3 ,   4 ,   5 ,   6 ]   ( 0 ,   ' a ' ,   0 ,   ' a ' )   字符串   python 语言 不像 c 语言 ， 字符 字符串 不分 ， 单引号 双引号 包 一个 字符串 。 单引号 双引号 特别 区别 ， 字符串 单引号 ， 双引号 ， 单引号 字符 不 转义 - - - - - - 转义 很多 编程语言 \\ 符号 。 显示   '   输入   \\ '   。   三 单引号 三 双引号   单引号 双引号 情况 下 ，   \\ n   换行 ， \\ n 换行 。 还 三 单引号 \" ' 三 双引号 \\ \" \\ \" \\ \" 包围 横跨 多行 字符串 ， 换行 意义 换行 ， 不 似 。   print ( ' ' ' \\   这是 一段 测试 文字       a   test   line   空白   换行 都 所见 所得 式 保留 。 ' ' ' )   startswith 方法   > > >   x   =   ' helloABC '   > > >   x   ' helloABC '   > > >   x . startswith ( ' ' )   True   > > >   x . endswith ( ' ABC ' )   True   startswith   测试 字符串 子 字符串   endswith   测试 字符串 子 字符串 结束   find 方法   字符串 find 方法 可用 查找 子 字符串 ， 找到 返回 - 1 ， 找到 返回 字符串 偏移量 。 用法 ：   s . find ( ' d ' )   。   replace 方法   字符串 replace 方法 替换 操作 ， 接受 两个 参数 ： 第一个 参数 匹配 子 字符串 ， 第二个 参数 替换 样子 。   > > >   print ( ' a   b   11   de ' . replace ( ' de ' , ' ding ' ) )   a   b   11   ding   > > >   print ( ' 1 , 1 , 5 , 4 , 1 , 6 ' . replace ( ' 1 ' , ' replaced ' ) )   replaced , replaced , 5 , 4 , replaced , 6   upper 方法   字符串 转换成 大写 形式 。   > > >   str = ' str '   > > >   str . upper ( )   ' STR '   类似 ：   lower   都 小写   capitalize   首字母 大写 ， 都 小写 。   isdigit 方法   isdigit   测试 数字   isalpha   测试 字母   isalnum   测试 数字 字母   。   split 方法   字符串 split 方法 字符串 空格 逗号 分隔符 分割 而成 ， 分割 成子 字符串 列表 。 默认 空格 分隔符 。   > > >   string = ' a = 1 , b = 2 , c = 3 '   > > >   string . split ( ' , ' )   [ ' a = 1 ' ,   ' b = 2 ' ,   ' c = 3 ' ]   splitline 方法   一个 字符串 行 分开 。 split 方法 接受   \\ n   参数 ， splitline 方法 不 接受 参数 ：   > > >   string   '     line   \\ nthis     line   \\ nthis     line   '   > > >   string . splitlines ( )   [ '     line   ' ,   '     line   ' ,   '     line   ' ]   > > >   string . split ( ' \\ n ' )   [ '     line   ' ,   '     line   ' ,   '     line   ' ]   join 方法   字符串 join 方法 有用 ， 严格来说 接受 一个 迭代 器 参数 ， 最 常见 列表 。 列表 中 多个 字符串 连接起来 ， 采用 一种 优雅 方式 ， 两个 字符串 之间 才 插入 字符 ， 正是 。 例子 所示 ：   > > >   list001 = [ ' a ' , ' b ' , ' c ' ]   > > >   \" \" . join ( list001 )   ' abc '   > > >   ' , ' . join ( list001 )   ' a , b , c '   strip 方法   rstrip 方法   字符串 右边 空格 都 删除 。 换行符 会 删除 掉 。   lstrip 方法   类似 rstrip 方法 ， 字符串 左边 空格 都 删除 。 换行符 会 删除 掉 。   format 方法   字符串 format 方法 字符串 内 变量 替换 操作 ， 花 括号 不带 数字 format 方法 替换 量 ， 带 数字 0 第一个 替换 量 ， 类推 。 还 名字 引用 。   > > >   print ( ' 1 + 1 = { 0 } ， 2 + 2 = { 1 } ' . format ( 1 + 1 , 2 + 2 ) )   1 + 1 = 2 ， 2 + 2 = 4   > > >   print ( '       { } ' . format ( = ' Jim   T   Kirk ' ) )         Jim   T   Kirk   转义 不 转义   \\ n   \\ t   这是 常用 转义字符 ， 换行 制表 。   \\ \\   输出 \\ 符号 。   输出 字符串 不想 转义 格式 ：   > > >   print ( r ' \\ t   \\ n   \\ test ' )   \\ t   \\ n   \\ test   count 方法   统计 字符串 中 字符 连续 子 字符串 次数 。   > > >   string   =   '     a   test   line . '   > > >   string . count ( ' ' )   1   > > >   string . count ( ' t ' )   3   r 方法   rfind   rindex   rjust   rsplit   ， 方法 会 很 有用 ， 含义 理解 ：   find   index   ljust   split 。   想 看 ， 区别 是从 右往 左 。   列表   方括号 包含 几个 元素 列表 。   列表 插入 操作   字符串 数组 都 不 更改 不 ， 列表 。 列表 还 一种 定位 元素 区间 方法 插入 操作 ， 理解 区间 违和 ， 定位 元素 区间 本来 概念 模糊 ， 看作 特例 ， 视作 插入 。   list001   =   [   ' '   ,   ' '   ,   ' '   ]   list001   [   1   : -   2   ]   =   [   ' '   ,   ' '   ]   print   (   list001   )   [   ' '   ,   ' '   ,   ' '   ,   ' '   ,   ' '   ]   extend 方法 列表 之间 加法 重合 ， list . extend ( [ 4 , 5 , 6 ] ) list = list + [ 4 , 5 , 6 ] ， 加法 还 自由选择 覆盖 原 定义 ， 实际上 自由 。   insert 方法 列表 插入 操作 ：   > > >   list   =   [ 1 , 2 , 3 , 4 ]   > > >   list . insert ( 0 , 5 )   > > >   list   [ 5 ,   1 ,   2 ,   3 ,   4 ]   > > >   list . insert ( 2 , ' a ' )   > > >   list   [ 5 ,   1 ,   ' a ' ,   2 ,   3 ,   4 ]   append 方法   python append 方法 面加   一个 元素   ， append 一个 列表 一个 列表 整体 一个 元素 。 append 方法 会 永久 改变 列表 对象 值 。   记住 ， append 原处 修改 列表 方法 都 返回值 。   ​   > > >   list   =   [ 1 , 2 , 3 , 4 ]   ​   > > >   list . append ( 5 )   ​   > > >   list   ​   [ 1 ,   2 ,   3 ,   4 ,   5 ]   希望 不 改动 原 列表 附加 ， 请 加法 操作 列表 。   reverse 方法   reverse 方法 不 接受 参数 ， 一个 列表 翻转 。 希望 不 改变 原 列表 翻转 ， 返回值 ， 请 方法 ：   > > >   list   [   1   ,   2   ,   3   ,   4   ,   5   ]   > > >   listNew   =   list   [   : : -   1   ]   > > >   list   [   1   ,   2   ,   3   ,   4   ,   5   ]   > > >   listNew   [   5   ,   4   ,   3   ,   2   ,   1   ]   copy 方法   copy 方法 复制 返回 列表 。   sort 方法   排序 ， 改变 列表 。 默认 递增 排序 ，   reverse = True   调成 递减 排序 。   默认 递增 排序 顺序 数字 数字 越来越 大 ， 字符 （ ） ACSII 码 编号 递增 排序 。 列表 数字 字符 会 报错 。   > > >   list   =   [ ' a ' , ' ab ' , ' A ' , ' 123 ' , ' 124 ' , ' 5 ' ]   > > >   list . sort ( )   > > >   list   [ ' 123 ' ,   ' 124 ' ,   ' 5 ' ,   ' A ' ,   ' a ' ,   ' ab ' ]   sort 方法 很 一个 选 参数   key = function   ， function 函数 定义 函数 （ lambda 语句 。 ） ， 函数 只 接受 一个 参数 ， 排序 方法 （ 迭代 列表 时 ） 接受 元素 。 给出 一段 代码 ， tostr 函数 接受 对象 返回 字符 ， 出错 。   def   tostr ( item ) :   return   str ( item )   list001   =   [ ' a ' , ' ab ' , ' A ' , 123 , 124 , 5 ]   list001 . sort ( key = tostr )   print ( list001 )   [ 123 ,   124 ,   5 ,   ' A ' ,   ' a ' ,   ' ab ' ]   sorted 函数   sorted 函数 列表 sort 方法 区别 返回 原处 修改 。 sorted 函数 第一个 参数 严格来说 迭代 对象 ， 也就是说 还 接受 列表 之外 迭代 对象 。 用法 两个 差别 不 大 。   > > >   sorted ( ( 1 , 156 , 7 , 5 ) )   [ 1 ,   5 ,   7 ,   156 ]   > > >   sorted ( { ' andy ' : 5 , ' Andy ' : 1 , ' black ' : 9 , ' Black ' : 55 } , key = str . lower )   [ ' Andy ' ,   ' andy ' ,   ' black ' ,   ' Black ' ]   第二个 例子 调用   str . lower   函数 ， 接受 item ， 比如说 ' Andy ' ， 转化 andy ， 参与 排序 。 成 英文字母 大小写 不 敏感 排序 方式 。   字典 按值 排序   类似 字典 按值 排序 方法   3   ：   > > >   sorted ( { ' andy ' : 5 , ' Andy ' : 1 , ' black ' : 9 , ' Black ' : 55 } . items ( ) , key = lambda   i :   i [ 1 ] )   [ ( ' Andy ' ,   1 ) ,   ( ' andy ' ,   5 ) ,   ( ' black ' ,   9 ) ,   ( ' Black ' ,   55 ) ]   例子 先 字典 items 方法 返回 ( key , ) 迭代 对象 ， lambda 方法 返回 接受 item 值 ， 值来 排序 。   中文 排序   例子 演示 中文 名字 排序 。 函数 思路   pypinyin   （ 一个 第三方 模块 ） ， 中文 姓名 拼音 ， 一个 列表 ， 拼音 组合 列表 排序 ， 生成 目标 列表 。   list001   =   [   ' 张三 '   ,   ' 李四 '   ,   ' 王二 '   ,   ' 麻子 '   ,   ' 李二 '   ,   ' 李一 '   ]   def   zhsort   (   lst   ) :     pypinyin   import   lazy _ pinyin   pinyin   =   [   lazy _ pinyin   (   lst   [   i   ] )     i     range   (   len   (   lst   ) ) ]   lst0   =   [ (   a   ,   b   )     (   a   ,   b   )     zip   (   lst   ,   pinyin   ) ]   lst1   =   sorted   (   lst0   ,   key   =   lambda   d   :   d   [   1   ] )   return   [   x   [   0   ]     x     lst1   ]   print   (   zhsort   (   list001   ) )   [   ' 李二 '   ,   ' 李四 '   ,   ' 李一 '   ,   ' 麻子 '   ,   ' 王二 '   ,   ' 张三 '   ]   reversed 函数   提到 序列 反转 做 :   lst   [   : : -   1   ]   推荐 做法 reversed 函数 做 ， reversed 函数 返回 迭代 对象 。   string001 = ' string '   list001 = [ ' a ' , ' b ' , ' c ' ]   tuple001 = ( 1 , 2 , 3 , 4 )     x     [ string001 , list001 , tuple001 ] :   print ( list ( reversed ( x ) ) )   [ ' g ' ,   ' n ' ,   ' i ' ,   ' r ' ,   ' t ' ,   ' s ' ]   [ ' c ' ,   ' b ' ,   ' a ' ]   [ 4 ,   3 ,   2 ,   1 ]   马上 想到 ， 列表   reverse   方法 ， 其是 破坏型 方法 ， 类似   sort   方法 ， 破坏型 ， 非 破坏型 方法   sorted   。 特别 需求 时 都 非 破坏型 方法 ， reversed ， sorted 。   删除 元素   赋空 列表 值 ， 相当于 元素 都 删除 。   pop 方法 ： 接受 一个 参数 ， 列表 元素 定位 值 ， 元素 删除 ， 方法 返回 元素 值 。 不 接受 参数 默认 删除 一个 元素 。   remove 方法 ： 移除 第一个 元素 ， 返回 元素 ， 返回 错误 。   del 函数 ： 删除 列表 中 元素 。   > > >   list001 = [ ' a ' , ' b ' , ' c ' , ' d ' , ' e ' ]   > > >   list001 . pop ( 2 )   ' c '   > > >   list001   [ ' a ' ,   ' b ' ,   ' d ' ,   ' e ' ]   > > >   list001 . pop ( )   ' e '   > > >   list001   [ ' a ' ,   ' b ' ,   ' d ' ]   > > >   list001 . remove ( ' a ' )   > > >   list001   [ ' b ' ,   ' d ' ]   > > >   del   list001 [ 1 ]   > > >   list001   [ ' b ' ]   count 方法   统计 元素 次数 。   > > >   list001 = [ 1 , ' a ' , 100 , 1 , 1 , 1 ]   > > >   list001 . count ( 1 )   4   index 方法   index 方法 返回 元素 偏移 值 。   > > >   list001 = [ 1 , ' a ' , 100 ]   > > >   list001 . index ( ' a ' )   1   列表 解析   来看 例子 ：   def   square ( n ) :   return   n * n   print ( list ( map ( square , [ 1 , 2 , 3 , 4 , 5 ] ) ) )   print ( [ square ( x )     x     [ 1 , 2 , 3 , 4 , 5 ] ] )   [ 1 ,   4 ,   9 ,   16 ,   25 ]   [ 1 ,   4 ,   9 ,   16 ,   25 ]   map 函数 函数 列表 元素 中 生成 一个 map 对象 （ 迭代 对象 ） ， 外面 加上 list 函数 才能 生成 列表 形式 。 第二种 方式 更 python 风格 ， 推荐 列表 解析 方法 。   python 中 推荐 迭代 操作 上 列表 解析 风格 ， python 中 迭代 操作 c 语言 。   列表 解析 加上 过滤 条件   语句 一个 子句 过滤 条件 ， 看 例子 理解 ：   > > >   [ s * 2     s     [ ' ' , ' abc ' , ' final ' , ' ' ]     s [ 0 ]   = =   ' h ' ]   [ ' hellohello ' ,   ' helphelp ' ]   例子 列表 解析 ， 找到 元素 乘以 2 操作 ， 过滤 条件 字符 h 字母 开头 ， 表达式 不 真的 元素 都 过滤 掉 。   完整 列表 解析 结构   给出 一个 完整 列表 解析 结构 ， 最 常见 情况 一两个 语句 ， 外加 括号 可选项 。   [   expression     var1     iterable1   [   condition1   ]     var2     iterable2   [   condition2   ]   ........   ]   逻辑 从左到右 第一个 语句 最先 执行 语句 ， 第二个 语句 跟着 执行 。   iterable1 指 迭代 对象 ， 也就是说 返回 迭代 对象 函数 map ， filter ， zip ， range 函数 都 放进去 。 克制 写出 太 过于 晦涩 程序 。 循环 语句 嵌套 太多 ， 极容易 出错 。   程序 ：   > > >   [ x + str ( y )     x     [ ' a ' , ' b ' , ' c ' ]     y     [ 1 , 2 , 3 , 4 , 5 , 6 ]     y   &   1 ]   [ ' a1 ' ,   ' a3 ' ,   ' a5 ' ,   ' b1 ' ,   ' b3 ' ,   ' b5 ' ,   ' c1 ' ,   ' c3 ' ,   ' c5 ' ]   > > >   [ x + str ( y )     x     [ ' a ' , ' b ' , ' c ' ]     y     [ 1 , 2 , 3 , 4 , 5 , 6 ]       y   &   1 ]   [ ' a2 ' ,   ' a4 ' ,   ' a6 ' ,   ' b2 ' ,   ' b4 ' ,   ' b6 ' ,   ' c2 ' ,   ' c4 ' ,   ' c6 ' ]   Notice :   推荐 写带 两个 语句 列表 解析 ， 参看 [ 高质量 python 代码 ]   。   列表 解析 好处   熟悉 列表 解析 语句 结构 ， 一两个 语句 不太 情况 下 ， 很 简单明了 。 语法 精炼 ， 运行 速度 循环 至少 快 上 一倍 。 python 迭代 思想 深入骨髓 ， python 优化 工作 很多 都 围绕 迭代 展开 ， 多用 列表 解析 会 代码 运行 更 快 。   好处 ， 加上 cool pythonic 风格 ， 推荐 多用 列表 解析 风格 解决问题 。   元组 生成   加个 括号 这是 一个 元组 对象 。   > > >   [ ( x , x * * 2 )     x     range ( 5 ) ]   [ ( 0 ,   0 ) ,   ( 1 ,   1 ) ,   ( 2 ,   4 ) ,   ( 3 ,   9 ) ,   ( 4 ,   16 ) ]   语句 中 列表 可变 影响   情况 迭代 迭代 对象 迭代 对象 返回 一个 值 利用 值 赋值 操作 ， 列表 却是 一个 可变 东西 ， 列表 操作 中 修改 ， 情况 会 ？   lst   =   [ 1 , 2 , 3 , 4 , 5 ]   index   =   0     x     lst :   lst . pop ( index )   print ( x )   1   3   5   过程 细节 不 ， 语句 记忆 原 列表 ， 记忆 返回 次数 偏移 值 。   列表 元素 替换   推荐 列表 解析 方法 列表 元素 替换 功能 。   def   replace ( x , a , b ) :     x   = =   a :   return   b   :   return   x   lst = [ 1 , 5 , 4 , 1 , 6 ]   > > >   [ replace ( i , 1 , ' replaced ' )     i     lst ]   [ ' replaced ' ,   5 ,   4 ,   ' replaced ' ,   6 ]   列表 元素 去 重   列表 元素 去 重 推荐 set 集合 对象 ， 其会 自动 去除 重复 元素 。   > > >   lst   =   [ 1 , 2 , 3 , 4 , 5 , 1 , 2 , 3 , 4 , 5 ]   > > >   [ i     i     set ( lst ) ]   [ 1 ,   2 ,   3 ,   4 ,   5 ]   元组   圆括号 包含 几个 元素 元组 ( tuple ) 。 元组 列表 在于 元组 改变 。 元组 是从 序列 对象 ， 元组 很多 方法 都 讲 。 元组 上 列表 极其 接近 ， 很多 内容 略过 。   值得一提的是 输入 写   x , y   形式 ， 实际上 表达式 加上 括号 ， 一个 元组   ( x , y )   。   生成器 表达式   类似 列表 解析 ， 元组 解析 返回 元组 ？ ， 谈到 python 中 表达式 圆括号 忽略 ， 元组 解析 式 更 名字 生成器 表达式 ， 返回 生成器 对象 ， 生成器 函数 调用 返回 对象 。 生成器 对象   __ __   方法 ， 调用 函数 。   > > >   x   =   [ i     i     [ 1 , 2 , 3 ] ]   > > >   x   [ 1 ,   2 ,   3 ]   > > >   y   =   ( i     i     [ 1 , 2 , 3 ] )   > > >   y   < generator   object   < genexpr >     0xb70dbe8c >   字典   列表 字典 可变 ， 列表 引用 原处 修改 ， del 语句 。   并非 对象 都 做 字典 key ， python 中 内置 变 对象 都 散列 ， 可变 对象 都 散列 。 可散列 才 做 字典 key 。 可散列 对象 ：     __ hash __   方法 ， 大小     __ eq __   方法 ， 判断 。   值得一提 元组 做 字典 key 。 顺便 提 元组 大小 ， python 中 元组 大小 ：   元组 列表 大小   元组 列表 判断 很 好 理解 ， 东西 :   > > >   ( 1 , - 1 )   <   ( 2 , - 2 )   确实 古怪 。 请 读者 参考   网页   ) ， 官方 文档 ：   Tuples     lists     compared   lexicographically     comparison       elements .   This   means       compare   equal ,     element     compare   equal         sequences             type           length .   官方 文档 大于 小于 情况 说 很 ， 字里行间 大体 领会 精神 :   迭代 对象 大小 ， 逐个 。   迭代 对象 测试 返回 True False 。   逐个 ， 跳 元素 ， 两个 不 元素 ， 返回 两个 元素 。   快 完 （ 最小 迭代 对象 长度 为准 ） ， 判断 操作 ， 长度 ； 大小 判断 操作 ， 长度 更长 对象 更大 。   例子 :   > > >   ( 1 , - 1 )   <   ( 2 , - 2 )   True   > > >   ( 1 , - 1 )   <   ( - 1 , - 2 )   False   > > >   ( 1 , - 1 , - 3 )   <   ( 1 , - 1 )   False   > > >   ( 1 , - 1 , )   <   ( 1 , - 1 , 0 )   True   创建 字典   字典 一种 映射 ， 从左到右 顺序 ， 简单 地将键 映射 到值 。 字典 声明 格式 ：   dict001 = { ' ' : ' tom ' , ' height ' : ' 180 ' , ' color ' : ' red ' }   dict001 [ ' ' ]   创建 一个 空 字典 ， 赋值 创建 键 ：   dict002 = { }   dict002 [ ' ' ] = ' bob '   dict002 [ ' height ' ] = 195   列表 创建 字典   [ [ ' a ' , 1 ] , [ ' b ' , 2 ] , [ ' c ' , 3 ] ] 形式 ， dict 函数 字典 ， [ ' a ' , ' b ' , ' c ' ] [ 1 , 2 , 3 ] 形式 zip 函数 ， dict 函数 字典 ：   > > >   lst   [ [ ' a ' ,   1 ] ,   [ ' b ' ,   2 ] ,   [ ' c ' ,   3 ] ]   > > >   dict001 = dict ( lst )   > > >   dict001   { ' a ' :   1 ,   ' b ' :   2 ,   ' c ' :   3 }   字典 字典   列表 在于 字典 索引 方式 \" 键 \" 。   dict003 = { ' ' : { ' ' : ' bob ' , ' ' : ' smith ' } }   dict003 [ ' ' ] [ ' ' ]   字典 遍历 操作   字典 特定 顺序 遍历 操作 通用 做法 字典 keys 方法 收集 键 列表 ， 列表 sort 方法 语句 遍历 ， 所示 ：   dict = { ' a ' : 1 , ' c ' : 2 , ' b ' : 3 }   dictkeys = list ( dict . keys ( ) )   dictkeys . sort ( )     key     dictkeys :   print ( key , ' - > ' , dict [ key ] )   警告   ： 例子 python 早期 版本 不 ， 保险 见 ， 推荐 sorted 函数 ， sorted 函数 默认 字典 键 排序 返回 键 值 列表 。   dict = { ' a ' : 1 , ' c ' : 3 , ' b ' : 2 }   > > >     key     sorted ( dict ) :   ...   print ( key , ' - > ' , dict [ key ] )   ...   a   - >   1   b   - >   2   c   - >   3   字典 遍历 顺序 ， 简单 ：   > > >     key     dict :   ...   print ( key , ' - > ' , dict [ key ] )   ...   c   - >   2   a   - >   1   b   - >   3   keys 方法   收集 键值 ， 返回 。   values 方法   keys 方法 类似 ， 收集 值 ， 返回 。   > > >   dict001 . values ( )   dict _ values ( [ 3 ,   1 ,   2 ] )   > > >   list ( dict001 . values ( ) )   [ 3 ,   1 ,   2 ]   items 方法   keys values 方法 类似 ， 返回 ( key , ) 。   > > >   dict001 . items ( )   dict _ items ( [ ( ' c ' ,   3 ) ,   ( ' a ' ,   1 ) ,   ( ' b ' ,   2 ) ] )   > > >   list ( dict001 . items ( ) )   [ ( ' c ' ,   3 ) ,   ( ' a ' ,   1 ) ,   ( ' b ' ,   2 ) ]   ， python2 三个 方法 返回 列表 ， python3 返回 迭代 对象 更 节省 计算资源 些 。   字典 语句   语句 只 针对 字典 键 ， 不 针对 字典 值 。   > > >   dict001 = { ' a ' : 1 , ' b ' : 2 , ' c ' : 3 }   > > >   2     dict001   False   > > >   ' b '     dict001   True   字典 对象 方法   方法 去 找 键 值 ， 不 引用 ， 方法 好处 键 不 出错 。   > > >   dict001 = { ' a ' : 1 , ' b ' : 2 , ' c ' : 3 }   > > >   dict001 . ( ' b ' )   2   > > >   dict001 . ( ' e ' )   update 方法   感觉 字典 一个 小型 数据库 ， update 方法 一个 字典 键 值 覆盖 进 字典 中 去 ， 称之为 更新 ， 加上 ， 覆盖 。   > > >   dict001 = { ' a ' : 1 , ' b ' : 2 , ' c ' : 3 }   > > >   dict002 = { ' e ' : 4 , ' a ' : 5 }   > > >   dict001 . update ( dict002 )   > > >   dict001   { ' c ' :   3 ,   ' a ' :   5 ,   ' e ' :   4 ,   ' b ' :   2 }   pop 方法   pop 方法 类似 列表 pop 方法 ， 引用 键 ， 偏移 地址 ， 不 说 。   字典 解析   字典 解析 方式 很 好 理解 。   > > >   dict001 = { x : x * * 2     x     [ 1 , 2 , 3 , 4 ] }   > > >   dict001   { 1 :   1 ,   2 :   4 ,   3 :   9 ,   4 :   16 }   zip 函数 创建 字典   利用 zip 函数 两个 迭代 对象 平行 合成 一个 配对 元素 迭代 对象 ， dict 函数 字典 对象 。   > > >   dict001 = zip ( [ ' a ' , ' b ' , ' c ' ] , [ 1 , 2 , 3 ] )   > > >   dict001   < zip   object     0xb7055eac >   > > >   dict001 = dict ( dict001 )   > > >   dict001   { ' c ' :   3 ,   ' b ' :   2 ,   ' a ' :   1 }   集合   python 数学 上 无序 不 重复 元素 集合 概念 ， 讨论 列表 去 重元素 提到 正好 利用 集合 特性 。   > > >   list001 = [ 1 , 2 , 3 , 1 , 2 , 4 , 4 , 5 , 5 , 5 , 7 ]   > > >   { x     x     list001 }   { 1 ,   2 ,   3 ,   4 ,   5 ,   7 }   > > >   set ( list001 )   { 1 ,   2 ,   3 ,   4 ,   5 ,   7 }   集合 解析 形式 set 命令 迭代 对象 都 集合 类型 。 希望 列表 list 命令 强制 类型转换 列表 类型 即可 ， 中 确实 元素 不 重复 这一 特性 ， 集 合作 数据 操作 类型 。   集合 迭代 对象 。 迭代 对象 列表 解析 操作 不 啰嗦 。 介绍 集合 操作 。   集合 添加 元素   值得一提的是 想 创建 一个 空 集合 ,   set 命令 ， 用花 括号 系统 会 创建 空 字典 。 集合   add   方法 添加 ， 重复 元素 添加 不 进来 。   警告   ： 值得一提的是 集合 只能 包括 变 类型 ， 列表 字典 集合 内部 元素 。 元组 变 ， 加进去 。   > > >   set001 = set ( )   > > >   set001 . add ( 1 )   > > >   set001   { 1 }   > > >   set001 . add ( 2 )   > > >   set001   { 1 ,   2 }   > > >   set001 . add ( 1 )   > > >   set001   { 1 ,   2 }   update 方法 更新 多个 元素 ：   > > >   set001 = set ( ' a ' )   > > >   set001 . update ( ' a ' , ' b ' , ' c ' )   > > >   set001   { ' b ' ,   ' a ' ,   ' c ' }   集合 去掉 元素   两个 集合 对象 方法 用于 去掉 集合 中 元素 ， discard 方法 remove 方法 ， discard 方法 删除 集合 中 元素 都 发生 ， remove 方法 删除 不 元素 会 KeyError 。   > > >   set001 = set ( ' ' )   > > >   set001 . discard ( ' h ' )   > > >   set001   { ' e ' ,   ' o ' ,   ' l ' }   > > >   set001 . discard ( ' l ' )   > > >   set001   { ' e ' ,   ' o ' }   remove 方法 类似 不 做 演示 。   两个 集合 之间 关系   子集 判断   集合 对象 一个 issubset 方法 用于 判断 集合 集合 子集 。   > > >   set001 = set ( [ ' a ' , ' b ' ] )   > > >   set002 = set ( [ ' a ' , ' b ' , ' c ' ] )   > > >   set001 . issubset ( set002 )   True   简便 方式 两个 集合 之间 关系 ， > ， \\ < ， > = ， \\ < = ， = = 判断 都 。 set001 set002 子集 ， 元素 set002 都 包含 ， set001 \\ < = set002 ， 真 子集 概念 set001 \\ < set002 不 等于 即可 。   两个 集合 之间 操作   例子 演示 两个 集合 之间 交集 ：   &   ， 并集 ：   |   ， 差集 ：   -   。   > > >   set001 = set ( ' ' )   > > >   set002 = set ( ' hao ' )   > > >   set001   &   set002   # 交集   { ' o ' ,   ' h ' }   > > >   set001   |   set002   # 并集   { ' h ' ,   ' l ' ,   ' a ' ,   ' e ' ,   ' o ' }   > > >   set001   -   set002   # 差集   { ' e ' ,   ' l ' }   类似 集合 对象 intersection 方法 ， union 方法 ， difference 方法 ：   > > >   set001 = set ( ' ' )   > > >   set002 = set ( ' hao ' )   > > >   set001 . intersection ( set002 )   # 交集   { ' h ' ,   ' o ' }   > > >   set001 . union ( set002 )   # 并集   { ' e ' ,   ' a ' ,   ' h ' ,   ' o ' ,   ' l ' }   > > >   set001 . difference ( set002 )   # 差集   { ' e ' ,   ' l ' }   clear 方法   一个 集合 清空 。   copy 方法   类似 列表 copy 方法 ， 制作 一个 集合 copy 备份 赋值 变量 。   pop 方法   无序 弹 出 集合 中 一个 元素 ， 返回 KeyError 错误 。   bytes 类型   编码 知识   存储 计算机 都 二进制 流 ， 正确 解析 字符 ， 建立 编码 规则 。 熟悉 ASC Ⅱ 编码 规则 。 ACS Ⅱ 编码 Latin - 1 utf - 8 编码 子集 ， 一连串 基于 ACS Ⅱ 编码 字符串 utf - 8 编码 正确 解析 。   python2 中 支持   bytes   类型   [ &# 94 ; 5 ]   。 python2 一个   unicode   类型 。   bytes 简单 理解 字符 含义 二进制 字节 流 。   b ' test '   ， 加 个字符 b B ， 解析 bytes 类型 。   > > >   x   =   b ' test '   > > >   x   b ' test '   > > >   type ( x )   < class   ' bytes ' >   > > >   x [ 0 ]   116   > > >   x [ 1 ]   101   > > >   list ( x )   [ 116 ,   101 ,   115 ,   116 ]   > > >   python 打印 时会 尽可能 打印 字符 ， x 打印 显示 出 test 字符 ， x 一连串 数字 序列 不 字符串 含义 ， 调用 bytes 类型   decode   方法 ， bytes 类型 解码 str 类型 。   > > >   y   =   x . decode ( ' utf - 8 ' )   > > >   y   ' test '   > > >   type ( y )   < class   ' str ' >   编码方式 正确 ， 正确 解析 原 bytes 字节 流 回事 。 还 big5 GB 编码 。   字符串 str 类型 有个   encode   方法 编码 操作 输出 编码 bytes 字节 流 。   方法   看 str 类型 bytes 类型 方法 差异 :   > > >   set ( dir ( ' abc ' ) )   -   set ( dir ( b ' abc ' ) )   { ' isdecimal ' ,   ' casefold ' ,   ' __ rmod __ ' ,   ' format _ map ' ,   ' format ' ,   ' encode ' ,   ' __ mod __ ' ,   ' isnumeric ' ,   ' isprintable ' ,   ' isidentifier ' }   > > >   set ( dir ( b ' abc ' ) )   -   set ( dir ( ' abc ' ) )   { ' decode ' ,   ' fromhex ' }   bytes str 拥有 功能 ， 大部分 学到 用于 str 字符串 类型 方法 用于 bytes 类型 中 。 方法 泛滥 ， bytes 字节 流 类型 ， 内在 字符 含义 ， 方法 不 推荐 。   upper 方法 replace 方法 :   > > >   b ' t ' . upper ( )   b ' T '   > > >   b ' testst ' . replace ( b ' st ' , b ' oo ' )   b ' teoooo '   字节 流 连接 很 加法 join 方法 ， 所示 :   > > >   b ' t '   +   b ' e '   b ' te '   > > >   b ' ' . join ( [ b ' a ' , b ' c ' ] )   b ' ac '       ， python2 加法 join 方法 都 丢掉 b 修饰符 [ &# 94 ; 6 ] :   > > >   b ' ' . join ( [ b ' a ' , b ' c ' ] )   ' ac '   > > >   b ' a '   +   b ' b '   ' ab '   无关紧要 ， python2 理解 str python3 bytes 类型 ， unicode python3 str 类型 。   bytearray 类型   bytearray bytes 类型 类似 ， 内部 支持 方法 操作 bytes 类型 类似 ， 更 像是 一个 列表 ， 原处 修改 字符串 bytes 变 。 python2 bytearray 类型 ， 内在 文本 二进制 不分 。   文件   文件 对象 迭代 对象 。   写 文件   文件 操作   open   函数 创建 一个 文件 对象 ， 简单 理解 接口 搭接 好 。 文件 对象   write   方法 文件 写 操作 ， 调用   close   方法 写 内容 才 真的 写进去 。   file001   =   open ( ' test . txt ' , ' w ' )   file001 . write ( '   world1 \\ n ' )   file001 . write ( '   world2 \\ n ' )   file001 . close ( )   C语言 文件 操作 ， 会为 python 语言 简单 便捷 赞叹不已 。 三句话 ： 创建 一个 文件 对象 ， 调用 文件 对象 wirte 方法 写入 内容 ， close 方法 关闭 文件 即可 。   读 文件   用法   open   函数 创建 一个 文件 对象 ，   read   方法 调用 文件 内容 。 记得   close   关闭 文件 。   file001   =   open ( ' test . txt ' )   filetext = file001 . read ( )   print ( filetext )   file001 . close ( )     readline   方法 一行 一行 读取 文件 内容 。   open 函数 模式   open 函数 模式 ：   ' r '   默认值 ， read ， 读 文件 。   ' w '   wirte ， 写 文件 ， 文件 不 会 创建 文件 ， 文件 已 ， 文件 原 内容 会 清空 。   ' a '   append ， 附加 内容 ， write 方法 内容 会 附加 原文件 。   ' b '   模式 设置 选项 ， ' b ' 单独 ， 三个 基本模式 组合 ， ' rb ' ， 二进制 数据格式 读 。   ' + '   模式 设置 选项 ， ' + ' 单独 ， 三个 基本模式 组合 ， ' r + ' ， + updating 更新 ， 读 写 ， ' r + ' ， ' w + ' ， ' a + ' 区别 ？ 区别 ' r + ' 不 文件创建 功能 ， 文件 不 会 报错 ， ' r + ' 清空 文件 ， ' r + ' 不 清空 文件 write 方法 情况 会 ； ' w + ' 文件创建 功能 ， ' w + ' write 方法 内容 都 ； ' a + ' write 方法 内容 附加 原文件 上 ， ' a + ' 文件创建 功能 。   语句 打开 文件   类似 例子 语句 打开 文件 ， 不用 close 方法 关闭 文件 。 语句 提供 类似 语句 功能 自动 应对 打开 文件 时 异常情况 。     open ( ' test . txt ' , ' w ' )     file01 :   file01 . write ( '   world1 \\ n ' )   file01 . write ( '   world2 \\ n ' )     open ( ' test . txt ' , ' r ' )     file01 :   filetext = file01 . read ( )   print ( filetext )   语句 用来 测试 对象 同一性 ， 内存 里 同一个 东西 ， 不仅仅 值 。 = = 确保 值 。   ↩   int 、 float 命令 都 强制 类型转换 命令   ↩   参考 网站   ↩     ( ! document . getElementById ( ' mathjaxscript _ pelican _#% @ # $ @ # ' ) )   {   var   align   =   \" center \" ,   indent   =   \" 0em \" ,   linebreak   =   \" false \" ;     ( false )   {   align   =   ( screen . width   <   768 )     \" left \"   :   align ;   indent   =   ( screen . width   <   768 )     \" 0em \"   :   indent ;   linebreak   =   ( screen . width   <   768 )     ' true '   :   linebreak ;   }   var   mathjaxscript   =   document . createElement ( ' script ' ) ;   mathjaxscript . id   =   ' mathjaxscript _ pelican _#% @ # $ @ # ' ;   mathjaxscript . type   =   ' text / javascript ' ;   mathjaxscript . src   =   ' https : / / cdnjs . cloudflare . / ajax / libs / mathjax / 2.7 . 0 / MathJax . js config = TeX - AMS - MML _ HTMLorMML ' ;   mathjaxscript [ ( window . opera     \" innerHTML \"   :   \" text \" ) ]   =   \" MathJax . Hub . Config ( { \"   +   \"   config :   [ ' MMLorHTML . js ' ] , \"   +   \"   TeX :   {   extensions :   [ ' AMSmath . js ' , ' AMSsymbols . js ' , ' noErrors . js ' , ' noUndefined . js ' , ' mhchem . js ' ] ,   equationNumbers :   {   autoNumber :   ' AMS '   }   } , \"   +   \"   jax :   [ ' input / TeX ' , ' input / MathML ' , ' output / HTML - CSS ' ] , \"   +   \"   extensions :   [ ' tex2jax . js ' , ' mml2jax . js ' , ' MathMenu . js ' , ' MathZoom . js ' ] , \"   +   \"   displayAlign :   ' \" +   align   + \" ' , \"   +   \"   displayIndent :   ' \" +   indent   + \" ' , \"   +   \"   showMathMenu :   true , \"   +   \"   messageStyle :   ' normal ' , \"   +   \"   tex2jax :   {   \"   +   \"   inlineMath :   [   [ ' \\ \\ \\ \\ ( ' , ' \\ \\ \\ \\ ) ' ]   ] ,   \"   +   \"   displayMath :   [   [ ' $ $ ' , ' $ $ ' ]   ] , \"   +   \"   processEscapes :   true , \"   +   \"   preview :   ' TeX ' , \"   +   \"   } ,   \"   +   \"   ' HTML - CSS ' :   {   \"   +   \"   styles :   {   ' . MathJax _ Display ,   . MathJax   . mo ,   . MathJax   . mi ,   . MathJax   . mn ' :   { color :   ' inherit   !   important ' }   } , \"   +   \"   linebreaks :   {   automatic :   \" +   linebreak   + \" ,   width :   ' 90%   container '   } , \"   +   \"   } ,   \"   +   \" } ) ;   \"   +   \"   ( ' default '   ! = =   ' default ' )   { \"   +   \" MathJax . Hub . Register . StartupHook ( ' HTML - CSS   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax [ ' HTML - CSS ' ] . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" MathJax . Hub . Register . StartupHook ( ' SVG   Jax   Ready ' , function   ( )   { \"   +   \" var   VARIANT   =   MathJax . OutputJax . SVG . FONTDATA . VARIANT ; \"   +   \" VARIANT [ ' normal ' ] . fonts . unshift ( ' MathJax _ default ' ) ; \"   +   \" VARIANT [ ' bold ' ] . fonts . unshift ( ' MathJax _ default - bold ' ) ; \"   +   \" VARIANT [ ' italic ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" VARIANT [ ' - tex - mathit ' ] . fonts . unshift ( ' MathJax _ default - italic ' ) ; \"   +   \" } ) ; \"   +   \" } \" ;   ( document . body   | |   document . getElementsByTagName ( ' head ' ) [ 0 ] ) . appendChild ( mathjaxscript ) ;   }",
            "tags":"python语言",
            "url":"articles/python-talk-two.html"
        },
        {
            "title":"python语言学习之-第一谈",
            "text":"Python 成功 脚本语言 。 最初 Guido   van   Rossum 开发 ， 1991 年 第一次 发布 。 Python ABC Haskell 语言所 启发 。 Python 一个 高级 、 通用 、 跨平台 、 解释 型 语言 。 人 更 倾向 称之为 动态 语言 。 很 易学 ， Python 一种 简约 语言 。 最 一个 特征 ， 不 分号 括号 ， Python 缩进 。 ， Python 来自 世界各地 庞大 志愿者 维护 。   python 两个 版本 区别 ， python2 python3 。 新 学者 推荐 python3 编程 ， 文档 基于 python3 。   安装 配置   python 安装 配置 linux 没什么 好 说 ， windows 下 安装 编辑 好 系统 环境变量   PATH   值 ， 好 读者 cmd powershell 下 调用 python 命令 。   初次 安装 程序 选项 。   python REPL 环境   终端 中 输入 python python 语言 REPL 环境 ， 很多 linux 系统 默认 python2 。 运行 ：   python   - - version   查看 默认 python 版本号 。   python3 终端 中 输入 python3 即可 。   python 命令行 用法   命令行 格式 ：   python3   [ 可选项 ]   test . py   [ 选 参数 1   选 参数 2 ]   类似 运行   python3   - -   查看 python3 命令 可选项 。   - i   选项 ， python 执行 完 脚本 会 REPL 环境 等待 下 一个 命令 ， 一闪而过 有用 。   python 执行 脚本 参数 传递   命令行 接受 多个 参数 都 ， 报错 ， py 文件 用到 。 py 文件 中要 ， 导入 sys 模块 ， sys . argv [ 0 ] py 文件 系统 中 文件名 ， 接下来 sys . argv [ 1 ] 命令行 接受 第一个 参数 ， 依次 类推 。   代码 注释   python 语言 注释 符号 bash 语言 （ linux 终端 编程语言 ） # 符号 注释 代码 。 py 文件 开头 代码 所示 ：   1   2   # ! / usr / bin / env   python3   # - * - coding : utf - 8 - * -   代码 第一行 下 py 文件 执行 模式 执行 python3 编译   1   ， 第二行 py 文件 编码 utf - 8 编码 ， python3 支持 utf - 8 符号 ， 很 强大 一个 更新 。   多行 注释 利用 编辑器 快速 每行 加上 # 符号 。   Unicode 码 支持   谈及 python3 支持 Unicode 码 ， 执行 模式 加载 ， 第二行 写 上 ：   # - * - coding : utf - 8 - * -   一句 。   读者 请 实验 小 例子 ， 打印 一个 笑脸 符号 ：   1   2   3   4   5   6   # ! / usr / bin / env   python3   # - * - coding : utf - 8 - * -   print   (   '   \\ u263a   '   )   ☺   > > >   数字 笑脸 符号 Unicode 码 （ 十六进制 ） 。   代码 多行 一行   技巧 代码 越界 会 用到 。 反 斜线   \\   即可 。 更 常用 表达式 圆括号   ( )   括 ， 内部 换行 。 python 中 表达式 都 包围 圆括号 中 。   一行 多行   python 中 不用 分 号 ， 分号 意义 大致 bash c 语言 中 意义 类似 ， 一行 结束 。 c 语言 分号 。   输入 输出   最 input print 命令   input 函数 请求 用户 输入 ， 值 赋值 变量 。 赋值 类型 字符串 ， 强制 类型转换 - - - - - - int 函数 （ 整数 ） ， float 函数 （ 实数 ） ， str 函数 （ 字符串 ） - - - - - - 。 print 函数 输出 函数 。   读者 请 运行 例子 ：   x = input ( ' 请 输入 一个 实数 ： ' )   string = ' 输入 实数 乘以 2 等于 ： ' +   str ( float ( x ) * 2 )   print ( string )   __ main __ __ __     网站   讲解 ， py 文件 执行 ，   __ __   py 文件 中 值   __ main __   ， py 文件 模块 引入 ，   __ __   py 文件 中 值 py 文件 模块 模块 名 。   比如说 随便 新建 一个 test . py 文件 ， py 文件 简单 打印   __ __   值 ， 再 打开 终端 ， 运行 ：   python3   test . py   打印 ：   __ main __   。 python REPL 环境 ， 再 输入 ：   import   test   会 发现   __ __   值 字符   \" test \" 。   mymodule 模块 里 mymod . py 文件 （ 新建 一个 mymodule 文件夹 ， 再 新建 一个 mymod . py 文件 。 ） ， mymod . py 文件   __ __   值   \" mymodule . mymod \" 。   安装 python 高级 知识   源码 安装 python   源码 安装 python ， 依赖 预先 安装 。   zlib     zlib - devel   opensll     openssl - devel   ，   ssl . h   文件 找 不到 缺少 。   sqlite - devel     import   sqlite3   ， 将会 提示 找 不到   _ sqlite3   ， 编译 python 。   windows 下 pip   windows 下 pip 安装 ， wheel 包 ， 装上 ， 简单 安装 源码 即可 ， 调用 cython 编译 过程 确保 python 装上   V C++     python   ， 官网 下载 地址     。   额外 提 一点   Visual   C++   Compiler     Python   2.7     math   rint   方法 ， linux 下 稍微 差异 。   chmod 加上 执行 权限 执行 。 第一行 完整 解释   env   程序 搜索 python 路径 ， 代码 更具 可移植性 。 还 说 一点 ， 会谈 virtualenv 模块 ， 类似 引用 python 写法 确保 调用 python 虚拟环境 下 python 解释器 。   ↩",
            "tags":"python语言",
            "url":"articles/python-talk-one.html"
        },
        {
            "title":"人工智能第一谈",
            "text":"history   弗朗西斯 · 克里克 科学 美国 人中 发表 一篇 文章 《 大脑 思考 ， 此君 DNA 结构 发现 人 ， 天才 思考 投入 大脑 研究 之中 。   克里克 积累 大脑 详尽 知识 ， 大脑 工作 原理 来说 仍 一个 难解 迷 。   说 ： 最 概念 上 缺乏 一个 总 框架 。   这一 振聋发聩 声音 唤醒 《 人工智能 未来 一书 作者 — — 杰夫 · 霍金斯 心中 长久以来 愿望 ， 去 研究 大脑 ， 制造 一个 智能 机器 。   人工智能 关键人物 阿兰 · 图灵 ， 提出 \" 通用 计算 \" 概念 ， 证明 建构 细节 上 有所不同 ， 从根本上 讲 计算机 都 等效 。 信息处理 信息处理 ， 逻辑 上 讲 ， 数字 计算机 都 等效 。   图灵 建造 智能 机器 ， 感到 电脑 智能化 。 提出 一个 著名 图灵 检验 。 一台 电脑 诱使 一个 询问者 一个 人 ， 说 这台 机器 智能 。   杰夫 · 霍金斯 提出 见解 ， 图灵 二十世纪 上半叶 占 主导地位 心理学 思潮 — — 行为主义 都 犯 一个 错误 ， 都 试图用 定义 智能 ， 确实 智能 一种 表现 ， 绝不 智能 本质 智能 首要 解释 。 独自一人 思考 ， 外 ， 否认 智能 。   早期 人工智能 热潮 充斥 过度 自信 ， 解 数学 证明题 ， 虚构 一个 积木 世界 ， 下象棋 ， 专家系统 解答 。 创造者 人 思考 。   1986 年 ， 杰夫 · 霍金斯 工作 都 辞 ， 学习 智能 大脑 功能 理论 研究成果 。 ， 人工智能 第二个 研究 小 高峰 ， 代表 神经网络 。 神经网络 建造 一个 系统 ， 编程 计算机 ， 模拟 神经元 连接 。 一条 正确 道路 上 ， 显示 进展 令人 失望 ， 弄 出 仿真 预测 模型 证明 不用 神经网络 传统 编程 方法 。 是因为 急功近利 思想 ， 神经网络 都 建立 极为 简单 模型 上 ， 相互 少量 连接 神经元 排成 三列 。 反馈 时间 概念 。 更 新 大脑皮层 一个 统一 重复 层级 结构 ， 神经网络 都 结构 缺乏 。   人脑 开发 智能 机器 必由之路 — — 杰夫 · 霍金斯   大脑 ， 一层 薄薄的 皮包 覆 ， 层皮 新 大脑皮层 。 杰夫 · 霍金斯 智能 藏 新 大脑皮层 之中 。   杰夫 · 霍金斯 智能 都 新 大脑皮层 ， 丘脑 海马 作用 。   古脑 人 欲望 情感 ， 杰夫 · 霍金斯 早期 智能 机器 类似 人 欲望 情感 。   正常人 小脑 损害 生活 太 大 ， 小脑 原始 时间 观念 ， 新 大脑皮层 会 事件 流 出新 时间 观念 。 大脑 一部分 器官 原始 控制 很大 一部分 功能 都 新 大脑皮层 取代 。   人类 大脑皮层 展开 相当于 4 张 A4 打印纸 大小 。 面积 大小 ， 大脑皮层 纵向 还 分为 六层 。 有人 估计 300 亿个 神经元 。 思想 大 脑细胞 产物 ， 魔力 ， 浆汁 。 思想 神经元 闪动 信息流 。 真 希望 感受 一点 多么 奇妙 。   蒙 卡斯尔 假说   1978 年 ， 发表 一篇 论文 《 大脑 功能 组织 原则 ， 文章 指出 大脑皮层 外表 上 结构 上 都 惊人 ， 不论是 主管 视觉 输入 主管 触觉 大脑皮层 区域 、 控制 肌肉 区域 、 罗布 卡 语言 区 区域 。 实际上 。 暗示 说 ， 区域 发挥 作用 千差万别 ， 功能 方法 完全相同 。   蒙 卡斯尔 ， 解剖学家 大脑皮层 惊人 相似性 ， 深究 含义 。 蒙 卡斯尔 却 相似性 意味着 更 东西 。   大脑皮层 视觉 区域 ， 运动 区域 肌肉 运动 ， 区域 中央 神经系统 连接 。   大脑皮层 之间 细小 差异 正是 连接 差异   大脑皮层 功能 区域 都 遵循 一个 算法 ， 视觉 、 听觉 、 运动 输出 之间 差异 。   威斯康辛 州 大学 生物医药 工程学 教授 保尔 · 巴奇 · 瑞塔 发明 一种 人 舌头 上 显示 视觉 模式 方法 ， 戴上 装置 ， 盲人 舌头 来看 东西 。 原理 前额 戴上 一个 小型 摄像头 ， 影像 信息 一个 像素 一个 像素 传输 舌头 上 压力 点上 ， 视觉 影像 转化 无数 压力 点 模式 。 大脑 却 很快 学会 正确 辨别 模式 。   2003 年 ， 韦恩 舌头 装置 ， 一个 球向 滚 ， 伸手 抓起 桌上 一杯 饮料 。 走 ， 门 ， 门框 。 舌头 东西 ！   实例 告诉 大脑皮层 灵活 ， 死死地 说 区域 主管 视觉 区域 语言 。 分工 人脑 基因 ， 大脑皮层 能力 远不止 。 大脑 模式 ， 模式 来自 不 ， 时间 上以 固定 方式 ， 大脑 感觉 。   感觉 信息 起初 都 某种 简单 点状 信息 。 信息 大脑 最小 信息 单元 。 感觉 信息 最终 都 会 转化 一种 空间 - 时间 模式 。 想象 ， 空间 观念 时间 观念 ， 无限 延伸 扩展 。 信息 ， 信息 都 时空 模式 中 找到 一个 只 位置 。   也就是说 感觉 模式 信息 大脑皮层 都 ， 带来 一个 疑惑 ， 模式 信息 ， 方式 ， 带来 理解 效果 。 一个 听到 音符 ， 一个 颜色 。 细节 尚有 不 完善 处 ， 理论 确实 简洁 优美 。   设想 将来 人 或者说 机器人 看 红外线 ， 感知 超声波 。 昆虫 ， 将来 改进 人 。   角度 来看 模式识别 操控 机器人 那种 方法 ， 简直 可笑 。 编程 ， 情况 稍 变化 ， 机器人 傻 。 ， 机器人 视觉 ， 机器人 运动学 都 统一 ， 一个 算法 ， 确实 一场 革命 。   大脑 存储 模式 序列   读 字母表 ， 乐谱 弹钢琴 ， 做 事情 方式 ， 都 模式 序列 。 发现 想 做 都 困难重重 ， 第一次 做 还 没 学习 记忆 进去 。 也就是说 记忆 住 东西 ， 东西 一种 模式 序列 信息 。 （ 时间 顺序 ， 时间 顺序 因果关系 人 弄混 ， 简单 来说 先有 因果 ， 再有 时间 。 ）   大脑 - 联想 回忆 模式   存储 模式 序列 ， 刚好 激发 一个 记忆 片段 ， 大脑 一种 趋势 回忆起 记忆 信息 。 神经网络 理论 中有 一个 小 分支 研究 ， - 匹配 记忆 模式 。   相互连接 简单 神经元 ， 神经元 临界点 会 激活 。 之间 连接 方式 ， 在于 涉及 反馈 。 只能 正向 传输 ， - 匹配 记忆 模式 神经元 输出 传回 。 反馈 回路 一个 有趣 ， 一个 模式 施加 神经元 ， 会 模式 记忆 。   恒定 表征   恒定 表征 类似 人脑 智能 重中之重 。 恒定 表征 类似 柏拉图 理念 那种 东西 。   一个 人 脸 ， 每次 见到 灯光 ， 角度 ， 位置 都 会 ， 不 一张 （ 信息 ） 完全相同 脸 。 却 认出 人 。 再 从来 一个 纯正 圆 ， 圆是 啥样子 。   抽象 ， 把握 事物 内部 要素 关系 最 本质 ， 存储 信息 恒定 表征 。 恒定 表征 关键 ！   大脑 做 事情 时时刻刻 都 预测   （ 意识 ， 时间 一种 序列 ， 空间 实际上 一种 序列 。 一个 房子 ， 不 吸收 信息 ， 《 人工智能 未来 一书 一个 例子 说 一个 实验 ， 观察 人 一张 人脸 眼睛 关注点 情况 ， 实际上 人 脖子 动 ， 平时 眼球 运动 很 频繁 。 实验 显示 眼睛 关注点 画 好像 一张 人脸 素描 。 ）   房间 ， 实际上 都 一系列 默认 空间 扫描 序列 ， 时时 序列 中 下 一个 信息 作出 预测 ， 房间 再 熟悉 。 发现 桌子 上 一只 袜子 ， 。 马上 好奇心 触发 ， 发现 不 信号 神经元 会 进一步 ， （ 信号 上 传到 海马 区 — — 海马 区 负责 瞬时 记忆 。 ）   实际上 关注点 扫描 序列 很多 因素 相关 ， 文化 相关 。 常说 中国 人 习惯 看 总体性 东西 。 总体 根于 局部 ， 中国 人 扫描 序列 。 想 中国 字 西方 识别 字母 关系 。 西方 几个 字母 辨认 才 单词 ， 中国 字 识别 一种 笔画 式 框架 式 。   走路 ， 会 预测 脚 ； 听歌 ， 会 预测 下 一个 音符 ； 听 别人 说话 ， 会 预测 会 听到 。 会 预测 错误 ， 好奇心 挑逗 ， 这是 一个 好 文学作品 必备 素质 。   再 谈论 眼睛 观察 事物 ， 空间 体验 方式 。 发现 事物 位置 不 在意 。 空间 架构 基于 事物 之间 关系 。 时间 一种 关系 ， 空间 一种 关系 。 告诉 大脑 更多地 关注 事物 属性 信息 ， 事物 之间 关系 。   预测 相互 相 成 ， 一个 独自 思考 不 做 外部 人 否认 智能 。 时时刻刻 做出 预测 。 包括 手和脚 眼睛 外部 感官 器官 运动 ， 还 包括 大脑 本身 运动 。 ？ 大脑 大脑 本身 做出 预测 ？ 大脑 想 大脑 下 一步 想些 ， 大脑 想 大脑 下 一步 会 做 。 大脑 发现自己 预测 错 ， 还 发现 一个 还 不 全新 自我 。 ， 人 独自 思考 ？ 大脑 操纵 下 一步 ， ， 手脚 客观 世界 交流 ， 大自然 上 新鲜 一课 。 发现 错 ， ， 预测 错 。   新 大脑皮层 更 细节   新 大脑皮层 纵向 分为 六层 ：   大脑皮层 分为 六层 ， 细胞 垂直 柱 皮层 中 最 计算 单元 理由 ：   解剖学 角度 ， 大脑皮层 分为 六层 。   第一层 细胞 很少 ， 皮层 平面 平行 延展 轴突 。   第二层 细胞 第三层 细胞 很 ， \" 锥体细胞 \" （ 如上图 所示 一个 小小的 金字塔 形状 ） 神经元 。   第四层 一种 星形 细胞 。   第五层 大小 锥体细胞 之外 ， 一种 金字塔 形状 细胞 。   第六层 几类 独特 细胞 。   神经 兴奋 讨论   神经细胞 垂直 柱 刺激 兴奋 ， 第四层 一个 激活 细胞 会 第三层 第二层 细胞 兴奋 ， 第五层 第六层 细胞 兴奋 。 兴奋 状态 细胞 垂直 柱 传递 ， 第一层 水平 传递 。   早 1979 年 ， 蒙 卡斯尔 一种 单一 皮层 算法 ， 算法 中 皮层 垂直 柱 最小 计算 单元 。   谈到 皮层 垂直 柱 ， 最小 计算 单元 。 计算 单元 计算 单元 之间 发生 。 中 规律 。 形式 扩展 开来 。   形式 简单 理解 一种 统一 算法 信息 向上 走向 抽象 ， 向下 走向 。 说 一个 皮层 柱 只能 向下 扩展 两个 皮层 柱 ， 向下 扩展 多个 皮层 柱 。   以此类推 ， 新 大脑皮层 记忆 知识 建立 一种 庞大 网络 ， 网络 呈现出 一种 层级 结构 ， 层级 结构 正是 客观 世界 物体 嵌套 关系 。   头脑 中 模式 序列 外部 世界 交互 中 做出 精确 预测 ， 大脑 之间 因果关系 。   输入 模式 再三 同一个 关系 中 几率 微乎其微 ， 可靠 预测 铁定 事实 世界 上 事件 相互 。 （ 发现 客观 世界 本质 规律 ， 绝不 简单 。 ）   大自然 颜色 无穷尽 ， 大致 分为 几类 ， 一种 新 颜色 ， 懒于 开辟 新 记忆 模式 ， 简单 地归为 类似 红色 黄色 。 勤快 一点 ， 精确 定义 黄 红色 — — 橙色 。 事情 大体 。 ( 模式 ， 输入 歧义 大脑 死机 。 。 ）   皮层 柱 三种 工作 模式   信息 向上 汇聚 流   第四层 星形 细胞 承担 汇流 输入 工作 ， 第四层 输入 层 。   星形 细胞 信息 汇聚 ， 会 投射 第二层 第三层 细胞 上 （ 锥形 细胞 ） ， 向上 传输 。   信息 向下 扩散 模式   确认 皮层 柱 第一层 ， 信息流 大部分 扩散 工作 。 过程 尚 不 清晰 。 第一层 ， 第二 三 五六层 都 会 激发 。   经由 丘脑 延迟 反馈 模式   皮层 柱 第五层 ， 金字塔 细胞 ， 研究 显示 轴突 一分为二 ， 一部分 通向 运动 区 ， 操纵 眼球 运动 ； 一部分 通向 丘脑 。 丘脑 非常复杂 ， 受损 ， 人 成 植物 人 。 一条 信息 投射 兴趣 ， 丘脑 信息 投射 回 皮层 柱 第一层 。   这一 反馈 回路 无疑 干 ， - 联想 学习 记忆 模式 ， 学习 模式 序列 。   大脑皮层 皮层 柱 ， 也许 某种 活跃 态 意外 某种 信息 ， 皮层 柱 第四层 细胞 判断 ， 我要 兴奋 。 大脑 阅读 信息 红色 。 一个 兴奋 ， 阅读 黄色 。 两个 都 兴奋 ， 说 橙色 。 — — 学会 橙色 。     试图 从头到尾 扫 一遍 ， 皮层 柱 第六层 最 那层 很 感官 神经 第一 汇集 。 感官 神经 都 一个 局部 区域 刺激 信号 。   信号 将会 皮层 柱 第四层 星形 细胞 汇集 。 信号 都 早期 空间 信号 序列 。   星形 细胞 激发 将会 刺激 第二层 第三层 细胞 ， 区别 ：   第三层 细胞 分为 两种 ， 最先 接触 一类 细胞 ， 用来 判断 序列 ， 不 将会 一序列 上 传给 海马 组织 ， 海马 组织 功能 快速 记住 一个 新 模式 ， 下载 皮层 柱内 。   下载 皮层 柱 第二层 细胞 中 ， 序列 取 一个 名字 。   讲得 第三层 细胞 第二种 细胞 一类 细胞 ， 类 细胞 判断 序列 ， 说 ， 会 抑制 谈到 一类 细胞 ， 不让 其上 传给 海马 组织 。   序列 ， 一个 名字 ， 第四层 细胞 将会 激活 第二层 细胞 名字 细胞 ， 信息 序列 ， 转变成 一种 简写 。 第二层 细胞 第一层 细胞 到达 皮层 柱 。   第三层 细胞 第二类 细胞 一是 判断 模式 ， 抑制 上传 ； 二是 信息 激活 ， 上 传到 去 ， 激活 序列 信息 ， 用于 人脑 内部 模式 序列 接下来 激活 皮层 柱 预测 。   假设 序列 下 一个 皮层 柱 星形 细胞 正要 激活 ， 谈到 第三层 第二类 细胞 信号 传输 皮层 柱 第三层 第二类 细胞 中 ， 细胞 实际上 处于 一种 亚 激活状态 。 条 线路 早就 打通 ， 信号 有冲 上 ， 激活 。 条 线路 激活 两下 ， 变得 活跃 兴奋 。 预测 。 ！   那种 名字 简写 信号 谈及 那种 宏大 层 架结构 中去 ， 简写 信号 实际上 相当于 信息 汇集 。 简写 信号 再 一个 皮层 柱 星形 细胞 中 汇集 成 一个 序列 。   插入 描述 时间 序列 信号 。 多个 皮层 柱 信号 向下 激活 ， 指令 传递 运动 区 ， 传递 丘脑 。 判据 下 ， 比如说 一连串 连续 皮层 柱 信号 ， 一段 休止 空白 。 丘脑 会 一系列 皮层 柱 信号 ， 视作 短小 时间段 内 皮层 柱 激活 时间 序列 。 打包 好 ， 上 传到 皮层 脑 顶部 ， 我认 不 序列 ， 操作 谈论 。   序列 写道 ， 星形 细胞 激活 ， 类似 算法 ， 一个 皮层 柱 。 信息流 向上 抽象 汇集 。   再 来看 大脑 运动 指令 ， 信息流 向下 抽象 ， 一系列 运动 指令 序列 。   最 简单 情况 ， 情况 。   最 抽象 需求 指令 向下 ， 皮层 柱中 搜索 。 向下 搜索 流 不 简单 ， 第二层 细胞 — — 简写 细胞 会 涉及 ， 第三层 第二类 细胞 — — 预测 细胞 会 涉及 。   谈论 情况 ， 恰好 一个 简写 细胞 中 搜索 。   搜索 ， 进一步 发动 指令 ， 激活 简写 细胞 ， 简写 细胞 会 传输 第六层 细胞 ， 会 回 传到 一个 皮层 柱 ， 如此等等 ， 简写 细胞 展开 指令 序列 ， 激活 皮层 柱 第五层 细胞 — — 运动 细胞 。 第五层 金字塔 细胞 负责 运动 指令 发送 （ 才 会 ， 激活 很大 冲动 刺激 神经细胞 。 ）   指令 序列 会 传递 运动 区 ， 还要 进一步 编码 。 操纵 运动 器官 。 运动 指令 丘脑 封包 ， 上传 。 记住 做 些 。 情况 运动 指令 大抵 查到 后续 内容 。   情况 ， 最 精彩 创造力 。 创造力 不 神奇 ， 说 简单 一点 讲 情况 分化 ， 简单 来说 边做边看 。 也许 会 问 人 不 边做边看 ， 脑中 想象 下 一步 客体 世界 会 。 ， 虚拟 一个 客体 世界 ， 会 耗费 更大 存储空间 ， 讨论 中 发现 很多 东西 也许 想象 困难 。   哲学 上 讨论 一种 机制 ， 机制 基于 最小 逻辑 判断 元 — — 模板 判断 ， 最 简单 两种 连接 — — 正 生 ， 反 生 线路 - - 类似 激活 抑制 。 构造 出 逻辑推理 操作 最 简单 单元 ， 想象 逻辑推理 操作 不 。   进化史   看 ， 霍金斯 HTM 算法 完美 一个 完美 模拟 皮层 脑 信息 存储 机构 。 还 缺少 东西 。   人脑 进化史 ， 人类 宇宙 信息 都 历史 或者说 进化史 。 脱离 宇宙 信息 进化史 单独 谈论 智能 ， 会 感觉 少 点 东西 。   神经系统 包含 信息 超过 基因 信息 — — 代表 个体 生存 很   皮层 脑 信息 超过 本能 脑 信息 — — 代表 程序 式   语言文字 信息 超过 大脑 信息 — — 代表 社会 文化 发展 个体 生存 还 。   大脑 中 神经细胞 某种 内在 统一性 ， 进化 阶段 专门化 四个 ： 一是 本能 脑 ， 死板 程序 式 ； 二是 皮层 脑 ， 近似于 自动 吸收 存储 信息 前期 程序 式 信息处理 ； 三是 额脑 ， 人 目的 ， 人 目的 制定 出 计划 ； 四是 情绪 脑 ， 目的 效益性 判断 。   四脑 学说 ， 本能 脑 负责 外部 接受 信息 ， 皮层 脑 负责 接受 信息 转化 为额脑 读懂 信息 ， 额脑 欲念 世界 。 还 一个 情绪 脑 ， 情绪 脑 作用 更 快速 执行 。 某种 情绪 激活 ， 一类 信息 会 特别 活跃 ， 做出 指定 对策 ， 执行 。 如果说 三个 调配 信息 ， 情绪 脑 调配 能量 （ 活化能 ） 。 总 能量 情况 下 ， 能量 利用 。   （ 先验 概念 进化史 中 遗留下来 最 优秀 神经 网络 模式 。 比如说 空间 联合 区 ， 很大 一部分 信息 固化 。 初生儿 稍微 调试 下 空间 观念 。 ）   ， 霍金斯 工作 皮层 脑 一块 。 发展 处 意义 上 智能 ， 几个 功能 开发 缺少 。 本能 脑 概念 不用 多谈 ， 编 好 最底层 子程序 即可 。   情绪 脑 ， 目的 效益 判断 ， 人工智能 体系 来说 说 非要不可 。 （ 情绪 脑有 两种 功能 ： 一是 大脑 本能 脑 ， 二是 额脑 帮手 。 ）   想到 四脑 学说 ， 对额脑 概念 看重 。 还 仔细 拨弄 直立人 迁徙 智人 迁徙 。 直立人 发展 皮层 脑 ， 而智人 发展 额脑 。 额脑 智人 直立人 区别 开来 。   额脑 语言 宗教 信仰 意志力 人 社会性 都 关系 。   额脑 皮层 脑有 区别 ？ 额脑 皮层 脑 靠近 额部 一块 进化 。 谈到 ， 皮层 脑 ， 只活 。 接受 信息 ， 存储 ， 还 做 早期 简单 信息处理 工作 。 人 生活 ， 沉浸 世界 里 。 仅此而已 ， 脑中 唯一 非 现实 世界 创造 做梦 — — 皮层 脑神经 连接 随机 漫游 。   随机 漫游 证明 有用 ， 物种 带来 利益 ， 大脑 极度 兴奋 。 偶尔 意义 漫游 。 （ 直立人 发现 火 用处 ， 都 靠近 。 ）   而额脑 作用 控制 主动 创造 随机 漫游 。   思维 底向上 ， 从上向下 两种 思考 风格 ， 实际上 都 主动 随机 漫游 。   智 人 日益 进化 额脑 ， 积极主动 随机 漫游 ， 探求 ， 积极行动 。 活在 皮层 脑中 — — ， 活在 额脑 中 — — 未来 — — 或者说 一个 创造 主观 世界 之中 。   参考   人工智能 未来   杰夫 · 霍金斯",
            "tags":"思想",
            "url":"articles/ren-gong-zhi-neng-di-yi-tan.html"
        }
    ]
}