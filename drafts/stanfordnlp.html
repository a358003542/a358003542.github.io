<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="baidu-site-verification" content="D4VqC4HppC"/>
    <meta name="msvalidate.01" content="55CB117A61A6F8286173763FB18D9625"/>

        <meta name="author" content="cdwanze"/>
        <meta name="copyright" content="cdwanze"/>

        <meta property="og:type" content="article"/>
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="corenlp, 自然语言处理, " />

<meta property="og:title" content="斯坦福NLP "/>
<meta property="og:url" content="/drafts/stanfordnlp.html" />
<meta property="og:description" content="前言 安装corenlp server 非java语言还是推荐先配置好Stanford 的 corenlp server，然后再通过api来调用之。具体java 的server端先到 官网 下载，然后解压，下载好中文模型jar文件然后扔进去，然后还需要写个文件 StanfordCoreNLP-chinese.properties ，具体内容请参看 这个网页 然后运行： java -Xmx4g -cp &#34;*&#34; edu.stanford.nlp.pipeline.StanfordCoreNLPServer -serverProperties StanfordCoreNLP-chinese.properties -port 9000 -timeout 15000 设置JAVA环境和 JAVA_HOME 变量这些就不多说了。 服务器启动后，在 localhost:9000 那里，打开浏览器我们可以看到一些有趣的东西。 pycorenlp python的简单对接如下所示，pycorenlp的github项目在 这里 。目前确定的 annotators …" />
<meta property="og:site_name" content="cdwanze的博文" />
<meta property="og:article:author" content="cdwanze" />
<meta property="og:article:published_time" content="2019-03-05T00:00:00+08:00" />
<meta property="" content="2019-03-05T00:00:00+08:00" />
<meta name="twitter:title" content="斯坦福NLP ">
<meta name="twitter:description" content="前言 安装corenlp server 非java语言还是推荐先配置好Stanford 的 corenlp server，然后再通过api来调用之。具体java 的server端先到 官网 下载，然后解压，下载好中文模型jar文件然后扔进去，然后还需要写个文件 StanfordCoreNLP-chinese.properties ，具体内容请参看 这个网页 然后运行： java -Xmx4g -cp &#34;*&#34; edu.stanford.nlp.pipeline.StanfordCoreNLPServer -serverProperties StanfordCoreNLP-chinese.properties -port 9000 -timeout 15000 设置JAVA环境和 JAVA_HOME 变量这些就不多说了。 服务器启动后，在 localhost:9000 那里，打开浏览器我们可以看到一些有趣的东西。 pycorenlp python的简单对接如下所示，pycorenlp的github项目在 这里 。目前确定的 annotators …">

    <title>
斯坦福NLP  · cdwanze的博文
</title>


        <link href="/theme/css/font-awesome.css" rel="stylesheet"
              media="screen">
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet"
              media="screen">

            <link rel="stylesheet" type="text/css"
                  href="/theme/css/pygments.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/elegant.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/custom.css" media="screen">






</head>
<body>

<nav class="navbar">
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".navbar-collapse"
                    aria-expanded="false">
                <span class="sr-only">Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="https://www.cdwanze.work"><span
                    class=site-name>网站首页</span></a>
        </div>


        <div class="navbar-collapse collapse">
            <form action="/search.html"
                  onsubmit="return validateForm(this.elements['q'].value);"
                  class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" name="q" id="tipue_search_input"
                           class="form-control" placeholder="Search..."
                           style="width:430px;">
                </div>
                <button class="btn btn-default" type="submit">搜索</button>
            </form>


            <ul class="nav navbar-nav nav-pills navbar-right">
                <li >
                    <a href="">博文首页</a></li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle"
                           data-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">查找文章<span
                                class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a class="slowscroll" href="/categories.html">按分类</a>
                            </li>
                            <li><a class="slowscroll" href="/tags.html">按标签</a>
                            </li>
                        </ul>
                    </li>


                        <li >
                            <a href="/guan-yu-ben-wang-zhan.html">关于本网站</a>
                        </li>
                        <li >
                            <a href="/gong-gao.html">公告</a>
                        </li>
            </ul>


        </div>
    </div>
</nav>


<div class="container-fluid">
    <div class="col-md-1 col-md-1-left"></div>
    <div class="col-md-10">
<article>
<div class="row">
    <header class="page-header col-md-10 col-md-offset-2">
    <h1><a href="/drafts/stanfordnlp.html"> 斯坦福NLP  </a></h1>
    </header>
</div>

<div class="row">
        <div class="col-md-8 col-md-offset-2 article-content">

            
            <h2 id="_1">前言</h2>
<h2 id="corenlp-server">安装corenlp server</h2>
<p>非java语言还是推荐先配置好Stanford 的 corenlp server，然后再通过api来调用之。具体java 的server端先到 <a href="https://stanfordnlp.github.io/CoreNLP/index.html">官网</a> 下载，然后解压，下载好中文模型jar文件然后扔进去，然后还需要写个文件</p>
<p><code>StanfordCoreNLP-chinese.properties</code> ，具体内容请参看 <a href="https://stanfordnlp.github.io/CoreNLP/human-languages.html">这个网页</a> 然后运行：</p>
<div class="highlight"><pre><span></span>java -Xmx4g -cp &quot;*&quot; edu.stanford.nlp.pipeline.StanfordCoreNLPServer -serverProperties StanfordCoreNLP-chinese.properties -port 9000 -timeout 15000
</pre></div>


<p>设置JAVA环境和 <code>JAVA_HOME</code>  变量这些就不多说了。</p>
<p>服务器启动后，在 <code>localhost:9000</code> 那里，打开浏览器我们可以看到一些有趣的东西。</p>
<h2 id="pycorenlp">pycorenlp</h2>
<p>python的简单对接如下所示，pycorenlp的github项目在 <a href="https://github.com/smilli/py-corenlp">这里</a> 。目前确定的 annotators 有：</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycorenlp</span> <span class="kn">import</span> <span class="n">StanfordCoreNLP</span>

<span class="n">CORENLP_URI</span> <span class="o">=</span> <span class="s1">&#39;http://192.168.0.109:9000&#39;</span>

<span class="k">class</span> <span class="nc">CoreNLP</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">corenlp_uri</span><span class="o">=</span><span class="n">CORENLP_URI</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nlp</span> <span class="o">=</span> <span class="n">StanfordCoreNLP</span><span class="p">(</span><span class="n">corenlp_uri</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">read_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">annotators</span><span class="o">=</span><span class="s1">&#39;tokenize,ssplit, pos, ner, depparse, parse&#39;</span><span class="p">,</span> <span class="n">outputformat</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nlp</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;annotators&#39;</span><span class="p">:</span> <span class="n">annotators</span><span class="p">,</span>
            <span class="s1">&#39;outputFormat&#39;</span><span class="p">:</span> <span class="n">outputformat</span>
        <span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">output</span>
</pre></div>


<ol>
<li>tokenize,ssplit, 基本辅助</li>
<li>pos part of speech 做词性分析</li>
<li>ner 命名实体（效果并不是很好）</li>
<li>depparse（依赖分析，也就是那个依赖图）</li>
<li>parse（句法分析，也就是那个树形图）</li>
</ol>
<h3 id="nlpoutput">nlp.output的结构</h3>
<ul>
<li><code>nlp.output['setences'][0]</code> 第一句话</li>
<li>
<p><code>nlp.output['setences'][1]</code> 第二句话</p>
</li>
<li>
<p><code>nlp.output['setences'][0]['tokens']</code></p>
</li>
</ul>
<div class="highlight"><pre><span></span>{&#39;index&#39;: 1, &#39;word&#39;: &#39;猴子&#39;, &#39;originalText&#39;: &#39;&#39;, &#39;lemma&#39;: &#39;猴子&#39;, &#39;characterOffsetBegin&#39;: 0, &#39;characterOffsetEnd&#39;: 2, &#39;pos&#39;: &#39;NN&#39;, &#39;ner&#39;: &#39;O&#39;}, 
</pre></div>


<p>里面装着具体 分词，从那里开始，到那里结束，pos 词性，ner 命名实体</p>
<ul>
<li>
<p><code>nlp.output['setences'][0]['parse']</code>
  该句话的句法分析</p>
</li>
<li>
<p><code>nlp.output['setences'][0]['basicDependencies']</code> 
  该句话的句子依赖分析</p>
</li>
</ul>
<h2 id="pos">POS</h2>
<p>POS是 part of speech 也就是对已经分好词的中文文本进行词性标注，<a href="https://web.stanford.edu/~jurafsky/sighan_pos.pdf">参考论文</a> ，目前暂时感兴趣的是分析出来的英文缩写的含义，下面列表之：</p>
<ul>
<li>AD adverb 副词</li>
<li>CC 连接词</li>
<li>CD 基数词</li>
<li>DT 限定词</li>
<li>FW 外语词</li>
<li>JJ 其他名词修饰符</li>
<li>LC 方位词</li>
<li>M 量词</li>
<li>NN common noun 一般名词</li>
<li>NR 专有名词</li>
<li>NT 时间名词</li>
<li>OD 序数词</li>
<li>P 介词</li>
<li>PN 代词</li>
<li>PU 标点符号</li>
<li>SP 句末助词</li>
<li>VA 表语形容词</li>
<li>VV 其他动词</li>
</ul>
<h2 id="named-entity-recognizer">Named Entity Recognizer</h2>
<p>命名实体识别，主要以下几个输出：</p>
<ul>
<li>O</li>
<li>ORG</li>
<li>LOC</li>
<li>PER</li>
<li>GPE</li>
</ul>
<h2 id="parserannotator">ParserAnnotator</h2>
<p>parse 句法分析：</p>
<ul>
<li>root 根</li>
<li>IP 从句</li>
<li>NP 名词短语</li>
<li>VP 动词短语</li>
<li>PP 介词短语</li>
<li>前面在POS中提到的词性，在具体词的上一节点。</li>
<li>PU 断句符号</li>
<li>​</li>
</ul>
<h2 id="corenlp">CoreNLP加速</h2>
<p>本小节主要参看了 <a href="https://stanfordnlp.github.io/CoreNLP/memory-time.html">CoreNLP的官方介绍</a> ，其中最核心的一个点就是慎重选择你的 annotators ，不需要就不选。</p>
<p>如果只是想要词性标注和ner功能，那么推荐的annotators设置为：</p>
<div class="highlight"><pre><span></span>tokenize, ssplit, pos, lemma, ner
</pre></div>


<p>如果命名实体识别ner你只需要 person location organization ，那么你的annotators只需要设置为：</p>
<div class="highlight"><pre><span></span>tokenize,ssplit,pos,ner
</pre></div>


<p>然后还可以进一步设置：</p>
<div class="highlight"><pre><span></span>ner.useSUTime false 
ner.applyNumericClassifiers false 
</pre></div>
            
            
            <hr/>

        </div>
        <section>
        <div class="col-md-2" style="float:right;font-size:0.9em;">
            <h4>首发于：</h4>
            <time pubdate="pubdate" datetime="2019-03-05T00:00:00+08:00">2019年 3月 5日 </time>

<h4>最近更新于：</h4>
<time datetime="2019-03-05T00:00:00+08:00">2019年 3月 5日 </time>

            <h4>分类：</h4>
            <a class="category-link" href="/categories.html#zi-ran-yu-yan-chu-li-ref">自然语言处理</a>
            <h4>标签：</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#corenlp-ref">corenlp
</a></li>
            </ul>
        </div>
        </section>
</div>
</article>
    </div>
    <div class="col-md-1"></div>

</div>


<div id="push"></div>


<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a> and updated by <a href="http://www.cdwanze.work" title="cdwanze Home Page">cdwanze</a></li>
    </ul>
</div>
</footer>

        <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
    <script>
        function validateForm(query) {
            return (query.length > 0);
        }
    </script>

    <script>
        function adjust_search_width() {
            var w = document.documentElement.clientWidth;
            if ((w > 755) && (w < 975)) {
                plus_width = w - 755;
                $('.navbar-form .form-control').outerWidth(210 + plus_width);
            } else if (w >= 975) {
                $('.navbar-form .form-control').outerWidth(210 + 220);
            } else if (w <= 755) {
                $('.navbar-form .form-control').css('width', '100%')
            }
        }

        $(document).ready(function () {
            adjust_search_width();
        });

        window.onresize = function () {
            adjust_search_width();
        }

    </script>


    



</body>
</html>