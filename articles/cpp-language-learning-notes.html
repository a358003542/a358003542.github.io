<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msvalidate.01" content="55CB117A61A6F8286173763FB18D9625"/>

        <meta name="author" content="wanze"/>
        <meta name="copyright" content="wanze"/>

        <meta name="description"
              content="前言 本教程参考 这个github样例项目 阅读更方便。 本文假定读者已经学会C语言了，如果没有请先学习C语言，这不冲突的。读者可以参看笔者写的 C语言学习笔记一文 。 CPP语言开发环境 CPP语言开发环境还是推荐使用visual studio。 hello world #include &lt;iostream&gt; int main(void) { using namespace std; cout &lt;&lt; &#34;hello world!&#34;; cout &lt;&lt; endl; return 0; } 头文件的扩展名 cpp新的风格头文件是没有扩展名的，比如 iostream 就是 iostream ，并没有.h或者.hpp之类的，这样可以使用 namespace std 。旧的风格大体类似于C语言带上 .h 后缀。 命名空间 这个算是和C语言很大的一个不同点了，命名空间这个概念对于熟悉编程的人来说并不是一个默认的概念了，大体类似于python的模块名，一些其他编程语言也有类似的概念。比如 …
"/>

        <meta property="og:type" content="article"/>
        <meta name="twitter:card" content="summary">

<meta name="keywords" content=", cpp_language, " />

<meta property="og:title" content="CPP语言学习笔记 "/>
<meta property="og:url" content="https://a358003542.github.io/articles/cpp-language-learning-notes.html" />
<meta property="og:description" content="前言 本教程参考 这个github样例项目 阅读更方便。 本文假定读者已经学会C语言了，如果没有请先学习C语言，这不冲突的。读者可以参看笔者写的 C语言学习笔记一文 。 CPP语言开发环境 CPP语言开发环境还是推荐使用visual studio。 hello world #include &lt;iostream&gt; int main(void) { using namespace std; cout &lt;&lt; &#34;hello world!&#34;; cout &lt;&lt; endl; return 0; } 头文件的扩展名 cpp新的风格头文件是没有扩展名的，比如 iostream 就是 iostream ，并没有.h或者.hpp之类的，这样可以使用 namespace std 。旧的风格大体类似于C语言带上 .h 后缀。 命名空间 这个算是和C语言很大的一个不同点了，命名空间这个概念对于熟悉编程的人来说并不是一个默认的概念了，大体类似于python的模块名，一些其他编程语言也有类似的概念。比如 …" />
<meta property="og:site_name" content="wanze的博文" />
<meta property="og:article:author" content="wanze" />
<meta property="og:article:published_time" content="2020-07-06T18:31:54.495862+08:00" />
<meta name="twitter:title" content="CPP语言学习笔记 ">
<meta name="twitter:description" content="前言 本教程参考 这个github样例项目 阅读更方便。 本文假定读者已经学会C语言了，如果没有请先学习C语言，这不冲突的。读者可以参看笔者写的 C语言学习笔记一文 。 CPP语言开发环境 CPP语言开发环境还是推荐使用visual studio。 hello world #include &lt;iostream&gt; int main(void) { using namespace std; cout &lt;&lt; &#34;hello world!&#34;; cout &lt;&lt; endl; return 0; } 头文件的扩展名 cpp新的风格头文件是没有扩展名的，比如 iostream 就是 iostream ，并没有.h或者.hpp之类的，这样可以使用 namespace std 。旧的风格大体类似于C语言带上 .h 后缀。 命名空间 这个算是和C语言很大的一个不同点了，命名空间这个概念对于熟悉编程的人来说并不是一个默认的概念了，大体类似于python的模块名，一些其他编程语言也有类似的概念。比如 …">


    <title>CPP语言学习笔记  · wanze的博文
</title>

        <link href="https://a358003542.github.io/theme/css/font-awesome.css" rel="stylesheet"
              media="screen">
        <link href="https://a358003542.github.io/theme/css/bootstrap.min.css" rel="stylesheet"
              media="screen">

        <link rel="stylesheet" type="text/css"
                  href="https://a358003542.github.io/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css"
                  href="https://a358003542.github.io/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css"
                  href="https://a358003542.github.io/theme/css/base.css" media="screen">




</head>
<body>

<nav class="navbar">
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".navbar-collapse"
                    aria-expanded="false">
                <span class="sr-only">Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="https://a358003542.github.io/"><span
                    class=site-name>网站首页</span></a>
        </div>


        <div class="navbar-collapse collapse">
            <form action="https://a358003542.github.io/search.html"
                  onsubmit="return validateForm(this.elements['q'].value);"
                  class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" name="q" id="tipue_search_input"
                           class="form-control" placeholder="Search..."
                           style="width:430px;">
                </div>
                <button class="btn btn-default" type="submit">搜索</button>
            </form>


            <ul class="nav navbar-nav nav-pills navbar-right">
                <li >
                    <a  href="/archives.html">所有文章</a></li>

                <li ><a href="/categories.html">文章分类</a></li>
                <li ><a href="/tags.html">文章标签</a></li>


                        <li >
                            <a href="https://a358003542.github.io/about.html">关于本网站</a>
                        </li>
            </ul>


        </div>
    </div>
</nav>


<div class="container-fluid">
    <div class="col-md-1 col-md-1-left"></div>
    <div class="col-md-10">
<article>
<div class="row">
    <header class="page-header col-md-10 col-md-offset-2">
    <h1><a href="https://a358003542.github.io/articles/cpp-language-learning-notes.html"> CPP语言学习笔记  </a></h1>
    </header>
</div>

<div class="row">
    <div class="col-md-2 table-of-content">
        <nav>
        <h4>目录</h4>
        <div class="toc">
<ul>
<li><a href="#_1">前言</a></li>
<li><a href="#cpp">CPP语言开发环境</a></li>
<li><a href="#hello-world">hello world</a><ul>
<li><a href="#_2">头文件的扩展名</a></li>
<li><a href="#_3">命名空间</a></li>
<li><a href="#cout">cout对象</a></li>
<li><a href="#_4">声明变量</a></li>
<li><a href="#_5">定义函数</a></li>
</ul>
</li>
<li><a href="#_6">数据类型</a></li>
<li><a href="#_7">程序逻辑</a></li>
<li><a href="#_8">函数</a><ul>
<li><a href="#_9">数组作为函数的参数</a></li>
<li><a href="#c">C风格字符串作为函数的参数</a></li>
<li><a href="#_10">结构体作为函数的参数</a></li>
<li><a href="#_11">函数作为函数的参数</a></li>
</ul>
</li>
<li><a href="#_12">内存模型和名称空间</a></li>
<li><a href="#_13">类</a></li>
<li><a href="#_14">附录</a><ul>
<li><a href="#cin">cin详解</a></li>
<li><a href="#cout_1">cout详解</a></li>
</ul>
</li>
<li><a href="#_15">参考资料</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="col-md-8 article-content">

            
<h2 id="_1">前言</h2>
<p>本教程参考 <a href="https://github.com/a358003542/cpp_practice">这个github样例项目</a> 阅读更方便。</p>
<p>本文假定读者已经学会C语言了，如果没有请先学习C语言，这不冲突的。读者可以参看笔者写的 <a href="https://a358003542.github.io/articles/c-language-learning-notes.html">C语言学习笔记一文</a> 。</p>
<h2 id="cpp">CPP语言开发环境</h2>
<p>CPP语言开发环境还是推荐使用visual studio。</p>
<h2 id="hello-world">hello world</h2>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"hello world!"</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h3 id="_2">头文件的扩展名</h3>
<p>cpp新的风格头文件是没有扩展名的，比如 <code>iostream</code> 就是 iostream ，并没有.h或者.hpp之类的，这样可以使用 <code>namespace std</code> 。旧的风格大体类似于C语言带上 <code>.h</code> 后缀。</p>
<h3 id="_3">命名空间</h3>
<p>这个算是和C语言很大的一个不同点了，命名空间这个概念对于熟悉编程的人来说并不是一个默认的概念了，大体类似于python的模块名，一些其他编程语言也有类似的概念。比如：</p>
<div class="highlight"><pre><span></span><span class="n">Microflot</span><span class="o">::</span><span class="n">hello</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>
<span class="n">GooGloo</span><span class="o">::</span><span class="n">hello</span><span class="p">(</span><span class="s">"hello"</span><span class="p">);</span>
</pre></div>
<p>上面一个是调用的命名空间Microflot里面的hello函数，另一个是调用的GooGloo命令空间的hello函数。之前的hello world程序 <code>using namespace std;</code> 的话就是如下写的：</p>
<div class="highlight"><pre><span></span>#include &lt;iostream&gt;

int main(void) {
    //using namespace std;
    std::cout &lt;&lt; "hello world!";
    std::cout &lt;&lt; std::endl;

    return 0;
}
</pre></div>
<p>这个有点类似于python里面的 <code>from what import *</code> 将里面的函数名等都给导进来了，所以就可以直接使用cin，cout了。此外还有一种推荐的做法是：</p>
<div class="highlight"><pre><span></span><span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">;</span>
<span class="k">using</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</pre></div>
<p>这大体类似于python里面的 <code>from what import cout</code> ，只是具体导入了某个函数名之类的。</p>
<h3 id="cout">cout对象</h3>
<p>cout是一个对象，其内部有方法知道如何打印字符串。</p>
<div class="highlight"><pre><span></span>cout &lt;&lt; "string";
</pre></div>
<p>上面代码的过程就是cout对象调用插入运算符 <code>&lt;&lt;</code> ，从而执行某个操作将字符串插入到输出流中。</p>
<p>std::endl是一个特殊的C++符号 【换行符？】，将其插入输出流将导致屏幕光标换行。</p>
<div class="highlight"><pre><span></span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="mi">25</span><span class="p">;</span>
</pre></div>
<p>是的， cout可以直接打印int数值。</p>
<h3 id="_4">声明变量</h3>
<p>cpp这点和c语言最大的区别是cpp是推荐在首次使用变量之前声明它而不是集中在文件开头。</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the x value: "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the y value: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">y</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"x + y = "</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>cin 和cout相比较之前C语言哪一套实在方便多了，然后我们看到cout可以进行简单的字符串拼接操作。</p>
<h3 id="_5">定义函数</h3>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the x value: "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the y value: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">y</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"x + y = "</span> <span class="o">&lt;&lt;</span> <span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
<p>就cpp和c语言的函数定义和函数原型声明这块来说区别不是太大。熟悉C语言的这块简单温习下就好。</p>
<h2 id="_6">数据类型</h2>
<p>整型有：short，int，long 和 long long 。一般没有有说服力的理由就应使用int。</p>
<p>char类型：char类型一般用于存储一个字节大小的字符，但也用于存储比short更小的整型。</p>
<p>bool类型：true or false</p>
<p>符号常量修饰符：const</p>
<p>浮点数类型：float、double、long double。</p>
<p>1．编写一个小程序，要求用户使用一个整数指出自己的身高（单位为英寸），然后将身高转换为英尺和英寸【这里的意思是取整部分为英尺余下部分继续为英寸】。该程序使用下划线字符来指示输入位置。另外，使用一个const符号常量来表示转换因子。</p>
<p>inch2foot.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cmath&gt;</span><span class="cp"></span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">CONVERSION</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">height_inch</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input your height value in inch: "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">height_inch</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">height_inch</span> <span class="o">%</span> <span class="n">CONVERSION</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"your height value is "</span> <span class="o">&lt;&lt;</span> <span class="n">height_inch</span> <span class="o">/</span> <span class="n">CONVERSION</span>
            <span class="o">&lt;&lt;</span> <span class="s">" foots."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"your height value is "</span> <span class="o">&lt;&lt;</span> <span class="n">height_inch</span> <span class="o">/</span> <span class="n">CONVERSION</span>
            <span class="o">&lt;&lt;</span> <span class="s">" foots and "</span> <span class="o">&lt;&lt;</span> <span class="n">height_inch</span> <span class="o">%</span> <span class="n">CONVERSION</span> <span class="o">&lt;&lt;</span> <span class="s">"inchs."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> <code>%</code> 是取模运算，整数之间的除法是取商运算。</p>
<p>3．编写一个程序，要求用户以度、分、秒的方式输入一个纬度，然后以度为单位显示该纬度。1度为60分，1分等于60秒，请以符号常量的方式表示这些值。对于每个输入值，应使用一个独立的变量存储它。下面是该程序运行时的情况：</p>
<p><img alt="img" src="https://a358003542.github.io/images/programming/cpp_xiti_1.png"/></p>
<p>to_degress.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cmath&gt;</span><span class="cp"></span>

<span class="k">const</span> <span class="kt">float</span> <span class="n">CONVERSION</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">degrees</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">minutes</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">seconds</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">result</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter a latitude in degrees, minutes, and seconds:"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"First, enter the degrees: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">degrees</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Next, enter the minutes of arc: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">minutes</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Finally, enter the seconds of arc: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">seconds</span><span class="p">;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">degrees</span> <span class="o">+</span> <span class="n">minutes</span> <span class="o">/</span> <span class="n">CONVERSION</span> <span class="o">+</span> <span class="n">seconds</span> <span class="o">/</span> <span class="p">(</span><span class="n">CONVERSION</span> <span class="o">*</span> <span class="n">CONVERSION</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">degrees</span> <span class="o">&lt;&lt;</span> <span class="s">" degrees, "</span>  <span class="o">&lt;&lt;</span> <span class="n">minutes</span> <span class="o">&lt;&lt;</span> <span class="s">" minutes, "</span> <span class="o">&lt;&lt;</span> <span class="n">seconds</span> <span class="o">&lt;&lt;</span> <span class="s">" seconds = "</span> <span class="o">&lt;&lt;</span>
            <span class="n">result</span>
            <span class="o">&lt;&lt;</span> <span class="s">" degrees."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>


    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例主要演示了const定义常数项的用法。</p>
<p>5．编写一个程序，要求用户输入全球当前的人口和美国当前的人口（或其他国家的人口）。将这些信息存储在long long变量中，并让程序显示美国（或其他国家）的人口占全球人口的百分比。该程序的输出应与下面类似：</p>
<p><img alt="img" src="https://a358003542.github.io/images/programming/cpp_xiti_2.png"/></p>
<p>usa_population.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cmath&gt;</span><span class="cp"></span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">long</span> <span class="kt">long</span> <span class="n">word_population</span><span class="p">;</span>
    <span class="kt">long</span> <span class="kt">long</span> <span class="n">usa_population</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">population_ratio</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter the world's population: "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">word_population</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter the population of the US: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">usa_population</span><span class="p">;</span>

    <span class="n">population_ratio</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">usa_population</span> <span class="o">/</span> <span class="n">word_population</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"The population of the US is "</span> <span class="o">&lt;&lt;</span> <span class="n">population_ratio</span> <span class="o">&lt;&lt;</span> <span class="s">"% of the world population."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例主要演示了如何进行强制类型转换。</p>
<p>7．编写一个程序，要求用户按欧洲风格输入汽车的耗油量（每100公里消耗的汽油量（升）），然后将其转换为美国风格的耗油量—每加仑多少英里。注意，除了使用不同的单位计量外，美国方法（距离/燃料）与欧洲方法（燃料/距离）相反。100公里等于62.14英里，1加仑等于3.875升。因此，19mpg大约合12.4l/100km，27mpg大约合8.71/100km。</p>
<p>to_usa_mpg.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cmath&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">float</span> <span class="n">eu_fuel</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">usa_mpg</span><span class="p">;</span>

    <span class="k">const</span> <span class="kt">float</span> <span class="n">KILOMETER_CONVERT_MILES</span> <span class="o">=</span> <span class="mf">0.6214</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">float</span> <span class="n">GALLON_CONVERT_LITERS</span> <span class="o">=</span> <span class="mf">3.875</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Please input how many your car use fuel[unit liter] on running 100 kilometers: "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">eu_fuel</span><span class="p">;</span>

    <span class="n">usa_mpg</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">KILOMETER_CONVERT_MILES</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">eu_fuel</span> <span class="o">/</span> <span class="n">GALLON_CONVERT_LITERS</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"The mpg your car in usa standard is : "</span> <span class="o">&lt;&lt;</span> <span class="n">usa_mpg</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
<hr/>
<p>long totals[500] = {0};  //初始化一个500个元素的数组，索引为0的元素设值为0，其他元素自动设值为0。</p>
<p>你也可以如下：</p>
<p>long totals[500] = {} ; // 这样所有元素都自动设值为0。</p>
<p>字符串类型，C严格意义上来说并没有所谓的字符串类型，C语言风格的字符串这里略过讨论了，C++添加了string类，你需要包含头文件string，然后就可以如下使用string类了。</p>
<div class="highlight"><pre><span></span>string str1;
str1 = "abc";
</pre></div>
<p>熟悉C语言风格字符串使用的一下就看出一个巨大的区别了，那就是这里可以直接初始化字符串变量，不需要操作数组长度之类的东西了，非常好的改进！</p>
<p>然后C语言风格的字符串不可以将一个字符串的值赋值给另一个字符串，但是string类可以如下做：</p>
<div class="highlight"><pre><span></span>string str1;
string str2 = "abc";
str1 = str2;
cout &lt;&lt; str1 + str2;
</pre></div>
<p>你还可以用加法来进行字符串拼接，终于，类似python的那些基本字符串操作在C语言那边还要让人头疼好久这里终于顺畅一些了。</p>
<div class="highlight"><pre><span></span>cout &lt;&lt; str1.size(); // 返回3
</pre></div>
<p>请求行输入因为历史原因 cin.getline(charstr, max_size) 更接近于我们在C语言中熟知的那种概念，而友元函数 getline(cin, string) 反而更接近C++风格，因为cin是C++里面的概念，所以人们会预期cin的类方法会对接string接口，但这只是历史要兼容的原因罢了，并没什么特别的理由要弄得这样反常规。</p>
<p>C++里面的结构就基本的东西来说和C语言里面的讨论是没有太大区别的，C++里面的结构体当然也可以将string类作为成员对象。特别要强调的是C语言里面字符串数组实际上并没有所谓的字符串这个基本内存存储单元，因为字符串不定长，所以字符串数组实际下面存放的是指针，但是结构数组不同，C语言的结构体是如此基本，它就可以看做一个基本的内存存储单元，所以结构数组下面就是一个一个结构体而不是指向结构体的指针。因此结构体数组的引用语句是 <code>struct_array[0].name</code> 。</p>
<p>C++里面的Union和enum枚举和C语言里面的讨论也没有太大区别。</p>
<p>C++里面的指针还有相关内存管理malloc之类的等等和C语言里面的讨论也没有太大区别，不过需要注意的是C++编程一定程度上弱化了指针的概念，很多地方C++编程不一定要使用指针的，然后内存管理也不推荐使用malloc函数而是推荐使用new和delete运算符。</p>
<p>对于C++的基本类型和结构可以如下使用new来声明一个内存块，然后用给定的指针名来指向它，引用它和使用它。</p>
<div class="highlight"><pre><span></span>typeName * pointer_name = new typeName;

int * pn = new int;
*pn = 1;
cout &lt;&lt; *pn;
</pre></div>
<p>这个东西只能通过该指针来使用，参考资料1说这个东西更确切来说应该叫做数据对象，变量也是数据对象。不管怎么说，就是指内存里的那个东西。</p>
<p>delete运算符只能用于那些也就是上面讨论的new出来的指针。具体如下所示：</p>
<div class="highlight"><pre><span></span>int * pn = new int;
delete pn;
</pre></div>
<p>使用new来创建数组和结构和其他又有所不同，以数组为例，常规声明数组叫做静态联编（static binding），即在编译阶段已经为该数组申请分配好内存了；而通过new来创建的数组只在后面运行阶段才可能创建，也就是运行阶段如果没使用这个数组也不会创建，这称为动态联编（dynamic binding）。这种数组叫做动态数组。</p>
<p>下面例子演示了其为何叫做动态数组，我们可以运行时用户指定该数组大小，然后运行时给定值：</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the array length: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">;</span>

    <span class="kt">int</span><span class="o">*</span> <span class="n">parray</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">x</span><span class="p">];</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">parray</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">parray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">delete</span><span class="p">[]</span> <span class="n">parray</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注意new出来的动态数组 delete 运算符语句加上了 [] 。</strong></p>
<p>具体指针的使用C语言里面的东西了，这里可以回顾提醒一下， <code>arr[1]</code> 和 <code>*(arr+1)</code> 是一个意思， <code>arr[0]</code> 和 <code>*arr</code> 是一个意思。</p>
<p>关于指针和数组这块东西很多的，但因为都是C语言里面的知识点，我这里就略过讨论了，如果读者自觉在这块还有所欠缺，请在C语言教材对应的部分补习之。</p>
<p>也可以使用new一个动态的字符串，或者说动态字符数组，但这完全没有必要。因为string类内部也就是这样做的，你没必要去重复造轮子了，直接使用string类就是了。</p>
<p>使用new出来的结构参照前面的讨论，类似的叫做动态结构。这里的动态结构倒不是说结构的定义动态，结构体的定义还是要做的。</p>
<p>C语言里面就存储类型有自动存储和静态存储，简单来说自动存储变量的存活是程序自动管理的，而静态存储变量在整个程序运行期都是存活的。这一块C++和C语言是一致的，不同的是C++因为上面讨论的new运算符而提出了一个新的存储类型，叫做动态存储。具体new和delete运算符管理的内存池和静态变量和自动变量的内存池是分开的，其叫做自由存储空间或堆。如果new出来的动态存储变量没有delete，这叫做内存泄漏，内存泄露一般只是本程序那些内存没法用了，然后严重点本程序运行的内存被耗尽了，因为没有内存程序崩溃了。参考资料说这种严重的泄漏甚至导致操作系统或其他应用程序崩溃。</p>
<p>类似string类，C++用vector类来实现动态数组，类似上面的string类的讨论，如果你要自己利用new和delete来实现某种动态数组的效果，那么不要重复造轮子了，请用vector类，vector类内部就是这样做的。下面将上面动态数组的例子写成vector版本：</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the array length: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">;</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vec</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">tmp</span><span class="p">;</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">tmp</span><span class="p">;</span>
        <span class="n">vec</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>vector类还有很多其他用法，但在这里不是重点。我们看到vector初始化不需要指定长度参数了，其通过push_back方法来新增元素。</p>
<p>vector类因为是动态数组，所以效率有点低，C++又实现了一个新的类array类，其内部存储和原来的数组存储风格一致，所以效率等价，然后因为是类，所有多了一些便捷的操作方法。这些方法后面有时间再慢慢了解。</p>
<hr/>
<p>编写一个C++程序，如下述输出示例所示的那样请求并显示信息：</p>
<p><img alt="img" src="https://a358003542.github.io/images/programming/cpp_xiti_c4_1.png"/></p>
<p>注意，该程序应该接受的名字包含多个单词。另外，程序将向下调整成绩，即向下调一个字母。</p>
<p>xiti_c4_1.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="n">string</span> <span class="n">first_name</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">last_name</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">grade</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">age</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"What is your first name? "</span><span class="p">;</span>
    <span class="n">getline</span><span class="p">(</span><span class="n">cin</span><span class="p">,</span> <span class="n">first_name</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"What is your last name? "</span><span class="p">;</span>

    <span class="n">getline</span><span class="p">(</span><span class="n">cin</span><span class="p">,</span> <span class="n">last_name</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"What letter grade do you deserve? "</span><span class="p">;</span>
    <span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">grade</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"What is your age? "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">age</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Name: "</span> <span class="o">&lt;&lt;</span> <span class="n">last_name</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">first_name</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Grade: "</span><span class="p">;</span> 
    <span class="n">cout</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">grade</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Age: "</span> <span class="o">&lt;&lt;</span> <span class="n">age</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 一般字符可以直接cout，但如果类型已经是int型了，那么希望输出对应的字符则需要使用<code>cout.get</code>。</p>
<p>编写一个程序，它要求用户首先输入其名，然后输入其姓；然后程序使用一个逗号和空格将姓和名组合起来，并存储和显示组合结果。请使用char数组和头文件cstring中的函数。下面是该程序运行时的情形：</p>
<p><img alt="img" src="https://a358003542.github.io/images/programming/cpp_xiti_c4_2.png"/></p>
<p>xiti_c4_3.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">char</span> <span class="n">first_name</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">last_name</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">40</span><span class="p">];</span>


    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"What is your first name? "</span><span class="p">;</span>
    <span class="n">cin</span><span class="p">.</span><span class="n">getline</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"What is your last name? "</span><span class="p">;</span>

    <span class="n">cin</span><span class="p">.</span><span class="n">getline</span><span class="p">(</span><span class="n">last_name</span><span class="p">,</span><span class="mi">20</span><span class="p">);</span>

    <span class="n">strcpy_s</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">);</span>
    <span class="n">strcat_s</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">", "</span><span class="p">);</span>
    <span class="n">strcat_s</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">first_name</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Here's the information in a single string: "</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例主要了解下C风格的字符数组用法。</p>
<p>结构CandyBar包含3个成员。第一个成员存储了糖块的品牌；第二个成员存储糖块的重量（可以有小数）；第三个成员存储了糖块的卡路里含量（整数）。请编写一个程序，声明这个结构，创建一个名为snack的CandyBar变量，并将其成员分别初始化为“Mocha Munch”、2.3和350。初始化应在声明snack时进行。最后，程序显示snack变量的内容。</p>
<p>xiti_c4_5.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">CandyBar</span> <span class="p">{</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">weight</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">calories</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">CandyBar</span> <span class="n">snack</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"Mocha Munch"</span><span class="p">,</span>
        <span class="mf">2.3</span><span class="p">,</span>
        <span class="mi">350</span>
    <span class="p">};</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"CandyBar "</span> <span class="o">&lt;&lt;</span> <span class="n">snack</span><span class="p">.</span><span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">" weight: "</span> <span class="o">&lt;&lt;</span> <span class="n">snack</span><span class="p">.</span><span class="n">weight</span> <span class="o">&lt;&lt;</span>
        <span class="s">" and calories: "</span> <span class="o">&lt;&lt;</span> <span class="n">snack</span><span class="p">.</span><span class="n">calories</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例主要演示了结构体的用法。</p>
<p>结构CandyBar包含3个成员，如上面讨论的。请编写一个程序，创建一个包含3个元素的CandyBar数组【使用new来动态分配数组，而不是声明一个包含3个元素的CandyBar数组】，并将它们初始化为所选择的值，然后显示每个结构的内容。</p>
<p>xiti_c4_6.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">CandyBar</span> <span class="p">{</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">weight</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">calories</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">CandyBar</span><span class="o">*</span> <span class="n">psnack</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CandyBar</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

    <span class="n">psnack</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">name</span> <span class="o">=</span> <span class="s">"aaa"</span><span class="p">;</span>
    <span class="n">psnack</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">weight</span> <span class="o">=</span> <span class="mf">2.3</span><span class="p">;</span>
    <span class="n">psnack</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">calories</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

    <span class="n">psnack</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"bbb"</span><span class="p">,</span>
        <span class="mf">2.5</span><span class="p">,</span>
        <span class="mi">6</span>
    <span class="p">};</span>

    <span class="n">psnack</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"ccc"</span><span class="p">,</span>
        <span class="mf">2.6</span><span class="p">,</span>
        <span class="mi">7</span>
    <span class="p">};</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"CandyBar "</span> <span class="o">&lt;&lt;</span> <span class="n">psnack</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">" weight: "</span> <span class="o">&lt;&lt;</span> <span class="n">psnack</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">weight</span> <span class="o">&lt;&lt;</span>
            <span class="s">" and calories: "</span> <span class="o">&lt;&lt;</span> <span class="n">psnack</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">calories</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="k">delete</span><span class="p">[]</span> <span class="n">psnack</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例主要演示了如何new一个结构体。</p>
<p>William Wingate从事比萨饼分析服务。对于每个披萨饼，他都需要记录下列信息：</p>
<p>披萨饼公司的名称，可以有多个单词组成。
披萨饼的直径。
披萨饼的重量。
请设计一个能够存储这些信息的结构【请使用new来为结构分配内存，请使用vector来实现动态数组】，并编写一个使用这种结构变量的程序。程序将请求用户输入上述信息，然后显示这些信息。请使用cin（或它的方法）和cout。</p>
<p>xiti_c4_7.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>


<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">Pizza</span> <span class="p">{</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">diameter</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">weight</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the array length: "</span><span class="p">;</span>
    <span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Pizza</span> <span class="o">*&gt;</span> <span class="n">vec</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Pizza</span><span class="o">*</span> <span class="n">ppizza</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Pizza</span><span class="p">;</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Please input your pizza name: "</span><span class="p">;</span>

        <span class="n">getline</span><span class="p">(</span><span class="n">cin</span><span class="p">,</span> <span class="n">ppizza</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Please input your pizza diameter: "</span><span class="p">;</span>
        <span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">ppizza</span><span class="o">-&gt;</span><span class="n">diameter</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Please input your pizza weight: "</span><span class="p">;</span>
        <span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">ppizza</span><span class="o">-&gt;</span><span class="n">weight</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"-----------------"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

        <span class="n">vec</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ppizza</span><span class="p">);</span>
    <span class="p">}</span>


    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"CandyBar "</span> <span class="o">&lt;&lt;</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">" weight: "</span> <span class="o">&lt;&lt;</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">diameter</span> <span class="o">&lt;&lt;</span>
            <span class="s">" and calories: "</span> <span class="o">&lt;&lt;</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">weight</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例主要演示了vector的用法。</p>
<h2 id="_7">程序逻辑</h2>
<p>这块C++和C语言内容基本上没什么区别，所以大多略过了，然后主要做一些习题也算是对前面学到的东西的再应用。</p>
<p>C++的for语句多了一个新的下面这种形式，这个要了解下：</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nl">x</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}){</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>这个熟悉python语言等高级语言的知道这是迭代遍历循环操作，然后后面可以是数组或者vector或者array。</p>
<p>关于cin的用法请看下面的演示例子，主要是这个补充知识点：cin.get获取字符之后返回的仍是cin对象，其如果在bool取值环境，如果读取成功则返回true，如果读取失败则返回fasle。读取失败也包括常规的EOF结尾情况。</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter characters:</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span> <span class="c1">//Ctrl+Z </span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ch</span><span class="p">;</span>
        <span class="o">++</span><span class="n">count</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>1．编写一个要求用户输入两个整数的程序。该程序将计算并输出这两个整数之间（包括这两个整数）所有整数的和。这里假设先输入较小的整数。例如，如果用户输入的是2和9，则程序将指出2～9之间所有整数的和为44。</p>
<p>xiti_c5_1.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">start_int</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">end_int</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the start integer: "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">start_int</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the end integer: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">end_int</span><span class="p">;</span>


    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">start_int</span><span class="p">;</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">end_int</span><span class="p">;</span> <span class="n">n</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sum</span> <span class="o">+=</span> <span class="n">n</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"the integer in range "</span> <span class="o">&lt;&lt;</span> <span class="n">start_int</span> <span class="o">&lt;&lt;</span> <span class="s">" - "</span> <span class="o">&lt;&lt;</span> <span class="n">end_int</span> <span class="o">&lt;&lt;</span> <span class="s">" summation is "</span> <span class="o">&lt;&lt;</span> <span class="n">sum</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>


    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例主要演示了如何写for语句。</p>
<p>3．编写一个要求用户输入数字的程序。每次输入后，程序都将报告到目前为止，所有输入的累计和。当用户输入0时，程序结束。</p>
<p>xiti_c5_3.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>


    <span class="kt">int</span> <span class="n">temp</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">do</span> <span class="p">{</span>    
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input a number, input 0 quit : "</span><span class="p">;</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">temp</span><span class="p">;</span>
        <span class="n">sum</span> <span class="o">+=</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">temp</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"your input number summation is "</span> <span class="o">&lt;&lt;</span> <span class="n">sum</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>


    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例演示了do-while语句。</p>
<p>5．假设要销售《C++ For Fools》一书。请编写一个程序，输入全年中每个月的销售量（图书数量，而不是销售额）。程序通过循环，使用初始化为月份字符串的char *数组（或string对象数组）逐月进行提示，并将输入的数据储存在一个int数组中。然后，程序计算数组中各元素的总数，并报告这一年的销售情况。</p>
<p>xiti_c5_5.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">string</span> <span class="n">months</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">"jan"</span><span class="p">,</span><span class="s">"feb"</span><span class="p">,</span><span class="s">"march"</span><span class="p">,</span><span class="s">"april"</span><span class="p">,</span><span class="s">"may"</span><span class="p">,</span><span class="s">"june"</span><span class="p">,</span><span class="s">"july"</span><span class="p">,</span><span class="s">"august"</span><span class="p">,</span><span class="s">"september"</span><span class="p">,</span><span class="s">"october"</span><span class="p">,</span><span class="s">"november"</span><span class="p">,</span><span class="s">"december"</span> <span class="p">};</span>
    <span class="kt">int</span> <span class="n">sales</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">string</span> <span class="nl">month</span> <span class="p">:</span> <span class="n">months</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input the sale of amount in "</span> <span class="o">&lt;&lt;</span> <span class="n">month</span> <span class="o">&lt;&lt;</span> <span class="s">" : "</span><span class="p">;</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">sales</span><span class="p">[</span><span class="n">count</span><span class="p">];</span>

        <span class="n">count</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nl">x</span> <span class="p">:</span> <span class="n">sales</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">sum</span> <span class="o">+=</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"this year's sale amount is: "</span> <span class="o">&lt;&lt;</span> <span class="n">sum</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例主要演示了如何使用新式的for语句。</p>
<p>6．完成编程练习5，但这一次使用一个二维数组来存储输入—3年中每个月的销售量。程序将报告每年销售量以及三年的总销售量。</p>
<p>xiti_c5_6.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>


<span class="kt">int</span> <span class="nf">main19</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">sum_all</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">string</span> <span class="n">months</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">"jan"</span><span class="p">,</span><span class="s">"feb"</span><span class="p">,</span><span class="s">"march"</span><span class="p">,</span><span class="s">"april"</span><span class="p">,</span><span class="s">"may"</span><span class="p">,</span><span class="s">"june"</span><span class="p">,</span><span class="s">"july"</span><span class="p">,</span><span class="s">"august"</span><span class="p">,</span><span class="s">"september"</span><span class="p">,</span><span class="s">"october"</span><span class="p">,</span><span class="s">"november"</span><span class="p">,</span><span class="s">"december"</span> <span class="p">};</span>
    <span class="kt">int</span> <span class="n">sales</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">sum_year</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">string</span> <span class="nl">month</span> <span class="p">:</span> <span class="n">months</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input year "</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">" the sale of amount in "</span> <span class="o">&lt;&lt;</span> <span class="n">month</span> <span class="o">&lt;&lt;</span> <span class="s">" : "</span><span class="p">;</span>
            <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">sales</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">count</span><span class="p">];</span>

            <span class="n">sum_year</span> <span class="o">+=</span> <span class="n">sales</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">count</span><span class="p">];</span>

            <span class="n">count</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"this year "</span><span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">"all sale amount is: "</span> <span class="o">&lt;&lt;</span> <span class="n">sum_year</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

        <span class="n">sum_all</span> <span class="o">+=</span> <span class="n">sum_year</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"the three year all sale amount is: "</span><span class="o">&lt;&lt;</span> <span class="n">sum_all</span>  <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 本例主要演示了二维数组的用法。</p>
<p>10．编写一个使用嵌套循环的程序，要求用户输入一个值，指出要显示多少行。然后，程序将显示相应行数的星号，其中第一行包括一个星号，第二行包括两个星号，依此类推。每一行包含的字符数等于用户指定的行数，在星号不够的情况下，在星号前面加上句点。该程序的运行情况如下：</p>
<p><img alt="img" src="https://a358003542.github.io/images/programming/xiti_c5_10.png"/></p>
<p>xiti_c5_10.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main20</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">rows</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter number of rows: "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">rows</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">rows</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//here we can not use the if statement.</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"."</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"*"</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>


    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> 需要注意本例不能使用if语句，所以才有上面的写法。</p>
<p>下面这个例子中 cin &gt;&gt; fish[i] 返回cin对象，其bool值含义是如果获取输入成功则返回true，如果获取输入失败则返回false。</p>
<p>cinfish.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>


<span class="k">const</span> <span class="kt">int</span> <span class="n">Max</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>


    <span class="kt">double</span> <span class="n">fish</span><span class="p">[</span><span class="n">Max</span><span class="p">];</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"fish #1: "</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">Max</span> <span class="o">&amp;&amp;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">fish</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">++</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">Max</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"fish #"</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="s">": "</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kt">double</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">fish</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"No fish</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"average weight is "</span> <span class="o">&lt;&lt;</span> <span class="n">total</span> <span class="o">/</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>cinfish2.cpp</p>
<p>下面例子类似上面也是一个和用户交互请求输入数字的例子，不同的是上一个如果用户输入有误则退出，而这一个如果用户输入有误程序会继续请求用户输入。所以上一个例子是演示的不定数目的输入情况，而这一个演示的是如何处理用户输入有误时候的情况。为了和上面的例子进行比较我尽可能让这两个例子基本结构变动不大。</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>


<span class="k">const</span> <span class="kt">int</span> <span class="n">Max</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">double</span> <span class="n">fish</span><span class="p">[</span><span class="n">Max</span><span class="p">];</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"fish #1: "</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">Max</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">fish</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="p">{</span> <span class="c1">//failed for input</span>
            <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//clear the wrong input line</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">Max</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"fish #"</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="s">": "</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">Max</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"fish #"</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="s">": "</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">double</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">fish</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"No fish</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"average weight is "</span> <span class="o">&lt;&lt;</span> <span class="n">total</span> <span class="o">/</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p><strong>注解：</strong> <code>cin.clear()</code> 是让cin在遇到错误输入之后可以继续开始接受输入。后面的while语句是清空缓存区那一行错误输入。</p>
<p>下面这个例子演示了如何写入文件：</p>
<p>outfile.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">char</span> <span class="n">automobile</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>

    <span class="kt">int</span> <span class="n">year</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">a_price</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">d_price</span><span class="p">;</span>

    <span class="n">ofstream</span> <span class="n">outFile</span><span class="p">;</span>
    <span class="n">outFile</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">"carinfo.txt"</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter the make and modle of automobile: "</span><span class="p">;</span>
    <span class="n">cin</span><span class="p">.</span><span class="n">getline</span><span class="p">(</span><span class="n">automobile</span><span class="p">,</span> <span class="mi">50</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter the model year: "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">year</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter the original asking price: "</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">a_price</span><span class="p">;</span>

    <span class="n">d_price</span> <span class="o">=</span> <span class="mf">0.913</span> <span class="o">*</span> <span class="n">a_price</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">fixed</span><span class="p">;</span> <span class="c1">// </span>
    <span class="n">cout</span><span class="p">.</span><span class="n">precision</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">//</span>
    <span class="n">cout</span><span class="p">.</span><span class="n">setf</span><span class="p">(</span><span class="n">ios_base</span><span class="o">::</span><span class="n">showpoint</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Make and modle: "</span> <span class="o">&lt;&lt;</span> <span class="n">automobile</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Year: "</span> <span class="o">&lt;&lt;</span> <span class="n">year</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Was asking $"</span> <span class="o">&lt;&lt;</span> <span class="n">a_price</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Now asking $"</span> <span class="o">&lt;&lt;</span> <span class="n">d_price</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>


    <span class="n">outFile</span> <span class="o">&lt;&lt;</span> <span class="n">fixed</span><span class="p">;</span>
    <span class="n">outFile</span><span class="p">.</span><span class="n">precision</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">outFile</span><span class="p">.</span><span class="n">setf</span><span class="p">(</span><span class="n">ios_base</span><span class="o">::</span><span class="n">showpoint</span><span class="p">);</span>
    <span class="n">outFile</span> <span class="o">&lt;&lt;</span> <span class="s">"Make and modle: "</span> <span class="o">&lt;&lt;</span> <span class="n">automobile</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">outFile</span> <span class="o">&lt;&lt;</span> <span class="s">"Year: "</span> <span class="o">&lt;&lt;</span> <span class="n">year</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">outFile</span> <span class="o">&lt;&lt;</span> <span class="s">"Was asking $"</span> <span class="o">&lt;&lt;</span> <span class="n">a_price</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">outFile</span> <span class="o">&lt;&lt;</span> <span class="s">"Now asking $"</span> <span class="o">&lt;&lt;</span> <span class="n">d_price</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">outFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>


    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>具体在新建一个ofstream对象之后，通过open方法将输出流和目标文件联系起来，然后剩下来的动作和使用cout没有区别，最后记得把文件输出流调用close方法关闭。</p>
<div class="highlight"><pre><span></span>ofstream outFile;
outFile.open("carinfo.txt");

....

outFile.close();
</pre></div>
<ul>
<li>precision方法  控制输出流浮点数的精度</li>
<li><code>setf(ios_base::showpoint)</code> 显示浮点数小数点后面的零</li>
</ul>
<p>1．编写一个程序，读取键盘输入，直到遇到@符号为止，并回显输入（数字除外），同时将大写字符转换为小写，将小写字符转换为大写（别忘了cctype函数系列）。</p>
<p>xiti_c6_1.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cctype&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main26</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="sc">'@'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">isupper</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">cout</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">tolower</span><span class="p">(</span><span class="n">ch</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">islower</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">cout</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">toupper</span><span class="p">(</span><span class="n">ch</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="n">cout</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>3．编写一个菜单驱动程序的雏形。该程序显示一个提供4个选项的菜单——每个选项用一个字母标记。如果用户使用有效选项之外的字母进行响应，程序将提示用户输入一个有效的字母，直到用户这样做为止。然后，该程序使用一条switch语句，根据用户的选择执行一个简单操作。该程序的运行情况如下：</p>
<p><img alt="img" src="https://a358003542.github.io/images/2020/xiti_c6_3.png"/></p>
<p>xiti_c6_3.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">help</span><span class="p">();</span>

<span class="kt">void</span> <span class="nf">help</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"c) carnivore              p) pianist</span><span class="se">\n</span><span class="s">"</span> <span class="o">&lt;&lt;</span>
        <span class="s">"t) tree                   g) game</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="p">}</span>



<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Please enter one of the following choices:</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="n">help</span><span class="p">();</span>

    <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>

    <span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">ch</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>

    <span class="kt">bool</span> <span class="n">quit</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">quit</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">quit</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
        <span class="k">switch</span> <span class="p">(</span><span class="n">ch</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="sc">'c'</span><span class="o">:</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"A maple is a carnivore"</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="sc">'p'</span><span class="o">:</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"A maple is a pianist"</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="sc">'t'</span><span class="o">:</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"A maple is a tree"</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="sc">'g'</span><span class="o">:</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"A maple is a game"</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Please enter a c, p, t, or g: "</span><span class="p">;</span>
            <span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">ch</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>
            <span class="n">quit</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

        <span class="p">}</span>
    <span class="p">}</span>


    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>5．在Neutronia王国，货币单位是tvarp，收入所得税的计算方式如下：</p>
<p>5000 tvarps：不收税</p>
<p>5001～15000 tvarps：10%</p>
<p>15001～35000 tvarps：15%</p>
<p>35000 tvarps以上：20%</p>
<p>例如，收入为38000 tvarps时，所得税为5000 0.00 + 10000 0.10 + 20000 0.15 + 3000 0.20，即4600 tvarps。请编写一个程序，使用循环来要求用户输入收入，并报告所得税。当用户输入负数或非数字时，循环将结束。</p>
<p>xiti_c6_5.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">calc_tax</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">calc_tax</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">tax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">temp</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">35000</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">temp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">tax</span> <span class="o">+=</span> <span class="p">(</span><span class="n">temp</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">);</span>
        <span class="n">x</span> <span class="o">-=</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">temp</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">15000</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">temp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">tax</span> <span class="o">+=</span> <span class="p">(</span><span class="n">temp</span> <span class="o">*</span> <span class="mf">0.15</span><span class="p">);</span>
        <span class="n">x</span> <span class="o">-=</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">temp</span> <span class="o">=</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">5000</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">temp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">tax</span> <span class="o">+=</span> <span class="p">(</span><span class="n">temp</span> <span class="o">*</span> <span class="mf">0.10</span><span class="p">);</span>
        <span class="n">x</span> <span class="o">-=</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">tax</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">tvarps</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">do</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tvarps</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"your income tax is "</span> <span class="o">&lt;&lt;</span> <span class="n">calc_tax</span><span class="p">(</span><span class="n">tvarps</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" tvarps.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input how many tvarps of your income: "</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">tvarps</span><span class="p">);</span>


    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>8．编写一个程序，它打开一个文件文件，逐个字符地读取该文件，直到到达文件末尾，然后指出该文件中包含多少个字符。</p>
<p>xiti_c6_8.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="n">string</span> <span class="n">filename</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Please input the filename you want to open: "</span><span class="p">;</span>

    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">filename</span><span class="p">;</span>

    <span class="n">ifstream</span> <span class="n">inFile</span><span class="p">;</span>

    <span class="n">inFile</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">);</span>
    <span class="c1">// check the file is open</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">inFile</span><span class="p">.</span><span class="n">is_open</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Could not open the file "</span> <span class="o">&lt;&lt;</span> <span class="n">filename</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">inFile</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">count</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"This file contains "</span> <span class="o">&lt;&lt;</span> <span class="n">count</span> <span class="o">&lt;&lt;</span> <span class="s">" characters.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="n">inFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h2 id="_8">函数</h2>
<p>我估计这块应该C++和C语言差异也不会太大，主要做一些习题练习下。</p>
<h3 id="_9">数组作为函数的参数</h3>
<p>数组作为函数的参数实际传递的是该数组的首地址，但C++还需要知道这个数组内元素的类型，所以你在函数原型声明的时候应该类似这样进行声明： <code>int sum_arr(int * arr, int n)</code> ，或者 <code>int sum_arr(int arr[], int n)</code> ，这两种写法在函数原型声明上是没有区别的，告诉C++编译器该数组内的元素类型就完成任务了。如果函数不应该修改数组里面的内容，那么应该在声明前面加上 <code>const</code> 关键字。</p>
<p>可以通过下面这个例子来加深对数组作为函数的参数的理解：</p>
<p>arrfun.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">Max</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">fill_array</span><span class="p">(</span><span class="kt">double</span> <span class="n">ar</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">limit</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">show_array</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span> <span class="n">ar</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">size</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">revalue</span><span class="p">(</span><span class="kt">double</span> <span class="n">r</span><span class="p">,</span> <span class="kt">double</span> <span class="n">ar</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span>
<span class="kt">double</span> <span class="nf">sum_array</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span><span class="o">*</span> <span class="n">ar_begin</span><span class="p">,</span> <span class="k">const</span> <span class="kt">double</span><span class="o">*</span> <span class="n">ar_end</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">double</span> <span class="n">properties</span><span class="p">[</span><span class="n">Max</span><span class="p">];</span>

    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">fill_array</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">Max</span><span class="p">);</span>

    <span class="n">show_array</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter revaluation factor: "</span><span class="p">;</span>
        <span class="kt">double</span> <span class="n">factor</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">factor</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bad input; Please enter a number: "</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">revalue</span><span class="p">(</span><span class="n">factor</span><span class="p">,</span> <span class="n">properties</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
        <span class="n">show_array</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>

        <span class="kt">double</span> <span class="n">total</span><span class="p">;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="n">sum_array</span><span class="p">(</span><span class="n">properties</span><span class="p">,</span> <span class="n">properties</span> <span class="o">+</span> <span class="n">size</span><span class="p">);</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"array total sum = "</span> <span class="o">&lt;&lt;</span> <span class="n">total</span> <span class="o">&lt;&lt;</span> <span class="s">" .</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>


<span class="kt">double</span> <span class="nf">sum_array</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span><span class="o">*</span> <span class="n">ar_begin</span><span class="p">,</span> <span class="k">const</span> <span class="kt">double</span><span class="o">*</span> <span class="n">ar_end</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">const</span> <span class="kt">double</span><span class="o">*</span> <span class="n">pt</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">pt</span> <span class="o">=</span> <span class="n">ar_begin</span><span class="p">;</span> <span class="n">pt</span> <span class="o">!=</span> <span class="n">ar_end</span><span class="p">;</span> <span class="n">pt</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="o">*</span><span class="n">pt</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">total</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">fill_array</span><span class="p">(</span><span class="kt">double</span> <span class="n">ar</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">limit</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="kt">double</span> <span class="n">temp</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">limit</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter value #"</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">": "</span><span class="p">;</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">temp</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cin</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bad input; input process terminated.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">temp</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
        <span class="n">ar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>



<span class="kt">void</span> <span class="nf">show_array</span><span class="p">(</span><span class="k">const</span> <span class="kt">double</span> <span class="n">ar</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Property #"</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">": $"</span><span class="p">;</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">ar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">revalue</span><span class="p">(</span><span class="kt">double</span> <span class="n">r</span><span class="p">,</span> <span class="kt">double</span> <span class="n">ar</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ar</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*=</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>这个例子演示了基本的数组作为函数参数的使用方法，演示了const的使用，还演示了第二种数组作为函数参数的写法，具体请看sum_array函数，其接受的是数组的首地址和末地址，你可以通过 <code>sum_array(properties, properties + size);</code> 这种写法来传入数组的长度，或者随意计算数组前面几个元素的和都是可以的。</p>
<h3 id="c">C风格字符串作为函数的参数</h3>
<p>本质上C风格字符串属于字符数组，只是里面有个<code>\0</code>来标记字符串的结尾。具体使用参考上面的数组的讨论。</p>
<h3 id="_10">结构体作为函数的参数</h3>
<p>结构体其实更加简单，其使用基本上可以看作某种额外的基本数据类型，你可以传值，也可以传指针，只是如果结构体比较大的话，还是推荐传指针。</p>
<p>关于C++新增的类的概念，比如string类，array类等，这些作为函数的参数大体可以参考结构体的使用，也就是可以看作某种额外的基本数据类型。关于类的使用后面会有更详细的讨论了。</p>
<h3 id="_11">函数作为函数的参数</h3>
<p>函数名就是函数的地址，你可以直接将函数名作为参数传递进去，不过麻烦在这个函数指针的类型声明上：</p>
<div class="highlight"><pre><span></span>void estimate(int repeat, double(*pf)(int));
</pre></div>
<p>声明的这个pf就是指针那个目标函数的指针，只是因为声明的时候要带上指向函数的类型声明，有的时候语句会很长。</p>
<p>可以利用typedef进行简化：</p>
<div class="highlight"><pre><span></span>typedef double(*test_func_type)(int);
</pre></div>
<p>具体请看下面的样例来加深理解：</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">typedef</span> <span class="nf">double</span><span class="p">(</span><span class="o">*</span><span class="n">test_func_type</span><span class="p">)(</span><span class="kt">int</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">estimate</span><span class="p">(</span><span class="kt">int</span> <span class="p">,</span> <span class="n">test_func_type</span><span class="p">);</span>
<span class="kt">double</span> <span class="nf">test_func</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">);</span>


<span class="kt">double</span> <span class="nf">test_func</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">b</span><span class="p">;</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="mf">3.14</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="s">" * 3.14 = "</span> <span class="o">&lt;&lt;</span> <span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">estimate</span><span class="p">(</span><span class="kt">int</span> <span class="n">repeat</span><span class="p">,</span> <span class="n">test_func_type</span> <span class="n">pf</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">repeat</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">(</span><span class="o">*</span><span class="n">pf</span><span class="p">)(</span><span class="mi">3</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">estimate</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">test_func</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>1．编写一个程序，不断要求用户输入两个数，直到其中的一个为0。对于每两个数，程序将使用一个函数来计算它们的调和平均数，并将结果返回给main( )，而后者将报告结果。调和平均数指的是倒数平均值的倒数，计算公式如下：</p>
<p>调和平均数=2.0 * x * y / (x + y)</p>
<p>xiti_c7_1.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cctype&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">double</span> <span class="nf">calc_harmonic_mean</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span> <span class="kt">double</span><span class="p">);</span>

<span class="kt">double</span> <span class="nf">calc_harmonic_mean</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">result</span><span class="p">;</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">f1</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">f2</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">result</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input two number:"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">f1</span> <span class="o">&gt;&gt;</span> <span class="n">f2</span><span class="p">))</span> <span class="p">{</span>
            <span class="kt">bool</span> <span class="n">input_line_right</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>

            <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">isblank</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
                    <span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
                    <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
                    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bad input!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
                    <span class="n">input_line_right</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">input_line_right</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">f1</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">f2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>

                <span class="n">result</span> <span class="o">=</span> <span class="n">calc_harmonic_mean</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">);</span>
                <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">f1</span> <span class="o">&lt;&lt;</span> <span class="s">" and "</span> <span class="o">&lt;&lt;</span> <span class="n">f2</span> <span class="o">&lt;&lt;</span> <span class="s">" harmonic mean is: "</span> <span class="o">&lt;&lt;</span> <span class="n">result</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bad input!"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>3．下面是一个结构声明：</p>
<div class="highlight"><pre><span></span>struct box{
    char maker[40];
    float height;
    float width;
    float length;
    float volume;
};
</pre></div>
<p>a．编写一个函数，按值传递box结构，并显示每个成员的值。</p>
<p>b．编写一个函数，传递box结构的地址，并将volume成员设置为其他三维长度的乘积。</p>
<p>c．编写一个使用这两个函数的简单程序。</p>
<p>xiti_c7_3.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>


<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">box</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">maker</span><span class="p">[</span><span class="mi">40</span><span class="p">];</span>
    <span class="kt">float</span> <span class="n">height</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">width</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">length</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">volume</span><span class="p">;</span>
<span class="p">}</span><span class="n">Box</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">show_box</span><span class="p">(</span><span class="n">Box</span> <span class="n">box1</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">calc_box_volume</span><span class="p">(</span><span class="n">Box</span><span class="o">*</span> <span class="n">pbox</span><span class="p">);</span>



<span class="kt">void</span> <span class="nf">show_box</span><span class="p">(</span><span class="n">Box</span> <span class="n">box1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> 
        <span class="s">"box: "</span> <span class="o">&lt;&lt;</span> <span class="n">box1</span><span class="p">.</span><span class="n">maker</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span>
        <span class="s">"height: "</span> <span class="o">&lt;&lt;</span> <span class="n">box1</span><span class="p">.</span><span class="n">height</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span>
        <span class="s">"width: "</span> <span class="o">&lt;&lt;</span> <span class="n">box1</span><span class="p">.</span><span class="n">width</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span>
        <span class="s">"length: "</span> <span class="o">&lt;&lt;</span> <span class="n">box1</span><span class="p">.</span><span class="n">length</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span>
        <span class="s">"volume: "</span> <span class="o">&lt;&lt;</span> <span class="n">box1</span><span class="p">.</span><span class="n">volume</span>
        <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">calc_box_volume</span><span class="p">(</span><span class="n">Box</span><span class="o">*</span> <span class="n">pbox</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">pbox</span><span class="o">-&gt;</span><span class="n">volume</span> <span class="o">=</span> <span class="n">pbox</span><span class="o">-&gt;</span><span class="n">width</span> <span class="o">*</span> <span class="n">pbox</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">*</span> <span class="n">pbox</span><span class="o">-&gt;</span><span class="n">length</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="c1">//int main33() {</span>

    <span class="n">Box</span> <span class="n">box1</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"box1"</span><span class="p">,</span>
        <span class="mf">2.5</span><span class="p">,</span>
        <span class="mf">3.6</span><span class="p">,</span>
        <span class="mi">7</span><span class="p">,</span>
        <span class="mi">0</span>
    <span class="p">};</span>

    <span class="n">show_box</span><span class="p">(</span><span class="n">box1</span><span class="p">);</span>

    <span class="n">calc_box_volume</span><span class="p">(</span><span class="o">&amp;</span><span class="n">box1</span><span class="p">);</span>

    <span class="n">show_box</span><span class="p">(</span><span class="n">box1</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>5．定义一个递归函数，接受一个整数参数，并返回该参数的阶乘。前面讲过，3的阶乘写作3!，等于<code>3*2!</code>，依此类推；而0!被定义为1。通用的计算公式是，如果n大于零，则<code>n!=n*（n−1）!</code>。在程序中对该函数进行测试，程序使用循环让用户输入不同的值，程序将报告这些值的阶乘。</p>
<p>xiti_c7_5.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">factorial</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>


<span class="kt">int</span> <span class="nf">factorial</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">factorial</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//int main34() {</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">result</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input one integer number:"</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span><span class="p">))</span> <span class="p">{</span>
            <span class="kt">bool</span> <span class="n">input_line_right</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>

            <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">isblank</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
                    <span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
                    <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
                    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bad input!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
                    <span class="n">input_line_right</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">input_line_right</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>

                <span class="n">result</span> <span class="o">=</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
                <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">n</span> <span class="o">&lt;&lt;</span> <span class="s">" factorial is: "</span> <span class="o">&lt;&lt;</span> <span class="n">result</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="n">cin</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Bad input!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>9．这个练习让您编写处理数组和结构的函数。下面是程序的框架，请提供其中描述的函数，以完成该程序。</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">SLEN</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">student</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">fullname</span><span class="p">[</span><span class="n">SLEN</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">hobby</span><span class="p">[</span><span class="n">SLEN</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">ooplevel</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// getinfo has two arguments: a pointer to the first argument of</span>
<span class="c1">// an array of student structures and an int representing the</span>
<span class="c1">// number of elements of the array. the function solicits and</span>
<span class="c1">// stores data about students. It terminates input upon filling </span>
<span class="c1">// the array or upon encountering a blank line for the student </span>
<span class="c1">// name. the function returns the actual number of array elements </span>
<span class="c1">// filled.</span>
<span class="kt">int</span> <span class="nf">getinfo</span><span class="p">(</span><span class="n">student</span> <span class="n">pa</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span>

<span class="c1">// display1 takes a student structure as an argument</span>
<span class="c1">// and display its contents.</span>
<span class="kt">void</span> <span class="nf">display1</span><span class="p">(</span><span class="n">student</span> <span class="n">st</span><span class="p">);</span>

<span class="c1">// display2 takes the address of students structure as an </span>
<span class="c1">// argument and display the structure's cntents.</span>
<span class="kt">void</span> <span class="nf">display2</span><span class="p">(</span><span class="k">const</span> <span class="n">student</span><span class="o">*</span> <span class="n">ps</span><span class="p">);</span>

<span class="c1">// display3 takes the address of the first element of an array</span>
<span class="c1">// of student structures and the number of array elements as </span>
<span class="c1">// arguments and displays the contents of the structures</span>
<span class="kt">void</span> <span class="nf">display3</span><span class="p">(</span><span class="k">const</span> <span class="n">student</span> <span class="n">pa</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="c1">//int main35() {</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter class size: "</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">class_size</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">class_size</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

    <span class="n">student</span><span class="o">*</span> <span class="n">ptr_stu</span> <span class="o">=</span> <span class="k">new</span> <span class="n">student</span><span class="p">[</span><span class="n">class_size</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">entered</span> <span class="o">=</span> <span class="n">getinfo</span><span class="p">(</span><span class="n">ptr_stu</span><span class="p">,</span> <span class="n">class_size</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">entered</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">display1</span><span class="p">(</span><span class="n">ptr_stu</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">display2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ptr_stu</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="n">display3</span><span class="p">(</span><span class="n">ptr_stu</span><span class="p">,</span> <span class="n">entered</span><span class="p">);</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">ptr_stu</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Done</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>xiti_c7_9.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">SLEN</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">student</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">fullname</span><span class="p">[</span><span class="n">SLEN</span><span class="p">];</span>
    <span class="kt">char</span> <span class="n">hobby</span><span class="p">[</span><span class="n">SLEN</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">ooplevel</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">getinfo</span><span class="p">(</span><span class="n">student</span> <span class="n">pa</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">display1</span><span class="p">(</span><span class="n">student</span> <span class="n">st</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">display2</span><span class="p">(</span><span class="k">const</span> <span class="n">student</span><span class="o">*</span> <span class="n">ps</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">display3</span><span class="p">(</span><span class="k">const</span> <span class="n">student</span> <span class="n">pa</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">getinfo</span><span class="p">(</span><span class="n">student</span> <span class="n">pa</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">entered</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input student fullname: "</span><span class="p">;</span>
        <span class="n">cin</span><span class="p">.</span><span class="n">getline</span><span class="p">(</span><span class="n">pa</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">fullname</span><span class="p">,</span> <span class="n">SLEN</span><span class="p">);</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input student hobby: "</span><span class="p">;</span>
        <span class="n">cin</span><span class="p">.</span><span class="n">getline</span><span class="p">(</span><span class="n">pa</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">hobby</span><span class="p">,</span> <span class="n">SLEN</span><span class="p">);</span>

        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"please input student ooplevel: "</span><span class="p">;</span>
        <span class="p">(</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">pa</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ooplevel</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>

        <span class="n">entered</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">entered</span><span class="p">;</span>
<span class="p">}</span>


<span class="kt">void</span> <span class="nf">display1</span><span class="p">(</span><span class="n">student</span> <span class="n">st</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span><span class="s">"student "</span> <span class="o">&lt;&lt;</span> <span class="n">st</span><span class="p">.</span><span class="n">fullname</span> <span class="o">&lt;&lt;</span>
        <span class="s">" hobby: "</span> <span class="o">&lt;&lt;</span> <span class="n">st</span><span class="p">.</span><span class="n">hobby</span> <span class="o">&lt;&lt;</span>
        <span class="s">" ooplevel: "</span> <span class="o">&lt;&lt;</span> <span class="n">st</span><span class="p">.</span><span class="n">ooplevel</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">display2</span><span class="p">(</span><span class="k">const</span> <span class="n">student</span><span class="o">*</span> <span class="n">ps</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span><span class="s">"student "</span> <span class="o">&lt;&lt;</span> <span class="n">ps</span><span class="o">-&gt;</span><span class="n">fullname</span> <span class="o">&lt;&lt;</span>
        <span class="s">" hobby: "</span> <span class="o">&lt;&lt;</span> <span class="n">ps</span><span class="o">-&gt;</span><span class="n">hobby</span> <span class="o">&lt;&lt;</span>
        <span class="s">" ooplevel: "</span> <span class="o">&lt;&lt;</span> <span class="n">ps</span><span class="o">-&gt;</span><span class="n">ooplevel</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">display3</span><span class="p">(</span><span class="k">const</span> <span class="n">student</span> <span class="n">pa</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">display1</span><span class="p">(</span><span class="n">pa</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="c1">//int main35() {</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter class size: "</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">class_size</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">class_size</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">cin</span><span class="p">.</span><span class="n">get</span><span class="p">()</span> <span class="o">!=</span> <span class="sc">'\n'</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>

    <span class="n">student</span><span class="o">*</span> <span class="n">ptr_stu</span> <span class="o">=</span> <span class="k">new</span> <span class="n">student</span><span class="p">[</span><span class="n">class_size</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">entered</span> <span class="o">=</span> <span class="n">getinfo</span><span class="p">(</span><span class="n">ptr_stu</span><span class="p">,</span> <span class="n">class_size</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">entered</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">display1</span><span class="p">(</span><span class="n">ptr_stu</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">display2</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ptr_stu</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="n">display3</span><span class="p">(</span><span class="n">ptr_stu</span><span class="p">,</span> <span class="n">entered</span><span class="p">);</span>
    <span class="k">delete</span><span class="p">[]</span> <span class="n">ptr_stu</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Done</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>10．设计一个名为calculate( )的函数，它接受两个double值和一个指向函数的指针，而被指向的函数接受两个double参数，并返回一个double值。calculate( )函数的类型也是double，并返回被指向的函数使用calculate( )的两个double参数计算得到的值。例如，假设add( )函数的定义如下：</p>
<div class="highlight"><pre><span></span>double add(double x, double y){
    return x + y;
}
</pre></div>
<p>则下述代码中的函数调用将导致calculate( )把2.5和10.4传递给add( )函数，并返回add( )的返回值（12.9）：</p>
<div class="highlight"><pre><span></span>double q = calculate(2.5, 10.4, add)
</pre></div>
<p>请编写一个程序，它调用上述两个函数和至少另一个与add( )类似的函数。该程序使用循环来让用户成对地输入数字。对于每对数字，程序都使用calculate( )来调用add( )和至少一个其他的函数。如果读者爱冒险，可以尝试创建一个指针数组，其中的指针指向add( )样式的函数，并编写一个循环，使用这些指针连续让calculate( )调用这些函数。提示：下面是声明这种指针数组的方式，其中包含三个指针：</p>
<div class="highlight"><pre><span></span>double (*pf[3])(double, double);
</pre></div>
<p>可以采用数组初始化语法，并将函数名作为地址来初始化这样的数组。</p>
<p>xiti_c7_10.cpp</p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">typedef</span> <span class="nf">double</span> <span class="p">(</span><span class="o">*</span><span class="n">func_call</span><span class="p">)(</span><span class="kt">double</span><span class="p">,</span> <span class="kt">double</span><span class="p">);</span>

<span class="kt">double</span> <span class="nf">addition</span><span class="p">(</span><span class="kt">double</span> <span class="p">,</span> <span class="kt">double</span> <span class="p">);</span>
<span class="kt">double</span> <span class="nf">subtraction</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span> <span class="kt">double</span><span class="p">);</span>
<span class="kt">double</span> <span class="nf">multiplication</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span> <span class="kt">double</span><span class="p">);</span>

<span class="kt">double</span> <span class="nf">calculate</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">func_call</span> <span class="n">func</span><span class="p">);</span>

<span class="kt">double</span> <span class="nf">calculate</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">,</span> <span class="n">func_call</span> <span class="n">func</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="nf">addition</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"running addition...</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="nf">subtraction</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"running subtraction...</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="nf">multiplication</span><span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">,</span> <span class="kt">double</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"running multiplication...</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="p">(</span><span class="o">*</span><span class="n">pf</span><span class="p">[</span><span class="mi">3</span><span class="p">])(</span><span class="kt">double</span><span class="p">,</span> <span class="kt">double</span><span class="p">);</span>

    <span class="n">pf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">addition</span><span class="p">;</span>
    <span class="n">pf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">subtraction</span><span class="p">;</span>
    <span class="n">pf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">multiplication</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nl">i</span> <span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">})</span> <span class="p">{</span>
        <span class="kt">double</span> <span class="n">q</span> <span class="o">=</span> <span class="n">calculate</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">10.4</span><span class="p">,</span> <span class="n">pf</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"result: "</span> <span class="o">&lt;&lt;</span> <span class="n">q</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h2 id="_12">内存模型和名称空间</h2>
<h2 id="_13">类</h2>
<h2 id="_14">附录</h2>
<h3 id="cin">cin详解</h3>
<ul>
<li><code>cin &gt;&gt;</code> 遇到Enter Space Tab 即结束，适合char，无空格的string和单个值的int float之类的输入。需要注意的是经过个人实践换行符还是在缓冲区的，为了把这个缓冲区消掉获得更好的输入体验，一般采用这种表达方式：<code>(cin &gt;&gt; what).get()</code> ，这是因为 <code>cin &gt;&gt; what</code> 会返回cin对象，然后继续调用下面的 get 方法来消掉最后的换行符。</li>
<li><code>cin.get</code>  和 <code>cin.getline</code>  都可以用于字符数组的行输入，不同的是 get方法不会丢弃缓冲区的换行结束符，此外cin.get还有一个重载变体，<code>cin.get(char &amp;ch)</code> ，用于读取第一个字符，假设缓冲区下一个字符是换行符，然后在遇到 <code>cin.get()</code>  则将把那个换行符读取下来。</li>
<li>getline函数 ，和cin.getline的区别就是 <code>getline(cin, string)</code> getline会读入到C++的string类，而不是C风格的字符数组。</li>
</ul>
<h3 id="cout_1">cout详解</h3>
<ul>
<li><code>cout &lt;&lt;</code> 一般使用</li>
<li><code>cout.put(char &amp;ch)</code>  输出一个字符，如果输入的整型也会正常显示该字符。</li>
</ul>
<h2 id="_15">参考资料</h2>
<ol>
<li>C++ Primer Plus 第六版中文版</li>
</ol>

            
            <hr/>

        </div>
        <section>
        <div class="col-md-2" style="float:right;font-size:0.9em;">
            <h4>首发于：</h4>
            <time pubdate="pubdate" datetime="2020-07-06T18:31:54.495862+08:00">2020年 7月 6日 </time>

            <h4>分类：</h4>
            <a class="category-link" href="https://a358003542.github.io/categories.html#cpp_language-ref">cpp_language</a>

        </div>
        </section>
</div>
</article>
    </div>
    <div class="col-md-1"></div>

</div>


<div id="push"></div>
<button id="gotop" type="button" class="btn btn-default">
    <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
</button>

<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a> and updated by <a href="https://github.com/a358003542" title="wanze Home Page">wanze</a></li>
    </ul>
</div>
</footer>

        <script src="https://a358003542.github.io/theme/js/jquery.min.js"></script>
    <script src="https://a358003542.github.io/theme/js/bootstrap.min.js"></script>

    <script src="https://a358003542.github.io/theme/js/base.js"></script>

    


</body>
</html>