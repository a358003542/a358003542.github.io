<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="baidu-site-verification" content="D4VqC4HppC"/>
    <meta name="msvalidate.01" content="55CB117A61A6F8286173763FB18D9625"/>

        <meta name="author" content="cdwanze"/>
        <meta name="copyright" content="cdwanze"/>

        <meta property="og:type" content="article"/>
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="wxpython, GUI, " />

<meta property="og:title" content="wxpython第一谈 "/>
<meta property="og:url" content="/articles/wxpython-talk-one.html" />
<meta property="og:description" content="前言 本文假设读者已经熟悉某一种桌面图形开发了，比如说PyQt之类的，也就是基本的图形桌面开发概念读者是熟悉了，下面将言简意赅地就wxpython相关的特色核心概念说明之，然后后面就针对某些专门的问题专门讨论了。 首先说下安装，现在wxpython和pyqt5一样都已经进步了，都可以直接用pip安装了，而且linux下和windows都可以直接安装。 Sizer.Add参数详解 Sizer.Add(item, 0 , wx.ALIGN_RIGHT, 0) 右对齐布局，第一个参数proportion详细讨论在后面，第三个参数是设置border的宽度的。 Sizer.Add(item, 0, wx.ALIGN_CENTER, 0) 居中布局 Sizer.Add(item, 0, wx.EXPAND, 0) 扩展布局，（在vertical sizer里面水平扩展；在horizontal sizer里面垂直扩展） proportion参数 默认是0，0表示不缩放，我估计这样设置之后父窗体Layout，而子窗体将不会自动Layout。然后设置其他整数则是某种缩放比的意思。参考资料谈了一些缩放比的问题，暂时不是很关心这个 …" />
<meta property="og:site_name" content="cdwanze的博文" />
<meta property="og:article:author" content="cdwanze" />
<meta property="og:article:published_time" content="2018-08-27T00:00:00+08:00" />
<meta property="" content="2018-09-20T00:00:00+08:00" />
<meta name="twitter:title" content="wxpython第一谈 ">
<meta name="twitter:description" content="前言 本文假设读者已经熟悉某一种桌面图形开发了，比如说PyQt之类的，也就是基本的图形桌面开发概念读者是熟悉了，下面将言简意赅地就wxpython相关的特色核心概念说明之，然后后面就针对某些专门的问题专门讨论了。 首先说下安装，现在wxpython和pyqt5一样都已经进步了，都可以直接用pip安装了，而且linux下和windows都可以直接安装。 Sizer.Add参数详解 Sizer.Add(item, 0 , wx.ALIGN_RIGHT, 0) 右对齐布局，第一个参数proportion详细讨论在后面，第三个参数是设置border的宽度的。 Sizer.Add(item, 0, wx.ALIGN_CENTER, 0) 居中布局 Sizer.Add(item, 0, wx.EXPAND, 0) 扩展布局，（在vertical sizer里面水平扩展；在horizontal sizer里面垂直扩展） proportion参数 默认是0，0表示不缩放，我估计这样设置之后父窗体Layout，而子窗体将不会自动Layout。然后设置其他整数则是某种缩放比的意思。参考资料谈了一些缩放比的问题，暂时不是很关心这个 …">

    <title>
wxpython第一谈  · cdwanze的博文
</title>


        <link href="/theme/css/font-awesome.css" rel="stylesheet"
              media="screen">
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet"
              media="screen">

            <link rel="stylesheet" type="text/css"
                  href="/theme/css/pygments.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/elegant.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/custom.css" media="screen">






</head>
<body>

<nav class="navbar">
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".navbar-collapse"
                    aria-expanded="false">
                <span class="sr-only">Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="https://www.cdwanze.work"><span
                    class=site-name>网站首页</span></a>
        </div>


        <div class="navbar-collapse collapse">
            <form action="/search.html"
                  onsubmit="return validateForm(this.elements['q'].value);"
                  class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" name="q" id="tipue_search_input"
                           class="form-control" placeholder="Search..."
                           style="width:430px;">
                </div>
                <button class="btn btn-default" type="submit">搜索</button>
            </form>


            <ul class="nav navbar-nav nav-pills navbar-right">
                <li >
                    <a href="">博文首页</a></li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle"
                           data-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">查找文章<span
                                class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a class="slowscroll" href="/categories.html">按分类</a>
                            </li>
                            <li><a class="slowscroll" href="/tags.html">按标签</a>
                            </li>
                        </ul>
                    </li>


                        <li >
                            <a href="/guan-yu-ben-wang-zhan.html">关于本网站</a>
                        </li>
                        <li >
                            <a href="/gong-gao.html">公告</a>
                        </li>
            </ul>


        </div>
    </div>
</nav>


<div class="container-fluid">
    <div class="col-md-1 col-md-1-left"></div>
    <div class="col-md-10">
<article>
<div class="row">
    <header class="page-header col-md-10 col-md-offset-2">
    <h1><a href="/articles/wxpython-talk-one.html"> wxpython第一谈  </a></h1>
    </header>
</div>

<div class="row">
    <div class="col-md-2 table-of-content">
        <nav>
        <h4>目录</h4>
        <div class="toc">
<ul>
<li><a href="#_1">前言</a></li>
<li><a href="#sizeradd">Sizer.Add参数详解</a><ul>
<li><a href="#proportion">proportion参数</a></li>
<li><a href="#flag">Flag参数</a><ul>
<li><a href="#border">控制那边有border</a></li>
<li><a href="#_2">扩展</a></li>
<li><a href="#_3">对齐</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#frame">Frame样式</a></li>
<li><a href="#_4">布局的太布局的</a><ul>
<li><a href="#flexgridsizer">FlexGridSizer</a></li>
</ul>
</li>
<li><a href="#wxpythonid">wxpython里面的ID</a><ul>
<li><a href="#id">窗体ID的定义</a></li>
<li><a href="#id_1">标准ID</a></li>
<li><a href="#id_2">根据ID来查找窗体</a></li>
</ul>
</li>
<li><a href="#_5">根据名字来查找窗体</a></li>
<li><a href="#wxpython">深入理解wxpython中的事件</a><ul>
<li><a href="#wxpython_1">wxpython事件处理过程</a><ul>
<li><a href="#1">习题1</a></li>
<li><a href="#2">习题2</a></li>
</ul>
</li>
<li><a href="#_6">手动触发某个事件</a></li>
<li><a href="#_7">获取当前事件的触发对象</a></li>
<li><a href="#wxevent">常见的wx.Event子类</a></li>
<li><a href="#_8">按钮三事件</a></li>
</ul>
</li>
<li><a href="#layout">什么时候调用Layout方法</a><ul>
<li><a href="#scrolledpanel">ScrolledPanel</a></li>
</ul>
</li>
<li><a href="#_9">设置背景颜色和字体颜色</a></li>
<li><a href="#python">将图片转成python编码</a></li>
<li><a href="#_10">后台任务</a></li>
<li><a href="#timer">Timer</a></li>
<li><a href="#_11">参考资料</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="col-md-8 article-content">

            
            
<h2 id="_1">前言</h2>
<p>本文假设读者已经熟悉某一种桌面图形开发了，比如说PyQt之类的，也就是基本的图形桌面开发概念读者是熟悉了，下面将言简意赅地就wxpython相关的特色核心概念说明之，然后后面就针对某些专门的问题专门讨论了。</p>
<p>首先说下安装，现在wxpython和pyqt5一样都已经进步了，都可以直接用pip安装了，而且linux下和windows都可以直接安装。</p>
<h2 id="sizeradd">Sizer.Add参数详解</h2>
<ul>
<li><code>Sizer.Add(item, 0 , wx.ALIGN_RIGHT, 0)</code>    右对齐布局，第一个参数proportion详细讨论在后面，第三个参数是设置border的宽度的。</li>
<li>Sizer.Add(item, 0, wx.ALIGN_CENTER, 0)  居中布局</li>
<li>Sizer.Add(item, 0, wx.EXPAND, 0) 扩展布局，（在vertical sizer里面水平扩展；在horizontal sizer里面垂直扩展）</li>
</ul>
<h3 id="proportion">proportion参数</h3>
<p>默认是0，0表示不缩放，我估计这样设置之后父窗体Layout，而子窗体将不会自动Layout。然后设置其他整数则是某种缩放比的意思。参考资料谈了一些缩放比的问题，暂时不是很关心这个。下面是讨论的原文：</p>
<blockquote>
<p>proportion参数是被wx.BoxSizer用作因数去决定当sizer的大小改变时，sizer应该如何调整它的孩子的尺寸。我们这里使用的是水平方向调整的sizer，stretch因数决定每个孩子的水平尺寸如何改变（坚直方向的改变由box sizer基于第三个参数来决定）。</p>
</blockquote>
<p>一般的0表示不缩放，1表示随着父窗体缩放而缩放。</p>
<h3 id="flag">Flag参数</h3>
<p>这块东西经常遇到，虽然Flag较多，还是建议沉下心来学一下，这些后面会频繁用到的：</p>
<h4 id="border">控制那边有border</h4>
<div class="highlight"><pre><span></span><span class="n">wx</span><span class="p">.</span><span class="n">TOP</span>
<span class="n">wx</span><span class="p">.</span><span class="n">BOTTOM</span>
<span class="n">wx</span><span class="p">.</span><span class="k">LEFT</span>
<span class="n">wx</span><span class="p">.</span><span class="k">RIGHT</span>
<span class="n">wx</span><span class="p">.</span><span class="k">ALL</span>
</pre></div>
<h4 id="_2">扩展</h4>
<div class="highlight"><pre><span></span><span class="n">wx</span><span class="p">.</span><span class="n">EXPAND</span>  <span class="err">周围有空间就扩展</span>
<span class="n">wx</span><span class="p">.</span><span class="n">SHAPED</span>  <span class="err">扩展同时保持宽高比</span>
</pre></div>
<h4 id="_3">对齐</h4>
<div class="highlight"><pre><span></span><span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_CENTER</span> <span class="k">or</span> <span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_CENTRE</span>
<span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_LEFT</span>
<span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_RIGHT</span>
<span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_RIGHT</span>
<span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_TOP</span>
<span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_BOTTOM</span>
<span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_CENTER_VERTICAL</span> <span class="k">or</span> <span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_CENTRE_VERTICAL</span>
<span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_CENTER_HORIZONTAL</span> <span class="k">or</span> <span class="n">wx</span><span class="p">.</span><span class="n">ALIGN_CENTRE_HORIZONTAL</span>
</pre></div>
<p>下面举一些组合的例子：</p>
<div class="highlight"><pre><span></span> <span class="n">wx</span><span class="p">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="p">.</span><span class="k">LEFT</span>  <span class="err">有空间就扩展，</span><span class="n">border在左边</span><span class="err">，这样你会看到左边有空白</span>
</pre></div>
<div class="highlight"><pre><span></span> <span class="n">wx</span><span class="p">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="p">.</span><span class="k">LEFT</span> <span class="o">|</span> <span class="n">wx</span><span class="p">.</span><span class="k">RIGHT</span>  <span class="err">有空间就扩展，</span><span class="n">border在左边和右边</span><span class="err">，这样你会看到左边和右边有空白</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="n">wx</span><span class="p">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="p">.</span><span class="k">ALL</span> <span class="err">有空间就扩展，上下左右</span><span class="n">border都有</span>
</pre></div>
<h2 id="frame">Frame样式</h2>
<ul>
<li>
<p><code>wx.FRAME_NO_TASKBAR</code> 没有任务栏</p>
</li>
<li>
<p><code>wx.FRAME_SHAPED</code> 非矩形框架</p>
</li>
<li>
<p><code>wx.FRAME_TOOL_WINDOW</code> </p>
</li>
<li>
<p><code>wx.FRAME_FLOAT_ON_PARENT</code> 框架将漂浮在父窗体之上</p>
</li>
<li>
<p><code>wx.STAY_ON_TOP</code> 总在最上</p>
</li>
<li>
<p><code>wx.SIMPLE_BORDER</code> 没有装饰的边框</p>
</li>
</ul>
<h2 id="_4">布局的太布局的</h2>
<p>一般手写布局代码的话，肯定是使用各个Sizer，其中BoxSizer最常用，对于不是特别复杂的布局BoxSizer，横竖拼接加上Add的参数调配，基本上都是调出来的。以至于每个panel类里面我现在都写上了一个 <code>self.box</code> 成为惯例了，虽然后面某些情况下会使用到其他Sizer，比如GridSizer等，但GridSizer是可以放在BoxSizer里面的，所以问题不大。这样形成惯例之后，后面引用该面板，想到主Sizer，就直接panel.box即可，这是题外话了。</p>
<h3 id="flexgridsizer">FlexGridSizer</h3>
<p>FlexGridSizer布局将页面分成二维的表格，各个表格元素高度一定是一样的，但宽度可以不一样（GridSizer则要求一定一样）。</p>
<div class="highlight"><pre><span></span><span class="n">wx</span><span class="p">.</span><span class="n">FlexGridSizer</span><span class="p">(</span><span class="nb">int</span> <span class="k">rows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span> <span class="n">cols</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span> <span class="n">vgap</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">int</span> <span class="n">hgap</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
<ul>
<li>rows 多少行</li>
<li>cols 多少列</li>
<li>vgap 垂直向加点空间</li>
<li>hgap 水平向加点空间</li>
</ul>
<h2 id="wxpythonid">wxpython里面的ID</h2>
<p>window identifiers 是一些整数 决定了窗体在系统中的唯一性，wxpython中可以如下定义窗体的ID：</p>
<h3 id="">窗体ID的定义</h3>
<ul>
<li>明确赋值一个正整数，不推荐</li>
<li>使用wx.NewID()</li>
<li>传递wx.ID_ANY 或 -1 给窗体构造器</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">frame</span> <span class="o">=</span> <span class="n">wx</span><span class="p">.</span><span class="n">Frame</span><span class="p">.</span><span class="n">__init__</span><span class="p">(</span><span class="k">None</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">id</span> <span class="o">=</span> <span class="n">frame</span><span class="p">.</span><span class="n">GetId</span><span class="p">()</span>
</pre></div>
<p>然后笔者强烈推荐读者使用名字来定义和定位窗体，这样你的代码具有更具有良好的可读性。</p>
<h3 id="id_1">标准ID</h3>
<p><a href="https://wxpython.org/Phoenix/docs/html/wx.StandardID.enumeration.html">官方文档标准ID列表</a> </p>
<h3 id="id_2">根据ID来查找窗体</h3>
<p>1、wx.FindWindowById(id, parent=None)
2、wx.FindWindowByName(name, parent=None)
3、wx.FindWindowByLabel(label, parent=None)</p>
<p>如果在某个窗体内调用 <code>self.FindWindowById</code> 则是本窗体内查找，找到的第一个。</p>
<h2 id="_5">根据名字来查找窗体</h2>
<p>笔者强烈推荐读者在写大型GUI程序的时候给几个核心窗体都定义好唯一的名字（具体大部分窗体都可以接受一个name可选参数的），然后如下来查找之。这对于你后面的编程会带来很大的便利。</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">wx</span>

<span class="k">def</span> <span class="nf">find_window_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    根据窗体的名字来返回窗体，推荐风格</span>
<span class="sd">    :param name:</span>
<span class="sd">    :return:</span>
<span class="sd">    """</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FindWindowByName</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">window</span>

<span class="k">def</span> <span class="nf">is_the_window_name</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    根据名字来判断是否是这个窗体</span>
<span class="sd">    :param window:</span>
<span class="sd">    :param name:</span>
<span class="sd">    :return:</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">window</span><span class="o">.</span><span class="n">SetName</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
</pre></div>
<h2 id="wxpython">深入理解wxpython中的事件</h2>
<div class="highlight"><pre><span></span><span class="n">Bind</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="k">handler</span><span class="p">,</span> <span class="k">source</span><span class="o">=</span><span class="k">None</span><span class="p">,</span> <span class="n">id</span><span class="o">=</span><span class="n">wx</span><span class="p">.</span><span class="n">ID_ANY</span><span class="p">,</span> <span class="n">id2</span><span class="o">=</span><span class="n">wx</span><span class="p">.</span><span class="n">ID_ANY</span><span class="p">)</span>
</pre></div>
<ul>
<li>event 比如在wx.Button上鼠标单击一下将触发一个 wx.EVT_BUTTON 事件，event这里可以定义具体你想要绑定的事件。</li>
<li>handler 处理器</li>
<li>source 一般不需要指定，如果父窗口多个相同的触发源，比如说多个按钮，那么就需要指定下。</li>
<li>id 根据id定义事件触发源，在某些情况下根据id来会更方便些，然后id2同id可以确定一串连续的窗体。</li>
</ul>
<h3 id="wxpython_1">wxpython事件处理过程</h3>
<p><img alt="img" src="/images/wxpython/wxpython事件处理过程.png"/></p>
<ol>
<li>事件触发--&gt; 获取事件触发对象</li>
<li>检查事件触发对象是否允许处理事件（可以通过 <code>SetEvtHandlerEnabled(boolean)</code> 来禁用窗体处理事件）【UI层面Disable Enable只是禁用了窗体和用户的交互，但它还是可以处理间接接受到的事件，比如通过PostEvent等】</li>
<li><code>event.Skip()</code> 这个方法之前我以为是该事件的处理跳过了，理解错误了，更准确的说法是 <strong>本事件处理完成</strong> 了。 也就是如果在事件触发链中，没有看到这个方法，那么事件将会继续传播，否则事件处理终止。</li>
<li>如果目标事件允许 传播propagate ， 那么还会继续向上去触发父容器的事件，直到App，也就是最顶层结束传播。【默认情况，只有wx.CommandEvent及其子类的实例向上展开至容器级。其它的所有事件都不传播。】【Button单击属于CommandEvent，鼠标移动和浮动在上和离开都是MouseEvent】</li>
</ol>
<h4 id="1">习题1</h4>
<p>请读者解释为什么是下面的写法，鼠标浮动在上和离开事件为什么只能定向self.button。</p>
<div class="highlight"><pre><span></span><span class="k">self</span><span class="p">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="p">.</span><span class="n">EVT_BUTTON</span><span class="p">,</span> <span class="k">self</span><span class="p">.</span><span class="n">OnButtonClick</span><span class="p">,</span>  <span class="k">self</span><span class="p">.</span><span class="n">button</span><span class="p">)</span>    <span class="o">#</span><span class="mi">1</span> <span class="err">绑定按钮事件</span>     
<span class="k">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="p">.</span><span class="n">EVT_ENTER_WINDOW</span><span class="p">,</span>   <span class="k">self</span><span class="p">.</span><span class="n">OnEnterWindow</span><span class="p">)</span>     <span class="o">#</span><span class="mi">2</span> <span class="err">绑定鼠标位于其上事件</span> 
<span class="k">self</span><span class="p">.</span><span class="n">button</span><span class="p">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="p">.</span><span class="n">EVT_LEAVE_WINDOW</span><span class="p">,</span> <span class="k">self</span><span class="p">.</span><span class="n">OnLeaveWindow</span><span class="p">)</span>     <span class="o">#</span><span class="mi">3</span> <span class="err">绑定鼠标离开事件</span>
</pre></div>
<p>按钮点击行为可以传播，其首先在本窗体上触发按钮事件，然后在本窗体上找对应的方法 <code>OnButtonClick</code> ，如果找到这个方法了，那么执行，执行过程中如果遇到Skip方法，那么本事件处理到此结束；如果没有，则会试着向上传播，直到顶层窗体。向上传播的过程就是传播事件，也就是本窗体的父窗体也将触发本按钮事件，然后试着实行对应的 <code>OnButtonClick</code> 方法。</p>
<p>鼠标移动行为是不可以传播事件，必须指明那个按钮绑定的。 <code>self.button.Bind</code>  过程就是直接执行你初始挂在的那个方法，找不到就抛出异常了。</p>
<p>大体是这样的，如果读者还有不明白了，请阅读 wxpython in action 这本书的第三章，关于这部分问题，这本书讲的很好。</p>
<h4 id="2">习题2</h4>
<p>如何一个按钮的点击事件会触发两个动作。</p>
<p>简单来说就是写两个 <code>self.button.Bind()</code> 语句绑定两个函数就可以了，按照前面说的，这两个函数每个都要跟上 <code>event.Skip()</code> 。</p>
<h3 id="_6">手动触发某个事件</h3>
<p>有时直接手动触发一个事件会省下很多代码。</p>
<div class="highlight"><pre><span></span><span class="k">self</span><span class="p">.</span><span class="k">Close</span><span class="p">(</span><span class="k">True</span><span class="p">)</span>
</pre></div>
<h3 id="_7">获取当前事件的触发对象</h3>
<div class="highlight"><pre><span></span><span class="n">button</span> <span class="o">=</span> <span class="n">event</span><span class="p">.</span><span class="n">GetEventObject</span><span class="p">()</span>
<span class="n">print</span><span class="p">(</span><span class="n">button</span><span class="p">.</span><span class="n">GetName</span><span class="p">())</span>
</pre></div>
<h3 id="wxevent">常见的wx.Event子类</h3>
<ul>
<li>wx.CloseEvent frame框架关闭时触发</li>
<li>wx.CommandEvent 按钮单击 菜单选择 等</li>
<li>wx.KeyEvent 按键事件</li>
<li>wx.MouseEvent 鼠标事件</li>
<li>wx.PaintEvent 窗体需要重画时触发</li>
<li>wx.SizeEvent 窗体大小或布局改变时触发</li>
<li>wx.TimerEvent wx.Timer类创建的定时事件</li>
</ul>
<h3 id="_8">按钮三事件</h3>
<p>按钮在GUI设计中是使用频率非常高的一个组件，其绑定的最常用的三个事件有：</p>
<ul>
<li>self.Bind(wx.EVT_BUTTON, self.OnButtonClick,  self.button)   绑定按钮事件  </li>
<li>self.button.Bind(wx.EVT_ENTER_WINDOW,  self.OnEnterWindow)    绑定鼠标位于其上事件  </li>
<li>self.button.Bind(wx.EVT_LEAVE_WINDOW, self.OnLeaveWindow)     绑定鼠标离开事件</li>
</ul>
<h2 id="layout">什么时候调用Layout方法</h2>
<p>动态调整GUI的各个元素，我们会看到网上各个例子经常会看到调用了 Layout方法，然后有的时候我发现不调用似乎影响不大，有的时候发现不调用页面会变形，那么到底什么时候应该调用Layout方法呢。请参看 <a href="https://wiki.wxpython.org/WhenAndHowToCallLayout">这篇文章</a> 。</p>
<ol>
<li>StaticText 进行 SetLable 操作之后，应该Layout下</li>
<li>通过sizer显示或隐藏某个面板元素之后应该Layout 下。</li>
</ol>
<p>如果窗体触发了 <code>EVT_SIZE</code> 事件，wxpython会自动进行Layout重排。重排的时候父窗体的sizer会自动进行Layout，然后父窗体的子窗体也会相应的进行重排操作，但如果某个子窗体不需要重排，那么它就不会接受 <code>EVT_SIZE</code> 事件了，也就不会调用Layout方法了。比如StaticText 更改Layout，你调用其父窗体的Layout，StaticText是不会自动调整的。</p>
<p>按照 <a href="https://stackoverflow.com/questions/6294726/setsizer-setsizerandfit-and-resizing-components">这个网页</a> 的介绍，加上个人的一点实践经验，不推荐使用 <code>SetSizerAndFit</code> 方法了，个人的使用体验是使用 <code>SetSizer</code> 就能完成工作了，而加上Fit有的时候会给你的布局带来一些困扰，比如ScrolledPanel在Fit之后会发生截断问题。</p>
<p>总的原则经过试验确实是可行的：</p>
<ol>
<li>SetSizer</li>
<li>发现不对劲，Layout</li>
<li>Layout之后还不对劲，这通常不是布局的问题了，某些情况下你更改了一些数据，可能需要Refresh</li>
<li>TODO Layout 和 Refresh 的区别是什么 目前我已经遇到一个问题，只有Refresh之后才有正常的行为，那就是重画的透明组件再设置标签之后，似乎只有Refresh之后才会再次进行重画动作，这值得引起读者的注意。然后有的时候我们看到子面板Layout之后会自动Refresh。</li>
</ol>
<h3 id="scrolledpanel">ScrolledPanel</h3>
<p>这里特别值得一提的是 <code>ScrolledPanel</code> 里面的内容在发生变动的时候，除了Layout之外还需要加上：</p>
<div class="highlight"><pre><span></span><span class="k">self</span><span class="p">.</span><span class="n">SetupScrolling</span><span class="p">()</span>
</pre></div>
<p>实践发现是内容变动之后都需要加上这句，否则侧边滚动条会丢失，下面的内容也会被隐藏。</p>
<h2 id="_9">设置背景颜色和字体颜色</h2>
<p>wxpython的任何窗体对象（是的这两个方法是挂在wx.Window上的），可以用 <code>SetBackgroundColour</code> 来设置其背景颜色，用 <code>SetForegroundColour</code>来设置前景颜色，前景颜色一般就是所谓的字体颜色吧。</p>
<p>如果你需要动态调成某个面板的背景颜色，那么记得调用Refresh方法来激活重画事件。</p>
<h2 id="python">将图片转成python编码</h2>
<p>首先是编写这样一个python脚本：</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*-coding:utf-8-*-</span>


<span class="sd">"""</span>
<span class="sd">将项目图片文件全部转成python文件，然后可以直接 import images 来引用图片了。</span>
<span class="sd">"""</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">wx.tools</span> <span class="kn">import</span> <span class="n">img2py</span>

<span class="n">command_lines</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"   -F -i -n Favicon static/images/favicon.ico images.py"</span><span class="p">,</span>
    <span class="s2">"-a -F -n ApplyTaiKa static/images/apply_tai_ka.png images.py"</span><span class="p">,</span>
    <span class="s2">"-a -F -n Address static/images/address_img.png images.py"</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">command_lines</span><span class="p">:</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="n">img2py</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>
<p>其调用了wxpython提供的工具 img2py ，然后输出的images.py 里面的图片对象有如下方法：</p>
<div class="highlight"><pre><span></span>    <span class="nv">def</span> <span class="nv">GetBitmap</span><span class="ss">(</span><span class="nv">self</span><span class="ss">)</span>:
        <span class="k">return</span> <span class="nv">wx</span>.<span class="nv">Bitmap</span><span class="ss">(</span><span class="nv">self</span>.<span class="nv">GetImage</span><span class="ss">())</span>
    <span class="nv">def</span> <span class="nv">GetData</span><span class="ss">(</span><span class="nv">self</span><span class="ss">)</span>:
        <span class="nv">data</span> <span class="o">=</span> <span class="nv">self</span>.<span class="nv">data</span>
        <span class="k">if</span> <span class="nv">self</span>.<span class="nv">isBase64</span>:
            <span class="nv">data</span> <span class="o">=</span> <span class="nv">b64decode</span><span class="ss">(</span><span class="nv">self</span>.<span class="nv">data</span><span class="ss">)</span>
        <span class="k">return</span> <span class="nv">data</span>

    <span class="nv">def</span> <span class="nv">GetIcon</span><span class="ss">(</span><span class="nv">self</span><span class="ss">)</span>:
        <span class="nv">icon</span> <span class="o">=</span> <span class="nv">wx</span>.<span class="nv">Icon</span><span class="ss">()</span>
        <span class="nv">icon</span>.<span class="nv">CopyFromBitmap</span><span class="ss">(</span><span class="nv">self</span>.<span class="nv">GetBitmap</span><span class="ss">())</span>
        <span class="k">return</span> <span class="nv">icon</span>

    <span class="nv">def</span> <span class="nv">GetImage</span><span class="ss">(</span><span class="nv">self</span><span class="ss">)</span>:
        <span class="nv">stream</span> <span class="o">=</span> <span class="nv">BytesIO</span><span class="ss">(</span><span class="nv">self</span>.<span class="nv">GetData</span><span class="ss">())</span>
        <span class="k">return</span> <span class="nv">wx</span>.<span class="nv">Image</span><span class="ss">(</span><span class="nv">stream</span><span class="ss">)</span>
</pre></div>
<p>最常用的是 <code>GetBitmap</code> 直接获取Bitmap图片对象。</p>
<h2 id="_10">后台任务</h2>
<p>wxpython的后台任务推荐用 <code>wx.CallAfter</code> 或者 <code>wx.CallLater</code> 来调用。用python内置的多线程可能会让你的界面有时出现一些奇怪的问题。</p>
<div class="highlight"><pre><span></span><span class="n">wx</span><span class="p">.</span><span class="n">CallAfter</span><span class="p">(</span><span class="n">callable</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
<h2 id="timer">Timer</h2>
<p>wxpython里面的计时器某些任务挂上去还是很方便的。</p>
<div class="highlight"><pre><span></span>    <span class="k">self</span><span class="p">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">wx</span><span class="p">.</span><span class="n">Timer</span><span class="p">(</span><span class="k">self</span><span class="p">)</span>
    <span class="k">self</span><span class="p">.</span><span class="n">timer</span><span class="p">.</span><span class="k">Start</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
    <span class="k">self</span><span class="p">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="p">.</span><span class="n">EVT_TIMER</span><span class="p">,</span> <span class="k">self</span><span class="p">.</span><span class="k">update</span><span class="p">,</span> <span class="k">self</span><span class="p">.</span><span class="n">timer</span><span class="p">)</span>
</pre></div>
<h2 id="_11">参考资料</h2>
<ol>
<li><a href="http://zetcode.com/wxpython">zetcode 的wxpython教程</a></li>
<li><a href="https://docs.wxpython.org/">wxpython官方参考文档</a></li>
<li>wxpython in action , Author by Harri Pasanen and Robin Dunn</li>
</ol>
            
            
            <hr/>

        </div>
        <section>
        <div class="col-md-2" style="float:right;font-size:0.9em;">
            <h4>首发于：</h4>
            <time pubdate="pubdate" datetime="2018-08-27T00:00:00+08:00">2018年 8月 27日 </time>

<h4>最近更新于：</h4>
<time datetime="2018-09-20T00:00:00+08:00">2018年 9月 20日 </time>

            <h4>分类：</h4>
            <a class="category-link" href="/categories.html#gui-ref">GUI</a>
            <h4>标签：</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#wxpython-ref">wxpython
                    <span>1</span>
</a></li>
            </ul>
        </div>
        </section>
</div>
</article>
    </div>
    <div class="col-md-1"></div>

</div>


<div id="push"></div>


<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a> and updated by <a href="http://www.cdwanze.work" title="cdwanze Home Page">cdwanze</a></li>
    </ul>
</div>
</footer>

        <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
    <script>
        function validateForm(query) {
            return (query.length > 0);
        }
    </script>

    <script>
        function adjust_search_width() {
            var w = document.documentElement.clientWidth;
            if ((w > 755) && (w < 975)) {
                plus_width = w - 755;
                $('.navbar-form .form-control').outerWidth(210 + plus_width);
            } else if (w >= 975) {
                $('.navbar-form .form-control').outerWidth(210 + 220);
            } else if (w <= 755) {
                $('.navbar-form .form-control').css('width', '100%')
            }
        }

        $(document).ready(function () {
            adjust_search_width();
        });

        window.onresize = function () {
            adjust_search_width();
        }

    </script>


    



</body>
</html>