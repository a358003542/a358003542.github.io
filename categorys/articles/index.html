<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="baidu-site-verification" content="D4VqC4HppC"/>
    <meta name="msvalidate.01" content="55CB117A61A6F8286173763FB18D9625"/>

        <meta name="author" content="cdwanze"/>
        <meta name="copyright" content="cdwanze"/>

            <meta property="og:type" content="article"/>
        <meta name="twitter:card" content="summary">

        <meta property="og:title" content="cdwanze的博文"/>
        <meta name="twitter:title" content="cdwanze的博文">
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content="cdwanze的博文"/>
    <meta property="og:article:author" content="cdwanze"/>
    <title>
cdwanze的博文 - articles category</title>


        <link href="/theme/css/font-awesome.css" rel="stylesheet"
              media="screen">
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet"
              media="screen">

            <link rel="stylesheet" type="text/css"
                  href="/theme/css/pygments.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/elegant.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="/theme/css/custom.css" media="screen">






</head>
<body>

<nav class="navbar">
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".navbar-collapse"
                    aria-expanded="false">
                <span class="sr-only">Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="https://www.cdwanze.work"><span
                    class=site-name>网站首页</span></a>
        </div>


        <div class="navbar-collapse collapse">
            <form action="/search.html"
                  onsubmit="return validateForm(this.elements['q'].value);"
                  class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" name="q" id="tipue_search_input"
                           class="form-control" placeholder="Search..."
                           style="width:430px;">
                </div>
                <button class="btn btn-default" type="submit">搜索</button>
            </form>


            <ul class="nav navbar-nav nav-pills navbar-right">
                <li >
                    <a href="">博文首页</a></li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle"
                           data-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">查找文章<span
                                class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a class="slowscroll" href="/categories.html">按分类</a>
                            </li>
                            <li><a class="slowscroll" href="/tags.html">按标签</a>
                            </li>
                        </ul>
                    </li>


                        <li >
                            <a href="/guan-yu-ben-wang-zhan.html">关于本网站</a>
                        </li>
                        <li >
                            <a href="/gong-gao.html">公告</a>
                        </li>
            </ul>


        </div>
    </div>
</nav>


<div class="container-fluid">
    <div class="col-md-1 col-md-1-left"></div>
    <div class="col-md-10">


    <style>
        article {
            border: 1px solid #aaa;
        }

        section {
            padding: 1em;
        }

        article > p {
            padding-left: 0.5em;
            padding-right: 0.5em;
        }

        #gotop {
            position: fixed;
            right: 12%;
            float: right;
            top: 50%;
        }

        @media screen and (max-width: 600px) {
            #gotop {
                display: none;
            }
        }
    </style>

    <button id="gotop" type="button" class="btn btn-default">
        <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
    </button>



    <div class="row">

        <div class="row">
         </div>

             <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <header>
                        <h1 id="recent-posts">最近博文
                            <a id="allposts" href="/archives.html">所有博文</a>
                        </h1>
                    </header>


                    <div class="recent-posts">

                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/understanding-sip-book-learning-notes.html">理解SIP协议一书补充材料
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#articles-ref">articles
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2019-08-30T00:00:00+08:00">2019年 8月 30日
                                        </time>
                                    </div>
                                </section>
                                
<h1 id="sip">理解SIP一书补充材料</h1>
<p><strong>下面是学习 Alan B. Johnston SIP Understanding the Session Initiation Protocol 这本书的内容 </strong> ，在学习阅读官方协议文档的基础上，选择了某些内容摘记在这里。</p>
<h2 id="_1">一个简单的会话建立例子</h2>
<p><img alt="img" src="/images/sip_example_1.jpg"/></p>
<ol>
<li>Tesla先给Marconi发送INVITE消息</li>
</ol>
<div class="highlight"><pre><span></span>INVITE sip:marconi@radio.org SIP/2.0
Via: SIP/2.0/UDP lab.high-voltage.org:5060;branch=z9hG4bKfw19b 
Max-Forwards: 70
To: G. Marconi &lt;sip:Marconi@radio.org&gt;
From: Nikola Tesla &lt;sip:n.tesla …</pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/crf-model.html">条件随机场模型
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#articles-ref">articles
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2019-02-26T00:00:00+08:00">2019年 2月 26日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">简介</h2>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/xpath.html">xpath
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#articles-ref">articles
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-07-25T00:00:00+08:00">2018年 7月 25日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>基本东西简单了解下即可，然后多看例子吧。</p>
<div class="highlight"><pre><span></span><span class="o">/</span><span class="n">what</span>   <span class="err">基本路径表达，下个节点</span>
<span class="o">//</span><span class="n">what</span>  <span class="err">基本路径表达，任意位置的下个节点</span>
</pre></div>
<p>这里 <code>/</code> 表示在下个节点中匹配， <code>//</code> 下个或所有子节点匹配。 </p>
<div class="highlight"><pre><span></span><span class="o">//</span><span class="n">div</span><span class="o">[</span><span class="n">@id='what'</span><span class="o">]</span><span class="w">   </span><span class="n">根据id定位</span><span class="w"></span>
<span class="o">//</span><span class="n">div</span><span class="o">[</span><span class="n">@id='what'</span><span class="o">]/</span><span class="n">a</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="w"> </span><span class="n">根据id定位后找下面的第一个a标签</span><span class="w"></span>
<span class="o">//</span><span class="n">div</span><span class="o">[</span><span class="n">@id='what'</span><span class="o">]/</span><span class="n">a</span><span class="o">[</span><span class="n">*</span><span class="o">]</span><span class="w"> </span><span class="n">根据id定位后找下面的所有a标签</span><span class="w"></span>
</pre></div>
<p>这里 <code>*</code> 表示所有的意思。</p>
<div class="highlight"><pre><span></span><span class="o">//</span><span class="n">div</span><span class="o">[</span><span class="n">@name</span><span class="o">]</span><span class="w">   </span><span class="n">找具有name属性的div标签</span><span class="w"></span>

<span class="o">//</span><span class="n">div</span><span class="o">[</span><span class="n">@name='what'</span><span class="o">]</span><span class="w"> </span><span class="n">找name属性等于what的div标签</span><span class="w"> </span>

<span class="o">/</span><span class="cm">/*[contains(@class,'what')] 找某个标签class属性有 what NOTICE: 这里的意思是有，多个class属性也是可以匹配的 class="what what_what"</span>
<span class="cm">//div[@class='what' …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonpa-chong-zhi-biao-dan-he-deng-lu-deng-xiang-guan.html">python爬虫之-表单和登陆等相关
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#articles-ref">articles
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<p>表单简单来说就是一个前端友好的界面，其实质就是发送了 一个 POST 请求。</p>
<p>关键是要理解前端的表单界面，具体POST了哪些参量。</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">action=</span><span class="s">"???"</span>
    <span class="err">&lt;input</span> <span class="na">type=</span><span class="s">...</span> <span class="na">name=</span><span class="s">"firstname"</span> <span class="err">...</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="err">type</span> <span class="err">...</span>
    <span class="err">submit</span>
<span class="err">&lt;/form</span><span class="nt">&gt;</span>
</pre></div>
<p>input 的  <strong>name</strong> 就是具体 POST 的参量，然后就是action那边就是你要 POST 的目的地。</p>
<p>类似的表单还有很多其他元素，比如checkbox之类的，其都不过是为了让用户快速地设置某个参量罢了。</p>
<h2 id="cookies">登录的cookies问题</h2>
<p>因为http无状态，所以有cookies 和 session ，服务端数据库记录session，cookies就是客户端。爬虫要正常登录，记得保留好登录成功之后的cookies。</p>
<p>多次请求的时候，用requests的cookies保存和设置就不好用了。记得使用requests的session机制。</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'username' …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonpa-chong-zhi-fang-zhi-bei-feng-de-ce-lue.html">python爬虫之-防止被封的策略
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#articles-ref">articles
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<p>防止被封的首要策略就是尽量的为别人的服务器多考虑下，让自己写的爬虫少请求，每次请求都是有效的核心请求获取最核心的数据，不管是刷页面还是刷ajax，多次请求之间应该设置一个停顿时间。</p>
<div class="highlight"><pre><span></span><span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
<p>在上面的首要原则的基础上，下面介绍的很多实战技巧，其实都符合一个大的原则：尽可能地让你的爬虫和人浏览网页没有区别。</p>
<h2 id="http">http请求头调整</h2>
<p>user-agent 设置，而且时不时的切换下。</p>
<p>虽然目前还没有遇到，不过我推测可能 Referrer 这个header在某些场景下是有些文章的。</p>
<p>还有 Accept-Language 也可能有用。</p>
<h2 id="cookies">Cookies</h2>
<p>有些情况下cookies的正常获取需要javascript的支持。cookies总的原则是第一次请求获取到cookies，然后后面的很多次请求都使用这个cookies即可。</p>
<p>不过反爬虫cookies一般都会有个时间限制，一个简单的做法就是这边也设置个时间，定时获取最新的cookies或者，一定请求量之后再获取一个新的cookies。</p>
<p>具体使用 scrapy-splash 了解下。</p>
<h2 id="_1">表单陷阱</h2>
<p>有的表单里面有：</p>
<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="k">input</span> <span class="k">type</span><span class="o">=</span><span class="ss">"hidden"</span> <span class="p">...</span>
</pre></div>
<p>我们要记住人如果在页面上点击，这个没有显示的字段的值也会一并送过去，而他们服务器那边会根据这个值可能是个加密的某个值来判断这个请求是人点的还是爬虫行为。</p>
<p>最好的策略是先把整个表单内容爬过来，收集好之后再发送表单请求。</p>
<p>和上面的情况相反，还有一种情况，页面表单发送可能有特别的处理，某些表单字段，不管用户看得见看不见，你都不能发送过去 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/pythonpa-chong-zhi-zi-ran-yu-yan-chu-li-xiang-guan.html">python爬虫之-自然语言处理相关
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#articles-ref">articles
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                <p>网页里面的内容大部分是文本，所以爬虫继续深入不可避免要研究自然语言处理的。</p>
<p>爬虫越学到后面就会明白，漫无目的的爬虫真的只是入门阶段，而爬虫进阶很多时候就要在这个爬虫定向上下功夫。</p>
<p>本文不是介绍自然语言处理相关知识的，只是就和爬虫相关做一些讨论和思考。</p>
<p>比如分析文章得到热门词，然后根据热门词进一步定向搜索定向爬取。</p>
<p>但在这里我们说得更加抽象一点，而这就是爬虫进阶和自然语言处理结合的理想状态，简言之就是：</p>
<p>好像一个人在阅读一篇文章，然后真的理解了里面的文章和里面的词语，然后他自己去决定哪个url该点，哪个关键词该收集，那篇文章有价值，那篇文章该分到哪一类等等。</p>
<p>下面列出一些自然语言处理的基本功，想要爬虫进阶深造的可能就要开始把这些基本功打扎实了：</p>
<ul>
<li>分词</li>
<li>词频统计</li>
<li>ngram模型等分析词语之间的关系</li>
<li></li>
</ul>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/data-process-design-principle.html">数据处理的程序的设计原则讨论
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#articles-ref">articles
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-03-06T15:34:00+08:00">2018年 3月 6日
                                        </time>
                                    </div>
                                </section>
                                
<p>数据量很大的情况下，通常指数据库下数据量较大的情况下，我们编写数据处理程序应该具有怎样的设计原则：</p>
<p>我对分布式流式计算框架不太熟悉，也许使用那些框架是个思路，现在是我纯粹从自己面对的问题作出的一些然后提出的一些原则：</p>
<ol>
<li>
<p>大的基本操作应考虑以从数据库的某处移动到某处来标记操作的完成，因为大的基本操作变动性并不是太大，这样数据库某个地方的数据都是有特别含义的。</p>
</li>
<li>
<p>大的基本操作下还有一些小的操作步骤，这是一个难点，第一入口数据不断更新甚至老数据也会有变化，第二处理代码也可能会有变更，这部分并没有一劳永逸的完美的可扩展方案，有有的时候也是带来了太多的复杂性。一个比较好的建议是记录如下operations的处理信息：</p>
</li>
</ol>
<div class="highlight"><pre><span></span><span class="n">operations</span><span class="o">:</span> <span class="n">op_name</span> <span class="n">op_state</span> <span class="n">last_op_time</span> <span class="n">op_day</span>
</pre></div>
<p>2.1 操作名</p>
<p>2.2 op_state 操作状态，每个操作前都将state调为2，最后程序快结束的最后一行，state调为1，这样确保了op操作 state=0 或者 =2 或者没有state这个参量都表示本操作有问题</p>
<p>2.3 操作碎片化，一个好的建议以目标数据的 进入天数 作为一个小的处理单元，这样某一步出现问题，可以重复刷，保证数据处理的可中断，状态可记录。</p>
<p>2.4 上一次的操作时间 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="/articles/nlp-talk-one.html">自然语言处理第一谈
 </a></h1>

                                <section>
                                    posted in
                                    <a href="/categories.html#articles-ref">articles
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-01-30T00:00:00+08:00">2018年 1月 30日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">简介</h2>
<p>自然语言处理的可能应用领域有：</p>
<ul>
<li>机器翻译</li>
<li>自动文摘</li>
<li>信息检索</li>
<li>文档分类</li>
<li>问答系统</li>
<li>信息过滤，信息抽取</li>
<li>文字编辑和自动校对</li>
<li>作文自动评分</li>
<li>语音识别</li>
<li>语音合成，text to speech</li>
<li>​</li>
</ul>
<h2 id="_2">信息熵</h2>
<p>信息熵是个非常让人难懂的概念，尤其是当你在很多领域都接触到信息熵的概念和各种应用的时候，你会发现你根本就没理解信息熵这个概念。比如自然语言处理领域，信息熵有着非常多的应用，然后自然信息传输领域也有很多应用，信息熵的概念基本上是现在信息论的基石吧。</p>
<p>不管怎么说，我们先死记硬背一下，信息熵的定义，就是一个事物或者一个什么东西吧，在一个系统中出现的几率为p，则这个东西在这个系统中的信息熵为：
</p>
<div class="math">$$
H = - p log_2{p}
$$</div>
<p>
首先从最简单的抛硬币开始吧，对于正面来说出现的几率为1/2，则一次抛硬币你看到正面的信息熵为 0.5，然后反面的信息熵也是0.5 <sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> 。信息熵的单位是bit，然后信息熵服从可加性（也就是总系统的信息熵是各个子系统的信息熵的加和），所以抛一枚硬币，正面和反面的信息熵总和就是 1 bit …</p>
                            </article>

                     </div>
                </div>
            </div>
    </div>

    </div>
    <div class="col-md-1"></div>

</div>


<div id="push"></div>


<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a> and updated by <a href="http://www.cdwanze.work" title="cdwanze Home Page">cdwanze</a></li>
    </ul>
</div>
</footer>

        <script src="/theme/js/jquery.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
    <script>
        function validateForm(query) {
            return (query.length > 0);
        }
    </script>

    <script>
        function adjust_search_width() {
            var w = document.documentElement.clientWidth;
            if ((w > 755) && (w < 975)) {
                plus_width = w - 755;
                $('.navbar-form .form-control').outerWidth(210 + plus_width);
            } else if (w >= 975) {
                $('.navbar-form .form-control').outerWidth(210 + 220);
            } else if (w <= 755) {
                $('.navbar-form .form-control').css('width', '100%')
            }
        }

        $(document).ready(function () {
            adjust_search_width();
        });

        window.onresize = function () {
            adjust_search_width();
        }

    </script>


    <script>
        (function ($) {
            // custom css expression for a case-insensitive contains()
            jQuery.expr[':'].Contains = function (a, i, m) {
                return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
            };

            function listFilter() {

                $('#findtag')
                    .change(function () {
                        var filter = $(this).val();
                        if (filter) {
                            // this finds all links in a list that contain the input,
                            // and hide the ones not containing the input while showing the ones that do
                            $('.list-of-tags').find("a:not(:Contains(" + filter + "))").parent().hide();
                            $('.list-of-tags').find("a:Contains(" + filter + ")").parent().show();
                        } else {
                            $('.list-of-tags').find("li").show();
                        }
                        return false;
                    })
                    .keyup(function () {
                        // fire the above change event after every letter
                        $(this).change();
                    });
            }

            //ondomready
            $(function () {
                listFilter($());
            });
        }(jQuery));

    </script>

    <script>
        $(function () {
            //点击回到顶部的元素
            $("#gotop").click(function (e) {
                //以1秒的间隔返回顶部
                $('body,html').animate({scrollTop: 0}, 1000);
            });
        });
    </script>

    <script>
        $('.page-header').hover(function () {
            $(this).css("color", '#3875d7')
        }, function () {
            $(this).css('color', '#8B0000')
        })
    </script>


    <script>
        $(document).ready(function () {
            $('a.slowscroll').click(function (event) {
                var $anchor = $(this);
                $('html, body').animate({scrollTop: $($anchor.attr('href')).offset().top}, 1500);
                event.preventDefault();
                // $('a.slowscroll').parent().removeClass('active');
                // $('.navbar-header').hide();
                // $anchor.parent().addClass('active');
            })
        })
        console.log('document init...')
    </script>




</body>
</html>