<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="baidu-site-verification" content="D4VqC4HppC"/>
    <meta name="msvalidate.01" content="55CB117A61A6F8286173763FB18D9625"/>

        <meta name="author" content="cdwanze"/>
        <meta name="copyright" content="cdwanze"/>

            <meta property="og:type" content="article"/>
        <meta name="twitter:card" content="summary">

        <meta property="og:title" content="cdwanze的博文"/>
        <meta name="twitter:title" content="cdwanze的博文">
    <meta property="og:url" content="https://docs.cdwanze.work"/>
    <meta property="og:site_name" content="cdwanze的博文"/>
    <meta property="og:article:author" content="cdwanze"/>
    <title>
    cdwanze的博文
</title>


        <link href="https://docs.cdwanze.work/theme/css/font-awesome.css" rel="stylesheet"
              media="screen">
        <link href="https://docs.cdwanze.work/theme/css/bootstrap.min.css" rel="stylesheet"
              media="screen">

            <link rel="stylesheet" type="text/css"
                  href="https://docs.cdwanze.work/theme/css/pygments.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="https://docs.cdwanze.work/theme/css/elegant.css" media="screen">
            <link rel="stylesheet" type="text/css"
                  href="https://docs.cdwanze.work/theme/css/custom.css" media="screen">






</head>
<body>

<nav class="navbar">
    <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".navbar-collapse"
                    aria-expanded="false">
                <span class="sr-only">Navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="https://docs.cdwanze.work/"><span
                    class=site-name>网站首页</span></a>
        </div>


        <div class="navbar-collapse collapse">
            <form action="https://docs.cdwanze.work/search.html"
                  onsubmit="return validateForm(this.elements['q'].value);"
                  class="navbar-form navbar-left">
                <div class="form-group">
                    <input type="text" name="q" id="tipue_search_input"
                           class="form-control" placeholder="Search..."
                           style="width:430px;">
                </div>
                <button class="btn btn-default" type="submit">搜索</button>
            </form>


            <ul class="nav navbar-nav nav-pills navbar-right">
                <li  class="active">
                    <a href="https://docs.cdwanze.work">博文首页</a></li>

                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle"
                           data-toggle="dropdown" role="button"
                           aria-haspopup="true" aria-expanded="false">查找文章<span
                                class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a class="slowscroll" href="/categories.html">按分类</a>
                            </li>
                            <li><a class="slowscroll" href="/tags.html">按标签</a>
                            </li>
                        </ul>
                    </li>


                        <li >
                            <a href="https://docs.cdwanze.work/epub-ebooks.html">epub电子书籍</a>
                        </li>
                        <li >
                            <a href="https://docs.cdwanze.work/about.html">关于本网站</a>
                        </li>
            </ul>


        </div>
    </div>
</nav>


<div class="container-fluid">
    <div class="col-md-1 col-md-1-left"></div>
    <div class="col-md-10">


    <style>
        article {
            border: 1px solid #aaa;
        }

        section {
            padding: 1em;
        }

        article > p {
            padding-left: 0.5em;
            padding-right: 0.5em;
        }

        #gotop {
            position: fixed;
            right: 12%;
            float: right;
            top: 50%;
        }

        @media screen and (max-width: 600px) {
            #gotop {
                display: none;
            }
        }
    </style>

    <button id="gotop" type="button" class="btn btn-default">
        <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
    </button>



    <div class="row">

        <div class="row">
         </div>

             <div class="row">
                <div class="col-md-8 col-md-offset-2">
                    <header>
                        <h1 id="recent-posts">最近博文
                            <a id="allposts" href="https://docs.cdwanze.work/archives.html">所有博文</a>
                        </h1>
                    </header>


                    <div class="recent-posts">
<nav aria-label="Page Navigation">
    <ul class="pager">
        <li class="previous">
            <a href="https://docs.cdwanze.work/index.html" aria-label="Previous" >
                <span aria-hidden="true">&larr;<span>Previous</span></span>
            </a>
        </li>


        <li class="next">
            <a href="https://docs.cdwanze.work/index3.html" aria-label="Next" >
                <span aria-hidden="true">&rarr;<span>Next</span></span>
            </a>
        </li>

    </ul>
</nav>
 
                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/supervisor.html">supervisor
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#linux-ref">linux
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2019-05-05T00:00:00+08:00">2019年 5月 5日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">简介</h2>
<p>supervisor会开启一个后台服务 <code>supervisord</code> 可以通过：</p>
<div class="highlight"><pre><span></span><span class="err">systemctl status supervisord</span>
</pre></div>
<p>查看之。同样类似于nginx之类的做法，其通过各个配置文件来管理的，然后配置文件在 <code>/etc/supervisord.conf</code> 文件里面。</p>
<p>一般会如下所示将配置文件放在另外的某个地方。</p>
<div class="highlight"><pre><span></span><span class="k">[include]</span>
<span class="na">files</span> <span class="o">=</span> <span class="s">/etc/supervisord.d/*.conf</span>
</pre></div>
<p>这些配置都是等下supervisord要加载的。</p>
<p>此外你还需要了解下 supervisor提供的 <code>supervisorctl</code> 命令。</p>
<p>其提供的子命令有：</p>
<ul>
<li>reread 重载配置</li>
<li>restart <code>&lt;name&gt;</code> 重启某个进程</li>
<li>restart all 重启所有进程</li>
<li>stop <code>&lt;name&gt;</code> 停止某个进程</li>
<li>stop all 停止所有进程</li>
<li>start <code>&lt;name&gt;</code> 启用某个进程</li>
<li>start all 启用所有进程</li>
<li>status <code>&lt;name …</code></li></ul>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/monte-carlo-simulation.html">蒙特卡罗模拟
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#suan-fa-ref">算法
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2019-04-08T00:00:00+08:00">2019年 4月 8日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>蒙特卡罗模拟的蒙特卡罗是一个赌运气游戏的名字，而蒙特卡罗模拟在现代计算机发展到今天的背景下，这种思想已经越来越重要了。简单来说其试图将一个问题转成某种随机过程，然后用计算机来模拟这个随机过程从而得到解答。因为自然界存在着大量的问题，其本身就暗含随机性的，对于这样的过程对应建立基于随机性的模型是很直观的，但还存在着某些问题，比如计算 <span class="math">\(\pi\)</span> 值，和随机性不是很相关的，但通过某个随机过程，也能计算出 <span class="math">\(\pi\)</span> 值，这就是典型的蒙特卡罗模拟，或者叫做蒙特卡罗方法。</p>
<p>比如我们常见的随机游走问题，直接对其建模就是一个蒙特卡罗模拟过程。</p>
<p>本文除了讨论随机游走和一些随机过程，还会涉及到线性拟合，最小二乘法，线性回归和相关绘图等内容。</p>
<p>基本的建模代码如下所示，参考了MIT的python编程导论一书：</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>


<span class="k">class</span> <span class="nc">Location</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">move …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/dynamic-programming.html">动态规划
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#suan-fa-ref">算法
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2019-04-07T00:00:00+08:00">2019年 4月 7日
                                        </time>
                                    </div>
                                </section>
                                
<p>动态规划算法感觉这个名字取的很唬人，一开始也是类似于贪婪算法，采用分治思想，将某个大问题分解为一些小问题。而贪婪算法对于那些小问题求解局部最优即可，动态规划和朴素解法一样，也是要试着尝试各种组合情况的，所不同的是采用了记忆策略，来将某些类似的子问题一并解决。所以动态规划算法并不如它的名字那样感人，第一，其必须要求子问题有某种类似性；第二，具体也不过是一种记忆策略罢了。</p>
<p>算法图解的动态规划算法是采用一种网格思路，这对于最长公共子序列问题似乎很适合，而MIT的python编程导论在解决背包问题的时候提出了一种决策树的思路。思考过之后觉得如果某个问题具有很强烈的空间排列组合特性，那么就采用类似解决最长公共子序列问题的网格思路；如果某个问题具有很强烈的时间决策展开性，应该选用决策树。</p>
<h2 id="_1">背包问题</h2>
<p>如下构建决策树之后：</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BinaryDecisionTree</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    二叉决策树</span>

<span class="sd">    决策函数 data</span>
<span class="sd">    decisions = [('a',True), ('b',False)] 决定了决策树中节点在决策树中的位置</span>

<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decisions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="kc">None …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/matplotlib-module.html">matplotlib模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2019-04-06T00:00:00+08:00">2019年 4月 6日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>之前数据绘图一文简单介绍了下如何在jupyter notebook 下绘制简单的直线图、饼图等等，本文主要是作为matplotlib模块绘图的综合性简要介绍。</p>
<p>经常看到一些简单的例子，比如如何画出散点图或者等等，从简单的直白的到复杂的一大堆参数调配的都有，让人迷惑。matplotlib模块还可以和PyQt或者wxpython等后端结合起来等等高级功能，但我现在最急切的就是想要理解matplotlib模块到底做了一些什么事情，那些是必要的常规操作，那些是对外的数据接口。</p>
<p>比如下面的调配中文字体支持的，是matplotlib模块的外围操作，应该绘图前就要调配好的：</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">set_matplotlib_support_chinese</span><span class="p">(</span><span class="n">font</span><span class="o">=</span><span class="s1">'SimHei'</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    设置matplotlib支持中文</span>
<span class="sd">    :param font:</span>
<span class="sd">    :return:</span>
<span class="sd">    """</span>
    <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rcParams</span>

    <span class="n">rcParams</span><span class="p">[</span><span class="s1">'font.family'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'sans-serif'</span>
    <span class="n">rcParams</span><span class="p">[</span><span class="s1">'font.sans-serif'</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">font</span><span class="p">)</span>  <span class="c1"># 插入中文字体</span>
    <span class="n">rcParams</span><span class="p">[</span><span class="s1">'axes.unicode_minus'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># 用来正常显示负号</span>
</pre></div>
<p>然后我们对之前pandas的绘图接口操作发现，除了传递必要的x，y数值进去外，还需要传一个 ax …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/flask-module.html">flask模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#web-ref">WEB
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2019-01-03T00:00:00+08:00">2019年 1月 3日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>django是一种构建大型商务网站的解决方案，除非目前贵公司的技术栈是已经架构在django之上的，否则不管是个人性质的小项目，或者刚刚开始的新的项目，个人推荐flask多于django的。当然在flask和tornado之间如何选择上，个人觉得更多的是在你对python的异步这一块的理解上，如果你懂python的异步，并且也知道你要做的api对并发和速度都有很高的要求，那么就应该选择tornado，否则就选择flask。</p>
<p>比如作为个人爱好去搭建的小网站或者api服务，那么选择flask是很适合的。本文也是作者有时鼓捣个人的小网站慢慢积累的一些东西。</p>
<h2 id="_2">推荐的启动方式</h2>
<p>目前flask推荐的启动方式是通过：</p>
<div class="highlight"><pre><span></span><span class="err">flask run</span>
</pre></div>
<p>或者</p>
<div class="highlight"><pre><span></span><span class="err">python -m flask run </span>
</pre></div>
<p>来启动flask。【这个方式很适合开发和测试，实际部署还是WSGI server来进行】</p>
<p>要正常执行上面的命令，你需要设置好一些环境变量，最主要的是 <code>FLASK_APP</code> 这个变量：</p>
<p>windows </p>
<div class="highlight"><pre><span></span><span class="err">set FLASK_APP=hello.py</span>
<span class="err">flask run</span>
</pre></div>
<p>linux </p>
<div class="highlight"><pre><span></span><span class="err">export FLASK_APP=hello.py</span>
<span class="err">flask run</span>
</pre></div>
<p>推荐是通过在当前工作目录下加上 <code>.env</code> 这个文件 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/ctypes.html">ctypes模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#pythonyu-yan-ref">python语言
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-12-24T00:00:00+08:00">2018年 12月 24日
                                        </time>
                                    </div>
                                </section>
                                <h2 id="ctypes">ctypes模块</h2>
<p>如果你的python程序需要和别人的dll进行交互，那么你就必须了解ctypes模块了。ctypes在linux也可以和c语言的so库进行交互，本文重点讨论的是在windows下和dll交互的问题。</p>
<p>基本的使用如下：</p>
<div class="highlight"><pre><span></span><span class="n">lib_comm</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">windll</span><span class="o">.</span><span class="n">LoadLibrary</span><span class="p">(</span><span class="n">get_dll_path</span><span class="p">(</span><span class="s1">&#39;your_dll.dll&#39;</span><span class="p">))</span>
</pre></div>


<p>假设你的your_dll.dll 里面 helloworld 函数，那么就可以这样调用这个函数了。</p>
<div class="highlight"><pre><span></span><span class="n">lib_comm</span><span class="o">.</span><span class="n">helloworld</span><span class="p">()</span>
</pre></div>


<p>接下的使用主要就是考虑python的数据类型和dll里面的c语言数据类型的对接问题（可能还会牵涉到字符串编码问题。）</p>
<p><a href="https://docs.python.org/3.7/library/ctypes.html">官方文档</a> 的那个数据类型对应表格是必看的。基本类型都还好，主要是指针和结构体这两块要理解清楚。</p>
<p>首先你需要在python脚本中大概类似下面的创建一个对应于C语言的里面定义的结构体：</p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">YOU_STRUCTURE</span><span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">Structure</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    基础信息结构体</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_int</span><span class="p">),</span>  
        <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char</span> <span class="o">*</span> <span class="mi">24</span><span class="p">),</span> 
        <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_char</span> <span class="o">*</span> <span class="mi">40</span><span class="p">),</span> 
    <span class="p">]</span>
</pre></div>


<p>然后实际使用如下：</p>
<div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">YOU_STRUCTURE</span><span class="p">()</span>
<span class="n">_ref_s</span>  <span class="o">=</span> <span class="n">ctypes …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/machine-learning-learninng-notes.html">机器学习学习笔记
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#suan-fa-ref">算法
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-11-04T00:00:00+08:00">2018年 11月 4日
                                        </time>
                                    </div>
                                </section>
                                
<h1 id="_1">第一谈</h1>
<p>目前很火热的深度学习其本质仍然属于机器学习中比较厉害的一种技术，但不管是更好地理解这门技术和使用这门技术，都还是要打好机器学习这门学科的基本功。所以本分类机器学习除了包括传统机器学习的讨论外，还将包括神经网络和深度学习，以及相关的模块keras，tensorflow，可能还会包括matplotlib或者numpy等相关模块的讨论。</p>
<p>之所以这门技术不叫人工智能是很务实的态度，我很确信目前的深度学习等及其他技术将成为未来人工智能技术的基石，更确切来说是类似砖木一般的存在，但就目前机器学习的发展程度来说，还远远不足以称之为人工智能。因为目前机器学习的发展状态就是：对于人工智能领域最核心的一些问题，甚至连提出来的勇气都没有，更不要说解决他们了。</p>
<p>我接下来重点在学习理解深度学习上，传统机器学习和神经网络会有所谈论只是为了更好地理解深度学习相关概念。</p>
<h3 id="_2">机器学习能做什么</h3>
<p>在开始讨论机器学习之前，我们程序员首先应该转变一种思维方式，机器学习并不是我们常见的那些算法，在那些算法里面，计算机该做什么，该处理什么数据，数据是什么含义都是程序员去定义的。而机器学习的意思是让机器自己去学习，去学习现实世界各个事物运行变化的规律，当然机器学习目前各个算法能力还是很有限的，但整个学科的发力方向就是这样，所以具体我们遇到某个问题的时候，程序员更多的不应该是去自己去分析研究对象的各个数据规律或者规则，而应该讲这些数据和答案（标签）送给机器学习算法，让机器自己总结出研究对象的规律或者规则。</p>
<p>这看上去很神奇，其实就是一些数据转换的工作，更多的是工程上的东西。</p>
<h3 id="_3">传统机器学习应用</h3>
<p>传统机器学习可能应用领域如下：</p>
<ul>
<li>电子邮件垃圾邮件过滤算法</li>
<li>搜索引擎根据你的点击记录来优化你的下次搜索结果</li>
<li>你在网上点击或者查看或者买了某个东西，网站记录你的这些活动，从而更好地为你推荐商品，或者推荐优惠券。</li>
<li>手写数字识别 …</li></ul>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/suan-fa-fu-za-du.html">算法复杂度
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#suan-fa-ref">算法
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-10-06T00:00:00+08:00">2018年 10月 6日
                                        </time>
                                    </div>
                                </section>
                                
<p>一般讨论算法复杂度主要关注的是算法的时间复杂度，而真到了该思考算法的时间复杂度了，那么这时目标算法将应对的是一个输入规模n很大的情况。人们常说的大O表示法将一些细枝末节的东西都省略了的，因为输入规模n很大，还关心那多出来的几步是没有意义的。</p>
<p>所以我们更多的是专注于算法中的循环部分，而对于循环部分，若循环次数和输入规模无关，则记为O(1) 常数运行时间。</p>
<p>如果我们遇到了如下的循环：</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
<p>这个循环和输入规模n相关，我们记作 O(n) 线性运行时间。</p>
<p>假设一个算法里面又有上面提到的O(1) ，又有上面的O(n) ，那么我们应该将O(1) 项去掉：</p>
<ul>
<li>如果运行时间是一个多项式的和，那么保留增长速度最快的项，去掉其他各项</li>
</ul>
<p>那么上面提到的算法复杂度就可简单记为 O(n) 。</p>
<p>又假设有个算法，有两个这样的循环：</p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/logbook-module.html">logbook模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-08-27T00:00:00+08:00">2018年 8月 27日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>logbook似乎是个不错的模块可以改进我们的日志功能，可以看做系统logging模块的第三方升级版，但还是有很多地方不同的。</p>
<p>一开始我接触的最大的不同就是logbook官方文档并不推荐将某个handler注册在某个logger的那种做法，logbook的handler可以注册在整个线程或者整个进程上。或者我们看到官方文档的第一个例子是这种写法：</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logbook</span> <span class="kn">import</span> <span class="n">warn</span><span class="p">,</span> <span class="n">StreamHandler</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span><span class="o">.</span><span class="n">push_application</span><span class="p">()</span>
<span class="n">warn</span><span class="p">(</span><span class="s1">'This is a warning'</span><span class="p">)</span>
</pre></div>
<p>或者写作：</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logbook</span> <span class="kn">import</span> <span class="n">warn</span><span class="p">,</span> <span class="n">StreamHandler</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">log_handler</span> <span class="o">=</span> <span class="n">StreamHandler</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="k">with</span> <span class="n">log_handler</span><span class="o">.</span><span class="n">applicationbound</span><span class="p">():</span>
    <span class="n">warn</span><span class="p">(</span><span class="s1">'This is too cool for stdlib'</span><span class="p">)</span>
</pre></div>
<p>这是单个注册在整个程序上的，此外还有 <code>threadbound</code> 是注册在整个线程上的。一般桌面GUI程序推荐注册在整个程序上 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/greedy-algorithm.html">贪婪算法
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#suan-fa-ref">算法
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-08-26T00:00:00+08:00">2018年 8月 26日
                                        </time>
                                    </div>
                                </section>
                                
<p>任何问题总可以通过暴力穷举算法求解，当然有些问题组合数情况太多了，尤其是某些问题，没有快速算法，即NP完全问题。那么可以试着用一些近似算法来快速找到一个近似解。贪婪算法就是其中的一个近似解。</p>
<p>贪婪算法并不是某种具体的算法，更像是写算法时的一种思路参考。如果你要解决问题，而该问题可以分解为多个步骤，那么你可以通过寻找每步的局部最优解，来<strong>近似</strong>得到目标问题的全局最优解。（贪婪算法并不保证你得到的解一定是全局最优解，但一般这个解是很靠近全局最优解了。）</p>
<p>对于一个问题，如果贪婪算法是有效的，那么一般贪婪算法就是解决这个问题最好的算法。</p>
<h2 id="_1">背包问题</h2>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Knapsack</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capacity</span> <span class="o">=</span> <span class="n">capacity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">items</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">freespace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capacity</span>

    <span class="k">def</span> <span class="nf">add_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/sqlalchemy-module.html">sqlalchemy模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#sql-ref">SQL
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-07-10T00:00:00+08:00">2018年 7月 10日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>本文分为两个部分，sqlalchemy的非ORM部分和ORM部分。一般使用是推荐使用ORM，这将让你的代码更python，更易读易懂。但ORM部分要用好，很多非ORM部分知识是需要的,，下面根据笔者的实践列出一些非ORM部分非常常用的一些知识部分：</p>
<ul>
<li>创建Engine 理解创建Engine部分将有助于你在很多地方理解如何配置sqlalchemy的数据库连接</li>
<li>列的属性 列的数据类型 这两个是必看的，你在定义ORM模型的时候必然要参考这个</li>
<li>select语句和理解RowProxy对象 帮助你理解如何在query中编写select语句和出来的结果如何使用</li>
</ul>
<h3 id="_2">安装</h3>
<p>sqlalchemy的安装简单用pip命令安装之即可:</p>
<div class="highlight"><pre><span></span><span class="err">pip install sqlalchemy</span>
</pre></div>
<h3 id="_3">引用惯例</h3>
<p>在后面都默认有如下引用:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
<p>后面将不会再提及，也就是凡是 <code>from sqlalchemy import what</code> 的所有语句也都归于如上一条引用。实践中并不推荐这种的全局引用。</p>
<h2 id="_4">简介</h2>
<p>通过sqlalchemy连接具体的某个数据库，前面有一些准备工作要做，参考 <a href="http://www.aosabook.org/en/sqlalchemy.html">sqlalchemy architecture</a> 一文的描述:</p>
<p><img alt="img" src="https://docs.cdwanze.work/images/python/layers.png" title="SQLAlchemy layer diagram"/></p>
<p>和数据库直接相连的是我们熟悉的那些DBAPI接口模块，比如: sqlite3, pymysql, psycopg2等，然后中间的核心层有Engine，连接池，方言 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/alembic-module.html">alembic模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#sql-ref">SQL
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-07-01T00:00:00+08:00">2018年 7月 1日
                                        </time>
                                    </div>
                                </section>
                                
<p>alembic模块有什么，如果读者熟悉django的话，那么可以将其类比为django里面的makemigrations和migrate相关的命令，简单来说，其管理数据库版本，进行数据库迁移工作。随着我们对于数据库操作的使用频繁，我相信读者就会开始慢慢感受到数据库迁移管理的必要性，实际上我相信读者会从一开始不愿意将这些东西加入代码版本控制，到后来开始主动要将其加入代码版本控制。</p>
<p>更多关于alembic的使用请参看官方文档，下面就一些基本的使用概念说一下。</p>
<h2 id="_1">基本使用</h2>
<h3 id="alembic">初始化alembic项目</h3>
<div class="highlight"><pre><span></span><span class="err">alembic init alembic</span>
</pre></div>
<p>然后当前目录下会多一个 <code>alembic.ini</code> 文件，这个配置文件里面有很多重要的配置，其中 <code>sqlalchemy.url</code> 是必配的。</p>
<h3 id="modelspy">根据models.py来</h3>
<p>类似于django的 models.py 文件里面定义一些模型，我们利用sqlalchemy模块也可以定义一些模型文件，然后根据这个模型文件的定义，我们可以利用alembic来自动根据你的数据库的一些更改：</p>
<div class="highlight"><pre><span></span><span class="err">alembic revision --autogenerate -m "add_some_key"</span>
</pre></div>
<p>你需要定义好 alembic 文件下的 <code>env.py</code> 里面的 target_metadata 这个变量：</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">myapp …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/pandasmo-kuai.html">pandas模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#suan-fa-ref">算法
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-07-01T00:00:00+08:00">2018年 7月 1日
                                        </time>
                                    </div>
                                </section>
                                
<p>本文对pandas模块的一些核心概念进行说明。</p>
<h2 id="_1">基本入门</h2>
<p>pandas最核心的两个数据结构就是 Series 类和 DataFrame 类。其中DataFrame可能会用的偏多一点，Series相当于一维情况下较简单的DataFrame，有的时候会用到。本文重点讨论DataFrame类。</p>
<p>DataFrame之所以很常用是因为这种数据结构太常见了，在excel中，在csv中，在sql中，等等来源的数据都可以汇总成为DataFrame数据结构，然后进行一些后面必要的数据处理，包括送入机器学习或者深度学习的模型中去。</p>
<h2 id="_2">读写文件支持</h2>
<p>pandas的io子模块写得很便捷，实际上我经常看到有些python程序员并不是在做数据处理，有时都会调用下pandas的io来做一些读写操作。</p>
<p>其大体有这些函数：</p>
<ul>
<li>read_csv    to_csv</li>
<li>read_json   to_json</li>
<li>read_html to_html</li>
<li>read_excel to_excel</li>
<li>read_sql to_sql</li>
</ul>
<p>这其中，html的读写在网络抓取上有时可能有用，但不是很强大，还是推荐用专门的工具来做，sql的操作简单点可以用pandas那边的接口，但如果稍微复杂点还是推荐用sqlalchemy来做，这样写出来的代码可读性更好一些，orm层接口也更便捷写，代码里面全是一大堆sql语句，总不是太好的。</p>
<h3 id="txt">读txt文件</h3>
<p>实际上我们可能更常遇到的是txt文件，还是用 read_csv 函数来读，只是需要做一些额外的配置，比如 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/airflow-module.html">airflow模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#linux-ref">linux
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-24T00:00:00+08:00">2018年 6月 24日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>airflow和luigi模块相比有以下优点：</p>
<ol>
<li>通用的DAG概念来描述工作流，更专业点。</li>
<li>集成系统的crontab从而支持周期性任务，这样airflow就只能在linux系统下运行了。</li>
<li>图形界面很美观，功能更强大。</li>
</ol>
<p>老实说我不喜欢crontab，如果只是简单调度，用apscheduler或者之类的工具简单写下就能集成到你的软件系统中去，而再复杂点的工作流，任务流程等等管理，都推荐使用airflow这样的框架来管理。</p>
<p>而至于说到大数据上的那些流式数据处理工具，实际上只有百分之几的公司因为业务需要必须上大数据，大部分公司是没必要上大数据的，因为大数据引入了太多的复杂度了，如果没有必要，而仅仅追求时髦去玩大数据，那显然是违背我们程序界公认的KISS原则的【Keep it simple and stupid.】。</p>
<h3 id="airflow">安装airflow</h3>
<div class="highlight"><pre><span></span><span class="err">pip install apache-airflow</span>
</pre></div>
<h3 id="_2">推荐起步</h3>
<p>推荐 项目工作目录下 <code>.env</code> 文件下写上：</p>
<div class="highlight"><pre><span></span><span class="err">export AIRFLOW_HOME=.</span>
</pre></div>
<p>这样使用pipenv或者其他工具在当前目录激活工作环境的时候，也自动激活了airflow在当前目录下工作的配置。这样我们airflow相关works配置的相关代码都放在这里。</p>
<p>激活虚拟环境后，然后我们有如下操作：</p>
<h3 id="_3">初始化数据库</h3>
<div class="highlight"><pre><span></span><span class="err">airflow initdb</span>
</pre></div>
<h3 id="webserver">启动webserver</h3>
<div class="highlight"><pre><span></span><span class="err">airflow webserver</span>
</pre></div>
<h2 id="_4">使用其他数据库</h2>
<p>刚开始玩下sqlite3数据库 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/makefileni-bu-lai-yi-fa-ma.html">makefile你不来一发吗
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#linux-ref">linux
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-18T00:00:00+08:00">2018年 6月 18日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="makefile">简单了解下makefile</h2>
<p>makefile一般只能在Linux环境下运行，更确切来说要有gnu make这个工具去运行Makefile这个文件。</p>
<p>makefile里面内容其实很丰富的，实际上甚至有点过于复杂了。不过有的时候只是简单使用其基本功能还是很便利的。</p>
<div class="highlight"><pre><span></span><span class="nv">project</span><span class="o">=</span>helloworld
<span class="nv">cflags</span><span class="o">=</span>-g -Wall  <span class="si">${</span><span class="nv">CCFLAGS</span><span class="si">}</span>

<span class="nf">${project}</span><span class="o">:</span> 
    <span class="si">${</span><span class="nv">CC</span><span class="si">}</span>  helloworld.c -o <span class="nv">$@</span> <span class="si">${</span><span class="nv">cflags</span><span class="si">}</span>

<span class="nf">clean</span><span class="o">:</span>
    rm <span class="si">${</span><span class="nv">project</span><span class="si">}</span>

<span class="nf">install</span><span class="o">:</span>
    cp <span class="si">${</span><span class="nv">project</span><span class="si">}</span> /usr/local/bin

<span class="nf">uninstall</span><span class="o">:</span>
    rm /usr/local/bin/<span class="si">${</span><span class="nv">project</span><span class="si">}</span>

<span class="nf">.PHONY</span><span class="o">:</span>
    clean uninstall install
</pre></div>
<p>为了便于理解，上面这个makefile我有意采用了一种和bash shell接近的风格。前面 <code>project=</code> 就是一个定义变量的行为。这个project变量就是本脚本的名字。然后makefile下面的主体部分格式如下:</p>
<div class="highlight"><pre><span></span><span class="nf">target</span><span class="o">:</span> <span class="n">prerequisites</span>
    the <span class="nb">command …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/docker.html">docker
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#linux-ref">linux
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">前言</h2>
<p>关于docker是什么请参看 <a href="https://docker_practice.gitee.io/introduction/what.html">这个网页</a> ，说docker将改变软件生态确实是不为过的。老实说在接触docker之后感觉之前学到的很多东西，比如linux系统相关的一些，ansible等等部署工具相关的一些，virtualbox和 vagrant相关的一些，都在慢慢过时和淘汰了。当然那些工具还是很有用的，说他们被淘汰了是有点过了，更确切来说，对于一般玩家来说，可以节省更多的精力和时间，而不需要折腾那些工具那些配置学习折腾个老半天了。</p>
<blockquote>
<p>That‘s why we love docker.</p>
</blockquote>
<p>但实际上docker带来的变化远远不止于只是一个可以节省开发者做某些事情的时间的一个不错的工具那么简单，其伴随着SPPS，软件即服务，更确切来说整个互联网的大背景下，应运而生的。与之相应的，开发者们顺应这个时代，在编码，软件应用的很多方面，都需要做出改变。请读者进一步阅读 https://12factor.net/zh_cn/ 里面的讨论。</p>
<p>实际上之前我折腾vagrant的时候，就很是认同这个理念： 那就是开发，测试，生产一致的环境，彻底解决，在这里可以运行，在这里就不行了的问题。而vagrant的控制virtualbox创建虚拟机的方式，在我看来显得略微笨拙了点，配置的繁琐，似乎并没有很好地解决这个问题 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/python-dateutilmo-kuai.html">python-dateutil模块
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                <p>一般能够使用python的内置模块datetime解决的问题或者简单写几个辅助函数就能解决的问题是没必要上 python-dateutil 模块的，但有的时候某些问题，上python-dateutil模块会非常的方便，然后我发现好多有名的模块都默认安装这个模块了。</p>
<h2 id="relativedelta">relativedelta</h2>
<p>某些问题，用datetime的replace将某个值设为0或者什么值，或者用timedelta来减去什么值，大部分都能解决，但有的时候，比如跨月份涉及到要考虑天数不等或者其他等等问题，用relativedelta还是很方便的。</p>
<p>总的说来涉及到datetime的某个跨度的计算问题，还是推荐使用 relativedelta函数。</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil.relativedelta</span> <span class="kn">import</span> <span class="n">relativedelta</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span>
<span class="n">sdt</span> <span class="o">=</span> <span class="n">now</span> <span class="o">-</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="n">months</span><span class="p">)</span>
</pre></div>


<h2 id="rrule">rrule</h2>
<p>虽然没有lrule，但根据上面的relativedelta配置的起始时间，然后指定结束时间，通过rrule函数来生成一个时间区间，有时是很方便的。</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dateutil.rrule</span> <span class="kn">import</span> <span class="n">rrule</span><span class="p">,</span> <span class="n">MONTHLY</span>
<span class="nb">list</span><span class="p">(</span><span class="n">rrule</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="n">MONTHLY</span><span class="p">,</span> <span class="n">dtstart</span><span class="o">=</span><span class="n">sdt</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="n">now …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/pythonpa-chong-zhi-zi-ti-fan-pa-chong.html">python爬虫之-字体反爬虫
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#za-xiang-ref">杂项
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                <p>在爬虫的时候，你分析网页会看到，某些东西看上去是乱码，其css设置了一种额外的字体。怎么破解里面的内容呢？</p>
<p>首先你需要把目标字体下载下来，通常这种字体有各种各样的名字，里面的具体字体codepoint也是随机的...</p>
<p>如果你下载一个fontcreator会看到具体哪个字对应哪个codepoint，而爬虫这边编码，我们需要使用python的 fonttools库来加载字体。</p>
<p>首先你需要下载好字体，保存好字体做好缓存工作。</p>
<p>见本文的参考资料2，然后就是利用 fonttools 模块加载目标字体。</p>
<div class="highlight"><pre><span></span><span class="err">font = TTFont(font_filename)</span>
</pre></div>


<p>然后就是分析这个字体的cmap tables的cmap数据，不同的字体似乎情况不同，这个要实际分析，由于fonttools这个模块文档较少，加上我对字体知识不太多，所以只能简单摸索下了。</p>
<div class="highlight"><pre><span></span><span class="err">font_mapping = font[&#39;cmap&#39;].tables[?].cmap</span>
</pre></div>


<p>如果你找到 font_mapping 了，字符 用python的 ord 函数处理下，就能得到目标字符的 unicode code point，也就是我们上面说的字体的code point，在这个 font_mapping 里面你会看到的，然后具体什么内容就出来了 …</p>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/shi-yong-cythonlai-jia-su-python.html">使用cython来加速python
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#pythonhao-huo-ban-ref">python好伙伴
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-06-14T00:00:00+08:00">2018年 6月 14日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="_1">找到性能瓶颈所在</h2>
<p>首先需要确认脚本或者某个函数具体到底是哪里出现了性能瓶颈：</p>
<div class="highlight"><pre><span></span><span class="err">python -m cProfile test.py</span>
</pre></div>
<p>或者使用jupyter notebook 的timeit 功能，或者自己写 time计时。</p>
<p>目前我知道的循环结构提速很明显，然后指定静态类型会提速。</p>
<p>一般的python代码cython都是支持的，但一般我们是重点去开发那个限速的目标函数，而不会到处优化的。</p>
<p>参考资料1的例子，没有加速，N设置为3000，用时 53.301s，加速之后，用时4.186s。然后没有加速的那个exp运算了很多很多次，大概花了一两秒的样子，所以我们看到原始python代码在循环操作上开销很大。某些关键计算如果循环次数太多，那么就要考虑上c扩展优化了。</p>
<p>在做性能测试的时候有一类耗时较多的操作是不用考虑c代码优化的，这类耗时多的操作就是IO等待型操作，有的是等待数据库IO操作，有的是等待文件读写IO操作，有的是等待网络IO请求等等。这些请求很多都和socket套接字请求相关。</p>
<h2 id="pyx">pyx文件</h2>
<p>关于pyx文件的更多请查看cython的官方手册。</p>
<p>下面重点讲一下 python模块包的管理方案，推荐是利用 setuptools 来，</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages …</span></pre></div>
                            </article>


                            <article>

                                <h1 class="page-header"><a
                                        href="https://docs.cdwanze.work/articles/httpzhi-shi.html">http知识
 </a></h1>

                                <section>
                                    posted in
                                    <a href="https://docs.cdwanze.work/categories.html#html5-ref">html5
                                    </a>
                                    <div class="recent-posts-time">
                                        <time pubdate="pubdate"
                                              datetime="2018-05-28T00:00:00+08:00">2018年 5月 28日
                                        </time>
                                    </div>
                                </section>
                                
<h2 id="http">HTTP知识</h2>
<h2 id="url">URL结构</h2>
<p>URL结构如下:</p>
<div class="highlight"><pre><span></span><span class="c">scheme:[//[user:password@]host[:port]][/]path[?query][#fragment]</span>
</pre></div>
<p>其中:</p>
<ul>
<li><strong>scheme:</strong> 描述访问服务器的协议，也就是如何获取该资源，最常见的是http，此外还有ftp等。</li>
<li><strong>user:password:</strong> 这里用于http认证</li>
<li><strong>host:</strong> 那里获取资源</li>
<li><strong>port:</strong> 连接端口号是多少</li>
<li><strong>path:</strong> 具体访问该资源的path</li>
<li><strong>query:</strong> 其他额外参数</li>
<li><strong>fragment:</strong> 片段，为client使用。还有一个params不太常用。</li>
</ul>
<p>URL是只支持ascii字符表示的，其他的字符要经过utf-8编码操作。具体转义字符是 <code>%</code> ，比如空格SPACE，具体在URL中的表示就是 <code>%20</code> 。即使是ascii里面，也有一些字符需要转义，然后比如中文字符等，也需要如此utf-8编码和转义。比如 "书"</p>
<div class="highlight"><pre><span></span><span class="err">    &gt;&gt;&gt; '书'.encode('utf-8')</span>
<span class="err">    b'\xe4\xb9 …</span></pre></div>
                            </article>

 <nav aria-label="Page Navigation">
    <ul class="pager">
        <li class="previous">
            <a href="https://docs.cdwanze.work/index.html" aria-label="Previous" >
                <span aria-hidden="true">&larr;<span>Previous</span></span>
            </a>
        </li>


        <li class="next">
            <a href="https://docs.cdwanze.work/index3.html" aria-label="Next" >
                <span aria-hidden="true">&rarr;<span>Next</span></span>
            </a>
        </li>

    </ul>
</nav>
                     </div>
                </div>
            </div>
    </div>

    </div>
    <div class="col-md-1"></div>

</div>


<div id="push"></div>


<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a> and updated by <a href="http://docs.cdwanze.work" title="cdwanze Home Page">cdwanze</a></li>
    </ul>
</div>
</footer>

        <script src="https://docs.cdwanze.work/theme/js/jquery.min.js"></script>
    <script src="https://docs.cdwanze.work/theme/js/bootstrap.min.js"></script>
    <script>
        function validateForm(query) {
            return (query.length > 0);
        }
    </script>

    <script>
        function adjust_search_width() {
            var w = document.documentElement.clientWidth;
            if ((w > 755) && (w < 975)) {
                plus_width = w - 755;
                $('.navbar-form .form-control').outerWidth(210 + plus_width);
            } else if (w >= 975) {
                $('.navbar-form .form-control').outerWidth(210 + 220);
            } else if (w <= 755) {
                $('.navbar-form .form-control').css('width', '100%')
            }
        }

        function adjust_markdown_css(){
            $('table').addClass('table');
            $('table').addClass('table-striped');
        }

        $(document).ready(function () {
            adjust_search_width();
            adjust_markdown_css();
        });

        window.onresize = function () {
            adjust_search_width();
        }

    </script>


    <script>
        (function ($) {
            // custom css expression for a case-insensitive contains()
            jQuery.expr[':'].Contains = function (a, i, m) {
                return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
            };

            function listFilter() {

                $('#findtag')
                    .change(function () {
                        var filter = $(this).val();
                        if (filter) {
                            // this finds all links in a list that contain the input,
                            // and hide the ones not containing the input while showing the ones that do
                            $('.list-of-tags').find("a:not(:Contains(" + filter + "))").parent().hide();
                            $('.list-of-tags').find("a:Contains(" + filter + ")").parent().show();
                        } else {
                            $('.list-of-tags').find("li").show();
                        }
                        return false;
                    })
                    .keyup(function () {
                        // fire the above change event after every letter
                        $(this).change();
                    });
            }

            //ondomready
            $(function () {
                listFilter($());
            });
        }(jQuery));

    </script>

    <script>
        $(function () {
            //点击回到顶部的元素
            $("#gotop").click(function (e) {
                //以1秒的间隔返回顶部
                $('body,html').animate({scrollTop: 0}, 1000);
            });
        });
    </script>

    <script>
        $('.page-header').hover(function () {
            $(this).css("color", '#3875d7')
        }, function () {
            $(this).css('color', '#8B0000')
        })
    </script>


    <script>
        $(document).ready(function () {
            $('a.slowscroll').click(function (event) {
                var $anchor = $(this);
                $('html, body').animate({scrollTop: $($anchor.attr('href')).offset().top}, 1500);
                event.preventDefault();
                // $('a.slowscroll').parent().removeClass('active');
                // $('.navbar-header').hide();
                // $anchor.parent().addClass('active');
            })
        })
        console.log('document init...')
    </script>




</body>
</html>